Bootstrapper.bindDependencyImmediate(function(){var Bootstrapper=window["Bootstrapper"];var ensightenOptions=Bootstrapper.ensightenOptions;window.integrationSetup=function(){var cds=Bootstrapper.Cookies.get("s_ensCDS")==="1";window.consentSync=function(){localStorage.setItem("TWDC-DTCI_ENSIGHTEN_BLOCKED_URLS","");for(var temp=1;temp<11;temp++)oneTrustData.purpose.consents[temp]=oneTrustData.purpose.consents[temp]||false;oneTrustData.purpose.consents[11]=true;oneTrustData.purpose.consents[12]=true;
oneTrustData.purpose.consents[13]=oneTrustData.specialFeatureOptins[1]||false;oneTrustData.purpose.consents[14]=oneTrustData.specialFeatureOptins[2]||false;for(var vendorName in Bootstrapper.vendor_purpose_map){var curVendor=Bootstrapper.vendor_purpose_map[vendorName];for(var purposeIndex=0;purposeIndex<curVendor.purposes.length;purposeIndex++)if(oneTrustData.purpose.consents[curVendor.purposes[purposeIndex]]!==undefined&&oneTrustData.purpose.consents[curVendor.purposes[purposeIndex]]==false){curVendor.vendorConsent=
Bootstrapper.vendor_purpose_map[vendorName].vendorConsent=false;break}if(curVendor.iabID.length>0&&oneTrustData.vendor.consents[curVendor.iabID]===undefined)oneTrustData.vendor.consents[curVendor.iabID]=false;if(curVendor.vendorConsent&&curVendor.iabID.length>0&&oneTrustData.vendor.consents[curVendor.iabID]==false)curVendor.vendorConsent=Bootstrapper.vendor_purpose_map[vendorName].vendorConsent=false;if(curVendor.vendorConsent==false){Bootstrapper.Logging.logMsg("Blocking Vendor: "+vendorName);if(!cds){var ensWhiteList=
(!!window.gateway.environment.whitelist?window.gateway.environment.whitelist:ensClientConfig.whitelist)[ensClientConfig.cookieTypes[0]];for(var consentVendor in ensWhiteList)if(ensWhiteList[consentVendor].displayName.toLowerCase()===vendorName.toLowerCase()&&localStorage["TWDC-DTCI_ENSIGHTEN_BLOCKED_URLS"].indexOf(vendorName)===-1){gateway.blockTag(ensWhiteList[consentVendor]);break}}else gateway.blockTag({displayName:vendorName,tag:curVendor.validation})}else Bootstrapper.Logging.logMsg("Allowing Vendor: "+
vendorName)}if(!cds)gateway.updatePreferences();Bootstrapper.Logging.logMsg("consent sync callback complete");var ot=window.oneTrustData||{},purpose=ot.purpose||{},consents=purpose.consents||{},optins=ot.specialFeatureOptins||{},otEventStatus=ot.eventStatus;if(consents[1])if(document.referrer&&sessionStorage)sessionStorage.setItem("__previous_referrer",document.referrer);if(consents[1]&&consents[2]&&consents[3]&&consents[4]&&consents[7]&&consents[9]&&consents[10]){if(window.localStorage){if(Bootstrapper.Cookies)localStorage.setItem("_prevDcf",
Bootstrapper.Cookies.get("_dcf"));if(!localStorage.getItem("_dcf"))localStorage.setItem("_firstDcf",1);localStorage.setItem("_dcf","1")}document.cookie="_dcf\x3d1; path\x3d/;"}else{if(window.localStorage){if(Bootstrapper.Cookies)localStorage.setItem("_prevDcf",Bootstrapper.Cookies.get("_dcf"));if(!localStorage.getItem("_dcf"))localStorage.setItem("_firstDcf",1);localStorage.setItem("_dcf","0")}document.cookie="_dcf\x3d0; path\x3d/;"}if(window._otCount>=2&&otEventStatus==="useractioncomplete")setTimeout(function(){var otEvent=
new CustomEvent("ot.updated",{detail:ot});document.dispatchEvent(otEvent)},100)};window.ensOTListener=false;function oneTrustOnload(){if(!window.ensOTListener&&typeof __tcfapi==="function"){window.ensOTListener=true;__tcfapi("addEventListener",2,function(tcData,success){if(success){window._otCount++;var tcEventStatus=tcData&&tcData.eventStatus||"";if(tcEventStatus==="useractioncomplete"||tcEventStatus==="cmpuishown")if(tcData.purpose.consents["1"]!==undefined||tcData.vendor.consents["1"]!==undefined||
tcData.specialFeatureOptins["1"]!==undefined){window.oneTrustData=tcData;gateway.consentCookies.setCookie("TWDC_Vendor_Consent",1);window.consentSync()}else{if(tcEventStatus==="useractioncomplete"){gateway.consentCookies.setCookie("TWDC_Vendor_Consent",0);if(!cds)gateway.updatePreferences();if(window.localStorage){if(Bootstrapper.Cookies)localStorage.setItem("_prevDcf",Bootstrapper.Cookies.get("_dcf"));if(!localStorage.getItem("_dcf"))localStorage.setItem("_firstDcf",1);localStorage.setItem("_dcf",
"0")}document.cookie="_dcf\x3d0; path\x3d/;";document.dispatchEvent(new Event("ot.optout"))}}else if(tcData&&tcData.purpose&&tcData.purpose.consents){var consents=tcData.purpose.consents;if(consents[1]&&consents[2]&&consents[3]&&consents[4]&&consents[7]&&consents[9]&&consents[10]){document.cookie="_dcf\x3d1; path\x3d/;";localStorage&&localStorage.setItem("_dcf","1");Bootstrapper.Logging.logMsg("update: ad consent")}else{document.cookie="_dcf\x3d0; path\x3d/;";localStorage&&localStorage.setItem("_dcf",
"0");Bootstrapper.Logging.logMsg("update: ad reject")}}document.dispatchEvent(new Event("ot.ready"))}else Bootstrapper.Logging.logMsg("Error in tcfapi event listener")})}}if(OneTrust&&OneTrust.loaded)oneTrustOnload();else document.addEventListener("ot.loaded",oneTrustOnload);var needToTrackShown=true,allowAll=false,rejectAll=false,tracking={"c9":"consent choices made","events":"event200"};tracking.vid=""+(new Date).getTime()+Math.floor(Math.random()*1E3);function track(msg,reload){var queryString=
Object.keys(tracking).map(key=>{return encodeURIComponent(key)+"\x3d"+encodeURIComponent(tracking[key])}).join("\x26");var prefix="https://sinfo.dtcidev.co/b/ss/wdgespdcfespncomdev/0?",trackImg=prefix+queryString;var beacon=new Image;if(reload){beacon.onload=function(){window.location.reload()};beacon.onerror=function(){window.location.reload()}}beacon.src=trackImg}document.addEventListener("ot.updated",function(e){tracking.events="event200";var data=e&&e.detail;if(data){var consents=[{key:"c67",
data:data.purpose.consents},{key:"c68",data:data.vendor.consents},{key:"c71",data:data.specialFeatureOptins}];consents.map(function(a){var keys=Object.keys(a.data),values="",key;for(var i=0;i<keys.length;i++){key=keys[i];if(a.data[key]==true)values+=key+","}if(values!="")values=values.substring(0,values.length-1);else values="no consent given";tracking[a.key]=values;if(a.key=="c68")tracking.l3=values})}if(allowAll){tracking.c9="consent choices made";tracking.c66="opt in:all";track("TRACK: allow all consent",
true)}else{tracking.c9="consent choices made";tracking.c66="opt in:partial";track("TRACK: partial update",true)}});function trackManage(){tracking.c9="manage impression";tracking.events="event201";track("TRACK: update was shown????")}document.addEventListener("ot.ready",function(){if(needToTrackShown){var allowButton=document.getElementById("accept-recommended-btn-handler");if(allowButton)allowButton.addEventListener("click",function(){allowAll=true});var rejectButton=document.getElementById("onetrust-reject-all-handler");
if(rejectButton)rejectButton.addEventListener("click",function(){rejectAll=true});document.addEventListener("ot.optout",function(){setTimeout(function(){tracking.c9="consent choices made";tracking.events="event200";if(rejectAll)tracking.c66="opt out:reject all";else tracking.c66="opt out:all";tracking.c67="no consent given";tracking.c68="no consent given";track("track opt out of all")},100)});var acceptButton=document.getElementById("onetrust-accept-btn-handler");if(acceptButton){tracking.c9="banner impression";
tracking.events="event199";track("TRACK: overlay was shown");acceptButton.addEventListener("click",function(){allowAll=true})}var cached=OneTrust.ToggleInfoDisplay;if(cached)window.OneTrust.ToggleInfoDisplay=function(){trackManage();cached()};if(window.jQuery)jQuery("a.ot-sdk-show-settings").on("click",trackManage);needToTrackShown=false}})};window.nonIABIntegrationSetup=function(){var cds=Bootstrapper.Cookies.get("s_ensCDS")==="1",fullAccept=false,fullReject=false,partialAccept=false;var consentSync=
function(consents){localStorage.setItem("TWDC-DTCI_ENSIGHTEN_BLOCKED_URLS","");var vendorsToBlock=[],vendorsToAllow=[];var vendorPurposeMap=Bootstrapper.vendor_purpose_map||[];vendorPurposeMap.forEach(function(map){if(!consents[map["classification"]])vendorsToBlock=vendorsToBlock.concat(map["vendors"]);else vendorsToAllow=vendorsToAllow.concat(map["vendors"])});var ensWhiteList=(!!window.gateway.environment.whitelist?window.gateway.environment.whitelist:ensClientConfig.whitelist)[ensClientConfig.cookieTypes[0]],
ensObject={},preBlockList=localStorage.getItem("TWDC-DTCI_ENSIGHTEN_BLOCKED_URLS");ensWhiteList.forEach(function(wli){ensObject[wli.displayName]=wli.tag});if(vendorsToBlock.length){vendorsToBlock=vendorsToBlock.filter(function(t,index){return vendorsToBlock.indexOf(t)==index});vendorsToBlock.forEach(function(vtb){if(ensObject[vtb]&&preBlockList.indexOf(vtb)===-1){Bootstrapper.Logging.logMsg("OT NON IAB LOG: ","Blocking Vendor: ",{displayName:vtb,tag:ensObject[vtb]});gateway.blockTag({displayName:vtb,
tag:ensObject[vtb]})}})}if(vendorsToAllow.length)vendorsToAllow=vendorsToAllow.filter(function(t,index){return vendorsToAllow.indexOf(t)==index});if(!cds)gateway.updatePreferences();Bootstrapper.Logging.logMsg("OT NON IAB LOG: ","consent sync callback complete");if(document.referrer&&sessionStorage)sessionStorage.setItem("__previous_referrer",document.referrer);if(!localStorage.getItem("_dcf"))localStorage.setItem("_firstDcf",1);localStorage.setItem("_prevDcf",Bootstrapper.Cookies.get("_dcf"));if(consents["C0002"]||
consents["C0003"]||consents["C0004"]){var cGroupsToCheck=[];try{if(OneTrust&&typeof OneTrust.GetDomainData==="function"){var dData=OneTrust.GetDomainData();if(typeof dData==="object"&&dData.Groups&&Array.isArray(dData.Groups)){var gps=dData.Groups;gps.forEach(function(gp){if(gp.ShowInPopupNonIAB){var ckies=gp.Cookies,ckArr=Array.isArray(ckies),fpc=gp.FirstPartyCookies,fpcArr=Array.isArray(fpc),gvids=gp.GeneralVendorsIds,gvidsArr=Array.isArray(gvids),hsts=gp.Hosts,hstsArr=Array.isArray(hsts);if(ckArr&&
ckies.length||fpcArr&&fpc.length||gvidsArr&&gvids.length||hstsArr&&hsts.length)cGroupsToCheck.push(gp.OptanonGroupId)}})}}}catch(e){}if(cGroupsToCheck.length){var ffg=true;cGroupsToCheck.forEach(function(gp){if(!consents[gp])ffg=false});if(ffg){Bootstrapper.Logging.logMsg("OT NON IAB LOG: ","Full Consent Given");fullAccept=true}else{Bootstrapper.Logging.logMsg("OT NON IAB LOG: ","Partial Accept on Consent");partialAccept=true}}else if(consents["C0002"]&&consents["C0003"]&&consents["C0004"]){Bootstrapper.Logging.logMsg("OT NON IAB LOG: ",
"Full Consent Given");fullAccept=true}else{Bootstrapper.Logging.logMsg("OT NON IAB LOG: ","Partial Accept on Consent");partialAccept=true}localStorage.setItem("_dcf","1");document.cookie="_dcf\x3d1; path\x3d/;"}else{Bootstrapper.Logging.logMsg("OT NON IAB LOG: ","Full Reject on Consent");fullReject=true;localStorage.setItem("_dcf","0");document.cookie="_dcf\x3d0; path\x3d/;"}setTimeout(function(){Bootstrapper.Logging.logMsg("OT NON IAB LOG: ","Sending ot.updated event");var otEvent=new CustomEvent("ot.updated",
{detail:{consents:consents,status:{fullAccept:fullAccept,fullReject:fullReject,partialAccept:partialAccept},vendorsAllowed:vendorsToAllow}});document.dispatchEvent(otEvent)},100)};var vid=""+(new Date).getTime()+Math.floor(Math.random()*1E3),vlistDisplay=false,toggleVlist=function(){vlistDisplay=false},firstScreen=false;var track=function(obj,reload){obj["c75"]="no";obj["c72"]="emea";obj["vid"]=vid;var queryString=Object.keys(obj).map(key=>{return encodeURIComponent(key)+"\x3d"+encodeURIComponent(obj[key])}).join("\x26");
var prefix="https://sinfo.dtcidev.co/b/ss/wdgespdcfespncomdev/0?",trackImg=prefix+queryString;Bootstrapper.Logging.logMsg("OT NON IAB LOG: ","Tracking Img: ",trackImg);var beacon=new Image;if(reload){beacon.onload=function(){window.location.reload()};beacon.onerror=function(){window.location.reload()}}toggleVlist();beacon.src=trackImg};var getOtGroups=function(toStr){var otGroups={};if(OnetrustActiveGroups){var otFilter=OnetrustActiveGroups.split(",");otFilter=otFilter.filter(function(i){return i});
otFilter.forEach(function(g){otGroups[g]=1})}return toStr?JSON.stringify(otGroups):otGroups};var onLoadFired=false;var oneTrustOnload=function(){if(onLoadFired)return;onLoadFired=true;var bannerImpression=Bootstrapper.Cookies.get("OptanonAlertBoxClosed")=="";Bootstrapper.Logging.logMsg("OT NON IAB LOG: ","Do we have a banner impression: ",bannerImpression);if(bannerImpression){firstScreen=true;var bannerImpressionMeta={"c9":"banner impression","c74":"ot banner","events":"event199"};Bootstrapper.Logging.logMsg("OT NON IAB LOG: ",
"Tracking: Initial Banner Impression With Attributes: ",bannerImpressionMeta);track(bannerImpressionMeta)}if(OneTrust&&typeof OneTrust.OnConsentChanged==="function")OneTrust.OnConsentChanged(function(){var prevOTGroups=localStorage.getItem("_prevOTGroups");Bootstrapper.Logging.logMsg("OT NON IAB LOG: ","On OT Change, Previous OT Groups: ",prevOTGroups);var otGroups=getOtGroups(),curGroupsString=JSON.stringify(otGroups);Bootstrapper.Logging.logMsg("OT NON IAB LOG: ","On OT Change, Cur OT Groups: ",
otGroups);Bootstrapper.Logging.logMsg("OT NON IAB LOG: ","Setting previous consents as: ",otGroups);localStorage.setItem("_prevOTGroups",curGroupsString);if(prevOTGroups!=curGroupsString){Bootstrapper.Logging.logMsg("OT NON IAB LOG: ","Consent did change, set proper cookies");if(otGroups["C0002"]||otGroups["C0003"]||otGroups["C0004"])gateway.consentCookies.setCookie("TWDC_Vendor_Consent",1);else gateway.consentCookies.setCookie("TWDC_Vendor_Consent",0);if(prevOTGroups!==null)sessionStorage.setItem("s_ensNIABCChged",
1);consentSync(otGroups)}else{Bootstrapper.Logging.logMsg("OT NON IAB LOG: ","Consent didnt change, set proper cookies");if(otGroups["C0002"]&&otGroups["C0003"]&&otGroups["C0004"]){document.cookie="_dcf\x3d1; path\x3d/;";localStorage.setItem("_dcf","1");Bootstrapper.Logging.logMsg("OT NON IAB LOG: ","update: ad consent")}else{document.cookie="_dcf\x3d0; path\x3d/;";localStorage.setItem("_dcf","0");Bootstrapper.Logging.logMsg("OT NON IAB LOG: ","update: ad reject")}}});var page=location.href,cblTest=
/www[_\.]disney[_\.]bg(-(dev\d+|qa)\.fe\.mh\.disney\.io)?\/adsales-(bulgaria|croatia|serbia|slovenia)/.test(page);if(!!cblTest&&!!window.OneTrust&&typeof window.OneTrust.changeLanguage==="function"){window.OneTrust.changeLanguage("en");if(firstScreen)var lcheck=setInterval(function(){var elemToCheck=document.querySelector("#onetrust-pc-btn-handler");if(!elemToCheck)return;var curText=elemToCheck.innerText;if(curText&&curText.toLowerCase()==="manage preferences"){document.dispatchEvent(new Event("ot.ready"));
clearInterval(lcheck)}},500);else document.dispatchEvent(new Event("ot.ready"))}else document.dispatchEvent(new Event("ot.ready"))};if(OneTrust&&OneTrust.loaded)oneTrustOnload();else document.addEventListener("ot.loaded",oneTrustOnload);document.addEventListener("ot.updated",function(e){var tracking={"c9":"consent choices made","events":"event200"};var data=e&&e.detail&&e.detail.consents,status=e&&e.detail&&e.detail.status,allowedVendors=e&&e.detail&&e.detail.vendorsAllowed;Bootstrapper.Logging.logMsg("OT NON IAB LOG: ",
"Trying to respond to ot.updated event with data: ",e);if(data){var values="",trackingKey="c67";for(var index=1;index<=4;index++){cCurConsent="C000"+index;if(data[cCurConsent])values+=cCurConsent+","}if(values!="")values=values.substring(0,values.length-1);if(values&&!status.fullReject)tracking[trackingKey]=values}if(allowedVendors&&allowedVendors.length){var vlist=allowedVendors.join(",");tracking.l3=tracking.c68=vlist}if(status.fullAccept){tracking.c66="full opt in";Bootstrapper.Logging.logMsg("OT NON IAB LOG: ",
"Tracking: Opt In All with attributes: ",tracking);track(tracking,true)}else if(status.fullReject){tracking.c66="full opt out";Bootstrapper.Logging.logMsg("OT NON IAB LOG: ","Tracking: Reject All with attributes: ",tracking);track(tracking,true)}else if(status.partialAccept){tracking.c66="partial opt in";Bootstrapper.Logging.logMsg("OT NON IAB LOG: ","Tracking: Opt In Partial with attributes: ",tracking);track(tracking,true)}});var wrapBannerAnalytics=function(){vlistDisplay=false;var bannerContainer=
document.querySelector("#onetrust-banner-sdk");if(bannerContainer){var btnsAndBase=[{"elem":"#onetrust-pc-btn-handler","evObj":{"events":"event202"},"type":"Save Settings","triggerScreen":true},{"elem":"#onetrust-reject-all-handler","evObj":{"events":"event210"},"type":"Reject All"},{"elem":"#onetrust-accept-btn-handler","evObj":{"events":"event209"},"type":"Accept All"}];btnsAndBase.forEach(function(b){var curButton=bannerContainer.querySelector(b.elem);if(curButton)curButton.addEventListener("click",
function(e){var evObj=b.evObj;evObj["c9"]="click on "+b.type+" button with text: "+e.target.innerText;evObj["c74"]="ot banner";Bootstrapper.Logging.logMsg("OT NON IAB LOG: ","Tracking: Click on Banner Button With Attributes: ",evObj);track(evObj);if(b.triggerScreen){var tsObj={"c9":"banner impression","c74":"preferences modal","events":"event203"};Bootstrapper.Logging.logMsg("OT NON IAB LOG: ","Tracking: Impression of Preferences Screen On Initial Consent Choice With Attributes: ",tsObj);track(tsObj)}})})}var prefBtns=
[{"elem":"#accept-recommended-btn-handler","evObj":{"events":"event209"},"type":"Accept All"},{"elem":".ot-pc-refuse-all-handler","evObj":{"events":"event210"},"type":"Reject All","checkScreen":true},{"elem":".save-preference-btn-handler","evObj":{"events":"event211"},"type":"Save Settings","checkScreen":true}];prefBtns.forEach(function(b){var curButton=document.querySelector(b.elem);if(curButton)curButton.addEventListener("click",function(e){var evObj=b.evObj;evObj["c9"]="click on "+b.type+" button with text: "+
e.target.innerText;evObj["c74"]="preferences modal";if(b.checkScreen)evObj["c74"]=vlistDisplay?"vendors modal":"preferences modal";Bootstrapper.Logging.logMsg("OT NON IAB LOG: ","Tracking: Click on Preferences Button With Attributes: ",evObj);track(evObj)})});var accordions=document.querySelectorAll(".ot-accordion-layout button[ot-accordion]");if(accordions.length)accordions.forEach(function(acc){acc.addEventListener("click",function(e){var elem=e.target,expanded=elem.getAttribute("aria-expanded")!=
"true";if(!expanded)return;var parent=elem.parentElement,stack=parent.getAttribute("data-optanongroupid")||"n/a",evObj={"c9":"preference stack expanded "+stack,"c74":"preferences modal","events":"event204"};Bootstrapper.Logging.logMsg("OT NON IAB LOG: ","Tracking: Expand of Consent Preferences Stack With Attributes: ",evObj);track(evObj)})});var toggles=document.querySelectorAll('input[type\x3d"checkbox"][id^\x3d"ot-group-id"][aria-checked]');if(toggles.length)toggles.forEach(function(t){t.addEventListener("click",
function(e){var elem=e.target,checked=!!elem.checked,onOff=checked?" on":" off",ev=checked?"event205":"event206",group=elem.getAttribute("data-optanongroupid")||"n/a";var evObj={"c9":group+onOff,"c74":"preferences modal","events":ev};Bootstrapper.Logging.logMsg("OT NON IAB LOG: ","Tracking: Toggle of Consent Preferences With Attributes: ",evObj);track(evObj)})});var vendorScreenClicks=document.querySelectorAll(".category-host-list-handler");if(vendorScreenClicks.length)vendorScreenClicks.forEach(function(s){s.addEventListener("click",
function(e){var elem=e.target,stack=elem.getAttribute("data-parent-id")||"not set";var evObj={"c9":"banner impression","c74":"vendors modal","events":"event208"};Bootstrapper.Logging.logMsg("OT NON IAB LOG: ","Tracking: Vendor Modal Open With Attributes: ",evObj);track(evObj);var clObj={"c9":"click on vendor button under stack "+stack,"c74":"preferences modal","events":"event212"};Bootstrapper.Logging.logMsg("OT NON IAB LOG: ","Tracking: Click on Vendor Button With Attributes: ",clObj);track(clObj);
vlistDisplay=true;var backListener=document.querySelector(".back-btn-handler");if(backListener)backListener.addEventListener("click",toggleVlist,{"once":true})})})};function trackManage(){if(!firstScreen)wrapBannerAnalytics();var tsObj={"c9":"banner impression","c74":"preferences modal","events":"event203"};Bootstrapper.Logging.logMsg("OT NON IAB LOG: ","Tracking: Impression of Preferences Screen After First Consent Choice With Attributes: ",tsObj);track(tsObj);var clObj={"c9":"manage impression",
"c74":"preferences modal","events":"event201"};Bootstrapper.Logging.logMsg("OT NON IAB LOG: ","Tracking: Click on Manage Link in Footer With Attributes: ",clObj);track(clObj)}document.addEventListener("ot.ready",function(){var cached=OneTrust.ToggleInfoDisplay;if(cached)window.OneTrust.ToggleInfoDisplay=function(){trackManage();cached()};if(firstScreen)wrapBannerAnalytics()})};document.dispatchEvent(new Event("integrationReady"))},3780073,[3906570],649567,[633864],24);