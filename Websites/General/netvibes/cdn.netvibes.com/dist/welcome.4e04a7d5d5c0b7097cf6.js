!function(e){function t(t){for(var r,a,s=t[0],d=t[1],l=t[2],c=0,m=[];c<s.length;c++)a=s[c],i[a]&&m.push(i[a][0]),i[a]=0;for(r in d)Object.prototype.hasOwnProperty.call(d,r)&&(e[r]=d[r]);for(u&&u(t);m.length;)m.shift()();return o.push.apply(o,l||[]),n()}function n(){for(var e,t=0;t<o.length;t++){for(var n=o[t],r=!0,s=1;s<n.length;s++){var d=n[s];0!==i[d]&&(r=!1)}r&&(o.splice(t--,1),e=a(a.s=n[0]))}return e}var r={},i={117:0},o=[];function a(t){if(r[t])return r[t].exports;var n=r[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,a),n.l=!0,n.exports}a.e=function(e){var t=[],n=i[e];if(0!==n)if(n)t.push(n[2]);else{var r=new Promise(function(t,r){n=i[e]=[t,r]});t.push(n[2]=r);var o,s=document.createElement("script");s.charset="utf-8",s.timeout=120,a.nc&&s.setAttribute("nonce",a.nc),s.src=function(e){return a.p+"classic."+({}[e]||e)+"."+{121:"84bdce7c496db7baad92"}[e]+".js"}(e);var d=new Error;o=function(t){s.onerror=s.onload=null,clearTimeout(l);var n=i[e];if(0!==n){if(n){var r=t&&("load"===t.type?"missing":t.type),o=t&&t.target&&t.target.src;d.message="Loading chunk "+e+" failed.\n("+r+": "+o+")",d.name="ChunkLoadError",d.type=r,d.request=o,n[1](d)}i[e]=void 0}};var l=setTimeout(function(){o({type:"timeout",target:s})},12e4);s.onerror=s.onload=o,document.head.appendChild(s)}return Promise.all(t)},a.m=e,a.c=r,a.d=function(e,t,n){a.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},a.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},a.t=function(e,t){if(1&t&&(e=a(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(a.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)a.d(n,r,function(t){return e[t]}.bind(null,r));return n},a.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return a.d(t,"a",t),t},a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},a.p="",a.oe=function(e){throw console.error(e),e};var s=window.webpackJsonp=window.webpackJsonp||[],d=s.push.bind(s);s.push=t,s=s.slice();for(var l=0;l<s.length;l++)t(s[l]);var u=d;o.push([460,0,1]),n()}({460:function(e,t,n){n(63),n(54),n(69),n(75),n(76),n(77),n(64),n(78),n(79),n(650),e.exports=n(664)},650:function(e,t,n){"use strict";var r,i;r=[n(3),n(83),n(2),n(269),n(44),n(662),n(663),n(356)],void 0===(i=function(e,t,n,r,i,o,a){n.onReady(function(){switch(t.parse(document.body),document.body.getElements("time[datetime]").forEach(function(e){e.setText(new Date(e.getAttribute("datetime")).strftime("%Y-%m-%d"))}),document.body.getAttribute("data-page")){case"dot/ingredient":a();break;case"product/payment":o();break;case"index/index":r.initAuthModal();break;case"auth/index":case"auth/connect":r.initAuthPage();break;case"index/wizardry":document.body.addEvent("click .wizardry-link",function(t){e.stop(t),r.displayAuthModal("signup",{callbackUrl:n.Config.urls.startpage+"/dashboard?wizardry=index",wizardry:"agency"})})}})}.apply(t,r))||(e.exports=i)},662:function(e,t,n){"use strict";var r,i;r=[n(1),n(8),n(3),n(2),n(6),n(27),n(4),n(41)],void 0===(i=function(e,t,n,r,i,o,a,s){var d=e.createElement,l={paymentEls:{},formFields:{},product:"",euCountriesWithoutFrance:[_("Albania"),_("Austria"),_("Belgium"),_("Croatia"),_("Czech Republic"),_("Denmark"),_("Estonia"),_("Finland"),_("Germany"),_("Greece"),_("Hungary"),_("Ireland"),_("Italy"),_("Latvia"),_("Lithuania"),_("Luxembourg"),_("Netherlands"),_("Norway"),_("Poland"),_("Portugal"),_("Romania"),_("Slovakia"),_("Slovenia"),_("Spain"),_("Sweden"),_("Switzerland"),_("United Kingdom")],init:function(e,t,n){if(r.isIOSApp())return window.alert(_("VIP/Premium upgrades are not available via this app. Please visit {0} with your browser").format(r.Config.urls.startpage)),void(window.location=r.Config.urls.startpage);"premium"===window.location.pathname.split("/")[2]?this.product="premium":"vip"===window.location.pathname.split("/")[2]&&(this.product="vip"),this.paymentEls.cards=document.body.getElement(".product-payment-cards"),this.paymentEls.container=document.body.getElement(".product-payment-contact"),this.buildForm(e,t,n)},buildForm:function(n,i,o){function a(e,t){return{tag:"div",class:"product-payment-form-field-row",html:[e,t]}}this.paymentEls.container.addContent({tag:"div",class:"product-payment-form-fields",html:[a(this.buildInput(i,"name",_("Full name"),!0),this.buildInput(i,"address",_("Address"),!0)),a(this.buildInput(i,"organization",_("Organization"),!1),this.buildInput(i,"city",_("City"),!0)),a(this.buildInput(i,"vat",_("VAT number"),!1),this.buildInput(i,"state",_("State/Province"),!1)),a(this.buildInput(i,"title",_("Title"),!1),this.buildInput(i,"zipCode",_("Zip code"),!0)),a(this.buildInput(i,"phone",_("Phone number"),!0),d("fieldset",{class:"required"}).addContent(this.formFields.country=new t.Select({className:"large",attributes:{name:"country"}}))),a({tag:"fieldset",class:"product-payment-terms-check",html:[this.formFields.terms=new t.Checkbox({className:"green",attributes:{name:"terms",required:!0}}),_("I accept the {0}Terms of Sale{1}.").format('<a target="_blank" class="nv-product-link" href="'+r.getWelcomeURL("premium-tos")+'">',"</a>")]},{tag:"p",class:"product-payment-infos nv-product-notice",text:_("The credit card holder and the issuing bank for the credit card must be located in the same country.")})]}),e.createElement("input",{type:"hidden",name:" product",value:this.product}).inject(this.paymentEls.container),this.formFields.terms.getInputElement().addClassName("floater"),this.formFields.terms.getInputElement().addEvent("change",this.onCheckboxChecked.bind(this)),this.formFields.name.focus(),this.buildCountrySelect(n,i,o)},getPrefill:function(e,t){return e[t]||""},buildInput:function(e,n,r,i){var o=this.getPrefill(e,n),a="vat"===n?"vat":"";"organization"===n&&(a="organization");var s={value:o&&"0"!==o&&""!==o?o:"",name:n,placeholder:r};i&&(s.required="");var l=d("fieldset",{class:i?"required":""+a}).addContent(this.formFields[n]=new t.Text({className:"large",attributes:s}));return this.formFields[n].getInputElement().addEvent("keyup",this.onInputKeyUp.bind(this)),l},buildCountrySelect:function(e,t,n){var i=[],o=(this.getPrefill(t,"country")||r.Globalization.userLocale).toUpperCase();for(var a in e)i.push({label:e[a],value:a,selected:a===o});this.formFields.country.putOptions(i),this.formFields.country.addEvent("onChange",this.onCountrySelected.bind(this,n)),this.onCountrySelected(n)},buildPaymentCards:function(e){if(!this.productRegion||e!==this.productRegion){this.paymentEls.cards.empty(!0),this.productRegion=e;var t=[{name:"visa",value:"1"},{name:"mastercard",value:"3"},{name:"amex",value:"2"}];"eu"===e&&t.unshift({name:"cb",value:"130"});var n=t.map(function(e){return d("fieldset").addContent(d("input",{type:"image",name:e.name,value:e.value,src:"/img/cards/"+e.name+".png"}))});this.paymentEls.cards.addContent(n),this.paymentEls.cards.addEventListener("load",function(){this.paymentEls.cards.addEvent("click",this.onCardsClick.bind(this))}.bind(this),!0)}},changePrice:function(e,t){document.body.getElements(".price").forEach(function(n){n.setText(t.amount[e])})},setInputError:function(e){this.formFields[e].getInputElement().getParent("fieldset").addClassName("nv-product-error"),document.body.getElement(".uwa-message.error.product-message-error")||d("div",{class:"product-message-error uwa-message error",text:_("Please fill in all the required fields.")}).inject(document.body.getElement(".product-payment-contact h2, h4.nv-product-infos-title"),"after")},onInputKeyUp:function(e){var t=n.getElement(e);t.getParent("fieldset").hasClassName("nv-product-error")&&t.getParent("fieldset").toggleClassName("nv-product-error"),"organization"===t.name&&(this.formFields.vat.setDisabled(!t.value),!document.body.getElement(".nv-product-error")&&document.body.getElement(".uwa-message.error.product-message-error")&&document.body.getElement(".uwa-message.error.product-message-error").remove())},onCheckboxChecked:function(e){var t=n.getElement(e),r=this.formFields[t.name].getContent();r.getParent("fieldset").hasClassName("nv-product-error")&&(r.getParent("fieldset").toggleClassName("nv-product-error"),document.body.getElement(".nv-product-error")||document.body.getElement(".uwa-message.error.product-message-error").remove())},hideVatField:function(e){var t=window.productPaymentAllCountries,n=this.paymentEls.container.getElement(".vat"),r=this.paymentEls.container.getElement(".organization");-1===this.euCountriesWithoutFrance.indexOf(t[e])?(n.setStyle("display","none"),n.getElement("input").value=""):(n.setStyle("display","block"),n.getElement("input").disabled=!r.getElement("input").value)},onCountrySelected:function(e){var t=this.formFields.country.getValue();i.getProductRegion({countryCode:t}).done(function(n){this.buildPaymentCards(n.region),this.changePrice(e,n),this.hideVatField(t)}.bind(this))},onCardsClick:function(e){if(n.stop(e),this.checkFormError(),!document.body.getElement(".nv-product-error")&&this.formFields.terms.isChecked()){var t=a.getInputsValue(this.paymentEls.container),r=n.findElement(e,".product-payment-cards input"),d=n.findElement(e,".product-payment-cards fieldset"),l=new s({autostart:!0,size:20,delay:0});d.addClassName("spinning"),d.addContent(l.toElement()),t.card=r.value,i.productPayment(t).done(function(e){this.updatedProfile(e.url)}.bind(this),function(e){d.removeClassName("spinning"),l.stop(),"object"==typeof e?(o.displayError(e.message),this.colorizeError(e)):o.displayError(e)}.bind(this)),this.paymentEls.cards.removeEvent("click")}},onUpdateClick:function(e){if(n.stop(e),this.checkFormError(),!document.body.getElement(".nv-product-error")&&this.formFields.terms.isChecked()){var t=a.getInputsValue(this.paymentEls.container);i.productUpdate(t).done(function(){this.updatedProfile()}.bind(this),function(e){o.displayError(e),this.colorizeError(e)}.bind(this))}else o.displayError("product_payment")},updatedProfile:function(e){window.location=e||"/account/premium"},checkFormError:function(){for(var e in this.formFields){var n=this.formFields[e].getInputElement().getParent("fieldset").hasClassName("required")&&""===this.formFields[e].getContent().value,r=this.formFields[e]instanceof t.Checkbox&&!this.formFields[e].isChecked();(n||r)&&this.setInputError(this.formFields[e].getInputElement().name)}},colorizeError:function(e){if(e)for(var t in e)"message"!==t&&this.setInputError(t)}};return function(){l.init(window.productPaymentAllCountries,window.productPaymentUserInfos,window.productPaymentType)}}.apply(t,r))||(e.exports=i)},663:function(e,t,n){"use strict";var r,i;r=[n(1),n(9),n(3),n(26),n(53)],void 0===(i=function(e,t,n,r,i){var o=e.createElement,a=t.singleton({init:function(e){document.body.getElement(".welcome-dot-ing-top").addEvent("click",this.onScrollToTopClick.bind(this)),this.buildRelatedIngredients(e)},buildRelatedIngredients:function(e){var t=this.getRandomIngredients(e,5),n=document.body.getElement(".welcome-dot-ing-related .welcome-dot-inglist"),r=[];for(var i in t)t.hasOwnProperty(i)&&r.push(this.buildRelatedIngredient(i,t[i]));n.addContent(r)},buildRelatedIngredient:function(e,t){return o("div",{class:"welcome-dot-inglist-item"}).addContent(o("a",{href:t.triggersUrl||t.actionsUrl,text:t.name,styles:{"background-image":'url("/img/third-parties/'+t.icon+'.svg")'}}))},getRandomIngredients:function(e,t){var n,r=0,i=[];for(this.ingredientKeys=Object.keys(e);r<t;)i[(n=this.pickRandomIngredient(e,i)).key]=n.data,r++;return i},pickRandomIngredient:function(e){var t=this.ingredientKeys,n=t[Math.floor(t.length*Math.random())];return t.splice(t.indexOf(n),1),{key:n,data:e[n]}},toggleOpenCloseTrigger:function(e){if("none"===e.getStyle("display")){var t=e.getSize().height;return e.setStyles({height:"0",display:"block"}),void new r(e,{duration:250,transition:"quadOut"}).start({height:t})}new r(e,{duration:250,transition:"quadOut",events:{onComplete:function(){e.setStyles({height:"",display:"none"})}}}).start({height:0})},onTriggersTitleClick:function(e){var t=n.findElement(e,"li").getElement(".welcome-dot-triggers-extend");this.toggleOpenCloseTrigger(t)},onScrollToTopClick:function(){i.smoothScroll(document.body,{top:0})}});return function(){a.init(window.dotIngredients)}}.apply(t,r))||(e.exports=i)},664:function(e,t,n){}});