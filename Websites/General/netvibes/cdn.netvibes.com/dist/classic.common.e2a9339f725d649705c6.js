(window.webpackJsonp=window.webpackJsonp||[]).push([[0],[function(t,e,n){var i;void 0===(i=function(){"use strict";function t(){}function e(e,n){var i,s,o,a,r=S;for(a=arguments.length;a-- >2;)_.push(arguments[a]);for(n&&null!=n.children&&(_.length||_.push(n.children),delete n.children);_.length;)if((s=_.pop())&&void 0!==s.pop)for(a=s.length;a--;)_.push(s[a]);else!0!==s&&!1!==s||(s=null),(o="function"!=typeof e)&&(null==s?s="":"number"==typeof s?s=String(s):"string"!=typeof s&&(o=!1)),o&&i?r[r.length-1]+=s:r===S?r=[s]:r.push(s),i=o;var l=new t;return l.nodeName=e,l.children=r,l.attributes=null==n?void 0:n,l.key=null==n?void 0:n.key,void 0!==C.vnode&&C.vnode(l),l}function n(t,e){for(var n in e)t[n]=e[n];return t}function i(t){!t.__d&&(t.__d=!0)&&1==k.push(t)&&(C.debounceRendering||setTimeout)(s)}function s(){var t,e=k;for(k=[];t=e.pop();)t.__d&&y(t)}function o(t,e,n){return"string"==typeof e||"number"==typeof e?void 0!==t.splitText:"string"==typeof e.nodeName?!t._componentConstructor&&a(t,e.nodeName):n||t._componentConstructor===e.nodeName}function a(t,e){return t.__n===e||t.nodeName.toLowerCase()===e.toLowerCase()}function r(t){var e=n({},t.attributes);e.children=t.children;var i=t.nodeName.defaultProps;if(void 0!==i)for(var s in i)void 0===e[s]&&(e[s]=i[s]);return e}function l(t){var e=t.parentNode;e&&e.removeChild(t)}function c(t,e,n,i,s){if("className"===e&&(e="class"),"key"===e);else if("ref"===e)n&&n(null),i&&i(t);else if("class"!==e||s)if("style"===e){if(i&&"string"!=typeof i&&"string"!=typeof n||(t.style.cssText=i||""),i&&"object"==typeof i){if("string"!=typeof n)for(var o in n)o in i||(t.style[o]="");for(var o in i)t.style[o]="number"==typeof i[o]&&!1===E.test(o)?i[o]+"px":i[o]}}else if("dangerouslySetInnerHTML"===e)i&&(t.innerHTML=i.__html||"");else if("o"==e[0]&&"n"==e[1]){var a=e!==(e=e.replace(/Capture$/,""));e=e.toLowerCase().substring(2),i?n||t.addEventListener(e,u,a):t.removeEventListener(e,u,a),(t.__l||(t.__l={}))[e]=i}else if("list"!==e&&"type"!==e&&!s&&e in t)!function(t,e,n){try{t[e]=n}catch(t){}}(t,e,null==i?"":i),null!=i&&!1!==i||t.removeAttribute(e);else{var r=s&&e!==(e=e.replace(/^xlink\:?/,""));null==i||!1===i?r?t.removeAttributeNS("http://www.w3.org/1999/xlink",e.toLowerCase()):t.removeAttribute(e):"function"!=typeof i&&(r?t.setAttributeNS("http://www.w3.org/1999/xlink",e.toLowerCase(),i):t.setAttribute(e,i))}else t.className=i||""}function u(t){return this.__l[t.type](C.event&&C.event(t)||t)}function h(){for(var t;t=T.pop();)C.afterMount&&C.afterMount(t),t.componentDidMount&&t.componentDidMount()}function d(t,e,n,i,s,o){A++||(I=null!=s&&void 0!==s.ownerSVGElement,N=null!=t&&!("__preactattr_"in t));var a=p(t,e,n,i,o);return s&&a.parentNode!==s&&s.appendChild(a),--A||(N=!1,o||h()),a}function p(t,e,n,i,s){var u,h,d=t,f=I;if(null!=e&&!1!==e&&!0!==e||(e=""),"string"==typeof e||"number"==typeof e)return t&&void 0!==t.splitText&&t.parentNode&&(!t._component||s)?t.nodeValue!=e&&(t.nodeValue=e):(d=document.createTextNode(e),t&&(t.parentNode&&t.parentNode.replaceChild(d,t),m(t,!0))),d.__preactattr_=!0,d;if("function"==typeof e.nodeName)return function(t,e,n,i){var s=t&&t._component,o=s,a=t,l=s&&t._componentConstructor===e.nodeName,c=l,u=r(e);for(;s&&!c&&(s=s.__u);)c=s.constructor===e.nodeName;s&&c&&(!i||s._component)?(b(s,u,3,n,i),t=s.base):(o&&!l&&(w(o),t=a=null),s=g(e.nodeName,u,n),t&&!s.__b&&(s.__b=t,a=null),b(s,u,1,n,i),t=s.base,a&&t!==a&&(a._component=null,m(a,!1)));return t}(t,e,n,i);if(I="svg"===e.nodeName||"foreignObject"!==e.nodeName&&I,(!t||!a(t,String(e.nodeName)))&&(u=String(e.nodeName),(h=I?document.createElementNS("http://www.w3.org/2000/svg",u):document.createElement(u)).__n=u,d=h,t)){for(;t.firstChild;)d.appendChild(t.firstChild);t.parentNode&&t.parentNode.replaceChild(d,t),m(t,!0)}var v=d.firstChild,y=d.__preactattr_||(d.__preactattr_={}),x=e.children;return!N&&x&&1===x.length&&"string"==typeof x[0]&&null!=v&&void 0!==v.splitText&&null==v.nextSibling?v.nodeValue!=x[0]&&(v.nodeValue=x[0]):(x&&x.length||null!=v)&&function(t,e,n,i,s){var a,r,c,u,h=t.childNodes,d=[],f={},g=0,v=0,b=h.length,y=0,w=e?e.length:0;if(0!==b)for(var x=0;x<b;x++){var C=h[x],_=C.__preactattr_,S=w&&_?C._component?C._component.__k:_.key:null;null!=S?(g++,f[S]=C):(_||(void 0!==C.splitText?!s||C.nodeValue.trim():s))&&(d[y++]=C)}if(0!==w)for(var x=0;x<w;x++){c=e[x],u=null;var S=c.key;if(null!=S)g&&void 0!==f[S]&&(u=f[S],f[S]=void 0,g--);else if(!u&&v<y)for(a=v;a<y;a++)if(void 0!==d[a]&&o(r=d[a],c,s)){u=r,d[a]=void 0,a===y-1&&y--,a===v&&v++;break}(u=p(u,c,n,i))&&u!==t&&(x>=b?t.appendChild(u):u!==h[x]&&(u===h[x+1]?l(h[x]):t.insertBefore(u,h[x]||null)))}if(g)for(var x in f)void 0!==f[x]&&m(f[x],!1);for(;v<=y;)void 0!==(u=d[y--])&&m(u,!1)}(d,x,n,i,N||null!=y.dangerouslySetInnerHTML),function(t,e,n){var i;for(i in n)e&&null!=e[i]||null==n[i]||c(t,i,n[i],n[i]=void 0,I);for(i in e)"children"===i||"innerHTML"===i||i in n&&e[i]===("value"===i||"checked"===i?t[i]:n[i])||c(t,i,n[i],n[i]=e[i],I)}(d,e.attributes,y),I=f,d}function m(t,e){var n=t._component;n?w(n):(null!=t.__preactattr_&&t.__preactattr_.ref&&t.__preactattr_.ref(null),!1!==e&&null!=t.__preactattr_||l(t),f(t))}function f(t){for(t=t.lastChild;t;){var e=t.previousSibling;m(t,!0),t=e}}function g(t,e,n){var i,s=D[t.name];if(t.prototype&&t.prototype.render?(i=new t(e,n),x.call(i,e,n)):((i=new x(e,n)).constructor=t,i.render=v),s)for(var o=s.length;o--;)if(s[o].constructor===t){i.__b=s[o].__b,s.splice(o,1);break}return i}function v(t,e,n){return this.constructor(t,n)}function b(t,e,n,s,o){t.__x||(t.__x=!0,(t.__r=e.ref)&&delete e.ref,(t.__k=e.key)&&delete e.key,!t.base||o?t.componentWillMount&&t.componentWillMount():t.componentWillReceiveProps&&t.componentWillReceiveProps(e,s),s&&s!==t.context&&(t.__c||(t.__c=t.context),t.context=s),t.__p||(t.__p=t.props),t.props=e,t.__x=!1,0!==n&&(1!==n&&!1===C.syncComponentUpdates&&t.base?i(t):y(t,1,o)),t.__r&&t.__r(t))}function y(t,e,i,s){if(!t.__x){var o,a,l,c=t.props,u=t.state,p=t.context,f=t.__p||c,v=t.__s||u,x=t.__c||p,_=t.base,S=t.__b,E=_||S,k=t._component,I=!1;if(_&&(t.props=f,t.state=v,t.context=x,2!==e&&t.shouldComponentUpdate&&!1===t.shouldComponentUpdate(c,u,p)?I=!0:t.componentWillUpdate&&t.componentWillUpdate(c,u,p),t.props=c,t.state=u,t.context=p),t.__p=t.__s=t.__c=t.__b=null,t.__d=!1,!I){o=t.render(c,u,p),t.getChildContext&&(p=n(n({},p),t.getChildContext()));var N,D,O=o&&o.nodeName;if("function"==typeof O){var P=r(o);(a=k)&&a.constructor===O&&P.key==a.__k?b(a,P,1,p,!1):(N=a,t._component=a=g(O,P,p),a.__b=a.__b||S,a.__u=t,b(a,P,0,p,!1),y(a,1,i,!0)),D=a.base}else l=E,(N=k)&&(l=t._component=null),(E||1===e)&&(l&&(l._component=null),D=d(l,o,p,i||!_,E&&E.parentNode,!0));if(E&&D!==E&&a!==k){var F=E.parentNode;F&&D!==F&&(F.replaceChild(D,E),N||(E._component=null,m(E,!1)))}if(N&&w(N),t.base=D,D&&!s){for(var M=t,L=t;L=L.__u;)(M=L).base=D;D._component=M,D._componentConstructor=M.constructor}}if(!_||i?T.unshift(t):I||(h(),t.componentDidUpdate&&t.componentDidUpdate(f,v,x),C.afterUpdate&&C.afterUpdate(t)),null!=t.__h)for(;t.__h.length;)t.__h.pop().call(t);A||s||h()}}function w(t){C.beforeUnmount&&C.beforeUnmount(t);var e=t.base;t.__x=!0,t.componentWillUnmount&&t.componentWillUnmount(),t.base=null;var n=t._component;n?w(n):e&&(e.__preactattr_&&e.__preactattr_.ref&&e.__preactattr_.ref(null),t.__b=e,l(e),function(t){var e=t.constructor.name;(D[e]||(D[e]=[])).push(t)}(t),f(e)),t.__r&&t.__r(null)}function x(t,e){this.__d=!0,this.context=e,this.props=t,this.state=this.state||{}}var C={},_=[],S=[],E=/acit|ex(?:s|g|n|p|$)|rph|ows|mnc|ntw|ine[ch]|zoo|^ord/i,k=[],T=[],A=0,I=!1,N=!1,D={};return n(x.prototype,{setState:function(t,e){var s=this.state;this.__s||(this.__s=n({},s)),n(s,"function"==typeof t?t(s,this.props):t),e&&(this.__h=this.__h||[]).push(e),i(this)},forceUpdate:function(t){t&&(this.__h=this.__h||[]).push(t),y(this,2)},render:function(){}}),{h:e,createElement:e,cloneElement:function(t,i){return e(t.nodeName,n(n({},t.attributes),i),arguments.length>2?[].slice.call(arguments,2):t.children)},Component:x,render:function(t,e,n){return d(n,t,{},!1,e,!1)},rerender:s,options:C}}.call(e,n,e,t))||(t.exports=i)},function(t,e,n){(function(i){var s,o;s=[n(646),n(647)],void 0===(o=function(){"use strict";var t,e,i,s,o=new Function("return this")(),a=Object.prototype.hasOwnProperty,r=Object.prototype.toString,l=o.UWA||{};return t={version:"1.3.RC4",hosts:function(){var t,e=o.document,n=e&&e.location&&"https:"===e.location.protocol?"https://":"http://",i=l.hosts,s={netvibes:"netvibes.com",uwa:"uwa.{netvibes}",exposition:"{uwa}",ecosystem:"eco.{netvibes}"};function r(t,e){return s[e].split("//")[1]}for(t in s)a.call(s,t)&&(i&&a.call(i,t)?s[t]=i[t]:s[t]=n+s[t].replace(/\{(\w+)\}/g,r));return s}(),paths:function(){var t,e=l.paths,n={lib:"/lib/",js:"/lib/UWA/js/",css:"/lib/c/UWA/assets/css/",img:"/lib/c/UWA/assets/img/"};for(t in n)a.call(n,t)&&e&&a.call(e,t)&&(n[t]=e[t]);return n}(),debug:Boolean(l.debug),namespace:function(e,n,i,s){i=i||o;var a,r,l=e.split("/");for(a=0,r=l.length;a<r;a++){e=l[a];var c=Boolean(i[e]);if(a===r-1){if(c){if(!s)throw new Error('Duplicate NameSpace "'+l.join(".")+'" into "'+i+'"');if("extend"===s)n=t.extend(i[e],n);else if("replace"===s)n=t.extend(n,i[e]);else{if(!0!==s)throw new Error("Unknown mode "+s);n=t.extend(i[e],n,!0)}}i[e]=n}else c||(i[e]={});i=i[e]}return n},getGlobal:function(){return o},extend:function(e,n,i){var s;for(s in n=n||{})if(a.call(n,s))if(i&&t.is(n[s],"plain"))t.is(e[s],"plain")||(e[s]={}),t.extend(e[s],n[s],i);else try{e[s]=n[s]}catch(t){}return e},merge:function(t,e){var n;for(n in e)a.call(e,n)&&(void 0!==t[n]&&null!==t[n]||(t[n]=e[n]));return t},clone:function(e,n){var i,s,o,r;switch(r=!0!==n&&!1!==n||n,t.typeOf(e)){case"array":if(r)for(i=[],s=0,o=e.length;s<o;s++)i[s]=t.clone(e[s],!0);else i=e.slice();break;case"object":if(r)for(s in i={},e)a.call(e,s)&&(i[s]=t.clone(e[s],!0));else i=t.extend({},e);break;case"date":i=new Date(e);break;case"element":i=e.cloneNode(r);break;default:i=e}return i},result:function(e,n,i){var s;return t.is(e)&&(s=e[n]),void 0===s&&(s=i),t.is(s,"function")?s.call(e):s},typeOf:(s={Null:!1,Undefined:!1,Function:"function",String:"string",Array:"array",Date:"date",RegExp:"regexp",Number:"number",Boolean:"boolean",Error:"error",Arguments:"arguments",Blob:"blob",ArrayBuffer:"arraybuffer",FormData:"formdata",HTMLDocument:"document",XMLDocument:"document",Document:"document",global:"window",Window:"window",DOMWindow:"window",Math:"object",MouseEvent:"event",NodeList:"nodelist",Int8Array:"typedarray",Uint8Array:"typedarray",Uint8ClampedArray:"typedarray",Int16Array:"typedarray",Uint16Array:"typedarray",Int32Array:"typedarray",Uint32Array:"typedarray",Float32Array:"typedarray",Float64Array:"typedarray",DataView:"dataview",File:"file"},function(t){var e={}.toString.call(t).slice(8,-1);if(null==t)return!1;if("Function"===e&&"function"==typeof t.extend&&"function"==typeof t.singleton)return"class";if("Number"===e&&isNaN(t))return!1;if("Object"===e&&t&&"number"==typeof t.nodeType)return"element";var n=s[e];return void 0!==n?n:"Event"===e.slice(-5)?"event":"Element"===e.slice(-7)?"element":t.$extended&&t.event?"event":"Object"===e&&o.DataView&&t instanceof o.DataView?"dataview":"object"}),is:function(){var e;return e=Array.prototype.indexOf?function(t,e){return Array.prototype.indexOf.call(t,e)}:function(t,e){var n,i,s=!1;for(n=0,i=t.length;n<i;n++)if(t[n]===e){s=!0;break}return s?n:-1},function(n,i){var s,o;if(void 0===i)s="number"==typeof n?!isNaN(n):null!=n;else{if(i="array"===t.typeOf(i)?i:[i],s=!1,-1!==e(i,"finite")&&(s=isFinite(n)),s||-1===e(i,"plain")||(s=function(e){if(!e||"object"!==t.typeOf(e))return!1;try{if(e.constructor&&!a.call(e,"constructor")&&!a.call(e.constructor.prototype,"isPrototypeOf"))return!1}catch(t){return!1}var n;for(n in e)if(!a.call(e,n))return!1;return!0}(n)),!s){var r=e(i,"arraybufferview");r>=0&&(i=i.slice()).splice(r,1,"typedarray","dataview")}s||!1===(o=t.typeOf(n))||(s=-1!==e(i,o))}return s}}(),equals:function(){return function(e,n){return function e(n,i,s,o){var a,l,c,u,h,d,p;if(n===i)p=0!==n||1/n==1/i;else if(null==n||null==i)p=n===i;else if((a=r.call(n))!==r.call(i))p=!1;else if("[object String]"===a)p=String(n)===String(i);else if("[object Number]"===a)p=n!=Number(n)?i!=Number(i):0==n?1/n==1/i:n==Number(i);else if("[object Date]"===a||"[object Boolean]"===a)p=Number(n)===Number(i);else if("[object RegExp]"===a)p=n.source===i.source&&n.global===i.global&&n.multiline===i.multiline&&n.ignoreCase===i.ignoreCase;else if("object"!=typeof n||"object"!=typeof i)p=!1;else{for(l=s.length;l--;)s[l]===n&&(p=o[l]===i);if(void 0===p){if(s.push(n),o.push(i),"[object Array]"===a)for(p=(c=n.length)===i.length;p&&c>0;)p=e(n[--c],i[c],s,o);else if((u=n.constructor)===(h=i.constructor)||"[object Function]"===r.call(u)&&u instanceof u&&"[object Function]"===r.call(h)&&h instanceof h){for(d in c=0,p=!0,n)if(t.owns(n,d)&&(c++,!(p=t.owns(i,d)&&e(n[d],i[d],s,o))))break;if(p){for(d in i)if(t.owns(i,d)&&!c--)break;p=!c}}else p=!1;s.pop(),o.pop()}}return p}(e,n,[],[])}}(),owns:function(e,n){return t.is(e)&&a.call(e,n)},log:function(t,e){e||(e="log"),o.console?o.console[e](t):o.opera&&o.opera.postError&&o.opera.postError(t)},i18n:(i={},function(n,s){return s=s||(o.navigator?o.navigator.language||o.navigator.systemLanguage:"default"),e=i[s]=i[s]||{},"object"==typeof n?t.extend(e,n):e[n]||n}),driver:o.Dojo?"Dojo":o.MooTools?"Mootools":o.Prototype?"Prototype":o.jQuery?"jQuery":o.YAHOO?"Yui":"Alone"},n(648).curl&&(o.require||o.curl)({apiName:"require",paths:{UWA:t.hosts.uwa+t.paths.js,vendors:t.hosts.uwa+t.paths.lib+"/vendors"}}),t.namespace("UWA",t,o,!0)}.apply(e,s))||(t.exports=o)}).call(this,n(114))},function(t,e,n){"use strict";var i,s;i=[n(1),n(25),n(3),n(16),n(13),n(57),n(651)],void 0===(s=function(t,e,n,i,s,o,a){var r;function l(){throw new Error("bootstrap is not loaded")}function c(){return r||l(),r}var u,h,d={},p={Config:{front_timers:{idle:1e3},version:{}},Globalization:{},NPD:!1,Page:!1,Permission:{},User:!1,isMobile:!1,inSubscribePreview:!1,isStartpage:!1};for(var m in p)Object.defineProperty(d,m,{get:l,set:l,configurable:!0});function f(){return h||(d.User&&d.User.products?(h=Object.keys(d.User.products).map(function(t){var e=Object.assign({type:t},d.User.products[t]);return e.expired=Boolean(e.endedAt&&!e.active),e}),delete d.User.products):h=[]),h}function g(t){return"object"==typeof t?function(e){for(var n in t)if(e[n]!==t[n])return!1;return!0}:"function"==typeof t?t:function(){return!0}}return d.onReady=function(t){return u||(u=i.all([new i(n.onDomReady),a.load()]).done(function(t){for(var e in r=t[1],p)Object.defineProperty(d,e,{value:r.app[e]||p[e],writable:!0})})),t?u.then(t):u},d.isPassportProxyAvailable=function(){return Boolean(e.proxies&&e.proxies.passport)},d.isInScreenshot=function(){return Boolean(window.screenshotTask)},d.isAloneEnvironment=function(){return Boolean(window.widgetReadyCallbacks||window.widget&&window.widget.defaultData&&window.widget.preferences)},d.isIn3DDParentFrame=function(){return d.isIn3DDashboard()&&!d.isAloneEnvironment()},d.isInStartpage=function(){return!(d.isAloneEnvironment()||d.isIn3DDashboard())},d.isIn3DDashboard=function(){return d.isPassportProxyAvailable()},d.isIn3DDPreview=function(){return d.isIn3DDashboard()&&Boolean(window.widget&&window.widget.id&&window.widget.id.includes("preview"))},d.isOnReadOnly3DDashboard=function(){return d.isIn3DDashboard()&&"bootstrap_8001"===d.getFailureCode()},d.bypassPermission=function(){return d.isIn3DDPreview()&&d.isOnReadOnly3DDashboard()},d.isStreamApiAvailable=function(){return!window.widget||"NETFEOP_AP"!==window.widget.getValue("appId")},d.get3DDashboardContext=function(){return c().threeDDashboardContext},d.get3DDServices=function(t){if(!t)return r.platformServices;var e=o.detect(r.platformServices,function(e){return e.platformId===t});if(!e)throw new Error("platformId is unknown");return e},d.get3DDService=function(e,n){if(!e)throw new Error("serviceId is mandatory");var i=s.splat(d.get3DDServices(n));return(i=i.filter(function(n){return t.owns(n,e)}).map(function(t){var n={platformId:t.platformId};return n[e]=t[e],n})).length?n?i[0][e]:i:n?void 0:[]},d.has3DDService=function(t,e){var n=d.get3DDService(t,e);return e?Boolean(n):n.length>0},d.isDebug=function(t){return Boolean(d.Config.debug&&d.Config.debug.indexOf(t||"js")>=0)},d.isIOSApp=function(){return navigator.userAgent.toLowerCase().includes("netvibes ios app")},d.isTaggingBookmarklet=function(){return document.body&&document.body.className.includes("nv-tagging-bookmarklet")},d.isSmartReaderView=function(){return d.Page&&d.Page.inSmartReaderView&&!d.isTaggingBookmarklet()&&!d.isIOSApp()&&!d.isAloneEnvironment()},d.isRTLLanguage=function(){return document.documentElement&&"rtl"===document.documentElement.dir},d.isAllowed=function(t,e){if(d.bypassPermission())return!0;e||(e=d.Page.id||"default");var n=d.Permission[e]||d.Permission.default;return!!n&&n[t]},d.canFetchFacetsFromServer=function(){return d.isAllowed("search")&&d.isStreamApiAvailable()},d.getFailureCode=function(){return c().failureCode},d.get3DDPlatformId=function(){if(d.isIn3DDashboard()){if(!c().x3dPlatformId)throw new Error("Current platformId could not be determined");return c().x3dPlatformId}},d.getURL=function(t){if(void 0===d.Config.urls[t])throw new Error('Error, cannot retreive URL from Unkown key : "'+t+'" in exports.Config.urls');return d.Config.urls[t]},d.getWelcomeURL=function(t){var e=d.Globalization.welcomeLanguage;return"fr"===e&&("explore/autosave"===t?t="explorer/autosave":"explore/misodata"===t?t="explorer/misodata":"pricing"===t&&(t="tarifs")),d.getURL("startpage")+"/"+e+"/"+t},d.getWelcomeBusinessURL=function(t){return"fr"===d.Globalization.welcomeLanguage&&"contact-us"===t&&(t="fr/contactez-nous"),d.getURL("premium_welcome")+"/"+t},d.getAssetURL=function(t){return t.startsWith("/")&&(t=t.slice(1)),d.Config.assets_versioned_path+t},d.getProduct=function(t){return f().detect(g(t))},d.getActiveProduct=function(t){var e=g(t);return f().detect(function(t){return t.active&&e(t)})},d.getProducts=function(t){return f().filter(g(t))},window.App&&(window.App.Context=d),d}.apply(e,i))||(t.exports=s)},function(t,e,n){var i,s;i=[n(1)],void 0===(s=function(t){"use strict";var e,n,i={onDomReady:function(t,e){e=e||window;var n=!1,i=!0,s=window.document,o=s.documentElement,a=Boolean(s.addEventListener),r=a?"addEventListener":"attachEvent",l=a?"removeEventListener":"detachEvent",c=a?"":"on";function u(i){var o=i.type;"complete"!==s.readyState&&"interactive"!==s.readyState||(s[l](c+"DOMContentLoaded",u,!1),s[l](c+"readystatechange",u,!1),window[l](c+"load",u,!1),n||(n=!0,t.call(e,o||i)))}if("complete"===s.readyState)setTimeout(t.bind(e,"lazy"),1);else{if(s.createEventObject&&o.doScroll){try{i=!window.frameElement}catch(t){}i&&function t(){try{o.doScroll("left"),u("poll")}catch(e){setTimeout(t,50)}}()}s[r](c+"DOMContentLoaded",u,!1),s[r](c+"readystatechange",u,!1),window[r](c+"load",u,!1)}},dispatchEvent:function(e,n,i){var s,o,a,r=9===e.nodeType?e:e.ownerDocument||e.document,l={canBubble:!0,cancelable:!0,view:r.defaultView||r.parentWindow,ctrlKey:!1,altKey:!1,shiftKey:!1,metaKey:!1,detail:0,screenX:0,screenY:0,clientX:0,clientY:0,button:0,relatedTarget:null,keyCode:null,charCode:null,touches:null,targetTouches:null,changedTouches:null,scale:1,rotation:0};if(i=t.merge(i||{},l),r.createEvent){if("click"===n||"dblclick"===n||"contextmenu"===n||0===n.indexOf("mouse")?(o="MouseEvent",a=[n,i.canBubble,i.cancelable,i.view,i.detail,i.screenX,i.screenY,i.clientX,i.clientY,i.ctrlKey,i.altKey,i.shiftKey,i.metaKey,i.button,i.relatedTarget]):0===n.indexOf("touch")?(o="TouchEvent",a=[n,i.canBubble,i.cancelable,i.view,i.detail,i.screenX,i.screenY,i.clientX,i.clientY,i.ctrlKey,i.altKey,i.shiftKey,i.metaKey,i.touches,i.targetTouches,i.changedTouches,i.scale,i.rotation]):0===n.indexOf("key")?(o="KeyboardEvent",a=[n,i.canBubble,i.cancelable,i.view,i.ctrlKey,i.altKey,i.shiftKey,i.metaKey,i.keyCode,i.charCode]):(o="HTMLEvents",a=[n,i.canBubble,i.cancelable]),s=r.createEvent(o),"KeyboardEvent"===o&&"function"==typeof s.initKeyEvent?o="KeyEvent":"HTMLEvents"===o&&"function"!=typeof s.initHTMLEvents&&(o="Event"),"function"!=typeof s["init"+o])throw new Error("Unsuported Event type "+o);s["init"+o].apply(s,a),e.dispatchEvent(s)}else if(r.createEventObject){s=r.createEventObject(),t.extend(s,i);try{e.fireEvent("on"+n,s)}catch(t){throw new Error("Unsuported Event type "+n)}}return s},getElement:function(e){var n=e._uwaTarget||e.target||e.srcElement;return"DOMCharacterDataModified"===e.type||!n||3!==n.nodeType&&4!==n.nodeType||(n=n.parentNode),t.extendElement(n)},findElement:function(t,e){return i.getElement(t).getClosest(e)},getPosition:function(t,e){var n;"number"==typeof e?e={touchIndex:e}:e||(e={});var i=t.changedTouches||t.touches,s="client"===e.relativeTo,o=s?"clientX":"pageX",a=s?"clientY":"pageY";if(i)if(void 0!==e.touchIndex&&i[e.touchIndex])n={x:i[e.touchIndex][o],y:i[e.touchIndex][a]};else{n={x:0,y:0};for(var r=0,l=i.length;r<l;r++)n.x+=i[r][o],n.y+=i[r][a];n.x/=l,n.y/=l}else n={x:t[o],y:t[a]};return n},stopPropagation:function(t){t.stopPropagation&&t.stopPropagation(),t.cancelBubble=!0},preventDefault:function(t){t.preventDefault&&t.preventDefault(),t.returnValue=!1,void 0!==t.cancelable&&!0!==t.cancelable||void 0!==t.defaultPrevented||(t.defaultPrevented=!0)},stop:function(t){i.preventDefault(t),i.stopPropagation(t)},isDefaultPrevented:function(t){return t.defaultPrevented||!0!==t.returnValue&&void 0!==t.returnValue},whichButton:function(e){var n=e.button,i=e.which;return!i&&t.is(n)&&(i=[0,1,3,1,2][n]||0),i-1},whichKey:(e=["alt","ctrl","meta","shift"],n={8:"backspace",9:"tab",13:"return",16:"shift",17:"ctrl",18:"alt",19:"pause",20:"capslock",27:"esc",32:"space",33:"pageup",34:"pagedown",35:"end",36:"home",37:"left",38:"up",39:"right",40:"down",45:"insert",46:"del",96:"0",97:"1",98:"2",99:"3",100:"4",101:"5",102:"6",103:"7",104:"8",105:"9",106:"*",107:"+",109:"-",110:".",111:"/",112:"f1",113:"f2",114:"f3",115:"f4",116:"f5",117:"f6",118:"f7",119:"f8",120:"f9",121:"f10",122:"f11",123:"f12",144:"numlock",145:"scroll",191:"/",224:"meta"},function(t){var i,s,o,a=t.which||t.keyCode,r="keypress"!==t.type&&n[a],l=[];for(i=0,s=e.length;i<s;i++)t[(o=e[i])+"Key"]&&r!==o&&l.push(o);return r?l.push(r):a&&0===t.type.indexOf("key")&&l.push(String.fromCharCode(a).toLowerCase()),l.join("+")}),wheelDelta:function(t){return t.wheelDelta?t.wheelDelta/120:-(t.detail||0)/3}};return t.namespace("Event",i,t)}.apply(e,i))||(t.exports=s)},function(t,e,n){"use strict";var i,s;i=[n(1),n(13),n(26),n(20),n(2)],void 0===(s=function(t,e,n,i,s){var o,a,r,l={};function c(t){for(var e=t,n=["","K","M","B"],i="",s=0,o=n.length;s<o&&(i=n[s],!(t<1e3||s===o-1));s++)t/=1e3;return{orig:e,value:t,unit:i}}return l.getInputsValue=function(n){var i={};return t.extendElement(n).getElements("input, select, textarea").filter(function(t){return t.name&&!t.disabled&&"submit"!==t.type&&"reset"!==t.type&&"file"!==t.type}).forEach(function(t){var n,s=t.name;"select"===t.getTagName()?(n=e.toArray(t.options).filter(function(t){return t.selected}).map(function(t){return t.value}),"[]"===s.slice(-2)?s=s.slice(0,-2):n=n[0]):n="radio"===t.type||"checkbox"===t.type?t.checked?t.value:void 0:t.value,void 0!==n&&function(t,e,n){var i,s=e.match(/^(.+?)((?:\[.*?\])*)$/);s?(i=[s[1]],s[2].replace(/\[(.*?)\]/g,function(t,e){i.push(e)})):i=[e];var o=t;i.forEach(function(t,e){if(e<i.length-1){var s=""===i[e+1];if(Array.isArray(o)){var a=s?[]:{};o.push(a),o=a}else o[t]||(o[t]=s?[]:{}),o=o[t]}else Array.isArray(o)?o.push(n):o[t]=n})}(i,s,n)}),i},l.isAbsoluteURL=function(t){return!!/^(?:https?:)?\/\//.test(t)},l.cutUTF8Bytes=function(t,e,n){if(t)for(var i=encodeURIComponent(t).match(/%..|./g).slice(e,isFinite(n)?e+n:void 0);;)try{t=decodeURIComponent(i.join(""));break}catch(t){i.pop()}return t},l.uniqueID=(o=0,a=Math.pow(32,4),function(t){return o++,(t||"u")+("0000"+((Math.random()*a|0)*a+o).toString(32)).slice(-8)}),l.getNext=function(t,e,n){var i,s=n&&n.condition,o=n&&n.reverse,a=n&&n.loop,r=t.length,l=t.indexOf(e);for(l<0&&(l=o?r:-1),i=0;i<r-1;i++){if((l+=o?-1:1)<0||l>=r){if(!a)return;l=(l+r)%r}if(!s||s(t[l],l))return t[l]}},l.getVar=(r=e.parseQuery(e.parseUrl(location).query),function(t){return r[t]}),l.debounce=function(t,e,n){var i;return function(){clearTimeout(i);var s=[n||this];s.push.apply(s,arguments),i=setTimeout(t.bind.apply(t,s),e)}},l.debouncePromise=function(t,e){var n=!1;return function(){if(n)return i.reject("Already pending");n=!0;var s=t.call(e);return s.fin(function(){n=!1}),s}},l.asyncForEach=function(t,e,n){var i,s=n&&n.context,o=n&&n.iterations||500,a=0;return i=setTimeout(function n(){for(var r=Math.min(t.length,a+o);a<r;a++)e.call(s,t[a],a);a!==t.length&&(i=setTimeout(n,5))},5),function(){clearTimeout(i)}},l.forEachProperty=function(e,n,i){var s;for(s in e)t.owns(e,s)&&n.call(i,e[s],s,e)},l.getObjectValues=function(t){return Object.keys(t).map(function(e){return t[e]})},l.mapSplat=function(t,e,n){var i=[];return t.forEach(function(t,s,o){i.push.apply(i,e.call(n,t,s,o))}),i},l.splat=function(t){var e=[];return function t(e,n){Array.isArray(e)?e.forEach(function(e){t(e,n)}):n.push(e)}(t,e),e},l.unique=function(t,e){var n,i,s={},o=[];for(e||(e=String),n=0,i=t.length;n<i;n++){var a=e(t[n]);s.hasOwnProperty(a)||(o.push(t[n]),s[a]=!0)}return o},l.pick=function(e,n){var i={};return e?(t.is(n,"array")||(n=Array.prototype.slice.call(arguments,1)),n.forEach(function(t){t in e&&(i[t]=e[t])}),i):i},l.globToRegExp=function(t){var e=t.escapeRegExp().replace(/\\\*/g,".*").replace(/\\\?/g,".").replace(/\\\{/g,"(").replace(/\\\}/g,")").replace(/,/g,"|");return new RegExp("^"+e+"$")},l.counterAdd=function(t,e){return!0===t||!0===e||parseInt(t,10)+parseInt(e,10)},l.getStaticUrl=function(t,e){return 0===t.lastIndexOf(s.Config.urls.startpage,0)&&(t=t.slice(s.Config.urls.startpage.length)),!(e&&!1===e.version||/[&?]v=|\/assets-/.test(t))?t.startsWith(s.Config.urls.cdn)?t+(t.includes("?")?"&v=":"?v=")+s.Config.version.assets:l.isAbsoluteURL(t)?t:s.getAssetURL(t):l.isAbsoluteURL(t)?t:s.Config.urls.cdn+t},l.BLANK_IMAGE_URL="data:image/gif;base64,R0lGODlhAQABAID/AMDAwAAAACH5BAEAAAAALAAAAAABAAEAAAICRAEAOw==",l.getFaviconUrl=function(t,n){return t&&s.Config.urls.storage?(n||(t="http://"+e.parseUrl(t).domain),s.Config.urls.storage+"/favicon/"+t):""},l.createIcon=function(e,n,i,s,o){return void 0===o?t.createElement("img",{src:l.getStaticUrl("/img/s.gif"),class:"icon "+e,alt:n,title:n,width:i,height:s}):'<img src="'+l.getStaticUrl("/img/s.gif")+'" width="'+i+'" height="'+s+'" class="icon '+e+'" alt="'+n+'" title="'+n+'" />'},l.createCloseIcon=function(e,n,i){if(!e)throw new Error("Utils.createCloseIcon: idPrefix is mandatory");return t.createElement("div",{id:e+"CloseButtonContainer",class:"uwa-icon uwa-icon-only delete nv-close-icon "+(n||""),title:i||_("Close")})},l.formatCounterNumber=function(t){return!0===t?"●":t>=1e3?"1K+":String(t)},l.formatHumanNumber=function(e,n){n||(n={});var i,s,o="",a="",r="",l="",u=n.closeNumbers||[];if(!t.is(e,"number"))return e;if(e<0&&(o="-",e=-e),r=String(Math.floor(e)),l=String(e).match(/(\.\d+)?$/)[0].slice(1),!1!==n.abbreviate){var h,d=c(e);e=d.value,a=d.unit,r=String(Math.floor(e)),h=n.decimalDigits||3-r.length,u.length&&u.forEach(function(t){var n=c(t);if(t=n.value,n.unit===d.unit){var o=("0".repeat(20)+e.toFixed(10)).slice(-30),a=("0".repeat(20)+t.toFixed(10)).slice(-30),r=0,l=0;for(i=0,s=o.length;i<s;i++)if("."===o[i]&&(l=i),o[i]!==a[i]){l&&(r=i-l);break}h<r&&(h=r)}}),l=String(e).match(/(\.\d+)?$/)[0].substr(1,h)}if(!1!==n.separateThousands){var p="";for(i=0,s=r.length;i<s;i+=3)p=r.slice(-i-3,-i||s)+(i?" "+p:"");r=p}return n.numDigitAfterComma&&(l=l.slice(0,n.numDigitAfterComma)),o+r+(l?"."+l:"")+a},"function"!=typeof window._&&(window._=function(t){return t}),l.responsiveHideElement=function(t,e){var n=function(){return e[0].getParent().scrollHeight};(e=t.clientHeight>n()?e:e.reverse()).forEach(function(e){var i=t.clientHeight-n();i>e.getDimensions().outerHeight&&i>0?e.show():i<=0&&e.hide()})},l.tryJSONParse=function(t){if(t)try{return JSON.parse(t)}catch(t){}},l.stripScripts=function(t){return t.replace(/<script[^>]*>[\s\S]*?<\/script>/gi,"")},l.round=function(t,e){var n=e?Math.pow(10,e):1;return Math.round(t*n)/n},l.sortData=function(t,e){return t.sort(function(t,n){var i,s;return(i=e.sortKey?e.sortKey(t):t)<(s=e.sortKey?e.sortKey(n):n)?e.sortReverse?1:-1:i>s?e.sortReverse?-1:1:0}),t},window.App&&(window.App.Utils=l),l}.apply(e,i))||(t.exports=s)},function(t,e,n){"use strict";var i,s;i=[n(9),n(10),n(2),n(14),n(0)],void 0===(s=function(t,e,n,i,s){var o=t.extend(s.Component);function a(t){var e=s.options.vnode;s.options.vnode=function(n){e&&e(n),t(n)}}return i.flexProperties&&a(function(t){"string"==typeof t.nodeName&&t.attributes&&t.attributes.style&&function(t){"flex"===t.display&&(t.display="-webkit-flex");i.flexProperties.forEach(function(e){void 0!==t[e]&&(t["Webkit"+e[0].toUpperCase()+e.slice(1)]=t[e])})}(t.attributes.style)}),n.onReady(function(){n.isDebug("js")&&a(function(t){"function"==typeof t.nodeName&&t.nodeName.checkProps&&t.nodeName.checkProps(t.attributes)})}),o.implement({getClassNames:function(){return this.options={className:this.props.className},e.prototype.getClassNames.apply(this,arguments)},inject:function(t){s.render(s.h(this.constructor,this.props),t)}})}.apply(e,i))||(t.exports=s)},function(t,e,n){"use strict";var i,s;i=[n(1),n(20),n(2),n(212),n(353),n(439),n(17),n(189),n(270)],void 0===(s=function(t,e,i,s,o,a,r,l){function c(t,n,i){return t.data=i,t.then(function(t){return n?n(t,i):t},function(t){return t||(t="unspecified_error"),e.reject(t)})}function u(e,n,o){var a=o&&o.exportResponseBody;n=Object.assign({},n),i.isIn3DDashboard()?e.route.indexOf("{pageId}")>=0?n.pageId="none":delete n.pageId:n.pageId||(n.pageId=i.Page.id);var r=function(e,n){return e.substitute(function(e){if(t.owns(n,e)){var i=n[e];return delete n[e],i}})}(e.route,n),l={urlParameters:{}},u=n;if(a&&(l.urlParameters.export="1",l.urlParameters.format=a),e.dataAsJSON){var h=!!t.is(e.dataAsJSON,"string")&&e.dataAsJSON;h&&(u=n[h]),l.dataAsJSON=!0,l.urlParameters.pageId=n.pageId,delete n.pageId}return c(s.request(r,u,l),!a&&e.validator,n)}function h(n){return t.is(n)?n.error?e.reject(n.error.message||n.error.code||n.error):!1===n.success?e.reject("operation_failed"):void 0:e.reject("bad_response")}function d(t){return h(t)||e.resolve(t)}function p(e,n,i){return u.bind(null,t.merge({route:e,validator:n||d},i))}function m(t){return function(n){var i;return!(i=h(n))&&t&&(i=h(n=n[t])),i||e.resolve(n)}}var f={};f.createTab=p("my/tabs/create",m("tab")),f.tabSubscribe=p("my/tabs/subscribe",m("tab"));var g=o.extend({options:{group:!0,maxGroup:0},groupKey:function(t){return t.pageId},get:function(t){var e=this.formatData(t);return e.pageId=t[0].pageId,t[0].tenant&&(e.tenant=t[0].tenant),this.fetch(e).then(function(e){return Array.isArray(e)||(e=t.map(function(){return!0})),e})},add:function(t){return c(this._parent(t),m(),t)}}),v=g.singleton({formatData:function(t){return{widget:t}},fetch:p("my/widgets/{pageId}/create/multi",m("result"))}),b=g.singleton({formatData:function(t){return{widgetId:t.map(function(t){return t.widgetId})}},fetch:p("my/widgets/{pageId}/delete/multi",m())}),y=g.singleton({formatData:function(t){return{widget:t}},fetch:p("my/widgets/{pageId}/update/multi",m("result"))});f.createWidget=function(e){return delete(e=t.merge(e,{widgetId:0,name:e.moduleName||"",title:"",status:1,tabId:e.tab||null,col:1,data:e.data||{},pageId:e.pageId||i.Page.id})).tab,delete e.moduleName,v.add(e)},f.updateWidget=function(t){return y.add(t)},f.deleteWidget=function(t){return b.add(t)},f.getModulesDependents=p("my/dashboards/{pageId}/dependents",m()),f.getUserAccounts=p("my/account/tokens",m("tokens")),f.syncTokens=p("my/account/sync-tokens",m("tokens"),{dataAsJSON:!0}),f.deleteToken=p("my/account/token-delete",m()),f.announcement=p("my/announcement/{npdId}",m("announcements")),f.widgetPreview=p("widgets/preview",m("results")),f.streamsFlag=p("streams/{type}/{action}",m(),{dataAsJSON:!0}),f.streamsResetSaved=p("streams/saved/reset",m()),f.streamItem=p("streams/item",m("item")),f.streamImport=p("streams/import",m("items")),f.streamRelated=p("streams/related",m("results")),f.dashboardCreate=p("dashboards/create",m()),f.dashboardsThemeUrl=p("dashboards/theme-url",m("url")),f.getUserProfile=p("my/account/profile/",m()),f.getUserInfos=p("my/account",m()),f.getNPDTeamMembers=p("my/dashboards/team-members",m()),f.sendPushmail=p("pushmail/send",m()),f.getNPDPushmailThemes=p("pushmail/themes",m()),f.createNPDPushmailTheme=p("pushmail/themes-create",m()),f.duplicateNPDPushmailTheme=p("pushmail/themes-duplicate",m()),f.deleteNPDPushmailTheme=p("pushmail/themes-delete",m()),f.saveNPDPushmailTheme=p("pushmail/themes-save",m()),f.previewNPDPushmailTheme=p("pushmail/themes-preview",m()),f.uploadNPDPushmailTheme=p("pushmail/themes-upload",m()),f.importNPDPushmailTheme=p("pushmail/themes-import",m()),f.exportNPDPushmailTheme=p("pushmail/themes-download",m()),f.isAllowedPushwebUrl=p("potions/pushweb-url-validate",m()),f.pushwebAuth=p("/pushweb/auth",m()),f.publishingPublish=p("my/publishing/publish",m("result")),f.publishingReset=p("my/publishing/reset"),f.dashboardCheckSpringCleaning=p("dashboards/need-spring-cleaning",m()),f.springCleaningSwitchPage=p("spring-cleaning/switch-page",m("result")),f.springCleaningUnsubscribe=p("spring-cleaning/unsubscribe",m()),f.springCleaningPreCheck=p("spring-cleaning/pre-check",m()),f.myDashboardData=p("my/dashboards/data",m("userData")),f.myDashboardStats=p("my/dashboards/{pageId}/stats",m("stats")),f.getPopularTerms=p("my/dashboards/popular-topics",m("result")),f.myDashboardAddAnalyzeTab=p("my/dashboards/{pageId}/add-analyze-tab",m()),f.myDashboardDelete=p("my/dashboards/delete",m()),f.myDashboardGenerateTheme=p("my/dashboards/generate-theme",m()),f.myDashboardCommitTheme=p("my/dashboards/commit-theme",m()),f.myDashboardOpenTab=p("my/dashboards/open-tab",m()),f.myDashboardSavePrefs=p("my/dashboards/save-prefs",m(),{dataAsJSON:!0}),f.myDashboardPageRevert=p("my/dashboards/{pageId}/revert",m("pageId")),f.myDashboardPageOrder=p("my/dashboards/update-order",m()),f.myTabCopy=p("my/tabs/copy",m()),f.myTabMove=p("my/tabs/move",m()),f.myWidgetSearch=p("my/widgets/{pageId}/search",m("modules")),f.myPushMailWidgets=p("pushmail/{pageId}/widgets",m("tabs")),f.myPushWebWidgets=p("my/widgets/{pageId}/pushweb",m("tabs")),f.myWidgetCreateAnalyze=p("my/widgets/{pageId}/{tabId}/create/analyse",m("modules"),{dataAsJSON:!0}),f.myWidgetDuplicate=p("my/widgets/{pageId}/{sourceModuleId}/duplicate",m("result")),f.dashboardData=p("dashboards/data",m("userData")),f.synchroTabs=p("dashboards/synchroTabs",m("tabs"));var w=g.singleton({options:{timeout:500},formatData:function(t){return{widgetId:t.map(function(t){return t.widgetId})}},fetch:p("dashboards/handleGhost",m())});f.handleGhost=function(t){return w.add(t)},f.shareMail=p("share/mail",m("result")),f.shareToPage=p("share/topage",m("success")),f.shareStore=p("share/store",m("url")),f.getTagsList=p("tag/all/",m("result")),f.getCurationTags=p("curation/labels/",m()),f.getCurationTagsImport=p("curation/labels/import",m()),f.getCurationSentiments=p("curation/sentiments/",m()),f.getCurationSuggestions=p("curation/suggestions/",m()),f.submitOpinionEntity=p("curation/labels/add",m()),f.editOpinionEntity=p("curation/labels/edit/{id}",m("tag")),f.deleteOpinionEntity=p("curation/labels/delete/{id}",m()),f.importOpinionEntity=p("curation/labels/import",m()),f.submitSentimentEntity=p("curation/sentiments/add",m("sentiment")),f.editSentimentEntity=p("curation/sentiments/edit/{id}",m("sentiment")),f.deleteSentimentEntity=p("curation/sentiments/delete/{id}",m()),f.submitSuggestionEntity=p("curation/suggestions/add",m("suggestions")),f.editSuggestionEntity=p("curation/suggestions/edit/{id}",m("suggestions")),f.deleteSuggestionEntity=p("curation/suggestions/delete",m()),f.importSuggestionEntity=p("curation/suggestions/import",m()),f.getRecentTagsList=p("tag/recent",m("tags")),f.getSearchData=p("my/dashboards/{pageId}/search-data",function(t){var s=h(t);return s||(i.isIn3DDashboard()?new e(function(e){t.tab?n.e(0).then(function(){var i=[n(21)];(function(n){t.tab=t.tab.filter(function(t){return Boolean(n.getById(t.id))}),e(t)}).apply(null,i)}).catch(n.oe):e(t)}):e.resolve(t))}),f.changeTag=p("tag/{action}",m()),f.createBlacklist=p("blacklist/create",m("blacklist")),f.signin=p("auth/signin",m()),f.sendActication=p("auth/send-activation",m()),f.sendLostPassword=p("auth/send-lost-password",m()),f.recoverPassword=p("auth/recover-password",m()),f.checkEmail=p("auth/check-email",m()),f.signup=p("auth/signup",m()),f.getUrl=p("auth/get-url",m()),f.createOAuthAccount=p("auth/oauth/{type}",m()),f.productUpdate=p("product/update",function(t){var n=h(t);if(n)return n;var i=t.data;return i.error?(n=Object.assign({toString:function(){return this.message}},i.error),e.reject(n)):e.resolve(i)}),f.productPayment=p("product/payment",function(t){var n=h(t);if(n)return n;var i=t.data;return i.error?e.reject(i.error):e.resolve(i)}),f.getProductRegion=p("product/get-region/{countryCode}",m()),f.tabUpdate=p("my/tabs/{pageId}/{tabId}/update",m()),f.myTabsCreateFromTemplate=p("my/tabs/create_from_template",m("tab")),f.getPotionLogs=p("potions/{potionId}/logs",m("logs")),f.getPotion=p("potions/{potionId}",m("potion")),f.createPotion=p("potions/create",m(),{dataAsJSON:!0}),f.updatePotion=p("potions/{potionId}/update",m(),{dataAsJSON:!0}),f.deletePotion=p("potions/{potionId}/delete",m()),f.enablePotion=p("potions/{potionId}/enable",m()),f.disablePotion=p("potions/{potionId}/disable",m()),f.iframableProxy=p("proxy/iframable",m()),f.getSchemasAll=p("events/schemas/all",m(),{dataAsJSON:!0}),f.sendIotEvent=p("events/emit",m(),{dataAsJSON:!0}),f.testIotFormula=p("events/compile",m(),{dataAsJSON:!0}),f.potionGeneratorPostProcess=p("potion-generator/confirm",m()),f.duplicateTab=p("my/tabs/duplicate",m("tab")),f.misodata=p("misodata",m()),f.misodataFullAnalysis=p("misodata/full-analysis",m()),f.misodataConfig=p("misodata/config",m("config")),f.misodataCrawl=p("misodata/crawl",function(t){return t.result.success?e.resolve(t.result):e.reject(new Error("Crawl failed. "+t.result.message))}),f.misodataReset=p("misodata/reset",m()),f.spreadsheetCheck=p("spreadsheet/check",m()),f.spreadsheetPreview=p("spreadsheet/preview",m()),f.taskCreate=p("task/{type}/create",m()),f.taskStatus=p("task/{type}/status",m()),f.searches=p("searches",m(),{dataAsJSON:!0});var x,C,_=p("analytics",m(),{dataAsJSON:!0});return f.analytics=function(t,e){return x||(x=i.isIn3DDashboard()?l(i.get3DDPlatformId()).getBridge().getAnalyticsPool():new a(i.Config.max_concurrent_analytics||10)),x.add(function(){return _(t,e)})},f.analyticsCountCommon=p("analytics/count-common",m(),{dataAsJSON:!0}),f.analyticsCountUnique=p("analytics/count-unique",m(),{dataAsJSON:!0}),f.backend=function(t){return C||(C=new a(i.Config.max_concurrent_analytics||10)),C.add(function(){return p("backend",m("sources"),{dataAsJSON:!0})(t)})},f.backendCreate=p("backend/create",m("sources"),{dataAsJSON:!0}),f.backendUpdate=p("backend/update",m("sources"),{dataAsJSON:!0}),f.backendForceLiveCrawl=p("backend/force-live-crawl",m("sources")),f.wizardryApplyConfig=function(t){var e={},n=Object.assign({},t);return t.files&&(delete n.files,t.files.forEach(function(t,n){e["file"+n]=t})),e.data=JSON.stringify(n),u({route:"my/dashboards/wizardry",validator:d},e)},f.wizardryUpdateConfig=p("my/tabs/{tabId}/wizardry",m(),{dataAsJSON:!0}),f.wizardryGetAllCorpora=p("dashboards/wizardry/corpus",m("corpus")),f.getPopularKeywords=p("corpus/popular-topic",m()),f.wizardryCreateProduct=p("product/wizardry-agency/create",m()),f.productTrivialIndividualCreate=p("product/trial-individual/create",m()),f.getLibraries=p("my/libraries/{pageId}",function(t){var n=h(t);return n||(i.isIn3DDashboard()?e.resolve({libraries:t.libraries.filter(function(t){return r.getAll().some(function(e){return e.getId()===t.id})})}):e.resolve(t))}),f.getLibrary=p("my/libraries/{pageId}/{libraryId}",m()),f.addStreamToLibrary=p("my/libraries/{pageId}/{libraryId}/add",m()),f.removeStreamFromLibrary=p("my/libraries/{pageId}/{libraryId}/remove",m()),f.removeAllStreamFromLibrary=p("my/libraries/{pageId}/{libraryId}/remove/all",m()),f.editStreamFromLibrary=p("my/libraries/{pageId}/{libraryId}/edit",m()),f.importStreamsToLibrary=p("my/libraries/{pageId}/{libraryId}/import",m()),f.copyStreamToLibrary=p("my/libraries/{pageId}/{sourceId}/copy/{destinationId}",m()),f.moveStreamToLibrary=p("my/libraries/{pageId}/{sourceId}/move/{destinationId}",m()),f.sendFeedback=p("contact-us/send",m()),f.exportStreamsFromLibrary=p("my/libraries/{pageId}/{libraryId}/export",m()),f.uploadWidgetHeader=p("my/widgets/{pageId}/header",m("url")),f.itemFacets=p("streams/item-facets",m("facets")),f.proxyGmail=p("proxy/gmail/{connectId}",function(t){var n=h(t);return n||(t.oauth_url?e.reject("missing_user_connect"):e.resolve(t.result))}),f.proxyWeather=p("proxy/weather",m("results")),f.proxyStock=p("proxy/stock/{value}/{userLanguage}/{userLocale}",m()),f.proxyEvernote=p("proxy/evernote/{connectId}",m("results")),f.proxyStock=p("proxy/stock/{value}/{userLanguage}/{userLocale}",m()),f.getLanguages=p("settings/languages",m()),f.saveUserOpenPage=p("my/account/open-page/{pageId}",m()),f.saveUserPageTitle=p("my/dashboards/{pageId}/update-title",m()),f.saveUserPageViewType=p("my/dashboards/{pageId}/update-view-type",m()),f.saveUserPageCollapseExpand=p("my/widgets/{pageId}/collapse-expand",m()),f.saveUserSettings=p("my/account/settings",m()),f.saveUserTabOrder=p("my/tabs/{pageId}/update-order",m()),f.saveUserTabType=p("my/tabs/{pageId}/{tabId}/update-type",m()),f.saveUserTabDelete=p("my/tabs/{pageId}/{tabId}/delete",m()),f.getMergeEntity=p("merge-entity",m()),f.submitMergeEntity=p("merge-entity/submit",m()),f.importMergeEntity=p("merge-entity/import",m()),f.getBlacklistEntity=p("blacklist",m()),f.submitBlacklistEntity=p("blacklist/create",m()),f.updateBlacklistEntity=p("blacklist/update/{id}",m()),f.deleteBlacklistEntity=p("blacklist/delete",m()),f.importBlacklistEntity=p("blacklist/import",m()),f}.apply(e,i))||(t.exports=s)},function(t,e,n){var i=n(28),s=n(47),o=n(73),a=n(67),r=n(89),l=function(t,e,n){var c,u,h,d,p=t&l.F,m=t&l.G,f=t&l.S,g=t&l.P,v=t&l.B,b=m?i:f?i[e]||(i[e]={}):(i[e]||{}).prototype,y=m?s:s[e]||(s[e]={}),w=y.prototype||(y.prototype={});for(c in m&&(n=e),n)h=((u=!p&&b&&void 0!==b[c])?b:n)[c],d=v&&u?r(h,i):g&&"function"==typeof h?r(Function.call,h):h,b&&a(b,c,h,t&l.U),y[c]!=h&&o(y,c,d),g&&w[c]!=h&&(w[c]=h)};i.core=s,l.F=1,l.G=2,l.S=4,l.P=8,l.B=16,l.W=32,l.U=64,l.R=128,t.exports=l},function(t,e,n){var i,s;i=[n(1),n(3),n(15),n(13),n(19),n(53),n(10),n(88),n(23),n(24)],void 0===(s=function(t,e,n,i,s,o,a,r,l,c){"use strict";var u=a.extend({options:{className:"",element:null,attributes:{},value:"",clickable:!0},name:"uwa-input",_hiddenInput:!0,init:function(e){if(this.constructor===u)throw new Error("Use a subclass of Input");this._parent(e);var n=e&&e.element,i=n&&n.parentNode,s=n&&n.nextSibling;i&&i.removeChild(n),this.events=null,this.getContent(),t.owns(e,"value")&&this.setValue(e.value),i&&this.inject(s||i,s&&"before")},buildSkeleton:function(){var e=this.elements;this._hiddenInput?(e.input=this.options.element||this.buildInput(),e.content=t.createElement("div",{class:this.getClassNames("-content")}),e.input.addClassName(this.getClassNames("-input")+" hidden-input"),e.container=(this.options.container||t.createElement("div")).addContent(e.input,e.content)):e.content=e.container=e.input=this.options.element||this.options.container||this.buildInput(),e.input.set(this.options.attributes),e.container.addClassName(this.getClassNames()),this.options.clickable||this.elements.container.addClassName("not-clickable"),this.setDisabled(this.isDisabled())},_syncEvents:function(t){var e=this,n=this.elements;function i(t){return e.dispatchEvent.bind(e,t)}e.events||(e.events={container:{mouseenter:i("onMouseEnter"),mouseleave:i("onMouseLeave"),mousedown:function(t){this.addClassName("active"),e.dispatchEvent("onMouseDown",[t])},mouseup:function(){this.removeClassName("active")},click:i("onClick")},input:{change:i("onChange"),keydown:i("onKeyDown"),focus:e.focus.bind(e,!0,!1),blur:e.focus.bind(e,!1,!1)}}),e.isDisabled()?(n.container.removeEvents(e.events.container),n.input.removeEvents(e.events.input)):(e._hiddenInput&&t||n.container.addEvents(e.events.container),n.input.addEvents(e.events.input))},buildInput:function(){return t.createElement("input",{type:"text"})},syncInput:function(){this._hiddenInput&&this.elements.content&&this.elements.content.setText(this.getValue())},focus:function(t,e){return void 0===t&&(t=!0),n.toggleClassName.call(this.elements.container,"focus",t),!1!==e&&this.elements.input[t?"focus":"blur"](),this},isDisabled:function(){return Boolean(this.elements.input.disabled)},setDisabled:function(t){return void 0===t&&(t=!0),this.elements.input.disabled=t,this.elements.container.toggleClassName("disabled",t),this._syncEvents(),this},getValue:function(){var t=this.elements.input,e=t.getTagName();return"input"===e||"textarea"===e?t.value:t.getText()},setValue:function(t){var e=this.elements.input,n=e.getTagName();return"input"===n||"textarea"===n?e.value=t:e.setText(t),this.syncInput(),this},getContent:function(){return this.elements.container||(this.buildSkeleton(),this.syncInput()),this.elements.container},getInputElement:function(){return this.elements.input},_dispatchOnChange:function(){this.isDisabled()?this.syncInput():e.dispatchEvent(this.elements.input,"change")},onMouseEnter:function(){this.elements.container.addClassName("hover")},onMouseLeave:function(){this.elements.container.removeClassName("hover")},onMouseDown:function(t){this._hiddenInput&&!s.Features.touchEvents&&(e.preventDefault(t),this.focus())},onChange:function(t){this.syncInput(),this._bubbleOnChange(t)},_bubbleOnChange:function(){var t;return function(i){var s,o=this.elements.input.parentNode;if(!function(){if(void 0===t){t=!1;var i=document.createElement("div"),s=document.createElement("input");s.type="text",i.appendChild(s),i.style.display="none",document.body.appendChild(i),n.addEvent.call(i,"change",function(n){t=!0,e.stop(n)}),e.dispatchEvent(s,"change"),n.remove.call(i),n.removeEvents.call(i)}return t}())for(;o&&1===o.nodeType&&!1!==(i.event||i).returnValue;)(s=o._events&&o._events.change)&&s.handleEvent(i),o=o.parentNode}}(),onKeyDown:function(){this.syncInput()}});return u._ToggleInput=u.extend({name:"uwa-toggle",buildSkeleton:function(){this._parent(),this.elements.content.addClassName("uwa-icon")},isChecked:function(){return this.elements.input.checked},focus:function(t){return this._parent(t),this.syncInput(),this},check:function(t){return this.elements.input.checked=!1!==t,this.syncInput(),this}}),u.Radio=u._ToggleInput.extend({name:"uwa-radio",buildInput:function(){return t.createElement("input",{type:"radio"})},onClick:function(t){this._parent(t);var e=this.elements.input;e.checked||(e.checked=!0,this._dispatchOnChange())},syncInput:function(){var t=this.elements.input,e=t.name,i=!1;function s(e){var s=e.parentNode;s&&n.hasClassName.call(s,"uwa-radio")&&n.toggleClassName.call(s,"checked",e.checked),i|=t===e}e&&Array.prototype.forEach.call(document.getElementsByName(e),s),i||s(t)}}),u.Checkbox=u._ToggleInput.extend(c,{name:"uwa-checkbox",buildInput:function(){return t.createElement("input",{type:"checkbox"})},onClick:function(t){this._parent(t),this.hasDelayed("extern-change-prevention")||this.setDelayed("extern-change-prevention",function(){this.elements.input.checked=!this.elements.input.checked,this.syncInput(),this._dispatchOnChange()},1)},onChange:function(t){this._parent(t),this.setDelayed("extern-change-prevention",function(){},1)},syncInput:function(){this.elements.container.toggleClassName("checked",this.elements.input.checked)}}),u.Select=u.extend(c,{name:"uwa-select",options:{options:[]},init:function(e){this._parent(e),t.owns(e,"options")&&this.putOptions(e.options),t.owns(e,"value")&&this.setValue(e.value)},focus:function(t){return this._parent(t),!1===t&&this.elements.dropdown.hide(),this},buildInput:function(){return t.createElement("select")},buildSkeleton:function(){var e,n=this.elements;this._parent();var i=n.container.getDocument().body;n.content.addContent([e=t.createElement("div",{class:this.getClassNames("-split"),html:[{tag:"div",class:this.getClassNames("-text")},{tag:"div",class:this.getClassNames("-button"),html:{tag:"div",class:"uwa-icon uwa-icon-only"}}]})]),n.dropdown=new r({className:this.options.className,global:!0,_root:!1,position:function(){var t=n.dropdown.getInnerElement(),e=n.container.getBoundingClientRect(),i=e.top,o=s.getSize().height-e.top-e.height,a=i>o;return t.toggleClassName("uwa-select-dropdown-top",a),t.getElement("> .uwa-select-split").inject(t,a?"bottom":"top"),t.setStyle("width",e.width),n.scroller.getContent().setStyle("height",Math.min(n.options.offsetHeight,a?i:o)),n.scroller.update(),{x:e.left,y:n.container.getOffsets().y-(a?Math.min(e.top,n.options.offsetHeight):0)}},positionOptions:{fit:"resize-max",relative:i},events:{onShow:function(){n.container&&(n.container.addClassName("dropdown-visible"),this._scrollToSelected())}.bind(this),onHide:function(){n.container&&n.container.removeClassName("dropdown-visible")},onRemoved:function(){n.container&&n.container.removeClassName("dropdown-visible")}}}),n.dropdown.getInnerElement().addClassName("uwa-select-dropdown"),n.dropdown.inject(n.content),n.options=t.createElement("div",{class:this.getClassNames("-options"),events:{mousedown:this._selectionHandler.bind(this)}}),n.scroller=new l({shadows:!1}),n.scroller.getInnerElement().addContent(n.options),n.dropdown.getInnerElement().setContent([e.cloneNode(!0),n.scroller]),this._isSingleLine()&&n.container.addClassName("single-line")},getValue:function(){return this._getSelectedOptions().map(function(t){return t.value})},setValue:function(t){var e=[];return t=i.splat(t),this._getOptions().forEach(function(n,i){-1!==t.indexOf(n.value)&&e.push(i)}),this.setSelection(e)},setSelection:function(t){return this._isMultiple()||(t=t.slice(0,1)),this._getOptions().forEach(function(e,n){e.selected=-1!==t.indexOf(n)}),this._dispatchOnChange(),this},getSelection:function(){var t=[];return this._getOptions().forEach(function(e,n){e.selected&&t.push(n)}),t},_isMultiple:function(){return this.elements.input.multiple},_isSingleLine:function(){return this.options.singleLine},_getOptions:function(){return this.elements.input.getElements("option")},_getSelectedOptions:function(){return this._getOptions().filter(function(t){return t.selected})},_dispatchOnChange:function(){this.clearDelayed("on-change-debounce"),this._parent()},_selectionHandler:function(t){e.stop(t),this._isMultiple()||(this.elements.dropdown.hide(),this.elements.container.removeClassName("hover"));var n,i,s=e.findElement(t,".option,.optgroup"),o=0,a=[],r=s.hasClassName("option"),l=!1;s.getParent().getChildren().some(function(t){if(r){if(s===t)return a.push(o),!0}else if(l){if(!t.hasClassName("option"))return!0;a.push(o)}else s===t&&(l=!0);t.hasClassName("option")&&(o+=1)}),this._isMultiple()&&(n=this.getSelection(),r?-1===(i=n.indexOf(a[0]))?n.push(a[0]):n.splice(i,1):a.some(function(t){return n.indexOf(t)<0})?a.forEach(function(t){n.indexOf(t)<0&&n.push(t)}):n=n.filter(function(t){return a.indexOf(t)<0}),a=n),this.setSelection(a)},syncInput:function(){var e=this.elements.input,i=this.elements;!this._getOptions().length||this._getSelectedOptions().length||this._isMultiple()||(this._getOptions()[0].selected=!0);var s,o,a=this._getSelectedOptions().map(n.getText.call,n.getText).join(", ")||" ";i.content.getElement(".uwa-select-text").setText(a),i.dropdown.getInnerElement().getElement(".uwa-select-text").setText(a),i.options.empty(!0).setContent((o=Array.prototype.map.call(e.getElementsByTagName("*"),function(e){var i=n.getTagName.call(e),o=t.createElement("div",{class:i+(e.selected?" selected":""),text:e.label||n.getText.call(e)||" "});return"optgroup"===i?(s&&s.addClassName("selected"),s=o):e.selected||(s=null),o}),s&&s.addClassName("selected"),o))},_scrollToSelected:function(){var t=this.elements.dropdown&&this.elements.dropdown.getInnerElement().getElement(".option.selected");t&&o.scrollToElement(t)},onClick:function(t){this._parent(t),this.elements.dropdown.show()},onKeyDown:function(t){var n=e.whichKey(t),i=!0;"space"===n?this.elements.dropdown.show():"return"===n?this.elements.dropdown.toggle():"esc"===n?this.elements.dropdown.hide():i=!1,i?e.preventDefault(t):(this._parent(t),this.setDelayed("scroll-to-selected",this._scrollToSelected,1))},putOptions:function(e,s){var o=this.elements.input;function a(t,e){var n,i=o.getElementsByTagName("*");for(n=0;n<i.length;n+=1)if(i[n][t]===e)return i[n]}return s&&n.empty.call(o,!0),i.splat(e).forEach(function(e){var i,s,r=a("value",e.value);void 0!==e.label?(r||(r=t.createElement("option")),n.set.call(r,{text:e.label,value:e.value,selected:e.selected}),e.group?((s=a("label",e.group))||(s=o.appendChild(t.createElement("optgroup",{label:e.group}))),s.appendChild(r)):o.appendChild(r)):r&&(i=r.parentNode,n.remove.call(r),i&&"optgroup"===n.getTagName.call(i)&&0===i.childNodes.length&&n.remove.call(i))}),this.syncInput(),this},removeOptions:function(t){this.putOptions(i.splat(t).map(function(t){return{value:"string"==typeof t?t:t.value}}))}}),u.File=u.extend({name:"uwa-file",options:{button:{tag:"div",text:t.i18n("Browse...")}},buildInput:function(){return t.createElement("input",{type:"file"})},buildSkeleton:function(){this._parent(),this.options.buttonOnly?this.elements.content.addClassName("button-only"):this.elements.text=t.createElement("div",{class:this.getClassNames("-text")}),this.elements.content.addClassName(this.getClassNames("-split")).setContent([this.elements.text,t.createElement("div",{class:this.getClassNames("-button"),html:this.options.button})])},setValue:function(e){if(e)throw new Error("You can't set a value to a file input");var n,i=this.elements.input;i.value="",i.value&&((n=t.extendElement(t.clone(i))).inject(i,"before"),i.destroy(),this.elements.input=n,this._syncEvents(!0)),this.syncInput()},syncInput:function(){this.elements.text&&this.elements.text.setText(this.elements.input.value.replace(/^c:\\fakepath\\/i,"")||" ")}}),u.Text=u.extend(c,{name:"uwa-text",_hiddenInput:!1,options:{multiline:!1},buildInput:function(){return this.options.multiline?t.createElement("textarea"):t.createElement("input",{type:"text"})},buildSkeleton:function(){this._parent(),this.elements.input.addClassName(this.getClassNames("-text"))},onKeyDown:function(t){this._parent(t),this.setDelayed("placeholder-sync",this.syncInput,1)},onHide:function(){this._parent(),this.setDelayed("placeholder-sync",this.syncInput,1)},onShow:function(){this._parent(),this.setDelayed("placeholder-sync",this.syncInput,1)},onPostInject:function(){this.setDelayed("placeholder-sync",this.syncInput,50)},getInputElement:function(){return this.setDelayed("placeholder-sync",this.syncInput,1),this._parent()},syncInput:function(){var t=this.elements.input;s.Features.inputPlaceholder||(t.parentNode&&!this.getValue()&&t.getAttribute("placeholder")&&t.offsetHeight?this._showPlaceholder():this._hidePlaceholder())},_showPlaceholder:function(){var e,n,i=this.elements,s=i.input,o=s.getDimensions();i.placeholder||(this.setPeriodical("placeholder-sync",this.syncInput,1e3),i.placeholder=t.createElement("div",{class:this.getClassNames("-placeholder"),events:{click:this.focus.bind(this,!0)}})),o.width&&o.height?((n=s.getStyles(["font"])).height=o.innerHeight,n.width=o.innerWidth,"textarea"!==s.getTagName()&&(n.lineHeight=o.innerHeight+"px",n.whiteSpace="nowrap"),(e=s.getPosition()).x+=s.getComputedSize("marginLeft","paddingLeft","borderLeftWidth"),e.y+=s.getComputedSize("marginTop","paddingTop","borderTopWidth"),i.placeholder.set({text:s.getAttribute("placeholder"),styles:n}).setPosition(e),i.placeholder.previousSibling!==s&&i.placeholder.inject(s,"after")):this._hidePlaceholder()},_hidePlaceholder:function(){var t=this.elements.placeholder;t&&t.remove()}}),u.Password=u.Text.extend({options:{multiline:!1,attributes:{type:"password"}}}),u.Button=u.extend({name:"uwa-button",options:{className:"dark-grey"},_hiddenInput:!1,init:function(e){t.owns(e,"className")&&(e.className=e.className.replace(/\bblack\b/,"dark-grey"),/\b(?:iconl|iconr|icon-only)\b/.test(e.className)&&(e.className+=" uwa-icon"),/\b(?:dark-grey)\b/.test(e.className)&&(e.className+=" icon-separated")),this._parent(e),/\b(?:icon-only)\b/.test(this.options.className)&&this.setValue(" ")},buildInput:function(){return t.createElement("button",{type:"button"})}}),t.namespace("Controls/Input",u,t)}.apply(e,i))||(t.exports=s)},function(t,e,n){var i,s;i=[n(1)],void 0===(s=function(t){"use strict";var e=!1,n=/xyz/.test(function(){t.xyz()}),i=n?/\b_parent\b/:/^/,s=n?/\b_previous\b/:/^/,o=function(){},a=function(){};function r(t,e,n,a){n._original&&(n=n._original);var r,l=i.test(n),c=s.test(n);return l||c?("function"!=typeof e&&(e=a?o:t||o),"function"!=typeof t&&(t=c?o:e),(r=function(){var i,s,o;return null!=this?(l&&(s=this._parent,this._parent=t),c&&(o=this._previous,this._previous=e),i=n.apply(this,arguments),l&&(this._parent=s),c&&(this._previous=o)):i=n.apply(this,arguments),i}).displayName="(method wrapper)",r._original=n,r):n}function l(t){return function(){this._previous.apply(this,arguments),t.apply(this,arguments)}}return a.extend=function(){var n,i;return e=!0,n=new this,e=!1,i=function(){!e&&this.__uwaPrivateConstructor&&this.__uwaPrivateConstructor.apply(this,arguments)},n.constructor=i,t.extend(i,{prototype:n,parent:this,extend:a.extend,singleton:a.singleton,implement:a.implement}),i.implement.apply(i,arguments),i},a.implement=function(){var e,n,i,s,o,a,c,u=this.prototype||this;for(e=0,n=arguments.length;e<n;e+=1){var h;for(s in i=arguments[e],"class"===(o=t.typeOf(i))||"function"===o?("function"===o&&(i.prototype.__uwaPrivateConstructor=l(i)),i=i.prototype):i.init&&(i.__uwaPrivateConstructor=i.init,delete i.init),h=i.name?i.name:u.name?t.owns(u,"name")?u.name:"("+u.name+" inheritor)":"(anonymous class)",i)"constructor"!==s&&(a=i[s],t.is(a,"function")?(c=("class"===o?arguments[e]:this).parent,a.displayName=h+"#"+("__uwaPrivateConstructor"===s?"init":s),u[s]=r(c&&c.prototype&&c.prototype[s],t.owns(u,s)&&u[s],a,"class"===o)):t.is(a,"plain")?(t.owns(u,s)||(u[s]=t.is(u[s],"plain")?t.clone(u[s]):{}),t.extend(u[s],a,!0)):u[s]=a)}return this},a.singleton=function(){var t,n=this.extend.apply(this,arguments),i=n.prototype,s=!1,o=[];function a(e){t[e]=function(){if(!s){if("throw"===t.uninitializedCalls)throw new Error("Singleton called before being initialized");if("ignore"===t.uninitializedCalls)return;t.init()}return t[e].apply(this,arguments)}}for(var r in e=!0,t=new n,e=!1,i)"function"==typeof i[r]&&"init"!==r&&"constructor"!==r&&(o.push(r),a(r));return t.init=function(){if(s)throw new Error("Singleton is already initialized");var e,i;for(s=!0,e=0,i=o.length;e<i;e++)delete t[o[e]];return n.apply(this,arguments),this},t},t.namespace("Class",a,t)}.apply(e,i))||(t.exports=s)},function(t,e,n){var i,s;i=[n(347),n(1),n(9),n(22),n(39),n(13)],void 0===(s=function(t,e,n,i,s,o){"use strict";var a=[].forEach,r=new WeakMap,l=new WeakMap;function c(t,e){var n,i;for(n=0,i=t.length;n<i;n++){var s=t[n];if(1===s.nodeType){var o,a;e(s);var r=s.getElementsByTagName("*");for(o=0,a=r.length;o<a;o++)e(r[o])}}}function u(e){var n,i;try{i=(n=e&&(e.ownerDocument||e.document||e))&&n.documentElement}catch(t){}if(i&&!l.has(i)){var s=new t(function(t){function e(t,e,n){var i=r.get(t);i?i.dispatchEvent(e?"onInjected":"onRemoved",n):"IFRAME"===t.tagName&&u(t.contentWindow)}a.call(t,function(t){var n={nextSibling:t.nextSibling||null,previousSibling:t.previousSibling||null,parentNode:t.target};c(t.addedNodes,function(t){e(t,!0,n)}),c(t.removedNodes,function(t){e(t,!1,n)})})});l.set(i,s),s.observe(i,{childList:!0,subtree:!0})}}u(e.getGlobal());var h=n.extend(i,s,{elements:null,init:function(t){this.elements={},this.setOptions(t)},inject:function(t,e){var n=this.getContent();if(n){var i=r.get(n);if(i&&i!==this)throw new Error("This control container element is already owned by another control!");r.set(n,this),u(t),this.dispatchEvent("onPreInject",[t]),n.inject(t,e),this.dispatchEvent("onPostInject",[t]),this.dispatchEvent("onResize",[t])}return this},remove:function(){var t=this.getContent();return t&&t.remove(),this},getContent:function(){if(!this.elements.container&&!this.container)throw new Error("You don't have an elements.container or container.");return this.elements.container||this.container},getClassNames:function(){var t=this.constructor,e=o.toArray(arguments),n=this.options.className||"",i=o.splat(n).join(" ");for(e.length||(e=[""]),e.indexOf("")>=0&&!1!==this.options._root&&e.push("-root");t;)t.prototype.name&&(i+=" "+t.prototype.name+e.join(" "+t.prototype.name)),t=t.parent;return i},hide:function(){return this.getContent().hide(),this.dispatchEvent("onHide")},show:function(){return this.getContent().show(),this.dispatchEvent("onShow")},destroy:function(){var t,e=this.elements||{};for(t in this.container&&(e.container=this.container),this.elements.container&&r.delete(this.elements.container),e)e.hasOwnProperty(t)&&(e[t].destroy(),delete e[t]);this.removeEvents(),this.clearAllTimed&&this.clearAllTimed()}}),d=new WeakMap;return h._getClosestControlFromElement=function(t){for(;t;){var e=d.get(t);if(e)return e;t=t.parentNode}return null},h._getClosestControlsFromElement=function(t){for(var e=[];t;){var n=d.get(t);n&&e.indexOf(n)<0&&e.push(n),t=t.parentNode}return e},h._linkElementToControl=function(t,e){var n=d.get(e);if(n){if(n!==t)throw new Error("This element is already linked to another control")}else d.set(e,t)},e.namespace("Controls/Abstract",h,e)}.apply(e,i))||(t.exports=s)},function(t,e,n){"use strict";var i,s;i=[n(1),n(9),n(59),n(8),n(71),n(157),n(124),n(195),n(41),n(274),n(0)],void 0===(s=function(t,e,n,i,s,o,a,r,l,c,u){var h=u.h,d=e.extend(u.Component).extend({_containedControl:!0,_renderTag:"div",init:function(t){this._parent(t),this._currentStyle={},this._currentClass=[]},getControl:function(){return this._control},render:function(){return h(this._renderTag,this._renderProps)},_mutateValue:function(t,e){switch(t){case"containerStyle":return this._applyStyle(e),!0;case"containerClass":return this._applyClass(e),!0;case"events":return this._control.removeEvents().addEvents(e),!0}return!1},_rebuildControl:function(){this._destroyControl();var t=Object.assign({},this.props);delete t.containerStyle,delete t.containerClass,this._containedControl||(this.base.className="",this.base.disabled=!1,t.container=this.base),this._control=this._buildControl(t),this._applyStyle(this.props.containerStyle),this._applyClass(this.props.containerClass),this._containedControl&&this._control.inject(this.base)},_applyStyle:function(t){for(var e in t||(t={}),this._currentStyle)e in t||this.base.setStyle(e,null);this.base.setStyles(t),this._currentStyle=t},_applyClass:function(t){t=t?String(t).split(/\s+/).filter(Boolean):[];var e=this._currentClass,n=Array.isArray(e),i=0;for(e=n?e:e[Symbol.iterator]();;){var s;if(n){if(i>=e.length)break;s=e[i++]}else{if((i=e.next()).done)break;s=i.value}var o=s;t.includes(o)||this.base.classList.remove(o)}var a=t,r=Array.isArray(a),l=0;for(a=r?a:a[Symbol.iterator]();;){var c;if(r){if(l>=a.length)break;c=a[l++]}else{if((l=a.next()).done)break;c=l.value}var u=c;this.base.classList.add(u)}this._currentClass=t},_destroyControl:function(){if(this._control){var t=this.base,e=t.parentNode,n=t.nextSibling;this._control.destroy(),this._control=null,e&&!this.base.parentNode&&e.insertBefore(this.base,n)}},shouldComponentUpdate:function(e){for(var n in this.props)if(!(n in e||this._mutateValue(n,void 0)))return!0;for(var i in e)if(!t.equals(this.props[i],e[i])&&!this._mutateValue(i,e[i]))return!0;return!1},componentDidMount:function(){t.extendElement(this.base),this._rebuildControl()},componentDidUpdate:function(){this._rebuildControl()},componentWillUnmount:function(){this._destroyControl()}}),p=d.extend({_buildControl:function(t){return new l(t)}}),m=d.extend({_buildControl:function(t){return new n(t)}}),f=d.extend({_mutateValue:function(e,n){if(this._parent(e,n))return!0;switch(e){case"attributes":if(!n)return!1;for(var i in n)if("checked"===i)this._control.check(n.checked);else{if("disabled"!==i)return!1;this._control.setDisabled(n.disabled)}return!0;case"value":return t.equals(n,this._control.getValue())||this._control.setValue(n),!0}return!1}}),g=f.extend({_containedControl:!1,_buildControl:function(t){return new i.Radio(t)}}),v=f.extend({_containedControl:!1,_buildControl:function(t){return new i.Checkbox(t)}}),b=f.extend({_containedControl:!1,_renderTag:"button",_renderProps:{type:"button"},_buildControl:function(t){return new i.Button(t)}}),y=f.extend({_containedControl:!1,_renderTag:"a",_buildControl:function(t){return new i.Button(t)}}),w=f.extend({_containedControl:!1,_buildControl:function(t){return new i.File(t)}}),x=f.extend({_containedControl:!1,render:function(t){return t.multiline?h("textarea",this._renderProps):h("input",Object.assign({type:"text"},this._renderProps))},_buildControl:function(t){return t.container.value="",t.multiline||(t.container.type="text"),new i.Text(t)}}),C=f.extend({_containedControl:!1,_renderTag:"input",_renderProps:{type:"password"},_buildControl:function(t){return t.container.value="",t.container.type="password",new i.Password(t)}}),_=f.extend({_containedControl:!1,_buildControl:function(t){var e=Object.assign({},t);delete e.events;var n=new i.Select(e);return t.events&&n.addEvents(t.events),n}}),S=f.extend({_renderProps:{style:{display:"inline-block"}},_buildControl:function(t){return new s(t)}}),E=d.extend({_buildControl:function(t){return new o(t)},componentDidMount:function(){var t=this;this._parent(),this.props.scrollable&&(this._timeout=setTimeout(function(){t.getControl().addScroller()},10))},componentWillUnmount:function(){this._parent(),clearTimeout(this._timeout)}}),k=f.extend({_containedControl:!1,_renderTag:"div",_buildControl:function(t){return new a(t)}}),T=f.extend({_buildControl:function(t){return new c(t)}}),A=f.extend({_containedControl:!1,_buildControl:function(t){return new r(t)}});return{Abstract:d,UWAInputAbstract:f,Spinner:p,Radio:g,Checkbox:v,Button:b,ButtonLink:y,File:w,Tag:m,TagSelection:T,Text:x,Password:C,Select:_,Autocomplete:S,DataGrid:E,DatePicker:A,ColorPicker:k}}.apply(e,i))||(t.exports=s)},function(t,e,n){"use strict";var i=n(1),s=n.n(i);function o(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function a(t,e,n){return e&&o(t.prototype,e),n&&o(t,n),t}var r=function(){function t(){this._fields=new Set,this._values={},this._loading=!1,this._error=null,this._submitted=!1,this._ignoreEmit=0,this._emitIgnored=!1,this._forbidEmit=0,this._constraints=new Set,this._listeners=new Set}var e=t.prototype;return e.emit=function(){var t=this;if(this._forbidEmit)throw new Error("Listeners should not mutate the form models. Use a 'constraint' instead.");this._ignoreEmit?this._emitIgnored=!0:this.callNoEmit(function(){t._constraints.forEach(function(e){return e(t)}),t._forbidEmit+=1;try{t._listeners.forEach(function(e){return e(t)})}finally{t._forbidEmit-=1}})},e.submit=function(){this._submitted||(this._submitted=!0,this.emit())},e.field=function(t){var e=this._fields,n=Array.isArray(e),i=0;for(e=n?e:e[Symbol.iterator]();;){var s;if(n){if(i>=e.length)break;s=e[i++]}else{if((i=e.next()).done)break;s=i.value}var o=s;if(o.name===t)return o}return new l(this,t)},e.callNoEmit=function(t){try{this._ignoreEmit+=1,t(this)}finally{this._ignoreEmit-=1}if(this._emitIgnored)return this._emitIgnored=!1,!0},e.batch=function(t){this.callNoEmit(t)&&this.emit()},a(t,[{key:"fields",get:function(){return this._fields}},{key:"listeners",get:function(){return this._listeners}},{key:"constraints",get:function(){return this._constraints}},{key:"values",get:function(){return this._values},set:function(t){s.a.equals(t,this._values)||(this._values=t,this.emit())}},{key:"error",get:function(){return this._error},set:function(t){t||(t=null),this._error!==t&&(this._error=t,this.emit())}},{key:"loading",get:function(){return this._loading||Array.from(this._fields).some(function(t){return t.loading})},set:function(t){t=Boolean(t),this._loading!==t&&(this._loading=t,this.emit())}},{key:"submitted",get:function(){return this._submitted}}]),t}(),l=function(){function t(t,e){this._form=t,this._name=e,this._loading=!1,this._error=null,this._touched=null,this._disabled=!1,t._fields.add(this)}var e=t.prototype;return e.batch=function(t){var e=this;this._form.batch(function(){return t(e)})},e.delete=function(){this._form._fields.delete(this),this._form=null},a(t,[{key:"form",get:function(){return this._form}},{key:"name",get:function(){return this._name}},{key:"value",get:function(){return this._form.values[this._name]},set:function(t){this._disabled||s.a.equals(this._form.values[this._name],t)||(this._form.values[this._name]=t,this._form.emit())}},{key:"loading",get:function(){return this._loading},set:function(t){t=Boolean(t),this._loading!==t&&(this._loading=t,this._form.emit())}},{key:"disabled",get:function(){return this._disabled},set:function(t){t=Boolean(t),this._disabled!==t&&(this._disabled=t,this._form.emit())}}]),t}(),c=n(0),u=n.n(c),h=n(5),d=n.n(h),p=n(11);var m=function(t){var e,n;function i(){return t.apply(this,arguments)||this}n=t,(e=i).prototype=Object.create(n.prototype),e.prototype.constructor=e,e.__proto__=n;var s=i.prototype;return s.getChildContext=function(){return{inFormListener:!0}},s.componentWillMount=function(){var t=this;this._constraint=function(){t.props.onConstraint&&t.props.onConstraint(t._model)},this._listener=function(){t.props.onChange&&t.props.onChange(t._model),t.context.inFormListener||t.forceUpdate()},this._model=this.props.model||new r,this._model.listeners.add(this._listener),this._model.constraints.add(this._constraint),!this.props.model&&this.props.onInit&&this._model.callNoEmit(this.props.onInit)},s.componentWillReceiveProps=function(t){t.onUpdate&&this._model.callNoEmit(t.onUpdate)},s.componentWillUnmount=function(){this._model.listeners.delete(this._listener),this._model.constraints.delete(this._constraint)},s.render=function(t){return(0,t.render)(this._model)},i}(d.a),f=n(14),g=n.n(f).a.namespace("Form").addRules({field:{position:"relative",fontSize:"15px",lineHeight:"1.5",margin:"28px 0"},fieldInner:{display:"flex",padding:"0 43px",flexWrap:"wrap"},fieldVertical:{flexDirection:"column"},label:{minWidth:"161px",padding:"5px 10px 5px 0",flex:.5},labelVertical:{padding:"0 10px 0 0",flex:0},inputContainer:{flex:1,minWidth:"150px"},description:{margin:"10px 0 0",fontSize:"12px"},fieldError:{backgroundColor:"#982f2a",padding:"4px 43px"},fieldDisabled:{opacity:.5,pointerEvents:"none"},hasError:{backgroundColor:"rgba(152, 47, 42, 0.14)"},checkbox:{margin:"7px 15px 7px 0"},radio:{margin:"7px 15px 7px 0"},radioSelectLabel:{display:"block",margin:"7px 0"},text:{width:"100%",margin:"0"},select:{inherit:"text"},colorPicker:{margin:0},file:{inherit:"text"},widgetHeader:{display:"flex"},fileInput:{margin:0,flex:0},filePreview:{display:"flex",margin:"0 14px",alignItems:"flex-start"},fileImage:{maxHeight:"50px",maxWidth:"80px",verticalAlign:"top"},textMultiline:{inherit:"text",height:"4em"},fileDelete:{margin:"0 0 0 14px",cursor:"pointer",hover:{color:"#aaa"}}});function v(){return(v=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t}).apply(this,arguments)}function b(t){return function(e){var n,i;function s(){return e.apply(this,arguments)||this}i=e,(n=s).prototype=Object.create(i.prototype),n.prototype.constructor=n,n.__proto__=i;var o=s.prototype;return o.bindModel=function(t){this._model=t},o.componentWillMount=function(){this.bindModel(this.props.model||this.context.field)},o.componentWillUpdate=function(t,e,n){this.bindModel(t.model||n.field)},o.render=function(e){var n=this;return this._model?u.a.h(m,{model:this._model.form,render:function(){return u.a.h(t,v({},e,{model:n._model}))}}):u.a.h(t,e)},s}(d.a)}function y(t){for(var e={},n=arguments.length,i=new Array(n>1?n-1:0),s=1;s<n;s++)i[s-1]=arguments[s];for(var o in t)i.includes(o)||(e[o]=t[o]);return e}function w(t,e){return"string"==typeof e.containerClass?t+e.containerClass:"object"==typeof e.containerClass?g(t,e.containerClass):t}function x(){return(x=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t}).apply(this,arguments)}var C=b(function(t){var e,n;function i(e){var n;return(n=t.call(this,e)||this).onChange=n.onChange.bind(function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(n)),n}n=t,(e=i).prototype=Object.create(n.prototype),e.prototype.constructor=e,e.__proto__=n;var s=i.prototype;return s.render=function(t){return u.a.h(p.Text,x({},y(t,"model","containerClass"),{containerClass:w(g("text",t.multiline&&"textMultiline"),t),value:t.model.value||"",events:{onChange:this.onChange}}))},s.onChange=function(t){this.props.model.value=t.target.value},i}(d.a));function _(){return(_=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t}).apply(this,arguments)}var S=b(function(t){var e,n;function i(e){var n;return(n=t.call(this,e)||this).onChange=n.onChange.bind(function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(n)),n}n=t,(e=i).prototype=Object.create(n.prototype),e.prototype.constructor=e,e.__proto__=n;var s=i.prototype;return s.render=function(t){return u.a.h(p.Checkbox,_({},y(t,"model","containerClass"),{containerClass:w(g("checkbox"),t),attributes:{checked:Boolean(t.model.value),disabled:t.model.disabled},className:"green",events:{onChange:this.onChange}}))},s.onChange=function(t){this.props.model.value=t.target.checked},i}(d.a));function E(){return(E=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t}).apply(this,arguments)}var k=b(function(t){var e,n;function i(e){var n;return(n=t.call(this,e)||this).onChange=n.onChange.bind(function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(n)),n}n=t,(e=i).prototype=Object.create(n.prototype),e.prototype.constructor=e,e.__proto__=n;var s=i.prototype;return s.render=function(t){var e=t.model;return u.a.h(p.Select,E({},y(t,"model","containerClass"),{containerClass:w(g("select"),t),attributes:{disabled:e.disabled},value:e.value&&[e.value],events:{onChange:this.onChange}}))},s.onChange=function(t){this.props.model.value=t.target.value},i}(d.a));var T=b(function(t){var e,n;function i(e){var n;return(n=t.call(this,e)||this).onChange=n.onChange.bind(function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(n)),n}n=t,(e=i).prototype=Object.create(n.prototype),e.prototype.constructor=e,e.__proto__=n;var s=i.prototype;return s.render=function(t){var e=this,n=t.model,i=t.options;return u.a.h("div",null,i.map(function(t){return u.a.h("label",{key:t.value,class:g("radioSelectLabel")},u.a.h(p.Radio,{attributes:{checked:n.value===t.value,disabled:n.disabled},value:t.value,className:"green",containerClass:g("radio"),events:{onChange:e.onChange}}),t.label)}))},s.onChange=function(t){this.props.model.value=t.target.value},i}(d.a));function A(){return(A=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t}).apply(this,arguments)}var I=b(function(t){var e,n;function i(e){var n;return(n=t.call(this,e)||this).onChange=n.onChange.bind(function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(n)),n}n=t,(e=i).prototype=Object.create(n.prototype),e.prototype.constructor=e,e.__proto__=n;var s=i.prototype;return s.render=function(t){return u.a.h(p.Radio,A({},y(t,"model","containerClass","value"),{containerClass:w(g("radio"),t),attributes:{checked:t.model.value===t.value,disabled:t.model.disabled},className:"green",events:{onChange:this.onChange}}))},s.onChange=function(t){t.target.checked&&(this.props.model.value=this.props.value)},i}(d.a));function N(){return(N=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t}).apply(this,arguments)}var D=b(function(t){var e,n;function i(e){var n;return(n=t.call(this,e)||this).onChange=n.onChange.bind(function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(n)),n}n=t,(e=i).prototype=Object.create(n.prototype),e.prototype.constructor=e,e.__proto__=n;var s=i.prototype;return s.render=function(t){return u.a.h(p.File,N({},y(t,"model","containerClass"),{containerClass:w(g("file"),t),events:{onChange:this.onChange},attributes:{disabled:t.model.loading||t.model.disabled}}))},s.onChange=function(t){this.props.model.value=t.target.files[0]},i}(d.a));function O(){return(O=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t}).apply(this,arguments)}var P=b(function(t){var e,n;function i(e){var n;return(n=t.call(this,e)||this).onChange=n.onChange.bind(function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(n)),n}n=t,(e=i).prototype=Object.create(n.prototype),e.prototype.constructor=e,e.__proto__=n;var s=i.prototype;return s.render=function(t){var e=this,n=t.model;return u.a.h(p.ColorPicker,O({ref:function(t){e.picker=t}},y(t,"model","containerClass"),{containerClass:w(g("colorPicker"),t),attributes:{disabled:n.disabled},value:n.value,events:{onChange:this.onChange}}))},s.onChange=function(){this.props.model.value=this.picker.getControl().getValue()},i}(d.a)),F=n(6),M=n.n(F),L=n(4),R=n.n(L),j=n(27),V=n.n(j),B=n(2),z=n.n(B);function W(t,e,n,i,s,o,a){try{var r=t[o](a),l=r.value}catch(t){return void n(t)}r.done?e(l):Promise.resolve(l).then(i,s)}function U(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}var H=b(function(t){var e,n;function i(e){var n;return(n=t.call(this,e)||this).onChange=n.onChange.bind(U(n)),n.onDelete=n.onDelete.bind(U(n)),n}n=t,(e=i).prototype=Object.create(n.prototype),e.prototype.constructor=e,e.__proto__=n;var s=i.prototype;return s.render=function(t){var e=this.props.model;return u.a.h("div",{class:w(g("widgetHeader"),t)},u.a.h(p.File,{containerClass:g("fileInput"),buttonOnly:!0,events:{onChange:this.onChange},attributes:{disabled:e.loading||e.disabled}}),e.loading?u.a.h("div",{class:g("filePreview")},u.a.h(p.Spinner,{size:32})):e.value&&u.a.h("div",{class:g("filePreview")},u.a.h("img",{src:z.a.Config.urls.storage+e.value,class:g("fileImage")}),u.a.h("div",{class:g("fileDelete")+" uwa-icon delete",onClick:this.onDelete})))},s.onChange=function(){var t,e=(t=regeneratorRuntime.mark(function t(e){var n,i;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return(n=this.props.model).loading=!0,t.prev=2,t.next=5,M.a.uploadWidgetHeader({uploadedFile:e.target.files[0]});case 5:i=t.sent,n.value=i+"?"+R.a.uniqueID(),n.error=void 0,t.next=13;break;case 10:t.prev=10,t.t0=t.catch(2),n.error=V.a.getErrorMessage(t.t0);case 13:n.loading=!1;case 14:case"end":return t.stop()}},t,this,[[2,10]])}),function(){var e=this,n=arguments;return new Promise(function(i,s){var o=t.apply(e,n);function a(t){W(o,i,s,a,r,"next",t)}function r(t){W(o,i,s,a,r,"throw",t)}a(void 0)})});return function(t){return e.apply(this,arguments)}}(),s.onDelete=function(){this.props.model.value=void 0},i}(d.a));function q(){return(q=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t}).apply(this,arguments)}function G(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,t.__proto__=e}var Y=b(function(t){function e(){return t.apply(this,arguments)||this}G(e,t);var n=e.prototype;return n.getChildContext=function(){return{field:this.props.model}},n.render=function(t){return u.a.h(X,q({},y(t,"model"),{error:t.model.error,disabled:t.model.disabled}))},e}(d.a)),X=function(t){function e(){return t.apply(this,arguments)||this}return G(e,t),e.prototype.render=function(t){var e=t.children,n=t.disabled,i=t.description,s=t.error,o=t.label,a=t.vertical;return u.a.h("div",{class:g("field",s&&"hasError")},s&&u.a.h("div",{class:g("fieldError")},s),u.a.h("div",{class:g("fieldInner",a&&"fieldVertical",n&&"fieldDisabled")},o&&u.a.h("div",{class:g("label",a&&"labelVertical")},o),u.a.h("div",{class:g("inputContainer")},e,i&&u.a.h("div",{class:g("description")},i))))},e}(d.a);n.d(e,"j",function(){return C}),n.d(e,"a",function(){return S}),n.d(e,"i",function(){return k}),n.d(e,"f",function(){return T}),n.d(e,"e",function(){return I}),n.d(e,"c",function(){return D}),n.d(e,"b",function(){return P}),n.d(e,"k",function(){return H}),n.d(e,"d",function(){return m}),n.d(e,"h",function(){return Y}),n.d(e,"g",function(){return X})},function(t,e,n){(function(i){var s,o;s=[n(1),n(57),n(346)],void 0===(o=function(t,e,n){"use strict";var i,s,o,a,r,l,c,u,h,d,p,m,f,g="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",v=t.getGlobal();return i={buildUrl:function(){var t=v.location&&v.location.protocol?v.location.protocol:"http:";return function(e,n){if(e=String(e),n=String(n),!i.isAbsoluteUrl(e))throw new Error("First argument should be a absolute url.");"//"===e.substring(0,2)&&(e=t+e);var s,o,a,r,l=String(e).split("://"),c=l[0],u=l[1].split("/"),h=u[0],d="";if("//"===n.substring(0,2))e=c+":"+n;else if(n.split("://").length>1)e=n;else if("/"===n.substring(0,1))e=c+"://"+h+n;else{for(s=1,o=u.length-1;s<o;s++)d+="/"+u[s];e=c+"://"+h+(r=[],(a=d+"/"+n).replace(/^(\.\.?(\/|$))+/,"").replace(/\/(\.(\/|$))+/g,"/").replace(/\/\.\.$/,"/../").replace(/\/?[^/]*/g,function(t){"/.."===t?r.pop():r.push(t)}),r.join("").replace(/^\//,"/"===a.charAt(0)?"/":""))}return e}}(),parseUrl:(m=["source","subprotocol","protocol","authority","user","password","domain","port","path","directoryPath","fileName","query","anchor"],f=new RegExp("^(?:(?:(?:([^#.:]+):)?([^#.:]+):)?//)?((?:([^:/]+)(?::([^/]*?))?@)?([^:/?#]*)(?::(\\d*))?)?((/(?:[^?#](?![^?#/]*\\.[^?#/.]+(?:[\\?#]|$)))*/?)?([^?#/]*))?(?:\\?([^#]*))?(?:#(.*))?"),function(t){var e,n=f.exec(t),i={};for(e=0;e<m.length;e++)i[m[e]]=n[e]||"";return i.subprotocol&&(i.source=i.source.substr(i.subprotocol.length+1)),i.port||(i.port="https"===i.protocol?"443":"80"),i.directoryPath&&i.directoryPath.length>0&&(i.directoryPath=i.directoryPath.replace(/\/?$/,"/")),i.domain=i.domain.toLocaleLowerCase(),i.protocol=i.protocol.toLocaleLowerCase(),i}),composeUrl:function(t){var e="";return t.protocol&&(e=t.protocol+"://",t.subprotocol&&(e=t.subprotocol+":"+e)),t.domain?(e+=t.domain,!t.port||"http"===t.protocol&&80===parseInt(t.port,10)||"https"===t.protocol&&443===parseInt(t.port,10)||(e+=":"+t.port)):t.authority&&(e+=t.authority),t.path&&(e+=t.path),t.query&&(e+="?"+t.query),t.anchor&&(e+="#"+t.anchor),e},matchUrl:function(t,e){var n,s,o=!1,a=i.isAbsoluteUrl(t),r=i.isAbsoluteUrl(e);return a||r?(a?r||(e=i.buildUrl(t,e)):t=i.buildUrl(e,t),n=i.parseUrl(t),s=i.parseUrl(e),o=["domain","protocol","port"].every(function(t){return n[t]===s[t]||"protocol"===t&&(""===n[t]||""===s[t])})):o=!0,o},isAbsoluteUrl:(p=/^((https?|ftp|file):)?\/\//,function(t){return p.test(t)}),isValidUrl:(u="(\\/(?!/)([a-z0-9._~\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF!\\$&'\\(\\)\\*\\+,;=:@-]|(?:%[\\da-f]{2}))*)*(\\?(([a-z0-9._~\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF!\\$&'\\(\\)\\*\\+,;=:@-]|(?:%[\\da-f]{2}))|[\\uE000-\\uF8FF]|\\/|\\?)*)?(\\#(([a-z0-9._~\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF!\\$&'\\(\\)\\*\\+,;=:@-]|(?:%[\\da-f]{2}))|[\\uE000-\\uF8FF]|\\/|\\?)*)?",h=new RegExp("^(?:((?:https?|ftp|file):)?//)(?:\\S+(?::\\S*)?@)?(?:(?:[1-9]\\d?|1\\d\\d|2[01]\\d|22[0-3])(?:\\.(?:1?\\d{1,2}|2[0-4]\\d|25[0-5])){2}(?:\\.(?:[1-9]\\d?|1\\d\\d|2[0-4]\\d|25[0-4]))|(?:[a-z\\u00a1-\\uffff0-9]+-)*[a-z\\u00a1-\\uffff0-9]+(?:\\.(?:[a-z\\u00a1-\\uffff0-9]+-)*[a-z\\u00a1-\\uffff0-9]+)*\\.(?:[a-z\\u00a1-\\uffff]{2,}))(?::\\d{2,5})?"+u+"$","i"),d=new RegExp("^"+u+"$","i"),function(t){return(i.isAbsoluteUrl(t)?h:d).test(t)}),encodeUrl:function(t){return encodeURIComponent(t).replace(/\./g,"%2e")},parseQuery:function(e){var n=e.substring(e.indexOf("?")+1).split(/[&;]/),i={};return n.length&&n.forEach(function(e){var n=e.indexOf("=")+1,s=n?e.substr(n):"",o=n?e.substr(0,n-1).match(/([^\][]+|(\B)(?=\]))/g):[e],a=i;o&&(s=decodeURIComponent(s),o.forEach(function(e,n){e=decodeURIComponent(e);var i=a[e];n<o.length-1?a=a[e]=i||{}:Array.isArray(i)?i.push(s):a[e]=t.is(i)?[i,s]:s}))}),i},toQueryString:function(e,n){var s,o,a,r,l=t.is;if(l(e,"string"))r=e;else if(l(e.toQueryString,"function"))r=e.toQueryString();else{for(s in r=[],e)e.hasOwnProperty(s)&&(o=e[s],n&&(s=n+"["+s+"]"),l(o)&&(l(o,"object")||l(o,"array")?a=i.toQueryString(o,s):l(o,"function")||(a=i.encodeUrl(s)+"="+i.encodeUrl(o))),a&&r.push(a),a=void 0);r=r.join("&")}return r},getQueryString:function(t,e,n){e=e.replace(/[[]/,"\\[").replace(/[\]]/,"\\]");var i=new RegExp(e+"=([^&#]*)").exec(t);return i?decodeURIComponent(i[1]):n},loadXml:(r=/<(DOCTYPE|xml)[^><]*>|<.(DOCTYPE|xml)[^><]*>/g,l=/(<(style|script)[^>]*>)([\u0001-\uFFFF]*?)(<\/(style|script)>)/gim,c=/<!\[CDATA\[/,function(t,e){var n,s,o,a,u;if("object"==typeof t&&t.nodeType)n=t;else if(t=(t=t.replace(r,"")).replace(l,function(){var t=arguments,e=t[1],n=t[3],i=t[4];return c.test(n)||(n="<![CDATA[\n"+n+"\n]]>"),e+n+i}),v.DOMParser)try{if(u=(n=(n=new v.DOMParser).parseFromString(t,"application/xml")).getElementsByTagName("parsererror")[0])throw new Error(u.textContent||u.innerText)}catch(t){throw new Error("Invalid XML: "+t.message)}else{if(!v.ActiveXObject)throw new Error("No native XML parser available.");if((n=new v.ActiveXObject("MSXML2.DOMDocument")).setProperty("SelectionLanguage","XPath"),n.validateOnParse=!1,n.resolveExternals=!1,n.preserveWhiteSpace=!1,n.async=!1,n.loadXML(t),0!==n.parseError.errorCode)throw new Error("Invalid XML: "+n.parseError.line+", "+n.parseError.reason)}return e&&(v.XSLTProcessor?((s=new v.XSLTProcessor).importStylesheet(i.loadXml(e)),n=s.transformToDocument(n,document)):((s=new v.ActiveXObject("Msxml2.FreeThreadedDOMDocument")).loadXML(i.xmlToString(e)),(o=new v.ActiveXObject("Msxml2.XSLTemplate")).stylesheet=s,(a=o.createProcessor()).input=n,a.transform(),n=i.loadXml(a.output))),n}),loadHtml:function(){var t=new RegExp("</?(script|embed|object|frameset|frame|iframe|meta|link|style)(.|\n)*?>","img"),e=new RegExp("<([a-z][a-z0-9]*)(?:[^>]*(\\s(src|href|title|style|alt|height|width|data-([a-z][a-z0-9]*))=['\"][^'\"]*['\"]))?[^>]*?(\\/?)>","im");return function(n){var i,s,o,a;if(v.DOMParser)try{i=(new v.DOMParser).parseFromString(n,"text/html")}catch(t){}if(!i&&document.implementation.createHTMLDocument)try{(s=(i=document.implementation.createHTMLDocument("")).documentElement).innerHTML=n,o=s.firstElementChild,1===s.childElementCount&&"html"===o.localName.toLowerCase()&&i.replaceChild(o,s)}catch(t){i=null}if(n=function(n){return n=(n=n.replace(t,"")).replace(e,"<$1$2$4>")}(n),!i&&v.ActiveXObject)try{(i=new v.ActiveXObject("htmlfile")).write(n),i.close()}catch(t){i=null}return i||((a=document.createElement("iframe")).style.display="none",document.body.appendChild(a),(i=a.contentDocument||a.contentWindow.document).write(n),i.close(),document.body.removeChild(a)),i}}(),xmlToHtml:function(t){"string"==typeof t&&(t=i.loadXml(t)),9===t.nodeType&&(t=t.childNodes[0]);var e,n,s,o,a=t.nodeName.toLowerCase(),r=document.createElement(a),l=t.childNodes,c=t.attributes||[];for(s=0,o=c.length;s<o;s++)e=c[s],r.setAttribute(e.name,e.value);for(s=0,o=l.length;s<o;s++)switch((n=l[s]).nodeType){case 1:r.appendChild(i.xmlToHtml(n));break;case 3:"style"===a&&r.styleSheet?r.styleSheet.cssText=n.nodeValue:r.appendChild(document.createTextNode(n.nodeValue));break;case 4:case 8:"script"===a?r.text=n.nodeValue:r.appendChild(document.createComment(n.nodeValue))}return r},xmlToString:function(){return function(t,e){var n;return n="string"==typeof t?t:v.XMLSerializer?(n=new v.XMLSerializer).serializeToString(t):t.xml,e&&(n=function(t){var e,n,i,s,o=0;return e=t.trim().replace(/(>)(\s+)?(<)(\/*)/g,"$1\r\n$3$4").split(">\r\n"),t="",e.forEach(function(a,r){var l,c=0,u="",h="\r\n";for(r!==e.length-1&&(a+=">"),i=s,s=n,n=/(<!\[CDATA\[)|(\]\]>)/.test(e[r+1]||""),a.match(/.+<\/\w[^>]*>$/)?c=0:a.match(/^<\/\w/)?0!==o&&(o-=1):a.match(/^<\w[^>]*[^/]>.*$/)&&(c=1),l=0;l<o;l++)u+="  ";(n||s&&!n)&&(h=""),(s||i&&!s)&&(u=""),t+=u+a+h,o+=c}),t}(n)),n.trim()}}(),setCss:function(){function t(t,e){var n,i,s=e.match(/^[\s\S]*(?:^|\s)(?:body|html)\b(\S*)/);return s?(n=e.slice(0,s[0].length).trim()+" ",i=e.slice(s[0].length).trim()):(n="",i=e),(i=i.replace(/^\.module\b\S*\s/,"")).startsWith(t+" ")||(i=t+" "+i),n+i}return function(n,s,o,a){o=o?o.trim():"",s=Array.isArray(s)?s.join("\n"):String(s),n||(n=i.getCheckSum(s));var r=function(t){for(var e=/\{/g,n=/\}/g,i=0,s=n.test(t),o=e.test(t),a=[],r={children:a};;)if(o&&e.lastIndex<n.lastIndex){var l={prefix:t.slice(i,e.lastIndex-1),parent:r,content:"",children:[]};r.children.push(l),r=l,i=e.lastIndex,o=e.test(t)}else{if(!s)break;r.content=t.slice(i,n.lastIndex-1),r.parent&&(r=r.parent),i=n.lastIndex,s=n.test(t)}return a}(s=s.replace(/\/\*[\s\S]*?\*\//g,""));return o&&(!function t(n,i){n.forEach(function(n){var s=n.prefix.trim();"@"!==s[0]&&!1!==i&&(n.selectors=e.invoke(s.split(","),"trim")),t(n.children,!s.startsWith("@keyframes"))})}(r),function e(n,i){n.forEach(function(n){var s,o;if(n.selectors)for(s=0,o=n.selectors.length;s<o;s++)n.selectors[s]=t(i,n.selectors[s]);else e(n.children,i)})}(r,o)),a&&function(t,e){t.forEach(function(t){t.content=t.content.replace(/\burl\(["']?([\s\S]*?)["']?\)/g,function(t,n){return i.isAbsoluteUrl(n)||(n=i.buildUrl(e,n)),'url("'+n+'")'})})}(r,a),function(t,e){var n=document.getElementById(e);n||((n=document.createElement("style")).setAttribute("id",e),n.setAttribute("type","text/css"),document.getElementsByTagName("head").item(0).appendChild(n)),n.styleSheet?n.styleSheet.cssText=t:n.appendChild(document.createTextNode(t))}(s=function t(e){return e.map(function(e){return(e.selectors?e.selectors.join(",\n")+" ":e.prefix)+"{"+t(e.children)+e.content+"}"}).join("\n")}(r),n),s}}(),toArray:function(t){var e,n,i=typeof t,s=[];if("string"===i)s=t.split("");else if("object"===i&&!1===Array.isArray(t))if(void 0!==t.length)for(e=0,n=t.length;e<n;e++)s[e]=t[e];else for(e in t)t.hasOwnProperty(e)&&s.push(t[e]);else t&&(s=Array.prototype.slice.call(t));return s},splat:function(e){return t.is(e)?Array.isArray(e)?e:t.is(e,"arguments")?i.toArray(e):[e]:[]},getUUID:function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){var e=16*Math.random()|0;return("x"===t?e:3&e|8).toString(16)})},getUniqueId:(o=0,a=Math.pow(32,4),function(t){return o++,(t||"u")+("0000"+((Math.random()*a|0)*a+o).toString(32)).slice(-8)}),getCheckSum:function(t,e){var n,i;for(e=e||305419896,n=0,i=(t=String(t)).length;n<i;n++)e+=t.charCodeAt(n)*n;return Math.abs(parseInt(e,10)).toString(36)},getCRC32:(s="00000000 77073096 EE0E612C 990951BA 076DC419 706AF48F E963A535 9E6495A3 0EDB8832 79DCB8A4 E0D5E91E 97D2D988 09B64C2B 7EB17CBD E7B82D07 90BF1D91 1DB71064 6AB020F2 F3B97148 84BE41DE 1ADAD47D 6DDDE4EB F4D4B551 83D385C7 136C9856 646BA8C0 FD62F97A 8A65C9EC 14015C4F 63066CD9 FA0F3D63 8D080DF5 3B6E20C8 4C69105E D56041E4 A2677172 3C03E4D1 4B04D447 D20D85FD A50AB56B 35B5A8FA 42B2986C DBBBC9D6 ACBCF940 32D86CE3 45DF5C75 DCD60DCF ABD13D59 26D930AC 51DE003A C8D75180 BFD06116 21B4F4B5 56B3C423 CFBA9599 B8BDA50F 2802B89E 5F058808 C60CD9B2 B10BE924 2F6F7C87 58684C11 C1611DAB B6662D3D 76DC4190 01DB7106 98D220BC EFD5102A 71B18589 06B6B51F 9FBFE4A5 E8B8D433 7807C9A2 0F00F934 9609A88E E10E9818 7F6A0DBB 086D3D2D 91646C97 E6635C01 6B6B51F4 1C6C6162 856530D8 F262004E 6C0695ED 1B01A57B 8208F4C1 F50FC457 65B0D9C6 12B7E950 8BBEB8EA FCB9887C 62DD1DDF 15DA2D49 8CD37CF3 FBD44C65 4DB26158 3AB551CE A3BC0074 D4BB30E2 4ADFA541 3DD895D7 A4D1C46D D3D6F4FB 4369E96A 346ED9FC AD678846 DA60B8D0 44042D73 33031DE5 AA0A4C5F DD0D7CC9 5005713C 270241AA BE0B1010 C90C2086 5768B525 206F85B3 B966D409 CE61E49F 5EDEF90E 29D9C998 B0D09822 C7D7A8B4 59B33D17 2EB40D81 B7BD5C3B C0BA6CAD EDB88320 9ABFB3B6 03B6E20C 74B1D29A EAD54739 9DD277AF 04DB2615 73DC1683 E3630B12 94643B84 0D6D6A3E 7A6A5AA8 E40ECF0B 9309FF9D 0A00AE27 7D079EB1 F00F9344 8708A3D2 1E01F268 6906C2FE F762575D 806567CB 196C3671 6E6B06E7 FED41B76 89D32BE0 10DA7A5A 67DD4ACC F9B9DF6F 8EBEEFF9 17B7BE43 60B08ED5 D6D6A3E8 A1D1937E 38D8C2C4 4FDFF252 D1BB67F1 A6BC5767 3FB506DD 48B2364B D80D2BDA AF0A1B4C 36034AF6 41047A60 DF60EFC3 A867DF55 316E8EEF 4669BE79 CB61B38C BC66831A 256FD2A0 5268E236 CC0C7795 BB0B4703 220216B9 5505262F C5BA3BBE B2BD0B28 2BB45A92 5CB36A04 C2D7FFA7 B5D0CF31 2CD99E8B 5BDEAE1D 9B64C2B0 EC63F226 756AA39C 026D930A 9C0906A9 EB0E363F 72076785 05005713 95BF4A82 E2B87A14 7BB12BAE 0CB61B38 92D28E9B E5D5BE0D 7CDCEFB7 0BDBDF21 86D3D2D4 F1D4E242 68DDB3F8 1FDA836E 81BE16CD F6B9265B 6FB077E1 18B74777 88085AE6 FF0F6A70 66063BCA 11010B5C 8F659EFF F862AE69 616BFFD3 166CCF45 A00AE278 D70DD2EE 4E048354 3903B3C2 A7672661 D06016F7 4969474D 3E6E77DB AED16A4A D9D65ADC 40DF0B66 37D83BF0 A9BCAE53 DEBB9EC5 47B2CF7F 30B5FFE9 BDBDF21C CABAC28A 53B39330 24B4A3A6 BAD03605 CDD70693 54DE5729 23D967BF B3667A2E C4614AB8 5D681B02 2A6F2B94 B40BBE37 C30C8EA1 5A05DF1B 2D02EF8D",function(t){var e,n,i=0,o=0;for(i^=-1,e=0,n=(t=String(t)).length;e<n;e++)o=255&(i^t.charCodeAt(e)),i=i>>>8^"0x"+s.substr(9*o,8);return-1^i}),base64Encode:function(){var t=v.btoa||function(t){for(var e,n,i,s,o,a,r,l=t.length,c="",u=0;u<l;)s=(e=t.charCodeAt(u++))>>2,o=(3&e)<<4|(n=t.charCodeAt(u++))>>4,a=(15&n)<<2|(i=t.charCodeAt(u++))>>6,r=63&i,isNaN(n)?a=r=64:isNaN(i)&&(r=64),c=c+g.charAt(s)+g.charAt(o)+g.charAt(a)+g.charAt(r);return c};return function(e){return e=String(e),t(unescape(encodeURIComponent(e)))}}(),base64Decode:function(){var t=/[^A-Za-z0-9+/=]/g,e=v.atob||function(e){var n,i,s,o,a,r,l,c,u="",h=0;if("string"!=typeof e&&(e=String(e)),(n=(e=e.replace(t,"")).length)%4==1)throw new Error("InvalidCharacterError: DOM Exception 5");for(;h<n;)a=g.indexOf(e.charAt(h++)),r=g.indexOf(e.charAt(h++)),l=h<n&&g.indexOf(e.charAt(h++)),c=h<n&&g.indexOf(e.charAt(h++)),i=a<<2|r>>4,u+=String.fromCharCode(i),!1!==l&&64!==l&&(s=(15&r)<<4|l>>2,u+=String.fromCharCode(s)),!1!==c&&64!==c&&(o=(3&l)<<6|c,u+=String.fromCharCode(o));return u};return function(t){var n=e(t);try{n=decodeURIComponent(escape(n))}catch(t){}return n}}(),attempt:function(e,n,i){var s,o=Array.prototype.slice.call(arguments,3);if(t.debug)s=e.apply(i,o);else try{s=e.apply(i,o)}catch(e){n?s=n.apply(i,[e].concat(o)):t.log("Error in Utils.attempt: "+e)}return s},memoize:function(t,e){var n={},i=Array.prototype.slice;return e=e||JSON.stringify,function(){var s=e(i.call(arguments));return n.hasOwnProperty(s)||(n[s]=t.apply(this,arguments)),n[s]}},getOwnPropertyMatchName:function(t,e){var n,i;if(e=String(e),t.hasOwnProperty(e))i=e;else for(n in e=e.toLowerCase(),t)if(t.hasOwnProperty(n)&&n.toLowerCase()===e){i=n;break}return i},getOwnPropertyMatchValue:function(t,e){var n=i.getOwnPropertyMatchName(t,e);return n?t[n]:void 0},setImmediate:n.set,clearImmediate:n.clear,random:function(e,n){return t.is(n)||(n=e,e=0),e+Math.floor(Math.random()*(n-e+1))}},t.namespace("Utils",i,t,!0)}.apply(e,s))||(t.exports=o)}).call(this,n(114))},function(t,e,n){"use strict";var i,s;i=[n(708)],void 0===(s=function(t){var e=t();e.addTransform("@retina",function(t){var e={};return e["@media only screen and (min-device-pixel-ratio: 1.5), only screen and (min-resolution: 192dpi)"]=t,e});var n=document.documentElement.style;if("WebkitFlex"in n&&!("flex"in n)){e.addTransform("display",function(t){return"flex"===t?"-webkit-flex":t});var i=["flex","alignItems","alignSelf","flexWrap","flexDirection","flexGrow","flexFlow","flexShrink","flexBasis","alignContent","justifyContent"];i.forEach(function(t){var n="Webkit"+t;e.addTransform(t,function(t){var e={};return e[n]=t,e})}),e.flexProperties=i}return e}.apply(e,i))||(t.exports=s)},function(t,e,n){var i,s;i=[n(115),n(1),n(18),n(57),n(13),n(19),n(171),n(86),n(3),n(347)],void 0===(s=function(t,e,n,i,s,o,a,r,l,c){"use strict";var u=Boolean("object"==typeof MooTools&&MooTools.version),h=o.getVendorProperty,d=document.documentElement,p=function(e,n){return t.warn("new Element(...)","Use Element.create instead"),p.create(e,n)};p.create=function(){return function(t,n){var i=function(t,e){var n,i;return"iframe"===t&&e&&void 0!==e.name?((n=document.createElement("div")).innerHTML="<"+t+' name="'+e.name+'"/>',i=n.firstChild,delete e.name):"object"===t&&e&&void 0!==e.classid?(e.html?(i=document.createElement("div"),p.setHTML.call(i,e.html),i=p.getHTML.call(i)):i="",(n=document.createElement("div")).innerHTML="<"+t+' classid="'+e.classid+'">'+i+"</"+t+">",i=n.firstChild,delete e.html,delete e.classid):i=document.createElement(t),i}(t,n);return p.extend(i),e.is(n,"object")&&p.set.call(i,n),i}}(),p.extend=function(){function n(e){var n="#document"===e.nodeName;for(var i in n&&t.warn("UWA.extendElement(document)"),p)p.hasOwnProperty(i)&&"create"!==i&&"extend"!==i&&(n&&i in e||(e[i]=p[i]))}var i={getProperty:window.Element.prototype.getProperty,getSize:function(){var t;return(t="body"===p.getTagName.call(this)?e.Utils.Client.getSize():p.getSize.call(this)).x=t.width,t.y=t.height,t},getCoordinates:function(t){var e=t?this.getPosition(t):this.getOffsets(),n=this.getSize(),i={left:e.x,top:e.y,width:n.x,height:n.y};return i.right=i.left+i.width,i.bottom=i.top+i.height,i}};return function(t){return t&&!t._isUwaExtended&&(u?function(t){delete t.fireEvent,n(t),e.extend(t,i)}(t):n(t),t._isUwaExtended=!0),t}}(),e.createElement=p.create,e.extendElement=p.extend;var m,f,g,v=(m=document.createElement("div"),f=/(^|,)/g,g=/(?:^|,)\s*[>+~]/,function(t,e,n,i){var s,o,a,r,l=i||g.test(e);return l?(n?(o=n.parentNode,r="uwa-private-get-element-selector-root-"+(1e8*Math.random()|0),n.setAttribute(r,"true"),s="["+r+"] ",i||o||(o=p.extend(m).grab(n))):(s="* ",o=n),e=e.replace(f,"$1"+s)):o=n,a=i?(p[t]||i[t]).call(i,e):(p[t]||o[t]).call(o,e),n&&l&&(n.removeAttribute(r),o===m&&o.removeChild(n)),a});function b(t){var e=t?t.indexOf(" "):-1;return e<0?{name:t}:{name:t.slice(0,e),selector:t.slice(e+1)}}var y,w,x,C,_,S,E,k,T=a.extend({Binding:a.Binding.extend({delegates:null,direct:!1,element:null,init:function(){this._parent.apply(this,arguments),this.delegates=[]},addDelegate:function(t){t?this.delegates.push(t):this.direct=!0},removeDelegate:function(t){t?this.delegates=this.delegates.filter(function(e){return e!==t}):this.direct=!1,this.direct||this.delegates.length||this.detach()},execute:function(t,e){var n,i,s,o;if(this.active){if(this.delegates.length)for(n=this.delegates.join(","),i=t[0],s=l.getElement(i);s&&s!==this.element&&!1!==o;)p.match.call(s,n,this.element)&&(i._uwaTarget=s,o=this._parent(t,e),i._uwaTarget=null),s=s.parentNode;this.direct&&!1!==o&&(o=this._parent(t,e))}return o},destroy:function(){this._parent(),delete this.element}}),init:function(t){this._parent(),this.element=t},addDelegation:function(t,e,n,i){var s=this.add(t,n,i);return s.addDelegate(e),s.element=this.element,s},removeDelegation:function(t,e){if(t){var n=this.bindings[this.indexOfListener(t)];n&&n.removeDelegate(e)}else i.invoke(this.bindings.slice(),"removeDelegate",e)},dispose:function(){this._parent(),delete this.element}});function A(t){var e="string"==typeof t.className?t.className:t.getAttribute("class");return e||""}function I(t,e){"string"==typeof t.className?t.className=e:t.setAttribute("class",e)}function N(t,e){"function"==typeof e?e=e():void 0===e&&(e=h(d,"on{}"+t,!0))&&(e=e.slice(2)),t!==e&&(p.Events[t]=function(n,i){if(!e)throw new Error("The event "+t+" is not supported on this platform");p.addEvent.call(i,e,n.handleEvent,!0),n.events[e]=n.handleEvent})}function D(){window.document&&(window.document.body&&e.extendElement(window.document.body),window.document.documentElement&&e.extendElement(window.document.documentElement))}return Object.assign(p,{set:function(t,i){var s,o;if(k||(k={html:p.setHTML,events:p.addEvents,id:function(t){this.id=t},class:function(t){this.className=t},value:function(t){this.value=t}},["compact","nowrap","ismap","declare","noshade","checked","disabled","readOnly","multiple","selected","noresize","defer","defaultChecked","autofocus","controls","autoplay","loop"].forEach(function(t){k[t.toLowerCase()]=function(e){this[t]=Boolean(e)}})),e.is(t,"object"))for(s in t)t.hasOwnProperty(s)&&p.set.call(this,s,t[s]);else o=p["set"+n.capitalize(t)],e.is(o,"function")?o.apply(this,Array.prototype.slice.call(arguments,1)):k.hasOwnProperty(t)&&!1!==k[t].call(this,i)||this.setAttribute(t,i);return this},setAttributes:function(t){var e;for(e in t)t.hasOwnProperty(e)&&this.setAttribute(e,t[e]);return this},getTagName:function(){var t=this.tagName||this.nodeName;return t?t.toLowerCase():""},setText:function(t){return p.empty.call(this),p.appendText.call(this,t)},appendText:function(t){var e=p.getDocument.call(this);return this.appendChild(e.createTextNode(t)),this},getText:function(){return"string"==typeof this.textContent?this.textContent:"string"==typeof this.innerText?this.innerText:""},setContent:function(){return p.empty.call(this),p.addContent.apply(this,arguments)},addContent:function(){return function(){var t=p.getDocument.call(this),n=t.createDocumentFragment();return function t(n,i,s){var o,a,r,l;for(e.is(n,"nodelist")&&(n=[].slice.call(n)),o=0,a=n.length;o<a;o++)if(l=n[o])if(l.nodeType)s.appendChild(l);else if("string"==typeof l||"number"==typeof l)if(/<|&#?\w+;/.test(l))for(r=i.createElement("div"),p.setHTML.call(r,l);r.firstChild;)s.appendChild(r.firstChild);else s.appendChild(i.createTextNode(l));else"function"!=typeof l.inject||Array.isArray(l)?"number"==typeof l.length?t(l,i,s):"object"==typeof l?(r=l.tag||"div",delete l.tag,s.appendChild(p.create(r,l)),l.tag=r):s.appendChild(i.createTextNode(l)):l.inject(s)}(arguments,t,n),this.appendChild(n),this}}(),setHTML:function(t){var i;if("string"!=typeof t)p.setContent.call(this,t);else try{i=n.escapeHTMLEntities(t).replace('<?xml version="1.0" encoding="UTF-8"?>',"").replace(/&(?!#?[a-z0-9]+;)/gi,"&#38;"),this.innerHTML=i}catch(i){e.log("UWA.Element.setHTML error cause: "+i+' with HTML value "'+t+'"');try{this.innerHTML=n.stripTags(String(t))}catch(e){p.setText.call(this,t)}}return this},getHTML:function(){var t=this.innerHTML;return o.Engine.ie&&(t=t.replace(/< *(\/ *)?(\w+)/g,function(t){return t.toLowerCase()})),t},inject:function(t,e){var n,i=p.getDocument.call(this);return"bottom"===(e=e||"bottom")?t.appendChild(this):"top"===e?t.insertBefore(this,t.firstChild):((n=t.parentNode)||11===t.nodeType||(n=i.createDocumentFragment()).appendChild(t),n&&("after"===e?n.lastChild===t?n.appendChild(this):n.insertBefore(this,t.nextSibling):"before"===e&&n.insertBefore(this,t))),this},grab:function(t,e){return p.inject.call(t,this,e),this},isInjected:d.contains?function(t){return(t=t||this.ownerDocument.documentElement)!==this&&(!t.contains||t.contains(this))}:d.compareDocumentPosition?function(t){return t=t||this.ownerDocument.documentElement,Boolean(16&t.compareDocumentPosition(this))}:function(t){var e=this;t=t||e.ownerDocument.documentElement;do{e=e.parentNode}while(e&&e.parentNode);return e===t},empty:function(t){for(var e;this.firstChild;)e=this.firstChild,t?p.destroy.call(e):this.removeChild(e);return this},remove:function(){var t=p.getParent.call(this);return t&&t.removeChild(this),this},destroy:function(){var t,e,n,i=p.remove,s=p.destroy,o=p.getChildren.call(this);for(e=0,n=o.length;e<n;e+=1)o[e].destroy&&s.call(o[e]);p.removeEvents.call(this),this!==(t=p.getDocument.call(this))&&this!==t.documentElement&&this!==t.body&&this!==p.getWindow.call(this)&&i.call(this)},getParent:function(t){var e=this.parentNode;if(t)for(;e&&1===e.nodeType&&!p.match.call(e,t);)e=e.parentNode;return e&&1!==e.nodeType&&(e=null),e?p.extend(e):null},getParents:function(t){for(var e=[],n=this;;){var i=n.getParent(t);if(!i)return e;e.push(i),n=i}},getClosest:function(t){return p.match.call(this,t)?this:p.getParent.call(this,t)},getChildren:function(){return Array.prototype.filter.call(this.childNodes,function(t){return 1===t.nodeType}).map(p.extend)},getDocument:function(){return 9===this.nodeType?this:this.ownerDocument||this.document},getWindow:function(){var t=p.getDocument.call(this);return t&&(t.defaultView||t.parentWindow)},getOffsetParent:function(){var t;function e(){var e=document.createElement("div"),n=document.createElement("div");e.style.height="0",e.appendChild(n),t=n.offsetParent===e}function n(t){return/^(?:body|html)$/i.test(t.tagName)}function i(t){return t&&("static"!==p.getStyle.call(t,"position")||n(t))}function s(t){return i(t)||/^(?:table|td|th)$/i.test(t.tagName)}return function(){var o,a=this,r=p.getDocument.call(a),l=a.offsetParent||r&&r.body,c=p.getStyle.call(a,"position");if(!n(a)&&"fixed"!==c)if(void 0===t&&e(),t){for(o="static"===c?s:i;void 0!==(a=a.parentNode);)if(o(a)){l=a;break}}else try{l=a.offsetParent}catch(t){}return l&&(l=p.extend(l)),l}}(),getElements:function(t){return Array.prototype.map.call(v("querySelectorAll",t,this),p.extend,e)},getElement:function(t){return p.extend(v("querySelector",t,this))},match:function(t,e){return v("matchesSelector",t,e,this)},hasClassName:function(t){var e=A(this);return Boolean(e&&n.contains(e,t," "))},addClassName:function(t){return p.hasClassName.call(this,t)||I(this,(A(this).trim()+" "+t).trim()),this},removeClassName:function(t){return I(this,A(this).replace(new RegExp("(^|\\s)"+t+"(?:\\s|$)"),"$1").trim()),this},toggleClassName:function(t,n){var i=e.is(n)?n:!p.hasClassName.call(this,t);return e.Element[i?"addClassName":"removeClassName"].call(this,t)},setStyle:function(t,e){var n={};return n[t]=e,p.setStyles.call(this,n)},setStyles:function(){var t={},i={none:"",firefox:"-moz-",opera:"-o-",trident:"-ms-",webkit:"-webkit-"},s={columnCount:1,flex:1,flexGrow:1,flexShrink:1,fontWeight:1,lineClamp:1,lineHeight:1,opacity:1,order:1,orphans:1,widows:1,zIndex:1,zoom:1,fillOpacity:1,strokeOpacity:1};function a(t){var e=[];return t.replace(/['"]/g,"").split(",").forEach(function(t){e.push('"'+t.trim()+'"')}),e.join(", ")}function r(n){var s=function(e,n){var s,a,r,l,c=e+n;if(t[c])s=t[c];else{for(a in s=!1,l=document.createElement("div").style,i)if(r=i[a]+n,l[e]=r,l[e]===r&&""!==r&&!o.Engine.ie){s=r;break}t[c]=s}return s}("cursor",n);return n=!1!==s?s:o.Engine.opera?"move":"url("+e.hosts.uwa+e.paths.css+"/base/cursor/"+("grabbing"===n?"closedhand":"openhand")+".cur)"+(o.Engine.ie?"":" 4 4")+", move"}return function(t){var i,o,l,c,u=this.style,h=[];for(c in t)t.hasOwnProperty(c)&&(l=t[c],"opacity"===(c=n.camelCase(c))?p.setOpacity.call(this,l):(""!==l&&null!==l&&isFinite(l)&&void 0===s[c]?l+="px":"none"===l&&"userSelect"===c&&void 0!==u.MozUserSelect?l="-moz-none":"fontFamily"===c?l=a(l):"cursor"===c&&("grabbing"!==l&&"grab"!==l||(l=r(l))),h.push({name:p.getStyleName.call(this,c),value:l})));for(i=0,o=h.length;i<o;i++){c=h[i].name,l=h[i].value;try{u[c]=l||0===l?l:""}catch(t){e.log('Unable to set style "'+c+'" with value "'+l+'"')}}return this}}(),getStyle:function(t,e){return p.getStyles.call(this,[t],e)[t]},getStyles:function(){var t,e,n,i=/^-?(?:\d*\.)?\d+(?!px)[^\d\s]+$/i,s=/^margin/;return document.defaultView&&document.defaultView.getComputedStyle?t=function(t,n,o){var a,r,l,c,u,h,d,m=t.ownerDocument,f=m.defaultView,g=p.getWindow.call(t).getComputedStyle(t,null),v=t.style;if(f&&g)for(a=0,r=n.length;a<r;a++)c=n[a],""!==(u=g[h=p.getStyleName.call(t,c)])&&"auto"!==u||p.isInjected.call(t,m.documentElement)||(u=v[h]),void 0===e&&(d=void 0,(d=document.createElement("div")).style.margin="1%",document.body.appendChild(d),e="1%"===(window.getComputedStyle(d,null)||{marginTop:0}).marginTop,document.body.removeChild(d)),e&&s.test(h)&&i.test(u)&&(l=v.width,v.width=u,u=g.width,v.width=l),o[c]=void 0!==u?u:v[c]||"";return o}:document.documentElement.currentStyle&&(t=function(t,e,n){var s,o,a,r,l,c,u,h=t.currentStyle,d=t.runtimeStyle,m=t.style;for(s=0,o=e.length;s<o;s++)r=e[s],u=p.getStyleName.call(t,r),l=h&&h[u],i.test(l)&&(a=m.left,(c=d&&d.left)&&(d.left=h.left),m.left="fontSize"===u?"1em":l||0,l=m.pixelLeft+"px",m.left=a,c&&(d.left=c)),n[r]=void 0!==l?l:t.style[r]||"";return n}),function(e,i){var s={};return-1===e.indexOf("opacity")||n||(n=!0,s.opacity=p.getOpacity.call(this,i),e.splice(e.indexOf("opacity"),1),n=!1),s=!1===i?function(t,e,n){var i,s,o,a=t.style;for(i=0,s=e.length;i<s;i++)n[o=e[i]]=a[o]||"";return n}(this,e,s):t(this,e,s)}}(),getStyleName:function(){var t=o.Engine,e=t.name,i=["box-sizing","box-shadow","transform","transform-style","transition","transition-timing-function","transition-duration","transition-delay","transition-property","border-image","border-radius","text-stroke","font-smoothing","text-fillcolor","text-shadow","perspective","appearance","touch-callout","overflow-scrolling","mask","user-select"];return s.memoize(function(s,o){var a,r,l=[],c={firefox:"-moz",opera:"-o",ie:o?"-ms":"ms",chrome:"-webkit",safari:"-webkit"};if("string"==typeof s){if("float"===(s=n.unCamelCase(s)))a=t.ie?"style-float":"css-float";else if(-1!==i.indexOf(s)){if(c[e])a=c[e]+"-"+s,l.push(a);else for(r in c)c.hasOwnProperty(r)&&(a=c[r]+"-"+s,-1===l.indexOf(a)&&l.push(a));a=0===(l=l.filter(function(t){return void 0!==d.style[n.camelCase(t)]})).length?s:l.shift()}else a=s;o||(a=n.camelCase(a))}else a=s;return a},function(t){return t.join(".")})}(),getOpacity:(C=function(){},_=o.Features.opacityCSS,S=o.Features.filterCSS,E=/alpha\(opacity=([\d.]+)\)/i,S&&!_?C=function(t,e){var n,i=1;return(n=p.getStyle.call(t,"filter",e).replace(/ /g,"").match(E))&&(i=n[1]/100),i}:_&&(C=function(t,e){var n=1,i=t.style,s=p.getStyle;return void 0!==i.opacity?n=s.call(t,"opacity",e):void 0!==i.MozOpacity&&(n=s.call(t,"MozOpacity",e)),parseFloat(Math.round(100*n)/100,10)}),function(t){return C(this,t)}),setOpacity:function(){var t=function(){},e=o.Features.opacityCSS;return o.Features.filterCSS&&!e?t=function(t,e,n){var i;e.zoom=1,n=1===n?"":"alpha(opacity="+100*n+")",e.MsFilter=n,e.filter=n,i=e.display,e.display="none",t.offsetHeight,e.display=i}:e&&(t=function(t,e,n){void 0!==e.opacity?e.opacity=n:void 0!==e.MozOpacity&&(e.MozOpacity=n)}),function(e){var n=this.style;return null!==e&&(e=(e=parseFloat(e,10))>1?1:e<1e-5?0:e),t(this,n,e),this}}(),hide:function(){return p.setStyle.call(this,"display","none")},show:function(){var t,e,n;function i(t){return p.getStyle.call(t,"display")}return n=s.memoize(function(n){var s,o=document,a=o.body,r=o.createElement(n);return a.appendChild(r),s=i(r),a.removeChild(r),"none"!==s&&""!==s||(t||((t=o.createElement("iframe")).frameBorder=t.width=t.height=0),a.appendChild(t),e&&t.createElement||((e=(t.contentWindow||t.contentDocument).document).write(("CSS1Compat"===o.compatMode?"<!doctype html>":"")+"<html><body>"),e.close()),r=e.createElement(n),e.body.appendChild(r),s=i(r),a.removeChild(t)),s}),function(){var t;return this.style&&("none"===(t=this.style.display)&&(t=this.style.display=""),""===t&&(this.style.display="none"===i(this)&&n(this.nodeName)||"")),this}}(),toggle:function(t){var n=e.is(t)?t:p.isHidden.call(this);return e.Element[n?"show":"hide"].call(this)},isHidden:function(){return"none"===p.getStyle.call(this,"display")},setTranslate:(x=o.Features.transitionsCSS?o.Features.matrixCSS?function(t,e){return{transform:"translate3d("+e+"px,"+t+"px, 0)"}}:function(t,e){return{transform:"translate("+e+"px,"+t+"px)"}}:function(t,e){return{top:t,left:e}},function(t,e){var n;return n=x(t=t||0,e=e||0),p.setStyles.call(this,n),this}),getComputedSize:(w={borderWidth:["borderLeftWidth","borderRightWidth"],borderHeight:["borderBottomWidth","borderTopWidth"],paddingWidth:["paddingLeft","paddingRight"],paddingHeight:["paddingTop","paddingBottom"],marginWidth:["marginLeft","marginRight"],marginHeight:["marginTop","marginBottom"],innerWidth:["borderWidth","paddingWidth"],innerHeight:["borderHeight","paddingHeight"],outerWidth:["marginWidth"],outerHeight:["marginHeight"]},function(){var t,e,i,o,a=s.toArray(arguments),r=0;for(t=0;t<a.length;t++)i=n.camelCase(a[t]),w[i]?(a.splice(t,1),a=a.concat(w[i]),t--):a.splice(t,1,i);for(o=p.getStyles.call(this,a),t=0,e=a.length;t<e;t++)i=a[t],r+=parseFloat(o[i],10)||0;return r}),getScrolls:function(){var t;return function(){var n,i,s,a,r;return e.is(this,["window","document"])?i=o.getScrolls():(s=this.style,i={width:this.scrollWidth,height:this.scrollHeight,top:this.scrollTop,left:this.scrollLeft},void 0===t&&(a=document.createElement("div"),(r=document.createElement("div")).style.visibility="hidden",r.style.overflow="hidden",r.style.width="1px",a.style.overflow="visible",a.innerHTML="x",r.appendChild(a),d.appendChild(r),t=1===a.scrollWidth,d.removeChild(r)),t&&-1!==["","visible"].indexOf(p.getStyle.call(this,"overflow"))&&(n=s.overflow,s.overflow="hidden",i.width=this.scrollWidth,s.overflow=n)),i}}(),getOffsets:function(){var t,e,n,i,s,a=/^t(?:able|d|h)$/i;function r(t){var e=t.ownerDocument.defaultView;return e?e.getComputedStyle(t,null):t.currentStyle}function l(t,e){return p.getStyle.call(t,e)}function c(){var o,a,r,c=document.body,u=parseInt(l(c,"marginTop"),10),h=document.createElement("div");h.innerHTML="<div style='position:absolute;top:0;left:0;margin:0;border:5px solid #000;padding:0;width:1px;height:1px;'><div></div></div><table style='position:absolute;top:0;left:0;margin:0;border:5px solid #000;padding:0;width:1px;height:1px;' cellpadding='0' cellspacing='0'><tr><td></td></tr></table>",c.insertBefore(h,c.firstChild),a=(o=h.firstChild).firstChild,r=o.nextSibling.firstChild.firstChild,t=5!==a.offsetTop,e=5===r.offsetTop,a.style.position="fixed",a.style.top="20px",n=20===a.offsetTop||15===a.offsetTop,a.style.position=a.style.top="",o.style.overflow="hidden",o.style.position="relative",i=-5===a.offsetTop,s=c.offsetTop!==u,c.removeChild(h)}function u(e){var n=e.offsetTop,i=e.offsetLeft;return void 0===t&&c(),s&&(n+=parseFloat(l(e,"marginTop"))||0,i+=parseFloat(l(e,"marginLeft"))||0),{x:i,y:n}}return void 0!==document.documentElement.getBoundingClientRect?function(){if(this===this.ownerDocument.body)return u(this);var t,e,n,i,s,a,r,l=p.getWindow.call(this),c=l.webkitConvertPointFromNodeToPage;if(this.getBoundingClientRect){i=p.getDocument.call(this).body,s=d.clientTop||i.clientTop||0,a=d.clientLeft||i.clientLeft||0,r=o.getScrolls();try{n=this.getBoundingClientRect()}catch(t){}n&&p.isInjected.call(this,d)?(t=n.left+r.x-s,e=n.top+r.y-a):(t=n?n.left:0,e=n?n.top:0)}else c&&(t=(n=c(this,new l.WebKitPoint(0,0))).x,e=n.y);return{x:t,y:e}}:function(){if(this===this.ownerDocument.body)return u(this);var s,o=this,l=o.offsetParent,h=p.getDocument.call(o).body,m=r(o),f=o.offsetTop,g=o.offsetLeft;for(void 0===t&&c(),o=o.parentNode;o&&o!==h&&o!==d&&11!==o.nodeType&&(!n||"fixed"!==m.position);)s=r(o),g-=o.scrollLeft,f-=o.scrollTop,o===l&&(g+=o.offsetLeft,f+=o.offsetTop,!t||e&&a.test(o.nodeName)||(g+=parseFloat(s.borderLeftWidth)||0,f+=parseFloat(s.borderTopWidth)||0),l=o.offsetParent),i&&"visible"!==s.overflow&&(g+=parseFloat(s.borderLeftWidth)||0,f+=parseFloat(s.borderTopWidth)||0),m=s,o=o.parentNode;return"relative"!==m.position&&"static"!==m.position||(g+=h.offsetLeft,f+=h.offsetTop),n&&"fixed"===m.position&&(g+=Math.max(d.scrollLeft,h.scrollLeft),f+=Math.max(d.scrollTop,h.scrollTop)),{x:g,y:f}}}(),getPosition:function(t,n){var i,s,o,a,r,l,c,u=p.getOffsetParent,h=p.getOffsets,d=p.getComputedSize,m=p.getSize,f=p.isInjected,g={x:0,y:0};if(!(t=t||u.call(this))||!f.call(this))return g;if(c=h.call(this),t!==p.getDocument.call(this)&&(i=/^(?:body|html)$/i.test(t.nodeName)?g:h.call(t),c.x-=parseFloat(d.call(this,"marginLeft"))||0,c.y-=parseFloat(d.call(this,"marginTop"))||0,i.x+=parseFloat(d.call(t,"borderLeftWidth"))||0,i.y+=parseFloat(d.call(t,"borderTopWidth"))||0,c.x-=i.x,c.y-=i.y,l=e.typeOf(n)))for("string"===l&&(n={x:n,y:n}),s=m.call(this),o=0;o<2;o+=1)r=o?"width":"height","center"===n[a=o?"x":"y"]?c[a]+=s[r]/2:(1===o&&"right"===n[a]||0===o&&"bottom"===n[a])&&(c[a]+=s[r]);return c},setPosition:function(){var t={full:function(t,e){var n=p.getSize.call(this),i=t.x+t.width-e.x-n.width,s=t.y+t.height-e.y-n.height;i<0&&(e.x=Math.max(0,e.x+i)),s<0&&(e.y+=s)},"resize-max":function(t,e){p.setStyles.call(this,{maxWidth:t.x+t.width-e.x,maxHeight:t.y+t.height-e.y})},none:function(){}};return function(n,i){i=i||{};var a,r,l=p.getDocument.call(this).body,c=p.getOffsetParent.call(this)||l,u=p.getOffsets.call(c),h=p.getOffsets.call(i.relative||c);return a=function(t,n,i,s,a){var r,l;switch(e.typeOf(s)){case!1:break;case"object":l={x:s.x+i.x,y:s.y+i.y,width:s.width,height:s.height};break;case"element":r=s;break;default:for(r=p.getOffsetParent.call(t);r&&r!==n&&1===r.nodeType&&"visible"===p.getStyle.call(r,"overflow");)r=r.parentNode;r&&1===r.nodeType||(r=n)}return r&&(r===n?l=e.merge(o.getScrolls(),o.getSize()):((l=p.getOffsets.call(r)).width=r.offsetWidth,l.height=r.offsetHeight)),l&&(l.x+=a,l.y+=a,l.width-=2*a,l.height-=2*a),l}(this,l,h,i.boundary,i.boundaryMargin||0),"number"==typeof n.length&&(r=p.getSize.call(this),s.splat(n).forEach(function(t){var e=h.x+t.x,n=h.y+t.y;t.score=(Math.min(a.x+a.width,e+r.width)-Math.max(a.x,e))*(Math.min(a.y+a.height,n+r.height)-Math.max(a.y,n))}),n.sort(function(t,e){return e.score-t.score}),n=n[0]),n={x:n.x+h.x,y:n.y+h.y},a&&(i.fit?"string"==typeof i.fit&&e.owns(t,i.fit)&&(i.fit=t[i.fit]):i.fit=t.full,n.x=Math.max(a.x,Math.min(n.x,a.x+a.width)),n.y=Math.max(a.y,Math.min(n.y,a.y+a.height)),i.fit.call(this,a,n)),p.setStyles.call(this,{top:n.y-u.y,left:n.x-u.x}),this}}(),getSize:function(){var t,n,i,s,a,r,l;return e.is(this,["window","document"])?l=o.getSize():(r=p.getStyle.bind(this),i=this.style,s=this.offsetWidth,a=this.offsetHeight,"none"===r("display")&&0===s&&0===a&&(n=i.display,t=i.visibility,i.visibility="visible",i.display="block",s=this.offsetWidth,a=this.offsetHeight,i.display=n,i.visibility=t),l={width:s,height:a}),l},getDimensions:function(){var t,e=p.getSize.call(this),n=e.width,i=e.height,s=p.getStyles.call(this,["maxWidth","maxHeight","minWidth","minHeight","borderLeftWidth","borderRightWidth","paddingLeft","paddingRight","borderBottomWidth","borderTopWidth","paddingTop","paddingBottom","marginLeft","marginRight","marginTop","marginBottom"]);for(t in s)s[t]=parseFloat(s[t],10)||0;return{width:n,height:i,maxWidth:s.maxWidth||-1,maxHeight:s.maxHeight||-1,minWidth:s.minWidth||-1,minHeight:s.minHeight||-1,innerWidth:n-(s.borderLeftWidth+s.borderRightWidth+s.paddingLeft+s.paddingRight),innerHeight:i-(s.borderBottomWidth+s.borderTopWidth+s.paddingTop+s.paddingBottom),outerWidth:n+s.marginLeft+s.marginRight,outerHeight:i+s.marginTop+s.marginBottom}},isInViewport:function(t,e,n,i){var s,a,r,l,c,u,h=p.getOffsets,d=h.call(t),m=h.call(this),f=t.offsetHeight,g=t.offsetWidth,v=this.offsetWidth,b=this.offsetHeight,y=m.y,w=m.x,x=y+this.offsetHeight,C=w+this.offsetWidth;return e?(l=w<d.x+g&&w+v>d.x,c=y<d.y+f&&y+b>d.y):(l=w>=d.x&&w+v<=d.x+g,c=y>=d.y&&y+b<=d.y+f),u="x"===i?l:"y"===i?c:l&&c,n&&(s=o.getScrolls(),a=o.getSize(),r={top:s.y,bottom:s.y+a.height,right:s.x+a.width,left:s.x},u=u&&y<r.bottom&&w<r.right&&x>r.top&&C>r.left),u},setData:function(t,i){var s,o=e.typeOf(i),a=e.typeOf(t);if("string"===a&&o)i=r.encode(i),this.dataset?this.dataset[n.camelCase(t)]=i:(t="data-"+n.unCamelCase(t),this.setAttribute?this.setAttribute(t,i):this[t]=i);else if("object"===a&&!o)for(s in t)t.hasOwnProperty(s)&&p.setData.call(this,s,t[s]);return this},getData:function(t){var i;return e.is(t,"string")&&(this.dataset?i=this.dataset[n.camelCase(t)]:(t="data-"+n.unCamelCase(t),i=this.getAttribute?this.getAttribute(t,i):this[t]=i)),e.is(i)?r.decode(i):void 0},removeData:function(t){return e.is(t,"string")&&(this.dataset?this.dataset.hasOwnProperty(n.camelCase(t))&&delete this.dataset[n.camelCase(t)]:(t="data-"+n.unCamelCase(t),this.removeAttribute?this.removeAttribute(t):this[t]=null)),this},handleExternalLinks:function(t){return p.addEvent.call(this,"click",function(e){if(!l.isDefaultPrevented(e)&&!l.whichKey(e)){for(var n,i=l.getElement(e),s=String(window.location).split("#")[0];i&&!n;)n="a"===p.getTagName.call(i)&&i.getAttribute("href")||p.getData.call(i,"href"),i=p.getParent.call(i);n&&0!==n.indexOf(s+"#")&&0!==n.indexOf("#")&&0!==n.indexOf("javascript")&&(t(n),l.stop(e))}}),this},addEvent:function(){return function(t,n,i,s,o){t=b(t);var a=n&&"function"==typeof n.handleEvent?n:this,r=function(t,n,i,s){e.is(t,"window")&&"resize"===n&&(i=!0);var o,a,r=t._events||{},l=!i&&p.Events[n],c=l?n+"Custom":n,h=r[c];return h||(a=new T(t),r[c]=h={dispatcher:a,handleEvent:function(t){if(u){var n=window.DOMEvent||window.Event;t=new n(t),["offsetY","offsetX","relatedTarget","button","metaKey","altKey","shiftKey","ctrlKey","clientY","clientX","screenY","screenX","which","pageY","pageX","layerY","layerX","charCode","keyCode","timeStamp","cancelable","bubbles","target","type","detail","wheelDelta","touches","changedTouches"].forEach(function(n){e.owns(t,n)||(t[n]=t.event[n])})}void 0===t.timeStamp&&(t.timeStamp=Date.now()),a.dispatch([t])},events:{},bindings:[],timers:[]},o=h.handleEvent,t._events=r,l?l(h,t,{target:t,type:n}):t.addEventListener?t.addEventListener(n,o,s||!1):(t.attachEvent("on"+n,o),window.attachEvent("onunload",function(){t.detachEvent("on"+n,o)}))),h}(this,t.name,i,o);return r.dispatcher.addDelegation(n,t.selector,a,s),"load"===t.name&&this.tagName&&"img"===this.tagName.toLowerCase()&&this.complete&&this.width>0&&r.dispatcher.dispatch(),this}}(),addEvents:function(t,e,n,i){var s;for(s in t)t.hasOwnProperty(s)&&p.addEvent.call(this,s,t[s],e,n,i);return this},triggerEvent:function(t){var e=(this._events||{})[t],n={target:this,timeStamp:Date.now(),type:t};return e&&e.handleEvent(n),this},removeEvent:function(t,n,i){if(!e.is(t))return p.removeEvents.call(this);t=b(t);var s,o,a,r,l,c=this._events&&this._events[t.name+"Custom"],u=c?t.name+"Custom":t.name,h=this._events&&this._events[u];if(h&&(r=h.dispatcher,n||t.selector?r.removeDelegation(n,t.selector):r.removeAll(),0===r.getNumListeners())){for(a in delete this._events[u],l=h.events)l.hasOwnProperty(a)&&p.removeEvent.call(this,a,l[a]);if(h.timers)for(s=0,o=h.timers.length;s<o;s++)clearTimeout(h.timers[s]);if(h.bindings)for(s=0,o=h.bindings.length;s<o;s++)h.bindings[s].dispose();c||(this.removeEventListener?this.removeEventListener(u,h.handleEvent,i):this.detachEvent("on"+u,h.handleEvent)),r.dispose()}return this},removeEvents:function(t,e){var n,i=void 0!==t,s=i?t:this._events;for(n in s)s.hasOwnProperty(n)&&p.removeEvent.call(this,n,i?t[n]:null,e);return this},fillParent:function(t,e){t=t||"height";var i=e||p.getParent.call(this),s=p.setStyle.bind(this),o=n.ucfirst(t);return i&&(s("height",1e4+"px"),s("height",i["offset"+o]-i["scroll"+o]+1e4+"px")),this},setSelectable:function(){function t(t){l.preventDefault(t)}return function(e){return this.setAttribute("unselectable",e?"off":"on"),p.setStyles.call(this,{userSelect:e?"":"none",touchCallout:e?"":"none"}),p[e?"removeEvent":"addEvent"].call(this,"selectstart",t),this}}(),requestFullscreen:(y=h(d,"requestFullscreen")||h(d,"requestFullScreen"),y?function(){return y.call(this,1)}:function(){throw new Error("Element#requestFullscreen is not available in this platform")})}),p.Events={mouseleave:function(){return function(t,e,n){var i=t.handleEvent;e.addEventListener?(t.handleEvent=function(t){var e=t.relatedTarget;this===e||function(t,e){var n=!1;if(t!==e){for(;e&&e!==t;)e=e.parentNode;n=t===e}return n}(this,e)||i.call(this,n)},p.addEvent.call(e,"mouseout",t.handleEvent),t.events.mouseout=t.handleEvent):(p.addEvent.call(e,"mouseleave",i,!0),t.events.onmouseleave=i)}}(),mouseenter:function(){return function(t,e,n){var i=t.handleEvent;e.addEventListener?(t.handleEvent=function(t){var e=t.relatedTarget;this===e||function(t,e){var n=!1;if(t!==e){for(;e&&e!==t;)e=e.parentNode;n=t===e}return n}(this,e)||i.call(this,n)},p.addEvent.call(e,"mouseover",t.handleEvent),t.events.mouseover=t.handleEvent):(p.addEvent.call(e,"mouseenter",i,!0),t.events.mouseenter=i)}}(),mousewheel:function(t,e){var n=t.handleEvent,i=o.Engine.firefox?"DOMMouseScroll":"mousewheel";t.handleEvent=function(t){(t=t||window.event).wheel=t.wheelDelta?t.wheelDelta/120:-(t.detail||0)/3,n(t)},p.addEvent.call(e,i,t.handleEvent,!0),t.events[i]=t.handleEvent},update:function(t,e,n){new c(function(e){var i=e[0];t.handleEvent(Object.assign(n,{record:i}))}).observe(e,{childList:!0,subtree:!0})},resize:function(){var t,n=new a,i=200;function s(t){var n;return(n=e.is(t,["window","document"])?[(n=o.getSize()).width,n.height,0,0]:[t.scrollWidth,t.scrollHeight,t.offsetWidth,t.offsetHeight]).join("x")}function r(){clearTimeout(t),n.dispatch(),n.getNumListeners()>0&&(t=setTimeout(r,i))}return function(t,i,o){var a,l=s(i);t.bindings.length>0||(t.timers=[a],window===i&&e.is(window.orientationchange)&&(p.addEvent.call(i,"orientationchange",r),t.events.orientationchange=r),t.bindings=[n.add(function(){var n=s(i),r=e.is(i,["window","document"])||p.isInjected.call(i);l!==n&&r&&(l=n,clearTimeout(a),a=setTimeout(function(){t.handleEvent(o)},220))})],r())}}()},N("fullscreenchange"),N("fullscreenerror"),N("transitionEnd",function(){var t,n=document.createElement("fakeelement"),i={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",msTransition:"MSTransitionEnd",OTransition:"oTransitionEnd",transition:"transitionEnd"};for(t in i)if(i.hasOwnProperty(t)&&e.is(n.style[t]))return i[t]}),d.matchesSelector||(p.matchesSelector=h(d,"matchesSelector")),document.exitFullscreen=h(document,"exitFullscreen")||h(document,"cancelFullScreen")||function(){throw new Error("Element#requestFullscreen is not available in this platform")},"fullscreenEnabled"in document||(document.fullscreenEnabled=h(document,"fullscreenEnabled")),function(){var t="fullscreenElement",e=h(document,t,!0)||h(document,"fullScreenElement",!0)||h(document,"currentFullScreenElement",!0);if(e&&e!==t)try{p.addEvent.call(document,"fullscreenchange",function(){document[t]=document[e]}),document[t]=document[e]}catch(t){}}(),D(),l.onDomReady(D),e.namespace("Element",p,e,!0)}.apply(e,i))||(t.exports=s)},function(t,e,n){var i,s;i=[n(1),n(13),n(9),n(115)],void 0===(s=function(t,e,n,i){"use strict";var s=Promise;function o(t){this._promise=t instanceof s?t:new s(t)}function a(t){return function(){return o.cast(this._promise[t].apply(this._promise,arguments))}}function r(t){return function(){return o.cast(s[t].apply(s,arguments))}}var l=o.prototype=Object.create(s.prototype);return l.constructor=o,l.catch=a("catch"),l.then=a("then"),l.fail=l.catch,l.finally=function(t){var e=this;function n(){return o.cast(t()).then(function(){return e})}return this.then(n,n)},l.fin=l.finally,l.done=function(t,n){return this.then(t,n).fail(function(t){var n=o.deferred();return e.setImmediate(function(){throw e.setImmediate(function(){n.reject(t)}),t instanceof Error?t:new Error(t)}),n.promise})},l.spread=function(t,e){return this.then(function(e){return t[Array.isArray(e)?"apply":"call"](null,e)},e)},o.race=r("race"),o.all=function(t){return"number"!=typeof t.length?o.reject(new TypeError("Not an iterable")):o.cast(s.all(e.toArray(t)))},o.reject=r("reject"),o.resolve=r("resolve"),o.cast=function(t){return t instanceof o?t:t instanceof s?new o(t):o.resolve(t)},o.deferred=function(){var t={},e=new o(function(e,n){return t.resolve=e,t.reject=n,t});return t.promise=e,t},o.allSettled=function(t){return o.all(e.toArray(t).map(function(t){return t instanceof s?t.then(function(t){return{state:"fullfilled",value:t}},function(t){return{state:"rejected",reason:t}}):{state:"fullfilled",value:t}}))},i.property(n,"Promise",{value:o,name:"UWA.Class.Promise",message:"Use UWA.Promise instead."}),t.namespace("Promise",o,t)}.apply(e,i))||(t.exports=s)},function(t,e,n){"use strict";var i,s;i=[n(2),n(189)],void 0===(s=function(t,e){var n={},i=[];return n.register=function(t){i.indexOf(t)<0&&i.push(t)},n.registerAll=function(t){i=t.slice()},n.unregister=function(t){var e=i.indexOf(t);e>=0&&i.splice(e,1)},n.refreshModules=function(t,e){e||(e=[]),i.filter(function(n){return t.includes(n.getName())&&!e.includes(n.getId())}).forEach(function(t){t.sendContent("onRefresh")})},t.onReady(function(){n.getById=t.isSmartReaderView()?function(t){return App.SmartReader.getWidget(t)}:function(t){return n.getAll().detect(function(e){return e.getId()===t})||null},n.getAll=t.isIn3DDashboard()?function(){var n=e(t.get3DDPlatformId()).getBridge();return n&&n.getNvModules()||[]}:t.isSmartReaderView()?function(){return App.SmartReader.getWidgets()}:function(){return i},n.getByStreamId=t.isSmartReaderView()?function(t){var e=App.SmartReader.getWidgetFromStream(t);return e?[e]:[]}:function(t){return n.getAll().filter(function(e){return e.getStreamIds(!1).indexOf(t)>=0})}}),n.getByTab=function(e){return e||(e=t.Page.openTabId),n.getAll().filter(function(t){return t.dataObj.tab===e})},n.getByColumn=function(t,e){var i=n.getByTab(e).filter(function(e){return e.getColumnIndex()===t});return i.sort(function(t,e){return t.getRowIndex()-e.getRowIndex()}),i},n.getFromWidget=t.isIn3DDashboard()?function(t){var n=t.getValue("x3dPlatformId"),i=n&&e(n).getBridge();return t._nvModule||i&&i.getNvModules().detect(function(e){return e.get3DDId()===t.id})}:function(t){return t.id?n.getById(t.id):t.environment.obj?t.environment.obj:void 0},n}.apply(e,i))||(t.exports=s)},function(module,exports,__webpack_require__){var __WEBPACK_AMD_DEFINE_ARRAY__,__WEBPACK_AMD_DEFINE_RESULT__;__WEBPACK_AMD_DEFINE_ARRAY__=[__webpack_require__(1),__webpack_require__(115)],__WEBPACK_AMD_DEFINE_RESULT__=function(UWA,Deprecate){"use strict";var Module={},isEmailRegExp,escapeSimpleComment,escapeMultiComment,alphaUpperRegExp,separatorDotRegExp,separatorRegExp,alphaRegExp,alphaUppperLowerRegExp,numRegExp;function parseColorToArray(t){var e,n,i=!1,s=(t=t.replace(/\s+/g,"")).match(/^rgb(a?)\(((?:\d{1,3},)*\d{1,3})\)/);if(s)i=s[2].split(",").map(function(t){return parseInt(t,10)}),(!s[1]&&3!==i.length||s[1]&&4!==i.length)&&(i=!1);else if(s=t.match(/^#?((?:[a-f0-9]{3}){1,2})$/i)){e=3===s[1].length?1:2,i=[];for(var o=0;o<s[1].length;o+=e)n=parseInt(s[1].substr(o,e),16),1===e&&(n=16*n+n),i.push(n)}else"transparent"===t&&(i=[0,0,0,0]);return i}function FakeString(){return Deprecate.warn("UWA/String as a constructor","Use the native String instead."),String.apply(null,arguments)}return Module.isEmail=(isEmailRegExp=/^([a-zA-Z0-9_.\-+])+@(([a-zA-Z0-9-])+\.)+([a-zA-Z0-9]{2,4})+$/,function(t){return isEmailRegExp.test(t)}),Module.truncate=function(t,e,n){return e=e||30,n=void 0===n?"...":n,t.length>e?t.slice(0,e-n.length)+n:String(t)},Module.cut=function(t,e,n){if(e=e||30,n=void 0===n?"...":n,t.length<=e)return String(t);var i,s=-1,o=n.length;for(i=e-o;i>=0;i--)if(-1!==".,;!? ".indexOf(t.charAt(i))){s=i;break}return s<0&&(s=e-o),t.slice(0,s)+n},Module.escapeRegExp=function(t){return t.replace(/\\/g,"\\\\").replace(/([-.*+?^$()[\]{}|])/g,"\\$1")},Module.stripTags=function(t){return t.replace(/ on\w+="[^"]*"/g,"").replace(/<(?!\s*\/?\s*(div|br|dt|dd|th|td|p|pre|h1|h2|h3|h4|h5)\b)[^>]*>/gi,"").replace(/<\/?[^>]+>/gi," ").replace(/^\s+|\s+$/g,"").replace(/\s+/g," ")},Module.stripScripts=function(string,evaluate){var scripts="",text=string.replace(/<script[^>]*>([\s\S]*?)<\/script>/gi,function(t,e){return scripts+=e+"\n",""});return!0===evaluate?eval(scripts):UWA.is(evaluate,"function")&&evaluate(scripts.trim(),text),text},Module.stripComments=(escapeSimpleComment=/^\/\/.*/gm,escapeMultiComment=/^\/\*[\S\s]*?\*\//gm,function(t){return t.replace(escapeSimpleComment,"").replace(escapeMultiComment,"")}),Module.escapeHTMLEntities=function(){var t={},e={apos:39,minus:8722,circ:710,tilde:732,Scaron:352,lsaquo:8249,OElig:338,lsquo:8216,rsquo:8217,ldquo:8220,rdquo:8221,bull:8226,ndash:8211,mdash:8212,trade:8482,scaron:353,rsaquo:8250,oelig:339,Yuml:376,yuml:255,fnof:402,Alpha:913,Beta:914,Gamma:915,Delta:916,Epsilon:917,Zeta:918,Eta:919,Theta:920,Iota:921,Kappa:922,Lambda:923,Mu:924,Nu:925,Xi:926,Omicron:927,Pi:928,Rho:929,Sigma:931,Tau:932,Upsilon:933,Phi:934,Chi:935,Psi:936,Omega:937,alpha:945,beta:946,gamma:947,delta:948,epsilon:949,zeta:950,eta:951,theta:952,iota:953,kappa:954,lambda:955,mu:956,nu:957,xi:958,omicron:959,pi:960,rho:961,sigmaf:962,sigma:963,tau:964,upsilon:965,phi:966,chi:967,psi:968,omega:969,thetasym:977,upsih:978,piv:982,ensp:8194,emsp:8195,thinsp:8201,zwnj:8204,zwj:8205,lrm:8206,rlm:8207,sbquo:8218,bdquo:8222,dagger:8224,Dagger:8225,hellip:8230,permil:8240,prime:8242,Prime:8243,oline:8254,frasl:8260,euro:8364,image:8465,weierp:8472,real:8476,alefsym:8501,larr:8592,uarr:8593,rarr:8594,darr:8595,harr:8596,crarr:8629,lArr:8656,uArr:8657,rArr:8658,dArr:8659,hArr:8660,forall:8704,part:8706,exist:8707,empty:8709,nabla:8711,isin:8712,notin:8713,ni:8715,prod:8719,sum:8721,lowast:8727,radic:8730,prop:8733,infin:8734,ang:8736,and:8743,or:8744,cap:8745,cup:8746,int:8747,there4:8756,sim:8764,cong:8773,asymp:8776,ne:8800,equiv:8801,le:8804,ge:8805,sub:8834,sup:8835,nsub:8836,sube:8838,supe:8839,oplus:8853,otimes:8855,perp:8869,sdot:8901,lceil:8968,rceil:8969,lfloor:8970,rfloor:8971,lang:9001,rang:9002,loz:9674,spades:9824,clubs:9827,hearts:9829,diams:9830,quot:34,amp:38,lt:60,gt:62,nbsp:160,iexcl:161,cent:162,pound:163,curren:164,yen:165,brvbar:166,sect:167,uml:168,copy:169,ordf:170,laquo:171,not:172,shy:173,reg:174,hibar:175,deg:176,plusmn:177,sup1:185,sup2:178,sup3:179,acute:180,micro:181,para:182,middot:183,cedil:184,ordm:186,raquo:187,frac14:188,frac12:189,frac34:190,iquest:191,Agrave:192,Aacute:193,Acirc:194,Atilde:195,Auml:196,Aring:197,AElig:198,Ccedil:199,Egrave:200,Eacute:201,Ecirc:202,Euml:203,Igrave:204,Iacute:205,Icirc:206,Iuml:207,ETH:208,Ntilde:209,Ograve:210,Oacute:211,Ocirc:212,Otilde:213,Ouml:214,times:215,Oslash:216,Ugrave:217,Uacute:218,Ucirc:219,Uuml:220,Yacute:221,THORN:222,szlig:223,agrave:224,aacute:225,acirc:226,atilde:227,auml:228,aring:229,aelig:230,ccedil:231,egrave:232,eacute:233,ecirc:234,euml:235,igrave:236,iacute:237,icirc:238,iuml:239,eth:240,ntilde:241,ograve:242,oacute:243,ocirc:244,otilde:245,ouml:246,divide:247,oslash:248,ugrave:249,uacute:250,ucirc:251,uuml:252,yacute:253,thorn:254};function n(e){return t[e]||(t[e]=new RegExp("&"+e+";","g")),t[e]}return function(t){var i,s;if(function(t){return t.match(/&([a-z]+;)/gi)}(t))for(i in e)e.hasOwnProperty(i)&&(s=n(i),t=t.replace(s,"&#"+e[i]+";"));return String(t)}}(),Module.globToRegex=function(t){var e=Module.escapeRegExp(t).replace(/\\\*/g,".*").replace(/\\\?/g,".").replace(/\\\{/g,"(").replace(/\\\}/g,")").replace(/,/g,"|");return new RegExp("^"+e+"$")},Module.escapeHTML=function(){var t={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","/":"&#x2F;"},e=/[&<>"'/]/g,n=/[<>/]/g;function i(e){return t[e]}return function(t,s){return String(t).replace(s?n:e,i)}}(),Module.unescapeHTML=function(t){var e=document.createElement("div");return e.innerHTML=Module.stripTags(t).replace(/"/g,"&quot;"),e.childNodes[0]?e.childNodes[0].nodeValue:""},Module.ucfirst=function(t){return t.charAt(0).toUpperCase()+t.substr(1)},Module.lcfirst=function(t){return t.charAt(0).toLowerCase()+t.substr(1)},Module.capitalize=function(t){for(var e=t.toUpperCase(),n=t.toLowerCase(),i=!1,s="",o=0;o<t.length;o++)e[o]===n[o]?(s+=t[o],i=!1):i?s+=t[o]:(s+=e[o],i=!0);return s},Module.camelCase=(alphaUpperRegExp=/([A-Z]+)/g,separatorDotRegExp=/[-_\s](.)/g,separatorRegExp=/[-_\s]/g,function(t){return t=String(t).replace(alphaUpperRegExp,function(t,e){return e.substr(0,1).toUpperCase()+e.toLowerCase().substr(1,e.length)}).replace(separatorDotRegExp,function(t,e){return e.toUpperCase()}).replace(separatorRegExp,"").trim(),Module.lcfirst(t)}),Module.unCamelCase=(alphaRegExp=/([a-z])([A-Z])/g,alphaUppperLowerRegExp=/\b([A-Z]+)([A-Z])([a-z])/,function(t,e){return e=e||"-",t.toString().replace(alphaRegExp,"$1"+e+"$2").replace(alphaUppperLowerRegExp,"$1"+e+"$2$3").toLowerCase()}),Module.rgbToHex=function(t,e){var n=parseColorToArray(t);return n&&(n=e?n.map(function(t){return parseInt(t.toString(16),10)}):0===n[3]?"transparent":"#"+n.slice(0,3).map(function(t){return("0"+t.toString(16)).slice(-2)}).join("")),n},Module.hexToRgb=function(t,e){var n=parseColorToArray(t);return n&&!e&&(n=(3===n.length?"rgb(":"rgba(")+n.join(", ")+")"),n},Module.format=(numRegExp=/\{(\d+)\}/g,function(t){var e=arguments;return t.replace(numRegExp,function(t,n){return e[Number(n)+1]})}),Module.parseRelativeTime=function(t,e){var n,i,s,o,a=new Date,r=UWA.i18n;return a=new Date(a.getFullYear(),a.getMonth(),a.getDate()).getTime(),"number"!=typeof e&&(e=0),i=(n=t.match(/^(\d\d\d\d)-(\d\d)-(\d\d) (\d\d):(\d\d):(\d\d)$/))?new Date(n[1],n[2]-1,n[3],n[4],n[5],n[6]).getTime():/^\d{13}$/.test(t)?parseInt(t,10):/^\d{10}$/.test(t)?1e3*parseInt(t,10):Date.parse(t.replace(/\//g,"-")),e*=3600,s=(new Date-i)/1e3+e,o=(a-i)/1e3+e,!isNaN(s)&&(s<60?r("less than a minute ago"):s<120?r("about a minute ago"):s<2700?Module.format(r("{0} minutes ago"),Math.round(s/60)):s<5400?r("about an hour ago"):o<0?Module.format(r("about {0} hours ago"),Math.round(s/3600)):o<86400?r("yesterday"):Module.format(r("{0} days ago"),Math.ceil(o/86400)))},Module.makeClickable=function(t){var e=/((\w+:\/\/(\w+(:\w+)?@)?)|www\.)[^\s<$]+/,n=/([/:\w+_-]+(\.[\w+_-]+)*@[\w.-]+)/;return t.replace(/(^|[\s>])([^\s<>"']+?)(?=$|[\s<])/gm,function(t,i,s){if(e.test(s)){var o=s.replace(/([.!?:;)\]]$)/,""),a=s;return/^www\./.test(o)&&(o="http://"+o),i+'<a href="'+o+'" target="_blank">'+a+"</a>"}if(n.test(s)){var r=s;return/^[\w]+:\/\//.test(r)||(r='<a href="mailto:'+r+'">'+r+"</a>"),i+r}return t})},Module.contains=function(t,e,n){var i;return UWA.is(n,"string")?(t=n+t+n,e=n+e+n):UWA.is(n,"number")&&(i=n),-1!==t.indexOf(e,i)},Module.highlight=function(t){return Deprecate.warn("UWA.String.highlight"),t},Module.test=function(t,e,n){return Deprecate.warn("UWA.String.test","Use regexp.test(string) instead"),("string"==typeof e?new RegExp(e,n):e).test(t)},Deprecate.uncurryAlias(Module,String.prototype,"UWA.String","String"),Object.assign(FakeString,Module),UWA.namespace("String",FakeString,UWA)}.apply(exports,__WEBPACK_AMD_DEFINE_ARRAY__),void 0===__WEBPACK_AMD_DEFINE_RESULT__||(module.exports=__WEBPACK_AMD_DEFINE_RESULT__)},function(t,e,n){(function(i){var s,o;s=[n(1),n(13)],void 0===(o=function(t,e){"use strict";var n,i,s,o,a,r,l=t.getGlobal(),c=Boolean(l.window),u=Boolean(c&&window.document),h=Boolean(c&&window.navigator),d=(i=["","moz","Moz","MOZ","webkit","Webkit","WebKit","WEBKIT","ms","Ms","MS","o","O"],function(t,e,n){var s,o,a,r,l,c,u=e.indexOf("{}");for(u>=0?(o=e.slice(0,u),a=e.slice(u+2)):(o="",a=e),s=a.charAt(0).toUpperCase()+a.slice(1),r=0,l=i.length;r<l&&!((c=o+i[r]+a)in t)&&!((c=o+i[r]+s)in t);r++);if(r<l)return n?c:t[c]});return(n={Engine:{name:"unknown",version:0},Platform:{name:"unknown"},Features:{window:c,document:u,navigator:h,xpath:u&&Boolean(document.evaluate),json:c&&Boolean(window.JSON),orientation:c&&Boolean(window.orientation),querySelector:u&&Boolean(document.querySelector),fullscreen:Boolean(d(document,"exitFullscreen")||d(document,"cancelFullScreen")),inputPlaceholder:void 0!==document.createElement("input").placeholder,cors:c&&"withCredentials"in new window.XMLHttpRequest,touchEvents:c&&Boolean("ontouchstart"in window||window.DocumentTouch&&document instanceof window.DocumentTouch),pointerEvents:h&&Boolean(navigator.msPointerEnable||navigator.pointerEnabled),mutationEvents:Boolean(u&&document.implementation&&document.implementation.hasFeature("MutationEvents","2.0"))||c&&window.MutationEvent,eventCapture:c&&Boolean(window.addEventListener),flexboxCSS:u&&Boolean(d(document.createElement("div").style,"flexBasis",!0)),filterCSS:u&&!(document.documentElement&&document.documentElement.style.filter),opacityCSS:u&&!(document.documentElement&&document.documentElement.style.opacity),transitionsCSS:u&&Boolean(d(document.createElement("div").style,"transition",!0)),stickyCSS:u&&(r=document.createElement("div").style,r.position="-webkit-sticky",r.position="sticky",Boolean(r.position)),matrixCSS:(a=c&&d(window,"CSSMatrix"),Boolean(a)&&void 0!==(new a).m11),dragAndDrop:c&&!(window.System&&window.System.Gadget)},Locale:(s=(h&&(navigator.languages&&navigator.languages[0]||navigator.language||navigator.userLanguage)||"en-US").toLowerCase().split("-"),o=s[0]||"en",{lang:o,locale:s[1]||"us",dir:-1!==["ar","he"].indexOf(o)?"rtl":"ltr"}),detect:function(){var t=/(opera|ie|firefox|chrome|version)[\s\/:]([\w\d\.]+)?.*?(safari|version[\s\/:]([\w\d\.]+)|$)/,e=/(webkit)[\s\/:]([\w\d\.]+)/,i=/(trident)\/.*rv:([\d\.]+)/,s=/ip(?:ad|od|hone)/,o=/webos|wossystem/,a=/blackberry/,r=/android/,c=/\bphantomjs\b/i,d=/mac|win|linux/;function p(){return h&&navigator.userAgent.toLowerCase()||""}return function(){var m,f,g,v,b,y;n.Engine=(y=p(),v="ie"===(f=y.match(t)||y.match(e)||y.match(i)||(l.process?[null,"nodeJS",l.process.version]:[null,"unknown",0]))[1]&&u&&document.documentMode||("opera"===f[1]&&f[4]?f[4]:f[2]),b=parseInt(v,10),"trident"===(g="version"===f[1]?f[3]:f[1])&&(g="ie"),(m={name:g,version:b,fullVersion:v})[g]=b,m[g+b]=!0,m.webkit=Boolean(y.match(/webkit/)),m),n.Platform=function(){var t,e=(h&&navigator.platform.toLowerCase()||"").split(" ")[0],n=p();return(t={name:s.test(n)?"ios":o.test(n)?"webos":a.test(n)?"blackberry":r.test(n)?"android":c.test(n)?"phantomjs":d.test(e)||l.process?e:"other"})[t.name]=!0,t.ipad=Boolean(n.match(/ipad/)),t.tablet=t.ipad||Boolean(n.match(/tablet/)),t.windows=0===t.name.indexOf("win"),t}(),u&&(document.documentElement.className+=" "+n.Engine.name+" "+n.Engine.name+n.Engine.version+" "+n.Platform.name)}}(),isOnline:function(t,e){return void 0!==t&&e?(n.onLine=Boolean(t),setTimeout(function(){delete n.onLine},e)):void 0===n.onLine&&(n.Platform.phantomjs||!h||void 0===navigator.onLine?n.onLine=!0:n.onLine=!0===navigator.onLine),n.onLine},getOrientation:c&&window.self===window.top&&window.orientation?function(){var t=window.orientation;return 90===Math.abs(t)?"landscape":"portrait"}:function(){var t=n.getSize();return t.width/t.height<1?"portrait":"landscape"},getSize:function(){var t,e,n=0,i=0;return c&&"number"==typeof window.innerWidth?(n=window.innerWidth,i=window.innerHeight):u&&(t=document.documentElement,e=document.body,t&&(t.clientWidth||t.clientHeight)?(n=t.clientWidth,i=t.clientHeight):e&&(e.clientWidth||e.clientHeight)&&(n=e.clientWidth,i=e.clientHeight)),{width:n,height:i}},getScrolls:function(){var t=0,e=0;return c&&"number"==typeof window.pageYOffset&&(e=window.pageYOffset,t=window.pageXOffset),{y:e,x:t}},getScrollbarWidth:e.memoize(function(){var t,e,n=0;return u&&(t=document.documentElement,(e=document.createElement("div")).style.cssText="width:100px;height:100px;overflow:scroll;position:absolute;top:-9999px;",t.appendChild(e),n=e.offsetWidth-e.clientWidth,t.removeChild(e)),n}),addStar:function(t,e){if(c)if(window.sidebar)window.sidebar.addPanel(e,t,"");else if(window.external)window.external.AddFavorite(t,e);else if(window.opera&&window.print)return!0},getVendorProperty:d}).detect(),t.namespace("Utils/Client",n,t)}.apply(e,s))||(t.exports=o)}).call(this,n(114))},function(t,e,n){var i,s;i=[n(1),n(16),n(115)],void 0===(s=function(t,e,n){"use strict";return n.warn("Module UWA/Class/Promise","Use UWA/Promise instead"),t.namespace("Class/Promise",e,t,"replace")}.apply(e,i))||(t.exports=s)},function(t,e,n){"use strict";var i,s;i=[n(1),n(2),n(45),n(4),n(35),n(17),n(192),n(6),n(190),n(27),n(156),n(139)],void 0===(s=function(t,e,i,s,o,a,r,l,c,u,h,d){var p=[],m={register:function(t){p.indexOf(t)<0&&("number"==typeof t.dataObj.sort?p.splice(t.dataObj.sort,0,t):p.push(t))},unregister:function(t){var e=p.indexOf(t);e>=0&&p.splice(e,1)},createNewTab:function(t,n){o.log("new","tab");var i=t&&t.data&&t.data.title,s=m.getAll().length;n||(n=function(){}),t=Object.assign({switchTo:!0,data:{title:_("New Tab {0}").format(s+1)}},t),e.Page.inSmartReaderView||(t.data.sort=m.getAll().indexOf(m.getFocused())+1);var a=l.createTab(t.data);return a.done(function(s){if(e.Page.inSmartReaderView)App.SmartReader.addSection(s),App.SmartReader.display("section",s.id);else{s.sort=t.data.sort;var o=m._DashboardTabView.addTabWithData(s,t.data.sort);t.switchTo&&m.focusTab(o),i||(m._DashboardTabView.dispatchEvent("onResize"),o.rename(),o.onRename=function(){r.sendEvent({name:"com.netvibes.dashboard.{0}.tab.create".format(e.Page.id),payload:{type:"tab",value:{title:o.getTitle()}}}),o.onRename=null})}n&&n(null,s)},function(t){e.isDebug()&&console.error(t),u.displayError(t),n&&n(t)}),a},hasLockedTabs:function(){var t,e=!1;for(t=0;t<this.getAll().length;t+=1)if(m.getAll()[t].isReadOnly()){e=!0;break}return e},getById:function(t){return t&&t.dataObj?t:(t=Number(t),p.detect(function(e){return+e.dataObj.id===t})||null)},getByAnchor:function(t){return m.getAll().filter(function(e){return String.toAnchor(e.dataObj.title)===t})},getNextWriteable:function(){var t=m.getFocused();if(!m.isReadOnly(t))return e.Page.openTabId;var n=p.detect(function(t){return!m.isReadOnly(t)});return n?n.dataObj.id:null},focusTab:function(t){e.Page.inSmartReaderView?App.SmartReader.display("section",t):m._DashboardTabView.selectTab(t)},getFocused:function(){return m.getById(e.Page.openTabId)},getAll:function(){return p},isReadOnly:function(t){return t.dataObj&&(t=t.dataObj),!(!t.ownerId||t.ownerId===e.User.id)||"search"===t.type||e.Page.isPublic&&e.Page.userId!==e.User.id},share:function(t){var e=m.getById(t);n.e(0).then(function(){var t=[n(179)];(function(t){t.show({id:e.dataObj.id,type:e.dataObj.type||"tab",title:e.dataObj.title,picture:e.dataObj.iconConfig||e.dataObj.icon,ownerId:e.dataObj.ownerId,sourceCount:a.getByTab(e.dataObj.id).length})}).apply(null,t)}).catch(n.oe)}},f={};return m.getItemList=function(t,n){return e.Page.inSmartReaderView?App.SmartReader.getItemList("section-"+t,n):(f[n=t+"-"+n]||(f[n]=new c),f[n])},m.reinitItemLists=function(t){e.Page.inSmartReaderView?App.SmartReader.reinitItemLists():m.getAll().forEach(function(e){var n,o,r=e.dataObj.id;m.hasMatchingLabels(r)&&function(e,n,s){var o=m.getItemList(e,n);o.replace(new c(s,{api:"streams"===e?h:d,query:{limit:0}})),t&&!i.get("dontPreload")&&o.loadProducers(),o.startUpdate()}("streams",r,(n="getStreams",o=r,s.unique(s.mapSplat(a.getByTab(o),function(t){return t[n]()}),function(t){return t.getId()})))})},m.updateLabelTabElement=function(t,e){var n=!m.hasMatchingLabels(t.dataObj.id);return e.toggleClassName("without-matching-label",n),n},m.updateLabelFilter=function(){var t=this.getAll(),n=!1;if(t.forEach(function(t){var i;i=e.Page.inSmartReaderView?App.SmartReader.getSectionRow(t.dataObj.id):t.getContent();var s=m.updateLabelTabElement(t,i);n=n||s}),!e.Page.inSmartReaderView&&n){var i=m.getFocused();if(i&&!m.hasMatchingLabels(i.dataObj.id)){var o=s.getNext(t,i,{loop:!0,condition:function(t){return m.hasMatchingLabels(t.dataObj.id)}});o&&m.focusTab(o)}}},m.getLabels=function(t){var e=m.getById(t);return e.dataObj.labels||(e.dataObj.labels=[]),e.dataObj.labels},m.addLabel=function(t,e){var n=this.getLabels(t);n.includes(e)||(n.push(e),this.saveLabels(t))},m.removeLabel=function(t,e){var n=this.getLabels(t);n.includes(e)&&(n.erase(e),this.saveLabels(t))},m.saveLabels=function(t){var e=m.getById(t),n=this.getLabels(t);l.tabUpdate({tabId:e.dataObj.id,options:{labels:n.length>0?n:""}}).done()},m.getAllLabels=function(){var t=s.mapSplat(m.getAll(),m.getLabels,m);return s.unique(t)},m.hasMatchingLabels=function(t){var e=m.getLabels(t),n=i.get("selectedTabLabels");if(0===n.length||0===e.length)return!0;for(var s=0;s<n.length;s++)if(e.includes(n[s]))return!0;return!1},m.duplicate=function(t){var n;n=m.getAll().indexOf(m.getFocused())+1,l.duplicateTab({tabId:t,sort:n}).done(function(){window.location=window.location.href.split("#")[0]},function(t){e.isDebug()&&console.error(t),u.displayError(t)})},m.move=function(t,n){var i=m.getById(t),s=p.indexOf(i);s<0||s===n||(p.splice(s,1),p.splice(n,0,i),e.Page.inSmartReaderView||(m._DashboardTabView.moveTab(i.dataObj.id,n),m._DashboardTabView.invalidateAllTabsPopup()),m.saveOrder().done())},m.saveOrder=function(){var t=p.map(function(t){return t.dataObj.id}).join(":");return l.saveUserTabOrder({sort:t})},m.getRealPageId=function(t){return(t=t?m.getById(t):m.getFocused())&&t.dataObj.realPageId||e.Page.id},m}.apply(e,i))||(t.exports=s)},function(t,e,n){var i,s;i=[n(1),n(9)],void 0===(s=function(t,e){"use strict";var n=e.extend({setOptions:function(e){return e=e||{},this.hasOwnProperty("options")||(this.options=t.clone(this.defaultOptions||this.options||{})),e.events&&this.addEvents&&this.addEvents(e.events),t.extend(this.options,e,!0),this},setOption:function(t,e){var n={};return n[t]=e,this.setOptions(n)},getOption:function(t,e){var n=this.options;return void 0!==n[t]?n[t]:e}});return t.namespace("Options",n,e)}.apply(e,i))||(t.exports=s)},function(t,e,n){var i,s;i=[n(1),n(13),n(19),n(10),n(58),n(24)],void 0===(s=function(t,e,n,i,s,o){"use strict";var a=!1;function r(){if(!1!==a)return a;var e=t.createElement("div",{class:"uwa-themed-scroller-content no-native-scrollbars",styles:{width:"100px",height:"100px",position:"absolute",visibility:"hidden",top:"0",left:"0",overflow:"scroll"}});return document.body.appendChild(e),a=e.offsetWidth-e.clientWidth,document.body.removeChild(e),a}function l(t){t.event&&(t=t.event);var e,n=t.changedTouches||t.touches||[t],i={x:0,y:0},s=n.length;for(e=0;e<s;e++)i.x+=n[e].clientX/s,i.y+=n[e].clientY/s;return i}var c={delta:0,coef:1,active:!1,visible:!1,scrollSize:0,scrollPosition:0,offsetSize:0},u=s.extend({defaultOptions:{touchSnap:0,touchDelay:0},init:function(t,e){this._parent(e),this.scroller=t,this.direction=this.element.className.contains("scrollbar-y")?"y":"x"},_getInfos:function(){return this.scroller._infos[this.direction]},_getPosition:function(){var t=this.element.getBoundingClientRect()["y"===this.direction?"top":"left"];return l(this.currentEvent)[this.direction]-t},start:function(t){this._parent(t),this._getInfos().active=!0,this.scroller.update(),this.position=this._getPosition()},move:function(t,e){this._parent(t,e);var n=this._getInfos();n.delta=(this._getPosition()-this.position)*n.coef,n.active=!0,this.scroller.updateVisible()},stop:function(){this._parent(),this.scroller.updateActive(this.currentEvent)}}),h=i.extend(o,{name:"uwa-themed-scroller",options:{element:null,scrollbars:"auto",scrollbarsMargin:4,scrollbarsMinSize:50,shadows:!1},init:function(e){t.is(e)&&t.is(e.element)&&t.extendElement(e.element),this._parent(e),this._elementEvents={mousemove:this.updateActive.bind(this),mouseout:this.updateActive.bind(this)},"auto"===this.options.scrollbars&&(this.options.scrollbars=0===r()?"native":"virtual"),this._buildElements(),this._initElements(),this.initInfos()},initInfos:function(){this._infos={x:Object.create(c),y:Object.create(c)},this.setPeriodical("update",this.update,1e3),this.update()},destroy:function(){if(this.options.element){var t=this.elements.container;t.removeEvents(this._elementEvents).removeClassName(this.getClassNames()).setContent(this.elements.content.childNodes);var e=t.destroy;t.destroy=function(){},this._parent(),t.destroy=e}else this._parent()},onInjected:function(){this.initInfos()},_buildElements:function(){var e=this.options.element||t.createElement("div");this.elements.container=e,this.elements.content=t.createElement("div",{html:e.childNodes}).inject(e)},_initElements:function(){var t=this.elements.container,e=this.elements.content;t.addClassName(this.getClassNames()).addEvents(this._elementEvents);var n="native"===this.options.scrollbars,i=n?"native-scrollbars ":"no-native-scrollbars ";e.addClassName(i+this.getClassNames("-content")).addEvent("scroll",this.updateVisible.bind(this)),n||e.setStyles({right:-r(),bottom:-r()})},getInnerElement:function(){return this.elements.content},getScrollbar:function(e,n){var i=this.elements[e+"Scrollbar"];return!i&&n&&(i=this.elements[e+"Scrollbar"]=t.createElement("div",{class:this.getClassNames("-scrollbar","-scrollbar-"+e)}).inject(this.elements.container),new u(this,{element:i,root:this.elements.container}),i.clientHeight),i},getShadow:function(e,n){var i=this.elements[e+"Shadow"];return!i&&n&&(i=this.elements[e+"Shadow"]=t.createElement("div",{class:this.getClassNames("-shadow","-shadow-"+e)}).inject(this.elements.container)),i},showShadow:function(t,e){var n=this.getShadow(t,e);e?(e>100&&(e=100),n.setStyle("opacity",e/100).addClassName("active")):n&&n.removeClassName("active")},updateActive:function(t){if("virtual"===this.options.scrollbars){if("mouseout"===t.type||"touchend"===t.type)this._infos.x.active=this._infos.y.active=!1;else{var e=this.elements.container.getBoundingClientRect(),n=l(t);["x","y"].forEach(function(t,s){var o=e[s?"right":"bottom"];this._infos[t].active=i(o-12,n[s?"x":"y"],o)&&i(e[s?"top":"left"],n[t],e[s?"bottom":"right"])},this)}this.updateVisible()}function i(t,e,n){return t<e&&e<n}},updateVisible:function(){this._infos.x.visible=this._infos.y.visible=!0,this.setDelayed("scrollbars-visible",function(){this._infos.x.visible=this._infos.y.visible=!1,this.update()},1e3),this.update()},_read:function(t){var e=this._infos[t?"y":"x"],n=this.elements.content,i=r();e.scrollSize=n[t?"scrollHeight":"scrollWidth"],e.scrollPosition=n[t?"scrollTop":"scrollLeft"]+e.delta,e.offsetSize=n[t?"offsetHeight":"offsetWidth"]-i,e.scrollPosition<0?e.scrollPosition=0:e.scrollPosition>e.scrollSize-e.offsetSize&&(e.scrollPosition=e.scrollSize-e.offsetSize)},_write:function(t){var e=t?"y":"x",n=this._infos[e],i=this.options;if(n.delta&&(this.elements.content[t?"scrollTop":"scrollLeft"]=n.scrollPosition,n.delta=0),"virtual"===this.options.scrollbars){var s=n.scrollSize>n.offsetSize+1,o=this.getScrollbar(e,s);if(s&&n.scrollSize){var a=n.offsetSize-2*i.scrollbarsMargin,r=a*(n.offsetSize/n.scrollSize);r<i.scrollbarsMinSize&&(r=i.scrollbarsMinSize),n.coef=(n.scrollSize-n.offsetSize)/(a-r),o.style[t?"top":"left"]=i.scrollbarsMargin+n.scrollPosition/n.coef+"px",o.style[t?"height":"width"]=r+"px",o.toggleClassName("active",n.active).toggleClassName("visible",n.visible)}else o&&o.removeClassName("active").removeClassName("visible")}i.shadows&&n.offsetSize&&(this.showShadow(e+"-start",n.scrollPosition),this.showShadow(e+"-end",n.scrollSize-n.scrollPosition-n.offsetSize))},update:function(){this.setAnimate("update",function(){this._read(!1),this._read(!0),t.equals(this._previousInfos,this._infos)||(this._write(!1),this._write(!0),this._previousInfos=t.clone(this._infos))})}});return t.namespace("Controls/ThemedScroller",h,t)}.apply(e,i))||(t.exports=s)},function(t,e,n){var i,s;i=[n(1),n(9),n(13),n(19)],void 0===(s=function(t,e,n,i){"use strict";var s,o=1,a=i.getVendorProperty(window,"cancelAnimationFrame")||clearTimeout,r=i.getVendorProperty(window,"requestAnimationFrame")||function(t){return setTimeout(t,1e3/60)};function l(t,e,i,s){return function(a,r,l,c,u){var h=this,d=h;return"function"==typeof a&&(u=c,c=l,l=r,r=a,d=a=o++),r=n.attempt.bind(null,r,function(n){throw h[t](a),new Error("The "+e.slice(0,-1)+' "'+a+'" failed with error "'+n+'".')},u||h),h[t](a),h[e]=h[e]||Object.create(null),h[e][a]=i(function(){s&&h[t](a),r()},l),c&&r(),d}}function c(t,e){return function(n){var i,s=this[t];if(s)if(void 0===n)for(i in s)e(s[i]),delete s[i];else s[n]&&(e(s[n]),delete s[n]);return this}}function u(t){return function(e){var n=this[t];return Boolean(n&&n[e])}}return s=e.extend({setPeriodical:l("clearPeriodical","periodicals",window.setInterval),clearPeriodical:c("periodicals",window.clearInterval),hasPeriodical:u("periodicals"),setDelayed:l("clearDelayed","delays",window.setTimeout,!0),clearDelayed:c("delays",window.clearTimeout),hasDelayed:u("delays"),setAnimate:l("clearAnimate","animates",r,!0),clearAnimate:c("animates",a),hasAnimate:u("animates"),setImmediate:l("clearImmediate","immediates",n.setImmediate,!0),clearImmediate:c("immediates",n.clearImmediate),hasImmediate:u("immediates"),clearAllTimed:function(){return this.clearImmediate(),this.clearAnimate(),this.clearDelayed(),this.clearPeriodical(),this}}),t.namespace("Timed",s,e)}.apply(e,i))||(t.exports=s)},function(t,e,n){var i,s;i=[n(1),n(13),n(19),n(267),n(86),n(348),n(39)],void 0===(s=function(t,e,n,i,s,o,a){"use strict";var r,l,c=new o,u={proxies:(r=t.hosts,l=r.exposition+"/proxy/",t.merge(r.proxies||{},{ajax:l+"ajax",resolve:l+"resolve",xml:l+"xml",spreadsheet:l+"spreadsheet",soap:l+"soap",feed:l+"feed",icon:l+"icon",richIcon:l+"richIcon",rss:l+"feed"})),useJsonpRequest:!0,allowCrossOriginRequest:!1,useOfflineCache:!1,request:function(){var o=/OPTIONS|GET|HEAD|POST|PUT|DELETE|TRACE|CONNECT/i,r=/json|document|blob|arraybuffer|text/,l=/^([A-Za-z0-9+/]{4})*([A-Za-z0-9+/]{4}|[A-Za-z0-9+/]{3}=|[A-Za-z0-9+/]{2}==)$/,c=n.isOnline;var h={text:function(t){return"string"!=typeof t&&(t=s.encode(t)),t},json:function(e){if("string"==typeof e&&(e=s.decode(e)),!t.is(e,["object","array"]))throw new Error('Invalid JSON Response: "'+String(e)+'"');return e},xml:function(t){return"string"==typeof t&&(t=e.loadXml(t)),t},document:function(t){return"string"==typeof t&&(t=e.loadHtml(t)),t},blob:function(t,n){var i=e.getOwnPropertyMatchValue(n,"Content-Type")||"text/plain";return"string"==typeof t&&(t=l.test(t)?function(t,e){var n,i,s=t.indexOf(";base64,")+";base64,".length,o=t.substring(s),a=window.atob(o),r=a.length,l=new Uint8Array(r);for(n=0;n<r;++n)l[n]=a.charCodeAt(n);return(i=new BlobBuilder).append(l.buffer),i.getBlob(e)}(t,i):new Blob([t],{type:i})),t},arraybuffer:function(t){return"string"==typeof t&&(t=new ArrayBuffer(12)),t}};return function(n,d){if(!n)throw new Error("Bad or missing url argument.");d=d||{};var p,m,f,g,v,b,y,w,x,C,_,S,E=window.location,k={timeout:25e3,method:"GET",type:"text",proxy:!1,async:!0,headers:{},useMergeRequest:!0,useOfflineCache:u.useOfflineCache,allowCrossOriginRequest:u.allowCrossOriginRequest,useJsonpRequest:u.useJsonpRequest,onComplete:function(){},onCancel:function(){},onFailure:function(t){throw t}};return d.requestHeaders&&(d.headers=d.requestHeaders,delete d.requestHeaders),d.postBody?(d.method="POST",d.data=d.postBody,delete d.postBody):d.parameters&&(d.method="POST",d.data=d.parameters,delete d.parameters),d.auth&&(d.authentication=d.auth,delete d.auth),"html"===d.type?d.type="document":"feed"===d.type&&(d.type="json"),(d=t.merge(d,k)).type=h[d.type]?d.type:k.type,d.timeout=parseInt(d.timeout,10),o.test(d.method)&&(d.method=d.method.toUpperCase()),"json"===d.type&&(e.getOwnPropertyMatchName(d.headers,"Accept")||(d.headers.Accept="application/json,text/javascript,*/*"),e.getOwnPropertyMatchName(d.headers,"X-Request")||(d.headers["X-Request"]="JSON")),w=d.type,x=d.useOfflineCache,C=d.allowCrossOriginRequest,_=d.useJsonpRequest,S=n,d.proxy?(n=u.proxifyUrl(n,d),_=_&&!1===e.matchUrl(n,E)&&!1===C):!1===e.matchUrl(n,E)&&!1===C?(_=_&&!1===e.matchUrl(u.proxies.ajax,E),n=u.proxifyUrl(n,t.extend(d,{proxy:"ajax"}))):_=!1,u.requests=u.requests||{},v=function(n,i){var s={url:n,timeout:i.timeout,method:i.method,type:i.type,proxy:i.proxy,async:i.async,data:i.data,headers:i.headers};return"GET"===i.method&&!1!==i.useMergeRequest||(s.uuid=e.getUUID()),t.Json.encode(s)}(n,d),m={onComplete:d.onComplete,onFailure:d.onFailure,onCancel:d.onCancel,onTimeout:d.onTimeout||d.onFailure},u.requests[v]?(p=u.requests[v]).addEvents(m):((p=u.requests[v]=new a).addEvents(m),b=function(t,n){var i=t;delete u.requests[v],e.attempt(function(){var s;return _&&(n=t.headers,s=t.body,l.test(s)&&(s=e.base64Decode(s)),t=s),t=h[w](t,n),x&&u.storeInCache(S,i),!0},function(){return y("onFailure",arguments),!1})&&p.dispatchEvent("onComplete",[t,n])},y=function(e,n){var i,s,o=!0;delete u.requests[v],x&&(i=u.getFromCache(S),t.is(i)&&(o=!1,c()&&c(!1,s||5e3),b(i))),o&&p.dispatchEvent(e,n)},f={method:d.method,data:d.data,headers:d.headers,fromDataRequest:S,timeout:d.timeout,async:d.async,withCredentials:d.withCredentials,onComplete:function(t,e){b(t,e)},onFailure:function(){y("onFailure",arguments)},onCancel:function(){y("onCancel",arguments)},onTimeout:function(){y("onTimeout",arguments)},onProgress:d.onProgress},x&&!1===c()?f.onFailure(new Error("Network is Offline")):_?(d.data&&d.data.length>0&&-1!==["POST","PUT"].indexOf(d.method)&&(n+=-1!==n.indexOf("?")?"&":"?","POST"===d.method?n+=e.toQueryString(d.data,"postData"):"PUT"===d.method&&(n+=e.toQueryString(d.data,"rawData")),delete f.data,delete f.method),g=s.request(n,f)):(w&&r.test(w)&&(f.responseType=w),p.xhr=g=i.request(n,f)),p.url=S,p.options=d,p.cancel=g.cancel),p}}(),proxifyUrl:function(t,n){if(!t)throw new Error("Bad or missing url argument.");var i,s=[],o=n.proxy,a=e.toQueryString,r=u.proxies;if(!o||!r[o])throw new Error("Invalid proxy");if(i=r[o],0===t.indexOf(i))return t;if(n.data&&n.method&&"GET"===n.method.toUpperCase()&&(t+=(t.indexOf("?")>-1?"&":"?")+a(n.data),delete n.data),"object"==typeof n[o]&&(s.push(a(n[o])),delete n[o]),n.type&&(s.push(a({type:n.type})),delete n.type),"object"==typeof n.authentication&&s.push(a(n.authentication)),n.cache&&(s.push(a({cache:parseInt(n.cache,10)})),n.cache<0&&s.push(Date.now())),n.headers&&(s.push(a(n.headers,"headers")),delete n.headers),n.connect&&s.push(a({connect:n.connect})),n.service&&s.push(a({service:n.service})),n.wid&&s.push(a({wid:n.wid})),n.method&&s.push(a({method:n.method})),s.push(a({url:t})),(t=i+"?"+s.join("&")).length>2048)throw new Error("Proxified url is more than 2048 characters, that is the limit for most of the browsers.");return t},getFeed:function(t,e){return u.request(t,{method:"GET",proxy:"feed",type:"json",onComplete:e})},getXml:function(t,e){return u.request(t,{method:"GET",type:"xml",onComplete:e})},getText:function(t,e){return u.request(t,{method:"GET",type:"text",onComplete:e})},getJson:function(t,e){return u.request(t,{method:"GET",type:"json",onComplete:e})},getCache:function(){return c},storeInCache:function(n,i){i=e.toArray(i).filter(function(e){return t.is(e)&&!e.nodeType}),u.getCache().set(e.getCheckSum(n),i)},getFromCache:function(t){return u.getCache().get(e.getCheckSum(t))}};return t.namespace("Data",u,t)}.apply(e,i))||(t.exports=s)},function(t,e,n){var i,s;i=[n(1),n(18),n(9),n(22),n(39),n(24),n(15),n(56)],void 0===(s=function(t,e,n,i,s,o,a,r){"use strict";function l(t){return-1!==["borderColor","backgroundColor","color"].indexOf(e.camelCase(t))}function c(t){var e=Number(t);return isNaN(e)&&(e=parseInt(t,10)),isNaN(e)?0:e}var u=n.extend(i,o,s,{defaultOptions:{transition:"linear",duration:500,unit:"px",wait:!1},element:null,from:null,to:null,current:null,init:function(t,e){this.element=t,this.from={},this.to={},this.queue=[],this.setOptions(e)},tween:function(t,e,n){var i={};return i[t]=[e,n],this.start(i)},fade:function(t){t=void 0!==t?t:"toggle";var e=a.getOpacity.call(this.element),n={opacity:[]};switch(t){case"in":n.opacity=[e,1];break;case"out":n.opacity=[e,0];break;case"show":n.opacity=[1,1];break;case"hide":n.opacity=[0,0];break;case"toggle":n.opacity=e<1?[e,1]:[e,0];break;default:n.opacity=[e,t]}return this.start(n)},start:function(t){return this.options.wait&&this.hasAnimate("fx")?this.queue.push(t):(this.stop(),this.setSteps(t),this.dispatchEvent("onStart"),this.startTime=Date.now(),this.current={},this.animate()),this},pause:function(){return this.clearAnimate("fx"),this},stop:function(){return this.pause(),this.from={},this.to={},this},setSteps:function(t){var n,i={},s={};for(n in t)if(t.hasOwnProperty(n))if(n=e.camelCase(n),Array.isArray(t[n])?(i[n]=t[n][0],s[n]=t[n][1]):(i[n]=a.getStyle.call(this.element,n),s[n]=t[n]),l(n)){var o=r.parse(i[n]).toObject(),u=r.parse(s[n]).toObject();i[n]=[o.r,o.g,o.b,o.alpha],s[n]=[u.r,u.g,u.b,u.alpha]}else i[n]=c(i[n]),s[n]=c(s[n]);this.from=i,this.to=s},compute:function(n,i){var s,o=this.options,a=o.transition,r=o.duration,l=t.typeOf(a);if("string"===l){if(!t.is(u.Transitions[a],"function"))throw new Error("Invalid UWA.FX transition option value.");a=u.Transitions[a]}else if("array"===l)a=u.Transitions.cubicBezier.apply(null,a);else if("function"!==l)throw new Error("Invalid UWA.FX transition option value.");if(s=r>0&&n!==i?a(this.currentTime,n,i-n,r):i,isNaN(s))throw new Error(e.format('Invalid UWA.FX transition computation value with from "{0}" to "{1}".',n,i));return s},animate:function(){var t,e=Date.now(),n=this.options.duration,i=this.startTime;e<i+n?this.currentTime=e-i:(this.currentTime=n,t=!0),this.dispatchEvent("onAnimate",[this.element,this.from,this.to]),t?(this.stop(),this.dispatchEvent("onComplete"),this.queue.length>0&&this.start(this.queue.shift()),this.lastTime=null):this.setAnimate("fx",this.animate),this.fps=1e3/(e-(this.lastTime||e)),this.lastTime=e},onAnimate:function(t,e,n){var i,s,o={};for(i in e)e.hasOwnProperty(i)&&(s=l(i)?"rgba("+Math.round(this.compute(e[i][0],n[i][0]))+","+Math.round(this.compute(e[i][1],n[i][1]))+","+Math.round(this.compute(e[i][2],n[i][2]))+","+this.compute(e[i][3],n[i][3])+")":this.compute(e[i],n[i]),this.current[i]!==s&&(o[i]=s));this.current=o,a.setStyles.call(t,o)}});return u.Transitions={linear:function(t,e,n,i){return n*t/i+e},quadIn:function(t,e,n,i){return n*(t/=i)*t+e},quadOut:function(t,e,n,i){return-n*(t/=i)*(t-2)+e},quadInOut:function(t,e,n,i){return(t/=i/2)<1?n/2*t*t+e:-n/2*(--t*(t-2)-1)+e},cubicIn:function(t,e,n,i){return n*(t/=i)*t*t+e},cubicOut:function(t,e,n,i){return n*((t=t/i-1)*t*t+1)+e},cubicInOut:function(t,e,n,i){return(t/=i/2)<1?n/2*t*t*t+e:n/2*((t-=2)*t*t+2)+e},quartIn:function(t,e,n,i){return n*(t/=i)*t*t*t+e},quartOut:function(t,e,n,i){return-n*((t=t/i-1)*t*t*t-1)+e},quartInOut:function(t,e,n,i){return(t/=i/2)<1?n/2*t*t*t*t+e:-n/2*((t-=2)*t*t*t-2)+e},quintIn:function(t,e,n,i){return n*(t/=i)*t*t*t*t+e},quintOut:function(t,e,n,i){return n*((t=t/i-1)*t*t*t*t+1)+e},quintInOut:function(t,e,n,i){return(t/=i/2)<1?n/2*t*t*t*t*t+e:n/2*((t-=2)*t*t*t*t+2)+e},sineIn:function(t,e,n,i){return-n*Math.cos(t/i*(Math.PI/2))+n+e},sineOut:function(t,e,n,i){return n*Math.sin(t/i*(Math.PI/2))+e},sineInOut:function(t,e,n,i){return-n/2*(Math.cos(Math.PI*t/i)-1)+e},expoIn:function(t,e,n,i){return 0===t?e:n*Math.pow(2,10*(t/i-1))+e},expoOut:function(t,e,n,i){return t===i?e+n:n*(1-Math.pow(2,-10*t/i))+e},expoInOut:function(t,e,n,i){return 0===t?e:t===i?e+n:(t/=i/2)<1?n/2*Math.pow(2,10*(t-1))+e:n/2*(2-Math.pow(2,-10*--t))+e},circIn:function(t,e,n,i){return-n*(Math.sqrt(1-(t/=i)*t)-1)+e},circOut:function(t,e,n,i){return n*Math.sqrt(1-(t=t/i-1)*t)+e},circInOut:function(t,e,n,i){return(t/=i/2)<1?-n/2*(Math.sqrt(1-t*t)-1)+e:n/2*(Math.sqrt(1-(t-=2)*t)+1)+e},backIn:function(t,e,n,i,s){return n*(t/=i)*t*(((s=s||1.70158)+1)*t-s)+e},backOut:function(t,e,n,i,s){return n*((t=t/i-1)*t*(((s=s||1.70158)+1)*t+s)+1)+e},backInOut:function(t,e,n,i,s){return s=s||1.70158,(t/=i/2)<1?n/2*(t*t*((1+(s*=1.525))*t-s))+e:n/2*((t-=2)*t*((1+(s*=1.525))*t+s)+2)+e},elasticIn:function(t,e,n,i,s,o){var a;return 0===t?e:1==(t/=i)?e+n:(o=o||.3*i,(s=s||1)<Math.abs(n)?(s=n,a=o/4):a=o/(2*Math.PI)*Math.asin(n/s),-s*Math.pow(2,10*(t-=1))*Math.sin((t*i-a)*(2*Math.PI)/o)+e)},elasticOut:function(t,e,n,i,s,o){var a;return 0===t?e:1==(t/=i)?e+n:(o=o||.3*i,(s=s||1)<Math.abs(n)?(s=n,a=o/4):a=o/(2*Math.PI)*Math.asin(n/s),s*Math.pow(2,-10*t)*Math.sin((t*i-a)*(2*Math.PI)/o)+n+e)},elasticInOut:function(t,e,n,i,s,o){var a,r;return 0===t?r=e:2==(t/=i/2)?r=e+n:(o=o||i*(.3*1.5),(s=s||1)<Math.abs(n)?(s=n,a=o/4):a=o/(2*Math.PI)*Math.asin(n/s),r=t<1?s*Math.pow(2,10*(t-=1))*Math.sin((t*i-a)*(2*Math.PI)/o)*-.5+e:s*Math.pow(2,-10*(t-=1))*Math.sin((t*i-a)*(2*Math.PI)/o)*.5+n+e),r},bounceIn:function(t,e,n,i){return n-u.Transitions.bounceOut(i-t,0,n,i)+e},bounceOut:function(t,e,n,i){return(t/=i)<1/2.75?n*(7.5625*t*t)+e:t<2/2.75?n*(7.5625*(t-=1.5/2.75)*t+.75)+e:t<2.5/2.75?n*(7.5625*(t-=2.25/2.75)*t+.9375)+e:n*(7.5625*(t-=2.625/2.75)*t+.984375)+e},bounceInOut:function(t,e,n,i){var s=u.Transitions;return t<i/2?.5*s.bounceIn(2*t,0,n,i)+e:.5*s.bounceOut(2*t-i,0,n,i)+.5*n+e},quinticBezier:function(){return function(t,e,n,i,s,o){var a,r,l,c,u,h,d,p,m=o-t,f={a:m-(a=t)-(p=5*((s-t)/m+a)-20*((c=(i-t)/m)+(r=(e-t)/m))+30*(l=(n-t)/m))-(d=10*(c-a)+30*(r-l))-(h=10*(l-a)-4*(u=5*(r-a)))-u,b:p,c:d,d:h,e:u};return function(t,e,n,i){var s,o,a=t/i,r=a*a,l=r*t;return f.a||f.c?f.b||f.d?(s=r,o=r*a):o=l:(f.b||f.d)&&(s=l),e+n*(f.a*r+f.b*r+f.c*o+f.d*s+f.e*a)}}}(),cubicBezier:function(){function t(t,e){return((e.ax*t+e.bx)*t+e.cx)*t}function e(t,e){return(3*e.ax*t+2*e.bx)*t+e.cx}function n(n,i,s){return function(t,e){return((e.ay*t+e.by)*t+e.cy)*t}(function(n,i,s){var o,a,r,l,c,u,h;for(l=n,o=0;o<8;o++){if(c=t(l,i)-n,Math.abs(c)<s)return l;if(u=e(l,i),Math.abs(u)<s)break;l-=c/u}if(r=1,(l=n)<(a=0))h=a;else if(l>r)h=r;else{for(;a<r;){if(c=t(l,i),Math.abs(c-n)<s)return l;n>c?a=l:r=l,l=.5*(r-a)+a}h=l}return h}(n,i,s),i)}return function(t,e,i,s){var o,a,r,l,c,u,h={ax:1-(r=3*(o=t))-(l=3*(i-o)-r),bx:l,cx:r,ay:1-(c=3*(a=e))-(u=3*(s-a)-c),by:u,cy:c};return function(t,e,i,s){var o=t/s,a=function(t){return 1e3/60/t/4}(s),r=n(o,h,a);return e*(1-r)+(e+i)*r}}}()},t.namespace("Fx",u,t)}.apply(e,i))||(t.exports=s)},function(t,e,n){"use strict";var i,s;i=[n(18),n(1),n(20),n(2),n(121),n(62)],void 0===(s=function(t,e,n,i,s,o){var a={stream_204:_("Looks like no new articles have been published in the last few months. Please wait for next update."),stream_403:_("You are not authorized to access to this app"),stream_404:_("Feed/stream not found. Try another search."),stream_600:_("Maximum number of feeds reached."),stream_607:_("Invalid request."),stream_652:_("Can't connect to Twitter, please try again later."),stream_700:_("The URL for this feed/stream is returning an error. We'll try again later."),stream_701:_("The URL for this feed/stream is invalid."),stream_702:_("The URL for this feed/stream can't be reached."),stream_710:_("The URL for this feed/stream is returning a blank page. We'll try again later."),"stream_71[13]":_("The URL for this feed/stream could not be parsed. We'll try again later."),stream_900:_("Invalid MisoData file: the date is missing."),stream_901:_("Invalid MisoData file: wrong date format."),stream_150:_("The configuration file can't be parsed."),stream_151:_("Invalid MisoData file: file is empty."),stream_71001:_("Syntax error in your query. Check for incorrect syntax or missing elements."),stream_71011:_("Unknown prefix. Check for incorrect spelling in your prefixes."),"stream_7150[27]":_("The query contains a reference to a non-existent object (tab, widget, ...). Please update your query."),stream_666:_("This source does not allow its feeds to be crawled."),"stream_.*":_("Looks like this feed/stream is not valid or currently not responding. We'll try again later."),module_per_tab_quota_exceeded:function(){return _("You have reached the maximum amount of {0} apps per tab. This app cannot be added to the current tab.").format(i.Config.account_limits.modules_per_tab)},module_per_dashboard_quota_exceeded:function(){return _("You have reached the maximum amount of {0} apps per dashboard. This app cannot be added to the current dashboard.").format(i.Config.account_limits.modules_per_dashboard)},dashboard_quota_exceeded:_("You have reached the maximum amount of Dashboards you can add. The dashboard won't be added."),tab_per_dashboard_quota_exceeded:_("You have reached the maximum amount of tabs you can add. The tab won't be added to your dashboard."),readlater_quota_exceeded:_("You have reached the maximum amount of starred articles. The article won't be starred."),sharing_draft_widget:_("A module you are trying to share has not been published yet."),"You can't create an opinion":_("You can't create a new opinion."),"Opinion already exists":_("This item has already been marked with this Opinion. Please reload your dashboard."),"Invalid query: (.*)":_('The query "{1}" contains a syntax error'),product_payment:_("Fields and terms of sales have to be properly filled"),"Auth error: (.*)":_("Authorization Required"),item_already_blacklisted:_("This item has already been blocked. The item (and any items associated with it) will be removed from your dashboard shortly."),"Unable to download or parse data":_("Unable to download or parse data"),bootstrap_1:_("Unknown error"),bootstrap_1337:_("Netvibes service not configured or not responding"),bootstrap_8000:_("User do not have the required role"),bootstrap_8001:_("This app cannot be added to this dashboard because you are not Owner of this dashboard. Please go to a dashboard on which you are Owner and try again."),analytics_0:_("This stream doesn't exist."),analytics_1:_("Missing value."),analytics_2:_("Value not found."),analytics_3:_("Bad operator value."),analytics_4:_("Bad field value."),analytics_5:_("Subqquery not finished."),analytics_6:_("Bad date format."),analytics_7:_("Tab not found."),analytics_8:_("Bad context."),analytics_71108:_("Sorry, results for this query can't be displayed because the field of search is no longer available."),analytics_71001:_("Syntax error in your query. Check for incorrect syntax or missing elements."),"analytics_7150[27]":_("The query contains a reference to a non-existent object (tab, widget, ...). Please update your query."),analytics_900:_("Not enough results. Please either update your analysis by refining your search criteria or by widening the time period, or wait for next refresh."),"Unable to create preconfig for this module (.*)":_("You don't have the permission to share this library."),"Stream doesn't exist (.*)":_("Stream doesn't exist."),"Stream (.*) doesn't exist.":_('Stream "{1}" doesn\'t exist.'),"tab (.*) doesn't exist.":_('Tab "{1}" doesn\'t exist.'),"library (.*) doesn't exist.":_('Library "{1}" doesn\'t exist.'),"Date range is too wide (.*)":_("Date range is too wide (please do not exceed 1000 intervals)."),Nv_Db_Exception:_("An error has occurred, please try again later or contact the support")},r=new s(a,{formater:"string-format"}),l=new s(a,{formater:"string-format"});l.add({http_0:_("A request has unexpectedly failed. Please check your Internet connection or contact the support."),"http_(\\d+)":_("An error has occurred, please try again later or contact the support [Code : HTTP {1}]"),fallback:_("An error has occurred, please try again later or contact the support")});var c={getErrorMessage:function(t,n,i){t=e.is(t)?String(t):"fallback";var o=i?r:l;return n&&(n.fallback=o.match(t,n.fallback),o=new s(n,{formater:"string-format"})),o.match(t)},displayError:function(e,i,s){var a=n.deferred();if("function"==typeof i&&(s=i,i=null),s||(s=function(){}),"page_exiting"===e)return s(e),a.reject(e),a.promise;var r=c.getErrorMessage(e,i,!0);return r?(o.error(t.escapeHTML(r),{events:{onClose:function(){s(e),a.reject(e)}}}),a.promise):(console.error("Unhandled API error:",e),s(e),a.reject(e),a.promise)},isOfflineError:function(t){return"http_0"===t||"Network is Offline"===t}};return c}.apply(e,i))||(t.exports=s)},function(t,e){var n=t.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=n)},function(t,e){t.exports=function(t){try{return!!t()}catch(t){return!0}}},function(t,e,n){var i=n(31);t.exports=function(t){if(!i(t))throw TypeError(t+" is not an object!");return t}},function(t,e){t.exports=function(t){return"object"==typeof t?null!==t:"function"==typeof t}},function(t,e,n){"use strict";var i,s;i=[n(1),n(25),n(10),n(41),n(178)],void 0===(s=function(t,e,n,i,s){return n.extend({initialized:!1,requests:[],name:"uwa-schemaform",dispatchOnChange:function(){this.initialized&&this.dispatchEvent("onChange",[this.getValue()])},init:function(t){this._parent(t),this.requests=[],this.getContent(),this.options.value&&this.setInitialValue(this.options.value),this.initialized=!0},isEmpty:function(){return!this.getValue()},setInitialValue:function(t){this.setValue(t)},getInputOptions:function(e){var n={events:{onChange:this.dispatchOnChange.bind(this)}};return t.extend(n,e,!0)},getContent:function(){return this.elements.container||(this.elements.container=t.createElement("div",{class:this.getClassNames()})),this.elements.container},addSpinner:function(){this.spinner=new i({size:20,delay:500}),this.spinner.toElement().addClassName("autocomplete-spinner"),this.elements.container.addContent(this.spinner),this.spinner.stop()},addNotice:function(t,e){this.options.context.buildNotice(t,e,this.options.name)},addInputError:function(t){this.options.context.addValidityMessage(this.options.name,{message:t})},removeInputError:function(){this.options.context.hideValidityMessage(this.options.name)},doOauthRequest:function(t,e){this.requests.push(s.request(t,e))},getValue:function(){throw new Error("Controls didn't define a setValue method")},setValue:function(){throw new Error("Controls didn't define a getValue method")},getDisplayValue:function(){return this.getValue()},destroy:function(){this._parent(),this.requests.length>0&&(this.requests.forEach(function(t){t.cancel()}),this.requests=[])}})}.apply(e,i))||(t.exports=s)},function(t,e,n){"use strict";var i,s;i=[n(50)],void 0===(s=function(t){return t.extend({endpoint:"",service:"",label:"",value:"",errorLabel:"",type:"json",fillOptions:function(){var t=this.options.schema.input.computedOptions||{};Object.keys(t).filter(function(t){return!this.options[t]}.bind(this)).length?this.options.context.hideField(this.options.name):(this.options.context.showField(this.options.name),this.elements.input.hide(),this.addSpinner(),this.spinner.start(),this.requestOptions(this.options.ucid))},requestOptions:function(t){var e={method:"get",cache:0,service:this.service,type:this.type,connect:t,onComplete:this.onListLoaded.bind(this)};this.doOauthRequest(this.getEndpoint(),e)},getEndpoint:function(){return this.endpoint},isCompliant:function(t){var e=this.getData(t);return e&&e.length>0},getData:function(t){return t},getFormatedOptions:function(t){return t.map(function(t){return{value:t[this.value],label:t[this.label]}},this)},onListLoaded:function(t){this.spinner.stop(),this.elements.input.show();var e=[];if(this.isCompliant(t)){var n=this.getData(t);e=this.getFormatedOptions(n),this.elements.input.putOptions(e),1===e.length&&this.elements.input.setValue(e[0].value),this.options.value&&this.elements.input.setValue(this.options.value)}else this.buildErrorSelect(this.errorLabel)}})}.apply(e,i))||(t.exports=s)},function(t,e,n){"use strict";var i,s;i=[n(0),n(5)],void 0===(s=function(t,e){var n=t.h,i=e.extend({name:"nv-analyze-step-section",init:function(t){this._parent(t),this.state={closed:!1}},render:function(t,e){var i=void 0===t.closed?e.closed:t.closed;return n("div",{class:this.getClassNames()},n("div",{class:this.getClassNames("-title"),style:{display:"flex",cursor:t.togglable?"pointer":"default"},onClick:t.togglable&&function(){t.onToggle&&t.onToggle(i),this.setState(function(t){return{closed:!t.closed}})}.bind(this)},n("div",{style:{flex:1}},t.title),t.togglable&&n("div",{class:"uwa-icon",color:"#aaa","data-icon":i?"l":"j"})),!i&&n("div",{class:this.getClassNames("-content"),style:t.style},t.children))}});return i.Item=e.extend({name:"nv-analyze-step-section-item",render:function(t){return n("div",{class:this.getClassNames()+(t.class?" "+t.class:""),style:t.style},t.title&&n("div",{class:this.getClassNames("-title")},t.title),n("div",{class:this.getClassNames("-content")+(t.innerClass?" "+t.innerClass:"")},t.children))}}),i}.apply(e,i))||(t.exports=s)},function(t,e,n){"use strict";var i,s;i=[n(1),n(15),n(2)],void 0===(s=function(t,e,n){var i={_getTrackers:function(){return window._gat&&window._gat._getTrackers&&window._gat._getTrackers()||[]},log:function(e,i,s){var o={userId:n.User.id,pageId:n.Page.id,brand:n.NPD?n.NPD.brand:null},a=n.getActiveProduct(),r=a?("TYPE_VIP"===a.type?"vip":"premium")+(a.trial?"-trial":a.gift?"-gift":""):"basic";o[r]=!0,"object"==typeof s&&(o=t.extend(o,s)),o=JSON.stringify(o),this._getTrackers().forEach(function(t){t._trackEvent(e,i,o)})},bindClick:function(t,n,i,s){var o,a;if("string"!=typeof t){for(a=0,o=t.length;a<o;a+=1)this.bindClick(t[a],n,i,s);return this}return(t=document.getElementById(t))&&e.addEvent.call(t,"click",this.log.bind(this,n,i,s)),this}};return App.Tracking=i,i}.apply(e,i))||(t.exports=s)},function(t,e,n){"use strict";var i,s;i=[n(1),n(2),n(44),n(54)],void 0===(s=function(t,e,n){var i=["sunday","monday","tuesday","wednesday","thursday","friday","saturday"],s=["January","February","March","April","May","June","July","August","September","October","November","December"],o=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],a=["Q1","Q2","Q3","Q4"],r={compareTo:function(t,e){return t.getTime()<e.getTime()?-1:t.getTime()>e.getTime()?1:t.getTime()===e.getTime()?0:void 0},equals:function(t,e){return 0===r.compareTo(t,e)},isAfter:function(t,e){return 1===r.compareTo(t,e)},isBefore:function(t,e){return-1===r.compareTo(t,e)},set:function(t,e){var n,i,s,o;if(2===e.length)i=e[0],s=e[1],"day"===i&&(i="date"),t[o="set"+i.ucfirst()]&&t[o](s);else if(1===e.length&&"object"==typeof e[0])for(i in n=e[0])n.hasOwnProperty(i)&&t[o="set"+i.ucfirst()]&&t[o](n[i]);return t},getMillisecondsTo:function(t,e){return e.getTime()-t.getTime()},getSecondsTo:function(t,e){return r.getMillisecondsTo(t,e)/1e3},getMinutesTo:function(t,e){return r.getSecondsTo(t,e)/60},getHoursTo:function(t,e){return r.getMinutesTo(t,e)/60},getDaysTo:function(t,e){return r.getHoursTo(t,e)/24},getShortMonthString:function(t){return o[t.getUTCMonth()]},getQuarterString:function(t){var e=Math.floor(t.getMonth()/3);return a[e]},getMonthString:function(t){return s[t.getMonth()]},getDayString:function(t){return i[t.getDate()]},clearTime:function(t){return t.setHours(0),t.setMinutes(0),t.setSeconds(0),t.setMilliseconds(0),t},today:function(){var t=new Date;return r.clearTime(t)},add:function(t,e){var n=e.toLowerCase().match(/(\+|-)?(\d+)(.*[^s])/),i=void 0===n[1]||"+"===n[1]?1:-1,s=parseInt(n[2],10),o=n[3],a={second:"Seconds",minute:"Minutes",hour:"Hours",day:"Date",week:"Date",month:"Month",year:"FullYear"}[o];return"week"===o&&(i*=7),a&&t["set"+a](t["get"+a]()+i*s),t},moveToDayOfWeek:function(t,e,n){var s;return s=(("string"==typeof e?-1!==i.indexOf(e.toLowerCase())?i.indexOf(e.toLowerCase()):0:e)-t.getDay()+7*(n||1))%7,t.addDays(0===s?s+=7*(n||1):s)},moveToNextDayOfWeek:function(t,e){return r.moveToDayOfWeek(t,e,1)},moveToPreviousDayOfWeek:function(t,e){return r.moveToDayOfWeek(t,e,-1)},moveToFirstDayOfMonth:function(t){return t.setDate(1),t},moveToLastDayOfMonth:function(t){return t.setDate(r.getDaysInMonth(t.getFullYear(),t.getMonth())),t},moveToFirstDayOfQuarter:function(t){var e=t.getMonth()/3+1;return t.setMonth(3*e-2),r.moveToFirstDayOfMonth(t)},moveToLastDayOfQuarter:function(t){var e=t.getMonth()/3+1;return t.setMonth(3*e),r.moveToLastDayOfMonth(t)},moveToFirstDayOfWeek:function(t){return r.isMonday(t)?t:r.moveToPreviousDayOfWeek(t,"monday")},moveToLastDayOfWeek:function(t){return r.isSunday(t)?t:r.moveToNextDayOfWeek(t,"sunday")},moveToFirstDayOfYear:function(t){return t.setMonth(0),r.moveToFirstDayOfMonth(t)},moveToLastDayOfYear:function(t){return t.setMonth(11),r.moveToLastDayOfMonth(t)},clone:function(t){return new Date(t.getTime())}};return["years","months","weeks","days","hours","minutes","seconds"].forEach(function(t){t=t.ucfirst(),r["add"+t]=function(e,n){return r.add(e,n.toString()+t)}}),i.forEach(function(t,e){var n="moveToNext"+t.ucfirst();r[n]=function(e){return r.moveToNextDayOfWeek(e,t)},n="moveToPrevious"+t.ucfirst(),r[n]=function(e){return r.moveToPreviousDayOfWeek(e,t)},n="is"+t.ucfirst(),r[n]=function(t){return t.getDay()===e}}),r.isLeapYear=function(t){return t%4==0&&t%100!=0||t%400==0},r.getDaysInMonth=function(t,e){return[31,r.isLeapYear(t)?29:28,31,30,31,30,31,31,30,31,30,31][e]},r.getRetentionPeriod=function(){if(e.NPD&&e.NPD.retentionPeriod)return e.NPD.retentionPeriod},r.isRetentionDate=function(t){return!(!e.NPD||!e.NPD.retentionPeriod)&&r.getRetentionPeriod()===t},r.getDefaultFrom=function(){return r.getRetentionPeriod()||0},r.formatDateForAPI=function(t,e){var n=r.parseDate(t,{end:e,skipRelativeFormats:!0});return n?n.strftime("%Y-%m-%d %H:%M:%S"):t},r.formatDateRangeForAPI=function(e,n){var i;e||(e=r.getDefaultFrom());try{i=new Date(e)}catch(t){}return(!i||t.is(i,"date")&&!i.getTimezoneOffset())&&(i=new Date),{from:r.formatDateForAPI(e),to:r.formatDateForAPI(n||"now",!0),utc_offset:-i.getTimezoneOffset()/60}},r.parseDate=function(e,n){if(t.is(e,"date"))return e;var i,s,o,a,l=!1,c=n&&n.utc,u=n&&n.end,h=n&&n.skipRelativeFormats;return"number"==typeof e?i=new Date(e):e.match(/^(\d{1,4})-(\d{1,2})-(\d{1,2})(?: (\d{1,2}):(\d{1,2})(?::(\d{1,2}))?)?$/)?(o=e.match(/^(\d{1,4})-(\d{1,2})-(\d{1,2})(?: (\d{1,2}):(\d{1,2})(?::(\d{1,2}))?)?$/),(i=new Date(0))[(a="set"+(c?"UTC":""))+"Seconds"](o[6]?Number(o[6]):u?59:0),i[a+"Minutes"](o[5]?Number(o[5]):u?59:0),i[a+"Hours"](o[4]?Number(o[4]):u?23:0),i[a+"Date"](Number(o[3])),i[a+"Month"](Number(o[2])-1),i[a+"FullYear"](Number(o[1])),i=new Date(i),l=!0):e.match(/^\d{10}$/)?i=new Date(1e3*e):h||(e.match(/^now$/i)?(i=new Date,l=!0):e.match(/^today$/i)?i=r.today():e.match(/^tomorrow$/i)?(i=r.addDays(r.today(),1),l=!0):e.match(/^-(\d+)([dmyw])/)?(i="d"===(s=e.match(/^-(\d+)([dmyw])/))[2]?1:"m"===s[2]?30:"w"===s[2]?7:365,i=new Date(Date.now()-864e5*s[1]*i)):e.match(/^\+(\d+)([dmyw])/)&&(i="d"===(s=e.match(/^\+(\d+)([dmyw])/))[2]?1:"m"===s[2]?30:"w"===s[2]?7:365,i=new Date(Date.now()+864e5*s[1]*i))),i&&!l&&(u?(i.setHours(23),i.setMinutes(59),i.setSeconds(59)):(i.setHours(0),i.setMinutes(0),i.setSeconds(0))),i},r.formatDateForDisplay=function(t){if("now"===t)return _("now");if("tomorrow"===t)return _("tomorrow");if("yesterday"===t)return _("yesterday");var e=r.parseDate(t,{skipRelativeFormats:!0});return e?n.formatLocalizedDate(e,"date"):t},r.formatDateRangeForDisplay=function(t,e){var n=r.isRetentionDate(t);return!t||!n||e&&"now"!==e?(!t||t&&n)&&e?_("your retention to {0}").format(r.formatDateForDisplay(e)):t&&e?_("from {0} to {1}").format(r.formatDateForDisplay(t),r.formatDateForDisplay(e)):t?_("from {0} to now").format(r.formatDateForDisplay(t)):_("your retention"):_("your retention")},r.pad=function(t){return t<10?"0"+t:t},r.ISODateString=function(t,e){var n=r.pad,i=e?"UTC":"",s=new Date(t),o=s["get"+i+"FullYear"]()+"-"+n(s["get"+i+"Month"]()+1)+"-"+n(s["get"+i+"Date"]());return isNaN(s.getTime())?"?":o},r.formatDateForPreferences=function(t){return r.parseDate(t).strftime("%Y-%m-%d %H:%M:%S")},r.formatDateForHumanQuery=function(t){return t.strftime("%Y-%m-%d")},r.getDatesFromRange=function(e,n){t.is(e,"date")&&"hourly"!==n&&(e=e.strftime("%Y-%m-%d"));var i=[e=new Date(e),r.clone(e)];switch(n){case"yearly":r.moveToFirstDayOfYear(i[0]),r.moveToLastDayOfYear(i[1]);break;case"monthly":r.moveToFirstDayOfMonth(i[0]),r.moveToLastDayOfMonth(i[1]);break;case"weekly":r.add(i[1],"6day")}return"hourly"===n?(i[0].setMinutes(0),i[0].setSeconds(0),i[1].setMinutes(59),i[1].setSeconds(59)):(r.clearTime(i[0]),i[1].setHours(23),i[1].setMinutes(59),i[1].setSeconds(59)),i},r.getDateForHighchart=function(t,e,n,i){var s="";switch(t=new Date(t),"hourly"!==e&&23===t.getHours()&&0===t.getMinutes()&&0===t.getSeconds()&&(t.setHours(0),t.setDate(t.getDate()+1)),e){case"hourly":s=n>1||i?t.strftime("%e %b{0} <br/>%Hh"):t.strftime("%Hh");break;case"daily":s=t.strftime("%e <br/>%b{0}");break;case"weekly":var o=r.getDatesFromRange(t,e);t=o[1],o[0].getFullYear()!==o[1].getFullYear()&&(i=!0),s=o[0].strftime("%e")+"/"+o[1].strftime("%e <br/>%b{0}");break;case"monthly":s=t.strftime("%b <br />%Y");break;case"yearly":s=t.strftime("%Y")}return s.format(i?" "+t.getFullYear():"")},r}.apply(e,i))||(t.exports=s)},function(t,e,n){var i=n(200)("wks"),s=n(126),o=n(28).Symbol,a="function"==typeof o;(t.exports=function(t){return i[t]||(i[t]=a&&o[t]||(a?o:s)("Symbol."+t))}).store=i},function(t,e,n){"use strict";var i,s;i=[n(1),n(57),n(18),n(62),n(193),n(50),n(137)],void 0===(s=function(t,e,n,i,s,o,a){return o.extend({name:"schemaform-oauthaccount",service:"",serviceName:null,display_extra_key:"name",value_key:"id",_buildThirdPartyConnect:function(e){var i=this,o=e?_("Add a {0} account now"):_("Connect another {0} account"),r=t.createElement("a",{class:"add-account uwa-icon"+(e?" first-account":""),"data-icon":"3",title:_("Add account"),text:o.format(i.serviceName?i.serviceName:n.ucfirst(i.service))});return a.getAuthenticateUrl(this.service).done(function(t){s.bindTo(r,t,i.name,function(){i.fillOptions(!0)},i.service)}),r},_buildThirdPartyConnectAgreement:function(){var e;if("twitter"===this.service){var n=_("By connecting to Twitter, you agree to comply at all time with Twitter’s Terms of Service and with Section VII.A User Protection of the Twitter Developer Agreement published at"),i=t.createElement("a",{class:"twitter-agreement-link",href:"https://developer.twitter.com/en/developer-terms/agreement",text:"https://developer.twitter.com/en/developer-terms/agreement"});e=t.createElement("div",{class:"uwa-schemaform-message",html:[n," ",i]})}return e},_showConfirmationModal:function(t){new i({titleText:_("Confirmation"),message:_("Deleting this account will affect all services linked on the platform.")+"<br />"+n.format(_('Unlink the account "{0}" ?'),this.formatOptionLabel(t).escapeHTML()),discard:!1,confirm:{text:_("Confirm")},events:{onConfirm:this.onDeleteTokenConfirm.bind(this,t)}}).show()},fillOptions:function(n,i){var s,o=[];i=i||function(){},this.elements.input.hide(),this.removeAccountContainer?this.removeAccountContainer.empty(!0):this.elements.container.addContent(this.removeAccountContainer=t.createElement("div",{class:"remove-account-container"})),this.removeAccountContainer.hide(),this.addAccountContainer?this.addAccountContainer.empty():this.elements.container.addContent(this.addAccountContainer=t.createElement("div",{class:"add-account-container"})),this.thirdPartyElement&&this.thirdPartyElement.remove(),this.addSpinner(),this.spinner.start(),a.getTokens(this.service).done(function(a){(s=a.sort(function(t,e){return t.createdAt>e.createdAt?0:1})).forEach(function(t){o.push({value:this.formatOptionValue(t),label:this.formatOptionLabel(t)})},this),this.elements.input.putOptions(o),this.removeAccountContainer.addContent(this.thirdPartyRemoveEl=t.createElement("a",{class:"remove-account uwa-icon","data-icon":"Ź",title:_("Remove account")})),this.thirdPartyRemoveEl.addEvent("click",function(){var t=Number(this.elements.input.getValue()[0]),n=e.detect(s,function(e){return Number(e.id)===t});this._showConfirmationModal(n)}.bind(this)),this.addAccountContainer.addContent(this.thirdPartyElement=this._buildThirdPartyConnect(!s.length),this._buildThirdPartyConnectAgreement()),this.spinner.stop(),s.length>0&&(this.elements.input.show(),this.elements.input.addEvent("onChange",function(){this.elements.input.getValue()[0]?this.removeAccountContainer.show():this.removeAccountContainer.hide()}.bind(this)));var r=o.some(function(t){return t.value===""+this.options.value}.bind(this));this.options.value&&r?this.elements.input.setValue(""+this.options.value):1===s.length&&this.elements.input.setValue(""+this.formatOptionValue(s[0])),n&&0===s.length&&this.buildErrorSelect(_("We have not found any account")),i()}.bind(this))},getDisplayValue:function(){return'"'+this.elements.input._getSelectedOptions()[0].getText()+'"'},formatOptionValue:function(t){return""+t[this.value_key]},formatOptionLabel:function(t){return t.extra[this.display_extra_key]},onDeleteTokenConfirm:function(t){a.unlink(t).done(function(){this.elements.input.putOptions({value:this.formatOptionValue(t)}),this.fillOptions(!1)}.bind(this))}})}.apply(e,i))||(t.exports=s)},function(t,e,n){var i,s;i=[n(1),n(9),n(171),n(13)],void 0===(s=function(t,e,n,i){"use strict";var s;function o(t,e,i){var s=t._dispatchers,o=s&&s[e]||new n;return i||(s||(s=t._dispatchers=Object.create(null)),s[e]=o),o}return s=e.extend({dispatchEvent:function(t,e,n){var s,a;return void 0===n&&(n=this),e=i.splat(e),s=o(this,t),"function"==typeof this[t]&&s.addOnce(this[t],n,1),"onAnyEvent"!==t&&this.hasEvent("onAnyEvent")?(a=o(this,"onAnyEvent"),"function"==typeof this.onAnyEvent&&a.addOnce(this.onAnyEvent,n),a.addOnce(function(){s.dispatch(e,n)}),a.dispatch([t].concat(e),n)):s.dispatch(e,n),this},dispatchAsEventListener:function(t,e,n){var s=this;return void 0===n&&(n=s),e=i.splat(e),function(i){s.dispatchEvent(t,[i].concat(e),n)}},addEvent:function(t,e,n,i){return o(this,t).add(e,n,i),this},addEventOnce:function(t,e,n,i){return o(this,t).addOnce(e,n,i),this},addEvents:function(t,e,n){var i;for(i in t)t.hasOwnProperty(i)&&this.addEvent(i,t[i],e,n);return this},removeEvent:function(t,e,n){var i,s=this._dispatchers,o=s&&s[t];if(t)o&&(e?o.remove(e,n):o.removeAll(n),0===o.getNumListeners()&&delete s[t]);else for(i in s)this.removeEvent(i,e,n);return this},removeEvents:function(t){var e;if(t)for(e in t)t.hasOwnProperty(e)&&this.removeEvent(e,t[e]);else this.removeEvent();return this},hasEvent:function(t,e){var n,i=this;return n=function(t){return!!(o(i,t,!0).getNumListeners()||!e&&i[t])},(t?[t]:Object.keys(i._dispatchers||{})).some(n)}}),t.namespace("Events",s,e)}.apply(e,i))||(t.exports=s)},function(t,e,n){"use strict";var i,s;i=[n(1),n(9),n(4),n(46),n(672)],void 0===(s=function(t,e,n,i,s){function o(t){return function(){return this._data[t]}}function a(t){return function(){var e=this._data[t];if(e)return new Date(1e3*e)}}function r(t,e){return e.map(function(e){return e instanceof s?e.getSource()!==t?e.cloneWith({source:t}):e:new s(t,e)})}return e.extend({defaults:{id:"",query:"",availableFacets:[],facets:[],title:"",type:"",visible:!1,displayableQuery:"",description:"",icon:"more",from:"",to:"",sampling:void 0,range:"daily",timezone:1,readOnly:!1,author:""},init:function(e){var i=t.merge(Object.assign({},e),function(t){for(var e={};t;)if((t=Object.getPrototypeOf(t))&&t.hasOwnProperty("defaults"))for(var n in t.defaults)e.hasOwnProperty(n)||(e[n]=t.defaults[n]);return e}(this));this.cid=n.uniqueID(),i.availableFacets=r(this,i.availableFacets);var s=r(this,i.facets),o={};i.availableFacets.forEach(function(t,e){o[t.getName()]=e}),i.facets=s.sort(function(t,e){return o[t.getName()]-o[e.getName()]}),this._data=i},cloneWith:function(t){return new this.constructor(Object.assign({},this._data,t))},getId:o("id"),getQuery:o("query"),getAvailableFacets:o("availableFacets"),getFacets:o("facets"),getTitle:o("title"),getType:o("type"),getIcon:o("icon"),isVisible:o("visible"),getDescription:o("description"),getStatus:o("status"),getFrom:o("from"),getFromDate:a("fromTimestamp"),getTo:o("to"),getToDate:a("toTimestamp"),getActivatedAtDate:a("activatedAt"),getUpdateAtDate:a("updateAt"),getComputedAtDate:a("computedAt"),getSampling:o("sampling"),getResultSampling:o("resultSampling"),getRange:o("range"),getTimezone:o("timezone"),getAuthor:o("author"),isReadOnly:o("readOnly"),getDisplayableQuery:function(){return this._data.displayableQuery},getQuantitativeAvailableFacets:function(){return this.getAvailableFacets().filter(function(t){return t.isQuantitativeData()})},getTimeAvailableFacets:function(){return this.getAvailableFacets().filter(function(t){return t.isTimeData()})},getDisplayableSuggestion:function(){return this.getType()},toJson:function(){return{id:this.getId(),type:this.getType(),displayableQuery:this.getDisplayableQuery(),facets:this.getFacets().map(function(t){return t.toJson()})}}})}.apply(e,i))||(t.exports=s)},function(t,e,n){"use strict";var i,s;i=[n(1),n(24),n(10),n(56),n(15),n(2)],void 0===(s=function(t,e,n,i,s,o){var a=s.create||t.createElement;return n.extend(e,{defaultOptions:{autostart:!0,delay:250,size:40,color:o.isIn3DDashboard()?"#3D6680":"#F5F5F5"},init:function(t){this._parent(t),this.buildSpinner(),this.options.autostart&&this.start()},start:function(){var t=this.options.delay;this._started||(this._started=!0,0!==t?this.setDelayed("show",function(){this.show()},t):this.show())},stop:function(){this.clearDelayed("show"),this._started=!1,this.hide()},toggle:function(e){!1===t.is(e)&&(e=!this._started),e?this.start():this.stop()},toElement:function(){return this.elements.container},buildSpinner:function(){var t=a("div",{class:"nv-spinner"}),e=this.options.size/10,n=this.options.size-2*e,s=i.parse(this.options.color),o=s.cloneWith({alpha:.2});t.setStyle("border-color",o.toRGBString()),t.setStyle("border-left-color",s.toRGBString()),t.setStyle("border-width",e+"px"),t.setStyle("width",n+"px"),t.setStyle("height",n+"px"),this.elements.container=a("div",{class:"nv-ui-spinner"}).setHTML(t),this.hide()}})}.apply(e,i))||(t.exports=s)},function(t,e,n){var i=n(91),s=Math.min;t.exports=function(t){return t>0?s(i(t),9007199254740991):0}},function(t,e,n){var i,s;i=[n(1),n(18),n(9),n(22)],void 0===(s=function(t,e,n,i){"use strict";var s;return s=n.extend(i,{init:function(t){this.setOptions(t)},getSuggestions:function(){throw new Error("Not implemented")},renderSuggestions:function(t){return{tag:"div",class:"category uwa-icon magnifying-glass",html:t.map(function(t){return{tag:"div",class:"suggestion",html:this.renderSuggestion(t)}},this)}},renderSuggestion:function(t){return e.escapeHTML(t.displayValue||t.fullValue||" ")}}),t.namespace("Controls/AutocompleteAdaptors/Abstract",s,t)}.apply(e,i))||(t.exports=s)},function(t,e,n){"use strict";var i,s;i=[n(1),n(4),n(2)],void 0===(s=function(t,e,n){var i={year:31536e6,month:2592e6,week:6048e5,day:864e5,d:864e5,hour:36e5,h:36e5,minute:6e4,m:6e4,second:1e3,s:1e3,millisecond:1,ms:1},s={year:1/0,month:11,week:3,day:6,d:6,hour:22,h:22,minute:45,m:45,second:45,s:45,millisecond:800,ms:800};function o(t){if(i[t]||"s"!==t.charAt(t.length-1)||(t=t.slice(0,-1)),!i[t])throw new Error("Invalid unit "+t);return t}var a=function(){var t,e,n,s,a=0;for(t=0,e=arguments.length;t<e;t++)"string"==typeof(n=arguments[t])?(s=n.match(/[a-z]*$/)[0]||"ms",n=parseFloat(n,10)):"string"==typeof(s=arguments[t+1])&&t++,a+=n*i[o(s)];return a};function r(t,e,n){var i;if("day"===(n=o(n))||"week"===n)i=Math.round((new Date(e.getFullYear(),e.getMonth(),e.getDate())-new Date(t.getFullYear(),t.getMonth(),t.getDate()))/a(1,n));else if("year"===n||"month"===n)i=e.getFullYear()-t.getFullYear(),"month"===n&&(i=12*i+(e.getMonth()-t.getMonth()));else{var s=e-t;i=Math[s<0?"ceil":"floor"](s/a(1,n))}return i}var l,c=function(){var e={fallback:{now:_("just now"),secondPast:_("just now"),secondsPast:_("{0} seconds ago"),minutePast:_("a minute ago"),minutesPast:_("{0} minutes ago"),hourPast:_("an hour ago"),hoursPast:_("{0} hours ago"),dayPast:_("yesterday"),daysPast:_("{0} days ago"),weekPast:_("last week"),weeksPast:_("{0} weeks ago"),monthPast:_("last month"),monthsPast:_("{0} months ago"),yearPast:_("last year"),yearsPast:_("{0} years ago"),secondFuture:_("just now"),secondsFuture:_("{0} seconds from now"),minuteFuture:_("a minute from now"),minutesFuture:_("{0} minutes from now"),hourFuture:_("an hour from now"),hoursFuture:_("{0} hours from now"),dayFuture:_("tomorrow"),daysFuture:_("{0} days from now"),weekFuture:_("next week"),weeksFuture:_("{0} weeks from now"),monthFuture:_("next month"),monthsFuture:_("{0} months from now"),yearFuture:_("next year"),yearsFuture:_("{0} years from now")},abbr:{secondFuture:_("now"),secondsFuture:_("in the future"),secondPast:_("now"),secondsPast:_("now"),minutePast:_("{0} min"),minutesPast:_("{0} min"),hourPast:["time"],hoursPast:["time"],dayPast:["date",{month:"short",year:!1}],daysPast:["date",{month:"short",year:!1}],dayFuture:["date",{month:"short",year:!1}],daysFuture:["date",{month:"short",year:!1}],weekFuture:["date",{month:"short",year:"2-digit"}],weeksFuture:["date",{month:"short",year:"2-digit"}],weekPast:["date",{month:"short",year:"2-digit"}],weeksPast:["date",{month:"short",year:"2-digit"}],monthFuture:["date",{month:"short",year:"2-digit"}],monthsFuture:["date",{month:"short",year:"2-digit"}],monthPast:["date",{month:"short",year:"2-digit"}],monthsPast:["date",{month:"short",year:"2-digit"}],yearPast:["date",{month:"short",year:"2-digit"}],yearsPast:["date",{month:"short",year:"2-digit"}],yearFuture:["date",{month:"short",year:"2-digit"}],yearsFuture:["date",{month:"short",year:"2-digit"}]}},n=["second","minute","hour","day","week","month","year"];return function(i,o,a){var l,c;a||(a=new Date),o?t.is(o,"string")&&(o=e[o]):o=e.fallback;var u,h,d=i>=a?"Future":"Past",m=!1;for(u=0,h=n.length;u<h&&!m;u++)l=n[u],(c=Math.abs(r(a,i,l)))<s[l]&&(m=c>1?o[l+"s"+d]||o[l+"s"]:o[l+d]||o[l]);return m||(m=o.now||_("now")),Array.isArray(m)?p.apply(null,[i].concat(m)):m.format(c)}}(),u=function(){var e="data-relative-time";function n(t){var n=t.getAttribute(e);if(n){n=n.split(":");var s=c(new Date(+n[0]),n[1]);s!==t.getText()&&t.setText(s)}else clearInterval(i)}var i=setInterval(function(){t.extendElement(document.body).getElements("["+e+"]").forEach(n)},a("10s"));return function(t,i,s){t.setAttribute(e,i.getTime()+(s?":"+s:"")),n(t)}}(),h="numeric",d={"date-time":{fn:"toLocaleString",defaults:{day:h,month:h,year:h,minute:h,hour:h}},date:{fn:"toLocaleDateString",defaults:{day:h,month:h,year:h}},time:{fn:"toLocaleTimeString",defaults:{minute:h,hour:h}}};function p(t,e,i){if("object"==typeof e)i=e,e="date-time";else if(void 0===e)e="date-time";else if(!d.hasOwnProperty(e))throw new Error("Invalid type");var s=d[e];for(var o in i=Object.assign({},s.defaults,i))i[o]||delete i[o];return t[s.fn](function(){if(void 0===l)if(n.Globalization&&n.Globalization.userLanguage)try{var t=n.Globalization.userLanguage.replace("_","-");(new Date).toLocaleString(t),l=t}catch(t){l=null}else l=null;return l}(),i)}var m={formatRelativeTime:c,formatLocalizedDate:p,bindRelativeTime:u,countBetweenDates:r,formatCountdown:function(t){var e=(t-Date.now())/a("1d");return e<0?0:Math.floor(e+1)},toMs:a,__tests__:{countBetweenDates:r}};return e.Time=m,m}.apply(e,i))||(t.exports=s)},function(t,e,n){"use strict";var i,s;i=[n(2),n(351),n(6)],void 0===(s=function(t,e,n){var i=e.types.string,s=e.types.bool,o=e.types.number,a=e.types.array,r={smartreader:{all:i,allView:i,hideSidebar:s,lastSelection:i,onlyUnread:s,recentlyread:i,recentlyreadView:i,saved:i,savedView:i,hideSidebarRight:s,slow:i,slowView:i,view:i},adaptArticleWidth:s,articleWidth:o,audioplayerStatus:e.types.json,bodyBackground:i,bodyCenter:s,bodyColor:i,bodyFixed:s,compactMode:s,displayAnalyze:s,dontPreload:s,feedreaderMaximized:s,headerAlignment:i,headerBackground:i,headerCenter:s,headerColor:i,headerHeight:o,headerTextColor:i,hideFavIcons:s,hidePublicTabs:s,hideStaticSections:s,keyboardNav:s,lastSpringCleaningCheck:o,selectedTabLabels:a,showOnlyUnreadFeeds:s,showSidebarRight:i,showTitle:s,sticky:a,themeUrl:i,topic:i,wizardryTrialTwoDisplayed:s,wizardryTrialSevenDisplayed:s,wizardryLastDaysDisplayed:s,feedreaderMenuWidth:o},l={keyboardNav:!0},c=e.singleton({options:{defaults:{}},init:function(e){this._parent(r,{defaults:l}),this.setRaw(t.Page.defaultPreferences),this.setRaw(e)},_save:function(e){if(!t.Page.isPublic||t.Page.userId===t.User.id)return n.myDashboardSavePrefs(e).done()}});return App.PageSettings=c,c}.apply(e,i))||(t.exports=s)},function(t,e,n){"use strict";var i,s;i=[n(1),n(56),n(4),n(36)],void 0===(s=function(t,e,n,i){var s={getNbDays:function(t,e){var n=2;try{n=i.parseDate(e,{end:!0}).getTime()-i.parseDate(t,{end:!1}).getTime(),n/=864e5}catch(t){}return n},getNextRange:function(t){var e;switch(t){case"hourly":e="daily";break;case"daily":e="weekly";break;case"weekly":e="monthly";break;case"monthly":e="yearly"}return e},getRangeValues:function(){return[{value:"hourly",label:_("Hourly")},{value:"daily",label:_("Daily")},{value:"weekly",label:_("Weekly")},{value:"monthly",label:_("Monthly")},{value:"yearly",label:_("Yearly")}]},getSamplingValues:function(){return[{value:"auto",label:_("Auto")},{value:"100",label:_("All")},{value:"10",label:_("1/10")},{value:"1",label:_("1/100")},{value:"0.1",label:_("1/1000")}]},getSamplingFromValue:function(t){return s.getSamplingValues().detect(function(e){return e.value===String(t)})},isShared:function(t){return!!t.environment.obj&&t.environment.obj.isShared()},sort:function(e,n){var i={randomize:function(){return Math.random()},bylabel:function(t){return t[n.label]},bymethod:function(t){return t["get"+n.label.ucfirst()]()}}[(n=t.merge(n||{},{type:"bylabel",label:"value",order:"asc"})).type],s="asc"===n.order?1:-1;return e.sort(function(t,n){var o=i(t),a=i(n);return o<a?-s:o>a?s:e.indexOf(t)<e.indexOf(n)?s:-s}),e},sortFacets:function(t){t.sort(function(e,n){return e.getIndex()===n.getIndex()?t.indexOf(e)-t.indexOf(n):e.getIndex()-n.getIndex()})},getSerieWithoutNull:function(t,e){var n,i,s,o,a,r,l=[];for(o=(s=t.filter(function(t){return null!==t.y}))[0],i=e?s.length:t.length,n=0;n<i;n++)(r=t[n])&&(null!==r.y?(o=r,l.push(r)):o&&((a={}).x=r.x,a.plotX=r.plotX,a.y=o.y,a.plotY=o.plotY,l.push(a)));return l},parseSourcesPreference:function(t){var e=n.tryJSONParse(t);if(e)return e.forEach(function(t){t.facets.forEach(function(t){t.name=String(t.name)})}),e},brightenColor:function(t,n){n=n||.7;var i=e.parse(t);return i?(i=i.toObject(),e.fromRGB(i.r*n,i.g*n,i.b*n,i.alpha).toRGBString()):t},exponentialMovingAverage:function(t){var e,n=2/(1+t.length),i=t[0].formatStatForHighchart();i.y=(t[0].getValue()+t[1].getValue())/2;var s=[i];for(e=1;e<t.length;e++)(i=t[e].formatStatForHighchart()).y=n*t[e-1].getValue()+(1-n)*s[e-1].y,s.push(i);return s},trend:function(t){var e=t[t.length-1],n=t[0];return(e.y-n.y)/Math.abs(n.y)*100},getLineIntersection:function(t,e,i,s){var o,a,r,l,c=Number(t.x),u=t.y,h=Number(e.x),d=e.y,p=Number(i.x),m=i.y;o=h-c;var f=((r=Number(s.x)-p)*(u-m)-(l=s.y-m)*(c-p))/(-r*(a=d-u)+o*l);return{x:n.round(c+f*o),y:u+f*a}}};return s}.apply(e,i))||(t.exports=s)},function(t,e){var n=t.exports={version:"2.6.9"};"number"==typeof __e&&(__e=n)},function(t,e,n){t.exports=!n(29)(function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a})},function(t,e,n){var i=n(30),s=n(313),o=n(112),a=Object.defineProperty;e.f=n(48)?Object.defineProperty:function(t,e,n){if(i(t),e=o(e,!0),i(n),s)try{return a(t,e,n)}catch(t){}if("get"in n||"set"in n)throw TypeError("Accessors not supported!");return"value"in n&&(t[e]=n.value),t}},function(t,e,n){"use strict";var i,s;i=[n(1),n(8),n(32)],void 0===(s=function(t,e,n){return n.extend({getContent:function(){return this.elements.container||(this.elements.container=t.createElement("div",{class:this.getClassNames()}),this.elements.input=new e.Select(this.getInputOptions(this.options)),this.elements.input.inject(this.elements.container),this.handleWildCard(this.options.schema),this.fillOptions()),this.elements.container},handleWildCard:function(t){var e={};(e=t.wildcard?{label:t.wildcardLabel?t.wildcardLabel:"Any",value:"*"}:{label:"Choose one",value:""},this.options.options)&&(this.options.options.every(function(t){return!t.selected})&&(e.selected=!0));this.elements.input.putOptions(e)},buildErrorSelect:function(t){this.elements.input.putOptions({value:"",label:t},!0),this.setValue("")},fillOptions:function(){this.options.options&&this.elements.input.putOptions(this.options.options)},setValue:function(t){this.elements.input.setValue(t)},getValue:function(){return this.elements.input.getValue()[0]},getDisplayValue:function(){return this.elements.input._getSelectedOptions()[0].getText()}})}.apply(e,i))||(t.exports=s)},function(t,e,n){"use strict";var i,s;i=[n(20),n(1),n(2),n(164),n(45),n(21),n(4),n(44),n(17),n(188),n(27),n(107),n(232)],void 0===(s=function(t,e,i,s,o,a,r,l,c,u,h,d,p){var m={getRandomColor:function(t){var e,n=Object.keys(p),i=Math.floor(Math.random()*(n.length-1)),s=Math.floor(Math.random()*(p.green.length-1));if(e=p[n[i]][s],!t||e!==t)return e;m.getRandomColor(e)},cleanDate:function(t,e){return t instanceof Date&&"hourly"!==e&&23===t.getHours()&&0===t.getMinutes()&&0===t.getSeconds()&&(t.setHours(0),t.setDate(t.getDate()+1)),t},getNbDays:function(t,e){var n=2;try{n=d.parseDate(e,{end:!0}).getTime()-d.parseDate(t,{end:!1}).getTime(),n/=864e5}catch(t){}return n},getNbDaysFromItemList:function(t){t.getItems&&(t=t.getItems());var e=t[0],n=t[t.length-1];return e&&Math.ceil((e.getPublishTimestamp()-n.getPublishTimestamp())/86400)||1},getNextRange:function(t){var e;switch(t){case"hourly":e="daily";break;case"daily":e="weekly";break;case"weekly":e="monthly";break;case"monthly":e="yearly"}return e},numberFormat:function(t){return s.numberFormat(t,0,"."," ")},getFromObjectsArray:function(t,e,n){var i,s,o=t.length;for(i=0;i<o;i+=1)if((s=t[i])[e]===n)return s},getFirstFromObject:function(t){var e;for(e in t)if(t.hasOwnProperty(e))return{key:e,value:t[e]}},brightenColor:function(t,e){return s.Color(t).brighten(e||-.3).get()},getDataType:function(t,e){return t.filter(function(t){return t.typeData===e})},getSerieWithoutNull:function(t,e){var n,i,s,o,a,r,l=[];for(o=(s=t.filter(function(t){return null!==t.y}))[0],i=e?s[s.length-1].x+1:t.length,n=0;n<i;n++)(r=t[n])&&(null!==r.y?(o=r,l.push(r)):o&&((a={}).x=r.x,a.plotX=r.plotX,a.y=o.y,a.plotY=o.plotY,l.push(a)));return l},getStatsWithoutNull:function(t){var e,n={},i=Object.keys(t);return i.some(function(n){if(null!==t[n])return e=t[n],!0}),i.map(function(i){var s=t[i];null!==s?(e=s,n[i]=s):e&&(n[i]=e)}),n},getSerieWithoutHidden:function(t,e){return t.filter(function(t,n){return!e[n].hideSerie})},trend:function(t){var e=Object.keys(t),n=e[e.length-1],i=t[e[0]];return(t[n]-i)/Math.abs(i)*100},exponentialMovingAverage:function(t){var e,n=Object.keys(t),i=2/(1+n.length),s={};for(s[n[0]]=(t[n[0]]+t[n[1]])/2,e=1;e<n.length;e++)s[n[e]]=i*t[n[e-1]]+(1-i)*s[n[e-1]];return s},getCoeff:function(t,e){var n,i=0,s=0,o=0,a=0,r=0,l=0,c=0;return Object.keys(t).forEach(function(e,n){null!==t[e]&&(l=n,c=t[e],i+=l,s+=c,a+=l*l,o+=l*c,r++)}),{m:n=(r*o-i*s)/(r*a-i*i),b:s/r-n*i/r,serieName:e}},getIntersection:function(t,e,n,i){var s,o,a,l,c=t[e],u=this.getInterval(n),h=[],p=Object.keys(n);for(s=0;s<t.length;s++)o=t[s],s!==e&&o.m&&o.b&&(a=(c.b-o.b)/(o.m-c.m),l=c.m*a+c.b,(a=r.round(1e3*(Number(p[0])+u*a)))>-1e13&&a<1e15&&h.push({x:a/1e3,y:r.round(l,2),category:d.getDateForHighchart(a,i,"",!0).stripTags(),serieName:o.serieName}));return h},linearRegression:function(t){var e,n,i,s=Object.keys(t),o={},a=this.getCoeff(t);for(n=a.m,i=a.b,e=0;e<s.length;e++)o[s[e]]=e*n+i;return o},getNextDate:function(t,e){var n,i=new Date(1e3*t);switch(e){case"hourly":n=i.setHours(i.getHours()+1);break;case"daily":n=i.setUTCDate(i.getUTCDate()+1);break;case"weekly":n=i.setUTCDate(i.getUTCDate()+7);break;case"monthly":n=i.setUTCMonth(i.getUTCMonth()+1);break;case"yearly":n=i.setUTCFullYear(i.getUTCFullYear()+1)}return n},getInterval:function(t){var e=Object.keys(t);return Number(e[1])-Number(e[0])},setWidgetPreferences:function(t,e){var n,i;for(n in t)t.hasOwnProperty(n)&&((i=e.getPreference(n)).type=t[n],e.addPreference(i))},getPreferenceAsArray:function(t,n,i){var s=t.getValue(n);return s=s?e.is(s,"array")?s:s.split(","):[],i&&(s=s.map(Number)),s},getMinMax:function(t){var e,n,i=[];function s(t){return t?t.y:null}for(e=0,n=t.length;e<n;e++)i.push.apply(i,t[e].map(s));return i=i.filter(function(t){return null!==t}),{min:Math.min.apply(null,i),max:Math.max.apply(null,i)}},pivotWidgetData:function(t){return{id:c.getFromWidget(t).getId(),data:t.data,widgetBody:t.body,widgetMode:t.getValue("widgetMode"),mainView:t.getValue("mainView"),date_to:t.getValue("date_to"),date_from:t.getValue("date_from"),range:t.getValue("range"),names:t.getValue("names"),title:t.getTitle(),readOnly:t.readOnly||m.isShared(t),x3dPlatformId:t.getValue("x3dPlatformId")}},addAnalyzeMenu:function(t,s){if(!i.isAloneEnvironment()){var r=a.getFocused();!r||i.getActiveProduct({type:"TYPE_VIP"})&&!o.get("displayAnalyze")||a.isReadOnly(r)||t.getMenu("analyze")||u.hasSnapshot(t)||(t.setMenu({name:"analyze",icon:"charts",className:"hide-not-premium",help:_("Analyze"),onExecute:"onAnalyze"}),t.addEvent("onAnalyze",function(){if(i.isAllowed("socialpack")){var o=s(),a=m.pivotWidgetData(this),r=this.environment.html.body,l=this.environment.html.header;if(r.getElement(".in-app-overlay-pivots"))return r.getElement(".in-app-overlay-pivots").remove(),l.getElement('menu [data-name="analyze"]').removeClassName("active"),void r.setStyle("height","");a.date_to=a.data.date_to||"",a.date_from=a.data.date_from||"",n.e(0).then(function(){var i=[n(434)];(function(n){new n(e.extend({item:{query:{topic:""},label:"",key:""},stubWidget:a,container:r.getElement(".social-pack-widget")||r,shortTitle:!0,customTitle:t.getValue("title")||m.getPreferenceAsArray(t,"names")[0],activeButton:l.getElement('menu [data-name="analyze"]'),notes:this.notes},o,!0))}).bind(this).apply(null,i)}.bind(this)).catch(n.oe)}else this.environment.obj.toggleUpgradePremium()}))}},toggleAnalyzeMenu:function(t,e){var n=t.getMenu("analyze");n&&(n.visible=e,t.setMenu(n))},addExportMenu:function(t,e,n){var i=Object.assign({visible:!0},n);t.readOnly||t.getMenu("options/export")||u.hasSnapshot(t)||(t.setMenu({name:"options/export",icon:"download",label:_("Export"),onExecute:"onExport",visible:i.visible}),t.addEvent("onExport",e))},addDebugMenu:function(t){if(i.isDebug()){var e=t.body.getParent(),n=function(t){e.getParent(".module").setStyles({width:t?"514px":"auto",zIndex:t?14:"auto"})};t.readOnly||Boolean(t.getMenu("debug"))||(t.setMenu({name:"debug",icon:"bug",help:_("Debug")}),t.setMenu({name:"debug/normal",label:_("Normal View"),onExecute:"displayNormalView"}),t.setMenu({name:"debug/screenshot",label:_("Screenshot View"),onExecute:"displayScreenshotView"}),t.setMenu({name:"debug/emailing",label:_("Emailing View"),onExecute:"displayEmailingView"}),t.addEvent("displayNormalView",function(){e.removeClassName("screenshot"),e.removeClassName("emailing"),n(!1)}),t.addEvent("displayScreenshotView",function(){e.addClassName("screenshot"),e.removeClassName("emailing"),n(!1)}),t.addEvent("displayEmailingView",function(){e.addClassName("screenshot"),e.addClassName("emailing"),n(!0)}))}},getWidgetAnalyticsData:function(t){var e=c.getFromWidget(t);return e&&e.getAnalytics()||[]},isShared:function(t){return!!t.environment.obj&&t.environment.obj.isShared()},getFirstError:function(t){var e;return t.analytics&&(e=t.analytics.detect(function(t){return t.error})),e?e.error:""},displayLoading:function(t,e,n,i){n=n||("grey"===e?_("This is taking a little bit longer than usual.")+"<br/>"+_("Thanks for your patience."):_("Due to high traffic, our servers are slow at the moment.")+"<br/>"+_("We’re still working on it. Thanks for your patience.")),t.setContent({tag:"div",class:"uwa-message simple "+(i||""),html:n}).addClassName(e+"-spinner").removeClassName(("grey"===e?"red":"grey")+"-spinner")},handleError:function(t,e){var n=t.error,i=e.customError&&e.customError.code?"analytics_"+e.customError.code:"",s=n&&n.code||i,o=n&&n.message||e.customError&&e.customError.message;function a(t,n){window.console&&window.console.error("Error: Load error: "+(n||"(no message)")+(s?" (code: "+s+")":""));var i=h.getErrorMessage(s);(e[t+"Error"]||e.defaultError)(i)}800===s||"Date range is too wide (please do not exceed 1000 intervals)"===s?a("tooBig"):"analytics_403"===s?a("nonPremium"):a("analytics_71502"===s?"blockingTagError":"default",o)},setLoading:function(t,e){e.widget.body[t?"addClassName":"removeClassName"]("loading-socialPack"),t?(e.elm.body.hide(),e.elm.loader.show(),m.displayLoading(e.elm.loader,"grey",_("Loading..."),"loading-center"),e.widget.refreshLoadingGrey=setTimeout(function(){m.displayLoading(e.elm.loader,"grey")},8e3),e.widget.refreshLoadingRed=setTimeout(function(){m.displayLoading(e.elm.loader,"red"),e.refreshAnalytics&&e.refreshAnalytics()},3e4)):(clearTimeout(e.widget.refreshLoadingGrey),clearTimeout(e.widget.refreshLoadingRed),e.elm.body.show(),e.elm.loader.hide())},addBlacklistLink:function(t,n){var i=t&&t.getBlacklistCount();t&&i&&e.createElement("p",{text:(i>1?_("Hidden values"):_("Hidden value"))+" ("+i+")",class:"blacklist-link",events:{click:function(){t.openBlacklistOverlay({container:n})}}}).inject(n,"after")},convertStatsToSerieData:function(t){return Object.keys(t).map(function(e){return{y:t[e]}})},getCurvesDisplayState:function(t,e){var n=m.getPreferenceAsArray(t,"smoothed",!0),i=m.getPreferenceAsArray(t,"trend",!0),s=m.getPreferenceAsArray(t,"forecast",!0);return{smoothed:{isDisplayed:n[e]||0},trend:{isDisplayed:i[e]||0},forecast:{isDisplayed:s[e]||0}}},computeAdditionalCurvesData:function(t,e,n,i){var s=m.getStatsWithoutNull(t.stats),o=m.exponentialMovingAverage(s);t.smoothed={stats:o,value:m.trend(o)};var a=m.linearRegression(s);t.trend={stats:a,value:m.trend(a)},t.forecasts&&Object.assign(t.forecasts,{value:r.formatHumanNumber(t.forecasts.forecast,{decimalDigits:2})+" &plusmn;"+r.formatHumanNumber(t.forecasts.errors,{decimalDigits:2})}),t.intersections=m.getIntersection(e,n,s,i)},computeCoeffs:function(t){return t.map(function(t){return Object.keys(t.stats).length?m.getCoeff(m.getStatsWithoutNull(t.stats),t.name):{}})},getSerieName:function(t){return"*:*"===t.query.topic?t.query.context&&t.query.context.feed&&1===t.query.context.feed.length?t.query.context.feed[0]:_("Overall"):'opinion:"*"'===t.query.topic?"opinion:"+_("Overall"):t.query.topic},getLimitPreference:function(){var t={name:"limit",type:"list",options:[]};function e(e,n,s){for(var o=e;o<=n;o+=s)t.options[i]={value:o,label:o},i++}for(var n=0;n<50;n++)t.options[n]={value:n+1,label:n+1};var i=50;return e(60,100,10),e(200,1e3,100),t.defaultValue="5",t.value="5",t},refreshAnalytic:function(e){var n=!1;function i(){return new t(function(t){n?t():(e(),setTimeout(t,1e4))})}return this._analyticRefreshWaiting||(this._analyticRefreshWaiting=t.resolve()),setTimeout(function(){this._analyticRefreshWaiting=this._analyticRefreshWaiting.then(i)}.bind(this),3e4),function(){n=!0}}};return m}.apply(e,i))||(t.exports=s)},function(t,e,n){"use strict";var i,s;i=[n(1),n(3),n(15),n(2),n(45),n(111)],void 0===(s=function(t,e,i,s,o,a){var r,l=[],c={},u="",h="up|up|down|down|left|right|left|right|b|a|";function d(t){var i=e.getElement(t),s=i.getTagName(),a=e.whichKey(t);if("shift+/"!==a&&"shift+?"!==a||(a="?"),"input"===s||"textarea"===s||i.getClosest("[contenteditable]"))return"esc"===a?(i.blur(),!1):void 0;if(u+=a+"|",0===h.indexOf(u)){if(u===h)return void n.e(121).then(function(){var t=[n(1141)];(function(t){t()}).apply(null,t)}).catch(n.oe)}else u="";function r(e,n){var i="string"==typeof e?c[e]:e,s=i&&i[n];return s&&!1!==s(t)}o.get("keyboardNav")&&(r(l[0],a)||r(l[0],"any")||r("any",a)||r("any","any"))&&e.stop(t)}function p(t,e){for(var n=t.length;n--;n)t[n]===e&&t.splice(n,1);return t}return(r={init:function(){i.addEvents.call(document.body,{keydown:d}),App.SmartReader?r.pushFocus("reader"):r.pushFocus("module")},addShortcuts:function(e){t.extend(c,function e(n,i){var s,o,a;if("object"==typeof n)for(s in n)for(a=n[s],i||e(a,!0),delete n[s],s=s.split(","),o=0;o<s.length;o++)n[s[o]]=n[s[o]]?t.merge(n[s[o]],a):a;return n}(e),!0)},openHelp:function(e,n){if(a.isOpen())this.closeHelp();else{r.pushFocus("help"),n=(n=n.replace(/\n/g,"<br />\n")).replace(/\n(.+)\t+/g,"\n<b>$1</b> - ");var i=t.createElement("div",{class:"keyboard-help"}).addContent(t.createElement("p",{text:_("Keyboard shortcut in this context")+" ("+e+"):"}),n);a.open(i,{contentTitle:_("{0} keyboard shortcuts").format(s.Config.application),classWindow:"modalDialog",size:{x:600,y:null}})}},closeHelp:function(){r.popFocus("help"),a.close()},pushFocus:function(t){p(l,t).unshift(t)},popFocus:function(t){t?p(l,t):l.shift(),document.focus?document.focus():document.body.focus?document.body.focus():window.focus&&window.focus()},focus:function(){return l[0]}}).addShortcuts({help:{"esc,h,?,f1":function(){r.closeHelp()},any:function(t){r.closeHelp(),d(t)}}}),App.Keyboard=r,r}.apply(e,i))||(t.exports=s)},function(t,e,n){var i,s;i=[n(268),n(1),n(15),n(26),n(3)],void 0===(s=function(t,e,n,i,s){"use strict";function o(t){return"body"===n.getTagName.call(t)}function a(t,e){var i=n.getStyle.call(t,e?"overflow-"+e:"overflow");return o(t)||"scroll"===i||"auto"===i}function r(t,e){for(;t&&1===t.nodeType&&!a(t,e);)t=t.parentNode;return t}function l(t,e){return r(t&&t.parentNode,e)}function c(t){o(t)&&(t=n.getWindow.call(t));var i=n.getScrolls.call(t);return e.owns(i,"x")&&(i.left=i.x,i.top=i.y),i}function u(t,i){o(t)&&(t=n.getWindow.call(t));var s=c(t);e.is(i.left)||(i.left=s.left),e.is(i.top)||(i.top=s.top),e.is(t,"window")?t.scrollTo(i.left,i.top):(t.scrollTop=i.top,t.scrollLeft=i.left)}var h=i.extend({setSteps:function(t){var e,n={},i={},s=c(this.element);for(e in t)Array.isArray(t[e])?(n[e]=t[e][0],i[e]=t[e][1]):(n[e]=s[e],i[e]=t[e]);this.from=n,this.to=i},onAnimate:function(t,e,n){var i,s={};for(i in e)s[i]=this.compute(e[i],n[i]);u(t,s)}}),d=new t;function p(t,n,i){i=e.extend({onComplete:null},i);var s=d.get(t);s&&(s.stop(),s.dispatchEvent("onComplete")),s=new h(t,{transition:"sineOut",duration:s?100:200,events:{onComplete:function(){d.delete(t),i.onComplete&&i.onComplete()}}}),d.set(t,s),s.start(n)}return e.namespace("Utils/Scroll",{scrollToElement:function(t,i){var s=(i=e.extend({top:!1,bottom:!1,margin:0,scrollable:null,smooth:!1,onComplete:null},i)).scrollable||l(t);if(s){var a=o(s),r=a?n.getSize.call(n.getWindow.call(t)):{width:s.clientWidth,height:s.clientHeight},h=n.getSize.call(t),d=n.getOffsets.call(t),m={top:d.y,left:d.x,bottom:0,right:0},f=c(s);[0,1].forEach(function(t){var e=t?"top":"left",o=t?"bottom":"right",l=t?"height":"width";m[e]-=a?f[e]:n.getOffsets.call(s)[t?"y":"x"],m[e]-=i.margin,m[o]=r[l]-m[e]-h[l]-2*i.margin;var c=m[e]<0||m[o]<0&&m[o]<-m[e],u=m[o]<0;i[o]||!c&&!i[e]?(i[o]||u)&&(f[e]-=m[o]):f[e]+=m[e]}),i.smooth?p(s,f,{onComplete:i.onComplete}):(u(s,f),i.onComplete&&i.onComplete())}},smoothScroll:p,preventParentScroll:function(t,e){var i=function(t,e){var n=r(s.getElement(e)),i=!1;if(this.isInjected(n))i=!0;else{var o=n.scrollHeight,a=n.clientHeight,l=n.scrollTop,c=s.wheelDelta(e);(a!==o||t&&!1===t.onlyScrollable)&&(c<0&&!(l+a<o)||c>0&&!(l>0))&&(i=!0)}i&&s.stop(e)}.bind(t,e);return n.addEvent.call(t,"mousewheel",i),function(){n.removeEvent.call(t,"mousewheel",i)}},getClosestScrollable:r,getParentScrollable:l},e)}.apply(e,i))||(t.exports=s)},function(t,e,n){var i,s;i=[n(1),n(115)],void 0===(s=function(t,e){"use strict";var n={};function i(){e.warn("UWA/Date as a constructor","Use the native Date instead.");var t=Array.prototype.slice.call(arguments);return t.unshift(null),new(Date.bind.apply(Date,t))}return n.strftime=function(){function e(t,e,n){return Array((n||2)-String(t).length+1).join(e||0)+t}function i(t){return parseInt(t,10)}var s=t.i18n,o={a:[s("Sun"),s("Mon"),s("Tue"),s("Wed"),s("Thu"),s("Fri"),s("Sat")],A:[s("Sunday"),s("Monday"),s("Tuesday"),s("Wednesday"),s("Thursday"),s("Friday"),s("Saturday")],b:[s("Jan"),s("Feb"),s("Mar"),s("Apr"),s("May"),s("Jun"),s("Jul"),s("Aug"),s("Sep"),s("Oct"),s("Nov"),s("Dec")],B:[s("January"),s("February"),s("March"),s("April"),s("May"),s("June"),s("July"),s("August"),s("September"),s("October"),s("November"),s("December")],c:s("%a %b %e %Y %T"),p:[s("AM"),s("PM")],P:[s("am"),s("pm")],x:s("%m/%d/%y"),X:s("%T")},a={a:function(t){return o.a[t.getDay()]},A:function(t){return o.A[t.getDay()]},b:function(t){return o.b[t.getMonth()]},B:function(t){return o.B[t.getMonth()]},c:o.c,C:function(t){return e(i(t.getFullYear()/100))},d:function(t){return e(t.getDate())},D:"%m/%d/%y",e:function(t){return e(t.getDate()," ")},F:"%Y-%m-%d",g:function(t){return e(a.G(t)%100)},G:function(t){var e=t.getFullYear(),n=i(a.V(t)),s=i(a.W(t));return s>n?e++:0===s&&n>=52&&e--,e},h:"%b",H:function(t){return e(t.getHours())},I:function(t){return e(t.getHours()%12||12)},j:function(t){return e(i((new Date(t.getFullYear()+"/"+(t.getMonth()+1)+"/"+t.getDate()+" GMT")-new Date(t.getFullYear()+"/1/1 GMT"))/6e4/60/24)+1,0,3)},l:function(t){return e(t.getHours()%12||12," ")},m:function(t){return e(t.getMonth()+1)},M:function(t){return e(t.getMinutes())},n:"\n",p:function(t){return o.p[t.getHours()>=12?1:0]},P:function(t){return o.P[t.getHours()>=12?1:0]},r:"%I:%M:%S %p",R:"%H:%M",s:function(t){return i(t/1e3)},S:function(t){return e(t.getSeconds())},t:"\t",T:"%H:%M:%S",u:function(t){return t.getDay()||7},U:function(t){var n=i(a.j(t));return e(i((n+(6-t.getDay()))/7))},V:function(t){var n=i(a.W(t)),s=new Date(t.getFullYear()+"/1/1").getDay(),o=n+(s>4||s<=1?0:1);return 53===o&&new Date(t.getFullYear()+"/12/31").getDay()<4?o=1:0===o&&(o=a.V(new Date(t.getFullYear()-1+"/12/31"))),e(o,0)},w:function(t){return t.getDay()},W:function(t){var n=i(a.j(t));return e(i((n+(7-a.u(t)))/7))},x:o.x,X:o.X,y:function(t){return e(t.getFullYear()%100)},Y:function(t){return t.getFullYear()},z:function(t,n){var s=n?0:t.getTimezoneOffset();return(s>0?"-":"+")+e(i(Math.abs(s/60)))+e(s%60)},Z:function(t,e){var n;return e?n="UTC":(n=t.toString().replace(/^.*:\d\d( GMT[+\-]\d+)? \(?([A-Za-z ]+)\)?\d*$/,"$2").replace(/[a-z ]/g,"")).length>4&&(n=a.z(t)),n},"%":"%"};return function(t,e,i){var s;return s=i?new Date(Number(t)+6e4*t.getTimezoneOffset()):t,e.replace(/%[A-Za-z%]/g,function(e){var o=a[e.slice(1)];return void 0===o?e:"string"==typeof o?"%"!==o&&o.indexOf("%")>=0?n.strftime(t,o,i):o:o(s,i)})}}(),e.uncurryAlias(n,Date.prototype,"UWA.Date","Date"),["now","parse","UTC"].forEach(function(t){i[t]=e.alias("UWA/Date."+t,"Use the native Date."+t+" instead",Date[t])}),Object.assign(i,n),t.namespace("Date",i,t)}.apply(e,i))||(t.exports=s)},function(t,e,n){"use strict";var i,s;i=[n(0),n(11),n(14)],void 0===(s=function(t,e,n){var i,s=t.h,o=n.namespace("Analyze_Wizard_Buttons").addRules({textButton:{marginRight:"38px",fontSize:"14px",textDecoration:"underline",color:"#9a9a9a",cursor:"pointer",":hover":{color:"#fff"}}});function a(t,n){return function(i){return s(e.Button,{value:i.label||t,className:n,containerStyle:i.style,attributes:{disabled:Boolean(i.disabled)},events:{onClick:i.onClick}})}}return{Main:a("","green"),Secondary:a("","medium-grey"),Text:(i="",function(t){return s("span",{className:o("textButton"),onClick:t.onClick},t.label||i)}),Delete:a(_("Delete"),"dark-grey iconl delete icon-separated"),Edit:a(_("Edit"),"dark-grey")}}.apply(e,i))||(t.exports=s)},function(t,e,n){var i,s;i=[n(1),n(9)],void 0===(s=function(t,e){"use strict";function n(t){return"#"===t.charAt(0)&&(t=t.substring(1)),3===t.length&&(t=t[0]+t[0]+t[1]+t[1]+t[2]+t[2]),{r:parseInt(t.substr(0,2),16),g:parseInt(t.substr(2,2),16),b:parseInt(t.substr(4,2),16)}}function i(e){(e=t.clone(e)).r/=255,e.g/=255,e.b/=255;var n={},i=Math.min(e.r,e.g,e.b),s=Math.max(e.r,e.g,e.b),o=s-i,a=(s+i)/2;return n.l=a,s===i?(n.h=0,n.s=0):(n.h=a,n.s=a,n.s=n.l>.5?o/(2-s-i):o/(s+i),s===e.r?n.h=(e.g-e.b)/o+(e.g<e.b?6:0):s===e.g?n.h=(e.b-e.r)/o+2:s===e.b&&(n.h=(e.r-e.g)/o+4),n.h/=6),n.h=Math.round(360*n.h),n.s=Math.round(100*n.s),n.l=Math.round(100*n.l),n}function s(t){var e={},n=(1-Math.abs(t.l/50-1))*t.s/100,i=n*(1-Math.abs(t.h/60%2-1)),s=Math.floor(t.h/60),o=t.l/100-n/2;switch(s){case 0:e.r=n,e.g=i,e.b=0;break;case 1:e.r=i,e.g=n,e.b=0;break;case 2:e.r=0,e.g=n,e.b=i;break;case 3:e.r=0,e.g=i,e.b=n;break;case 4:e.r=i,e.g=0,e.b=n;break;case 5:case 6:e.r=n,e.g=0,e.b=i}return e.r=Math.round(255*(e.r+o)),e.g=Math.round(255*(e.g+o)),e.b=Math.round(255*(e.b+o)),e}function o(e,n){var i=(e=t.clone(e)).alpha;if(i>=1)return e;return["r","g","b"].forEach(function(t){e[t]=e[t]*i+n[t]*n.alpha*(1-i)}),e.alpha=Math.round(i+n.alpha*(1-i)),e}function a(t){var e=[t.r,t.g,t.b,t.alpha].map(function(t){return(t/=255)<.03928?t/12.92:Math.pow((t+.055)/1.055,2.4)});return.2126*e[0]+.7152*e[1]+.0722*e[2]}function r(t,e){if(e.alpha>=1){t.alpha<1&&(t=o(t,e));var n=a(e)+.05,i=a(t)+.05,s=n/i;return i>n&&(s=1/s),{ratio:Math.round(s),min:s,max:s}}var l={r:255,g:255,b:255,alpha:1},c={r:0,g:0,b:0,alpha:1},u=o(e,c),h=o(e,l),d=r(t,c).ratio,p=r(t,l).ratio,m=Math.max(d,p),f=1;return u.luminance>t.luminance?f=d:h.luminance<t.luminance&&(f=p),{ratio:Math.round((f+m)/2,2),min:f,max:m}}var l=e.extend({_color:null,init:function(e){this._color=t.clone(e)},toHexString:function(){return"#"+[this._color.r,this._color.g,this._color.b].map(function(t){return 1===(t=(t=parseInt(t,10)).toString(16)).length?"0"+t:t}).join("")},toRGBString:function(){var t=this._color,e=t.alpha<1;return"rgb"+(e?"a":"")+"("+t.r+", "+t.g+", "+t.b+(e?", "+t.alpha:"")+")"},toHSLString:function(){var t=this._color,e=t.alpha<1;return"hsl"+(e?"a":"")+"("+t.h+", "+t.s+"%, "+t.l+(e?"%, "+t.alpha:"%")+")"},toObject:function(){return t.clone(this._color)},cloneWith:function(e){var n=Object.assign(this.toObject(),e);return t.owns(e,"h")||t.owns(e,"s")||t.owns(e,"l")?l.fromHSL(n.h,n.s,n.l,n.alpha):t.owns(e,"r")||t.owns(e,"g")||t.owns(e,"b")?l.fromRGB(n.r,n.g,n.b,n.alpha):new l(n)}});return l.fromRGB=function(t,e,n,s){var o={r:parseInt(t,10),g:parseInt(e,10),b:parseInt(n,10),alpha:void 0===s?1:parseFloat(s,10)};return Object.assign(o,i(o)),new l(o)},l.fromHSL=function(t,e,n,i){var o={h:parseInt(t,10),s:parseFloat(e,10),l:parseFloat(n,10),alpha:void 0===i?1:parseFloat(i,10)};return Object.assign(o,s(o)),new l(o)},l.parse=function(t){"transparent"===t&&(t="rgba(0, 0, 0, 0)");var e={},s=t.test(/^(#?)((?:[A-Fa-f0-9]{3}){1,2})$/m),o=t.match(/^(rgb|hsl)(a?)[(]\s*([\d.]+\s*%?)\s*,\s*([\d.]+\s*%?)\s*,\s*([\d.]+\s*%?)\s*(?:,\s*([\d.]+)\s*)?[)]$/m);if(s)return(e=n(t)).alpha=1,Object.assign(e,i(e)),new l(e);if(o&&o.length>0){var a;o.shift();var r=o[0],c=o[5]?parseFloat(o[5],10):1;return"rgb"===r?a=l.fromRGB:"hsl"===r&&(a=l.fromHSL),a(o[2],o[3],o[4],c)}},l.checkContrast=function(t,e){var n,i=r(t.toObject(),e.toObject());return i.max>=0&&i.min<3?n="fail":i.max>=3&&i.min<4.5?n="aa-large":i.max>=4.5&&i.min<7?n="aa":i.max>=7&&i.min<22&&(n="aaa"),{ratio:i.ratio,status:n}},l.__test__={hexToRgb:n,rgbToHsl:i,hslToRgb:s,layerColors:o,getLuminance:a,getContrast:r},t.namespace("Color",l,t)}.apply(e,i))||(t.exports=s)},function(t,e,n){var i,s;i=[n(1),n(115)],void 0===(s=function(t,e){"use strict";var n={};function i(){return e.warn("UWA/Array as a constructor","Use the native Array instead."),Array.apply(null,arguments)}return n.equals=function(t,n){e.warn("UWA.Array.equals","Use UWA.equals instead");var i,s=t.length;if(!n||s!==n.length)return!1;for(i=0;i<s;i++)if(t[i]!==n[i])return!1;return!0},n.detect=function(t,e,n){var i,s;for(i=0,s=t.length;i<s;i++)if(e.call(n,t[i],i,t))return t[i]},n.invoke=function(t,e){var n=Array.prototype.slice.call(arguments,2);return t.map(function(t){return t[e].apply(t,n)})},n.erase=function(t,e){for(var n=t.length;n--;n)t[n]===e&&t.splice(n,1);return t},e.uncurryAlias(n,Array.prototype,"UWA.Array","Array"),i.isArray=e.alias("UWA/Array.isArray","Use the native Array.isArray instead",Array.isArray),["splice","slice"].forEach(function(t){i.prototype[t]=e.alias("UWA/Array#"+t,"Use the native Array#"+t+" instead",Array.prototype[t])}),Object.assign(i,n),t.namespace("Array",i,t)}.apply(e,i))||(t.exports=s)},function(t,e,n){var i,s;i=[n(115),n(1),n(9),n(22),n(13),n(19),n(15),n(3)],void 0===(s=function(t,e,n,i,s,o,a,r){"use strict";var l,c=o.Features.eventCapture,u=function(){};function h(t){return t.type.startsWith("touch")}function d(t,e){var n,i=t.offsetParent;i&&1===i.nodeType?((n=a.getOffsets.call(i)).y+=parseInt(a.getStyle.call(i,"border-top-width"),10)||0,n.x+=parseInt(a.getStyle.call(i,"border-left-width"),10)||0):n={x:0,y:0},t.setStyles({top:e.y-n.y+"px",left:e.x-n.x+"px"})}function p(t){for(var e,n=a.getComputedSize;t&&"inline"===a.getStyle.call(t,"display");)t=t.getParent();return t?((e=a.getOffsets.call(t)).maxX=e.x+t.offsetWidth-n.call(t,"border-right-width","padding-right"),e.maxY=e.y+t.offsetHeight-n.call(t,"border-bottom-width","padding-bottom"),e.x+=n.call(t,"border-left-width","padding-left"),e.y+=n.call(t,"border-top-width","padding-top")):e={x:0,y:0,maxX:0,maxY:0},e}return(l=n.extend(i,{defaultOptions:{mouseSnap:10,mouseDelay:0,touchSnap:20,touchDelay:300,delegate:"*",document:document},init:function(e){this.setOptions(e),void 0!==this.options.snap&&(t.warn("Controls/Drag snap option","Use the mouseSnap and touchSnap options instead."),this.options.mouseSnap=this.options.touchSnap=this.options.snap),void 0!==this.options.delay&&(t.warn("Controls/Drag delay option","Use the mouseDelay and touchDelay options instead."),this.options.mouseDelay=this.options.touchDelay=this.options.delay);var n=this.onMove.bind(this),i=this.onStop.bind(this),s=this.onStart.bind(this);this.documentEvents={touchmove:n,mousemove:n,touchend:i,mouseup:i,touchcancel:i},this.elementEvents={touchstart:s,mousedown:s},this.attach()},setOptions:function(t){return this._parent(t),t=this.options,this.root=e.extendElement(t.root||document.body),this.element=e.extendElement(t.element||this.root),this.document=t.document,c||(this.clickDiscarder||(this.clickDiscarder=e.createElement("div",{styles:{position:"absolute",height:"1px",width:"1px"}})),this.clickDiscarder.inject(this.root)),this},destroy:function(){this.detach(),c||this.clickDiscarder.destroy()},attach:function(){return a.addEvents.call(this.element,this.elementEvents),this},detach:function(){return this.reset(),a.removeEvents.call(this.element,this.elementEvents),this},start:u,move:c?u:function(t){d(this.clickDiscarder,t)},snap:function(t){c||(d(this.clickDiscarder,t),this.clickDiscarder.show());var n=e.Controls&&e.Controls.Scroller;(n=n&&n.activeScroller)&&n.onScrollStop(this.currentEvent)},stop:u,cancel:u,reset:function(){clearTimeout(this.startTimeout),c?this.snapped&&(this.document.addEventListener("click",r.stopPropagation,!0),setTimeout(function(){this.document.removeEventListener("click",r.stopPropagation,!0)}.bind(this),300)):this.clickDiscarder.hide(),this.snapped=!1,this.startOrigin=this.currentDelta=this.currentEvent=this.target=null,a.removeEvents.call(this.document,this.documentEvents)},onStart:function(t){var e=r.getElement(t);if((t.which||t.button||0)<2&&!this.target&&a.match.call(e,this.options.delegate,this.root)&&(this.currentEvent=t,this.target=e,this.startOrigin=r.getPosition(t),this.start(this.startOrigin),this.target)){a.addEvents.call(this.document,this.documentEvents);var n=h(t)?this.options.touchDelay:this.options.mouseDelay;n&&(this.startTimeout=setTimeout(this.onMove.bind(this,!1),n)),h(t)||r.preventDefault(t)}},onMove:function(t){var e,n;t?(this.currentEvent=t,this.snapped&&r.preventDefault(t)):(t=this.currentEvent,n=!0);var i=r.getPosition(t);if(this.currentDelta=e={x:i.x-this.startOrigin.x,y:i.y-this.startOrigin.y,distance:0},e.distance=Math.sqrt(e.x*e.x+e.y*e.y),!this.snapped){var s=h(t)?this.options.touchSnap:this.options.mouseSnap,o=h(t)?this.options.touchDelay:this.options.mouseDelay;(o?n&&e.distance<=s:!s||e.distance>s)?(this.snapped=!0,this.snap(i,e)):o&&(this.cancel(),this.reset())}this.snapped&&this.move(i,e)},onStop:function(t){this.currentEvent=t,this.snapped?(this.stop(),r.stop(t)):this.cancel(),this.reset()}})).Move=l.extend({init:function(t){this._parent(t),this.refreshCache=this.refreshCache.bind(this)},setOptions:function(t){return t&&!t.root&&(t.root=t.container),this._parent(t)},start:function(t){this._parent(t),this.context=Object.create(this),!1!==this.call("start")&&!0!==this.call("fixed",this.target)||this.reset()},snap:function(t,n){this._parent(t,n);var i,s=this.options;this.handles=this.call("handles")||this.target,s.centerHandles&&d(this.handles,{x:t.x-this.handles.offsetWidth/2-n.x,y:t.y-this.handles.offsetHeight/2-n.y}),this.startPosition=a.getOffsets.call(this.handles),this.options.overlay&&(i=this.document.body||this.document,this.overlay=e.createElement("div",{styles:{position:"absolute",top:0,left:0,width:i.offsetWidth+"px",height:i.offsetHeight+"px"}}).inject(i)),this.refreshCache()},refreshCache:function(){var t=this.options;if(this.zones=t.zones?this.getList(t.zones):[this.root],this.positions=this.zones.map(function(t){var e=p(t);return e.element=t,e}),t.container&&this.handles){var e=p(t.container),n=a.getDimensions.call(this.handles);this.limit={x:[e.x,e.maxX-n.outerWidth],y:[e.y,e.maxY-n.outerHeight]}}else this.limit={x:[-1/0,1/0],y:[-1/0,1/0]}},reset:function(){this._parent(),this.zone=null,this.startPosition=null,this.overlay&&(this.overlay.destroy(),this.overlay=null)},stop:function(){this._parent(),this.zone&&!1!==this.call("drop")||(this.setPosition(this.startOrigin,{x:0,y:0}),this.call("cancel")),this.call("stop")},move:function(t,e){var n,i,s,o;for(this._parent(t,e),this.setPosition(t,e),n=0,i=this.positions.length;n<i;n+=1)(o=this.positions[n]).x<=t.x&&t.x<=o.maxX&&o.y<=t.y&&t.y<=o.maxY&&(s=o.element);this.zone!==s&&(this.zone&&(this.call("leave"),this.placeholder&&(this.placeholder.remove(),this.placeholder=null,this.refreshCache())),this.zone=s,s&&(this.placeholder=this.call("enter"),this.refreshPlaceholderCache())),this.zone&&this.placeholder&&this.placePlaceholder(),this.call("move")},setPosition:function(t,e){var n,i,s,o,a=this.limited={},r={};for(i=0;i<2;i+=1)s=i?"x":"y",n=this.limit[s],r[s]=this.startPosition[s]+e[s],o=0,n[1]<r[s]?(o=n[1]-r[s],a[i?"right":"bottom"]=o):n[0]>r[s]&&(o=n[0]-r[s],a[i?"left":"top"]=o),o&&(t[s]+=o,r[s]+=o,e[s]+=o);d(this.handles,r)},getList:function(t){var n=e.typeOf(t);return"array"===n?t:"function"===n?t.apply(this,Array.prototype.slice.call(arguments,1)):this.root.getElements(t)},call:function(t,e){var n=this.options[t];if(n)return s.attempt(n,0,null,this.context,e)},refreshPlaceholderCache:function(){var t,e,n,i=(this.zone||this.root).childNodes,s=[];for(e=0,n=i.length;e<n;e+=1)1===(t=i[e]).nodeType&&t!==this.handles&&t!==this.placeholder&&(t.offsetHeight||t.offsetWidth)&&this.clickDiscarder!==t&&!0!==this.call("fixed",t)&&(s[s.length]={element:t,position:a.getOffsets.call(t)});this.placeholderCache=s},placePlaceholder:function(){for(var t,e,n,i,s,o,r,l,c,u,h,d,p,m="offsetWidth",f=this.context.handles,g=this.context.placeholder,v=this.context.limited,b=this.zone||this.root,y=this.target,w=this.placeholderCache;y&&y.parentNode!==b;)y=y.parentNode;for(t=a.getOffsets.call(f),c={x:v.left?-1/0:v.right?1/0:t.x+f[m]/2,y:v.top?-1/0:v.bottom?1/0:t.y+f.offsetHeight/2},e=0,n=w.length;e<n;e+=1)t=(i=w[e]).position,(d=void 0===p||p>t.x)?h=void 0===p:u=!0,p=t.x+i.element[m],(d||t.x<=c.x)&&(h||t.y<=c.y)&&(s=e);o=0,void 0!==s&&(t=(i=w[s]).position,o=(u?t.x+i.element[m]/2>c.x:t.y+i.element.offsetHeight/2>c.y)?s:s+1),r=w[o]&&w[o].element,l=w[o-1]&&w[o-1].element,y===f||!y||this.options.allowBesidePlaceholder||l!==y&&r!==y?(r?r!==g&&r.previousSibling!==g:l?l!==g&&l.nextSibling!==g:b.lastChild!==g)&&(r||l?g.inject(r||l,r?"before":"after"):g.inject(b),this.refreshPlaceholderCache(),this.refreshCache()):a.isInjected.call(g)&&(g.remove(),this.refreshPlaceholderCache(),this.refreshCache())}}),e.namespace("Controls/Drag",l,e)}.apply(e,i))||(t.exports=s)},function(t,e,n){var i,s;i=[n(1),n(3),n(8)],void 0===(s=function(t,e,n){"use strict";var i=n.Button.extend({name:"uwa-tag",options:{closable:!1,clickable:!0,icon:"delete small"},buildSkeleton:function(){this._parent();var e=this.elements.input.getText();this.elements.input.empty(),this.elements.input=t.createElement("div",{class:this.getClassNames("-title"),text:e}),this.elements.content.addContent([this.elements.input,t.createElement("div",{class:this.getClassNames("-close")+" uwa-icon "+this.options.icon,events:{click:this._close.bind(this)}})]),this.setClosable(this.options.closable)},setClosable:function(t){this.elements.container.toggleClassName("closable",!1!==t)},_close:function(t){this.dispatchEvent("onClose"),e.stop(t)},onMouseEnter:function(){this.options.clickable&&this._parent()},buildInput:function(){return t.createElement("div",{tabindex:"0"})}});return t.namespace("Controls/Tag",i,t)}.apply(e,i))||(t.exports=s)},function(t,e,n){var i=n(101);t.exports=function(t){return Object(i(t))}},function(t,e,n){"use strict";var i,s;i=[n(9),n(16)],void 0===(s=function(t,e){var n=function e(){var n=t.extend.apply(this,arguments);return n.wrapHandler=s,n.extend=e,n}.call(t,{name:"nv-exception",message:"",stack:"",cause:void 0,init:function(t,e){this.message=t||"No message";var n=new Error(this.message);n.name=this.name,this.stack=n.stack||"",e instanceof Error&&(this.cause=e)}}),i=n.prototype;function s(t){var n=this;return function(i){return i instanceof n?t(i):e.reject(i)}}return n.prototype=Object.assign(Object.create(Error.prototype),i),n}.apply(e,i))||(t.exports=s)},function(t,e,n){"use strict";var i,s;i=[n(1),n(3),n(9),n(39),n(22),n(111)],void 0===(s=function(t,e,n,i,s,o){function a(t,e,n){e=e||20,n=n||100;var i,s=0,o=function(){try{t.focus()}catch(t){}s++>n&&clearInterval(i)};i=setInterval(o,e),o(),setTimeout(o,1),t.addEvent("focus",function e(){clearInterval(i),t.removeEvent("focus",e)})}var r=n.extend(i,s,{options:{titleText:" ",message:"",confirm:{text:_("Yes"),requestText:"",successText:""},discard:{text:_("No"),requestText:"",successText:""},cancelText:_("Cancel"),className:"modal confirmDialog",autoFadeDelay:1500,width:500},init:function(t){this.setOptions(t)},show:function(){return o.open(this.build(),{contentTitle:this.options.titleText,classWindow:this.options.className,closeWithOverlay:!1,size:{x:this.options.width,y:"auto"},onOpen:function(){this.dispatchEvent("onOpen")}.bind(this),onOpened:function(){this.confirmButton&&a(this.confirmButton)}.bind(this),onClose:this.dispatchEvent.bind(this,"onClose")}),this},_onConfirm:function(t){this.ajax&&this.ajax.running||(this.confirmButton.addClassName("action"),this.discardButton&&this.discardButton.addClassName("disabled").set("disabled","disabled"),this.cancelButton&&this.cancelButton.addClassName("disabled").set("disabled","disabled"),""!==this.options.confirm.requestText?(this.confirmButton.value=this.options.confirm.requestText,this.options.discard&&(this.options.discard.successText=""),this.dispatchEvent("onConfirmRequest")):(this.dispatchEvent("onConfirm"),o.close()),e.stop(t))},_onDiscard:function(t){if(this.discardButton.addClassName("action"),this.confirmButton.addClassName("disabled").set("disabled","disabled"),this.cancelButton&&this.cancelButton.addClassName("disabled").set("disabled","disabled"),""!==this.options.discard.requestText){if(this.discardButton.value=this.options.discard.requestText,this.options.confirm&&(this.options.confirm.successText=""),this.ajax&&this.ajax.running)return void this.ajax.cancel();this.dispatchEvent("onDiscardRequest")}else this.dispatchEvent("onDiscard"),o.close();e.stop(t)},onDialogComplete:function(){var t,e="";e+='<p style="margin-bottom: 1em;">'+(this.options.confirm.successText||this.options.discard.successText)+"</p>",this.body.setHTML(e),this.cancelButton&&a(this.cancelButton.addClassName("nv-primary-button").set({disabled:!1,value:_("Close")})),this.confirmButton&&this.confirmButton.destroy(),this.discardButton&&this.discardButton.destroy(),this.options.autoFadeDelay&&(t=setTimeout(function(){o.close()},this.options.autoFadeDelay),o.addEvent("close",function e(){o.removeEvent("close",e),clearTimeout(t)}))},build:function(){var e,n=this.options.message,i=t.createElement("div",{class:"frame"});return this.body=t.createElement("div",{class:"body"}).inject(i),e=t.createElement("div",{class:"footer"}).inject(i),"string"==typeof n?this.body.set("html",n):this.body.addContent(n),this.options.confirm.text&&(this.confirmButton=t.createElement("input",{type:"button",class:"nv-button nv-primary-button yes",value:this.options.confirm.text,events:{click:this._onConfirm.bind(this)}}).inject(e)),this.options.discard&&this.options.discard.text&&(this.discardButton=t.createElement("input",{type:"button",class:"nv-button no",value:this.options.discard.text,events:{click:this._onDiscard.bind(this)}}).inject(e)),this.options.cancelText&&(this.cancelButton=t.createElement("input",{type:"button",class:"nv-button cancel",value:this.options.cancelText,events:{click:function(){o.close()}}}).inject(e)),this.options.morebuttons&&this.options.morebuttons.length>0&&this.options.morebuttons.forEach(function(n){t.createElement("input",{type:"button",class:"nv-button",value:n.text,events:{click:n.click||function(){document.location=n.href}}}).inject(e)}),i}});return r.DeleteWidget=r.extend({options:{confirm:{text:_("Delete"),requestText:_("Deleting..."),successText:_("The widget has been deleted.")},discard:!1,width:600},init:function(e,n){this.addEvents({onOpen:e.focus.bind(e,!0),onClose:e.focus.bind(e,!1),onConfirmRequest:e.remove.bind(e,!0,this.onDialogComplete.bind(this))}),this._parent(t.merge(n||{},{titleText:e.getTitle().sanitizeHTML()||_("untitled"),message:"<p>"+_("Are you sure you want to delete this widget?")+"</p>"}))}}),r.error=function(e,n){return(n=t.merge({discard:!1,confirm:!1,cancelText:_("Ok")},n)).message=e,new r(n).show()},App.UI||(App.UI={}),App.UI.ConfirmDialog=r,r}.apply(e,i))||(t.exports=s)},function(t,e,n){"use strict";n(461);var i,s=(i=n(633))&&i.__esModule?i:{default:i};s.default._babelPolyfill&&"undefined"!=typeof console&&console.warn&&console.warn("@babel/polyfill is loaded more than once on this page. This is probably not desirable/intended and may have consequences if different versions of the polyfills are applied sequentially. If you do need to load the polyfill more than once, use @babel/polyfill/noConflict instead to bypass the warning."),s.default._babelPolyfill=!0},function(t,e,n){},function(t,e,n){"use strict";var i,s;i=[n(0),n(1),n(23),n(5)],void 0===(s=function(t,e,n,i){var s=n.extend({_buildElements:function(){this.elements.container=e.extendElement(this.options.container),this.elements.content=e.extendElement(this.options.content)}});return i.extend({componentDidMount:function(){this.scroller=new s({container:this.container,content:this.content,shadows:!0})},componentWillReceiveProps:function(t){["style","class","innerStyle","innerClass"].forEach(function(n){if(!e.equals(this.props[n],t[n]))throw new Error("Scroller props can't change")},this)},componentWillUnmount:function(){this.scroller.clearAllTimed()},render:function(e){return t.h("div",{ref:function(t){this.container=t}.bind(this),class:e.class,style:e.style},t.h("div",{ref:function(t){this.content=t}.bind(this),class:e.innerClass,style:e.innerStyle},e.children))}})}.apply(e,i))||(t.exports=s)},function(t,e,n){"use strict";var i,s;i=[n(0),n(5),n(65)],void 0===(s=function(t,e,n){var i=t.h,s=e.extend({name:"nv-analyze-step",getDefaultProps:function(){return{extraClass:"",title:"",isCloseableStep:!0,scroller:!1}},render:function(t){return i("div",{class:this.getClassNames()+" "+(t.extraClass||"")},t.title&&i("div",{class:this.getClassNames("-title")},t.title),t.scroller?[t.beforeScroller,i(n,{innerClass:this.getClassNames("-inner")},t.children),t.afterScroller]:i("div",{class:this.getClassNames("-inner")},t.children),i("div",{class:this.getClassNames("-nav")},i("div",{class:this.getClassNames("-nav-left")},t.leftNavigation),i("div",{class:this.getClassNames("-nav-middle")},t.middleNavigation),i("div",{class:this.getClassNames("-nav-right")},t.rightNavigation)))}});return s.getClassNames=function(t){return"nv-analyze-step"+(t||"")},s}.apply(e,i))||(t.exports=s)},function(t,e,n){var i=n(28),s=n(73),o=n(72),a=n(126)("src"),r=n(464),l=(""+r).split("toString");n(47).inspectSource=function(t){return r.call(t)},(t.exports=function(t,e,n,r){var c="function"==typeof n;c&&(o(n,"name")||s(n,"name",e)),t[e]!==n&&(c&&(o(n,a)||s(n,a,t[e]?""+t[e]:l.join(String(e)))),t===i?t[e]=n:r?t[e]?t[e]=n:s(t,e,n):(delete t[e],s(t,e,n)))})(Function.prototype,"toString",function(){return"function"==typeof this&&this[a]||r.call(this)})},function(t,e,n){var i=n(7),s=n(29),o=n(101),a=/"/g,r=function(t,e,n,i){var s=String(o(t)),r="<"+e;return""!==n&&(r+=" "+n+'="'+String(i).replace(a,"&quot;")+'"'),r+">"+s+"</"+e+">"};t.exports=function(t,e){var n={};n[t]=e(r),i(i.P+i.F*s(function(){var e=""[t]('"');return e!==e.toLowerCase()||e.split('"').length>3}),"String",n)}},function(t,e,n){var i,s;i=[n(115),n(1),n(9),n(22),n(170),n(86)],void 0===(s=function(t,e,n,i,s,o){"use strict";var a=n.extend(i,s,{AdaptersInstances:null,currentAdapter:null,defaultOptions:{database:"default",adapter:null,adapterOptions:{},availableAdapters:[]},internalKeys:{keysIndex:"_keysIndex",lastUpdate:"_lastUpdate"},isReady:!1,init:function(e){t.warn("UWA/Storage");var n;this.AdaptersInstances={},a.Instances.push(this),this.setOptions(e),(n=this.options.adapter)&&"auto"!==n?this.setCurrentAdapter(n):this.setCurrentAdapterFromDetected()},initAvailableAdapters:function(){var t,e=this,n=e.options.availableAdapters,i=a.Adapter;if(0===n.length)for(t in i)i.hasOwnProperty(t)&&"Abstract"!==t&&n.push(t);n.forEach(function(t){e.getAdapterInstance(t)})},isAvailableAdapter:function(t){var e,n=!1;try{(e=this.getAdapterInstance(t))&&e.isAvailable()?(n=!0,this.log('UWA.Storage:detectAvailableAdapter: "'+t+'" is available')):this.log('UWA.Storage:detectAvailableAdapter: "'+t+'" is not available')}catch(e){this.log('UWA.Storage:detectAvailableAdapter: "'+t+'" is not available cause: '+e)}return n},getAdapterInstance:function(t){var e=this.AdaptersInstances;if("string"!=typeof t)throw new Error('Bad adapterName param value "'+t+'" for getAdapterInstance.');if(!(e[t]||(e[t]=new a.Adapter[t](this,this.options.adapterOptions),e[t]instanceof a.Adapter.Abstract)))throw new Error("UWA.Storage.Adapter."+t+" is not an instance of UWA.Storage.Adapter.Abstract");return e[t]},detectAvailableAdapter:function(){var t=this,e=t.options,n=[];t.initAvailableAdapters(),e.availableAdapters.forEach(function(e){t.isAvailableAdapter(e)&&n.push(e)}),e.availableAdapters=n},setCurrentAdapterFromDetected:function(){var t=this.options;if(this.detectAvailableAdapter(),!(t.availableAdapters.length>0))throw new Error("UWA.Storage: No adapter available detected.");this.setCurrentAdapter(t.availableAdapters[0])},setCurrentAdapter:function(t){var e;if("string"!=typeof t)throw new Error('Bad adapterName param value "'+t+'" for setCurrentAdapter.');this.isAvailableAdapter(t)?((e=this.getAdapterInstance(t)).connect(this.options.database),this.log("UWA.Storage:setCurrentAdapter: "+t+";"),this.adapter=t,this.currentAdapter=e):(this.log('UWA.Storage:setCurrentAdapter: "'+t+'" fail fallback in auto detect mode'),this.setCurrentAdapterFromDetected())},store:function(t,e){var n,i=this.currentAdapter;return i&&(n=this.safeResurrect(i.get(t)),1===arguments.length?this.log('Get Key "'+t+'" with value "'+n+'"'):n!==e&&(n=this.safeStore(e),this.log('Update Key "'+t+'" with value "'+e+'" and stored value "'+n+'"'),n=i.set(t,n))),n},remove:function(t){return!!this.currentAdapter&&(this._updateLastUpdateDate(),this._removeKeyFromKeysIndex(t),this.safeResurrect(this.currentAdapter.rem(t)))},get:function(t,e){var n,i;return e?(n=this._getKeysIndex()).hasOwnProperty(t)&&Date.now()-n[t]<=e&&(i=this.store(t)):i=this.store(t),i},set:function(t,e){return this._updateLastUpdateDate(),this._addKeyToKeysIndex(t),this.store(t,e)},getAll:function(){var t=this,e=Object.keys(this._getKeysIndex()),n={};return e.forEach(function(e){n[e]=t.get(e)}),n},safeStore:function(t){return o.encode(t)},safeResurrect:function(t){if(!e.is(t,"undefined"))try{o.isJson(t)&&(t=o.decode(t))}catch(n){e.log("unsafe Resurrect JSON with value: "+t),e.log(n)}return t},getLastUpdateDate:function(t){var e;return e=t?this._getKeysIndex()[t]:this.get(this.internalKeys.lastUpdate),(new Date).setTime(e)},_getKeysIndex:function(){var t,n,i=this,s=i.safeResurrect(i.currentAdapter.get(this.internalKeys.keysIndex)),o=e.typeOf(s);return i.log("Get all keys from keysIndex"),"array"===o?(t={},n=i.getLastUpdateDate(),s.forEach(function(e){t[e]=n}),s=t):"object"!==o&&(s={}),s},_removeKeyFromKeysIndex:function(t){var e,n=this._getKeysIndex(),i={};for(e in this.log('Remove key "'+t+'" from keysIndex'),n)n.hasOwnProperty(e)&&e!==t&&(i[e]=n[e]);this._storeKeysIndex(i)},_addKeyToKeysIndex:function(t){var e=this._getKeysIndex();this.log('Add key "'+t+'" to keysIndex'),e[t]=Date.now(),this._storeKeysIndex(e)},_storeKeysIndex:function(t){this.currentAdapter.set(this.internalKeys.keysIndex,this.safeStore(t))},_updateLastUpdateDate:function(){var t=Date.now();return this.currentAdapter.set(this.internalKeys.lastUpdate,this.safeStore(t)),t}});return a.Instances=[],e.merge(a,{allInstancesReady:function(){return a.Instances.every(function(t){return t.isReady})}}),e.namespace("Storage",a,e)}.apply(e,i))||(t.exports=s)},function(t,e,n){"use strict";var i,s;i=[n(1),n(20),n(4),n(21),n(35),n(6),n(27),n(62),n(149),n(17),n(359)],void 0===(s=function(e,i,s,o,a,r,l,c,u,h,d){function p(t){var e=d.get({tab:t.tab||t.tabId,before:t.before||t.beforeModuleId,col:t.col});if(e)return i.resolve(e);var n=o.getNextWriteable();return n?(o.focusTab(n),i.resolve(d.get({tab:n}))):o.createNewTab({switchTo:!0}).then(function(){return d.get({tab:o.getNextWriteable()})})}function m(t,e){return e=e||{},r.createWidget(t).then(function(e){return e.widgetId||(e.widgetId=t.widgetId),f(e)},function(t){return!1===e.displayError?i.reject(t):l.displayError(t)})}function f(e){return new i(function(i){n.e(8).then(function(){(function(t){var s=[n(103)];(function(t){e.admin=!1;var n=t.factory(e);n.addToPage();var s=n.getStreamIds()[0],o=s?{feedId:s,moduleName:n.getName()}:{moduleName:n.getName()};a.log("app","new",o),i(n)}).apply(null,s)}).call(this,n(454)(t))}).catch(n.oe)})}return{add:function(t,a){return a=a||{},t=e.clone(t),u.process(t),p(a).then(function(r){return function(t,a,r){var l,u=s.uniqueID();if(e.extend(r,a),d.setTemporaryPosition(u,a),t.showPreview){var p={eco:t.eco,position:a};l=new i(function(t,e){n.e(0).then(function(){var i=[n(273)];(function(n){new n(r,p).open().then(t,e)}).apply(null,i)}).catch(n.oe)})}else if(!0!==t.bypassDuplicateCheck){var f=function(t){var e;if("RssReader"===t.moduleName&&t.data.feedUrl){var n=function(e){return e.getQuery()===t.data.feedUrl};e=function(t){return t.getStreams().some(n)}}else e=function(){return!1};return h.getAll().filter(e)}(r);l=f.length>0?function(t,e){var n=i.deferred(),a=t.map(function(t){return o.getById(t.dataObj.tab).dataObj.title});a=s.unique(a,function(t){return t});var r=new c({titleText:_("Add a feed"),cancelText:null,message:[_('You have already added this feed on your dashboard, in your "{0}" tab{1}.').format(a.join(", "),a.length>1?"s":""),_("Are you sure you want to add this feed again?")].join("<br/>")});return r.addEvents({onConfirm:function(){m(e).then(n.resolve,n.reject)},onDiscard:function(){n.reject(new Error("cancel"))}}),r.show(),n.promise}(f,r):m(r,t)}else l=m(r,t);return l.fin(function(){d.unsetTemporaryPosition(u)}),l}(a,r,t)})},clone:function(t){return p({beforeModuleId:t.getId()}).then(function(e){var n={sourceModuleId:t.getId(),tabId:e.tab,col:e.col,row:e.row};return r.myWidgetDuplicate(n).then(function(t){return f(t)},function(t){return l.displayError(t)})})}}}.apply(e,i))||(t.exports=s)},function(t,e,n){var i,s;i=[n(1),n(57),n(24),n(16),n(53),n(712),n(10),n(366),n(8),n(88),n(23),n(3)],void 0===(s=function(t,e,n,i,s,o,a,r,l,c,u,h){"use strict";var d,p;return d=r.extend({setInlineText:function(t){this.elements.inlineText.setText(t)},getInlineText:function(){return this.elements.inlineText.getText()},buildSkeleton:function(){this._parent(),this.elements.inlineText=t.createElement("span",{class:this.getClassNames("-inline-text")})},buildContentMimic:function(){return[this._parent(),"​",this.elements.inlineText]}}),p=a.extend(n,{name:"uwa-autocomplete",options:{typeDelay:500,adaptor:null,adaptorOptions:{},inputOptions:{attributes:{autocomplete:"off"}},multiline:!1,floatingSuggestions:!1,previewSuggestion:!1,minLength:1,suggestFormat:"{name}",suggestUrl:null,dataParser:null,placeholder:""},init:function(t){this._parent(t)},isFloating:function(){return this.options.multiline&&this.options.floatingSuggestions},getAdaptor:function(){if(!this._adaptor){var e=this.options,n=t.typeOf(e.adaptor);this._adaptor="class"===n?new e.adaptor(e.adaptorOptions):"object"===n?e.adaptor:new o(t.merge({format:e.suggestFormat,url:e.suggestUrl,dataParser:e.dataParser,minLength:e.minLength},e.adaptorOptions))}return this._adaptor},getContent:function(){return this.elements.container||this.buildSkeleton(),this.elements.container},getInputControl:function(){return this.elements.input||this.buildSkeleton(),this.elements.input},getInputElement:function(){return this.getInputControl().getInputElement()},buildSkeleton:function(){var e=this,n=e.options,i=e.elements,s=t.clone(n.inputOptions),o=this.isFloating();n.placeholder&&(s.attributes||(s.attributes={}),s.attributes.placeholder=n.placeholder),s._root=!1,i.input=n.multiline?new d(s):new l.Text(s),n.multiline&&i.input.addEvent("onResize",function(){i.dropdown.updatePosition()}),i.input.addEvents({onKeyDown:this.dispatchEvent.bind(this,"onKeyDown"),onChange:this.dispatchEvent.bind(this,"onChange")}),i.input.getInputElement().addEvents({blur:function(){this.elements.container.removeClassName("focus"),this.setDelayed("blur-hide-suggestions",this.hideSuggestions,1)}.bind(this),focus:function(){this.elements.container.addClassName("focus"),this.setDelayed("focus-update-suggestion",this.updateSuggestions,400)}.bind(this)}),i.dropdown=o?new c.Pointy({_root:!1,target:i.input.getCaretElement(),className:this.getClassNames("-floating-dropdown"),autoPosition:["below-center","above-center"],positionOptions:{fit:"resize-max"}}):new c({_root:!1,className:this.getClassNames("-dropdown"),position:function(){return{x:0,y:i.input.getContent().getSize().height}},positionOptions:{fit:"resize-max",relative:i.container,boundaryMargin:4}}),i.suggestions=t.createElement("div",{class:this.getClassNames("-suggestions"),events:{click:this._selectionMouseHandler.bind(this),mousedown:function(t){h.preventDefault(t)},mouseover:this._selectionMouseHandler.bind(this)}}),i.scroller=new u({_root:!1}),i.scroller.getInnerElement().setContent(i.suggestions),i.dropdown.getInnerElement().setContent(i.scroller),i.dropdown.addEvents({onHide:function(){e.dispatchEvent("onHideSuggestions")},onPreUpdatePosition:function(){this.getContent().setStyles({"max-height":null,"max-width":null})},onShow:function(){var t=Math.min(i.suggestions.scrollHeight,200);i.dropdown.getContent().setStyle("height",t),e.dispatchEvent("onShowSuggestions")}}),i.container=t.createElement("div",{class:this.getClassNames()+(o?" floating":" not-floating")+(n.multiline?" multiline":" singleline"),html:[i.input,i.dropdown]})},updateSuggestions:function(e){var n=this.getValue(),s=i.deferred(),o=this.getInputElement(),a=o.selectionStart,r=n+"-"+a,l=e&&e.resetInput,c=e&&t.is(e.typeDelay)?e.typeDelay:this.options.typeDelay;return o.getDocument().activeElement!==o?(this.hideSuggestions({resetInput:l}),this.clearDelayed("getSuggestions"),s.resolve()):this._updateSuggestionRun&&r===this._updateSuggestionRun.key?this._updateSuggestionRun&&this._updateSuggestionRun.promise.then(s.resolve,s.reject):(this._updateSuggestionRun={promise:s.promise,key:r},this.setDelayed("hideSuggestionsIfGettingThemIsToSlow",function(){this.hideSuggestions({resetInput:l,cancelUpdateSuggestions:!1})},100),this.setDelayed("getSuggestions",function(){this.getSuggestions(n,a).done(function(t){this._updateSuggestionRun&&r===this._updateSuggestionRun.key?(t.length?this.displaySuggestions(t):this.hideSuggestions({resetInput:!1,cancelUpdateSuggestions:!1}),this.clearDelayed("hideSuggestionsIfGettingThemIsToSlow"),s.resolve()):s.reject(new Error("Aborted by another call to updateSuggestion"))}.bind(this))},c)),s.promise},getSuggestions:function(t,e){return i.cast(this.getAdaptor().getSuggestions(t,e)).then(function(t){return(t||[]).map(function(t){return"string"==typeof t?{fullValue:t}:t})})},areSuggestionsDisplayed:function(){return Boolean(this._displayedSuggestions)},displaySuggestions:function(t){this._displayedSuggestions=t,this._currentSuggestionIndex=null;var e=this.elements.dropdown;this.elements.suggestions.setContent(this.getAdaptor().renderSuggestions(t)),e.show();var n=t[0];!this._isInlineSuggestionAvailable(n)&&this.options.previewSuggestion||this._highlightSuggestion(n)},hideSuggestions:function(t){this._resetSuggestion(!t||t.resetInput),t&&!1===t.cancelUpdateSuggestions||(this._updateSuggestionRun=null),this._displayedSuggestions=null,this.elements.dropdown.hide()},getValue:function(){return this.getInputControl().getValue()},setValue:function(t){this.getInputControl().setValue(t),this.updateSuggestions({resetInput:!1})},_selectionMouseHandler:function(t){var e,n=h.findElement(t,".suggestion");n&&(e=this._getSuggestion(n))&&("click"===t.type?this._setSuggestion(e):this._highlightSuggestion(e),h.stop(t))},_getParts:function(t,e){var n=this.getInputElement();return void 0===t&&(t=n.selectionStart),void 0===e&&(e=n.selectionEnd),{before:n.value.slice(0,t),between:n.value.slice(t,e),after:n.value.slice(e)}},_setParts:function(t,e){var n=this.getInputElement();n.value=t.before+t.between+t.after;var i=t.before.length,s=i+t.between.length;switch(e){case"start":s=i;break;case"end":i=s}n.selectionStart=i,n.selectionEnd=s},_getSuggestionIndex:function(e){if(t.is(e)||(e=this._currentSuggestionIndex,t.is(e)))return e.nodeType?e=this.elements.suggestions.getElements(".suggestion").indexOf(e):"object"==typeof e&&(e=this._displayedSuggestions.indexOf(e)),t.is(e,"number")&&e>=0?e:void 0},_getSuggestion:function(t){if(void 0!==(t=this._getSuggestionIndex(t)))return this._displayedSuggestions?this._displayedSuggestions[t]:void 0},_getSuggestionElement:function(t){if(void 0!==(t=this._getSuggestionIndex(t)))return this.elements.suggestions.getElements(".suggestion")[t]},_resetSuggestion:function(t){if(this._getSuggestion()){if(e.invoke(this.elements.suggestions.getElements(".current"),"removeClassName","current"),this.options.multiline&&this.elements.input.setInlineText(""),!1!==t&&this.options.previewSuggestion){var n=this._previousValue||"",i=this._getParts();i.between=n,this._setParts(i,"end")}this._previousValue=null,this._currentSuggestionIndex=null}},_getSuggestionParts:function(t){var e,n=this.getInputElement();return t.inlineValue?((e=this._getParts()).previous=e.between,e.between=t.inlineValue):t.fullValue&&((e=this._getParts(void 0!==t.start?t.start:0,void 0!==t.end?t.end:n.value.length+t.fullValue.length)).previous=e.between,e.between=t.fullValue),e},_highlightSuggestion:function(t){if(void 0!==(t=this._getSuggestion(t))){this._resetSuggestion(),this._currentSuggestionIndex=this._getSuggestionIndex(t);var e=this._getSuggestionElement(t),n=e.getParent(".category");e.addClassName("current"),s.scrollToElement(e),n&&n.addClassName("current");var i=this._getSuggestionParts(t);this._isInlineSuggestionAvailable(t)?this.elements.input.setInlineText(i.between):this.options.previewSuggestion&&this._setParts(i,"around"),this._previousValue=i.previous}},_isInlineSuggestionAvailable:function(t){var e=this.getInputElement();return t.inlineValue&&this.options.multiline&&e.selectionStart===e.value.length},_setSuggestion:function(t,e){(t=this._getSuggestion(t))&&(this._resetSuggestion(),this._setParts(this._getSuggestionParts(t),e&&e.selectionAtStart?"start":"end"),this.hideSuggestions(),this.dispatchEvent("onSetSuggestion",[t]),this.getInputControl()._dispatchOnChange())},onHideSuggestions:function(){this.elements.container.removeClassName("suggestions-displayed")},onShowSuggestions:function(){this.elements.container.addClassName("suggestions-displayed")},onClick:function(){this.elements.input.focus()},onKeyDown:function(t){var e=this,n=h.whichKey(t),i=null!==this._currentSuggestionIndex,s=!0;function o(){return Array.prototype.indexOf.call(arguments,n)>=0}function a(){e.setDelayed("updateSuggestions",e.updateSuggestions.bind(e,{resetInput:!1}),5)}function r(){e.dispatchEvent("onSubmit",[e.getValue()])}function l(t){var n=e._currentSuggestionIndex,i=e._displayedSuggestions.length;null===n&&(n=t<0?i:-1),e._highlightSuggestion(e._getSuggestion((n+t+i)%i))}this.areSuggestionsDisplayed()?o("up","shift+tab")?l(-1):o("down","tab")?l(1):o("return")&&i?this._setSuggestion(null,{selectionAtStart:o("left")}):o("return")&&this.hasEvent("onSubmit")?(this.hideSuggestions({resetInput:!1}),r()):o("esc")?this.hideSuggestions():o("shift")||(a(),s=!1):o("return")&&this.hasEvent("onSubmit")?r():(a(),s=!1),s&&h.stop(t)}}),t.namespace("Controls/Autocomplete",p,t)}.apply(e,i))||(t.exports=s)},function(t,e){var n={}.hasOwnProperty;t.exports=function(t,e){return n.call(t,e)}},function(t,e,n){var i=n(49),s=n(125);t.exports=n(48)?function(t,e,n){return i.f(t,e,s(1,n))}:function(t,e,n){return t[e]=n,t}},function(t,e,n){var i=n(166),s=n(101);t.exports=function(t){return i(s(t))}},function(t,e,n){var i,s;i=[n(1),n(649)],void 0===(s=function(t,e){"use strict";var n=e.extend({type:"Object",limit:0,connect:function(t){this.database=t,this.db={},this.storage.isReady=!0},isAvailable:function(){return!0},get:function(t){return this.db[t]},set:function(t,e){return this.interruptAccess(),this.db[t]=e,e},rem:function(t){this.interruptAccess();var e=this.get(t);return delete this.db[t],e}});return t.namespace("Storage/Adapter/Object",n,t)}.apply(e,i))||(t.exports=s)},function(t,e,n){var i,s;i=[n(1),n(9),n(22)],void 0===(s=function(t,e,n){"use strict";var i=e.extend(n,{init:function(t,e){this.widget=t,this.environment=t.environment,this.setOptions(e)},dispatchEvent:function(t,e,n){this.environment.dispatchEvent(t,e,n)},addEvent:function(t,e,n,i){this.environment.addEvent(t,e,n||this,i)},addEvents:function(t,e,n){var i;for(i in t)t.hasOwnProperty(i)&&this.addEvent(i,t[i],e,n)},removeEvent:function(t,e){this.environment.removeEvent(t,e)}});return t.namespace("Plugins/Abstract",i,t)}.apply(e,i))||(t.exports=s)},function(t,e,n){var i,s;i=[n(1),n(15),n(19)],void 0===(s=function(t,e,n){"use strict";window._||(window._=function(t){return t}),t.$=function(t,n){return e.getElement.call(n||document.documentElement,t)},t.$$=function(t,n){return e.getElements.call(n||document.documentElement,t)},e.addClassName.call(document.documentElement,n.Features.touchEvents?"touch":"no-touch"),n.Features.flexboxCSS&&e.addClassName.call(document.documentElement,"flexbox")}.apply(e,i))||(t.exports=s)},function(t,e,n){"use strict";if("object"==typeof App&&App.Config){var i=App.Config.webpack_public_path;i.endsWith("/")||(i+="/"),n.p=i}},function(t,e,n){"use strict";window.require||(window.require=function(t,e){if(!t||1!==t.length)throw new Error("Can't use require");switch(t[0]){case"UWA/Controls/Input":n.e(0).then(function(){var t=[n(8)];e.apply(null,t)}.bind(this)).catch(n.oe);break;case"UWA/Controls/Tag":n.e(0).then(function(){var t=[n(59)];e.apply(null,t)}.bind(this)).catch(n.oe);break;case"UWA/Controls/ColorPicker":n.e(0).then(function(){var t=[n(124)];e.apply(null,t)}.bind(this)).catch(n.oe);break;case"UWA/Controls/DatePicker":n.e(0).then(function(){var t=[n(195)];e.apply(null,t)}.bind(this)).catch(n.oe);break;default:throw new Error("Can't use require")}})},function(t,e,n){"use strict";var i,s;i=[n(9),n(4)],void 0===(s=function(t,e){var n=t.extend({name:"Node",init:function(t){if(!t&&null!==t)throw new Error("No id!");this.id=t||e.uniqueID()},replace:function(t,e){return this.map(function(n){return n.id===t.id?e:n})},map:function(t){return t(this)},each:function(t){t(this)},removeFacet:function(t){return this.map(function(e){if(e instanceof s&&e.getFacets().includes(t)){var n=e.getFacets().filter(function(e){return t!==e});return n.length?e.cloneWith({facets:n}):void 0}return e})||this.replace(this,new i(this.id))},getFacets:function(){var t=[];return this.each(function(e){e instanceof s&&t.push.apply(t,e.getFacets())}),t}}),i=n.extend({name:"EmptyNode",toJSON:function(){return{type:"empty"}}}),s=n.extend({name:"FacetsNode",init:function(t,e,n){if(this._parent(t),!Array.isArray(e))throw new Error("Invalid facets");this._facets=e,this._settings=n||{}},getFacets:function(){return this._facets},getCaption:function(){return String(this._settings.caption||"")},getURL:function(){return String(this._settings.url||"")},isLogarithmic:function(){return Boolean(this._settings.logarithmic)},shouldFilterNullValues:function(){return Boolean(this._settings.filterNullValues)},getFacetsAggregationMethod:function(){return this._settings.facetsAggMethod||null},toJSON:function(){return{type:"facets",facets:this._facets.map(function(t){return{sourceId:t.getSource().getId(),name:t.getName()}}),settings:Object.assign({},this._settings)}},cloneWith:function(t){return new s("id"in t?t.id:this.id,t.facets||this._facets,t.settings||this._settings)}}),o=n.extend({name:"SplitNode",init:function(t,e,n,i){if(2!==e.length)throw new Error("Invalid child count");this._parent(t),this._children=e,this._splitVertical=void 0===n||n,this._splitRatio=void 0===i?.5:i},getChildren:function(){return this._children},isSplitVertical:function(){return this._splitVertical},getSplitRatio:function(){return this._splitRatio},toJSON:function(){return{type:"split",vertical:this._splitVertical,ratio:this._splitRatio,children:this._children.map(function(t){return t.toJSON()})}},map:function(t){var e=this._parent(t);if(e!==this)return e;var n=!1,i=this.getChildren().map(function(e){var i=e.map(t);return i!==e&&(n=!0),i});if(n){if(!i.every(Boolean)){if(1===(i=i.filter(Boolean)).length)return i[0];if(0===i.length)return}return new o(this.id,i,this._splitVertical,this._splitRatio)}return this},each:function(t){t(this),this.getChildren().forEach(function(e){e.each(t)})}});function a(t,e){if(!t||"object"!=typeof t||!["empty","facets","split"].includes(t.type))throw new Error("Models.fromJSON: invalid json argument");switch(t.type){case"empty":return new i(null);case"split":return new o(null,t.children.map(function(t){return a(t,e)}),Boolean(t.vertical),t.ratio);case"facets":return new s(null,t.facets.map(function(t){var n=e.detect(function(e){return e.getSource().getId()===t.sourceId&&e.getName()===t.name});if(!n)throw new Error("Models.fromJSON: facet "+JSON.stringify(t)+" not found");return n}),t.settings)}}return{SplitNode:o,EmptyNode:i,FacetsNode:s,fromJSON:a,fromJSONSafe:function(t,n){if("string"==typeof t&&(t=e.tryJSONParse(t)),!t)return new i(null);try{return a(t,n)}catch(t){return console.error(t.message),new i(null)}}}}.apply(e,i))||(t.exports=s)},function(t,e,n){"use strict";var i,s;i=[n(1),n(8),n(32)],void 0===(s=function(t,e,n){return n.extend({getContent:function(){return this.elements.container||(this.elements.container=t.createElement("div",{class:this.getClassNames()}),this.elements.input=new e.Text(this.getInputOptions(this.options)),this.elements.input.inject(this.elements.container)),this.elements.container},setValue:function(t){this.elements.input.setValue(t)},getValue:function(){return this.elements.input.getValue()}})}.apply(e,i))||(t.exports=s)},function(t,e,n){var i,s;i=[n(1),n(3),n(10),n(15),n(24),n(19),n(88)],void 0===(s=function(t,e,n,i,s,o,a){"use strict";var r,l=new a.Pointy({autoPosition:["below-start","right-start","left-start","above-start"],margin:20,positionOptions:{relative:document.querySelector("body")}}),c=new s,u=n.extend({name:"uwa-tooltip",content:"",defaultOptions:{id:"uwa-tooltip",className:"",width:"auto",delay:800,showOver:!0,root:null},mousePosition:{},init:function(e,n,i){this._parent(i),this.content=n||"",this._tooltipped=t.extendElement(e),this._attachEvents()},destroy:function(){this.hide(),this._detachEvents(),this._parent()},_attachEvents:function(){if(!this._events){var t=this._events={tooltipped:{},tooltippedOnShown:{},bodyOnShown:{}};this.options.showOver&&(t.tooltipped.mouseover=this.dispatchAsEventListener("onShowTooltip"),t.tooltippedOnShown.mouseout=this.dispatchAsEventListener("onHideTooltip"),t.tooltippedOnShown.click=this.dispatchAsEventListener("onHideTooltip"),t.bodyOnShown.mousemove=this.dispatchAsEventListener("onMoveTooltip"))}this._tooltipped.addEvents(this._events.tooltipped)},_detachEvents:function(){this._events&&(this._tooltipped.removeEvents(this._events.tooltipped),this._tooltipped.removeEvents(this._events.tooltippedOnShown),i.removeEvents.call(document.querySelector("body"),this._events.bodyOnShown,!0))},buildSkeleton:function(){for(var t,e=this.options,n=i.getDocument.call(this._tooltipped),s=this.getRootNode(),o=i.getChildren.call(s),a=e.id,c=0;(t=n.getElementById(e.id))&&!(o.indexOf(t)>=0);)e.id=a+"-"+c++;return t||((t=l.getContent()).id=e.id,void 0===r&&(r=t.className),t.set("class",r+" "+this.getClassNames()),t.setStyle("width",e.width),t.inject(s)),this._tooltip=t,t},_tooltippedIsActive:function(){var t=this._tooltipped;function e(t){var e=t.getStyles(["visibility","opacity"]);return"hidden"!==e.visibility&&e.opacity>0}var n=e(t)&&t.getParents().every(e),s=o.getScrolls(),a=document.elementFromPoint(this.mousePosition.x-s.x,this.mousePosition.y-s.y),r=i.isInjected.call(a,t)||a===t;return n&&r},show:function(e,n){var i,s,o,a,r,c=t.is,u=this._tooltip,h=this._tooltipped;if(e||this._tooltippedIsActive()){if(u||(u=this.buildSkeleton()),l.getInnerElement().setContent(this.content),u.show(),c(e)){if((c(e,"string")||c(e,"object")&&c(e.x,"string")&&c(e.y,"string"))&&(e=h.getPosition(!1,e),a={relative:this._tooltipped.getOffsetParent()},n))for(r=u.getDimensions(),i=0;i<2;i+=1)o=i?"width":"height",e[s=i?"x":"y"]=e[s]-r[o]/2}else e=this.mousePosition,a={relative:document.querySelector("body")};return u.addClassName("show"),l.setPosition(e,a),this.visible=!0,this.dispatchEvent("onShow"),this}},hide:function(){var t=this._tooltip;return this.visible&&(t.removeClassName("show"),t.hide(),this.dispatchEvent("onHide")),c.clearDelayed(),this.visible=!1,this},toggle:function(){this.visible?this.hide():this.show()},setDelay:function(){var t=this,e=t.options.delay;t.visible||c.setDelayed("tooltip",function(){t.show()},e)},onShowTooltip:function(t){this.mousePosition=e.getPosition(t),this._tooltipped.addEvents(this._events.tooltippedOnShown),i.addEvents.call(document.querySelector("body"),this._events.bodyOnShown,null,null,!0),this.options.delay?this.setDelay():this.show()},onMoveTooltip:function(t){var n=this.options.delay;this.mousePosition=e.getPosition(t),n>0?(this.hide(),this.setDelay()):l.setPosition(this.mousePosition)},onHideTooltip:function(){this._tooltipped.removeEvents(this._events.tooltippedOnShown),i.removeEvents.call(document.querySelector("body"),this._events.bodyOnShown,!0),this.hide()},getRootNode:function(){return this.options.root||this._tooltipped.getOffsetParent()}});return e.onDomReady(function(){if(!o.Features.touchEvents){var t,n,s=document.querySelector("body"),a=0;i.addEvent.call(s,"mouseover [uwa-tooltip]",function(i){var o=e.getElement(i);if(o&&o.getAttribute("uwa-tooltip")&&(o!==t||n!==o.getAttribute("uwa-tooltip"))){t=o,n=o.getAttribute("uwa-tooltip");var r="true"===o.getAttribute("uwa-tooltip-quick"),l=Number(o.getAttribute("uwa-tooltip-delay"))||800,c=!!(r&&Date.now()-a<500)&&200;o.set("title","");var h=new u(o,o.getAttribute("uwa-tooltip"),{root:s,delay:c||l});h.dispatchEvent("onShowTooltip",[i]),r&&(h.addEvent("onShow",function(){h.setOption("delay",l)}),h.addEvent("onHide",function(){a=Date.now()}))}})}}),t.namespace("Controls/ToolTip",u,t)}.apply(e,i))||(t.exports=s)},function(t,e,n){var i,s;i=[n(1),n(15)],void 0===(s=function(t,e){"use strict";var n,i=Object.create(null);function s(t,e){var n=t.getAttribute(e)||t.getAttribute("data-"+e);return t.removeAttribute(e),t.removeAttribute("data-"+e),n}function o(t,e){e||(e=t.prototype.name),i[e]=t}function a(e,n){var s,o,a,r,l=i[e];t.owns(i,e)?t.is(l,"string")?(o=n,a=(s=(s=l).split(" "))[0],r=s[1]?s[1].split("."):[],(window.require||window.curl)([a],function(t){r.forEach(function(e){t=t[e]}),o(null,t)})):n(null,l):n("Control "+e+" not found")}return o("UWA/Controls/Tag","uwa-tag"),o("UWA/Controls/Input Text","uwa-text"),o("UWA/Controls/Input Button","uwa-button"),o("UWA/Controls/Input File","uwa-file"),o("UWA/Controls/Input Select","uwa-select"),o("UWA/Controls/Input Checkbox","uwa-checkbox"),o("UWA/Controls/Input Radio","uwa-radio"),o("UWA/Controls/ColorPicker","uwa-colorpicker"),o("UWA/Controls/DatePicker","uwa-datepicker"),n={register:o,parse:function(n,i){i||(i={});var o,r=e.getElements.call(n,"[uwa-control],[data-uwa-control]"),l=r.length,c={};function u(t,e,n,s){l--,n?(o=n,i.onError&&i.onError(n)):function(t,e){t.indexOf("[]",t.length-2)>-1?(t=t.slice(0,-2),c[t]||(c[t]=[]),c[t].push(e)):c[t]=e}(e,s),0===l&&(i.onComplete&&i.onComplete(c,o),!o&&i.onSuccess&&i.onSuccess(c))}r.forEach(function(e,n){!function(e,n,i){a(n,function(s,o){var a,r=function(t){var e=t.parentNode,n=t.nextSibling;return e&&e.removeChild(t),function(i){i||(i=t),i.inject?i.inject(n||e,n&&"before"):e.insertBefore(i,n)}}(e);if(!s){if(t.is(o,"class")){var l={element:e};e.className&&(l.className=e.className,e.className=""),a=new o(l)}else t.is(o,"function")&&(a=o(e));a?r(a):s="Can't build the control "+n}i(s,a)})}(e,s(e,"uwa-control"),u.bind(null,n,s(e,"uwa-name")||"lostAndFound[]"))})},_tests:{getControl:a}},t.namespace("Services/ControlParser",n,t)}.apply(e,i))||(t.exports=s)},function(t,e,n){"use strict";var i,s;i=[n(1),n(3),n(19),n(26),n(108),n(58),n(2),n(350),n(4),n(52)],void 0===(s=function(t,e,n,i,s,o,a,r,l,c){var u=t.createElement;return s.extend({name:"nv-modal",defaultOptions:{exclusive:!0,draggable:!1,closeable:!0,displayCloseButton:!0,backgroundVisible:!1,overlayOpacity:.6,fullscreenable:!1,transition:"slide-botton",fxOptions:{duration:0}},init:function(t){t.backgroundVisible&&(t.overlayOpacity=0),a.isIn3DDashboard()&&!t.overlayOpacity&&(t.overlayOpacity=.85),this._parent(t),this.elements.container.addEventListener("scroll",function(t){this.dispatchEvent("onScroll",t)}.bind(this)),this.elements.container.setStyles({height:"0",display:"block"}),this._keyboardShortcuts={esc:function(){this.close()}.bind(this)}},getModalBox:function(){return this.elements.modal},open:function(){var t=this.options,e="rgba(0, 0, 0, "+t.overlayOpacity+")";if(a.isIn3DDashboard()&&(e="rgba(220, 220, 220, "+t.overlayOpacity+")"),(t.closeable||t.displayCloseButton)&&c.pushFocus(this._keyboardShortcuts),this.debouncedOnResizeEvent=l.debounce(this.onResizeEvent,10,this),window.addEventListener("resize",this.debouncedOnResizeEvent),this.elements.container.setStyles({height:"auto",display:"none"}),this._parent(),this.setModalPosition(),this.options.backgroundVisible||document.body.setStyle("overflow","hidden"),"none"!==t.transition){new i(this.elements.container,{duration:200,transition:"quadOut"}).start({backgroundColor:e});var n=document.body.getSize().height,s=this._getModalSize().top,o={opacity:[0,1]};"fade"!==t.transition&&Object.assign(o,{top:[n,s]}),new i(this.elements.modal,{duration:250,transition:"quadOut",events:{onComplete:function(){this._scrollTop(),this.options.scrollingOverlay&&this.elements.container.addClassName("scrolling-overlay")}.bind(this)}}).start(o),r.adjustFrameToViewportSize(!0)}else this.elements.container.setStyle("background-color",e)},close:function(){var t=this.options,e="none"!==t.transition;c.popFocus(this._keyboardShortcuts),window.removeEventListener("resize",this.debouncedOnResizeEvent),document.body.removeClassName("nv-modal-fullscreen-displayed");var n=function(){this.toggle(!1),t.backgroundVisible||document.body.setStyle("overflow",""),this.elements.container&&this.elements.container.removeClassName("is-closing").setStyles({height:"0"})};if(!e)return this.elements.container.setStyles({"background-color":"rgba(0, 0, 0, 0)",height:"auto"}),void n.call(this);this.elements.container.addClassName("is-closing"),new i(this.elements.container,{duration:200,transition:"quadOut"}).start({backgroundColor:"rgba(0, 0, 0, 0)"});var s=document.body.getSize().height;new i(this.elements.modal,{duration:250,transition:"quadInOut",events:{onComplete:n.bind(this)}}).start({top:s}),this._restoreScroll(),r.adjustFrameToViewportSize(!1)},getContainer:function(){return this.elements.modalBody},addContent:function(t){this.elements.modalBody.addContent(t)},setContent:function(t){this.elements.modalBody.setContent(t)},setTitle:function(t){this.elements.titleText.setContent(t)},refreshPosition:function(){this.setModalPosition()},changeSize:function(e){this.options.size.width=t.is(e.width)?e.width:this.options.size.width,this.options.size.height=t.is(e.height)?e.height:this.options.size.height,this.options.size.margin=t.is(e.margin)?e.margin:this.options.size.margin,this.setModalPosition()},isFullScreen:function(){var t=document.body.getSize(),e=this.options,i=e.size&&e.size.margin||0,s=e.size||{};return 0!==Object.keys(s).length&&("full"===s.width&&"full"===s.height||e.fullscreenable&&(n.Platform.tablet||t.width<e.size.width+2*i))},setOverlayOpacity:function(t){t="number"==typeof t?t:this.options.overlayOpacity,new i(this.elements.container,{duration:200,transition:"quadOut"}).start({backgroundColor:"rgba(0, 0, 0, "+parseFloat(t,10)+")"})},buildSkeleton:function(){this._parent();var t=this.options;if(this.elements.container.addClassName("uwa-font-aa"),this.elements.container.toggleClassName("fullscreenable",t.fullscreenable),this.elements.container.toggleClassName("draggable",t.draggable),t.displayCloseButton){var e=/\bwizard\b/.test(this.options.className)?" uwa-icon-only nv-close-icon":"";this.elements.closeBtn=u("div",{class:this.getClassNames("-box-header-closebtn")+" uwa-icon delete"+e,title:_("Close")}),this.elements.closeBtn.addEventListener("click",this.onCloseEvent.bind(this))}t.title&&(this.elements.title=u("div",{class:this.getClassNames("-box-header-title")}).addContent(u("div",{class:this.getClassNames("-box-header-title-fullscreen")+" uwa-icon","data-icon":t.fullScreenIcon||"",text:_("Netvibes")})," ",this.elements.titleText=u("div",{class:this.getClassNames("-box-header-title-content")}).addContent(t.title))),(this.elements.title||this.elements.closeBtn)&&(this.elements.modalHeader=u("div",{class:this.getClassNames("-box-header")}).addContent(this.elements.title,this.elements.closeBtn)),this.elements.modal=u("div",{class:this.getClassNames("-box")}).addContent(this.elements.modalHeader,this.elements.modalBody=u("div",{class:this.getClassNames("-box-body")})),this.elements.container.setContent(this.elements.modal)},setModalPosition:function(){var t=this.isFullScreen(),e=this.options,n=e.size||{};if(this.elements.container.toggleClassName("no-width",!n.width).toggleClassName("no-height",!n.height).toggleClassName("fullscreen",t),document.body.addClassName("nv-modal-fullscreen-displayed",t),this.elements.modal.setStyles(this._getModalSize()),this.dispatchEvent("onPositionUpdate"),e.draggable){new o.Move({delegate:".nv-modal-box-header-title-content,.nv-modal-box-header",handles:function(){return this.elements.modal}.bind(this)})}},_getModalSize:function(){var e={},i=this.options.size||{},s=document.body.getElement("#top"),o=document.body.getElement("#divTabs"),a=n.getSize(),r=i.margin||0,l={width:a.width-2*r,height:a.height-2*r};if(this.isFullScreen())return{width:this.options.scrollingOverlay?"100%":a.width,height:this.options.scrollingOverlay?"100%":a.height,top:0,left:0};if("full"===i.width?e.width=l.width:t.is(i.width,"number")?e.width=i.width:e.maxWidth=l.width,"full"===i.height?e.height=l.height:"below-topbar"===i.height&&s?(e.top=s.getBoundingClientRect().bottom+n.getScrolls().y+10,e.height=a.height-e.top):"below-topbar"===i.height?e.height=l.height:"below-tabs"===i.height&&o?(e.top=o.getBoundingClientRect().bottom+n.getScrolls().y+10,e.height=a.height-e.top):"below-tabs"===i.height?e.height=l.height:t.is(i.height,"number")?e.height=i.height:e.maxHeight=l.height,i.top&&(e.top=i.top),!e.top){var c=e.height||this.elements.modalBody.getElement(" > *").scrollHeight+(this.elements.modalHeader?this.elements.modalHeader.scrollHeight:0);e.top=Math.max(parseInt(a.height/2-c/2),r)}if(!e.left){var u=e.width||this.elements.modalBody.getElement(" > *").getSize().width;e.left=parseInt(a.width/2-u/2)}return e},_scrollTop:function(){this.options.size&&("below-topbar"!==this.options.size.height&&"below-tabs"!==this.options.size.height||(this._previousScroll=n.getScrolls().y,window.scrollTo(0,0)))},_restoreScroll:function(){void 0!==this._previousScroll&&(window.scrollTo(0,this._previousScroll),this._previousScroll=void 0)},onResizeEvent:function(){this.setModalPosition()},onCloseEvent:function(t){var n=e.findElement(t,".nv-modal-box-header-closebtn"),i=e.findElement(t,".nv-modal-box");i&&!n||!i&&!this.options.isCloseable||this.close()}})}.apply(e,i))||(t.exports=s)},function(t,e,n){"use strict";var i=n(29);t.exports=function(t,e){return!!t&&i(function(){e?t.call(null,function(){},1):t.call(null)})}},function(module,exports,__webpack_require__){var __WEBPACK_AMD_DEFINE_ARRAY__,__WEBPACK_AMD_DEFINE_RESULT__;__WEBPACK_AMD_DEFINE_ARRAY__=[__webpack_require__(1),__webpack_require__(18),__webpack_require__(13),__webpack_require__(19),__webpack_require__(267)],__WEBPACK_AMD_DEFINE_RESULT__=function(UWA,UWAString,Utils,Client,Ajax){"use strict";var Json={jsonp:{},encode:JSON.stringify,decode:JSON.parse,prune:function(t,e){var n=[],i=e&&e.toJSON||function(t){return UWA.is(t)&&UWA.is(t.toJSON,"function")?t.toJSON():t},s=e&&e.fallback||function(){return null};return function t(e){var o,a;switch(e=i(e),UWA.typeOf(e)){case"string":case"number":case"boolean":return e;case"array":return-1!==n.indexOf(e)?s(e,"circular"):(n.push(e),o=e.map(t),n.pop(),o);case"object":if(!UWA.is(e,"plain"))return s(e,"unsupported");if(-1!==n.indexOf(e))return s(e,"circular");for(a in n.push(e),o={},e)UWA.owns(e,a)&&(o[a]=t(e[a]));return n.pop(),o;default:return null===e?e:s(e,"unsupported")}}(t)},isJson:function(t){var e=!1;if(UWA.is(t,"string"))try{JSON.parse(t),e=!0}catch(t){}return e},xmlToJson:function(t){var e,n,i,s,o,a,r=function(){return this.nodeValue},l=function(){return parseInt(this.nodeValue,10)};if("string"==typeof t&&(t=Utils.loadXml(t)),t.attributes&&0!==t.attributes.length||!t.childNodes||1!==t.childNodes.length||-1===t.childNodes[0].nodeName.indexOf("#")){if(i={},t.attributes)for(e=0,n=t.attributes.length;e<n;e++)i[a=(o=t.attributes[e]).nodeName]?(i[a]=Utils.splat(i[a]),i[a].push(o.nodeValue)):i[a]=o.nodeValue;for(e=0,n=t.childNodes.length;e<n;e++)i[a=(s=t.childNodes[e]).nodeName]?(i[a]=Utils.splat(i[a]),i[a].push(Json.xmlToJson(s))):-1===a.indexOf("#")?i[a]=Json.xmlToJson(s):s.nodeValue.trim().length>0&&(i.nodeValue=s.nodeValue,i.toString=r,i.valueOf=l)}else i=t.childNodes[0].nodeValue;return i},path:function(){var valueStr="VALUE",pathStr="PATH",sepStr=";",queryPath="$",regExps=[/[\['](\??\(.*?\))[\]']|\['(.*?)'\]/g,/'?\.'?|\['?/g,/;;;|;;/g,/;$|'?\]|'$/g,/#([0-9]+)/g,/^\$;?/,/(^|[^\\])@/g,/\\@/g,/^[0-9*]+$/,/^(-?[0-9]*):(-?[0-9]*):?(-?[0-9]*)$/g,/^\(.*?\)$/,/^\?\(.*?\)$/,/^\?\((.*?)\)$/,/^(-?[0-9]*):(-?[0-9]*):?([0-9]*)$/,/,/,/'?,'?/];function normalize(t){var e=[];return t.replace(regExps[0],function(t,n,i){return"[#"+(e.push(n||i)-1)+"]"}).replace(regExps[1],sepStr).replace(regExps[2],";..;").replace(regExps[3],"").replace(regExps[4],function(t,n){return e[n]}).replace(regExps[5],"")}function run(obj,query,val){var queryEval="var valueEval = arguments[2];"+query.replace(regExps[6],"$1valueEval").replace(regExps[7],"@");try{return obj&&val&&eval(queryEval)}catch(t){throw new SyntaxError("UWA.Json.path error: "+t.message+' for query "'+query+'"')}}function asPath(t){var e,n,i=t.split(sepStr),s=queryPath;for(e=1,n=i.length;e<n;e++)s+=regExps[8].test(i[e])?"["+i[e]+"]":"['"+i[e]+"']";return s}function store(t,e,n,i){return t&&(n[n.length]=i===pathStr?asPath(t):e),Boolean(t)}function walk(t,e,n,i,s){var o,a,r,l=UWA.typeOf(n);if("array"===l)for(o=0,a=n.length;o<a;o++)n.hasOwnProperty(o)&&s(o,t,e,n,i);else if("object"===l)for(r in n)n.hasOwnProperty(r)&&s(r,t,e,n,i)}function slice(t,e,n,i,s,o){if(Array.isArray(n)){var a,r=n.length,l=0,c=1,u=r;for(t.replace(regExps[9],function(t,e,n,i){l=parseInt(e||l,10),u=parseInt(n||u,10),c=parseInt(i||c,10)}),l=l<0?Math.max(0,l+r):Math.min(r,l),u=u<0?Math.max(0,u+r):Math.min(r,u),a=l;a<u;a+=c)trace(a+sepStr+e,n,i,s,o)}}function trace(t,e,n,i,s){if(""!==t){var o,a,r,l=t.split(sepStr),c=l.shift();if(l=l.join(sepStr),e&&e.hasOwnProperty(c))trace(l,e[c],n+sepStr+c,i,s);else if("*"===c)walk(c,l,e,n,function(t,e,n,o,a){trace(t+sepStr+n,o,a,i,s)});else if(".."===c)trace(l,e,n,i,s),walk(c,l,e,n,function(t,e,n,o,a){"object"==typeof o[t]&&trace("..;"+n,o[t],a+sepStr+t,i,s)});else if(regExps[10].test(c))trace(t=run(e,c,e,n.substr(n.lastIndexOf(sepStr)+1))+sepStr+l,e,n,i,s);else if(regExps[11].test(c))walk(c,l,e,n,function(t,n,o,a,r){run(e,n.replace(regExps[12],"$1"),Array.isArray(a)?a[t]:a,t)&&trace(t+sepStr+o,a,r,i,s)});else if(regExps[13].test(c))slice(c,l,e,n,i,s);else if(regExps[14].test(c))for(a=0,r=(o=c.split(regExps[15])).length;a<r;a++)trace(t=o[a]+sepStr+l,e,n,i,s)}else store(n,e,i,s)}return function(t,e,n){var i=[],s=n&&n.resultType||valueStr;return t&&e&&(s===valueStr||s===pathStr)&&trace(normalize(e),t,queryPath,i,s),!!i.length&&i}}(),request:function(t,e){var n,i,s,o,a,r,l,c,u,h,d,p,m,f=!!(e=e||{}).useJsonpRequest||!Utils.matchUrl(t,window.location)&&(UWA.Data&&UWA.Data.useJsonpRequest&&!UWA.Data.allowCrossOriginRequest),g=t,v=Client.isOnline,b=Json.jsonp,y={fromDataRequest:!1,useOfflineCache:!1,async:!0,timeout:!1,callback:"jsonp"+(Date.now()+Utils.random(1,1e4)),callbackName:"callback",callbackMode:"function",callbackModeName:"callbackMode",onCancel:function(){},onFailure:function(t){throw t},onComplete:function(){}};if(!1===(e=UWA.merge(e||{},y)).timeout?e.useOfflineCache?e.timeout=15e3:e.timeout=25e3:e.timeout=parseInt(e.timeout,10),e.data&&(t+=(t.indexOf("?")>-1?"&":"?")+Utils.toQueryString(e.data)),i=e.callback.replace(/[^a-zA-Z0-9_]/g,"$"),(s=e.callbackMode)&&(t=t.replace(/\=(\?|%3F)/g,"="+i),t+=(t.indexOf("?")>-1?"&":"?")+e.callbackName+"="+i,t+="&"+e.callbackModeName+"="+s),t.length>2048)throw new Error("Proxified url is more than 2048 characters, you should consider using POST and CORS Ajax.");return o=e.onFailure,r=e.onTimeout||o,a=e.onComplete,l=e.useOfflineCache,c=e.fromDataRequest,e.onFailure=function(t){if(Json.cleanRequest(i,e),l&&!1===c){var n=Json.getFromCache(g);UWA.is(n)?(v()&&v(!1,5e3),a(n)):o(t)}else o(t)},e.onTimeout=function(t){if(Json.cleanRequest(i,e),l&&!1===c){var n=Json.getFromCache(g);UWA.is(n)?(v()&&v(!1,5e3),a(n)):r(t)}else r(t)},e.onComplete=function(t){Json.cleanRequest(i,e);try{if(c&&t&&t.error&&t.error.type&&"UWA_Platform_Exposition"===t.error.type)throw new Error(UWAString.format('ObjectError: url "{0}" return Error with value "{1}"',c,t.error.message||t.error));a(t)}catch(t){o(t)}},e.cache<0&&(t+=(t.indexOf("?")>-1?"&":"?")+"_="+Date.now()),l&&!1===v()?e.onFailure(new Error("Network is Offline")):f?(b[i]={readyState:!1,options:e},"object"===s?(d=Date.now(),p=13,m=function(){var t,n=Date.now();void 0!==window[i]?(b[i].readyState="loaded",e.onComplete(window[i])):n>d+e.timeout?(t=n-d,e.onTimeout(new Error("Request timed out after "+t+"ms with timeout value "+e.timeout+" ms"))):b[i].poll=setTimeout(m.bind(this),p)}):(window[i]=function(t){void 0!==b[i]&&(b[i].data=t,b[i].readyState="loaded")},d=Date.now(),p=13,m=function(){var t,n=Date.now();"loaded"===b[i].readyState?e.onComplete(b[i].data):n>d+e.timeout?(t=n-d,e.onTimeout(new Error("Timout request after "+t+"ms with timeout value "+e.timeout+" ms"))):b[i].poll=setTimeout(m.bind(this),p)}),u=document.getElementsByTagName("head")[0],(h=UWA.createElement("script",{type:"text/javascript",src:t,async:e.async})).addEvent("error",function(){e.onFailure(new Error("Syntax or http error: "+t))}),h.inject(u),b[i].script=h,m(e),n={jsonId:i,script:h,cancel:function(){b[i].aborted=!0,Json.cleanRequest(i)}}):n=Ajax.request(t,UWA.merge({headers:{Accept:"application/json,text/javascript,*/*","X-Request":"JSON"},onComplete:function(t){var n;s&&!Json.isJson(t)&&((n="object"===s?t.match(/=\s\(?([\s\S]*?)\)?;?\s*$/):t.match(/\(([\s\S]*?)\);?\s*$/))&&(t=n[1]));Json.isJson(t)?e.onComplete(UWA.Json.decode(t)):e.onFailure(new Error('Invalid JSON Response: "'+t+'"'))},onFailure:e.onFailure},e)),n},cleanRequest:function(t){var e,n=document.getElementsByTagName("head")[0],i=Json.jsonp[t];i&&(e=i.options,clearTimeout(i.poll),"object"!==e.callbackMode&&(window[t]=function(){try{delete window[t]}catch(t){}}),i.script&&(n.removeChild(i.script),delete i.script),i.aborted&&e.onCancel(null,e))}};return UWA.namespace("Json",Json,UWA)}.apply(exports,__WEBPACK_AMD_DEFINE_ARRAY__),void 0===__WEBPACK_AMD_DEFINE_RESULT__||(module.exports=__WEBPACK_AMD_DEFINE_RESULT__)},function(t,e,n){"use strict";var i,s;i=[n(15)],void 0===(s=function(t){var e,n,i=0;function s(t,n){if(!t.getAttribute){if(n)throw new Error("Invalid element");return{}}var s=t.getAttribute("data-storage"),o=s&&e[s];return!o&&n&&(s=++i,t.setAttribute("data-storage",i),o=e[s]={}),o||{}}function o(t,e){return s(t)[e]}function a(t,e,n){s(t,!0)[e]=n}return e={},n=t.destroy,t.storage=function(t,e){switch(arguments.length){case 0:return s(this);case 1:return o(this,t);case 2:return a(this,t,e),this}},t.destroy=function(){return this.getAttribute&&(e[this.getAttribute("data-storage")]=null),n.call(this)},{get:o,set:a}}.apply(e,i))||(t.exports=s)},function(t,e,n){var i,s;i=[n(1),n(3),n(15),n(10),n(19),n(53)],void 0===(s=function(t,e,n,i,s,o){"use strict";var a,r=s.Features.eventCapture;return(a=i.extend({name:"uwa-dropdown",defaultOptions:{position:{},positionOptions:{boundary:"auto"},global:!1},init:function(t){this._parent(t),this.clickOutsideEvent=function(t){var n=t&&e.getElement(t),s=this.elements.container,o=n.isInjected(s),a=i._getClosestControlsFromElement(n).some(function(t){return t.getContent().isInjected(s)});o||a||this.dispatchEvent("onClickOutside",[t])}.bind(this)},destroy:function(){this.hide(),this._parent()},getContent:function(){var n=this.elements;return n.container||(n.container=t.createElement("div",{class:this.getClassNames()+(this.options.global?" global":""),events:{click:this.dispatchEvent.bind(this,"onClick"),mouseleave:this.dispatchEvent.bind(this,"onMouseLeave")}}),this.options.global?(n.bacon=t.createElement("div",{class:this.getClassNames("-bacon")}).hide(),this._scrollPrevention=function(t){var n=e.getElement(t),i=this.getInnerElement();i===n||n.isInjected(i)||e.preventDefault(t)}.bind(this),o.preventParentScroll(n.container,{onlyScrollable:!1})):n.container.hide(),i._linkElementToControl(this,n.container),r||(n.capture=t.createElement("div",{styles:{width:"100%",height:"100%",position:"absolute",zIndex:1e3,top:0,left:0},events:{click:this.clickOutsideEvent}}))),n.bacon||n.container},onClick:function(t){e.stopPropagation(t),this.hide()},onPostInject:function(){this.updatePosition()},onShow:function(){this.options.global&&(this.elements.container.inject(document.body),n.addEvent.call(document.body,"mousewheel",this._scrollPrevention,null,!0)),this.updatePosition(),this.hasEvent("onClickOutside")&&(r?n.addEvent.call(document,"click",this.clickOutsideEvent,null,0,!0):this.elements.capture.inject(document.body))},onHide:function(){this.options.global&&(this.elements.container.remove(),n.removeEvent.call(document.body,"mousewheel",this._scrollPrevention,!0)),r?n.removeEvent.call(document,"click",this.clickOutsideEvent,!0):this.elements.capture.remove()},onRemoved:function(){var t=this.elements,e=t.bacon||t.container;e&&e.hide(),this.options.global&&t.container&&t.container.remove(),this._scrollPrevention&&n.removeEvent.call(document.body,"mousewheel",this._scrollPrevention,!0)},isOpen:function(){return!!this.elements.container&&"none"!==this.getContent().getStyle("display")},toggle:function(e){return t.is(e)||(e=!this.isOpen()),this[e?"show":"hide"](),this},setPosition:function(e,n){return t.extend(this.options,{position:e,positionOptions:n||{}},!0),this.updatePosition()},updatePosition:function(){function e(e){return t.is(e,"function")?e():e}return function(){return this.isOpen()&&(this.dispatchEvent("onPreUpdatePosition"),this.elements.container.setPosition(e(this.options.position),e(this.options.positionOptions))),this}}(),getInnerElement:function(){return this.getContent(),this.elements.container}})).Pointy=a.extend({name:"uwa-pointydropdown",defaultOptions:{autoPosition:["below-center","right-center","left-center","above-center"],margin:12},updatePosition:function(){this.dispatchEvent("onPreUpdatePosition");var e,n,i,s,o=this.options,a=o.margin;return e=o.target?o.target.getDimensions():{width:0,height:0},n=this.elements.container.getDimensions(),i=o.autoPosition.map(function(t){var i=(t=t.split("-"))[0],s=t[1]||"center",r={x:0,y:0};return r.place=i,r.align=s,"below"===i?r.y=e.height+a:"above"===i?r.y=-n.outerHeight-a:"center"===s?r.y=e.height/2-n.outerHeight/2:"end"===s&&(r.y=Math.max(e.height,30)-n.outerHeight),"left"===i?r.x=-n.outerWidth-a:"right"===i?r.x=e.width+a:"center"===s?r.x=e.width/2-n.outerWidth/2:"end"===s&&(r.x=Math.max(e.width,30)-n.outerWidth),o.target||(r.x+=o.position.x||0,r.y+=o.position.y||0,"center"!==s&&("right"!==i&&"left"!==i||(r.y-=15),"above"!==i&&"below"!==i||(r.x-=15))),r}),this.isOpen()&&((s=this.elements.container).setPosition(i,t.merge({relative:o.target},this.options.positionOptions)),i=i[0],this._containerClassName&&s.removeClassName(this._containerClassName),this._containerClassName=i.place+" "+i.align,s.addClassName(this._containerClassName),this.updatePointPosition(i.place)),this},updatePointPosition:function(t){var e=this.options.target,n=this.elements.container,i=n.getSize(),s=n.getOffsets(),o=e?e.getSize():{height:0,width:0},a=e?e.getOffsets():this.options.position,r={bottom:null,left:null,right:null,top:null};a.x-=s.x,a.y-=s.y,"below"===t||"above"===t?(r.left=a.x+o.width/2,(r.left<10||r.left>i.width-10)&&(r.left=i.width/2),"below"===t?r.top=0:r.bottom=0):(r.top=a.y+o.height/2,(r.top<10||r.top>i.height-10)&&(r.top=i.height/2),"right"===t?r.left=0:r.right=0),this.elements.point.setStyles(r).setText({above:"j",below:"k",left:"m",right:"l"}[t]||" ").toggleClassName("side","left"===t||"right"===t)},getInnerElement:function(){return this.getContent(),this.elements.inner},getContent:function(){var e=this.elements,n=this._parent();return e.inner||e.container.setContent(e.inner=t.createElement("div",{class:this.getClassNames("-inner")}),e.point=t.createElement("div",{class:this.getClassNames("-point")})),n}}),t.namespace("Controls/DropDown",a,t)}.apply(e,i))||(t.exports=s)},function(t,e,n){var i=n(90);t.exports=function(t,e,n){if(i(t),void 0===e)return t;switch(n){case 1:return function(n){return t.call(e,n)};case 2:return function(n,i){return t.call(e,n,i)};case 3:return function(n,i,s){return t.call(e,n,i,s)}}return function(){return t.apply(e,arguments)}}},function(t,e){t.exports=function(t){if("function"!=typeof t)throw TypeError(t+" is not a function!");return t}},function(t,e){var n=Math.ceil,i=Math.floor;t.exports=function(t){return isNaN(t=+t)?0:(t>0?i:n)(t)}},function(t,e,n){var i=n(167),s=n(125),o=n(74),a=n(112),r=n(72),l=n(313),c=Object.getOwnPropertyDescriptor;e.f=n(48)?c:function(t,e){if(t=o(t),e=a(e,!0),l)try{return c(t,e)}catch(t){}if(r(t,e))return s(!i.f.call(t,e),t[e])}},function(t,e,n){var i=n(7),s=n(47),o=n(29);t.exports=function(t,e){var n=(s.Object||{})[t]||Object[t],a={};a[t]=e(n),i(i.S+i.F*o(function(){n(1)}),"Object",a)}},function(t,e,n){var i=n(89),s=n(166),o=n(60),a=n(42),r=n(329);t.exports=function(t,e){var n=1==t,l=2==t,c=3==t,u=4==t,h=6==t,d=5==t||h,p=e||r;return function(e,r,m){for(var f,g,v=o(e),b=s(v),y=i(r,m,3),w=a(b.length),x=0,C=n?p(e,w):l?p(e,0):void 0;w>x;x++)if((d||x in b)&&(g=y(f=b[x],x,v),t))if(n)C[x]=g;else if(g)switch(t){case 3:return!0;case 5:return f;case 6:return x;case 2:C.push(f)}else if(u)return!1;return h?-1:c||u?u:C}}},function(t,e,n){var i,s;i=[n(1)],void 0===(s=function(t){"use strict";var e,n={},i=window.document,s="nv.",o=new Date("Fri, 31 Dec 9999 23:59:59 UTC"),a=null,r=null;function l(t,e){if(e=e||new Date,"number"==typeof t?t=t===1/0?o:new Date(e.getTime()+1e3*t):"string"==typeof t&&(t=new Date(t)),t&&(n=t,"[object Date]"!==Object.prototype.toString.call(n)||isNaN(n.getTime())))throw new Error("`expires` parameter cannot be converted to a valid Date instance");var n;return t}function c(t){var e=t.indexOf("=");e=e<0?t.length:e;var n,i=t.substr(0,e);try{n=decodeURIComponent(i)}catch(t){throw new Error('Could not decode cookie with key "'+i+'" ['+t+"]")}return{key:n,value:t.substr(e+1)}}function u(){a=function(t){for(var e={},n=t?t.split("; "):[],i=0;i<n.length;i++){var o=c(n[i]);void 0===e[s+o.key]&&(e[s+o.key]=o.value)}return e}(i.cookie),r=i.cookie}return n.defaults={path:"/",secure:!1},n.get=function(t){r!==i.cookie&&u();var e=a[s+t];return void 0===e?void 0:decodeURIComponent(e)},n.getAll=function(){r!==i.cookie&&u();var t={};for(var e in a)t[e.slice(s.length)]=decodeURIComponent(a[e]);return t},n.set=function(t,e,s){return(s=function(t){return{path:t&&t.path||n.defaults.path,domain:t&&t.domain||n.defaults.domain,expires:t&&t.expires||n.defaults.expires,secure:t&&void 0!==t.secure?t.secure:n.defaults.secure}}(s)).expires=l(void 0===e?-1:s.expires),i.cookie=function(t,e,n){var i=(t=(t=t.replace(/[^#$&+\^`|]/g,encodeURIComponent)).replace(/\(/g,"%28").replace(/\)/g,"%29"))+"="+(e=String(e).replace(/[^!#$&-+\--:<-\[\]-~]/g,encodeURIComponent));return i+=(n=n||{}).path?";path="+n.path:"",i+=n.domain?";domain="+n.domain:"",i+=n.expires?";expires="+n.expires.toUTCString():"",i+=n.secure?";secure":""}(t,e,s),n},n.expire=function(t,e){return n.set(t,void 0,e)},n.enabled=(e="1"===n.set("cookie.js",1).get("cookie.js"),n.expire("cookie.js"),e),t.namespace("Utils/Cookie",n,t)}.apply(e,i))||(t.exports=s)},function(t,e,n){"use strict";var i,s;i=[n(1),n(20),n(13),n(2),n(21),n(6),n(27),n(194),n(359),n(17)],void 0===(s=function(t,e,n,i,s,o,a,r,l,c){var u,h={};function d(t){return o.updateWidget({id:t.getId(),col:t.getColumnIndex(),row:t.getRowIndex(),tab:t.getTabId()})}return h.savePosition=function(t){return h.resetPositionsIfNeeded(t.getTabId(),t.getColumnIndex())||d(t)},h.resetPositionsIfNeeded=function(t,n){if(void 0===t)return e.all(s.getAll().map(function(t){return h.resetPositionsIfNeeded(t.dataObj.id)}));if(void 0===n)return e.all([1,2,3,4].map(function(e){return h.resetPositionsIfNeeded(t,e)}));var i,o=c.getByColumn(n,t).filter(function(t){return t.getId()}),a=!1;for(i=1;i<o.length;i++)if(o[i].getRowIndex()-o[i-1].getRowIndex()<4){a=!0;break}return!!a&&e.all(o.map(function(t,e){var n=t.dataObj.row;t.dataObj.row=1e3*(e+1);var i=d(t);return i.fail(function(){t.dataObj.row=n}),i}))},i.onReady(function(){var e,n;function o(t){var e;return c.getAll().forEach(function(n){n.getTabId()===t.getTabId()&&n.getColumnIndex()===t.getColumnIndex()&&n.getRowIndex()>t.getRowIndex()&&(!e||e.getRowIndex()>n.getRowIndex())&&(e=n)}),e}i.isSmartReaderView()?(n=function(t,e){var n=App.SmartReader;n.getSection(e.tab).widgets.erase(t);var i=n.getSection(t.getTabId()).widgets;i.push(t),i.sort(function(t,e){return t.comparePosition(e)}),t.isProducer()&&App.SmartReader.reinitItemLists(),App.SmartReader.Feed.updateHeaderTitle(),App.SmartReader.refreshEmptyStatuses(!0),App.SmartReader.refreshSidebarFocus(),App.SmartReader.refreshCounters()},e=function(t,e){var n=t.dataObj,i=document.body.getElement("#widget-"+n.id).getParent(),s=document.body.getElement("#section-"+n.tab).getElement(t.isStream()?".nv-treeview-streams":t.isSearch()?".nv-treeview-searches":".nv-treeview-widgets");e&&(e=App.SmartReader.getWidgetRow(e.getId()).getParent()),e&&e.getParent()===s?i.inject(e,"before"):i.inject(s)}):(n=function(t,e){e.tab!==t.getTabId()&&(t.isProducer()&&s.reinitItemLists(),App.updateWidgetViewUnreadCounters())},e=function(t,e){t.dataObj.tab===i.Page.openTabId?t.show():t.hide(),e&&e.elm_module?t.inject(e.elm_module,"before"):t.inject()}),h.changePosition=function(i,s){var r=i.dataObj;s=l.get(s);var c={tab:r.tab,row:r.row,col:r.col};t.extend(r,s),e(i,o(i)),h.savePosition(i).done(function(){n(i,c)},function(n){t.extend(r,c),e(i,o(i)),a.displayError(n)})}}),h.getFocused=function(){return Module.fromElement(document.body.getElement(".kbdFocus:not(.hidden)"))},h.sortModulesByRow=function(t){var e,n,i,s,o,a,r=[];for(e=[[],[],[],[]],n=0,i=t.length;n<i;n+=1)s=t[n],e[Math.max(s.getColumnIndex()-1,0)].push(s);for(o=!1,s=null,n=0;n<4;n=(n+1)%4)if(0===n&&(o=!0),0===(a=e[n]).length){if(3===n&&o)break}else o=!1,r.push(a.shift());return r},h.isPublic=(u=["AolMail","Api","Bookmarks","BoxNet","Facebook","Gmail","Hotmail","MacMail","NumericableMail","PopMail","Yahoo_fastTrackWeek","Yahoo_fastTrackWeekLight","Yahoo_inTheNewsArticles","Yahoo_inTheNewsHeadlines","YahooMail"],function(t){return!u.includes(t)}),h.getThumbnail=function(t){return"/img/essentials/"+t.toLowerCase().replace(/ /g,"")+".png"},h}.apply(e,i))||(t.exports=s)},function(t,e,n){"use strict";var i,s;i=[n(1),n(18),n(9),n(39),n(2),n(27),n(6),n(62)],void 0===(s=function(t,e,n,i,s,o,a,r){return n.singleton(i,{init:function(){this._itemEvents={"onChange:tags":function(){this.dispatchEvent("onItemTagsChange")}.bind(this)},this.item=null,this._status=!1},getSentiments:function(){return this._sentimentsPromise||(this._sentimentsPromise=a.getCurationSentiments()),this._sentimentsPromise},getRecentTags:function(){return this._recentTagsPromise||(this._recentTagsPromise=a.getRecentTagsList()),this._recentTagsPromise},getPopularTerms:function(){return this._popularTermsPromise||(this._popularTermsPromise=a.getPopularTerms()),this._popularTermsPromise},getView:function(){return this.view},setView:function(t){this.view=t},getTagsByUserId:function(){var t={};return this.item.getTags().forEach(function(e){var n=String(e.user.id);String(s.User.id)!==n&&(void 0===t[n]&&(t[n]=[]),t[n].push(e))}),t},editItem:function(t,e){this.view&&(t?this.loadItem(t):this.item=null,this.view.displayItem(!0!==e))},loadItem:function(t){this.item&&this.item.removeEvents(this._itemEvents),this.modifStatus(),this.reinitCurrentTags(),this.item=t,t.addEvents(this._itemEvents),this.dispatchEvent("itemLoaded")},reinitCurrentTags:function(){this.dispatchEvent("currentTagsWasReinit")},checkSentimentForTagId:function(t){this.item.getTags().forEach(function(e){e.id===t&&this.dispatchEvent("tagChanged",e)},this)},deleteTag:function(t){this.item.removeTag(t.id).then(function(){this.modifStatus(),this.dispatchEvent("tagDeleted",t)}.bind(this)).fail(this.displayError)},editTag:function(t){this.item.getUserTags().some(function(e){e.id===t.id&&this.item.editTag(t).then(function(){this.dispatchEvent("tagChanged",t),this.modifStatus()}.bind(this)).fail(this.displayError)},this)},addTag:function(e){e=t.clone(e),this.item.addTag(e).then(function(){this.dispatchEvent("tagAdded",e),this.modifStatus()}.bind(this)).fail(this.displayError)},modifStatus:function(){this.dispatchEvent("statusModified")},open:function(){this.view.open()},close:function(){this.view.close()},isOpen:function(){return this.view.hasSidebar()},getItem:function(){return this.item},displayError:function(t){"Tag already exists"===t&&(t=o.getErrorMessage(t)),r.error(e.escapeHTML(t),{titleText:_("Error")})}})}.apply(e,i))||(t.exports=s)},function(t,e,n){"use strict";n.r(e),n.d(e,"getValue",function(){return u}),n.d(e,"asStat",function(){return h}),n.d(e,"getLabel",function(){return d}),n.d(e,"getFormatedValue",function(){return p}),n.d(e,"getNames",function(){return m});var i=n(4),s=n.n(i),o=n(80),a=n(228),r=n.n(a);var l={sum:{label:_("Total"),value:function(t){return t.getTotal()}},avg:{label:_("Average"),value:function(t){return t.getAverage()}},max:{label:_("Maximum"),value:function(t){return t.getMax().getValue()||0}},min:{label:_("Minimum"),value:function(t){return t.getMin().getValue()||0}},last:{label:_("Last value"),value:function(t){return t.getLastStat().getValue()||0}},percent:{label:_("Percentage"),value:function(t,e){return function(t,e){var n=100;return t.each(function(t){if(t instanceof o.FacetsNode&&t.getFacets().includes(e)){var i=t.getFacets().reduce(function(t,e){return t+e.getTotal()},0);n=100*e.getTotal()/i}}),n}(e,t)},format:function(t){return t+"%"}}};function c(t){if(!l.hasOwnProperty(t))throw new Error("Unknown aggegation method "+t);return l[t]}function u(t,e,n){return c(t).value(e,n)}function h(t,e,n){return new r.a({key:e.getTitle(),facet:e,value:u(t,e,n)})}function d(t){return c(t).label}function p(t,e,n){var i=c(t),o=s.a.formatHumanNumber(i.value(e,n));return i.format?i.format(o):o}function m(){return Object.keys(l)}},function(t,e,n){"use strict";var i,s;i=[n(2),n(139)],void 0===(s=function(t,e){function n(t){var n={type:"preview",facets:!0};return t||(n.sampling=1),e.fetch({query:{topic:"*:*"}},n).then(function(t){return t.getProducers()[0].getFacets()||{}},function(){return{}})}var i,s={author:_("Authors"),category:_("Categories"),domain:_("Domains"),emotion:_("Emotions"),emotion_neutral:_("Neutral tones"),emotion_positive:_("Positive tones"),emotion_negative:_("Negative tones"),enclosure_type:_("Enclosure types"),event:_("Events"),expressions:_("Expressions"),geoloc:_("Geolocalisations"),item:_("Article"),language:_("Languages"),location:_("Locations"),hashtag:_("Hashtags"),media:_("Media"),organization:_("Organizations"),people:_("People"),pub_date:_("Dates"),sentiment_opinion:_("Sentiments"),opinion_sentiment:_("Opinions"),term:_("Tagclouds"),theme:_("Themes"),"twitter.author":{full:_("Twitter - Authors"),short:_("Authors")},"twitter.in_reply_to":{full:_("Twitter - In reply to"),short:_("In reply to")},"twitter.retweeter":{full:_("Twitter - Retweeters"),short:_("Retweeters")},"twitter.type":{full:_("Twitter - Types"),short:_("Types")}},o={geoloc:_("Geolocation coordinates")};function a(t,e){var n=s.hasOwnProperty(t)&&s[t];return"object"==typeof n?e?n.short:n.full:n||t}function r(){return i||(i=Object.keys(t.NPD.socialpackFacets||{})),i}function l(){return t.NPD.corpusFacets}return{getSocialpackFacets:r,getCorpusFacets:l,getCorpusFacetsWithValues:function(t){return n(t).then(function(t){var e={};return l().forEach(function(n){var i=n.name;e[i]=t[i]||{count:0,categories:[]}}),e})},getBlacklistableFacets:function(){return r().filter(function(e){return 2===t.NPD.socialpackFacets[e]})},getFacetTitle:a,getFacetSubject:function(t){return o[t]?o[t]:_("{0} name").format(a(t))},getFacetName:function(t){return Object.keys(s).find(function(e){return s[e]===t||s[e].full&&s[e].full===t||s[e].short&&s[e].short===t})||!1},loadFacetsWithValues:function(t){return n(t).then(function(t){var e={};return r().forEach(function(n){e[n]=t[n]||{count:0,categories:[]}}),e})}}}.apply(e,i))||(t.exports=s)},function(t,e){var n={}.toString;t.exports=function(t){return n.call(t).slice(8,-1)}},function(t,e){t.exports=function(t){if(null==t)throw TypeError("Can't call method on  "+t);return t}},function(t,e,n){"use strict";if(n(48)){var i=n(127),s=n(28),o=n(29),a=n(7),r=n(211),l=n(263),c=n(89),u=n(145),h=n(125),d=n(73),p=n(146),m=n(91),f=n(42),g=n(340),v=n(129),b=n(112),y=n(72),w=n(168),x=n(31),C=n(60),_=n(255),S=n(130),E=n(132),k=n(131).f,T=n(257),A=n(126),I=n(37),N=n(94),D=n(201),O=n(169),P=n(259),F=n(143),M=n(204),L=n(144),R=n(258),j=n(331),V=n(49),B=n(92),z=V.f,W=B.f,U=s.RangeError,H=s.TypeError,q=s.Uint8Array,G=Array.prototype,Y=l.ArrayBuffer,X=l.DataView,K=N(0),J=N(2),Q=N(3),$=N(4),Z=N(5),tt=N(6),et=D(!0),nt=D(!1),it=P.values,st=P.keys,ot=P.entries,at=G.lastIndexOf,rt=G.reduce,lt=G.reduceRight,ct=G.join,ut=G.sort,ht=G.slice,dt=G.toString,pt=G.toLocaleString,mt=I("iterator"),ft=I("toStringTag"),gt=A("typed_constructor"),vt=A("def_constructor"),bt=r.CONSTR,yt=r.TYPED,wt=r.VIEW,xt=N(1,function(t,e){return kt(O(t,t[vt]),e)}),Ct=o(function(){return 1===new q(new Uint16Array([1]).buffer)[0]}),_t=!!q&&!!q.prototype.set&&o(function(){new q(1).set({})}),St=function(t,e){var n=m(t);if(n<0||n%e)throw U("Wrong offset!");return n},Et=function(t){if(x(t)&&yt in t)return t;throw H(t+" is not a typed array!")},kt=function(t,e){if(!(x(t)&&gt in t))throw H("It is not a typed array constructor!");return new t(e)},Tt=function(t,e){return At(O(t,t[vt]),e)},At=function(t,e){for(var n=0,i=e.length,s=kt(t,i);i>n;)s[n]=e[n++];return s},It=function(t,e,n){z(t,e,{get:function(){return this._d[n]}})},Nt=function(t){var e,n,i,s,o,a,r=C(t),l=arguments.length,u=l>1?arguments[1]:void 0,h=void 0!==u,d=T(r);if(null!=d&&!_(d)){for(a=d.call(r),i=[],e=0;!(o=a.next()).done;e++)i.push(o.value);r=i}for(h&&l>2&&(u=c(u,arguments[2],2)),e=0,n=f(r.length),s=kt(this,n);n>e;e++)s[e]=h?u(r[e],e):r[e];return s},Dt=function(){for(var t=0,e=arguments.length,n=kt(this,e);e>t;)n[t]=arguments[t++];return n},Ot=!!q&&o(function(){pt.call(new q(1))}),Pt=function(){return pt.apply(Ot?ht.call(Et(this)):Et(this),arguments)},Ft={copyWithin:function(t,e){return j.call(Et(this),t,e,arguments.length>2?arguments[2]:void 0)},every:function(t){return $(Et(this),t,arguments.length>1?arguments[1]:void 0)},fill:function(t){return R.apply(Et(this),arguments)},filter:function(t){return Tt(this,J(Et(this),t,arguments.length>1?arguments[1]:void 0))},find:function(t){return Z(Et(this),t,arguments.length>1?arguments[1]:void 0)},findIndex:function(t){return tt(Et(this),t,arguments.length>1?arguments[1]:void 0)},forEach:function(t){K(Et(this),t,arguments.length>1?arguments[1]:void 0)},indexOf:function(t){return nt(Et(this),t,arguments.length>1?arguments[1]:void 0)},includes:function(t){return et(Et(this),t,arguments.length>1?arguments[1]:void 0)},join:function(t){return ct.apply(Et(this),arguments)},lastIndexOf:function(t){return at.apply(Et(this),arguments)},map:function(t){return xt(Et(this),t,arguments.length>1?arguments[1]:void 0)},reduce:function(t){return rt.apply(Et(this),arguments)},reduceRight:function(t){return lt.apply(Et(this),arguments)},reverse:function(){for(var t,e=Et(this).length,n=Math.floor(e/2),i=0;i<n;)t=this[i],this[i++]=this[--e],this[e]=t;return this},some:function(t){return Q(Et(this),t,arguments.length>1?arguments[1]:void 0)},sort:function(t){return ut.call(Et(this),t)},subarray:function(t,e){var n=Et(this),i=n.length,s=v(t,i);return new(O(n,n[vt]))(n.buffer,n.byteOffset+s*n.BYTES_PER_ELEMENT,f((void 0===e?i:v(e,i))-s))}},Mt=function(t,e){return Tt(this,ht.call(Et(this),t,e))},Lt=function(t){Et(this);var e=St(arguments[1],1),n=this.length,i=C(t),s=f(i.length),o=0;if(s+e>n)throw U("Wrong length!");for(;o<s;)this[e+o]=i[o++]},Rt={entries:function(){return ot.call(Et(this))},keys:function(){return st.call(Et(this))},values:function(){return it.call(Et(this))}},jt=function(t,e){return x(t)&&t[yt]&&"symbol"!=typeof e&&e in t&&String(+e)==String(e)},Vt=function(t,e){return jt(t,e=b(e,!0))?h(2,t[e]):W(t,e)},Bt=function(t,e,n){return!(jt(t,e=b(e,!0))&&x(n)&&y(n,"value"))||y(n,"get")||y(n,"set")||n.configurable||y(n,"writable")&&!n.writable||y(n,"enumerable")&&!n.enumerable?z(t,e,n):(t[e]=n.value,t)};bt||(B.f=Vt,V.f=Bt),a(a.S+a.F*!bt,"Object",{getOwnPropertyDescriptor:Vt,defineProperty:Bt}),o(function(){dt.call({})})&&(dt=pt=function(){return ct.call(this)});var zt=p({},Ft);p(zt,Rt),d(zt,mt,Rt.values),p(zt,{slice:Mt,set:Lt,constructor:function(){},toString:dt,toLocaleString:Pt}),It(zt,"buffer","b"),It(zt,"byteOffset","o"),It(zt,"byteLength","l"),It(zt,"length","e"),z(zt,ft,{get:function(){return this[yt]}}),t.exports=function(t,e,n,l){var c=t+((l=!!l)?"Clamped":"")+"Array",h="get"+t,p="set"+t,m=s[c],v=m||{},b=m&&E(m),y=!m||!r.ABV,C={},_=m&&m.prototype,T=function(t,n){z(t,n,{get:function(){return function(t,n){var i=t._d;return i.v[h](n*e+i.o,Ct)}(this,n)},set:function(t){return function(t,n,i){var s=t._d;l&&(i=(i=Math.round(i))<0?0:i>255?255:255&i),s.v[p](n*e+s.o,i,Ct)}(this,n,t)},enumerable:!0})};y?(m=n(function(t,n,i,s){u(t,m,c,"_d");var o,a,r,l,h=0,p=0;if(x(n)){if(!(n instanceof Y||"ArrayBuffer"==(l=w(n))||"SharedArrayBuffer"==l))return yt in n?At(m,n):Nt.call(m,n);o=n,p=St(i,e);var v=n.byteLength;if(void 0===s){if(v%e)throw U("Wrong length!");if((a=v-p)<0)throw U("Wrong length!")}else if((a=f(s)*e)+p>v)throw U("Wrong length!");r=a/e}else r=g(n),o=new Y(a=r*e);for(d(t,"_d",{b:o,o:p,l:a,e:r,v:new X(o)});h<r;)T(t,h++)}),_=m.prototype=S(zt),d(_,"constructor",m)):o(function(){m(1)})&&o(function(){new m(-1)})&&M(function(t){new m,new m(null),new m(1.5),new m(t)},!0)||(m=n(function(t,n,i,s){var o;return u(t,m,c),x(n)?n instanceof Y||"ArrayBuffer"==(o=w(n))||"SharedArrayBuffer"==o?void 0!==s?new v(n,St(i,e),s):void 0!==i?new v(n,St(i,e)):new v(n):yt in n?At(m,n):Nt.call(m,n):new v(g(n))}),K(b!==Function.prototype?k(v).concat(k(b)):k(v),function(t){t in m||d(m,t,v[t])}),m.prototype=_,i||(_.constructor=m));var A=_[mt],I=!!A&&("values"==A.name||null==A.name),N=Rt.values;d(m,gt,!0),d(_,yt,c),d(_,wt,!0),d(_,vt,m),(l?new m(1)[ft]==c:ft in _)||z(_,ft,{get:function(){return c}}),C[c]=m,a(a.G+a.W+a.F*(m!=v),C),a(a.S,c,{BYTES_PER_ELEMENT:e}),a(a.S+a.F*o(function(){v.of.call(m,1)}),c,{from:Nt,of:Dt}),"BYTES_PER_ELEMENT"in _||d(_,"BYTES_PER_ELEMENT",e),a(a.P,c,Ft),L(c),a(a.P+a.F*_t,c,{set:Lt}),a(a.P+a.F*!I,c,Rt),i||_.toString==dt||(_.toString=dt),a(a.P+a.F*o(function(){new m(1).slice()}),c,{slice:Mt}),a(a.P+a.F*(o(function(){return[1,2].toLocaleString()!=new m([1,2]).toLocaleString()})||!o(function(){_.toLocaleString.call([1,2])})),c,{toLocaleString:Pt}),F[c]=I?A:N,i||I||d(_,mt,N)}}else t.exports=function(){}},function(t,e,n){"use strict";var i,s;i=[n(2),n(1),n(109),n(214),n(174),n(45),n(4),n(21),n(96),n(17),n(70),n(695),n(362),n(52),n(35),n(6),n(27),n(62),n(216),n(116),n(187),n(9),n(39),n(22),n(24),n(20),n(441),n(3),n(15),n(13),n(19),n(53),n(149),n(194),n(701),n(702),n(703),n(704),n(705),n(443),n(706),n(707)],void 0===(s=function(t,e,i,s,o,a,r,l,c,u,h,d,p,m,f,g,v,b,y,w,x,C,S,E,k,T,A,I,N,D,O,P,F,M,L,R,j,V,B,z,W,U){var H=Object.create(null);function q(t){return D.getCheckSum(t)+"-"+(t in H?++H[t]:H[t]=1)}var G,Y=C.extend(S,E,k,{options:{preview:!1,readOnly:!1,environmentOptions:{}},editMode:!1,loaded:!1,loading:!1,contentAttached:!1,init:function(t,e){this.setOptions(e);var n=[];this._producerType=i,t.streams&&t.streams.length?n=t.streams:t.searches&&(this._producerType=s,n=t.searches),this._collapsable=!0,this._producers=n.map(function(e){return e.moduleId=t.id,this._producerType.factory(e)},this),this._sources=(t.sources||[]).map(function(e){try{return o.factory(e)}catch(e){console.error("Module "+t.id+": "+e)}}).filter(Boolean),this.dataObj=t,this.environment=new A(this,this.options.environmentOptions),this.dataChanged(!0),this.previewMode=!!this.options.preview,this.readOnly=this.options.readOnly,this.overlays={},this.restoreStatus()},getId:function(){return this.dataObj.id},isPreview:function(){return this.previewMode},getTabId:function(){return this.dataObj.tab},getTab:function(){return l.getById(this.getTabId())},getColumnIndex:function(){var t=+this.dataObj.col;return isNaN(t)?1:t},getRowIndex:function(){return+this.dataObj.row},comparePosition:function(t){return this.getColumnIndex()-t.getColumnIndex()||this.getRowIndex()-t.getRowIndex()},getTitle:function(){return(this.dataObj.title||"").truncate(150)},getModuleContent:function(){return this.elm_moduleContent},getMultiStreamTitle:function(){return this.getTitle()},getStreamCustomTitles:function(){var t=this.getTitle();return this.getStreams(!0).map(function(e){var n=e.getTitle();return{stream:e,title:n,displayTitle:t!==n?t+" - "+n:t}})},setTitle:function(t,e,n){if(n||void 0===t||this.loaded||!this.dataObj.title){if(void 0!==t?(t=t.sanitizeHTML(),this.dataObj.title=t,this.save(),this.dispatchEvent("titleWasChanged")):t=this.dataObj.title,this.elm_title){var i=this.getStreams();!e&&1===i.length&&i[0].getLink()&&(e=i[0].getLink()),e&&(t={tag:"a",href:e,target:"_blank",html:t,events:{mousedown:I.stopPropagation}}),this.elm_title.setContent(t),this.elm_moduleHeader.grab(this.elm_counterWrapper)}return this}},getProducers:function(t){var e=this._producers;return!1!==t&&(e=e.filter(function(t){return!0!==t.isHidden()})),e},getStreams:function(t){return this.isStream()?this.getProducers(t):[]},getSearches:function(t){return this.isSearch()?this.getProducers(t):[]},getStreamIds:function(t){return this.getStreams(t).map(function(t){return t.getId()})},getProducerType:function(){return this._producerType},isMultiStream:function(){return this.isStream()&&this.getProducers(!0).length>1},isStream:function(){return this.getProducerType()===i&&this.isProducer()},isSearch:function(){return this.getProducerType()===s&&this.isProducer()},isProducer:function(){return this.getProducers(!0).length>0},launchWizard:function(t,e){return new T(function(t){n.e(0).then(function(){var e=[n(217)];(function(e){e.focus({tab:this.getTabId(),id:this.getId()}),t()}).bind(this).apply(null,e)}.bind(this)).catch(n.oe)}.bind(this)).then(function(){return new T(function(n){var i=this.elm_module&&this.elm_module.isInjected();i||this.inject(document.body);var s=this.environment.getWidget(),o=s.launched,a=function(r){"maximized"===r.type?o||x.openWizard(s,t,e):(this.environment.removeEvent("onViewChange",a),i||this.elm_module.remove(),n())}.bind(this);this.environment.addEvent("onViewChange",a),o?x.launchWizard(s,t,e):"maximized"!==s.getView().type?s.requestView({type:"maximized",chrome:!1}):a({type:"maximized"})}.bind(this))}.bind(this))},getIcon:function(){return this.ico||(this.ico=r.getFaviconUrl(this.getSourceURL(),!0)),this.ico},setIcon:function(t){this.ico=t,this.dispatchEvent("updateFavicon")},isReadOnly:function(){var t=this.getTab();return!!(this.readOnly||this.content&&this.content.readOnly||t&&l.isReadOnly(t))},isSticky:function(){return t.Page.inSmartReaderView&&a.get("sticky").includes(this.getId())},isShared:function(){return!!this.dataObj.shared},getName:function(){return this.dataObj.moduleName},getData:function(){return this.dataObj.data},getDataWithDefaults:function(){var t=this.content&&this.content.defaultData||{};return e.extend(e.clone(t),this.getData())},getAnalytics:function(){return this.dataObj.analytics||[]},getSources:function(){return this._sources},getSourceURL:function(){return M.getURL(this.getName(),{withVersion:!0})},isNew:function(){return!(this.dataObj.id&&this.dataObj.id>0)},getUpsellIncentive:function(){return!1},supportsInsights:function(){return!1},supportsLibrary:function(){return t.isAllowed("library")&&this.isStream()},supportsRelatedSources:function(){return!1},getContainer:function(){return this.elm_module},build:function(){var t=this.getIcon(),n=p(t);if(!this.elm_module){this.elm_moduleHeader=e.createElement("div",{class:"moduleHeader",events:{click:this.headerObserver.bind(this)},html:[this.elm_showHide=e.createElement("a",{class:"showHide",href:"#",html:r.createIcon("actions-window-collapse",_("Collapse"),15,15)}),this.elm_ico=e.createElement("a",{class:"ico",href:"#"}),this.elm_title=e.createElement("h2",{class:"title"}),this.elm_menus=e.createElement("menu",{class:"menus",type:"toolbar"})]});var i="module";this.isReadOnly()&&(i+=" read-only"),this.comparable&&(i+=" comparable"),this.isHeaderHidden()&&(i+=" hidden-header"),this.elm_module=e.createElement("div",{class:i,id:"m_"+this.dataObj.id,html:[{tag:"div",class:"module-display-header-button",events:{click:w(this.temporarilyDisplayHeader,this)},html:{tag:"div",class:"content",html:[{tag:"span",class:"uwa-icon uwa-icon-only","data-icon":"n"},_("Display header")]}},this.elm_moduleFrame=e.createElement("div",{class:"moduleFrame moduleunHighlight",html:[{tag:"div",class:"moduleHeaderContainer",html:this.elm_moduleHeader},this.elm_moduleContent=e.createElement("div",{class:"moduleContent "+this.getName().toLowerCase()}),new W(this)]}),new U({module:this})]}),this.elm_editContent=e.createElement("div",{class:"editContent"}),this.elm_counterWrapper=e.createElement("span",{class:"title",html:this.elm_counter=e.createElement("span").hide()}),O.Features.touchEvents||this.elm_module.addEvents({mouseenter:this.highlight.bind(this),mouseleave:this.unHighlight.bind(this)}),this.linkToDom(this.elm_module),n?this.elm_ico.setContent({tag:"img",width:16,height:16,src:r.getStaticUrl("/img/s.gif"),styles:{width:"16px",height:"16px",backgroundImage:"url('"+r.getStaticUrl("/"+n[0])+"')",backgroundPosition:"-"+n[1]+"px -"+n[2]+"px"},class:"hicon"}):this.elm_ico.setContent({tag:"img",width:16,height:16,src:t,class:"hicon"});var s=d.retrieve(this.getId()),o=this.isExpanded();s&&o&&!this.isResizable()&&(this._heightIsForced=!0,this.elm_moduleContent.setStyle("min-height",s+"px")),this.syncExpand(),this.colorize(),this.unHighlight(),this.setTitle(),this.environment.setSkeleton({edit:this.elm_editContent,body:this.elm_moduleContent,icon:this.elm_ico,header:this.elm_moduleHeader,menus:this.elm_menus,wrapper:this.elm_module,module:this.elm_module,moduleFrame:this.elm_moduleFrame})}},headerObserver:function(t){var e=I.findElement.bind(null,t),n=!0;e(".showHide")?this.toggleStatus():e(".unstick")?this.unstick():e(".unread")&&this.canMarkAllAsRead()?this.resetUnreadCount():(n=!1,O.Features.touchEvents&&this.toggleHighlight()),n&&I.stop(t)},isBuilt:function(){return this.contentAttached&&this.elm_module},resetUnreadCount:function(){return this.sendContent("onResetUnreadCount")},setCounter:function(t,e){var n=this.elm_counter,i=!!t;if("unread"===e&&(this.unread=t,App.updateWidgetViewUnreadCounters()),n){var s=this.canMarkAllAsRead();this.dispatchEvent("unreadWasSetted",[t]),n.set({title:s?_("Read All"):"",class:"counter text-badge "+(e||"")+(s?" clickable":""),"data-badge-label":r.formatCounterNumber(t)})[i?"show":"hide"](),this.sendContent("onUpdateMenu")}return this},canMarkAllAsRead:function(){return this.getProducers().some(function(t){return t.canFlag("unread")})},dataChanged:function(t){var e,n={data:JSON.stringify(this.getDataToSave()),title:r.cutUTF8Bytes(this.getTitle().stripTags(),0,100),status:this._getStatus()},i=this.storedDataObj,s=[];if(i)for(e in n)n[e]!==i[e]&&s.push(e);return!s||!t&&i||(this.storedDataObj=n),s},save:function(t){var e=this;if(t)throw new Error("Can't save with external data (unsupported API)");function n(){return!e.previewMode&&e.getId()&&!e.isReadOnly()}return this._updateProducersFromData(),n()&&(clearTimeout(this.saveTimeout),this.saveTimeout=setTimeout(function(){var t;n()&&((t=e.dataChanged(!0)).includes("status")&&e._collapsable&&g.saveUserPageCollapseExpand({moduleIds:[e.getId()],status:e._getStatus()}).done(),(t.includes("data")||t.includes("title"))&&g.updateWidget({id:e.getId(),title:t.includes("title")?e.getTitle().stripTags():null,data:t.includes("data")?JSON.stringify(e.getDataToSave()):null}))},500)),this},_updateProducersFromData:function(){var t=this.getData(),e=t.streamIds||t.searchIds||"";if(e!==this.getProducers().invoke("getId").join(",")){var n=null;this._producers=e.split(",").map(function(t){var e=i.getFromCache(t)||s.getFromCache(t);if(!e)return null;if(null===n)n=e.constructor;else if(n!==e.constructor)return null;return e}).filter(function(t){return t}),this._producerType=n||i,l.reinitItemLists()}},getDataToSave:function(){var t=Object.assign({},this.getData());return delete t._netvibes_userId,t},toggleHighlight:function(){return function(t){this.previewMode&&(t=!1);var e=void 0===t?!this.elm_module.hasClassName("hover"):!!t;this.editMode&&!e||Y.fromElement(document.body.getElement("#modulePopupMenu"))===this||(this.previewMode||this.elm_showHide.setStyles({visibility:e?"visible":"hidden",width:e?"16px":0}),function(t,e){t&&N.toggle.call(t,e)}(this.elm_ico,!e),this.elm_module.toggleClassName("hover",e))}}(),highlight:function(){return this.toggleHighlight(!0)},unHighlight:function(){return this.toggleHighlight(!1)},setCollapsable:function(t){this._collapsable&&!1===t&&this.expand(!1),this._collapsable=!1!==t},getView:function(){return this.content?this.content.getView():this.environment.options.initialView?this.environment.options.initialView:{type:"windowed"}},_setStatus:function(t,e){if(!this._collapsable)return this;var n=void 0===t;if(n&&(t=this._getStatus()),t=+t,n||t!==this._getStatus()){var i={type:t?"windowed":"collapsed"},s=this.environment.options;this.content?this.content.requestView(i):s.initialView&&"collapsed"!==s.initialView.type||(s.initialView=i)}return this.dataObj.status=t?"1":"0",void 0!==e&&!0!==e||this.save(),this.syncExpand(),this},syncExpand:function(){if(clearTimeout(this._syncExpandTimeout),this.elm_module){var t=this.isExpanded(),n=t?e.i18n("Collapse"):e.i18n("Expand");this.elm_module.toggleClassName("collapsed-view",!t),this.elm_showHide.getElement("img").set({class:"actions-window-"+(t?"collapse":"expand"),alt:n,title:n})}},_getStatus:function(){return this._collapsable?+this.dataObj.status:1},isExpanded:function(){return!!this._getStatus()},restoreStatus:function(){return this._setStatus()},toggleStatus:function(t){return this._setStatus(!this._getStatus(),t)},collapse:function(t){return this._setStatus(!1,t)},expand:function(t){return this._setStatus(!0,t)},show:function(){this.elm_module||this.build(),this.elm_module.removeClassName("hidden").show()},hide:function(){this.elm_module||this.build(),this.elm_module.addClassName("hidden").hide()},isVisible:function(){return this.elm_module&&!this.elm_module.isHidden()},load:function(t){if(void 0!==t&&!1===t||(t=!0),!this.loaded&&!this.loading)return this.elm_module&&this.elm_module.parentNode&&11!==this.elm_module.parentNode.nodeType||this.inject(),t?this._attachContent():this.toggleLazyLoadStatus(!0),this},canBeInlined:function(){return G||(G=String(t.Config.inline_widgets).globToRegex()),G.test(this.getSourceURL())},_attachContent:function(){if(this.content||this.loading)return!0;var n=this.getSourceURL(),i=function(e,n){var i,s,o=t.Config.uwa_platform.servers,a=!1;if(o)for(delete(e=D.parseUrl(e)).query,delete e.anchor,e=D.composeUrl(e),i=0,s=o.length;i<s;i+=1)if(r.globToRegExp(o[i].match).test(e)){a={server:o[i].server,subdomain:o[i].subdomain};break}return!a&&n&&n>=1.3&&(a={server:t.Config.urls.uwa,subdomain:!!t.Config.uwa_platform.subdomain}),a}(n,2).server,s=this._attachContentFailed.bind(this);i!==t.Config.urls.uwa||t.isDebug()||(i=r.getStaticUrl("/uwa",{version:!1})),this.loading=!0,this.contentAttached=!0,this.elm_module.addClassName("loading"),this.elm_moduleContent.setContent(e.createElement("div",{class:"module-loading-inner",html:[{tag:"div",class:"module-spinner"},{tag:"div",class:"module-loading-text",text:_("Loading ...")}]})),this._heightIsForced&&this.setDelayed("removeForcedHeight",function(){this.elm_moduleContent.setStyle("min-height",""),this.sendContent("onResize")},1e4),this.environment.loadWidget(n,{server:i,fetcher:"JSON",embedded:!this.canBeInlined()&&{offlineMode:!0,displayEdit:!1,readOnly:this.isReadOnly(),id:q(n)},onComplete:this._launchContent.bind(this),onFailure:s,onTimeout:s})},_attachContentFailed:function(n){this.loaded=!0,this.loading=!1,n?e.is(n,"array")&&(n=n[0]):n={};var i=n.message||n||"Unknown";if(console.error("Error while loading the widget "+this.getId(),i,n),404===n.code||/\b404\b/.test(i))if("Api"===this.getName()){var s=t.Config.urls.uwa,o=D.parseUrl(s).domain;i=_("This app does not comply with UWA specifications. More infos : {0}").format('<a href="'+s+'">'+o+"</a>")}else i=_("This widget seems to be unavailable.");else i=_("An error occured while loading this widget. ({0})").format(i);N.setContent.call(this.elm_moduleContent,[i+" ",this.getId()&&{tag:"a",href:"#",text:_("Delete it?"),events:{click:w(this.confirmRemove,this)}}]),this.elm_module.removeClassName("loading").addClassName("loaded"),this.setIcon(r.getStaticUrl("/img/error.png")),this.setTitle()},_launchContent:function(){var e=this.content=this.environment.getWidget();this.loaded=!0,this.loading=!1;var n=this.getData();this.canBeInlined()||(n=Object.assign({_netvibes_userId:t.User.id},n)),this.content.setTitle(this.getTitle()),this.environment.launchWidget(n,this.isReadOnly()),this.isResizable()||this.environment.addEvent("onResize",function(){if(!this.hasDelayed("removeForcedHeight")&&"windowed"===e.getView().type&&!this.hasOpenOverlay()){var t=e.elements.body.getDimensions().innerHeight;t>0&&d.store(this.getId(),t)}}.bind(this)),this.elm_module.removeClassName("loading").addClassName("loaded"),this.dispatchEvent("onLoaded"),this.previewMode&&this.highlight()},inject:function(t,e){return this.elm_module||this.build(),t||(t=App.Columns.getColumn(this.getColumnIndex())),this.elm_module.inject(t,e),this.sendContent("onResize"),this},addToPage:function(){var e,n=this.dataObj;return this.previewMode=!1,t.Page.inSmartReaderView?App.SmartReader.addModule(this):(u.getByTab(this.getTabId()).forEach(function(t){t.getColumnIndex()===this.getColumnIndex()&&t.getRowIndex()>this.getRowIndex()&&t.elm_module&&(!e||e.getRowIndex()>t.getRowIndex())&&(e=t)},this),e?this.inject(e.elm_module,"before"):this.inject(),this.load(!1),n.tab===t.Page.openTabId?this.show():this.hide(),l.reinitItemLists()),this},remove:function(t,e){if(void 0===t&&(t=!0),u.unregister(this),this.previewMode||(this.isProducer()&&l.reinitItemLists(),App.updateWidgetViewUnreadCounters()),this.elm_module&&this.elm_module.remove(),document.body.getElements("#modulePopupMenu, #minitabsOptions").invoke("hide"),this.sendContent("onRemove"),this.dispatchEvent("onRemove",[{id:this.getId()}]),!this.previewMode&&t){g.deleteWidget({widgetId:this.getId()}).done(function(){this.dataObj.id=null,e&&e()}.bind(this),function(t){v.displayError(t),e&&e(t)});var n=this.getStreamIds(!0)[0];f.log("app","remove",n?{feedId:n}:{})}else e&&e();return this._producers.length=0,!0},mutate:function(t,e){var n,i=r.isAbsoluteURL(t);n={moduleName:i?"UWA":t,data:e||{}},i&&(n.data.moduleUrl=t),this.previewMode?(Y.factory(n,{preview:!0}).inject(this.elm_module.parentNode).load(),this.remove(!1)):h.add(n,{beforeModuleId:this.dataObj.id}).done(function(){this.remove(!0)}.bind(this))},sendContent:function(){return this.content&&this.content.dispatchEvent.apply(this.content,arguments),this},toggleLazyLoadStatus:function(t){return this.elm_module.toggleClassName("lazyLoadable",t),this},toggleEdit:function(t){if(void 0===t)t=!this.editMode;else if(t===this.editMode)return;var e;this.editMode=t,this.elm_module.toggleClassName("moduleEdit",t),m[t?"pushFocus":"popFocus"]("module.edit"),this.sendContent(t?"onEdit":"onCloseEdit"),t?this.getOverlay("Preferences").setContent(this.elm_editContent).open():this.getOverlay("Preferences").close(),t&&(e=this.elm_editContent.getElementsByTagName("input")[0])&&e.focus()},toggleDisplay:function(t){this.getOverlay("Display").toggle(t)},toggleInsights:function(t){this.getOverlay("Insights").toggle(t)},toggleUpgradePremium:function(t){this.getOverlay("UpgradePremium").toggle(t)},toggleAddToLibrary:function(t){this.getOverlay("AddToLibrary").toggle(t)},displayRelatedSourcesPreview:function(){n.e(0).then(function(){var t=[n(277)];(function(t){new t({relatedModuleId:F.process(this.dataObj).id,action:"relatedSources",title:_("Related sources")}).open()}).bind(this).apply(null,t)}.bind(this)).catch(n.oe)},getOverlay:function(t){return this.overlays[t]||(this.overlays[t]=new Y.Overlay[t](this).inject(this.elm_moduleFrame)),this.overlays[t]},removeOverlay:function(t){this.overlays[t]&&delete this.overlays[t]},hasOpenOverlay:function(){return Boolean(this.elm_module&&this.elm_module.hasClassName("has-overlay"))},refresh:function(){console.warn("Module#refresh is deprecated, use Module#sendContent('onRefresh')"),this.sendContent("onRefresh")},resize:function(){console.warn("Module#resize is deprecated, use Module#sendContent('onResize')"),this.sendContent("onResize")},hasShare:function(){return App.Share.getTabsConfig().widget.tabs.length>0&&!this.isReadOnly()&&!this.previewMode&&t.isAllowed("share")},share:function(){var t={id:this.getId(),title:this.getTitle(),picture:c.getThumbnail(this.getName()),name:this.getName(),type:"widget"};f.log("share","openFromWidget"),this.dataObj.widgetId&&(t.widgetId=this.dataObj.widgetId),App.Share.show(t)},canDuplicate:function(){return!0},close:function(){var t=this.environment.view.current;"maximized"===t.event.type?t.leave():this.confirmRemove()},clone:function(){h.clone(this)},colorize:function(e,n){var i=this.elm_module,s=this.elm_moduleHeader;void 0===e?e=this.getData().color:"unpaint"===e?delete this.getData().color:this.getData().color=e,!e&&t.Page&&"netvibes"===t.Page.themeName&&(e=this.getUpsellIncentive()?"green":"blue"),["white","yellow","green","red","blue","orange","borderless"].forEach(function(t){var o=t===e;s.toggleClassName(t,o),i.toggleClassName(t+"-module",o),n&&i.removeClassName(t+n,o)}),this.sendContent("onColorize",e),this.save()},isHeaderHidden:function(){return"true"===this.getData()._netvibes_hiddenHeader},hideHeader:function(t){t=!1!==t,this.elm_module.toggleClassName("hidden-header",t),t?this.getData()._netvibes_hiddenHeader="true":delete this.getData()._netvibes_hiddenHeader,this.save()},temporarilyDisplayHeader:function(){this.elm_module.addClassName("temporarily-display-header");var t=function(e){I.findElement(e,".moduleHeaderContainer")||(document.body.removeEvent("click",t,!0),this.elm_module.removeClassName("temporarily-display-header"))}.bind(this);document.body.addEvent("click",t,null,null,!0)},confirmRemove:function(){this.expand(!0),this.getOverlay("ConfirmRemove").open(),m.pushFocus("module-overlay")},unstick:function(){t.Page.inSmartReaderView&&(App.SmartReader.Widget.unstickWidget(this),App.SmartReader.display("widget",this.getId()),this.sendContent("onResize"))},focus:function(t){if(t=!1!==t){var e=c.getFocused();e&&e!==this&&e.focus(!1)}return this.elm_module&&this.elm_module.toggleClassName("kbdFocus",t),this},scrollTo:function(t){return P.scrollToElement(this.elm_module,e.extend({margin:60,smooth:!0},t)),this},isResizable:function(){return!1}});function X(t,e,n){return e&&t.forEach(function(t){t.displayTitle=e,!1===n&&(t.title=e)}),t}return Y.factory=function(t,e){F.process(t);var n=new(Y[t.moduleName]||Y)(t,e);return u.register(n),n},y(Y),Y.Overlay={ConfirmRemove:L,Display:R,Insights:j,Preferences:V,UpgradePremium:B,AddToLibrary:z},Y.UWA=Y.extend({getSourceURL:function(){return this.getData().moduleUrl||this._parent()}}),Y.RssReader=Y.extend({init:function(t,e){t&&t.data&&void 0===t.data.title&&(t.data.title=t.title),this._parent(t,e)},getDataToSave:function(){var t=this.getData(),n=this.getProducers()[0];return(n&&n.getQuery())!==t.feedUrl&&t.feedUrl||delete(t=e.clone(t)).feedUrl,t},getStreamCustomTitles:function(){return X(this._parent(),this.getTitle(),!1)},supportsInsights:function(){return!0},supportsRelatedSources:function(){return t.isAllowed("library")&&t.isAllowed("related_sources")&&this.isStream()}}),Y.SmartFilter=Y.RssReader.extend({getUpsellIncentive:function(){if(!this.getSearches().every(function(t){return t.hasUniqueStream()}))return{topic:"Tracked topics",availableForVIP:!0}}}),Y.MultipleFeeds=Y.extend({init:function(t,e){this._parent(t,e),t.config&&t.feeds&&(t.multipleFeedConfig={},t.multipleFeedConfig.config=t.config,t.multipleFeedConfig.feeds=t.feeds)},_updateProducersFromData:function(){}}),Y.Webnote=Y.extend({colorize:function(t){var e=this.getData();e.color||(e.color="yellow"),this._parent(t,"-webnote")}}),Y.HtmlEditor=Y.extend({canBeInlined:function(){return!1}}),Y.Facebook=Y.extend({getStreamCustomTitles:function(){return X(this._parent(),this.getTitle(),!0)}}),Y.SearchTrends=Y.extend({getIcon:function(){return"twitter"===this.getData().type?D.buildUrl(this.getSourceURL(),"img/twitter.ico"):D.buildUrl(this.getSourceURL(),"img/facebook.ico")},getStreamCustomTitles:function(){return X(this._parent(),this.getTitle(),!0)},getUpsellIncentive:function(){return{topic:"Search and compare",availableForVIP:!1}}}),Y.Twitter=Y.extend({getStreamCustomTitles:function(){return X(this._parent(),this.getTitle(),!0)}}),Y.Library=Y.extend({isShared:function(){var t=this.environment.getWidget();return this.getId()!==t.getValue("libraryId")},hasShare:function(){var e=this.getData();return t.isAllowed("library")&&(!this.isShared()||Boolean(e.canShare))},canDuplicate:function(){var e=this.getData();return t.isAllowed("library")&&(!this.isShared()||Boolean(e.canDuplicate))},supportsRelatedSources:function(){return t.isAllowed("library")&&t.isAllowed("related_sources")}}),Y.SocialPack_Analytics=Y.extend({getIcon:function(){return D.buildUrl(this.getSourceURL(),"favicons/"+this.getData().widgetMode+".png")},_launchContent:function(){this._parent();var t=!0;function e(){f.log("app",t?"analytics-load":"analytics-reload"),t=!1}this.content.addEvents({onRefresh:e,onLoad:e})},getUpsellIncentive:function(){return{topic:"Analytics",availableForVIP:!1}}}),Y.SocialPack_Compare=Y.extend({getUpsellIncentive:function(){return{topic:"Analytics",availableForVIP:!1}}}),Y.Analyze=Y.extend({getUpsellIncentive:function(){return{topic:"Analytics",availableForVIP:!1}},isResizable:function(){return!0}}),Y.PotionWizard=Y.extend({getUpsellIncentive:function(){var t=this.dataObj.triggerPermissions||{};for(var e in t){var n=t[e];if(n){var i=n.detect(function(t){return"search"===t||"socialpack"===t});if(i)return{topic:"com.netvibes.analytics"===e?"Potions with Analytics":"com.netvibes.search"===e?"Potions with Tracked Topics":"This potion",availableForVIP:"search"===i}}}return!1}}),Y.CorpusManager=Y.extend({getUpsellIncentive:function(){return{topic:"Netvibes Entity Manager",availableForVIP:!1}}}),window.Module=Y,Y}.apply(e,i))||(t.exports=s)},function(t,e,n){"use strict";var i,s;i=[n(1),n(9),n(3),n(26),n(23),n(110),n(53),n(19),n(18),n(2),n(4),n(52),n(35),n(350),n(273),n(711),n(714),n(149)],void 0===(s=function(t,e,n,i,s,o,a,r,l,c,u,h,d,p,m,f,g,v){var b=t.createElement,y=e.singleton({elements:{},tabs:{},currentItem:null,_isOpen:!1,panelHeight:0,init:function(){document.body.getElements(".topbar-addcontent").invoke("addEvent","click",this.toggle.bind(this))},initShortcuts:function(){var t=this.tabs.newTab,e={rss:{key:"R",text:_("Add a Reading app")},miso:{key:"M",text:_("Add a MisoData app")},analysis:{key:"A",text:_("Add an Analytics app")},potion:{key:"P",text:_("Add a Potion app")}};function n(e){t.isModuleActive(e)&&t.showView(e)}h.addShortcuts({addcontent:{"h,?,f1":function(){var n;h.openHelp(_("Add content"),'<table><tr><td><span class="cap long">escape</span></td><td>'+_("Close window")+"</td></tr>"+(n=[],Object.keys(e).forEach(function(i){var s=e[i];t.isModuleActive(i)&&n.push(l.format('<tr><td><span class="cap">{0}</span></td><td>{1}</td></tr>',s.key,s.text))}),n.join(""))+"</table>")},r:function(){h.popFocus(),n("rss")},m:function(){h.popFocus(),n("miso")},a:function(){h.popFocus(),n("analysis")},p:function(){h.popFocus(),n("potion")},esc:function(){this.close()}.bind(this)},"addcontent.edit,addcontent.feed":{esc:function(){h.popFocus()}}})},toggle:function(){this.isOpen()?this.close():this.open()},toggleDropdownState:function(t){var e=c.Page.inSmartReaderView?0:parseInt(this.panelHeight/3,10);if(this.isOpen()){if(t)return this.elements.panel.addClassName("drop"),void new i(this.elements.panel,{duration:300,transition:"circOut",events:{onComplete:function(){App.Drag.refreshWidgetDragCache()}}}).start({height:e});a.scrollToElement(this.elements.panel),this.elements.panel.removeClassName("drop"),new i(this.elements.panel,{duration:300,transition:"quadIn"}).start({height:this.panelHeight})}},isOpen:function(){return this._isOpen},open:function(){this.elements.panel||this.buildSkeletton(),h.pushFocus("addcontent"),this.toggleUniversalSearch("close"),d.log("topBar","openAddContent"),document.body.getElements('#top a[data-action="openAddContent"]').invoke("addClassName","active"),a.scrollToElement(this.elements.panel),document.body.addClassName("nv-panel-overflow"),this.elements.container.setStyle("height",this.panelHeight),this._openFx=new i(this.elements.panel,{duration:400,transition:"quadInOut",events:{onComplete:function(){this._openFx=null}.bind(this)}}).start({height:this.panelHeight}),c.Page.inSmartReaderView&&document.body.getElement("#footer")?document.body.getElement("#footer").setStyle("position","relative"):c.Page.inSmartReaderView||App.Columns.updateLayout(),this.scrollTop(),this.selectTab(),this._isOpen=!0,p.adjustFrameToViewportSize(!0)},close:function(){h.popFocus("addcontent"),this.toggleUniversalSearch("open"),this.elements.panel&&(this.elements.panel.removeClassName("drop"),document.body.getElement("#sub-container").setStyle("display",""),document.body.getElements('#top a[data-action="openAddContent"]').invoke("removeClassName","active"),new i(this.elements.panel,{duration:300,transition:"quadInOut",events:{onComplete:function(){document.body.removeClassName("nv-panel-overflow"),document.body.getElement("#sub-container").setStyle("overflow","")}}}).start({height:0}),this._isOpen=!1,p.adjustFrameToViewportSize(!1))},buildSkeletton:function(){this.elements.nav=b("div",{class:"nv-addpanel-nav"}).addContent(this.buildNav()),this.elements.panel=b("div",{id:"nv-panel",class:"autoclear uwa-font-aa"}).addContent(b("div",{class:"nv-panel-drop-overlay"}),b("div",{id:"nv-panel-content"}).addContent(this.elements.container=b("div",{class:"nv-addpanel"}).addContent(b("div",{class:"nv-addpanel-nav-row"}).addContent(this.scroller=new s({element:this.elements.nav,shadows:!0})),this.elements.tabs=b("div",{class:"nv-addpanel-tabs"})),this.elements.closeButton=u.createCloseIcon("panel","panel-close-icon"))),this.elements.panel.inject(document.body.getElement("#top"),"after"),this.tabs.newTab=new f({container:this.elements.tabs,name:"new"}),this.tabs.modulesTab=new g({container:this.elements.tabs,name:"modules"}),this.attachEvents(),this.initShortcuts()},attachEvents:function(){this.elements.nav.addEvent("click",this.onNavClick.bind(this)),window.addEventListener("resize",this.onResize.bind(this)),this.onResize(),this.elements.closeButton.addEvent("click",this.close.bind(this))},buildNav:function(){var t=b("ul",{class:"sub-items",name:"modules"}).addContent(this.buildNavItem(_("Essential apps"),"4")),e=new o({multiSelect:!0,data:{modules:{text:_("Apps"),content:t}}});e.selectItem("modules"),e.addEvent("onChange",this.onAccordionChange.bind(this));var n=b("div",{class:"nv-addpanel-item uwa-icon default","data-icon":"3",text:_("New")});return n.setData("name","new"),[n,e]},scrollTop:function(){this.scroller.getInnerElement().scrollTop=0},buildNavItem:function(t,e){var n=b("div",{class:"nv-addpanel-item-title","data-icon":e||"",text:t}),i=b("li",{class:"nv-addpanel-item"}).addContent(n);return n.toggleClassName("uwa-icon",!!e),i},selectTab:function(t){if(t||(t=this.elements.nav.getElement(".default")),this.currentItem){var e=this.getTabName(this.currentItem);this.tabs[e].hide(),this.currentItem.removeClassName("selected")}var n=this.getTabName(t),i=this.getTabTitle(t);this.tabs[n].show(i),t.addClassName("selected"),this.currentItem=t},getTab:function(t){return this.tabs[t]},getTabName:function(t){return"new"===t.getData("name")?"newTab":"modulesTab"},getTabTitle:function(t){var e,n=t.getData("name");if("new"!==n){var i=t.getElement(".nv-addpanel-item-title"),s=i.getParent(".nv-addpanel-item.isparent");if(s&&s.getData("name")!==n){var o=s.getElement(".nv-addpanel-item-title");e={text:o.getText()+" - "+i.getText(),icon:o.getAttribute("data-icon")}}else e={text:i.getText(),icon:i.getAttribute("data-icon")};return e}},toggleUniversalSearch:function(t){var e=document.body.getElement("#universal-zorch-wrapper");if(e){var n=e.getSize().height;"open"===t?window.setTimeout(function(){e.setStyle("display",""),new i(e,{duration:200,transition:"quadOut"}).start({marginTop:0,opacity:1})},100):"close"===t&&new i(e,{duration:80,events:{onComplete:function(){e.setStyle("display","none")}}}).start({marginTop:-n,opacity:0})}},onResize:function(){var t=document.body.getElement("#top-admin")?document.body.getElement("#top-admin").getSize().height:0,e=document.body.getElement("#top").getSize().height;this.panelHeight=r.getSize().height-t-e,this.elements.container.setStyle("height",this.panelHeight),this._openFx?this._openFx.setSteps({height:this.panelHeight}):this.isOpen()&&this.elements.panel.setStyle("height",this.panelHeight)},onNavClick:function(t){var e=n.findElement(t,".nv-addpanel-item");e&&this.selectTab(e)},onAccordionChange:function(t,e){var n=this.elements.nav.getElement(".uwa-accordion-item."+t).getElement(".uwa-accordion-content"),s=n.getDimensions().innerHeight,o=s>200?400:200;e?(n.setStyles({display:"block",height:0}),new i(n,{duration:o,transition:"quadOut",events:{onComplete:function(){n.setStyles({height:"auto"})}}}).start({height:s})):new i(n,{duration:o,transition:"quadOut",events:{onComplete:function(){n.setStyles({display:"none",height:s})}}}).start({height:0})}});return y.showPopup=function(t,e){return t=v.process(t),new m(t,e).open()},y.TabNew=f,y.TabModules=g,App.AddContent=y,y}.apply(e,i))||(t.exports=s)},function(t,e,n){"use strict";var i,s;i=[n(1),n(16),n(71),n(43),n(120),n(413)],void 0===(s=function(t,e,n,i,s,o){return s.extend(o,{name:"schemaform-multiplestring",getContent:function(){if(!this.elements.container){this.elements.container=t.createElement("div",{class:this.getClassNames()}),this.wordsList=[];var e={adaptor:this.getAdaptor(),typeDelay:100,className:"multiple-string-autocomplete",events:{onSetSuggestion:this.onSetSuggestion.bind(this)}};this.elements.input=new n(this.getInputOptions(e)),this.elements.input.addEvent("onChange",this.onAddWord.bind(this)),this.elements.input.getInputElement().addEvent("focus",this.onInputFocus.bind(this)),this.elements.input.getInputElement().addEvent("blur",this.onInputBlur.bind(this)),this.elements.container.addContent(this.elements.input,this.elements.addWordBtn=t.createElement("a",{class:"detail-word-add uwa-icon",title:_("Add account"),"data-icon":"3"}),this.elements.wordsContainer=t.createElement("div",{class:"detail-words"})),this.addSpinner()}return this.elements.container},onAddWord:function(){var t,e=[],n=[],i=this.elements.input.getValue();this.suggestion&&i===this.suggestion.fullValue&&this.suggestion.id&&(i=this.suggestion.id),this.elements.input.setValue(""),this.elements.input.getInputElement().blur(),i.split(this.getSplit()).forEach(function(i){(t=this.checkWord(i)).error&&e.push(t.error),t&&""!==t&&n.push(t)},this),e.length>0?this.addInputError(e.join(". ")):(this.removeInputError(this.input),this.wordsList=this.wordsList.concat(n),this.setValue())},onInputBlur:function(){this.elements.input.getValue()&&this.onAddWord()},_fetchSuggestions:function(){},reloadSuggestions:!1,getAdaptor:function(){var t=this;return i.extend({suggestions:[],init:function(){this._parent(),this.getSuggestions()},filterSuggestions:function(t){var e=[];return t||(t=""),this.suggestions.forEach(function(n){n.fullValue.toLowerCase().includes(t.toLowerCase())&&e.push(n)}),e},getSuggestions:function(n){var i=this;return!t.reloadSuggestions&&i.suggestions.length?e.resolve(i.filterSuggestions(n)):t._fetchSuggestions(n).then(function(t){return i.suggestions=t,i.filterSuggestions(n)})},renderSuggestions:function(t){return t.map(function(t){return{tag:"div",class:"suggestion notab",html:[t.fullValue.escapeHTML()]}})}})}})}.apply(e,i))||(t.exports=s)},function(t,e,n){"use strict";n.r(e);var i=n(6),s=n.n(i),o=n(122),a=n.n(o),r=n(4),l=n.n(r);var c=function(t){var e,n;function i(e){var n;return(n=t.call(this,e)||this).id=e.id||l.a.uniqueID(),n.name=e.name||"",n.count=e.count||0,n}return n=t,(e=i).prototype=Object.create(n.prototype),e.prototype.constructor=e,e.__proto__=n,i}(a.a),u=n(61),h=n.n(u),d={};d.errorMessages={error_importing_opinion:_("An error has occurred during the import of the opinions"),fallback:_("An error has occurred, please try again later or contact the support")},d.getOpinionEntity=function(){return s.a.getCurationTags().then(function(t){return d.formatOpinionEntity(t)},function(t){return Promise.reject(new d.ApiError(t))})},d.formatOpinionEntity=function(t){var e=t.tags.map(function(t){return new c(t)});return{counters:t.total,entities:e}},d.submit=function(t){return t=t||{},s.a.submitOpinionEntity(t).then(function(){},function(t){return Promise.reject(new d.ApiError("error_submiting_opinion",new Error(t)))})},d.edit=function(t){return s.a.editOpinionEntity({id:t.id,name:t.name}).then(function(){},function(t){return Promise.reject(new d.ApiError("error_deleting_opinion",new Error(t)))})},d.delete=function(t){return s.a.deleteOpinionEntity({id:t}).then(function(){},function(t){return Promise.reject(new d.ApiError("error_deleting_opinion",new Error(t)))})},d.import=function(t){return s.a.importOpinionEntity(t).done(function(){},function(t){return Promise.reject(new d.ApiError("error_importing_opinion",new Error(t)))})},d.ApiError=h.a.extend();e.default=d},function(t,e,n){"use strict";var i,s;i=[n(1),n(9),n(44)],void 0===(s=function(t,e,n){var i=e.extend({dayStrings:["sunday","monday","tuesday","wednesday","thursday","friday","saturday"],monthStrings:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonthStrings:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],quarterStrings:["Q1","Q2","Q3","Q4"],init:function(t){var e;"string"==typeof t&&t.match(/^(\d{1,4})-(\d{1,2})-(\d{1,2})$/)?(e=t.match(/^(\d{1,4})-(\d{1,2})-(\d{1,2})$/),this.date=new Date(e[1],e[2]-1,e[3])):this.date=new Date(t||Date.now())},compareTo:function(t){return this.getTime()<t.getTime()?-1:this.getTime()>t.getTime()?1:this.getTime()===t.getTime()?0:void 0},equals:function(t){return 0===this.compareTo(t)},isAfter:function(t){return 1===this.compareTo(t)},isBefore:function(t){return-1===this.compareTo(t)},hasDaylightSavingTime:function(){return i.today().set({month:0,day:1}).getTimezoneOffset()!==i.today().set({month:6,day:1}).getTimezoneOffset()},isDaylightSavingTime:function(){return i.today().set({month:0,day:1}).getTimezoneOffset()!==this.getTimezoneOffset()},set:function(t){var e,n,i,s;if(2===t.length)n=t[0],i=t[1],"day"===n&&(n="date"),this[s="set"+n.ucfirst()]&&this[s](i);else if(1===t.length&&"object"==typeof t[0])for(n in e=t[0])e.hasOwnProperty(n)&&this.set(n,e[n]);return this},getMillisecondsTo:function(t){return t.getTime()-this.getTime()},getSecondsTo:function(t){return this.getMillisecondsTo(t)/1e3},getMinutesTo:function(t){return this.getSecondsTo(t)/60},getHoursTo:function(t){return this.getMinutesTo(t)/60},getDaysTo:function(t){return this.getHoursTo(t)/24},getShortMonthString:function(){return this.shortMonthStrings[this.date.getUTCMonth()]},getQuarterString:function(){var t=Math.floor(this.getMonth()/3);return this.quarterStrings[t]},getMonthString:function(){return this.monthStrings[this.date.getMonth()]},getDayString:function(){return this.dayStrings[this.date.getDate()]},valueOf:function(){return this.date.valueOf()},toString:function(){return this.date.toString()},clearTime:function(){return this.setHours(0).setMinutes(0).setSeconds(0).setMilliseconds(0)},today:function(){return this.clearTime()},add:function(t){var e=t.toLowerCase().match(/(\+|-)?(\d+)(.*[^s])/),n=void 0===e[1]||"+"===e[1]?1:-1,i=parseInt(e[2],10),s=e[3],o={second:"Seconds",minute:"Minutes",hour:"Hours",day:"Date",week:"Date",month:"Month",year:"FullYear"}[s];return"week"===s&&(n*=7),o&&this["set"+o](this["get"+o]()+n*i),this},moveToDayOfWeek:function(t,e){var n;return n=(("string"==typeof t?-1!==this.dayStrings.indexOf(t.toLowerCase())?this.dayStrings.indexOf(t.toLowerCase()):0:t)-this.getDay()+7*(e||1))%7,this.addDays(0===n?n+=7*(e||1):n)},moveToNextDayOfWeek:function(t){return this.moveToDayOfWeek(t,1)},moveToPreviousDayOfWeek:function(t){return this.moveToDayOfWeek(t,-1)},moveToFirstDayOfMonth:function(){return this.setDate(1)},moveToLastDayOfMonth:function(){return this.setDate(i.getDaysInMonth(this.getFullYear(),this.getMonth()))},moveToFirstDayOfQuarter:function(){var t=this.getMonth()/3+1;return this.setMonth(3*t-2).moveToFirstDayOfMonth()},moveToLastDayOfQuarter:function(){var t=this.getMonth()/3+1;return this.setMonth(3*t).moveToLastDayOfMonth()},moveToFirstDayOfWeek:function(){return this.isMonday()?this:this.moveToPreviousDayOfWeek("monday")},moveToLastDayOfWeek:function(){return this.isSunday()?this:this.moveToNextDayOfWeek("sunday")},moveToFirstDayOfYear:function(){return this.setMonth(0).moveToFirstDayOfMonth()},moveToLastDayOfYear:function(){return this.setMonth(11).moveToLastDayOfMonth()},clone:function(){return new i(this.getTime())}});return["years","months","weeks","days","hours","minutes","seconds"].forEach(function(t){t=t.ucfirst(),i.prototype["add"+t]=function(e){return this.add(e.toString()+t)}}),i.prototype.dayStrings.forEach(function(t,e){var n=i.prototype,s="moveToNext"+t.ucfirst();n[s]=function(){return this.moveToNextDayOfWeek(t)},n[s="moveToPrevious"+t.ucfirst()]=function(){return this.moveToPreviousDayOfWeek(t)},n[s="is"+t.ucfirst()]=function(){return this.getDay()===e}}),["date","day","fullYear","hours","milliseconds","minutes","month","seconds","time","timezoneOffset"].forEach(function(t){var e=i.prototype;t=t.ucfirst(),["get","set"].forEach(function(n){var i=n+t;e[i]=function(){var t=this.date[i].apply(this.date,arguments);return"get"===n?t:this}})}),i.isLeapYear=function(t){return t%4==0&&t%100!=0||t%400==0},i.getDaysInMonth=function(t,e){return[31,i.isLeapYear(t)?29:28,31,30,31,30,31,31,30,31,30,31][e]},i.today=function(){return(new i).clearTime()},i.parseNativeDate=function(e,n){return t.is(e,"date")?e:(e instanceof i?s=e:e&&(s=this.parseDate(e,n)),s&&s.date||null);var s},i.parseDate=function(t,e){if(t instanceof i)return t;var n,s,o,a,r=!1,l=e&&e.utc,c=e&&e.end,u=e&&e.skipRelativeFormats;return"number"==typeof t?n=new i(t):t.match(/^(\d{1,4})-(\d{1,2})-(\d{1,2})(?: (\d{1,2}):(\d{1,2})(?::(\d{1,2}))?)?$/)?(o=t.match(/^(\d{1,4})-(\d{1,2})-(\d{1,2})(?: (\d{1,2}):(\d{1,2})(?::(\d{1,2}))?)?$/),(n=new Date(0))[(a="set"+(l?"UTC":""))+"Seconds"](o[6]?Number(o[6]):c?59:0),n[a+"Minutes"](o[5]?Number(o[5]):c?59:0),n[a+"Hours"](Number(o[4])||(c?23:0)),n[a+"Date"](Number(o[3])),n[a+"Month"](Number(o[2])-1),n[a+"FullYear"](Number(o[1])),n=new i(n),r=!0):t.match(/^\d{10}$/)?n=new i(1e3*t):u||(t.match(/^now$/i)?(n=new i,r=!0):t.match(/^today$/i)?n=i.today():t.match(/^tomorrow$/i)?(n=i.today().addDays(1),r=!0):t.match(/^-(\d+)([dmyw])/)?(n="d"===(s=t.match(/^-(\d+)([dmyw])/))[2]?1:"m"===s[2]?30:"w"===s[2]?7:365,n=new i(Date.now()-864e5*s[1]*n)):t.match(/^\+(\d+)([dmyw])/)&&(n="d"===(s=t.match(/^\+(\d+)([dmyw])/))[2]?1:"m"===s[2]?30:"w"===s[2]?7:365,n=new i(Date.now()+864e5*s[1]*n))),n&&!r&&(c?n.setHours(23).setMinutes(59).setSeconds(59):n.setHours(0).setMinutes(0).setSeconds(0)),n},i.formatDateForDisplay=function(t){if("now"===t)return _("now");if("tomorrow"===t)return _("tomorrow");if("yesterday"===t)return _("yesterday");var e=i.parseNativeDate(t);return e?n.formatLocalizedDate(e,"date"):t},i.formatDateRangeForDisplay=function(t,e){return t&&e?_("from {0} to {1}").format(i.formatDateForDisplay(t),i.formatDateForDisplay(e)):t?_("from {0} to now").format(i.formatDateForDisplay(t)):e?_("your retention to {0}").format(i.formatDateForDisplay(e)):_("your retention")},i.pad=function(t){return t<10?"0"+t:t},i.ISODateString=function(t,e){var n=i.pad,s=e?"UTC":"",o=new Date(t),a=o["get"+s+"FullYear"]()+"-"+n(o["get"+s+"Month"]()+1)+"-"+n(o["get"+s+"Date"]());return isNaN(o.getTime())?"?":a},i.formatDateForPreferences=function(t){return i.parseNativeDate(t).strftime("%Y-%m-%d %H:%M:%S")},i.formatDateForHumanQuery=function(t){return t.strftime("%Y-%m-%d")},i.cleanDate=function(e,n){return t.is(e,"date")&&"hourly"!==n&&23===e.getHours()&&0===e.getMinutes()&&0===e.getSeconds()&&(e.setHours(0),e.setDate(e.getDate()+1)),e},i.getDatesFromRange=function(e,n){e=i.cleanDate(e,n),t.is(e,"date")&&"hourly"!==n&&(e=e.strftime("%Y-%m-%d"));var s=[e=new i(e),e.clone()];switch(n){case"yearly":s[0].moveToFirstDayOfYear(),s[1].moveToLastDayOfYear();break;case"monthly":s[0].moveToFirstDayOfMonth(),s[1].moveToLastDayOfMonth();break;case"weekly":s[1].add("6day")}return"hourly"===n?(s[0].setMinutes(0).setSeconds(0),s[1].setMinutes(59).setSeconds(59)):(s[0].clearTime(),s[1].setHours(23).setMinutes(59).setSeconds(59)),s},i.getDateForHighchart=function(t,e,n,s){var o="";switch(t=new Date(t),t=i.cleanDate(t,e),e){case"hourly":o=n>1||s?t.strftime("%e %b{0} <br/>%Hh"):t.strftime("%Hh");break;case"daily":o=t.strftime("%e <br/>%b{0}");break;case"weekly":var a=i.getDatesFromRange(t,e);t=a[1].date,a[0].date.getFullYear()!==a[1].date.getFullYear()&&(s=!0),o=a[0].date.strftime("%e")+"/"+a[1].date.strftime("%e <br/>%b{0}");break;case"monthly":o=t.strftime("%b <br />%Y");break;case"yearly":o=t.strftime("%Y")}return o.format(s?" "+t.getFullYear():"")},i}.apply(e,i))||(t.exports=s)},function(t,e,n){var i,s;i=[n(1),n(349)],void 0===(s=function(t,e){"use strict";var n=e.extend({getInnerElement:function(){return this.elements.container},setContent:function(t){return this.getInnerElement().setContent(t),this},addContent:function(t){return this.getInnerElement().addContent(t),this}});return t.namespace("Controls/Lightbox",n,t)}.apply(e,i))||(t.exports=s)},function(t,e,n){"use strict";var i,s;i=[n(1),n(2),n(357),n(271),n(13),n(4)],void 0===(s=function(t,e,n,i,s,o){function a(t){return function(){return this.get(t)}}function r(t){return t=e.isIn3DDashboard()&&(t||e.get3DDPlatformId()),i.get("streams",t)}var l=n.extend({defaults:{type:"feed",slow:!1,talkative:!1,refresh:1e7,itemGap:1e7,weeklyItemCount:0,retention:0,upgrade:Object.freeze({retention:0,refresh:1e7})},getLink:a("link"),getItemCount:a("itemCount"),getNewestItemPublishedAt:a("newestItemPublishedAt"),isSlow:a("slow"),isTalkative:a("talkative"),getRefresh:a("refresh"),getItemGap:a("itemGap"),getWeeklyItemCount:a("weeklyItemCount"),getRetention:a("retention"),getUpgrade:a("upgrade"),getModule:a("module"),getPreview:a("preview"),isLibrary:a("library"),getLastUpdateTimestamp:function(){return this.get("updateAt")-this.get("refresh")},isRTLLanguage:function(){return"rtl"===this.get("dir")},getDomain:function(){var t=this.getLink(),e=s.parseUrl(t);return e.protocol&&e.domain?e.protocol+"://"+e.domain:t},getFaviconURL:function(e){var n=this.getLink()||this.getQuery();return o.getFaviconUrl(n)||(t.is(e)?e:o.getStaticUrl("/img/file.png"))},isMultiSources:function(){var t=this.get("type");return"feed"!==t&&"feed-secure"!==t},"onItemChange:flags":function(e,n,i){if(!i.dontUpdateProducerFlags){var s=e.previous("flags"),o=t.clone(this.get("flags"),!0);Object.keys(n).forEach(function(t){n[t]&&!s[t]?o[t]=(o[t]||0)+1:!n[t]&&s[t]&&o[t]&&o[t]<1e3&&(o[t]-=1)}),this.set("flags",o)}},canFilter:function(t){return"unread"===t},isSecure:function(){return!1},hasUpgradeInfo:function(){return this.getUpgrade()!==this.defaults.upgrade},isStream:function(){return!0}});return l.factory=function(t,e){var i=r((e=e||{}).x3dPlatformId),o=i.get(t.id);if(n.preFactory(t,e,o),!t.link)if(!t.query||o&&o.getLink())delete t.link;else{var a=s.parseUrl(t.query);delete a.path,delete a.anchor,delete a.query,t.link=s.composeUrl(a)}return o?o.set(t,{sync:!0}):(o=new l(t,{silent:!0}),i.set(t.id,o)),o},l.getFromCache=function(t,e){return r(e).get(t)},l.getEmptyStream=function(){return new l},l}.apply(e,i))||(t.exports=s)},function(t,e,n){var i,s;i=[n(1),n(365)],void 0===(s=function(t,e){"use strict";var n=e.extend({name:"uwa-accordion",defaultOptions:{title:null,multiSelect:!1,constantItemWidth:!1,contentPosition:"bottom"},init:function(t){this._parent(t)},hasItem:function(t){return!!this.elements.items[t]},addItem:function(e,n){var i=this.elements,s=i.items=i.items||{},o=i.containers=i.containers||{};this._parent(e,n),o[e]=t.createElement("div",{class:this.getClassNames("-content")}).inject(s[e],"top"===this.options.contentPosition?"top":"bottom"),n.content&&this.setContent(e,n.content)},removeItem:function(t){var e=this.elements.items;e[t]&&(e[t].destroy(),e[t]=null)},updateContent:function(e,n,i){var s=this.elements.containers[e];return i&&s.empty(),t.is(n,"string")&&(n=t.createElement("div",{html:n})),s.addContent(n),s},buildSkeleton:function(){var e=this.elements;e.container=t.createElement("ul",{class:this.getClassNames()}),e.itemContainer=e.container},onClick:function(t){this.toggleItem(t)},onChange:function(t,e){e&&!this.options.multiSelect&&this.unselectItems(!1,t)},setContent:function(t,e){return this.updateContent(t,e,!0)},addContent:function(t,e){return this.updateContent(t,e,!1)}});return t.namespace("Controls/Accordion",n,t)}.apply(e,i))||(t.exports=s)},function(t,e,n){"use strict";var i,s;i=[n(1),n(15),n(3),n(9),n(39),n(26),n(2),n(4)],void 0===(s=function(t,e,n,i,s,o,a,r){var l=i.singleton(s,{options:{overlayOpacity:.8,classWindow:"",size:{},zIndex:9999,closeWithOverlay:!0,destroy:!0,closeButton:!0,contentTitle:"",iconTitle:""},init:function(){var e={transition:"sineOut"};this.body=document.body,this.mask=t.createElement("div",{id:"smask-window",events:{click:function(t){this.currentOptions.closeWithOverlay&&this.mask===t.target&&this.close()}.bind(this)},styles:{position:"fixed",border:"none",top:0,left:0,height:"100%",width:"100%"}}).hide().inject(this.body),this.content=t.createElement("div",{id:"smask-content"}),this.header=t.createElement("div",{id:"smask-header"}),this.container=t.createElement("div",{id:"smask-container"}),this.titleContainer=t.createElement("div",{id:"smask-title",html:[this.iconTitle=t.createElement("span",{id:"smask-icon-title"}),this.contentTitle=t.createElement("span",{text:this.options.contentTitle})]}),this.currentOptions=this.options,this.mask.addContent(this.container),this.maskTween=new o(this.mask,e).fade("hide"),this.contentTween=new o(this.content,e)},isOpen:function(){return"none"!==this.mask.getStyle("display")},open:function(t,i,s){var o,a,l={},c=this.isOpen();if(c&&!s)return this.addEventOnce("onClosed",this.open.bind(this,t,i,!0)).close(this.currentOptions.overlayOpacity===(i&&i.overlayOpacity||this.options.overlayOpacity)),this;for(o in this.currentOptions=i=Object.assign({},this.options,i),this.closeButton&&this.closeButton.remove(),!1!==i.closeButton&&(a="string"==typeof i.closeButton?i.closeButton.trim():"squeezeMask",this.closeButton=r.createCloseIcon(a,i.closeButton).addEvent("click",function(t){n.stop(t),this.close()}.bind(this)).inject(this.header)),!1!==i.isClosable&&(this.isClosable=!0),""!==i.contentTitle?(this.contentTitle.set("text",i.contentTitle),this.header.addContent(this.titleContainer)):this.contentTitle.remove(),this.iconTitle.toggleClassName("uwa-icon",Boolean(this.currentOptions.iconTitle)).set("data-icon",this.currentOptions.iconTitle?this.currentOptions.iconTitle:""),this.content.empty().addContent(t),this.container.addContent(this.header,this.content),i)i.hasOwnProperty(o)&&o.match(/^on[A-Z]/)&&(l[o]=i[o]);return this.addEvents(l).addEvent("close",this.removeEvents.bind(this,l)),this.setOpacity(i.overlayOpacity),this.mask.set("class",i.classWindow).setStyle("z-index",i.zIndex),this.mask.show(),this.dispatchEvent("onOpen"),e.setStyles.call(this.body,{overflow:"hidden"}),this.resize(),this[c?"contentTween":"maskTween"].addEventOnce("onComplete",this.dispatchEvent.bind(this,"onOpened")).fade("in"),this},getContent:function(){return this.content},close:function(t){var n;return this.closing||!this.isOpen()?this:(!0!==t&&(t=!1),this.closing=!0,this.dispatchEvent("onClose"),(n=this[t?"contentTween":"maskTween"]).addEventOnce("onComplete",function(){t||(this.mask.hide(),e.setStyle.call(this.body,"overflow","")),this.content.getChildren().invoke(this.currentOptions.destroy?"destroy":"remove"),this.dispatchEvent("onClosed"),this.removeEvents(),this.closing=!1}.bind(this)),this.isClosable&&n.fade("out"),this.resizeInterval&&clearInterval(this.resizeInterval),this)},resize:function(t){return this.container.removeClassName("fullscreen"),this.container.setStyle("width",""),this.content.setStyle("height",""),this.currentOptions.fullscreen?this.container.addClassName("fullscreen"):(t?this.currentOptions.size=t:t=this.currentOptions.size,this.container.setStyle("width",t&&t.x),this.content.setStyles("height",t&&t.y)),this},setOpacity:function(t){return"object"!=typeof t&&(t=a.isIn3DDashboard()?[220,220,220,t]:[0,0,0,t]),this.mask.setStyle("background-color","rgba("+t.join(",")+")"),this},setTitle:function(t){this.contentTitle.set("html",t)},getTitle:function(){return this.contentTitle.innerHTML}});return window.SqueezeMask=l,l}.apply(e,i))||(t.exports=s)},function(t,e,n){var i=n(31);t.exports=function(t,e){if(!i(t))return t;var n,s;if(e&&"function"==typeof(n=t.toString)&&!i(s=n.call(t)))return s;if("function"==typeof(n=t.valueOf)&&!i(s=n.call(t)))return s;if(!e&&"function"==typeof(n=t.toString)&&!i(s=n.call(t)))return s;throw TypeError("Can't convert object to primitive value")}},function(t,e,n){var i=n(126)("meta"),s=n(31),o=n(72),a=n(49).f,r=0,l=Object.isExtensible||function(){return!0},c=!n(29)(function(){return l(Object.preventExtensions({}))}),u=function(t){a(t,i,{value:{i:"O"+ ++r,w:{}}})},h=t.exports={KEY:i,NEED:!1,fastKey:function(t,e){if(!s(t))return"symbol"==typeof t?t:("string"==typeof t?"S":"P")+t;if(!o(t,i)){if(!l(t))return"F";if(!e)return"E";u(t)}return t[i].i},getWeak:function(t,e){if(!o(t,i)){if(!l(t))return!0;if(!e)return!1;u(t)}return t[i].w},onFreeze:function(t){return c&&h.NEED&&l(t)&&!o(t,i)&&u(t),t}}},function(t,e){var n;n=function(){return this}();try{n=n||new Function("return this")()}catch(t){"object"==typeof window&&(n=window)}t.exports=n},function(t,e,n){var i,s;i=[n(1)],void 0===(s=function(t){"use strict";var e={},n={warn:function(n,i,s){s||(s="warn"),t.debug&&!e.hasOwnProperty(n)&&(t.log(n+" is deprecated."+(i?" "+i:""),s),e[n]=!0)},alias:function(e,i,s){if(!t.debug)return s;var o=function(){return n.warn(e,i),s&&s.apply(this,arguments)};return s&&(o.prototype=s.prototype),o},property:function(e,i,s){var o=s?s.value:void 0;if(t.debug){var a=s&&s.name||i;Object.defineProperty(e,i,{get:function(){return n.warn(a,s&&s.message),o},set:function(t){n.warn(a,s&&s.message),o=t}})}else e[i]=o},uncurryAlias:function(t,e,i,s){Object.keys(t).forEach(function(o){var a=t[o];Object.defineProperty(e,o,{value:function(e,r,l){switch(n.warn(s+"#"+o,"Use "+i+"."+o+"(value, ...) instead"),arguments.length){case 0:return a.call(t,this);case 1:return a.call(t,this,e);case 2:return a.call(t,this,e,r);case 3:return a.call(t,this,e,r,l);default:var c=[].slice.call(arguments);return c.unshift(this),a.apply(t,c)}},writable:!0})})}};return n}.apply(e,i))||(t.exports=s)},function(t,e,n){"use strict";var i,s;i=[n(1),n(3)],void 0===(s=function(t,e){var n=Array.prototype.slice;return function(i,s){var o=n.call(arguments,2);return function(a){var r;return t.is(a,"event")?(e.stop(a),r=n.call(arguments,1)):r=n.call(arguments),r.unshift.apply(r,o),i.apply(void 0===s?this:s,r)}}}.apply(e,i))||(t.exports=s)},function(t,e,n){"use strict";var i,s;i=[n(4),n(362)],void 0===(s=function(t,e){var n={};return n={availableColors:["green","blue","orange","pink","grey","purple"],spriteMap:[["plus","home","label-2","star","label","pin","sheet","power","diamond","folder"],["enveloppe","happy-face","rss","calc","clock","pen","bug","label-box","yen","snail"],["cloud","cog","vbar","pie","table","line","magnifier","potion","pound","euro"],["lightbulb","movie","note","camera","mobile","computer","heart","bubbles","dollars"],["alert","bill","funnel","eye","bubble","calendar","check","crown","plane"]],getSplatIcons:function(){return n.spriteMap.reduce(function(t,e){return t.concat(e)})},getIconPosition:function(t,e){e=e||"green";var i=16,s=20*n.availableColors.length,o=16;return n.spriteMap.forEach(function(e,n){e.includes(t)&&(i+=n*s,o+=20*e.indexOf(t))}),{x:-i-n.getOffsetByColor(e),y:-o}},getOffsetByColor:function(t){var e=n.availableColors;if(e.includes(t))return 20*e.indexOf(t);throw new Error("Wrong color specified "+t)},setIconSrc:function(i,s){function o(e,n,s){i.src=t.BLANK_IMAGE_URL,i.addClassName("tab-icon"),i.setStyles({"background-position":"{0}px {1}px".format(e.x,e.y),"background-image":n?"url({0})".format(t.getStaticUrl("/{0}".format(n))):"","background-size":s})}if(i.toggleClassName("empty-icon",!s),i.removeClassName("tab-icon"),i.removeAttribute("style"),s)if(UWA.is(s,"object")){o(n.getIconPosition(s.icon,s.color))}else{var a=e(s);a?o({x:-a[1],y:-a[2]},a[0],"254px 200px"):i.src=s}else i.src=t.BLANK_IMAGE_URL}},App.TabIcon=n,n}.apply(e,i))||(t.exports=s)},function(t,e,n){"use strict";var i,s;i=[n(1),n(39),n(23),n(3),n(19),n(53),n(2),n(21),n(4),n(45),n(35),n(103),n(148),n(6),n(190),n(109),n(214),n(156),n(139),n(192),n(197),n(104),n(224),n(767),n(768),n(283)],void 0===(s=function(t,e,n,i,s,o,a,r,l,c,u,h,d,p,m,f,g,v,b,y,w,x,C,S,E,k){var T,A,I={activeView:"feeds",initialize:function(e){t.extendElement(document.body).setStyle("overflow","hidden"),a.User.isRegistered||document.body.addClassName("nv-user-unregistered"),this.UI={pageFooter:document.body.getElement(".nv-footer"),sidebar:document.body.getElement("#smartreader-sidebar"),mainTreeView:document.body.getElement("#smartreader-mainTreeView"),container:document.body.getElement("#smartreader-container")},this.initializeData(e),this.Widget=new S(this),this.Feed=new E(this),this._notify=(new C).inject(document.body.getElement("#smartreader-main"),"top"),this.UI.Feeds={topContainer:document.body.getElement("#smartreader-feeds-container"),header:document.body.getElement("#smartreader-feeds-header"),main:document.body.getElement("#smartreader-feeds-main"),container:document.body.getElement("#smartreader-feeds-inner"),seeAll:document.body.getElement("#show-all-feeds"),seeSlow:document.body.getElement("#show-only-slow-feeds"),seeReadlater:document.body.getElement("#show-only-read-later"),seeRecentlyread:document.body.getElement("#show-only-recently-read"),markDropdown:document.body.getElement("#smartreader-feeds-markDropdown"),markRead:document.body.getElement("#smartreader-feeds-markRead")},this.initializeSections(),this.initializeSectionContent(),this.Widget.initializeStickyWidgets(),this.UI.pageFooter&&this.UI.pageFooter.removeClassName("footer-expanded"),this.UI.sidebar.toggleClassName("hide-static-sections",c.get("hideStaticSections")).toggleClassName("hide-all-feeds",!a.isAllowed("feed_all")),window.addEventListener("resize",this.resizeApp.bind(this)),this.UI.pageFooter.addEvent("click",this.resizeApp.bind(this)),this.UI.sidebar.addEvent("click",this.mainTreeViewObserver.bind(this)),this.UI.container.show(),this.initializeFeeds(!0),this.refreshEmptyStatuses(!0);var i=c.get("smartreader.lastSelection");i?this.display.apply(this,i.split(":")):this.display("all"),new n({className:"dark",shadows:!0,element:this.UI.container.getElement(".nv-sidebar-scroller")}),this.initializeHeader(),a.isAllowed("tag")||d.registerSidebar("right",function(){var t=this.Widget.getQuickSidebar();t.hasSidebar()&&t.toggleSidebar("close")}.bind(this)),d.registerSidebar("left",function(){this.hasSidebar()&&this.toggleSidebar()}.bind(this))},initializeHeader:function(){var e=this.UI.sidebar.getElement(".nv-treeview-header"),n=t.createElement("div",{class:"nv-reader-title","data-action":"display:all"});if(e.addContent(n,{tag:"div",class:"toggle-static-sections uwa-icon","data-action":"toggle-static-sections"}),a.isAllowed("dashboard_title_edit")){var s=new w(n,{className:"nv-reader-title-edit",autoEdit:!1,events:{onComplete:function(t){e.removeClassName("editing"),this.setPageTitle(t)}.bind(this)}});n.addEvent("dblclick",function(t){i.stop(t),s.edit(),e.addClassName("editing")})}this.setPageTitle(a.Page.title)},setPageTitle:function(t){this.UI.sidebar.getElement(".nv-reader-title").setText(t),a.Page.title!==t&&(a.Page.title=t,p.saveUserPageTitle({title:t}).done(),this.refreshCounters())},getAvailableAppHeight:function(){var t=s.getSize().height;return this.availableAppHeight=t,this.availableAppHeight-=document.body.getElement("#maintable").getPosition().y,this.UI.pageFooter&&(this.availableAppHeight-=this.UI.pageFooter.getSize().height),this.availableAppHeight},resizeApp:function(){if(!x.isOpen()){var t,e=this.getAvailableAppHeight(),n=e-30-1-10;this.UI.sidebar.setStyle("height",e),document.body.getElement("#smartreader-widgets-main").setStyles({height:n-20}),document.body.getElement("#smartreader-feeds-main").setStyles({height:n+30-this.UI.Feeds.header.getSize().height+10}),k.close(),s.getSize().height<=1160&&this.hasSidebar()&&!a.isAllowed("tag")&&this.Widget.getQuickSidebar().toggleSidebar("close"),t=this.UI.maxTitleLength,this.UI.maxTitleLength=Math.round((s.getSize().width-520)/9.3),this.getProducer()&&t!==this.UI.maxTitleLength&&this.Feed.updateHeaderTitle()}},showNotify:function(t){this._notify.show(t)},getActiveView:function(){return this.activeView},setActiveView:function(t){if(!t||!["feeds","widgets"].includes(t))throw new Error("Wrong parameter used");this.activeView=t},toggleSidebar:function(){this.UI.container.toggleClassName("hideSidebarLeft"),i.dispatchEvent(window,"resize"),c.set("smartreader.hideSidebar",!this.hasSidebar()),c.save()},hasSidebar:function(){return!this.UI.container.hasClassName("hideSidebarLeft")},_putSidebarFocusOn:function(e,n){e=t.extendElement(e);var i=this.UI.sidebar;return i.getElements(".focus").invoke("removeClassName","focus"),i.getElements(".current").invoke("removeClassName","current"),e.addClassName("current"),!1!==n&&this.scrollToSidebarElm(e),e},refreshSidebarFocus:function(t){var e=this.getSectionRow();if(!e||e.hasClassName("active")){e=(e=this.getCurrentTreeRow()).getClosest([".nv-treeview-static",".nv-treeview-multiplefeeds",".nv-treeview-group",".nv-treeview-feed",".nv-treeview-section",".nv-treeview-widget"].join(","))||e}this._putSidebarFocusOn(e,t)},scrollToSidebarElm:function(t){o.scrollToElement(t,{margin:30})},navigate:function(t){var e=this.UI.sidebar,n=e.getElement(".focus");n&&n.hasClassName("nv-treeview-row")||(n=this.getCurrentTreeRow());var s,o=e.getElements(".nv-treeview-row");function a(t){return l.getNext(o,n,{reverse:t,condition:function(t){return!!t.clientHeight}})}function r(t,e){var n=t.getElement("[class*=Toggle]");if(n){var o=n.parentNode;if(!(!o.nextSibling||!o.nextSibling.clientHeight)!==e)return i.dispatchEvent(n,"click"),s=o,!0}}function c(){i.dispatchEvent(n,"click")}"down"===t?s=a(!1):"up"===t?s=a(!0):"right"===t?r(n,!0)||c():"left"===t?r(n,!1)||n.getParents().some(function(t){return r(t,!1)}):"open"===t&&c(),s&&s!==n&&(n.removeClassName("focus"),s.addClassName("focus"),this.scrollToSidebarElm(s))},toggleSection:function(t,e){var n=this.getSectionRow(t),i=n.hasClassName("active");n.toggleClassName("active",e);var s=n.hasClassName("active");i!==s&&p.tabUpdate({tabId:t,options:{state:s?1:0}}).done(),this.refreshSidebarFocus(!1)},getSectionRow:function(t){if(!t){var e=this.getSection();t=e&&e.id}return t&&document.body.getElement("#section-"+t)},getSectionGroupRow:function(t,e){return document.body.getElement("#section-"+t+" .nv-treeview-group-"+e+" .nv-treeview-group-header")},getWidgetRow:function(t){return document.body.getElement("#widget-"+t)},getStaticRow:function(t){var e={all:"#show-all-feeds .nv-treeview-row",slow:"#show-only-slow-feeds .nv-treeview-row",saved:"#show-only-read-later .nv-treeview-row",recentlyread:"#show-only-recently-read .nv-treeview-row"};return document.body.getElement(e[t]||e.all)},getProducerRow:function(t,e){var n=this.getWidgetRow(t);return n.getAttribute("data-producer-id")!==e&&(n=n.getParent().getElement('[data-producer-id="'+e+'"]')),n},getCurrentTreeRow:function(){var t,e=this.current;if(/^section/.test(e.type)){var n=this.getSectionRow(e.id);t=n.hasClassName("single-group")||n.hasClassName("empty")||!n.hasClassName("active")?n:this.getSectionGroupRow(e.id,e.type.slice(8))}else t="search"===e.type?this.getSectionRow(e.id):"widget"===e.type?e.producerId?this.getProducerRow(e.id,e.producerId):this.getWidgetRow(e.id):this.getStaticRow(e.type);return t},display:function(t,e,n){var s,o,r=!1;if("all"!==t||a.isAllowed("feed_all")||(t="slow"),"section"===t&&(s=this.getSection(e))&&("search"===s.type?t="search":s.widgets.some(function(t){return t.isSearch()})?t="section-searches":s.widgets.some(function(t){return t.isStream()})?t="section-streams":s.widgets.length&&(t="section-widgets")),"widget"===t){var l=(o=this.getWidget(e))&&o.getProducers()||[];n&&!l.invoke("getId").includes(n)&&(n=null),n||1!==l.length||(n=l[0].getId())}switch(this.setCurrent(t,e,n),s=this.getSection(),o=this.getWidget(),t){case"section-streams":case"section-searches":r=s&&this.Feed._display();break;case"section-widgets":r=s&&this.Feed._displayMessage(_("Select app"));break;case"section":r=s&&this.Feed._displayMessage(_("This tab is empty."));break;case"all":case"slow":case"recentlyread":case"saved":u.log("reader",t),r=this.Feed._display(t);break;case"widget":o&&(r=o.isProducer()?this.Feed._display():this.Widget._display(e));break;default:r=!1}r?(i.dispatchEvent(window,"resize"),this.closeOptionsIfAny(),this.saveState()):this.display("all")},displayItem:function(t){var e=this.getWidgetFromStream(t.getStreamId());e?this.display("widget",e.getId(),t.getStreamId()):this.display("all"),k.open(t),t.canFlag("unread")&&t.setFlag("unread",!1).save()},saveState:function(){var t=this.current,e=[t.type,t.id,t.producerId].filter(function(t){return t}).join(":");c.get("smartreader.lastSelection")!==e&&(c.set("smartreader.lastSelection",e),c.save());var n=this.getSection();n&&a.Page.openTabId!==n.id&&(a.Page.openTabId=n.id,p.myDashboardOpenTab({tabId:n.id}).done())},closeOptionsIfAny:function(){document.body.getElements("#tabOptions[data-storage]").forEach(App.UI.Options.closeActive)},mainTreeViewObserver:function(t){var e=i.getElement(t).getClosest("[data-action]"),n=e&&e.getAttribute("data-action").split(":"),s=n&&n.shift();s&&("add-section"===s?r.createNewTab(null,function(t,e){if(!t){this.display("section",e.id);var i=document.body.getElement("#smartreader-{0}-container #tabOptions".format(this.getActiveView())),s=new App.UI.Options.ReaderView({withWizard:"wizard"===n[0],tabId:e.id});i.empty().addContent(s.getContent()),s.open()}}.bind(this)):"toggle-section"===s?this.toggleSection(n[0]):"toggle-multistream"===s?this.getWidgetRow(n[0]).getParent().toggleClassName("multiplefeeds-active"):"toggle-static-sections"===s?(c.set("hideStaticSections",!c.get("hideStaticSections")),c.save(),this.UI.sidebar.toggleClassName("hide-static-sections")):"display"===s?this.display.apply(this,n):"toggle-sticky-widget"===s&&this.Widget.toggleStickyWidget(this.getWidget(n[0])))},injectRow:function(t,e){var n="#section-{0} .nv-treeview-{1}".format(e.getTabId(),e.isStream()?"streams":e.isSearch()?"searches":"widgets"),i=this.UI.mainTreeView.getElement(n);if(!i)throw new Error("Container not found");t.getChildren()[0].id="widget-"+e.dataObj.id,e.linkToDom(t);var s,o,a=i.getChildren();for(s=0,o=a.length;s<o&&!(e.comparePosition(h.fromElement(a[s]))<0);s++);s===o?i.appendChild(t):i.insertBefore(t,a[s]),this.refreshEmptyStatuses()},refreshEmptyStatuses:(A=function(){this.getSections().forEach(function(t){if("search"!==t.type){var e=this.getSectionRow(t.id),n=this.getSectionGroupsInfos(t.id),i=e.getElements(".nv-treeview-group");i[0].toggleClassName("empty",!n.searches.length),i[1].toggleClassName("empty",!n.streams.length),i[2].toggleClassName("empty",!n.widgets.length),e.toggleClassName("empty",0===n.groupCount),e.toggleClassName("single-group",1===n.groupCount)}},this)},function(t){clearTimeout(T),t?A.call(this):T=setTimeout(A.bind(this),5)}),refreshCounters:l.debounce(function(){var e=this,n=/nv-treeview-row/,i=e.getItemList("all").getTotalFlagCount("unread");function s(t){return e.getSection(t).widgets.reduce(function(t,e){return l.counterAdd(t,e.unread||0)},0)}var o=i?l.formatCounterNumber(i):"";document.title=a.Page.title+(o?" ("+o+")":"");var r=this.UI.sidebar.getElements(".nv-treeview-unread");l.asyncForEach(r,function(i){var o=function(e){for(var i,s=e.parentNode;!i;)n.test(s.className)&&(i=s),s=s.parentNode;return t.extendElement(i)}(i),a=o.getAttribute("data-section-id"),r=o.getAttribute("data-widget-id"),c=o.getAttribute("data-producer-id"),u=o.getAttribute("data-group"),h=0;function d(t){t.getTotalFlagCount&&(t=t.getTotalFlagCount("unread")),h=l.counterAdd(h,t)}if("streams"===u||"searches"===u)d(e.getItemList("section-"+u,a));else if("widgets"===u)d(s(a));else if(a)d(e.getItemList("section-searches",a)),d(e.getItemList("section-streams",a)),d(s(a));else if(c)d(e.getItemList("producer",r,c));else if(r){var p=e.getWidget(r);p.isMultiStream()?d(e.getItemList("widget",r)):d(p.unread||0)}else d(e.getItemList(o.getAttribute("data-type")));i.setText(l.formatCounterNumber(h)),o.toggleClassName("hasUnread",!!h),o.parentNode.toggleClassName("noUnread",!h)})},2),refreshFavicons:l.debounce(function(){var t=this.UI.sidebar.getElements(".nv-treeview-row .nv-treeview-rowIcon");l.asyncForEach(t,function(t){var e=t.parentNode.getAttribute("data-producer-id");if(e){var n=this.getProducer(e).getFaviconURL();n&&t.setStyle("background-image","url("+n+")")}}.bind(this))},2),initializeData:function(t){this.rawData=t,this._itemLists=Object.create(null),this.sections={},this.groups=[{name:"searches",label:_("Tracked topics"),test:function(t){return t.isSearch()},icon:"funnel"},{name:"streams",label:_("Feeds"),test:function(t){return t.isStream()},icon:"rss"},{name:"widgets",label:_("App"),test:function(t){return!t.isProducer()},icon:"single-window"}],this.widgets={},this.current={type:"",id:null},this.feedsInitialized=!1},initializeSections:function(){this.rawData.tabs&&this.rawData.tabs.forEach(this.addSection,this)},initializeSectionContent:function(){0!==Object.keys(this.sections).length&&this.rawData.modules&&(this.rawData.modules.forEach(function(t){this.addModule(h.factory(t),{noFocus:!0})},this),r.updateLabelFilter(),this.refreshFavicons())},initializeFeeds:function(){this.reinitItemLists();var t=this,e=l.debounce(this.reinitItemLists,10,this),n={onProducerChange:function(n){n.hasChanged("flags")&&t.refreshCounters(),n.hasChanged("link")&&(t.refreshFavicons(),n===t.getProducer()&&this.Feed.updateHeaderIcon()),n.hasChanged("slow")&&e()}.bind(this),onReset:function(){t.refreshCounters()}},i=this.getItemList("streams-counters");i.addEvents(n),i.startUpdate(),"all"!==this.getCurrentType()&&i.loadProducers()},reinitItemLists:function(){var e=this,n=null;function i(i,s,o){(s=l.unique(s,function(t){return t.getId()})).sort(function(t,e){return t.getId()<e.getId()?1:-1});var a=e.getItemList.apply(e,i);o||(o={}),n&&(o.filter=n),t.equals(a.getProducers(),s)&&t.equals(a.getQuery(),o)||a.replace(new m(s,{api:s[0]&&s[0].isStream()?v:b,query:o}))}c.get("smartreader.onlyUnread")&&(n="unread");var s=[],o=[],a=[];this.getSections().forEach(function(t){var e=[],n=[];return t.widgets.forEach(function(t){var s=t.getProducers(),o=t.getData(),a={};o.date_from&&(a.from=o.date_from),o.date_to&&(a.to=o.date_to),s.forEach(function(e){i(["producer",t.getId(),e.getId()],[e],a)}),s.length>1&&i(["widget",t.getId()],s),e.push.apply(e,t.getStreams()),n.push.apply(n,t.getSearches())}),i(["section-streams",t.id],e),i(["section-searches",t.id],n),s.push.apply(s,e),r.hasMatchingLabels(t.id)&&o.push.apply(o,e),a.push.apply(a,n),e}),i(["all"],o),i(["streams-counters"],o,{limit:0}),i(["slow"],o.filter(function(t){return t.isSlow()})),i(["saved"],s,{type:"saved"}),i(["recentlyread"],s,{type:"recentlyread"})},populateMultipleFeeds:function(e){var n,i=e.getStreams(),s=document.body.getElement("#widget-"+e.getId());s&&(n=s.getParent("> .nv-treeview-multiplefeedsList"))&&n.setContent(i.map(function(n){var i=n.getId();return t.createElement("li",{class:"nv-treeview-feed",html:{tag:"div",class:"nv-treeview-row feed-"+i,"data-action":"display:widget:"+e.getId()+":"+i,"data-widget-id":e.getId(),"data-producer-id":i,"uwa-tooltip":n.getTitle().sanitizeHTML(),html:[{tag:"img",width:16,height:16,src:l.getStaticUrl("/img/s.gif"),class:"icon nv-treeview-rowIcon",alt:"",title:""},{tag:"span",class:"nv-treeview-label",html:n.getTitle().sanitizeHTML()},{tag:"span",class:"nv-treeview-unread"}]}})}))},setCurrent:function(t,e,n){0==+e&&(e=null),this.current={type:t,id:e,producerId:n}},getCurrentType:function(){return this.current.type},getItemList:function(t,e,n){if(!t){var i=this.current;i.producerId?(t="producer",e=i.id,n=i.producerId):(t=i.type,e=i.id)}if("producer"===t){if(!e)throw new Error("Producer needs a widget id");if(!n)throw new Error("Producer needs a producer id")}var s=t+(e?":"+e:"")+(n?":"+n:"");return this._itemLists[s]||(this._itemLists[s]=new m),this._itemLists[s]},getProducer:function(t){if(t||(t=this.current.producerId),!t){var e=this.getWidget(),n=e&&e.getProducers();return n&&1===n.length?n[0]:void 0}return f.getFromCache(t)||g.getFromCache(t)},getWidget:function(t){if(!t){var e=this.current;if("widget"!==e.type)return;t=e.id}return this.widgets[t]},getWidgetFromStream:function(t){return this.getWidgetsFromStream(t)[0]},getWidgetsFromStream:function(t){if(!t){var e=this.getProducer();if(!e)return[];t=e.getId()}return this.getWidgets().filter(function(e){return e.getStreamIds().includes(t)})},getSection:function(t){var e=this.current;if(!t){var n=this.getWidget();/^section/.test(e.type)||"search"===e.type?t=e.id:n&&(t=n.getTabId())}return this.sections[t]},getSections:function(){return l.getObjectValues(this.sections)},getGroup:function(t){return t=t||this.getCurrentType().split("-")[1],this.groups.detect(function(e){return e.name===t})},getWidgetsFromGroup:function(t,e){var n,i=this.getGroup(t);return n=i&&i.test||function(){return!1},this.getSection(e).widgets.filter(function(t){return n(t)})},getSectionGroupsInfos:function(t){var e=this.groups,n={};function i(t){t.test(this)&&n[t.name].push(this)}return e.forEach(function(t){n[t.name]=[]}),this.getSection(t).widgets.forEach(function(t){e.forEach(i,t)}),n.groupCount=e.reduce(function(t,e){return t+(0!==n[e.name].length)},0),n},removeWidgetsFromGroup:function(t,e){this.getWidgetsFromGroup(t,e).invoke("remove")},getWidgets:function(){return l.getObjectValues(this.widgets)},viewForcedReadState:function(){if(!a.User.isRegistered)return!1;var t=this.getCurrentType();return"recentlyread"===t||"saved"!==t&&null},flagCurrentView:function(t,e,n){n&&(n=Math.round((new Date).setHours(0,0,0,0)/1e3)-86400*(n-1)),this.getItemList().setFlags(t,e,n)},addSection:function(t){t.widgets||(t.widgets=[]),t._tabObject||(t._tabObject={dataObj:t}),r.register(t._tabObject),this.sections[t.id]=t,this.Feed.addSectionRow(t)},sectionIdToFeedIds:function(t){var e=[];return this.getSection(t).widgets.forEach(function(t){e.push.apply(e,t.getStreamIds())}),e},addModule:function(t,e){if(!(t instanceof h.RssReader)||t.isProducer()){this.widgets[t.getId()]=t;var n=this.getSection(t.getTabId());n&&n.widgets.push(t),e=e||{},t.getProducers().length?this.addFeed(t,e.noFocus):this.addWidget(t,e.noFocus)}},addFeed:function(t,e){var n=t.isMultiStream()?this.Feed.addMultiplefeedsRow(t):this.Feed.addFeedRow(t);return t.addEvent("onRemove",this.removeWidget.bind(this,t.getId())),t.isMultiStream()&&this.populateMultipleFeeds(t),e||(this.reinitItemLists(),this.refreshFavicons(),this.refreshCounters(),this.display("widget",t.getId())),n},renameCurrentFeedModule:function(t){var e=this.getWidget();return!t&&e.isStream()&&(t=e.getStreams()[0].getTitle()),t||(t=_("untitled")),e.setTitle(t,null,!0),this.UI.mainTreeView.getElement(".current .nv-treeview-label").set("text",t),this.Feed.refreshCurrentView(),this.Feed.updateHeaderTitle(),t},shareCurrentFeedModule:function(){this.getWidget().share()},deleteCurrentSection:function(){var t=this.getSection();t&&(y.sendEvent({name:"com.netvibes.dashboard.{0}.tab.{1}.delete".format(a.Page.id,t.id),payload:{type:"tab",value:{title:t.title}}}),p.saveUserTabDelete({tabId:t.id}).done(),t.widgets.forEach(function(t){delete this.widgets[t.getId()]},this),this.reinitItemLists(),delete this.sections[t.id],r.unregister(t._tabObject),this.display("all"),a.Page.openTabId=l.getObjectValues(this.sections)[0].id,this.getSectionRow(t.id).destroy(),this.refreshCounters())},renameCurrentSection:function(t){var e=this.UI.mainTreeView.getElement(".current"),n=this.getSection();p.tabUpdate({title:t,tabId:n.id}).done(function(){this.Feed.updateHeader()}.bind(this)),e.getElement(".nv-treeview-label").set("text",t),n.title=t},shareCurrentSection:function(){var t=this.getSection();r.share(t.id)},addWidget:function(t,e){var n=this.Widget.addWidgetRow(t);return t.addEvent("onRemove",this.removeWidget.bind(this,t.getId())),e||this.display("widget",t.getId()),n},removeWidget:function(t){var e=this.getWidget(t);if(void 0!==e){var n=e.getTabId();this.getSection(n).widgets.erase(e),delete this.widgets[e.getId()],this.getWidgetRow(e.getId()).getParent().destroy(),this.display("section",n),this.reinitItemLists(),this.refreshCounters(),this.refreshEmptyStatuses();var i=document.body.getElement("#container-widget-"+e.getId());i&&i.destroy()}},setWidgetQuery:function(t,e){var n=t.isSearch();return(n?g:f).fetch({query:e}).then(function(e){var i=e.getProducers()[0],s=n?i.getQuery().topic:i.getQuery();t.getData().searchIds=i.getId(),n?t.getData().searchQuery=JSON.stringify(i.getQuery()):t.getData().feedUrl=i.getQuery(),t.getData().title||(t.setTitle(s),this.renameCurrentFeedModule(s)),t.save(),this.getWidgetRow(t.getId()).setAttribute("data-producer-id",i.getId()),this.display("widget",t.getId())}.bind(this))}};return Object.assign(I,e.prototype),App.SmartReader=I,I}.apply(e,i))||(t.exports=s)},function(t,e,n){"use strict";var i,s;i=[n(1),n(13),n(16),n(2),n(4),n(6),n(174),n(199),n(36),n(61)],void 0===(s=function(t,e,n,i,s,o,a,r,l,c){var u={},h=c.extend();function d(t){var e=t.getQuery();return e.type=t.getType(),e.range=t.getRange(),(t.getFrom()||t.getTo())&&Object.assign(e,l.formatDateRangeForAPI(t.getFrom(),t.getTo())),t.getSampling()&&"auto"!==t.getSampling()&&(e.sampling=t.getSampling()),e}function p(t){t&&t.availableFacets&&t.availableFacets.forEach(function(t){t.name=String(t.name)})}function m(t,e){if(!t||!t.length)return n.reject(new h("empty sources"));if(e.snapshotData)return n.resolve(g(e.snapshotData,t));var i=t.map(function(t){return{sourceId:t.id,type:t.type,facets:e.withStats?t.facets.map(function(t){return t.name}):[]}});return n.all(i.map(function(t){return o.backend({sources:[t]})})).then(function(e){return g(e,t)},function(t){return n.reject(new h(t))})}function f(t,e){var n=t.availableFacets.detect(function(t){return t.name===e});if(n)return n;console.error("Unkwnown facet name "+JSON.stringify(e))}function g(t,e){return new r(s.splat(t).map(function(t,n){var i=t.result,s=t.source;return p(t.source),s.facets=e[n].facets.map(function(t){var e=f(s,t.name);if(e)return Object.assign({},e,t,i[t.name])}).filter(Boolean),a.factory(s)}))}return u.requestSourcesWithStats=function(t,e){return m(t,{snapshotData:e&&e.snapshotData,withStats:!0})},u.requestSourcesWithoutStats=function(t){return m(t,{withStats:!1})},u.cloneSource=function(t){return u.cloneSources([t]).then(function(t){return t[0]})},u.cloneSources=function(t){return o.backendCreate({sources:t.map(d)}).then(function(e){return t.map(function(t,n){return u.updateSourceFromResponse(t,e[n].source)})},function(t){return n.reject(new h(t))})},u.updateSource=function(t){if(!t.getId()||!t.getQuery())throw new Error("No source id nor query");return o.backendUpdate({sources:[Object.assign({sourceId:t.getId()},d(t))]}).then(function(e){return u.updateSourceFromResponse(t,e[0].source)},function(t){return n.reject(new h(t))})},u.crawlSource=function(t){if(!t.getId())throw new Error("No source id nor query");return o.backendForceLiveCrawl({sources:[Object.assign({sourceId:t.getId(),type:t.getType()})]}).then(function(e){return u.updateSourceFromResponse(t,e[0].source)},function(t){return n.reject(new h(t))})},u.updateSourceFromResponse=function(t,e){return p(e),a.factory(Object.assign({},e,{facets:t.getFacets().map(function(t){var n=f(e,t.getName());if(n)return Object.assign({},n,t.toJson())}).filter(Boolean)}))},u.getDownloadUri=function(n,s,o){var a;return t.is(n,"array")||(a=n.getSourceFacets().map(function(t){return t.getSource().getId()+":"+t.getName()})),i.Config.urls.base+i.Config.mount_points.api+"/backend?"+e.toQueryString({format:o||"csv",pageId:i.Page&&i.Page.id,export:1,feeds:a.join(","),actions:n.asArray().map(function(t){return{sourceId:t.getId(),type:t.getType(),facets:t.getFacets().map(function(t){return t.getName()})}})})},u}.apply(e,i))||(t.exports=s)},function(t,e,n){"use strict";var i,s;i=[n(1),n(71),n(43),n(32)],void 0===(s=function(t,e,n,i){return i.extend({name:"schemaform-autocomplete",values:{},queryCache:{},query:"",typeDelay:100,setInitialValue:function(t){this.value=t,this.elements.input.getAdaptor().getDisplayValue(t).done(function(e){this.displayValue=e,this.suggestion={fullValue:this.displayValue,id:t},this.elements.input.setValue(this.displayValue)}.bind(this))},getContent:function(){if(!this.elements.container){this.elements.container=t.createElement("div",{class:this.getClassNames()});var n={adaptor:this.getAdaptor(),typeDelay:this.typeDelay,className:"base-autocomplete",events:{onSetSuggestion:this.onSetSuggestion.bind(this)},inputOptions:{attributes:{placeholder:_("Type to browse")}}};this.elements.input=new e(this.getInputOptions(n)),this.elements.input.addEvent("onChange",this.onAutocompleteChange.bind(this),null,1),this.elements.input.getInputElement().addEvent("focus",this.onInputFocus.bind(this)),this.elements.input.getInputElement().addEvent("blur",this.onInputBlur.bind(this)),this.elements.input.inject(this.elements.container),this.addSpinner()}return this.elements.container},onSetSuggestion:function(t){this.suggestion=t},onAutocompleteChange:function(){this.suggestion||(this.suggestion={fullValue:"",id:"",icon:"",tab:{}}),this.displayValue=this.suggestion.fullValue,this.setValue(this.suggestion.id||this.suggestion.fullValue)},onInputFocus:function(){this.elements.input.setValue("")},onInputBlur:function(){this.onAutocompleteChange()},getAdaptor:function(){},setValue:function(t){this.value=t,this.elements.input.setValue(this.displayValue),this.elements.input.getInputElement().blur()},getValue:function(){return this.value},getDisplayValue:function(){return this.displayValue}})}.apply(e,i))||(t.exports=s)},function(t,e,n){"use strict";var i,s;i=[n(1),n(9),n(22),n(4),n(18),n(57)],void 0===(s=function(t,e,n,i){return e.extend(n,{options:{matcher:"regexp",formater:"identity"},init:function(t,e){this.setOptions(e),this._matches=[],this.add(t)},add:function(e,n){if(t.is(e,"string")&&t.is(n)){if("fallback"===e)return void(this._fallback={value:n});var s=this._matches.detect(function(t){return t.match===e});s?s.value=n:this._matches.push({match:e,value:n,matcher:this._compileMatch(e)})}else{if(t.is(e,"array"))return e.forEach(this.add.apply.bind(this.add,this));i.forEachProperty(e,function(t,e){this.add(e,t)},this)}},remove:function(t){"fallback"===t?this._fallback=null:this._matches=this._matches.filter(function(e){return e.match!==t})},match:function(e,n){var i,s;for(i=0,s=this._matches.length;i<s;i++){var o=this._matches[i].matcher.exec(e);if(o)return this._format(this._matches[i].value,o)}return t.is(n)?this._format(n,[e]):this._fallback?this._format(this._fallback.value,[e]):void 0},_format:function(t,e){switch(this.options.formater){case"identity":return t;case"apply":return t.apply(null,e);case"string-format":var n="function"==typeof t?t():t;return n.format.apply(n,e);default:return this.options.formater(t,e)}},_compileMatch:function(t){switch(this.options.matcher){case"regexp":return new RegExp("^"+t+"$");case"glob":return t.globToRegex();case"plain":return{exec:function(e){return e===t?[e]:null}};default:return this.options.matcher}}})}.apply(e,i))||(t.exports=s)},function(t,e,n){var i,s;i=[n(1),n(18),n(25),n(9),n(39),n(670)],void 0===(s=function(t,e,n,i,s,o){"use strict";var a,r=0,l={create:"POST",update:"PUT",patch:"PATCH",delete:"DELETE",read:"GET"};function c(t,e){var n=e.onFailure;e.onFailure=function(i){n&&n(t,i,e),t.dispatchEvent("onError",[t,i,e])}}function u(){throw new Error('A "url" property or function must be specified')}function h(t){return Array.prototype.concat.apply([],Array.prototype.slice.call(t,0))}return a=i.extend(s,o,{init:function(e,n){var i,s=e||{};this.cid="c"+ ++r,this._attributes={},n&&(t.is(n.collection)&&(this.collection=n.collection),!0===n.parse&&(s=this.parse(e,n)||{})),i=t.result(this,"defaults"),t.is(i)&&(s=t.merge(t.clone(s,!1),i)),this.set(s,n),this._changed={},this.setup.apply(this,arguments)},clone:function(){return new this.constructor(this._attributes)},setup:function(){},sync:function(e,i,s){var o;t.is(s)||(s={});var a=t.is(s.ajax,"function")?s.ajax:n.request,r={method:l[e],type:"json",headers:{}};s.url||(r.url=t.result(i,"url")||u()),t.is(s.data)||!i||"create"!==e&&"update"!==e&&"patch"!==e||(r.headers["Content-Type"]="application/json",r.data=s.attrs||i.toJSON(s)),"GET"!==r.method&&t.is(r.data,"object")&&(r.data=JSON.stringify(r.data));var c=s.onComplete;s.onComplete=function(t,n){var i;i=o&&o.xhr?o.xhr.status:200,s.responseHeaders=n,c&&c("delete"===e&&204===i?void 0:t)};var h=s.onFailure;s.onFailure=function(t,e,n){s.responseHeaders=n,h&&(e&&0!==e.length||(e=t.message||""),h(e))};var d=t.extend(r,s);return o=s.request=a(d.url,d),i.dispatchEvent("onRequest",[i,o,s]),o},parse:function(t){return t},_validate:function(e,n){var i;return!n.validate||!this.validate||(e=t.extend(t.extend({},this._attributes),e),!(i=this.validationError=this.validate(e,n)||null)||(this.dispatchEvent("onValidationFailure",[this,i,t.extend(n,{validationError:i})]),!1))},url:function(){var e;return e=t.result(this,"urlRoot")||t.result(this.collection,"url")||u(),this.isNew()||(e+="/"===e.charAt(e.length-1)?"":"/",e+=encodeURIComponent(this.id)),e},idAttribute:"id",set:function(e,n,i){var s,o,a,r,l,c,u,h,d,p,m,f;if(e){if(t.is(e,"object")?(o=e,i=n||{}):((o={})[e]=n,i=i||{}),!this._validate(o,i))return!1;for(s in m=i.unset,f=i.silent,r=[],l=this._changing,this._changing=!0,l||(this._previousAttributes=t.clone(this._attributes,!1),this._changed={}),o.hasOwnProperty(this.idAttribute)&&(this.id=o[this.idAttribute]),u=this._attributes,h=this._previousAttributes,c=this._changed,o)n=o[s],t.equals(u[s],n)||r.push(s),t.equals(h[s],n)?delete c[s]:c[s]=n,m?delete u[s]:u[s]=n;if(!f)for(r.length&&(this._pending=!0),d=0,p=r.length;d<p;d++)a=r[d],this.dispatchEvent("onChange:"+a,[this,u[a],i]);if(!l){if(!f)for(;this._pending;)this._pending=!1,this.dispatchEvent("onChange",[this,i]);this._pending=!1,this._changing=!1}}return!0},unset:function(e,n){return this.set(e,void 0,t.extend(t.extend({},n),{unset:!0}))},clear:function(e){var n,i={};for(n in e=e?t.clone(e):{},this._attributes)i[n]=void 0;return this.set(i,t.extend(e,{unset:!0}))},get:function(t){return this._attributes[t]},escape:function(n){var i=this.get(n);return t.is(i)?e.escapeHTML(i.toString()):""},has:function(e){return t.is(this.get(e))},keys:function(){return Object.keys(this._attributes)},values:function(){var t,e,n=this.keys(),i=[];for(t=0,e=n.length;t<e;t++)i.push(this.get(n[t]));return i},pairs:function(){var t,e,n,i=this.keys(),s=[];for(t=0,e=i.length;t<e;t++)n=i[t],s.push([n,this.get(n)]);return s},toJSON:function(){return t.clone(this._attributes,!1)},pick:function(){var t=this,e={};return h(arguments).forEach(function(n){t.has(n)&&(e[n]=t.get(n))}),e},omit:function(){var t,e,n,i={},s=h(arguments),o=this.keys();for(t=0,e=o.length;t<e;t++)n=o[t],-1===s.indexOf(n)&&(i[n]=this.get(n));return i},isNew:function(){return!t.is(this.id)},isValid:function(t){return!this.validate||!this.validate(this._attributes,t)},hasChanged:function(e){var n,i=!1,s=this._changed;if(s)if(t.is(e))i=t.owns(s,e);else for(n in s)if(t.owns(s,n)){i=!0;break}return i},changedAttributes:function(e){var n,i,s=!1;if(t.is(e,"object"))for(i in n=this._changing?this._previousAttributes:this._attributes,e)t.equals(n[i],e[i])||((s=s||{})[i]=e[i]);else this.hasChanged()&&(s=t.clone(this._changed,!1));return s},previous:function(e){var n=this._previousAttributes;return t.is(e)&&n?n[e]:null},previousAttributes:function(){return t.clone(this._previousAttributes,!1)},save:function(e,n,i){var s,o,a,r,l,u=this;if(s=u._attributes,t.is(e)&&"object"!==t.typeOf(e)?(o={})[e]=n:(o=e,i=n),i=t.extend({validate:!0},i),o&&!i.wait){if(!u.set(o,i))return!1}else if(!u._validate(o,i))return!1;return o&&i.wait&&(u._attributes=t.extend(t.extend({},s),o)),void 0===i.parse&&(i.parse=!0),r=i.onComplete,i.onComplete=function(e){var n;return u._attributes=s,n=u.parse(e,i),i.wait&&(n=t.extend(o||{},n)),!("object"==typeof n&&null!==n&&!u.set(n,i))&&(r&&r(u,e,i),u.dispatchEvent("onSync",[u,e,i]))},c(this,i),"patch"===(a=this.isNew()?"create":i.patch?"patch":"update")&&(i.attrs=o),l=this.sync(a,this,i),o&&i.wait&&(u._attributes=s),l},fetch:function(e){var n,i=this;return void 0===(e=e?t.clone(e,!1):{}).parse&&(e.parse=!0),n=e.onComplete,e.onComplete=function(t){return!!i.set(i.parse(t,e),e)&&(n&&n(i,t,e),i.dispatchEvent("onSync",[i,t,e]))},c(this,e),this.sync("read",this,e)},destroy:function(e){var n,i,s,o=this;return e=e?t.clone(e,!1):{},i=e.onComplete,n=function(){return o.dispatchEvent("onDestroy",[o,o.collection,e])},e.onComplete=function(t){if((e.wait||o.isNew())&&n(),i&&i(o,t,e),!o.isNew())return o.dispatchEvent("onSync",[o,t,e])},o.isNew()?(e.onComplete(),!1):(c(o,e),s=o.sync("delete",o,e),e.wait||n(),s)}}),t.namespace("Model",a,i)}.apply(e,i))||(t.exports=s)},function(t,e,n){"use strict";var i,s;i=[n(0),n(5)],void 0===(s=function(t,e){return e.extend({init:function(t){this._parent(t),this.state={size:void 0}},render:function(e,n){var i;return"function"!=typeof e.children[0]?i=e.children:n.size&&(i=e.children[0](n.size)),t.h("div",Object.assign({},e,{onResize:void 0}),i)},componentDidMount:function(){this._checkSize(),this._interval=setInterval(this._checkSize.bind(this),100)},componentWillUnmount:function(){clearInterval(this._interval)},_checkSize:function(){var t={width:this.base.clientWidth,height:this.base.clientHeight};this.state.size&&t.width===this.state.size.width&&t.height===this.state.size.height||(this.props.onResize&&this.props.onResize(t),this.setState({size:t}))}})}.apply(e,i))||(t.exports=s)},function(t,e,n){var i,s;i=[n(1),n(3),n(56),n(163),n(58),n(8),n(18)],void 0===(s=function(t,e,n,i,s,o,a){"use strict";var r=s.extend({defaultOptions:{touchSnap:0,mouseSnap:0},start:function(t){this.move(t,{distance:0,x:0,y:0})},move:function(e,n){var i=this.element.getOffsets(),s=this.element.getSize(),o={x:e.x-i.x,y:e.y-i.y};o.x=Math.max(0,Math.min(s.width,o.x)),o.y=Math.max(0,Math.min(s.height,o.y));var a={x:o.x/s.width,y:o.y/s.height};this.options.pickCallback(a,o),this.options.hideCursorWhileDragging&&n.distance>0&&!this.injectedStylesheet&&(this.injectedStylesheet=t.createElement("style",{html:"* { cursor: none !important; }"}).inject(document.body))},reset:function(){this.injectedStylesheet&&(this.injectedStylesheet.remove(),this.injectedStylesheet=null),this._parent()}}),l=i.extend({name:"uwa-colorpicker",currentView:null,previouslyDisplayedHue:null,options:{button:{tag:"div",class:"uwa-colorpicker-well"},dropdownOptions:{},defaultValue:null,defaultView:"picker"},panton:["#9E080E","#637235","#942157","#50299A","#1277DB","#101010","#E51A60","#159A2B","#C41F88","#A159CE","#188D92","#444444","#FC7E29","#85BB23","#E868AE","#7970D0","#37C2DB","#888888","#FEB82C","#C6E12F","#E6A6AB","#A98EE5","#7EBBF5","#AAAAAA","#FFD631","#E6FB4D","#F2C99F","#B9B8E0","#C3E1FE","#CCCCCC"],_items:[],init:function(t){this._parent(t),/\bdark\b/.test(this.options.className)&&!this.options.dropdownOptions.className&&(this.options.dropdownOptions.className="dark"),this.elements.well=this.elements.button.getElement(".uwa-colorpicker-well"),this._updateWell(),this.syncInput()},_getColor:function(){var e=this.getValue()||this.options.defaultValue||"ffffff";if(this._color){var i=n.parse(e),s=this._color;if(t.equals(s.toRGBString(),i.toRGBString()))return this._color;this._color=null}return n.parse(e)},_setColor:function(t){this.setValue(t.toHSLString())},_setView:function(t){var e=t||this.options.defaultView;return this.previouslyDisplayedHue=void 0,e!==this.currentView&&(this.elements.viewContainer.setContent(this["build"+a.ucfirst(e)+"View"]()),this.currentView=e,["panton","picker"].forEach(function(t){this.elements.colorpickerContainer.toggleClassName(t+"-view",t===e)}.bind(this))),this},setValue:function(t){"string"==typeof t&&(t=n.parse(t)),t&&(this._color=t,this._parent(t.toHexString().substring(1)))},buildContent:function(){return this.elements.colorpickerContainer=t.createElement("div",{class:this.getClassNames("-container")}),this.elements.viewContainer=t.createElement("div",{class:this.getClassNames("-view-container")}),this.elements.colorpickerContainer.addContent(this.elements.viewContainer),this.elements.colorpickerContainer.addContent(this._buildControls()),this._setView(this.options.defaultView),this.elements.colorpickerContainer},buildPickerView:function(){var n=this,i=t.createElement("div",{html:[this.elements.slPicker=t.createElement("div",{class:this.getClassNames("-sl-picker"),html:[this.elements.slPickerCanvas=t.createElement("canvas",{class:this.getClassNames("-sl-picker-canvas"),width:220,height:220}),this.elements.slPickerCursor=t.createElement("div",{class:this.getClassNames("-sl-picker-cursor")})]}),this.elements.huePicker=t.createElement("div",{class:this.getClassNames("-hue-picker"),html:[this.elements.huePickerArrows=t.createElement("div",{class:this.getClassNames("-hue-picker-arrows")}),this.elements.huePickerCanvas=t.createElement("canvas",{class:this.getClassNames("-hue-picker-canvas"),width:26,height:220})]})]});return new r({element:this.elements.slPicker,hideCursorWhileDragging:!0,pickCallback:function(t){var e,i=t.x,s=1-t.y,o=(2-i)*s;s>0?(e=i*s,e=(e/=o<=1?o:2-o)||0,o/=2):e=t.x,o*=100,e*=100,n._setColor(n._getColor().cloneWith({l:o,s:e}))}}),new r({element:this.elements.huePicker,pickCallback:function(t){n._setColor(n._getColor().cloneWith({h:360*(1-t.y)}))}}),this.elements.hexField.getElement(".uwa-input-hex-field input").addEvents({keyup:function(){n._readInputFieldValue()},input:function(){n._readInputFieldValue()},change:function(){n._readInputFieldValue()}}),this.elements.dropdown.getInnerElement().addEvent("mousedown",function(t){t.target!==n.elements.hexFieldInput.getInputElement()&&e.preventDefault(t)}),this._renderHuePicker(),this.syncInput(),i},buildPantonView:function(){var i=this;return i.elements.pantonContainer=t.createElement("div",{class:i.getClassNames("-panton-container")}),i._items=[],this.panton.forEach(function(e){var s=t.createElement("span",{class:i.getClassNames("-item-content"),styles:{background:e},events:{click:function(){i.dispatchEvent("resetPantonSelection"),this.addClassName("active"),i._setColor(n.parse(e))}}});t.createElement("div",{class:i.getClassNames("-item"),html:[s]}).inject(i.elements.pantonContainer),i._items.push(s)}),this.elements.dropdown.getInnerElement().addEvent("mousedown",function(t){t.target!==i.elements.hexFieldInput.getInputElement()&&e.preventDefault(t)}),i.elements.pantonContainer},_buildControls:function(){var n=this,i=/\bdark\b/.test(this.options.className);return t.createElement("div",{class:this.getClassNames("-controls"),html:[t.createElement("div",{class:this.getClassNames("-panton-button"),events:{mousedown:function(t){e.preventDefault(t)},click:function(t){e.preventDefault(t),n._setView("panton")}}}),t.createElement("div",{class:this.getClassNames("-picker-button"),events:{mousedown:function(t){e.preventDefault(t)},click:function(t){e.preventDefault(t),n._setView("picker")}}}),this.elements.hexField=t.createElement("div",{class:this.getClassNames("-hex-field"),html:[this.elements.hexFieldInput=new o.Text({_root:!1,className:this.getClassNames("-hex-field-input")}),t.createElement("span",{class:this.getClassNames("-hex-field-icon"),text:"#"})]}),this.elements.clearButton=t.createElement("div",{class:this.getClassNames("-clear-button")+" uwa-icon","data-icon":"p",events:{mousedown:function(t){e.preventDefault(t)},click:function(t){e.preventDefault(t),n.setValue(n.options.defaultValue)}}}),new o.Button({_root:!1,value:"Done",className:this.getClassNames("-done-button")+(i?" extra-dark-grey":" dark-grey"),events:{onMouseDown:function(t){e.preventDefault(t)},onClick:function(){n.toggle(!1)}}})]})},resetPantonSelection:function(){for(var t=this._items,e=0;e<t.length;e++)t[e].removeClassName("active")},_renderHuePicker:function(){for(var t=this.elements.huePickerCanvas,e=this.elements.huePickerCanvas.getContext("2d"),i=e.createLinearGradient(0,0,0,t.height),s=0;s<37;s++){var o=s/36,a=n.parse("hsl("+360*(1-o)+", 100%, 50%)");i.addColorStop(o,a.toHSLString())}e.fillStyle=i,e.fillRect(0,0,t.width,t.height)},_updateWell:function(){this.elements.well.setStyle("background",this._getColor().toHSLString())},_updateSlPicker:function(){var t=this.elements.slPickerCanvas,e=this.elements.slPickerCanvas.getContext("2d"),i=this._getColor(),s=i.toObject();if(this.previouslyDisplayedHue!==s.h){this.previouslyDisplayedHue=s.h;var o=e.createLinearGradient(0,0,t.width,0),a=n.parse("hsl("+s.h+", 100%, 50%)");o.addColorStop(0,"white"),o.addColorStop(1,a.toHSLString()),e.fillStyle=o,e.fillRect(0,0,t.width,t.height);var r=e.createLinearGradient(0,0,0,t.height);r.addColorStop(0,"transparent"),r.addColorStop(1,"black"),e.fillStyle=r,e.fillRect(0,0,t.width,t.height)}var l,c,u,h,d=this.elements.slPickerCursor;h=((l=s.l/100*2)+(c=s.s/100*(l<=1?l:2-l)))/2,u=l>0?2*c/(l+c):s.s/100,u=Math.round(u*this.elements.slPickerCanvas.width),h=Math.round((1-h)*this.elements.slPickerCanvas.height),d.setStyle("left",u+"px"),d.setStyle("top",h+"px"),d.setStyle("background",i.toHexString())},_updateHuePicker:function(){var t=this.elements.huePickerArrows,e=(360-this._getColor().toObject().h)/360*this.elements.huePickerCanvas.height;t.setStyle("top",Math.round(e)+"px")},_updateHexField:function(){var e=this.elements.hexFieldInput;if(this.getValue()){var i=this._getColor(),s=n.parse(e.getValue());s&&t.equals(i.toRGBString(),s.toRGBString())||e.setValue(i.toHexString().substring(1))}else e.setValue("")},_updateDefaultButton:function(){this.elements.clearButton.toggle(t.is(this.options.defaultValue)&&this.options.defaultValue!==this.getValue())},syncInput:function(){if(this.elements.well&&this._updateWell(),this.elements.slPicker&&(this._updateSlPicker(),this._updateHuePicker(),this._updateHexField(),this._updateDefaultButton()),this.elements.value){var t=this.getValue();t=t?t.toLowerCase():"",this.elements.value.setText(t)}},_readInputFieldValue:function(){var t,e,i,s=this.elements.hexFieldInput.getValue(),o=(e=!0,(i=(t=s)&&t.match(e?/^\s*#?([0-9a-f]{0,6})/i:/^\s*#?(|[0-9a-f]{3}|[0-9a-f]{6})\s*$/i))?i[1]:"");if(o!==s&&this.elements.hexFieldInput.setValue(o),3===o.length||6===o.length){var a=o.replace(/-/g,"Z"),r=n.parse(a);this.setValue(r)}},toggle:function(t){this._parent.apply(this,arguments),!1===t&&this._dispatchOnChange()}});return t.namespace("Controls/ColorPicker",l,t)}.apply(e,i))||(t.exports=s)},function(t,e){t.exports=function(t,e){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:e}}},function(t,e){var n=0,i=Math.random();t.exports=function(t){return"Symbol(".concat(void 0===t?"":t,")_",(++n+i).toString(36))}},function(t,e){t.exports=!1},function(t,e,n){var i=n(315),s=n(242);t.exports=Object.keys||function(t){return i(t,s)}},function(t,e,n){var i=n(91),s=Math.max,o=Math.min;t.exports=function(t,e){return(t=i(t))<0?s(t+e,0):o(t,e)}},function(t,e,n){var i=n(30),s=n(316),o=n(242),a=n(241)("IE_PROTO"),r=function(){},l=function(){var t,e=n(239)("iframe"),i=o.length;for(e.style.display="none",n(243).appendChild(e),e.src="javascript:",(t=e.contentWindow.document).open(),t.write("<script>document.F=Object<\/script>"),t.close(),l=t.F;i--;)delete l.prototype[o[i]];return l()};t.exports=Object.create||function(t,e){var n;return null!==t?(r.prototype=i(t),n=new r,r.prototype=null,n[a]=t):n=l(),void 0===e?n:s(n,e)}},function(t,e,n){var i=n(315),s=n(242).concat("length","prototype");e.f=Object.getOwnPropertyNames||function(t){return i(t,s)}},function(t,e,n){var i=n(72),s=n(60),o=n(241)("IE_PROTO"),a=Object.prototype;t.exports=Object.getPrototypeOf||function(t){return t=s(t),i(t,o)?t[o]:"function"==typeof t.constructor&&t instanceof t.constructor?t.constructor.prototype:t instanceof Object?a:null}},function(t,e,n){var i=n(37)("unscopables"),s=Array.prototype;null==s[i]&&n(73)(s,i,{}),t.exports=function(t){s[i][t]=!0}},function(t,e,n){var i=n(31);t.exports=function(t,e){if(!i(t)||t._t!==e)throw TypeError("Incompatible receiver, "+e+" required!");return t}},function(t,e,n){"use strict";var i,s;i=[n(1),n(3),n(10),n(8),n(2),n(41)],void 0===(s=function(t,e,n,i,s,o){var a=t.createElement;return n.extend({name:"nv-auth",open:function(){},getSize:function(){return this.elements.container.getSize()},startLoading:function(){this.elements.container.addClassName("loading")},stopLoading:function(){this.elements.container.removeClassName("loading")},buildSocialConnect:function(t){if(s.Config.social_connect){var n="signin"===t;return a("div",{class:this.getClassNames("-social"),events:{click:function(t){e.stop(t);var n=e.findElement(t,".nv-auth-social-service");if(n){var i=n.getAttribute("data-id");this.dispatchEvent("socialConnectClick",i)}}.bind(this)}}).addContent(a("div",{class:this.getClassNames("-social-service")+" facebook","data-id":"facebook"}).addContent(a("span",{class:this.getClassNames("-social-service-icon")}),a("span",{class:this.getClassNames("-social-service-text"),text:n?_("Log in with Facebook"):_("Sign up with Facebook")})),a("div",{class:this.getClassNames("-social-service")+" twitter","data-id":"twitter"}).addContent(a("span",{class:this.getClassNames("-social-service-icon")}),a("span",{class:this.getClassNames("-social-service-text"),text:n?_("Log in with Twitter"):_("Sign up with Twitter")})),a("div",{class:this.getClassNames("-social-service")+" google","data-id":"google"}).addContent(a("span",{class:this.getClassNames("-social-service-icon")}),a("span",{class:this.getClassNames("-social-service-text"),text:n?_("Log in with Google"):_("Sign up with Google")})))}},buildSpinner:function(){return a("div",{class:this.getClassNames("-spinner")}).addContent(new o({autostart:!0,color:"#333333"}))},buildCGUNewsletter:function(){var t=s.Globalization.userContinent;return this.elements.cguInput=new i.Checkbox({className:"green",attributes:{id:"cgu",name:"legal"}}),this.elements.newsletterInput=new i.Checkbox({className:"green",attributes:{id:"newsletter",name:"newsletter",checked:t&&"eu"!==t}}),[a("div",{class:this.getClassNames("-checkbox","-cgu-checkbox")}).addContent(this.elements.cguInput,a("label",{for:"cgu"}).addContent(_("I agree with {0}Terms of Service{1} and to the processing of my personal data according to the {2}privacy policy{3}").format('<a href="'+s.getURL("tos")+'" target="_blank">',"</a>",'<a href="'+s.getURL("privacy")+'" target="_blank">',"</a>"))),s.Config.white_labeling?"":a("div",{class:this.getClassNames("-checkbox","-newsletter-checkbox")}).addContent(this.elements.newsletterInput,a("label",{for:"newsletter",text:_("Send me announcements, tips and service updates")}))]},getCguValue:function(){return this.elements.cguInput.isChecked()},getNewsletterValue:function(){return this.elements.newsletterInput.isChecked()}})}.apply(e,i))||(t.exports=s)},function(t,e,n){"use strict";n.r(e);var i=n(6),s=n.n(i),o=n(9);var a=function(t){var e,n;function i(e){var n;return(n=t.call(this,e)||this).keyword=e.keyword,n.tags=e.tags,n}return n=t,(e=i).prototype=Object.create(n.prototype),e.prototype.constructor=e,e.__proto__=n,i}(n.n(o).a),r=n(61),l=n.n(r),c={};c.errorMessages={error_import_suggestion:_("An error has occurred during the import of the suggestions"),fallback:_("An error has occurred, please try again later or contact the support")},c.getSuggestionEntity=function(){return s.a.getCurationSuggestions().then(function(t){return c.formatSuggestionEntity(t)},function(t){return Promise.reject(new c.ApiError(t))})},c.formatSuggestionEntity=function(t){var e=Object.keys(t.suggestions).map(function(e){return new a({keyword:e,tags:t.suggestions[e]})});return{counters:t.total,entities:e}},c.submit=function(t){return t=t||{},s.a.submitSuggestionEntity(t).then(function(){},function(t){return Promise.reject(new c.ApiError("error_submiting_suggestion",new Error(t)))})},c.delete=function(t){return s.a.deleteSuggestionEntity({keyword:t}).then(function(){},function(t){return Promise.reject(new c.ApiError("error_deleting_suggestion",new Error(t)))})},c.edit=function(t){return s.a.editSuggestionEntity({keyword:t.keyword,new_keyword:t.new_keyword,tags:t.tags}).then(function(){},function(t){return Promise.reject(new c.ApiError("error_editing_suggestion",new Error(t)))})},c.import=function(t){return s.a.importSuggestionEntity(t).done(function(){},function(t){return Promise.reject(new c.ApiError("error_import_suggestion",new Error(t)))})},c.ApiError=l.a.extend();e.default=c},function(t,e,n){"use strict";var i,s;i=[n(16),n(2),n(6),n(653)],void 0===(s=function(t,e,n,i){return i.singleton({getTokens:function(t){return n.getUserAccounts({type:t})},getAuthenticateUrl:function(n){var i=e.Config.urls.startpage+"/api";return t.resolve(i+"/proxy/oauth-connect/"+n)},unlink:function(t){return n.deleteToken({id:t.id})}})}.apply(e,i))||(t.exports=s)},function(t,e,n){"use strict";var i,s;i=[n(108)],void 0===(s=function(t){var e=t.extend({name:"",defaultOptions:{exclusive:!0,closeable:!1,resizeParent:!0,fxOptions:{duration:0}},init:function(t){t&&(t.name&&(this.name=t.name),t.activeButton&&(this.activeButton=t.activeButton)),this._parent(t)},toggle:function(t){this._parent(t),this.activeButton&&this.activeButton.toggleClassName("active",t)},setTitle:function(t,e){var n=this.elements.container.getElement("."+this.getClassName("-title"));n||(n=UWA.createElement("div",{class:this.getClassName("-title"),html:'<i class="uwa-icon"></i><span></span>'}).inject(this.elements.container.getElement("."+this.getClassName("-content")),"before")),n.getElement("span").setText(t),n.getElement(".uwa-icon").className="uwa-icon "+e},buildSkeleton:function(){this._parent(),this.elements.container.addClassName(this.getClassName()+" "+this.getClassName("-"+this.name)).setContent(['<div class="in-app-overlay-inner">','<div class="'+this.getClassName("-content")+'"></div>','<div class="'+this.getClassName("-close")+' nv-close-icon uwa-icon delete"></div>',"</div>"].join("\n")),this.elements.container.getElement("."+this.getClassName("-close")).addEvent("click",this.close.bind(this))},getInnerElement:function(){return this.elements.container.getElement("."+this.getClassName("-content"))},getClassName:function(t){var e="in-app-overlay";return t&&(e+=t),e}});return UWA.namespace("Components/Overlay",e,App)}.apply(e,i))||(t.exports=s)},function(t,e,n){"use strict";var i,s;i=[n(2),n(358),n(214)],void 0===(s=function(t,e,n){var i=e.singleton({name:"searches",factory:n.factory,getFromCache:n.getFromCache,getPoolOptions:function(){return{maxGroup:t.Config.max_search_load||1}},shouldDeduplicateItems:function(){return!0},_preFetchHook:function(t,e){var n=t.actions.options.type;this._dynamicallyIncreaseLimit(t,e),n&&(delete t.actions.options.type,"preview"===n&&(t.route="searches/preview"));var i=t.actions.searches[0];i&&(t.actions.options.estimatedItemCount=i.estimatedItemCount,delete i.estimatedItemCount),t.actions.searches.forEach(function(t){if("string"==typeof t.query)throw new Error("SearchApi: queries should be objects")})},_nextAction:function(t,e){0===e.limit&&(e.separate=!0),this._parent(t,e)},_updateAction:function(t,e){this._parent(t,e);var n=t.getItems().reduce(function(t,e){return Math.max(t,e.getCreationTimestamp())},-1/0);isFinite(n)&&(e.crawledAfterDate=n)},_preFactoryHook:function(t,e,n){(n.publishedBeforeDate||n.publishedBeforeItemId)&&t.forEach(function(t){delete t.itemCount})},_errorValidator:function(t){if(t.some(function(t){var e=t.items&&t.items.length;return!(!t.searches||!t.searches.length||e)&&t.searches.some(function(t){return Boolean(t.error)})}))return new Error("Error in `searches` results")}});return n.fetch=i.fetch.bind(i),i}.apply(e,i))||(t.exports=s)},function(t,e,n){"use strict";var i,s;i=[n(1),n(9),n(22),n(39),n(24)],void 0===(s=function(t,e,n,i,s){function o(t){return t===document.body||t===document.documentElement}return e.extend(i,n,s,{name:"nv-scroller",defaultOptions:{area:20,velocity:1,events:{onChange:function(t,e){this.element.scrollTo(t,e)}},fps:50},init:function(e,n){this.setOptions(n),this.element=t.extendElement(o(e)?document.documentElement:e),this.bound={attach:this.attach.bind(this),detach:this.detach.bind(this),getCoords:this.getCoords.bind(this)}},start:function(){this.element.addEvents({mouseenter:this.bound.attach,mouseleave:this.bound.detach})},stop:function(){this.element.removeEvents({mouseenter:this.bound.attach,mouseleave:this.bound.detach}),this.detach(),this.clearPeriodical("timer")},attach:function(){this.element.addEvent("mousemove",this.bound.getCoords)},detach:function(){this.element.removeEvent("mousemove",this.bound.getCoords),this.clearPeriodical("timer")},getCoords:function(t){this.page=o(this.element)?{x:t.clientX,y:t.clientY}:{x:t.pageX,y:t.pageY};var e=Math.round(1e3/this.options.fps);this.hasPeriodical("timer")||this.setPeriodical("timer",this.scroll,e)},scroll:function(){var t={x:this.element.offsetWidth,y:this.element.offsetHeight},e={x:this.element.scrollLeft,y:this.element.scrollTop},n=o(this.element)?{x:0,y:0}:this.element.getOffsets(),i={x:this.element.scrollWidth,y:this.element.scrollHeight},s={x:0,y:0},a=this.options.area.top||this.options.area,r=this.options.area.bottom||this.options.area;for(var l in this.page)this.page[l]<a+n[l]&&0!==e[l]?s[l]=(this.page[l]-a-n[l])*this.options.velocity:this.page[l]+r>t[l]+n[l]&&e[l]+t[l]!==i[l]&&(s[l]=(this.page[l]-t[l]+r-n[l])*this.options.velocity),s[l]=Math.round(s[l]);(s.y||s.x)&&this.dispatchEvent("onChange",[e.x+s.x,e.y+s.y])}})}.apply(e,i))||(t.exports=s)},function(t,e,n){var i=n(49).f,s=n(72),o=n(37)("toStringTag");t.exports=function(t,e,n){t&&!s(t=n?t:t.prototype,o)&&i(t,o,{configurable:!0,value:e})}},function(t,e,n){var i=n(7),s=n(101),o=n(29),a=n(245),r="["+a+"]",l=RegExp("^"+r+r+"*"),c=RegExp(r+r+"*$"),u=function(t,e,n){var s={},r=o(function(){return!!a[t]()||"​"!="​"[t]()}),l=s[t]=r?e(h):a[t];n&&(s[n]=l),i(i.P+i.F*r,"String",s)},h=u.trim=function(t,e){return t=String(s(t)),1&e&&(t=t.replace(l,"")),2&e&&(t=t.replace(c,"")),t};t.exports=u},function(t,e){t.exports={}},function(t,e,n){"use strict";var i=n(28),s=n(49),o=n(48),a=n(37)("species");t.exports=function(t){var e=i[t];o&&e&&!e[a]&&s.f(e,a,{configurable:!0,get:function(){return this}})}},function(t,e){t.exports=function(t,e,n,i){if(!(t instanceof e)||void 0!==i&&i in t)throw TypeError(n+": incorrect invocation!");return t}},function(t,e,n){var i=n(67);t.exports=function(t,e,n){for(var s in e)i(t,s,e[s],n);return t}},function(t,e,n){var i,s;i=[n(16),n(268)],void 0===(s=function(t){"use strict";var e,n=new WeakMap;function i(t){return t.container.ownerDocument}function s(s,o){return function(a,r){return a=function(t){return e||(e=document.createElement("a")),e.href=t,e.href}(a),r=Object.assign({force:!1,timeout:6e4,container:document.head},r),function(t,e,s){if(e.force)return s();var o=i(e),a=n.get(o);return a||(a={},n.set(o,a)),a.hasOwnProperty(t)||(a[t]=s()),a[t]}(a,r,function(){var e,n,i=new t(function(t,i){e=o(a,r,t,i),n=setTimeout(function(){e(),i(new Error("Asset."+s+": Timeout while loading "+a))},r.timeout)});return i.fin(function(){clearTimeout(n)}),i})}}return{js:s("js",function(t,e,n,s){var o=i(e).createElement("script");return o.setAttribute("type","text/javascript"),o.addEventListener?(o.addEventListener("load",function(){n(o)}),o.addEventListener("error",function(){s(new Error("Asset.js: Error while loading "+t))})):o.attachEvent("onreadystatechange",function(){"loaded"!==o.readyState&&"complete"!==o.readyState||n(o)}),e.container.appendChild(o),o.src=t,function(){e.container.removeChild(o)}}),css:s("css",function(t,e,n,s){var o=i(e).createElement("link");return o.setAttribute("rel","stylesheet"),o.setAttribute("type","text/css"),o.addEventListener?(o.addEventListener("load",function(){n(o.sheet)}),o.addEventListener("error",function(){s(new Error("Asset.css: Error while loading "+t))})):o.attachEvent("onload",function(){n(o.styleSheet)}),e.container.appendChild(o),o.setAttribute("href",t),function(){e.container.removeChild(o)}})}}.apply(e,i))||(t.exports=s)},function(t,e,n){"use strict";var i,s;i=[n(19),n(171)],void 0===(s=function(t,e){var n={};var i,s=new e;return window.addEventListener("resize",function(){clearTimeout(i),i=setTimeout(function(){s.dispatch()},200)}),{closeOtherSidebarIfNeeded:function(e){var i=n["left"===e?"right":"left"];t.getSize().width<=1130&&i&&i()},registerSidebar:function(t,e){if(n[t])throw new Error("Sidebar already registered");n[t]=e},registerResizeEvent:function(t){s.add(t)}}}.apply(e,i))||(t.exports=s)},function(t,e,n){"use strict";var i,s;i=[n(1),n(13),n(2),n(194)],void 0===(s=function(t,e,n,i){return{process:function(s){var o,a=s.data;return s.name&&(s.moduleName=s.name,delete s.name),"htmleditor"===s.moduleName.toLowerCase()&&(s.moduleName="HtmlEditor"),s.tab||(s.tab=s.tabId||n.Page.openTabId),delete s.tabId,void 0===s.status&&(s.status=1),s.title=(s.title||"").stripTags(),s.col=s.col||s.column||1,s.row=s.row||1024,t.is(a,"array")?a=t.extend({},a):a||(a={}),s.query&&(a.query=s.query),a&&a.feedUrl&&(s.feedUrl=a.feedUrl),"UWA"===s.moduleName&&a.moduleUrl&&(o=i.getName(a.moduleUrl))&&(s.moduleName=o,t.extend(a,e.parseQuery(e.parseUrl(a.moduleUrl).query)),delete a.moduleUrl),s.data=a,s}}}.apply(e,i))||(t.exports=s)},function(t,e,n){"use strict";var i,s;i=[n(1),n(108),n(4),n(52)],void 0===(s=function(t,e,n,i){var s=e.extend({name:"",defaultOptions:{exclusive:!0,exclusiveWith:function(t){return t instanceof s},closeable:!1,resizeParent:!0,fxOptions:{duration:200}},init:function(t,e){this._parent(e),this.module=t,this.build(),this._keyboardShortcuts={esc:function(){this.close()}.bind(this)}},toggle:function(t){this._parent(t),this.activeButton&&this.activeButton.toggleClassName("active",t),this.module.getContainer().toggleClassName("has-overlay",t)},getInnerElement:function(){return this.elements.container.getElement(".widget-overlay-content")},setTitle:function(e,n){var i=this.elements.container.getElement(".widget-overlay-title");i||(i=t.createElement("div",{class:"widget-overlay-title",html:'<i class="uwa-icon"></i><span></span>'}).inject(this.elements.container.getElement(".widget-overlay-content"),"before")),i.getElement("span").setText(e),i.getElement(".uwa-icon").className="uwa-icon "+n},build:function(){},buildSkeleton:function(){this._parent(),this.elements.container.addClassName("widget-overlay widget-overlay-"+this.name).setContent(['<div class="widget-overlay-inner">','<div class="widget-overlay-content"></div>','<div class="widget-overlay-close nv-close-icon uwa-icon delete"></div>',"</div>"].join("\n")),this.elements.container.getElement(".widget-overlay-close").addEvent("click",this.close.bind(this))},onOpen:function(){i.pushFocus(this._keyboardShortcuts)},onClose:function(){i.popFocus(this._keyboardShortcuts)}});return s}.apply(e,i))||(t.exports=s)},function(t,e,n){"use strict";var i,s;i=[n(1),n(3),n(39),n(22),n(26),n(4),n(2),n(233)],void 0===(s=function(t,e,n,i,s,o,a,r){var l=window.App||{},c=i.extend(n,{defaultOptions:{text:"",type:"info",cssId:"messageBox",className:"messageBox",closeButton:{class:"close",title:_("Close"),width:16,height:16},fx:!0},init:function(t){this.setOptions(t),this.build()},inject:function(t,e){return t=t||document.body,e=e||"top",this.box.inject(t,e),this},build:function(){if(!this.box){if(this.box=t.createElement("div",{id:this.options.cssId,class:this.options.className+" "+this.options.className+"-"+this.options.type,styles:{display:"none"}}),this.content=t.createElement("div",{class:"content"}).inject(this.box),this.options.closeButton)t.createElement("img",{src:o.getStaticUrl("/img/s.gif"),events:{click:this.close.bind(this)}}).set(this.options.closeButton).inject(this.box,"top"),this.box.addClassName("messageBox-closable");return this}},open:function(){return this.box.setStyle("height",0).show(),new s(this.box,{onComplete:function(){e.dispatchEvent(window,"resize")}}).start({height:[0,24]}),this},close:function(){if(!0!==this.closing)return this.closing=!0,new s(this.box,{onComplete:function(){this.box.style.display="none",this.dispatchEvent("onClose"),this.closing=!1,e.dispatchEvent(window,"resize")}.bind(this)}).start({height:[24,0]}),this},setMessage:function(){var e,n,i,s,o=[].concat.apply([],arguments);for(this.content.empty(),e=0,n=o.length;e<n;e+=1)s=o[e],"string"===(i=t.typeOf(s))?this.content.appendChild(document.createTextNode(s)):"element"===i&&this.content.grab(s);return this.dispatchEvent("onMessageSetted")},onButtonClick:function(){}}),u=[];return c.messageWithID=function(e,n){if("number"!=typeof e&&"string"!=typeof e)throw new Error("messageWithID : id is mandatory");e=e.toString();var i=r.get("announcement.closedMessageIds");if(!i.includes(e)&&!u.includes(e)){u.push(e);if(!t.is(n,"function"))throw new Error("No value or incorrect value for message in Message.messageWithId");return n(function(){return u.erase(e),i.push(e),r.set("announcement.closedMessageIds",i).saveNow()}),!0}},c.hasMessageBeenDisplayed=function(t){return r.get("announcement.closedMessageIds").includes(t)},l.UI||(l.UI={}),l.UI.Message=c,c}.apply(e,i))||(t.exports=s)},,function(t,e,n){"use strict";var i,s;i=[n(1),n(10),n(24),n(20),n(13),n(3),n(451),n(452),n(53),n(147),n(2),n(4),n(216),n(44),n(234),n(179),n(380),n(6),n(27),n(221),n(35),n(218),n(394),n(393),n(148),n(17),n(159),n(0),n(770),n(281),n(778),n(270)],void 0===(s=function(t,e,n,i,s,o,a,r,l,c,u,h,d,p,m,f,g,v,b,y,w,x,C,S,E,k,T,A,I,N,D){function O(){var t,e,n={};for(t=0,e=arguments.length;t<e;t++)n[arguments[t]]=!0;return n}var P,F=O("twitter.com","www.facebook.com","plus.google.com","www.urbandictionary.com","www.reddit.com","www.leparisien.fr"),M=O("selekkt.com");var L=e.extend(n,{name:"nv-item-renderer",options:{globalAudioPlayer:!0,showStarring:!u.isAloneEnvironment()&&!u.isIn3DDashboard()},_tweetViewAvailable:!0,init:function(t,e){this._parent(e),this._item=t,this._list=null,this._itemevents={"onChange:tags":function(){this.updateDOM()}.bind(this),"onChange:flags":function(){this.updateDOM()}.bind(this)},t.addEvents(this._itemevents)},destroy:function(){this._item.removeEvents(this._itemevents),this._parent(),this.clearDelayed()},getContainer:function(){if(!this.elements.container){var e=!1,n=function(t){e||L.fromElement(o.getElement(t))!==this||this.dispatchEvent("onClick",[t])}.bind(this);this.elements.container=t.createElement("div",{class:this.getClassNames()+(!1===this.options.displayActions?" no-actions":""),events:{click:n,mouseup:function(t){1!==o.whichButton(t)&&2!==o.whichButton(t)||(n(t),e=!0,this.setImmediate("clickEvent",function(){e=!1}))}.bind(this)},html:this.render()}),this.changeContentType(),this.updateDOM(),this.linkToDom(this.elements.container),this.elements.container.getElements("img[srcset]").forEach(function(t){t.addEventListener("error",function(){t.removeAttribute("srcset")})})}return this.elements.container},getContent:function(){return this.getContainer()},getItem:function(){return this._item},onClick:function(t){var e=o.getElement(t),n=null;function i(t){return n=e.getClosest(t)}i(".action-read")?this.toggleReadFlag():i(".action-star")?this.toggleStarFlag():i(".share,.action-share")?this.share(e):i(".action-tag")?this.toggleOpinionEditor():i(".action-close")?this.setFocus(!1):i(".action-content-type")?this.changeContentType(n.getAttribute("data-content-type")):i(".podcast .audio-listen,.item-enclosure-action")?(this.playEnclosure(n.getAttribute("href")),o.stop(t)):i(".source")&&this.options.openSingleView&&(this.options.openSingleView.call(this),o.preventDefault(t))},share:function(t){var e=this.getItem(),n=e.getFirstAuthor(),i=m.getThumbnail(e,140,100,{fallbackToLargest:!0});f.show({title:e.getTitle(),url:e.getLink(),srcTitle:e.getStream().getTitle(),srcType:"feed",date:e.getPublishDate(),summary:e.getContent().stripTags(),originalContent:e.getContent(),itemId:e.getId(),feed_id:e.getStreamId(),author:n&&n.name,enclosures:e.getEnclosures(),widgetId:this.options.widgetId,picture:i},t),w.log("share",u.Page.inSmartReaderView?"openFromSmartReader":"openFromFeedReader")},playEnclosure:function(t){w.log("flashplayer","play"),t||(t=this.getItem().getEnclosuresByType("audio")[0].link),this.options.globalAudioPlayer&&S.isAvailable()?S.play(t,this.getItem().getTitle()):this.dispatchEvent("onPlayEnclosure",[t])},toggleReadFlag:function(e){var n=this.getItem();!t.is(this.options.forceReadState)&&n.canFlag("unread")&&n.setFlag("unread",void 0===e?!n.hasFlag("unread"):!e).save()},toggleStarFlag:function(t){var e=this.getItem();if(e.canFlag("saved")){var n=void 0===t?!e.hasFlag("saved"):t;e.setFlag("saved",n).save()}},render:function(){},setList:function(t){this._list=t},getList:function(){return this._list},onFocusChange:function(t){u.isDebug()&&t&&console.log("Focus item",this.getItem().toJSON()),this.changeContentType(),this._syncWebsiteView(t)},setFocus:function(t){var e=this.getList();return e?e._setFocus(this,t):this.dispatchEvent("onFocusChange",[!1!==t]),this},hasFocus:function(){var t=this.getList();return Boolean(t&&t.getRenderer()===this)},scrollTo:function(e){var n=t.extend({margin:10,onComplete:function(){var t=this.getList();t&&t.ignoreNextScrollEvent(),e&&e.onComplete&&e.onComplete()}.bind(this)},e);return l.scrollToElement(this.getContainer(),n),this},buildOpinionUI:function(t){if(u.isAllowed("tag")){t=t||{};var e=this.getItem();return this.opinionViewer=A.render(A.h(I,Object.assign({item:e},t)),this._opinionUiContainer,this._opinionUiContainer.firstChild),this.opinionViewer}},openOpinionEditor:function(){u.isAllowed("tag")&&this.buildOpinionUI({editor:!0})},toggleOpinionEditor:function(){u.isAllowed("tag")&&this.buildOpinionUI({toggle:!0})},buildQuickshareBar:function(){var e=function(t,e){w.log("share","shareToSocial",{serviceName:t});var i=window.open("about:blank","_blank");i.document.write(_("Loading...")),i.document.title=_("Sharing via {0}...").format(e.title||t);var s=g.formatSocialLink({link:e.url.toString(),url:n.getLink(),title:n.getTitle()});i.location.href=s},n=this.getItem(),i=u.User&&u.User.share.userQuickshareServices,s=t.createElement("div",{class:"nv-quickshare-bar"}),o=[];return i.forEach(function(n){var i;if(n.startsWith("custom-")){var s=n.slice(7),a=App.User&&App.User.share.customServices,r=a&&a[s];r&&(i=t.createElement("img",{class:"nv-quickshare-bar-button",title:r.title,src:r.favicon,events:{click:function(){e(s,r)}}}))}else{var l;u.Config.available_share_services.forEach(function(t){t.name===n&&(l=t)}),l&&(i=t.createElement("span",{class:"nv-quickshare-bar-button uwa-icon nv-social-icon "+n,title:l.title,"data-icon":l.fonticon,events:{click:function(){e(n,l)}}}))}o.push(i)}),s.addContent(o),s},buildMetas:function(){var e=this.getItem().getMetas();return t.createElement("div",{class:"nv-metas",html:e})},getItemContent:function(){return this.elements.itemContent||(this.elements.itemContent=t.createElement("div",{class:this.getClassNames("-article")}),this.changeContentType()),this.elements.itemContent},getActions:function(){return this.elements.actions||!1===this.options.displayActions||(this.elements.actions=t.createElement("div",{class:"item-actions-wrapper"}),this.buildActions()),this.elements.actions},buildActions:function(){var e=this.getItem(),n=A.h;A.render(n("div",{class:"item-actions sticky"+(u.isAllowed("tag")?"":" no-tagging")+(this._isShareAvailable()?"":" no-share")},!t.is(this.options.forceReadState)&&n("span",{class:"uwa-icon item-action action-read","data-icon":"½",title:e.canFlag("unread")?_("Mark as read"):_("This item is archived, you can't mark it as read")}),this.options.showStarring&&e.canFlag("saved")&&n("span",{class:"uwa-icon item-action action-star","data-icon":"8",title:_("Save")}),n("span",{class:"uwa-icon item-action action-share","data-icon":"q",title:_("Share")}),n(N,{className:"item-action action-tag",icon:!e.hasTags()&&e.hasSuggestedTags()?"bookmark_outline":"bookmark",title:_("Opinion")}),this.options.closable&&n("span",{class:"uwa-icon item-action action-close","data-icon":"p",title:_("Close")})),this.elements.actions,this.elements.actions.firstChild)},updateActions:function(){this.elements.actions&&this.buildActions()},_isShareAvailable:function(){var t=u.isAllowed("share");return t=u.isIn3DDashboard()?t&&u.has3DDService("3DSwym")||!u.isIn3DDPreview():t&&!u.isAloneEnvironment()},_getModules:function(){return k.getByStreamId(this.getItem().getStreamId())},_getContentType:function(){if(this.hasTweetView())return"tweet";var t,e=this._getModules()[0];if(e)t="true"===String(e.getData().webview)?"website":"normal";else{var n=this.getList();n?t=n._contentType:this._contentType?t=this._contentType:this._contentType=t="normal"}return t},_setContentType:function(t){var e=String("website"===t);this._getModules().forEach(function(t){t.getData().webview=e,t.save()});var n=this.getList();n&&(n._contentType=t),this._contentType=t},_syncWebsiteView:function(t){if(this.elements.innerItemRenderer)this.elements.innerItemRenderer._syncWebsiteView(t);else{var e=this;this.setDelayed("syncwebsiteview",function(){var n,i,s;e._controlWeb&&"website"===this._getContentType()&&(!1===t?(e._controlWeb.setSrc("about:blank"),e._controlWeb.setIFrameHeight("")):(e._controlWeb.isBlank()&&e._controlWeb.setSrc(e.getItem().getLink()),n=u.Page.inSmartReaderView&&["expanded","list"].includes(App.SmartReader.Feed.getViewForContext())?45:0,i=e._controlWeb.getIFrame(),s=l.getParentScrollable(i).getSize().height-i.getPosition(e.getContainer()).y,n&&(s=Math.max(s-n,400)),e._controlWeb.setIFrameHeight(s)))},2)}},changeContentType:function(t){var e;t?(e=this._getContentType()===t,this._setContentType(t)):(t=this._getContentType(),e=!0);var n=this.elements.itemContent,i=this.elements.container;if(n&&i&&t&&!i.hasClassName("content-"+t)){i.removeClassName("content-normal").removeClassName("content-website").removeClassName("content-tweet").addClassName("content-"+t),n.empty(!0),"website"!==t||this.hasWebsiteView()||(t="normal");var s=this._buildItemContent(t);if(n.addContent(s),"normal"===t){var o=u.isIn3DDashboard()?"dark":"light";m.cleanContentElement(this.getItem(),s),m.fixFlashWmode(s),m.addMediaButtons(this.getItem(),s,{theme:o}),this.preventImageScroll(s)}else e||this._syncWebsiteView(!0)}},_buildItemContent:function(e){var n,i=this.getItem();switch(e){case"normal":var s,o=i.getEnclosuresByType("flash");o=o.map(function(t){return(s=new a({width:600,wmode:"transparent",aspectRatio:1.8,showToolbar:!1})).show(t.link),s}),n=t.createElement("div",{class:this.getClassNames("-article-text")+" "+this.getClassNames("-content-wrapper")+" autoclear"});var l=i.getDomain();t.owns(M,l)&&n.addClassName("drop-tables"),n.addContent([o,i.getContent()]);break;case"website":n=t.createElement("div",{class:"website",html:this._controlWeb=new r({withMessage:!0})});break;case"tweet":n=t.createElement("div",{class:"tweet",html:i.getRetweeterAuthor()&&{tag:"div",class:"retweeter-author",text:_("{0} retweeted").format(i.getRetweeterAuthor().name)}}).hide(),(P||(P=c.js("https://platform.twitter.com/widgets.js").then(function(){return window.twttr})),P).then(function(t){return t.widgets.createTweet(i.getTweetId(),n,{align:"center",linkColor:"#83C21F"})}).done(function(){this.preventScroll(n,n.show.bind(n))}.bind(this),function(){this._tweetViewAvailable=!1,this.changeContentType()}.bind(this))}return n},toggleContentType:function(){switch(this._getContentType()){case"normal":this.changeContentType("website");break;case"website":this.changeContentType("normal")}},hasWebsiteView:function(){if(this.hasTweetView())return!1;var e="https:"===document.location.protocol,n=this.getItem().getLink();if(h.getVar("disableIframe")||!n)return!1;var i=s.parseUrl(n);return!t.owns(F,i.domain)&&(!e||"https"===i.protocol)},hasTweetView:function(){return this._tweetViewAvailable&&Boolean(this.getItem().getTweetId())},preventImageScroll:function(t){var e=this;var n=function(){e.preventScroll(t,this.removeClassName.bind(this,"loading"))};t.getElements("img").filter(function(t){return!t.complete||0===t.naturalWidth}).forEach(function(t){t.addClassName("loading").addEvents({load:n,error:n})})},preventScroll:function(t,e){var n=this.getList();n?n.preventScroll(e):e()},updateDOM:function(){if(this.elements.container){this._syncWebsiteView(),this.updateActions(),this.updateActionButtonTints(),this.updateActionButtonTooltip();var e=this.options,n=this.getItem(),i=t.is(e.forceReadState)?e.forceReadState:!(n.canFlag("unread")||!u.User.isRegistered)||!n.hasFlag("unread");this.elements.container.toggleClassName("read",Boolean(i))}},updateActionButtonTooltip:function(){var t=this.elements.container.getElement(".action-read");t&&(this.getItem().canFlag("unread")?t.setAttribute("title",this.getItem().hasFlag("unread")?_("Mark as read"):_("Mark as unread")):t.setAttribute("title",this.getItem().hasFlag("unread")?_("This item is archived, you can't mark it as read"):_("This item is archived, you can't mark it as unread")));var e=this.elements.container.getElement(".action-star");e&&e.setAttribute("title",this.getItem().hasFlag("saved")?_("Unsave"):_("Save"))},updateActionButtonTints:function(){var t=this.getItem();t.canFlag("unread")&&this.setActionButtonTint("read",t.hasFlag("unread")?null:"green");var e=this.elements.container.getElement(".action-read");if(e&&e.setAttribute("data-icon",t.hasFlag("unread")?"½":"¼"),this.setActionButtonTint("star",t.hasFlag("saved")?"green":null),this.setActionButtonTint("share",null),u.isAllowed("tag")){var n=null;t.hasTags()?n="green":t.hasSuggestedTags()&&(n="dark"),this.setActionButtonTint("tag",n)}},setActionButtonTint:function(t,e){var n,i=["dark","green"];(n=this.elements.container.getElement(".action-"+t))&&(i.forEach(function(t){n.removeClassName("tint-"+t)}),i.includes(e)&&n.addClassName("tint-"+e))},_getDescriptionToolTipContent:function(){if(this.options.noToolTip||u.Page.inSmartReaderView)return"";var t=this.getItem();return t.getTitle().sanitizeHTML()+"<br />"+t.getContent().sanitizeHTML().cut(100)}});return d(L),t.extend(L,{_renderers:[],_iter:function(t){var e,n,i;for(e=0,n=this._renderers.length;e<n;e++)if(void 0!==(i=t.call(this,this._renderers[e],e)))return i},register:function(e,n,i,s){var o;switch(t.is(e,"class")||(e=L.extend(e)),s&&(o=this._renderers.indexOf(this.get(s))),e.canRender=n||function(t,n){return e.prototype.name===(n&&n.hint)},this.unregister(e.prototype.name),i){case"top":o=0;break;case"before":break;case"after":o++;break;default:o=this._renderers.length}this._renderers.splice(o,0,e)},unregister:function(t){this._renderers=this._renderers.filter(function(e){return e.prototype.name!==t})},factory:function(t,e){return new(this.getClass(t,e))(t,e)},getClass:function(t,e){return this._iter("string"==typeof t?function(e){if(e.prototype.name===t)return e}:function(n){if(n.canRender(t,e))return n})}}),L.register({name:"feed",render:function(){var e,n,i,s=this.getItem(),a=s.getTitle().stripTags(),r=s.getFirstAuthor()||{},l=r.name||"",c=u.isAllowed("blacklist"),h=s.getStream(),d=s.getDomain();r.full_name&&(l+=" ({0})".format(r.full_name)),n=s.getPublishDate(),e=p.formatLocalizedDate(n,"time"),n=p.formatLocalizedDate(n,"date"),c&&(i=t.createElement("li",{class:this.getClassNames("-feed-dropdown")+" uwa-icon"}),new x(i,{className:"grey"}).toElement().addContent(t.createElement("div",{class:"item","data-blacklist-type":"item",text:_("Block this article")}),l?t.createElement("div",{class:"item","data-blacklist-type":"author",text:_("Block all articles from this author")}):"",d?t.createElement("div",{class:"item","data-blacklist-type":"domain",text:_("Block all articles from this domain")}):"").addEvent("click",function(t){var e=this.getItem(),n=o.getElement(t).getAttribute("data-blacklist-type"),i=e.getStream(),s={facet:n,success:"",resolved:function(t){this.toggleStarFlag(!1),this.toggleReadFlag(!0),this.setFocus(!1),this.getItem().destroy(),this.destroy(),l.showNotify({class:"success",content:t})}.bind(this),rejected:function(t){l.showNotify({class:"error",content:b.getErrorMessage(t)})}};if("item"===n)s.success=_("The article has been blocked."),s.streamId=i.getId(),s.itemId=e.getId(),s=[s];else if("author"===n){var a=d+" ",r=[];e.getAuthors().forEach(function(t){s.value=a+t.name,r.push(s)}),s.success=_("The author {0} has been blocked.").format(e.getFirstAuthor().name),s=r}else{if("domain"!==n)throw new Error("Wrong blacklisting type specified");s.value=d,s.success=_("The source {0} has been blocked.").format(s.value),s=[s]}"item"!==n&&"author"!==n&&"domain"!==n||(s.success+=" "+_("Please wait a few minutes for the corresponding items to disappear from your feeds and filters."));var l=u.Page.inSmartReaderView?App.SmartReader:T;k.getById(this.options.widgetId).sendContent("onBlacklistClick",{data:s})}.bind(this)));var m=s.getSourceOrStreamTitle(),f=s.getSourceOrStreamLink(),g=s.getFaviconURL(!1),v=t.createElement("div",{class:this.getClassNames("-feed")}).addContent(t.createElement("div",{class:this.getClassNames("-preview-container")}).addContent(t.createElement("a",{class:"item-header"}),this.getActions(),t.createElement("div",{class:this.getClassNames("-feed-head")+" "+this.getClassNames("-content-wrapper")}).addContent(t.createElement("h2",{class:"title"}).addContent(g&&t.createElement("img",{src:g,class:"favicon"}),t.createElement("a",{rel:"external",href:s.getLink(),target:"_blank",html:a.sanitizeHTML()||_("Untitled")})),t.createElement("ul",{class:this.getClassNames("-feed-infos")}).addContent(h.isLibrary()?t.createElement("li",{class:this.getClassNames("-feed-library")+" uwa-icon"}):"",c?i:"",t.createElement("li",{class:"date",text:n}),t.createElement("li",{class:"hour",text:e}),f&&m&&t.createElement("li",{class:"source",html:{tag:"a",href:f,target:"_blank",html:m.sanitizeHTML()}}),l&&t.createElement("li",{class:"author",html:l.sanitizeHTML()}),this.hasWebsiteView()&&t.createElement("li",{class:"websiteview"}).addContent(this.elements.contentTypeSwitch=t.createElement("a",{href:"#",class:"action-content-type"}))),u.isAllowed("share")&&App.User&&App.User.share.userQuickshareServices&&App.User.share.userQuickshareServices.length&&this.buildQuickshareBar(),this._opinionUiContainer=t.createElement("div",{class:"nv-opinion-ui-container"}),s.getMetas()&&u.Config.detailed_feed_view?this.buildMetas():""),this.getItemContent()),u.isAllowed("search")&&u.isDebug("article-metrics")&&A.render(A.h(D,{itemId:s.getId(),themes:s.getThemes()||[]})));return this.buildOpinionUI(),v},syncContentTypeSwitch:function(){if(this.elements.contentTypeSwitch){var t="website"===this._getContentType();this.elements.contentTypeSwitch.set({html:t?_("Reader view"):_("Web site view"),"data-content-type":t?"normal":"website"})}},changeContentType:function(t){this._parent(t),this.syncContentTypeSwitch()},onPlayEnclosure:function(t){if(!this.elements.audioPlayer){var e=this.elements.audioPlayer=new C({closeButton:!1,handleButton:!1});this.elements.container.getElement(".entry-podcast-actions").addContent({tag:"li",class:"audio-container",html:e})}this.elements.audioPlayer.play(t,this.getItem().getTitle())}},function(){return!0}),App.ItemRenderer=L,L}.apply(e,i))||(t.exports=s)},function(t,e,n){"use strict";n.r(e);var i=n(6),s=n.n(i),o=n(9),a=n.n(o),r=n(4),l=n.n(r);var c=function(t){var e,n;function i(e){var n;return(n=t.call(this,e)||this).id=e.id||l.a.uniqueID(),n.name=e.name||"",n.color=e.color||"",n}return n=t,(e=i).prototype=Object.create(n.prototype),e.prototype.constructor=e,e.__proto__=n,i}(a.a),u=n(61),h=n.n(u),d=n(1),p=n.n(d),m=n(121),f=n.n(m),g={getErrorMessage:function(t){var e,n="fallback";p.a.is(t.message)&&(n=String(t.message)),p.a.is(t.cause)&&(e=String(t.cause.message));var i=new f.a(this.errorMessages,{formater:"string-format"});return i.match(n)+(e?" "+i.match(e,""):"")}},v={};v.errorMessages={error_submiting_sentiment:_("Error submitting sentiment."),fallback:_("An error has occurred, please try again later or contact the support")},v.getSentimentEntity=function(){return s.a.getCurationSentiments().then(function(t){return v.formatSentimentEntity(t)},function(t){return Promise.reject(new v.ApiError(t))})},v.formatSentimentEntity=function(t){var e=t.sentiments.map(function(t){return new c(t)});return{counters:t.total,entities:e}},v.submit=function(t){return t=t||{},s.a.submitSentimentEntity(t).then(function(){},function(t){return Promise.reject(new v.ApiError("error_submiting_sentiment",new Error(t)))})},v.delete=function(t){return s.a.deleteSentimentEntity({id:t}).then(function(){},function(t){return Promise.reject(new v.ApiError("error_deleting_sentiment",new Error(t)))})},v.edit=function(t){return s.a.editSentimentEntity({id:t.id,name:t.name,color:t.color}).then(function(){},function(t){return Promise.reject(new v.ApiError("error_editing_sentiment",new Error(t)))})},v.ApiError=h.a.extend(),v.getErrorMessage=g.getErrorMessage.bind(v);e.default=v},function(t,e,n){"use strict";var i,s;i=[n(15),n(0),n(5),n(14),n(52)],void 0===(s=function(t,e,n,i,s){var o=e.h,a=i.namespace("Preact_Overlay").addRules({root:{position:"absolute",backgroundColor:"rgba(0, 0, 0, 0.85)",top:0,bottom:0,right:0,left:0,boxSizing:"border-box",padding:"35px 20px 20px 20px",color:"#FFF",zIndex:"13"},close:{position:"absolute",top:0,right:0,width:26,height:26,cursor:"pointer",":before":{position:"absolute",top:5,left:5,lineHeight:"15px"}}});return n.extend({init:function(t){this._parent(t),this.state={noParentFound:void 0}},render:function(t,e){return t.injectInParentMatching&&!0!==e.noParentFound?o("div"):this._renderOverlay()},_renderOverlay:function(){var t=this.props;return o("div",{class:a("root")+(t.class?" "+t.class:"")},o("div",{class:"nv-close-icon uwa-icon delete "+a("close"),onClick:t.onClose}),t.children)},componentWillReceiveProps:function(t){if(t.injectInParentMatching!==this.props.injectInParentMatching)throw new Error("injectInParentMatching prop can't change")},componentDidMount:function(){if(this._keyboardShortcuts={esc:function(){this.props.onClose()}.bind(this)},s.pushFocus(this._keyboardShortcuts),this.props.injectInParentMatching){var n=t.getParent.call(this.base,this.props.injectInParentMatching);n?this._parentBase=e.render(this._renderOverlay(),n):this.setState({noParentFound:!0})}},componentWillUnmount:function(){s.popFocus(this._keyboardShortcuts),this._parentBase&&e.render(null,this._parentBase.parentNode,this._parentBase)},componentDidUpdate:function(){this._parentBase&&e.render(this._renderOverlay(),this._parentBase.parentNode,this._parentBase)}})}.apply(e,i))||(t.exports=s)},function(t,e,n){"use strict";var i,s;i=[n(2),n(109),n(160),n(358)],void 0===(s=function(t,e,n,i){var s=i.singleton({name:"streams",factory:e.factory,getFromCache:e.getFromCache,getPoolOptions:function(){return{maxGroup:t.Config.max_stream_load||1}},shouldDeduplicateItems:function(t){return"saved"===t.getQuery().type},_updateAction:function(t,e){this._parent(t,e),e.crawledAfterDate=t.getLastUpdate()},_preFetchHook:function(t,e){var n=t.actions.options.type;n&&(delete t.actions.streams,delete t.actions.options.type,"saved"===n?(t.route="streams/saved",this._dynamicallyIncreaseLimit(t,e)):"recentlyread"===n&&(t.route="streams/recentlyread",t.actions.options.limit=25))},_responseHook:function(t){"recentlyread"===t.getQuery().type&&t.setOption("hasMore",!1)},getAllItemsFromList:function(t){return n.getByStreamFromCache(t.getProducers().invoke("getId"))}});return e.fetch=s.fetch.bind(s),s}.apply(e,i))||(t.exports=s)},function(t,e,n){var i,s;i=[n(1),n(3),n(18),n(15),n(10),n(294)],void 0===(s=function(t,e,n,i,s,o){"use strict";var a=new WeakMap;function r(e){var n=t.createElement(e.tag||"th",{class:e.dataIndex,html:{tag:"span",html:e.text}});if(e.sortable){var i=t.createElement("span",{class:"sort",text:""}).inject(n);n.addClassName("sortable"),e.isSorted&&i.setText(e.sortReverse?"D":"E")}else n.addClassName("no-sortable"),e.text||n.addClassName("empty");return e.className&&n.addClassName(e.className),e.isFirst&&n.addClassName("first"),e.color&&n.setStyles({"background-color":e.color,color:"#FFFFFF"}),n}function l(e){var i=t.createElement(e.tag||"td",{class:e.dataIndex,"data-itemId":e.itemId,html:e.format?e.format(e.text):e.text});if(e.className&&i.addClassName(e.className),e.isFixed&&i.addClassName("is-fixed"),e.isFirst?i.addClassName("first"):i.addClassName("grid-data"),e.color){var s=n.hexToRgb(e.color,!0);i.setStyle("background-color","rgba("+s.toString()+",0.2)")}return i}var c=s.extend({defaultOptions:{className:"",data:null,columns:null,sortable:!1,orderBy:"",sortReverse:!1,scrollerOptions:{}},name:"uwa-datagrid",dataGrid:null,columns:null,init:function(t){this._parent(t),this.dataGrid=t.data,this.columns=t.columns,this.buildSkeleton(),this.fillGrid(),this.initEvents()},setScrollerSize:function(t){this.scroller&&this.scroller.setSize(t)},buildSkeleton:function(){var e=this.options,n=this.elements;n.container=t.createElement("div",{class:this.getClassNames()}),n.grid=t.createElement("table",{class:this.getClassNames("-table")}).inject(n.container),e.sortable&&n.grid.addClassName("sortable")},initEvents:function(){this.elements.container.addEvent("click",this.handleEvent.bind(this))},handleEvent:function(t){var n=e.getElement(t).getClosest("th");this.options.sortable&&n&&!n.hasClassName("no-sortable")&&this.onOrderColumn(n.className.split(" ")[0])},fillGrid:function(){this.fillHeader(),this.fillBody()},fillHeader:function(){var e,n,i,s=this.elements,o=this.columns;for(s.grid.empty(),i=t.createElement("tr").inject(s.grid),e=0,n=o.length;e<n;e++)r({isSorted:this.options.orderBy===o[e].dataIndex,sortReverse:this.options.sortReverse,className:o[e].className,dataIndex:o[e].dataIndex,text:o[e].text,isFirst:o[e].isFirst,sortable:this.options.sortable&&!o[e].noSortable,color:o[e].color}).inject(i)},fillBody:function(){var e,n,i,s,o,a=this.elements,r=this.options,c=this.columns,u=this.dataGrid;for(r.sortable&&r.orderBy&&(u=this.sortData()),e=0,n=u.length;e<n;e++)for(o=t.createElement("tr").inject(a.grid),i=0,s=c.length;i<s;i++){var h=u[e][c[i].dataIndex];l({text:h,isFixed:u[e].isFixed||c[i].isFixed,className:(u[e].className||"")+" "+(c[i].className||""),dataIndex:c[i].dataIndex,itemId:t.is(h,"object")&&h.itemId,format:c[i].format,isFirst:c[i].isFirst,color:c[i].color}).inject(o)}},sortData:function(){var t=this.options,e=this.dataGrid,n=this.columns.filter(function(e){return e.dataIndex===t.orderBy})[0];if(!n)throw new Error("Sort column was not found : "+t.orderBy);return e.sort(function(e,i){var s,o;return(s=n.sortKey?n.sortKey(e[t.orderBy]):e[t.orderBy])<(o=n.sortKey?n.sortKey(i[t.orderBy]):i[t.orderBy])?t.sortReverse?1:-1:s>o?t.sortReverse?-1:1:0}),e},onOrderColumn:function(t){var e=this.options;e.orderBy===t?e.sortReverse=!e.sortReverse:e.sortReverse=!1,e.orderBy=t,this.fillGrid(),this.scroller&&this.scroller.updateFixedHeaders(this.elements.grid),this.dispatchEvent("updateSortOptions",e)},updateData:function(t,e){this.dataGrid=e,this.columns=t,this.fillGrid(),this.scroller&&this.updateScroller()},addScroller:function(){this.scroller=new c.GridScroller(this.elements.grid,t.extend({_root:!1},this.options.scrollerOptions)),this.scroller.addEvent("onRefresh",function(t){t&&t.target===this.elements.grid&&this.scroller.setFixedHeaderSizes()}.bind(this))},updateScroller:function(){this.scroller&&this.scroller.destroy(),this.addScroller()}});return c.GridScroller=o.extend({defaultOptions:{lockDirection:!1},init:function(t){this._parent.apply(this,arguments),this.updateFixedHeaders(t)},_buildFixedHeaders:function(t){var e=this._getFixedHeadersSize(t),n=e.top,i=e.left;e.left&&(e.left=this._buildFixedHeader(t,e.left,1/0)),e.bottom&&(e.bottom=this._buildFixedHeader(t,1/0,-e.bottom)),e.right&&(e.right=this._buildFixedHeader(t,-e.right,1/0)),e.top&&(e.top=this._buildFixedHeader(t,1/0,e.top),e.left&&(e.topLeft=this._buildFixedHeader(t,i,n))),this._fixedHeaders=e},_isHeaderCell:function(t){return"th"===i.getTagName.call(t)||i.hasClassName.call(t,"is-fixed")},_getFixedHeadersSize:function(t){var e={top:0,bottom:0,left:1/0,right:1/0},n=!0,s=this;return i.getElements.call(t,"tr").forEach(function(t){var o=0,a=0,r=!0;i.getChildren.call(t).forEach(function(t){s._isHeaderCell(t)?(r&&o++,a++):(r=!1,a=0)}),e.left=Math.min(e.left,o),e.right=Math.min(e.right,a),r?(n&&e.top++,e.bottom++):(n=!1,e.bottom=0)}),e},setFixedHeaderSizes:function(){var t=[];Object.keys(this._fixedHeaders).forEach(function(e){var n=this._fixedHeaders[e];if(n){var s={width:0,height:0};i.getElements.call(n,"tr").forEach(function(e,n){var o=i.getDimensions.call(a.get(e));s.height+=o.outerHeight,i.getChildren.call(e).forEach(function(e){var o=i.getDimensions.call(a.get(e));t.push({element:e,size:{width:o.innerWidth,height:o.innerHeight}}),0!==n||e.isHidden()||(s.width+=o.outerWidth)})}),t.push({element:n,size:s})}},this),t.forEach(function(t){i.setStyles.call(t.element,t.size)})},_buildFixedHeader:function(e,n,s){function o(t,e){return e<0?t.slice(e):t.slice(0,e)}var r,l={tag:"tbody",html:[]};return o(i.getElements.call(e,"tr"),s).forEach(function(e){var s=t.createElement("tr");a.set(s,e),l.html.push(s),o(i.getChildren.call(e),n).forEach(function(t){var e=t.cloneNode(!0);a.set(e,t),s.grab(e)})}),r=e.cloneNode(),i.setHTML.call(r,l),i.addClassName.call(r,"fixed-column"),this.elements.scroller.grab(r),r},_updateHeaderPositions:function(t){var e=this._fixedHeaders;e.top&&i.setPosition.call(e.top,{y:0,x:t.x}),e.left&&i.setPosition.call(e.left,{y:t.y,x:0}),e.right&&i.setPosition.call(e.right,{y:t.y,x:this.scroll.width-i.getSize.call(e.right).width}),e.bottom&&i.setPosition.call(e.bottom,{x:t.x,y:this.scroll.height-i.getSize.call(e.bottom).height}),e.topLeft&&i.setPosition.call(e.topLeft,{y:0,x:0})},updateFixedHeaders:function(t){var e;if(this._fixedHeaders)for(e in this._fixedHeaders)this._fixedHeaders[e]&&i.destroy.call(this._fixedHeaders[e]);this._buildFixedHeaders(t),this.setFixedHeaderSizes(),this._updateHeaderPositions(this.position)},onScroll:function(){this._parent.apply(this,arguments),this._updateHeaderPositions(this.getPosition(!0))}}),t.namespace("Controls/DataGrid",c,t)}.apply(e,i))||(t.exports=s)},function(t,e,n){"use strict";var i,s;i=[n(1),n(9),n(16),n(22),n(13),n(51),n(36),n(6),n(2),n(191)],void 0===(s=function(t,e,n,i,s,o,a,r,l,c){var u={};return u.loadData=e.extend(i,{defaultOptions:{range:"daily",from:null,to:null,limit:null,useMultiplexing:!1,onFailure:function(){},onUpdateState:function(){}},forceLoadState:function(t){this.forcedState=t},init:function(t){this.data=[],this.hasError=!1,this.setOptions(t)},stop:function(){this.isLoading=!1,this.refreshTimer&&clearTimeout(this.refreshTimer)},getActions:function(t){function e(t,e,n){e.sampling&&e.sampling[n]&&("auto"!==e.sampling[n]?t.options.sampling=e.sampling[n]:e.samplingAuto&&e.samplingAuto[n]&&(t.options.sampling=e.samplingAuto[n]))}var n=this.options,i={analytics:[],options:a.formatDateRangeForAPI(n.from,n.to)};if(n.only_live&&(i.options.only_live=n.only_live),n.limit&&(i.options.limit=n.limit),n.range&&(i.options.range=n.range),n.blacklist&&(n.blacklist.getBlacklistValue()&&(i.options.blacklistValue=n.blacklist.getBlacklistValue()),n.blacklist.getBlacklistFacets()&&(i.options.blacklistFacets=n.blacklist.getBlacklistFacets())),n.screenshot&&(i.options.timeout=30),n.analyticsIds&&n.analyticsIds.length>0?n.facets.forEach(function(s,o){var a,r,l,c=n.show,h=c&&c.match(/unique/)?c.split("-")[1]:"",d={facet:n.facets[o],type:n.types[o],moduleId:n.widgetId,options:{}},p=n.tokens||[];if(d.token=n.analyticsIds[o]?(a=p,r=n.analyticsIds[o],(l=a.detect(function(t){return t.id===r}))&&l.token||u.getPageId()):p[o]?p[o].token:"",e(d,n,o),n.analyticsIds[o]&&d.token)d.id=n.analyticsIds[o];else if(n.query)d.query=n.query;else{if(!n.analyticsIds[o])throw new Error("No analytics id nor query");d.id=n.analyticsIds[o]}n.queryRestriction&&n.queryRestriction.length&&n.queryRestriction[o]&&n.queryRestriction[o].queryRestriction&&(d.options.queryRestriction=n.queryRestriction[o].queryRestriction),n.expandSentiments&&(d.options.expandSentiments=!0),""!==h&&Number(h)===o&&(d.unique=!0),t&&t.filterNullValuesOnBackend&&(d.options.filterNull=n.filterNull),i.analytics.push(d)}):(n.query||n.queries)&&(i.analytics=n.facets.map(function(t,i){var s={query:n.query||n.queries[i],facet:n.facets[i],type:n.types[i],moduleId:n.widgetId,options:{}};return e(s,n,i),n.expandSentiments&&(s.options.expandSentiments=!0),s})),n.compareFrom){var s;try{s=a.parseDate(n.compareFrom,{skipRelativeFormats:!0})}catch(t){}s&&"Invalid Date"!==s.toString()||(s=a.add(a.parseDate(n.from||a.getDefaultFrom()),n.compareFrom)),i.analytics=i.analytics.concat(i.analytics.map(function(t){return(t=UWA.clone(t)).options||(t.options={}),t.options.from=a.formatDateForAPI(s),t}))}return i.options.orderBy=i.analytics[0].facet,i},download:function(){var t=this.getActions({filterNullValuesOnBackend:!0});return(this.options.show?"common"===this.options.show?r.analyticsCountCommon:r.analyticsCountUnique:r.analytics)(t,{exportResponseBody:"csv"})},start:function(){this.doRequest()},getLowerDataStatus:function(t){var e,n,i,s=0,o=t[0].status.progress;for(e=0,n=t.length;e<n;e+=1)(i=t[e].status.progress)<=o&&(o=i,s=e);return t[s].status},areAllDataSameStatus:function(e){var n,i,s,o=e[0].status;for(n=0,i=e.length;n<i;n+=1)if(s=e[n].status,!t.equals(s,o))return!1;if(t.equals(s,o))return s},getError:function(t){var e,n,i;for(e=0,n=t.analytics.length;e<n;e+=1)71108===t.analytics[e].error_code&&(i=t.analytics[e].error_code);return i},allInError:function(t,e){return t.every(function(t,n){var i=!e||!e[n]||0===e[n];return t.error&&i})},allHaveInvalidAnalyticsIds:function(t){var e=t;return this.options.expandSentiments&&"analytics"===this.options.widgetName&&(e=t.slice(t.length/2)),e.every(function(t){return!t.id})},doRequest:function(t,e){var i,o,a,l=this,c=0;this.isLoading||(t&&(o=t.nextUpdate,i=t.serverTime,a=t.sameStatus),e&&(o?(c=1e3*Math.max(o-i+2,10),a&&c<12e4?c=12e4:c>1e9&&(c=1e9)):c=12e4),this.refreshTimer=setTimeout(function(){if(l.options.snapshotData)l.onCompleteRequest(l.options.snapshotData);else{l.isLoading=!0;var t=l.getActions(),e=[];t.analytics.length?(l.options.show?e.push("common"===l.options.show?r.analyticsCountCommon(t):r.analyticsCountUnique(t)):e=e.concat(s.splat(this._fetchAnalytics(t))),n.all(e).done(function(t){var e=l._formatResults(t);l.getError(e)||l.allInError(e.analytics,e.total)||l.allHaveInvalidAnalyticsIds(e.analytics)?l.options.onFailure(e):l.onCompleteRequest(e)},function(t){l.options.onFailure({error:{code:t}},"timeout"===t)})):l.options.onFailure()}}.bind(this),c))},onCompleteRequest:function(t){var e,n,i,s=[],a=[],r=[],l=[],h=[],d=[],p=[],m=[],f=this.options,g=t.analytics,v=f.show,b=v&&v.match(/unique/)?v.split("-")[1]:"";this.isLoading=!1,g.forEach(function(e,n){if(e.id){var i=f.obj?f.obj[n]:"",o=u.getMinMax(t.stats[n]),g=UWA.clone(e);if(g.color=i?i.color:"",g.name=i?i.name:e.title,g.grouping=i?i.type:f.facets[n]?f.facets[n]:f.facets[0],g.stats=""===b?t.stats[n]:Number(b)===n?t.stats[0]:"",g.forecasts=""===b&t.forecasts?t.forecasts[n]:Number(b)===n&&t.forecasts?t.forecasts[0]:"",f.screenshot||(g.available=""===b&&t.available?t.available[n]:Number(b)===n&&t.available?t.available[0]:{}),g.total=""===b?"term"===g.grouping&&0===t.total[n]?u.getTotal(g.stats):t.total[n]||0:Number(b)===n?t.total[0]:0,g.totalAvailable=""===b&&t.totalAvailable?t.totalAvailable[n]:Number(b)===n&&t.totalAvailable?t.totalAvailable[0]:0,g.average=u.getAverage(g.stats,g.total),g.count=""===b?t.count[n]:Number(b)===n?t.count[0]:0,g.fromTo=e.from?[e.from,e.to]:[t.from,t.to],g.analyticsId=e.id,g.id=n,g.min=o.min,g.max=o.max,g.grouping.match(/sentiment/)&&e.id){if(e.queryRestriction){var v=e.queryRestriction.split(":");e.sentiment=v[1]}e.color&&(g.color="#"+e.color),g.name=e.sentiment,g.grouping=g.grouping+"_"+g.name.toLowerCase(),m.push({id:e.id,queryRestriction:c.buildQuery({value:e.sentiment,type:"sentiment"})})}t.analytics[n].status=t.analytics[n].status||{progress:100,eta:-1},t.analytics[n].status.progress=Math.round(t.analytics[n].status.progress),"misodata"===g.type&&(i&&(g.title=i.name),t.analytics[n].status={progress:100,eta:-1});var y=e.id+"_"+g.grouping+(m[n]?"_"+m[n].queryRestriction:"");r.includes(y)&&!this.options.compareFrom||(r.push(y),"analytics"===f.widgetName&&g.grouping.match(/(sentiment|emotion)/)&&a.includes(e.id)||(a.push(e.id),d.push(e.sampling),h.push("auto")),p.push(e.updateAt),e.id&&l.push(g.query||g.url),s.push(g))}},this),f.filterNull&&u.filterNullValues(s);var y=o.computeCoeffs(s);s.forEach(function(t,e){o.computeAdditionalCurvesData(t,y,e,f.range)}),this.options.analyticsIds||(this.options.analyticsIds=a),this.options.samplingAuto=d,this.options.sampling=h,n=this.areAllDataSameStatus(s),i=this.getLowerDataStatus(s),e={analyticsIds:a,analyticsQueries:l,samplingAuto:d,data:s,serverTime:t.server_time,nextUpdate:this.getNextUpdate(p),sameStatus:!1,status:i||{progress:100,eta:-1}},m.length&&(e.queryRestriction=m),!1!==n&&(e.sameStatus=!0),f.onComplete(e),f.snapshotData||this.doRequest(e,!0)},getNextUpdate:function(t){return Math.min.apply(Math,t)},_fetchAnalytics:function(t){return this.options.useMultiplexing?r.analytics(t):t.analytics.map(function(e){var n={analytics:[e],options:t.options};return r.analytics(n)})},_formatResults:function(t){return this.options.useMultiplexing?t[0]:(t.forEach(function(t){e?(e.analytics=e.analytics.concat(t.analytics),e.available=e.available.concat(t.available),e.count=e.count.concat(t.count),e.forecasts=e.forecasts.concat(t.forecasts),e.stats=e.stats.concat(t.stats),e.total=e.total.concat(t.total),e.totalAvailable=e.totalAvailable.concat(t.totalAvailable)):e=t}),e);var e}}),u.loadData.rqCount=0,u=UWA.merge(u,{sort:function(t,e){var n={randomize:function(){return Math.random()<.5?-1:1},bylabel:function(t,n){return t[e.label]<n[e.label]?"asc"===e.order?-1:1:t[e.label]>n[e.label]?"asc"===e.order?1:-1:0},byemotion:function(t){var e=[];return["positive","neutral","negative"].forEach(function(n){var i=o.getFromObjectsArray(t,"key",n);i&&e.push(i)}),e}};return"byemotion"===(e=UWA.merge(e||{},{type:"bylabel",label:"value",order:"asc"})).type?t=n.byemotion(t):t.sort(n[e.type]),t},rawDataIterator:function(t,e){var n,i,s=t.stats?t.stats[0]:t;for(n in s)if(s.hasOwnProperty(n))if("object"!=typeof s[n])e(n,Number(s[n]),n);else for(i in s[n])s[n].hasOwnProperty(i)&&e(i,Number(s[n][i]),n)},getPageId:function(){return l.Page&&l.Page.id||void 0},getAverage:function(t,e){var n,i=0;for(n in t)t.hasOwnProperty(n)&&null!==t[n]&&i++;return e/i},getTotal:function(t){var e,n=0;for(e in t)t.hasOwnProperty(e)&&(n+=t[e]);return n},filterNullValues:function(t){var e,n,i,s,o=t.filter(function(t){return t.stats}),a=o[0].stats;for(i in a)if(a.hasOwnProperty(i)){for(s=!0,e=0,n=o.length;e<n;e++)null===o[e].stats[i]||(s=!1);if(s)for(e=0,n=o.length;e<n;e++)delete o[e].stats[i]}},getMinMax:function(t){var e={key:"",value:Number.MAX_VALUE},n={key:"",value:Number.NEGATIVE_INFINITY};return t&&u.rawDataIterator(t,function(t,i){i<e.value&&(e={key:t,value:i}),i>n.value&&(n={key:t,value:i})}),{min:e,max:n}},areSimilar:function(t,e){var n=u.getMinMax(t),i=u.getMinMax(e),s=n.max.value,o=n.min.value,a=i.max.value,r=i.min.value,l=Math.max(s,a)-Math.min(o,r);return Math.abs(o-r)/l<.5&&Math.abs(s-a)/l<.5},getAnalyticsIds:function(t){var e={what:"pub_date",where:"media",who:"author",how:"emotion_positive__pub_date,emotion_negative__pub_date,emotion_neutral__pub_date"}[t.mode],n=e.split(","),i={widgetName:"analytics",format:"json",pageId:l.Page.id,widgetId:t.widgetId,from:"-2days",to:"now",range:"daily",query:t.query,facets:[],types:[]};e.match(/(pub_date|emotion|sentiment)/)||(i.limit=20),i.types=n.map(function(){return"socialpack"}),i.facets=n;var s=new this.loadData(i),o=function(t){var e=new Error("Error loading analyticsIds");throw e.originalResponse=t,e};return r.analytics(Object.assign({pageId:t.pageId||u.getPageId()},s.getActions())).then(function(t){var n=t.analytics;if(n[0]&&!s.allInError(n)){var i=[];return n.forEach(function(t){e.match(/(sentiment|emotion)/)?!i.includes(t.id)&&t.id&&i.push(t.id):t.id&&i.push(t.id)}),i}o(n)},function(t){o(t)})}})}.apply(e,i))||(t.exports=s)},function(t,e,n){"use strict";var i,s;i=[n(1),n(53),n(4),n(44),n(84),n(218),n(45),n(219),n(52)],void 0===(s=function(t,e,i,s,o,a,r,l,c){var u,h,d={},p={onProducerChange:function(t){t.hasChanged("flags")&&x()}};function m(){return r.get("feedreaderMaximized")}function f(t){var e=u.getAsideItemList().getRenderer(t);e&&u.openItem(e.getItem())}function g(t){var n=u&&u.getDisplayedItemScroller();if(!n)return!0;var i,s,o=n.getInnerElement();return!!("up"===t?0===o.scrollTop:o.scrollTop+o.getSize().height>=o.scrollHeight)||(i=Math.floor(.8*o.getSize().height),"down"===t&&(i=-i),s=o.scrollTop-i,e.smoothScroll(o,{top:s}),!1)}function v(t,e){h.canFlag("unread")&&(e&&(e=Math.round((new Date).setHours(0,0,0,0)/1e3)-86400*(e-1)),h.setFlags("unread",t,e))}function b(){var t=!m();d.toggleSize.setAttribute("data-icon",t?"o":"n"),r.set("feedreaderMaximized",t).save().done(),w().changeSize({height:t?"below-topbar":"below-tabs"})}function y(){function e(t){return{click:function(){t()}}}return d.markAllAsRead=t.createElement("div",{class:"uwa-icon circle-crossed "}),new a(d.markAllAsRead,{className:"grey"}).toElement().addContent([{text:_("Mark all as read"),events:e(v.bind(this,!1))},{text:_("- Older than 1 day"),events:e(v.bind(this,!1,1))},{text:_("- Older than 2 days"),events:e(v.bind(this,!1,2))},{text:_("Mark all as unread"),events:e(v.bind(this,!0))}].map(function(t){return Object.assign({tag:"div",class:"item"},t)})),{tag:"div",class:"nv-item-list-renderer-modal-header",html:[d.icon=t.createElement("div",{class:"nv-item-list-renderer-modal-icon"}),{tag:"div",class:"nv-item-list-renderer-modal-title",html:[d.title=t.createElement("span",{class:"nv-item-list-renderer-modal-title-text"}),d.itemCount=t.createElement("span",{class:"nv-item-list-renderer-modal-title-count",events:e(v.bind(this,!1))})]},d.toggleSize=t.createElement("div",{tag:"div",class:"header-button uwa-icon","data-icon":m()?"o":"n",events:e(b)}),d.markAllAsRead,{tag:"div",class:"header-button uwa-icon","data-icon":"k",events:e(f.bind(this,"previous"))},{tag:"div",class:"header-button uwa-icon","data-icon":"j",events:e(f.bind(this,"next"))}]}}function w(){return w.cache||(w.cache=new o({className:"light",fullscreenable:!0,closeable:!0,isCloseable:!0,title:y(),size:{width:"full",height:m()?"below-topbar":"below-tabs",margin:0}}),w.cache.getContent().addClassName("nv-item-list-renderer-modal"),w.cache.getModalBox().addContent({tag:"div",class:"nv-item-list-renderer-modal-box-inner",html:w.cache.getModalBox().getChildren()},l.getContainer()),w.cache.hide().inject(document.body)),w.cache}function x(){var t,e=h.getProducers()[0],n=h.canFlag("unread"),o="",a="";e&&"saved"!==h.getQuery().type?e.isSearch()?((t=h.getTotalItemCount())>0&&(o+=_("{0} results").format(i.formatHumanNumber(t))),e.isCached()&&(o+=" ({0})".format(s.formatRelativeTime(new Date(1e3*e.getComputedAtTimestamp()))))):(t=e.getFlagCount("unread"),a=n?_("Mark all as read"):"",o=t>0&&i.formatCounterNumber(t)):(o=(t=h.getTotalItemCount())>0&&i.formatCounterNumber(t),n=!1),o?d.itemCount.show().toggleClassName("clickable",n).set("title",a).setText(o):d.itemCount.hide()}function C(){var t=w();t.isOpen()&&t.close()}return c.addShortcuts({feedreader:{a:function(){v(!1)},"h,?,f1":function(){var t="";t+="<table>",t+='<tr><td><span class="cap long">escape</span></td><td>'+_("Close the FeedReader")+"</td></tr>",t+='<tr><td><span class="cap">F</span></td><td>'+_("Switch reader size")+"</td></tr>",t+='<tr><td><span class="cap">I</span></td><td>'+_("Switch view mode")+"</td></tr>",t+='<tr><td><span class="cap">P</span></td><td>'+_("Previous message")+"</td></tr>",t+='<tr><td><span class="cap">N</span></td><td>'+_("Next message")+"</td></tr>",t+='<tr><td><span class="cap uwa-icon" data-icon="E"></span></td><td>'+_("Previous message")+" "+_("(with scroll in content)")+"</td></tr>",t+='<tr><td><span class="cap uwa-icon" data-icon="D"></span></td><td>'+_("Next message")+" "+_("(with scroll in content)")+"</td></tr>",t+='<tr><td><span class="cap long">space</span></td><td>'+_("Next unread message")+" "+_("(with scroll)")+"</td></tr>",t+='<tr><td><span class="cap">U</span></td><td>'+_("Mark item as read/unread")+"</td></tr>",t+='<tr><td><span class="cap">A</span></td><td>'+_("Read All")+"</td></tr>",t+='<tr><td><span class="cap med">shift</span> + <span class="cap">U</span></td><td>'+_("Unread All")+"</td></tr>",t+="</table>",c.openHelp("Feedreader",t)},f:function(){b()},i:function(){var t=u.getDisplayedItemRenderer();t&&t.toggleContentType()},"shift+u":function(){v(!0)},u:function(){var t=u.getDisplayedItem();t&&t.setFlag("unread",!t.hasFlag("unread")).save()},space:function(){g("down")&&f("nextUnread")},n:function(){f("next")},p:function(){f("previous")},down:function(){g("down")&&f("next")},up:function(){g("up")&&f("previous")},esc:function(){C()}}}),{open:function(t){if(!t||!t.itemList)throw new Error("Options are missing");var e=t.itemList.getProducers()[0];if(e&&(t.title||(t.title=e.getTitle()),t.icon||(t.icon=e.getFaviconURL())),u)throw new Error("An itemlist is already displayed");(h=t.itemList).addEvents(p);var i=w();d.title.setText(t.title),d.icon.setContent(t.icon&&{tag:"img",src:t.icon}),d.markAllAsRead.toggle(h.canFlag("unread")),n.e(0).then(function(){var e=[n(304)];(function(e){var n=Object.assign({},t);"condensed"===n.view&&(n.view="list"),u=e.createReader(n),i.setContent(u),i.open(),c.pushFocus("feedreader"),i.addEventOnce("onClose",function(){t.onClose&&t.onClose(),c.popFocus("feedreader"),h&&(h.removeEvents(p),h=null),u&&(u.destroy(),u=null),i.removeEvent("onPositionUpdate")}),t.item&&u.openItem(t.item),x(),h.loadItemCount().done(function(){h===t.itemList&&x()})}).apply(null,e)}).catch(n.oe)},showNotify:function(t){u.getNotify().show(t)},close:C,isOpen:function(){return w().isOpen()}}}.apply(e,i))||(t.exports=s)},function(t,e,n){"use strict";var i,s;i=[n(1),n(122),n(20),n(13),n(2),n(4),n(6),n(109),n(271)],void 0===(s=function(t,e,n,i,s,o,a,r,l){function c(t){return t=s.isIn3DDashboard()&&(t||s.get3DDPlatformId()),l.get("items",t)}function u(t){return function(){return this.get(t)}}function h(t){if("unread"!==t&&"saved"!==t)throw new Error("Invalid flag: ‘"+t+"’")}var d,p={audio:!0,flash:!0,html:!0,image:!0,video:!0};var m=null,f=function(){m=null};function g(e,n,i){return m?m.then(g.bind(null,e,n,i)):(m=a.changeTag({action:e,itemId:i.getId(),streamId:i.getStreamId(),label:n.name,sentiment:n.sentiment.name,id:n.id,tenant:i.get("x3dPlatformId")}),"add"===e&&m.then(function(e){e.tag&&t.extend(n,e.tag)},function(){}).done(),m.then(f,f).done(),m)}function v(t,e){var n=t.get("flags")[e];return"unread"===e&&(e="read",n=!n),a.streamsFlag({action:n?"add":"remove",type:e,tenant:t.get("x3dPlatformId"),streams:[{id:t.getStreamId(),items:[{id:t.getId(),publishedAt:t.getPublishTimestamp()}]}]})}var b=e.extend({defaults:{title:"",updatedAt:0,publishedAt:0,authors:Object.freeze([]),link:"",stream:Object.freeze({}),enclosures:Object.freeze([]),content:"",tags:Object.freeze([]),suggestedTags:Object.freeze([]),themes:Object.freeze([]),flags:Object.freeze({})},setup:function(){this._syncChanged={},this.get("id")||this.set("id","rnd-"+Math.floor(1e10*Math.random())),this.addEvent("onChange",function(t,e){if(!e.sync&&(this._syncChanged.tags|=this.hasChanged("tags"),this.hasChanged("flags"))){var n=this.previous("flags"),i=this.get("flags");this._syncChanged.unreadFlag|=n.unread!==i.unread,this._syncChanged.savedFlag|=n.saved!==i.saved}})},destroy:function(t){this._parent(t),this.removeEvents()},dispatchEvent:function(t,e,n){this._parent(t,e,n);var i=this.getStream();i&&(t=t.replace(/^on/,"onItem"),i.dispatchEvent(t,e,n))},sync:function(t,e,n){if(["update","delete"].indexOf(t)<0)throw new Error("Can't sync an Item other than with update or delete");b.getDuplicated(this).invoke("_sync",t,n)},_sync:function(t,e){if("delete"===t)void 0!==c().get(this.getId())&&(c().remove(this.getId()),delete y[w(this)]);else{var i=this._syncChanged,s=[];i.unreadFlag&&s.push(v(this,"unread")),i.savedFlag&&s.push(v(this,"saved")),this._syncChanged={},n.all(s).done(e.onComplete.bind(null,null),e.onFailure)}},getId:u("id"),getGuid:u("guid"),getTweetId:u("id_str"),getTitle:function(){var t=this.get("title");if(this.getTweetId()){var e=this.getRetweeterAuthor()||this.getFirstAuthor();t=(this.get("retweeted_status")?_("{0} retweeted: {1}"):_("{0} tweeted: {1}")).format(e.name,t)}return t},getRetweeterAuthor:function(){var t=this.get("retweeted_status");if(t)return t.retweeter},getStreamId:function(){return this.getStream().getId()},getCreationTimestamp:u("createdAt"),getPublishTimestamp:u("publishedAt"),getAuthors:u("authors"),getFirstAuthor:function(){return(this.getAuthors()||[])[0]},getLink:u("link"),getDomain:function(){return this.get("domain")||i.parseUrl(this.getLink()).domain},getFullLink:u("fullLink"),getEnclosures:u("enclosures"),getContent:function(){var t=this.get("content");return s.Config.detailed_feed_view?t.replace(/<div class=("|')ngi-metas("|')>[\w\W]*<\/div>/,""):t},getTags:u("tags"),getSuggestedTags:u("suggestedTags"),getMetas:function(){var t=this.get("content").match(/<div class=("|')ngi-metas("|')>[\w\W]*<\/div>/);return t?t[0]:""},getThemes:u("themes"),asTweet:function(){var t=this.getFirstAuthor(),e={user:{id:t.id,name:t.full_name||t.name,screen_name:t.name,profile_image_url:t.avatar},content:this.getContent(),id:this.getId(),created_at:this.getPublishDate(),id_str:this.get("id_str"),in_reply_to_status_id_str:this.get("in_reply_to_status_id_str"),in_reply_to_screen_name:this.get("in_reply_to_screen_name"),enclosures:this.getEnclosures()},n=this.get("retweeted_status");return n&&(e.retweeted_status=n,"number"==typeof e.retweeted_status.created_at&&(e.retweeted_status.created_at=new Date(1e3*e.retweeted_status.created_at))),e},asFacebook:function(){var t=this.getFirstAuthor(),e=this.getEnclosures()[0],n={link:this.getLink(),message:this.getContent(),id:this.getGuid(),postStreamId:this.getId(),created_time:this.getPublishDate().toISOString()};return t&&(n.from={name:t.name,id:t.id,link:t.link,picture:{data:{url:t.avatar}},type:t.type}),e&&(n.picture=e.image,n.description=e.content,n.link=e.link,n.name=e.title,n.name&&(n.type="link")),n},getEnclosuresByType:function(e){!function(t){if(!p.hasOwnProperty(t))throw new Error("Invalid enclosure type: "+t)}(e);var n=[];return this.getEnclosures().forEach(function(i){i.type===e?n.push(i):"image"===e&&t.is(i.image)&&n.push({link:i.image,type:"image"})}),n},getUserTags:function(t){return void 0===t&&(t=s.User.id),this.get("tags").filter(function(e){return e.user.id===t})},hasFlag:function(t){h(t);var e=this.get("flags");return!(!1!==s.User&&s.User.isRegistered||"unread"!==t||void 0!==e[t])||!!e[t]},canFlag:function(e){var n=this.get("forceReadState");return!(!t.is(n)||!1!==this.get("forceReadState"))||(h(e),e in this.get("flags"))},setFlag:function(e,n,i){if(h(e),!this.canFlag(e))throw new Error("Can't set flag "+e+" for item "+this.getId());n=void 0===n||!!n;var s={};return s[e]=n,b.getDuplicated(this).invoke("set","flags",t.merge(s,this.get("flags")),i),this},getPublishDate:function(){return new Date(1e3*this.getPublishTimestamp())},getFaviconURL:function(e){return o.getFaviconUrl(this.getSourceLink())||(t.is(e)?e:o.getStaticUrl("/img/file.png"))},hasTags:function(){return this.getTags().length>0},hasSuggestedTags:function(){return this.getSuggestedTags().length>0},setTags:function(e,n){var i="Usage error, please clone the opinion list before editing it.",s=this.get("tags");if(e===s)throw new Error(i);e.forEach(function(e){var n=s.detect(function(t){return t.name===e.name});if(n){if(n===e)throw new Error(i);t.merge(e,n)}}),this.set("tags",e,n)},addTag:function(e){return this.getTags().detect(function(t){var n=t.name===e.name,i=t.sentiment.id===e.sentiment.id,s=e.user&&t.user.id===e.user.id;return n&&i&&s})?n.resolve():(e.user||(e.user={}),e.user.id=String(s.User.id),e.date=Math.round((new Date).getTime()/1e3),g("add",e,this).then(function(){var n=t.clone(this.getTags());n.push(e),this.setTags(n)}.bind(this)))},editTag:function(e){var i=t.clone(this.getTags()),o=i.detect(function(t){return t.name===e.name&&t.user.id===s.User.id&&t.id===e.id}),a=t.extend(t.merge({},o),e,!0);return a?g("edit",a,this).then(function(){i.some(function(t,e){if(t.name===a.name&&t.user.id===s.User.id&&t.id===a.id)return i[e]=a,!0},this),this.setTags(i)}.bind(this)):n.resolve(e)},removeTag:function(e){var n,i,o,a=t.clone(this.getTags());return a.some(function(t,o){if(t.id===e&&t.user.id===s.User.id)return n=o,i=t,!0}),(o=g("remove",i,this)).then(function(){a.splice(n,1),this.setTags(a)}.bind(this),function(){}).done(),o},getStream:function(){var t=this.get("stream");return t&&t.id?r.getFromCache(t.id,this.get("x3dPlatformId")):(d||(d=r.getEmptyStream()),d)},getSourceTitle:function(){return this.get("source").title},getSourceLink:function(){return this.get("source").link},getSourceOrStreamTitle:function(){return this.getSourceTitle()||this.getStream().getTitle()},getSourceOrStreamLink:function(){return this.getSourceLink()||this.getStream().getLink()}}),y=Object.create(null);function w(t){var e=t.getFullLink()||t.getLink();return e?e.replace(/^https?:/,""):t.getId()}return b.factory=function(t,e){e=e||{},t.stream&&r.factory(t.stream,{x3dPlatformId:e.x3dPlatformId}),t.enclosures&&(t.enclosures=t.enclosures.filter(function(t){return t.link&&p.hasOwnProperty(t.type)})),"content"in t&&"string"!=typeof t.content&&(t.content=""),"title"in t&&"string"!=typeof t.title&&(t.title=""),t.flags&&(o.forEachProperty(t.flags,function(t,e,n){n[e]=!!t}),"read"in t.flags&&(t.flags.unread=!t.flags.read,delete t.flags.read));var n=c(e.x3dPlatformId).get(t.id);if(n)n.set(t,{sync:!0});else{t.x3dPlatformId=e.x3dPlatformId,n=new b(t,{silent:!0}),c(e.x3dPlatformId).set(t.id,n);var i=w(n);i in y||(y[i]=[]),y[i].push(n)}return n},b.getFromCache=function(t){return c().get(t)},b.getDuplicated=function(t){return y[w(t)]},b.deduplicate=function(t,e){if(t=o.unique(t,w),e){var n=Object.create(null);e.forEach(function(t){n[w(t)]=!0}),t=t.filter(function(t){return!(w(t)in n)})}return t},b.getByStreamFromCache=function(t){var e={};Array.isArray(t)?t.forEach(function(t){e[t]=!0}):e[t]=!0;var n=[];return o.forEachProperty(c().getAll(),function(t){e[t.getStreamId()]&&n.push(t)}),n},b}.apply(e,i))||(t.exports=s)},function(t,e,n){"use strict";var i,s;i=[n(191)],void 0===(s=function(t){return{buildQuery:function(e){return t.buildQuery(e)},escapeQuery:function(e){return t.escapeQuery(e)},buildQueryPartsFromRequestAdd:function(e){return t.buildQueryPartsFromRequestAdd(e)},translateQuery:function(t,e){return t.replace(/(?:([\w,*]+):)?([^\s)("]+|"(?:(?:\\\\)*\\"|[^"])*")/g,function(t,n,i){return-1===["or","and","-","not","near","opt","after","before","next","butnot","split","max"].indexOf(i.toLowerCase())&&(t=e(i,n,t)),t})}}}.apply(e,i))||(t.exports=s)},function(t,e,n){"use strict";var i,s;i=[n(15),n(58),n(0),n(5)],void 0===(s=function(t,e,n,i){var s=n.h,o=e.extend({init:function(t,e){this._parent({element:t}),this._startCallback=e,this._scenario=!1},getStartCallback:function(){return this._startCallback},start:function(){var t=this._startCallback(this.currentEvent);t?(this._scenario=t,this._call("start")):this.reset()},_call:function(t){this._scenario&&"function"==typeof this._scenario[t]&&this._scenario[t](this.currentEvent)},snap:function(t){this._parent(t),this._call("snap")},cancel:function(){this._call("cancel")},move:function(t){this._parent(t),this._call("move")},stop:function(){this._call("stop")},reset:function(){this._parent(),this._call("reset")},detach:function(){return t.removeEvents.call(this.element,this.elementEvents),this}});return i.extend({render:function(t){var e=Object.assign({},t);return delete e.start,s("div",e)},_recreateDrag:function(){if(this._drag){if(this._drag.getStartCallback()===this.props.start&&this._drag.element===this.base)return;this._drag.detach()}this.props.start&&(this._drag=new o(this.base,this.props.start))},componentDidMount:function(){this._recreateDrag()},componentDidUpdate:function(){this._recreateDrag()},componentWillUnmount:function(){this._drag.detach(),this._drag=null}})}.apply(e,i))||(t.exports=s)},function(t,e,n){var i,s;i=[n(1),n(13),n(3),n(24),n(8),n(88),n(15)],void 0===(s=function(t,e,n,i,s,o,a){"use strict";var r=s.extend(i,{name:"uwa-picker",options:{navigation:null,button:null,valueInput:"text",dropdownOptions:{global:!0},dropdownContainer:null},buildSkeleton:function(){var e=this.options,n=this.elements;this._parent(),e.valueInput&&e.button?n.content.addClassName(this.getClassNames("-split")):e.button?n.container.addClassName("button-only"):e.valueInput&&n.container.addClassName("value-only"),e.valueInput&&(n.content.setContent(n.value=t.createElement("div",{class:this.getClassNames("-value")})),"text"===e.valueInput&&n.value.addClassName(this.getClassNames("-text"))),e.button&&n.content.addContent(n.button=t.createElement("div",{class:this.getClassNames("-button"),html:e.button}))},buildContent:function(){},buildNavigation:function(n){return e.splat(n).map(function(e){return t.is(e,"element")?e:this.buildNavigationItem(e)},this)},buildNavigationItem:function(e){var n=this;return t.createElement("div",{text:e.label,class:this.getClassNames("-navigationlink"),events:{click:function(t){n.dispatchEvent("onNavigationClick",[t,e])}}})},syncInput:function(){var t=this.elements.value;t!==this.elements.input&&t.setText(this.getValue())},isOpen:function(){return Boolean(this.elements.dropdown&&this.elements.dropdown.isOpen())},focus:function(t){var e=this,n=e._parent;setTimeout(function(){var i=document.activeElement,s=e.elements.dropdown;i&&s&&a.isInjected.call(i,s.getInnerElement())?a.addEvent.call(i,"blur",function t(){a.removeEvent.call(i,"blur",t),e.focus(!1)}):(n.call(e,t),!1===t&&e.toggle(t))},0)},open:function(){return this.toggle(!0)},close:function(){return this.toggle(!1)},toggle:function(e){var i=this.elements,s=this.options;if((!0===e||void 0===e)&&!i.dropdown){var a=t.extend({target:i.button||i.content,autoPosition:["below-end","right-start","above-end","left-start"]},s.dropdownOptions);a._root=!1,a.className=this.getClassNames("-dropdown")+" "+(a.className||""),i.dropdown=new o.Pointy(a).addEvents({onShow:this.dispatchEvent.bind(this,"onOpen"),onHide:this.dispatchEvent.bind(this,"onClose")}),s.navigation&&(i.navigation=t.createElement("div",{class:this.getClassNames("-navigation"),html:this.buildNavigation(this.options.navigation)})),i.dropdown.getInnerElement().addEvent("mousedown",n.stopPropagation).addEvent("click",n.stopPropagation).addContent({tag:"div",class:this.getClassNames("-selector"),html:this.buildContent()},i.navigation),i.dropdown.inject(s.dropdownContainer||i.container)}i.dropdown&&i.dropdown.toggle(e)},onClick:function(){this.setDelayed("debounced-toggle",this.toggle,1)},onOpen:function(){this.elements.container.addClassName("open")},onClose:function(){this.elements.container&&this.elements.container.removeClassName("open")},onNavigationClick:function(t,e){this.setValue(e.value)}});return t.namespace("Controls/Picker",r,t)}.apply(e,i))||(t.exports=s)},function(t,e,n){(function(n){var i;void 0===(i=function(){"use strict";if(void 0!==n){n.setOptions({credits:{enabled:!1},chart:{borderRadius:0},global:{useUTC:!1}});var t=0;return n.wrap(n.SVGElement.prototype,"fillSetter",function(e,n,i,s){var o,a;if(!n||!n.pattern||"fill"!==i)return e.call(this,n,i,s);o="highcharts-pattern-"+t,t+=1,a=this.renderer.createElement("pattern").attr({id:o,patternUnits:"userSpaceOnUse",width:n.width,height:n.height}).add(this.renderer.defs),this.renderer.createElement("rect").attr({style:"fill: "+n.pattern,height:"2",width:"1"}).add(a),s.setAttribute(i,"url("+this.renderer.url+"#"+o+")")}),n}}.apply(e,[]))||(t.exports=i)}).call(this,n(375))},function(t,e,n){var i;void 0===(i=function(){
/*! @source http://purl.eligrey.com/github/FileSaver.js/blob/master/FileSaver.js */
var t=t||function(t){"use strict";if(!(void 0===t||"undefined"!=typeof navigator&&/MSIE [1-9]\./.test(navigator.userAgent))){var e=t.document,n=function(){return t.URL||t.webkitURL||t},i=e.createElementNS("http://www.w3.org/1999/xhtml","a"),s="download"in i,o=/constructor/i.test(t.HTMLElement)||t.safari,a=/CriOS\/[\d]+/.test(navigator.userAgent),r=function(e){(t.setImmediate||t.setTimeout)(function(){throw e},0)},l=function(t){setTimeout(function(){"string"==typeof t?n().revokeObjectURL(t):t.remove()},4e4)},c=function(t){return/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(t.type)?new Blob([String.fromCharCode(65279),t],{type:t.type}):t},u=function(e,u,h){h||(e=c(e));var d,p=this,m="application/octet-stream"===e.type,f=function(){!function(t,e,n){for(var i=(e=[].concat(e)).length;i--;){var s=t["on"+e[i]];if("function"==typeof s)try{s.call(t,n||t)}catch(t){r(t)}}}(p,"writestart progress write writeend".split(" "))};if(p.readyState=p.INIT,s)return d=n().createObjectURL(e),void setTimeout(function(){var t,e;i.href=d,i.download=u,t=i,e=new MouseEvent("click"),t.dispatchEvent(e),f(),l(d),p.readyState=p.DONE});!function(){if((a||m&&o)&&t.FileReader){var i=new FileReader;return i.onloadend=function(){var e=a?i.result:i.result.replace(/^data:[^;]*;/,"data:attachment/file;");t.open(e,"_blank")||(t.location.href=e),e=void 0,p.readyState=p.DONE,f()},i.readAsDataURL(e),void(p.readyState=p.INIT)}d||(d=n().createObjectURL(e)),m?t.location.href=d:t.open(d,"_blank")||(t.location.href=d);p.readyState=p.DONE,f(),l(d)}()},h=u.prototype;return"undefined"!=typeof navigator&&navigator.msSaveOrOpenBlob?function(t,e,n){return e=e||t.name||"download",n||(t=c(t)),navigator.msSaveOrOpenBlob(t,e)}:(h.abort=function(){},h.readyState=h.INIT=0,h.WRITING=1,h.DONE=2,h.error=h.onwritestart=h.onprogress=h.onwrite=h.onabort=h.onerror=h.onwriteend=null,function(t,e,n){return new u(t,e||t.name||"download",n)})}}("undefined"!=typeof self&&self||"undefined"!=typeof window&&window||this.content);return t}.call(e,n,e,t))||(t.exports=i)},function(t,e,n){var i=n(100);t.exports=Object("z").propertyIsEnumerable(0)?Object:function(t){return"String"==i(t)?t.split(""):Object(t)}},function(t,e){e.f={}.propertyIsEnumerable},function(t,e,n){var i=n(100),s=n(37)("toStringTag"),o="Arguments"==i(function(){return arguments}());t.exports=function(t){var e,n,a;return void 0===t?"Undefined":null===t?"Null":"string"==typeof(n=function(t,e){try{return t[e]}catch(t){}}(e=Object(t),s))?n:o?i(e):"Object"==(a=i(e))&&"function"==typeof e.callee?"Arguments":a}},function(t,e,n){var i=n(30),s=n(90),o=n(37)("species");t.exports=function(t,e){var n,a=i(t).constructor;return void 0===a||null==(n=i(a)[o])?e:s(n)}},function(t,e,n){var i,s;i=[n(1),n(9)],void 0===(s=function(t,e){"use strict";var n=e.extend({debugMode:!1,setDebugMode:function(t){return this.debugMode=!0===t||"true"===t,this},log:function(e){return!0===this.debugMode&&t.log(e),this}});return t.namespace("Debug",n,e)}.apply(e,i))||(t.exports=s)},function(t,e,n){var i,s;i=[n(1),n(13),n(9)],void 0===(s=function(t,e,n){"use strict";var i=t.Class.extend({Binding:null,bindings:null,shouldPropagate:!0,active:!0,dispatching:0,init:function(){this.bindings=[]},registerListener:function(e,n,i,s){if(!(t.is(e,"function")||t.is(e,"object")&&t.is(e.handleEvent,"function")))throw new Error("listener is a required param of add() and addOnce() and should be a Function or an object implementing the EventListener interface.");var o,a;if(o=this.indexOfListener(e,i),a=this.bindings[o]){if(a.isOnce!==n)throw new Error("You cannot add"+(n?"":"Once")+"() then add"+(n?"Once":"")+"() the same listener without removing the relationship first.")}else a=new this.Binding(this,e,n,i,s),this.addBinding(a);return a},addBinding:function(t){var e=this.bindings,n=e.length;do{--n}while(e[n]&&t.priority<=e[n].priority);e.splice(n+1,0,t)},indexOfListener:function(t,e){for(var n=this.bindings,i=n.length;i--;)if(n[i].listener===t&&(void 0===e||n[i].context===e))return i;return-1},add:function(t,e,n){return this.registerListener(t,!1,e,n)},addOnce:function(t,e,n){return this.registerListener(t,!0,e,n)},remove:function(e,n){var i,s;if(!(t.is(e,"function")||t.is(e,"object")&&t.is(e.handleEvent,"function")))throw new Error("listener is a required param of remove() and should be a Function or an object implementing the EventListener interface.");if(-1!==(i=this.indexOfListener(e,n)))if(s=this.bindings[i],this.dispatching&&!s.isOnce){var o=this.bindings.indexOf(s);-1!==o&&this.bindings.splice(o,1)}else s.destroy();return e},removeAll:function(t){var e,n=this.bindings,i=n.length;if(t)for(;i--;)(e=n[i]).context===t&&e.destroy();else{for(;i--;)n[i].destroy();n.length=0}},getNumListeners:function(){return this.bindings.length},getListeners:function(){return this.bindings.map(function(t){return t.listener})},halt:function(){this.shouldPropagate=!1},dispatch:function(t,n){var i,s;if(this.active){t=e.toArray(t),s=this.bindings.slice(),this.shouldPropagate=!0,this.dispatching++;try{for(i=s.length-1;i>=0&&!1!==s[i].execute(t,n)&&this.shouldPropagate;i--);}finally{if(this.dispatching--,this.bindings)for(i=0;i<s.length;i++)this.bindings.indexOf(s[i])<0&&s[i].destroy()}}},dispose:function(){this.removeAll(),this.active=!1,delete this.bindings},toString:function(){return"[Dispatcher active: "+this.active+" numListeners: "+this.getNumListeners()+"]"}});return i.Binding=i.prototype.Binding=n.extend({listener:null,isOnce:!1,context:null,dispatcher:null,priority:0,active:!0,init:function(t,e,n,i,s){this.listener=e,this.isOnce=n,this.context=i,this.dispatcher=t,this.priority=s||0},execute:function(e,n){var i,s=this.listener,o=t.is(this.context)?this.context:n;return this.active&&(this.isOnce&&this.detach(),i="function"==typeof s.handleEvent?s.handleEvent.apply(void 0===o?s:o,e||[]):s.apply(o,e||[])),i},detach:function(){return this.dispatcher&&this.dispatcher.remove(this.listener,this.context),this.listener},getListener:function(){return this.listener},dispose:function(){this.destroy()},destroy:function(){var t,e=this.dispatcher;e&&(t=e.bindings.indexOf(this),this.active=!1,-1!==t&&e.bindings.splice(t,1),delete this.dispatcher),delete this.isOnce,delete this.listener,delete this.context},toString:function(){return"[Dispatcher.Binding isOnce: "+this.isOnce+", active: "+this.active+"]"}}),t.namespace("Dispatcher",i,t)}.apply(e,i))||(t.exports=s)},function(t,e,n){"use strict";var i;void 0===(i=function(){var t=[],e=!1;return{trigger:function(){e||(e=!0,t.invoke("call"),t.length=0)},addCallback:function(n){e?n():t.push(n)}}}.apply(e,[]))||(t.exports=i)},function(t,e,n){"use strict";var i,s;i=[n(13),n(4),n(21)],void 0===(s=function(t,e,n){function i(t,n,i){var s,o=0,a=n/t.reduce(function(t,e){return t+e},0);for(s=0;s<t.length-1;s+=1)o+=t[s]*=a,i&&(t[s]=e.round(t[s],i));t[t.length-1]=i?e.round(n-o,i):n-o}var s={classPrefix:"flexilayout",modelsBynumCols:{1:["0"],2:["0"],3:["0","1","2"],4:["0","1","2","3","4","5","6"]},instructionsByModel:{1:{0:null},2:{0:[0,1]},3:{0:[0,1,2],1:[1,2],2:[0,1]},4:{0:[0,1,2,3],1:[1,2,3],2:[1,2,3],3:[0,1,2],4:[1,2,3],5:[1,2],6:[[0,1],[2,3]]}},px2percent:function(e){var s,o,a=n.getFocused().dataObj.layout;switch(e=t.toArray(e),a){case"2-0":i(e,s=98.8,2);break;case"3-0":i(e,s=97.65,2);break;case"4-0":i(e,s=96.6,2);break;case"3-1":s=98,e[0]=0,i(e,s,2),e[0]=1;break;case"4-2":s=97,e[0]=0,i(e,s,2),e[0]=1;break;case"3-2":s=98,e[2]=0,i(e,s,2),e[2]=1;break;case"4-4":case"4-1":s=98.9,o=e.slice(2),e[2]=e[3]=0,i(e,s,2),i(o,e[0]-1,2),e[2]=o[0],e[3]=o[1];break;case"4-3":s=97,e[3]=0,i(e,s,2),e[3]=1;break;case"4-5":s=98,e[0]=e[3]=0,i(e,s,2),e[0]=e[3]=1;break;case"4-6":s=98.6,o=e.slice(2),e[2]=e[3]=0,i(e,s,2),i(o,s,2),e[2]=o[0],e[3]=o[1];break;default:i(e,s=99,2)}return e},getModelName:function(t,e){return(e||App.Columns.columnCount())+"-"+(t||0)},getClassName:function(t,e){return s.classPrefix+"-"+s.getModelName(t,e)},update:function(t){void 0===t&&(t=s.getModelName()),n.getFocused().dataObj.layout=t,App.Columns.set("layout",t).resetLayout().saveLayout(!0)},isDefault:function(){return"-0"===n.getFocused().dataObj.layout.slice(-2,n.getFocused().dataObj.layout.length)}};return App.FlexiLayout=s,s}.apply(e,i))||(t.exports=s)},function(t,e,n){"use strict";var i,s;i=[n(360),n(673),n(674),n(675),n(676),n(677),n(678),n(679),n(680),n(681),n(682),n(683),n(684),n(685),n(686),n(687),n(688),n(689),n(690),n(691),n(692),n(693),n(694)],void 0===(s=function(t,e,n,i,s,o,a,r,l,c,u,h,d,p,m,f,g,v,b,y,w,x,C){var _={Spreadsheet:t,Corpus:e,Twitter_Trends:n,Facebook_Page_Trends:i,Linkedinpage:s,Youtubechannel:o,Instagram:a,Google_Analytics:r,Youtubeanalytics:l,Googleadwords:c,Twitterads:u,Facebookinsights:h,Linkedinads:d,Googlespreadsheet:p,Dropboxspreadsheet:m,Weather:f,Yahoofinance:g,Potion:v,Sharedlibrary:b,Vimeo:y,Adobeanalytics:w,Facebookads:x,Onedrivespreadsheet:C},S={factory:function(t){if(!_.hasOwnProperty(t.type))throw new Error("Source type "+t.type+" not found");return new(0,_[t.type])(t)},getTypes:function(){return _}};return S}.apply(e,i))||(t.exports=s)},,function(t,e,n){"use strict";var i,s;i=[n(1),n(19),n(293),n(58),n(15),n(3),n(2),n(17),n(21),n(4),n(148),n(87),n(192),n(6),n(218),n(159),n(373),n(717)],void 0===(s=function(t,e,n,i,s,o,a,r,l,c,u,h,d,p,m,f,g,v){var b=n.extend({init:function(t){this._parent(t),u.registerResizeEvent(this.resize.bind(this,!0))},hideAllTabsPopup:function(){this.allTabsPopup&&this.allTabsPopup.hide()},showAllTabsPopup:function(){this.allTabsPopup&&this.allTabsPopup.show()},getAllTabsPopupScroller:function(){if(this.allTabsPopup)return this.allTabsPopup.scroller},onOverflowChange:function(t){if(t.overflow&&!this.allTabsPopup){var n=document.body.getElement("#menuTabs");this.allTabsPopup=new m(n,{scroller:!0,scrollerOptions:{width:250},events:{onShow:this.onShowAllTabsPopup.bind(this)}}),e.Features.touchEvents?(this.elements.container.addEvent("touchstart",this.addButtonPressedState.bind(this)),this.elements.container.addEvent("touchend",this.addButtonPressedState.bind(this))):(n.addEvent("mouseenter",function(){this.allTabsPopup.show()}.bind(this)),this.allTabsPopup.element.addEvent("mouseleave",function(){this.allTabsPopup.hide()}.bind(this)))}},addNewTab:function(){l.createNewTab({switchTo:!0},function(t,e){if(a.isAllowed("tab_create_wizard")){App.UI.Options.closeActive();var n=new App.UI.Options.WidgetView({withWizard:!0,tabId:e.id});document.body.getElement("#tabOptions").empty().addContent(n.getContent()),n.open()}this.invalidateAllTabsPopup()}.bind(this))},addTabWithData:function(t,e){var n=new v(this,t);return this.addTab(n,e),n},confirmRemoveTab:function(){var t,e=l.getAll(),n=e.length,i=null;function s(t){return!["search","private"].includes(t.getType())&&t.isMovable()}for(t=0;t<n;t+=1)if(s(e[t])&&!e[t].dataObj.readOnly){if(e[t]===l.getFocused())break;i=e[t]}if(!i)for(t+=1;t<n;t+=1)if(s(e[t])){i=e[t];break}return!(!i&&!l.hasLockedTabs())||(window.alert(_("You cannot delete the only tab.")),!1)},deleteTab:function(){var t,e=this.selectedTab;t=e.dataObj.id,d.sendEvent({name:"com.netvibes.dashboard.{0}.tab.{1}.delete".format(a.Page.id,e.dataObj.id),payload:{type:"tab",value:{title:e.dataObj.title}}}),p.saveUserTabDelete({tabId:t}).done(this._removeTabCallback.bind(this,t)),e.closeTabOptions(),this.invalidateAllTabsPopup()},_removeTabCallback:function(t){var e,n,i=this.getTab(t);r.getByTab(t).forEach(function(t){t.remove(!1)}),n=this.tabs.indexOf(i),this.removeTab(i),(e=this.getTab(n))||(e=this.tabs.slice(-1).pop()),this.selectTab(e)},buildContainer:function(){this._parent(),this.options.scroller={className:"",scrollButtonClassName:"btn-scroll-tabs",itemSelector:"li:not(.without-matching-label)",nextButton:function(e){var n="";return a.isAllowed("dashboard_add_tab")&&(n=t.createElement("a",{id:"newTab",class:"btn btn-newtab",events:{click:this.addNewTab.bind(this)}})),t.createElement("div",{class:"nv-tabs-right",html:[t.createElement("a",{class:"btn btn-scroll-next btn-scroll-tabs"}),n?t.createElement("span",{class:"btn-separator"}):"",t.createElement("div",{id:"dragOpenMenuTabs",html:[n,t.createElement("span",{class:"btn-separator"}),t.createElement("a",{id:"menuTabs",class:"btn btn-menu-alltabs"})]})]}).inject(e.getParent()).getChildren()[0]}.bind(this),previousButton:function(e){return t.createElement("div",{class:"nv-tabs-left",html:'<a class="btn btn-scroll-prev btn-scroll-tabs">'}).inject(e.getParent()).getChildren()[0]}}},resize:function(t){this.onResize(),t&&this.allTabsPopup&&this.allTabsPopup.hide()},initPopupReorderTabs:function(){new i.Move({touchDelay:500,container:document.body.getElement("#menuTabs").getElement(".uwa-scroller"),root:document.body.getElement("#menuTabs").getElement("ul"),delegate:"li *",fixed:function(t,e){var n=s.getClosest.call(e,"li"),i=l.getById(n.getAttribute("data-tabId"));return!i||!i.isMovable()},handles:function(e){e.target=s.getClosest.call(e.target,"li"),e.previous=e.target.previousSibling,e.placeholder=t.createElement("li",{class:"placeholder",html:"&nbsp;",styles:{width:e.target.getSize().width}}).inject(e.target,"after");var n=e.target.getPosition(e.target.getOffsetParent());return e.target.setStyles({left:n.x+"px",top:n.y+"px",width:"100%"}).addClassName("dragged")},move:function(t){t.limited.top?this.allTabsPopup.scroller.autoScrollPrevious():t.limited.bottom?this.allTabsPopup.scroller.autoScrollNext():this.allTabsPopup.scroller.stopScroll()}.bind(this),enter:function(t){return t.placeholder},stop:function(t){if(t.placeholder.getParent()&&t.target.inject(t.placeholder,"after"),t.placeholder.destroy(),t.target.removeClassName("dragged").setStyles({top:null,left:null}),this.allTabsPopup.scroller.stopScroll(),t.previous!==t.target.previousSibling){var e=t.zone.getChildren().indexOf(t.target);this.moveTab(h.get(t.target,"tab"),e),l.saveOrder().done()}}.bind(this)})},getAllTabsPopupHeight:function(){var t=document.body.getElement("#menuTabs");return e.getSize().height-t.getBoundingClientRect().bottom},onShowAllTabsPopup:function(){var e,n,i=this.allTabsPopup.getContentElement().getElement("ul");i||(i=t.createElement("ul").addEvent("click",this.onAllTabsPopupClick.bind(this)).inject(this.allTabsPopup.getContentElement()),e=document.body.getElement("#menuTabs").getElement(".uwa-scroller"),this.allTabsPopup.scroller.setOptions({previousButton:t.createElement("div",{id:"menuTabsScrollPrev"}).inject(e),nextButton:t.createElement("div",{id:"menuTabsScrollNext"}).inject(e)}),this.initPopupReorderTabs()),this._buildTabsListItems(),this.allTabsPopup.scroller.scroller.setSize({height:this.getAllTabsPopupHeight()}),this.allTabsPopup.scroller.scrollHead(1),(n=this.allTabsPopup.scroller.scroller).elements.scroller.setAttribute("overflow",n.hasOverflow("y")?"true":"false")},onAllTabsPopupClick:function(t){var e=o.getElement(t).getClosest("li");e&&(this.allTabsPopup.hide(),this.selectTab(e.getAttribute("data-tabId"))),o.stop(t)},syncAllTabsPopup:function(){this.allTabsPopup&&this.allTabsPopup.shown&&this.allTabsPopup.toElement().getElements("li").forEach(function(t){var e=h.get(t,"tab");e&&(t.toggleClassName("tab-visible",this.isTabVisible(e)),t.toggleClassName("selected",e.isSelected()),t.toggleClassName("without-matching-label",!l.hasMatchingLabels(e.dataObj.id)))},this)},invalidateAllTabsPopup:function(){this.elements.container.getElements("#menuTabs li").invoke("destroy"),this.allTabsPopup&&this.allTabsPopup.shown&&this._buildTabsListItems()},handleEvent:function(t){var e=this.getTabFromEvent(t),n=o.getElement(t);if(e)if(e===this.selectedTab){if(f.isOpen())return void f.close();if(n.hasClassName("unread")){if(e.canMarkAllAsRead()){if(!window.confirm(_("Really mark all rss items on this tab as read?")))return!1;e.markAllAsRead()}}else if(n.hasClassName("title"))e.rename();else if(n.hasClassName("actions-window-close")&&this.confirmRemoveTab())this.deleteTab();else if(!e.isReadOnly()&&!e.tabElement().hasClassName("editing")){var i=document.body.getElement("#tabOptions");App.UI.Options.closeActive(i)||this.showTabOptions()}}else this.selectTab(e)},onSelectTab:function(t,e){var n=a.Page.openTabId;a.Page.openTabId=this.selectedTab.getId(),e&&e.hideModules(),n!==this.selectedTab.getId()&&p.myDashboardOpenTab({tabId:this.selectedTab.getId()}).done(),t.showModules(),this.syncAllTabsPopup(),g.update(),App.UI.Options.closeActive()},addButtonPressedState:function(t){t.target.hasClassName("btn")&&t.target.toggleClassName("pressed","touchstart"===t.type)},showTabOptions:function(){var t=document.body.getElement("#tabOptions"),e=new App.UI.Options.WidgetView;t.empty().addContent(e),e.open()},_buildTabsListItems:function(){var t,e,n,i,s=this.allTabsPopup.getContentElement().getElement("ul");if(!s.getElement(">li"))for(n=0,i=this.tabs.length;n<i;n+=1)e=(t=this.tabs[n])._createTabElement().removeClassName("tab"),h.set(e,"tab",t),t.setUnreadElement(e.getElement(".unread"),t.getUnread()),s.grab(e);this.syncAllTabsPopup()}});App.updateWidgetViewUnreadCounters=c.debounce(function(){if(!a.Page.inSmartReaderView){var t=0;l.getAll().forEach(function(e){var n=e.getId(),i=0;function s(e){!0!==e&&(t+=parseInt(e,10)),i=c.counterAdd(i,e)}s(l.getItemList("streams",n).getTotalFlagCount("unread")),r.getByTab(n).filter(function(t){return!t.isProducer()}).forEach(function(t){s(t.unread||0)}),e.setUnread(i)}),document.title=t>0?a.Page.title+" ("+c.formatCounterNumber(t)+")":a.Page.title}},5);var y=b.singleton({uninitializedCalls:"throw",init:function(e,n){this._parent({element:e,classNames:{tabList:"tabs"},tabSelector:".tab",tabScroller:!0,noContent:!0}),n.forEach(function(e,n){var i=e.title||"",s=t.extend({sort:n,icon:"",columnSizes:[]},e);s.title=i,e.type&&(s.type=e.type,s.keyword=e.keyword,s.engine=e.engine),this.addTab(new v(this,t.clone(s)))},this)}});return App.UI||(App.UI={}),App.UI.DashboardTabView=y,l._DashboardTabView=y,y}.apply(e,i))||(t.exports=s)},function(t,e,n){"use strict";var i,s;i=[n(1),n(13),n(19),n(24),n(10),n(108),n(23),n(95),n(2),n(6),n(27),n(4),n(52),n(151),n(728),n(729),n(736),n(737),n(738),n(739)],void 0===(s=function(t,e,n,i,s,o,a,r,l,c,u,h,d,p,m,f,g,v,b,y){var w=t.createElement,x={brand:[{type:"secondary",label:_("Competitor")},{type:"influencer",label:_("Influencer")}],topic:[{type:"secondary",label:_("Comparative Topic")},{type:"influencer",label:_("Influencer")}],market:[{type:"secondary",label:_("Brand")},{type:"influencer",label:_("Influencer")}],event:[{type:"secondary",label:_("Organizer")},{type:"thirdly",label:_("Exhibitor")},{type:"influencer",label:_("Speaker")}],corpus:[{type:"secondary",label:_("Brand")},{type:"influencer",label:_("Influencer")}]},C=s.extend(i,{currentStep:null,init:function(t){this._parent(t),this.initShortcuts(),document.body.addContent(w("img",{src:"//www.googleadservices.com/pagead/conversion/932767638/?label=qvBVCM_CgmEQls_jvAM&amp;guid=ON&amp;script=0",width:"1",height:"1",style:{"border-style":"none"}})),document.body.addContent(w("iframe",{src:"https://5182031.fls.doubleclick.net/activityi;src=5182031;type=sales;cat=a9o28lla;qty=[Quantity];cost=[Revenue];dc_lat=;dc_rdid=;tag_for_child_directed_treatment=;ord=[OrderID]?",width:"1",height:"1",frameborder:"0",style:{display:"none"}})),this.steps={},this.buildWizard(),this.options.reset?this.changeStep():this.changeStep(this.getType()),document.body.addClassName("nv-agency-opened"),d.pushFocus("agency-wizard")},initShortcuts:function(){d.addShortcuts({"agency-wizard":{}})},getType:function(){return this.options.data&&this.options.data.type},setData:function(t){this.options.data=t},buildWizard:function(){var t=this.options.populateTab||this.options.closeable;this.elements.steps=w("div",{class:"nv-agency-steps"}),this.elements.container=w("div",{class:"nv-agency uwa-font-aa"}).addContent(this.elements.header=w("div",{class:"nv-agency-header"}).addContent(w("div",{class:"wrapper"}).addContent(w("span",{class:"nv-agency-header-name",text:_("Dashboard wizardry")}),this.elements.headerStep=w("span",{class:"nv-agency-header-step"}),t&&{tag:"div",class:"uwa-icon uwa-icon-only delete nv-close-icon nv-agency-header-close",events:{click:this.close.bind(this)}})),this.stepsScroller=new a({element:this.elements.steps,shadows:!0}))},close:function(){d.popFocus("agency-wizard"),document.body.removeClassName("nv-agency-opened"),this.dispatchEvent("onClose")},changeStep:function(t){var e=this.currentStep;if(!e)return this.initSteps(),t=t||this.getStepIdByNumber(1),this.currentStep=this.steps[t],void this.openStep();t=t||this.getStepIdByNumber(1),this.currentStep=this.steps[t],e.close(!0)},initSteps:function(){var t={onWizardrySelected:this.onWizardrySelected.bind(this),onPreviousStep:this.onPreviousStep.bind(this),onNextStep:this.onNextStep.bind(this),onStepClosed:this.openStep.bind(this),onFinish:this.onFinish.bind(this)};"secondary"!==this.options.subjectType&&"influencer"!==this.options.subjectType&&"thirdly"!==this.options.subjectType?this.initMultipleSteps(t):this.initLoneStep(t)},initLoneStep:function(t){var e,n=this.getType(),i=x[n].detect(function(t){return t.type===this.options.subjectType},this);"brand"===n?e=f:"topic"===n?e=g:"market"===n?e=v:"event"===n&&(e=b),this.steps[n]=new e({name:n,subjectType:this.options.subjectType,first:!0,last:!0,title:_("Define {0}").format(i.label),submitLabel:_("Tab it!")}),this.steps[n].addEvents(t),this.stepsScroller.getInnerElement().addContent(this.steps[n])},initMultipleSteps:function(t){var n={index:new m({name:"index",first:!0,reset:this.options.reset,title:this.options.reset?_("1 - Restart your Dashboard"):_("1 - Select wizardry type")}),brand:new f({name:"brand",title:_("2 - Define Brand/Competitors/Influencers")}),topic:new g({name:"topic",title:_("2 - Define Primary & Comparative Topics/Influencers")}),market:new v({name:"market",last:!0,title:_("2 - Define Corpus/Brands/Influencers")}),event:new b({name:"event",title:_("2 - Define Event/Organizer/Exhibitors/Speakers")}),corpus:new y({name:"corpus",last:!0,title:_("3 - Define corpus")})},i=e.toArray(n);e.toArray(i).invoke("addEvents",t),this.wizardSteps={brand:{index:n.index,brand:n.brand,corpus:n.corpus},topic:{index:n.index,topic:n.topic,corpus:n.corpus},market:{index:n.index,market:n.market},event:{index:n.index,event:n.event,corpus:n.corpus}},this.buildWizardSteps(this.getType()||"brand")},buildWizardSteps:function(t){if(this.currentWizardId!==t){this.stepsScroller.getInnerElement().empty(),this.currentWizardId=t,this.steps=this.wizardSteps[t];var n=e.toArray(this.steps);this.stepsScroller.getInnerElement().addContent(n)}},openStep:function(){var t=this.getStepsLength(),e=this.currentStep.getName(),n=this.getStepNumberById(e),i="index"!==e;this.steps[e].open(i),this.elements.container.toggleClassName("dark-grey","index"!==e),t>1&&this.elements.headerStep.setText(" • "+_("Step {0} of {1}").format(n,t))},getStepIdByNumber:function(t){return Object.keys(this.steps)[t-1]},getStepNumberById:function(t){return Object.keys(this.steps).indexOf(t)+1},getStepsLength:function(){return Object.keys(this.steps).length},onWizardrySelected:function(t){l.isAllowed("wizardry_type_edit",this.options.pageId)&&"reset"===t&&(this.options.reset=!1,this.currentStep=!1,t="");var n="alter"===t?this.options.data:null;t=this.options.reset&&this.options.data?this.options.data.type:t,this.buildWizardSteps(t),this.changeStep(t),e.toArray(this.steps).forEach(function(t){t.setData(n)})},onPreviousStep:function(t){var e=t.currentStep,n=this.getStepNumberById(e),i=this.getStepIdByNumber(n-1);this.changeStep(i)},onNextStep:function(t){if(!this.currentStep.showNextSubstep()){var e=t.currentStep,n=this.getStepNumberById(e),i=this.getStepIdByNumber(n+1);this.changeStep(i)}},onFinish:function(){if(!this.currentStep.showNextSubstep()){var t,n=this.options.populateTab,i={type:this.currentWizardId},s=e.toArray(this.steps);this.currentStep.setConfirmationState("waiting"),s.forEach(function(t){Object.assign(i,t.getData())}),n?(Object.assign(i,{tabId:n}),t=c.wizardryUpdateConfig(i)):t=c.wizardryApplyConfig(i),t.done(function(){this.currentStep.setConfirmationState("success"),this.setDelayed("success",function(){window.location="/dashboard"},3e3)}.bind(this),function(t){this.currentStep.setConfirmationState(),u.displayError(t)}.bind(this))}}});function S(t,e){t=t||{};var i=new o({className:"nv-agency-lightbox",closeable:!1});e||(e=document.body),i.inject(e);var s=n.getSize().height-e.getBoundingClientRect().top;i.getContent().setStyle("height",s);var a=new C(t);a.addEvent("onClose",i.close.bind(i)),i.setContent(a),i.open()}function E(){return!!l.NPD.wizardryConfig&&(!!l.NPD.wizardryConfig.type&&Object.keys(l.NPD.wizardryConfig).length>1)}return C.isAvailable=function(){return!l.Page.isPremiumCopy&&l.isAllowed("wizardry")&&!l.getActiveProduct({type:"TYPE_INDIVIDUAL"})},C.launchIfNeeded=function(){var t=h.getVar("wizardry");["index","brand","topic","market","event"].includes(t)||(t=!1);var e=l.getProduct({type:"TYPE_AGENCY"});if(e&&(!t||e.active||e.elligibleForTrial||(window.location=l.getWelcomeURL("wizardry")),"STATUS_FINISHED"!==e.status&&C.isAvailable()&&!E())){var n;if(e.elligibleForTrial){if(!t)return!1;n={data:{type:"index"!==t?t:""}},C.createProduct()}else{var i=l.NPD.wizardryConfig;t&&"index"!==t&&!i.type&&(i.type=t),n={data:i}}return S(n),!0}},C.createProduct=function(){c.wizardryCreateProduct().done()},C.isTrialAvailable=function(){return l.getProduct({type:"TYPE_AGENCY",elligibleForTrial:!0,status:"STATUS_AVAILABLE"})&&!p.hasMessageBeenDisplayed("wizardryUncompletedTrialModal")},C.populateTab=function(t,e){if(!t)throw new Error("The tab id is required");if(!E())throw new Error("Wizardry isn't configured yet");S({data:l.NPD.wizardryConfig,subjectType:e,populateTab:t})},C.reset=function(t){S({pageId:(t=t||{}).pageId,reset:!0,closeable:!0,data:l.NPD.wizardryConfig})},C.getTabSubjectTypes=function(){if(!E())throw new Error("Wizardry isn't configured yet");return x[l.NPD.wizardryConfig.type]},C}.apply(e,i))||(t.exports=s)},function(t,e,n){"use strict";var i,s;i=[n(25),n(13),n(18),n(16),n(2),n(733)],void 0===(s=function(t,e,n,i,s,o){var a=["service","connect","wid"];return{request:function(r,l){var c,u,h,d={onComplete:(l=l||{}).onComplete||function(){},onFailure:l.onFailure||function(){},onTimeout:l.onTimeout||function(){},onCancel:l.onCancel||function(){}};if(s.isIn3DDashboard()){"gplus"===o.get3ddService(l.service)&&(l.service="gmail");var p=function(t){var e={method:"GET"};return Object.keys(t).filter(function(n){("method"===n||a.indexOf(n)>=0)&&(e[n]=t[n])}),e}(l);l.data&&p.method&&"GET"===p.method.toUpperCase()&&(r+=(r.indexOf("?")>-1?"&":"?")+e.toQueryString(l.data),delete l.data),u=n.format("{0}{1}/proxy/oauth?{2}",s.Config.urls.startpage,s.Config.mount_points.api,e.toQueryString(Object.assign(p,{url:r}))),h=Object.assign(function(t){var e={method:"GET"};return Object.keys(t).filter(function(n){"method"!==n&&-1!==a.indexOf(n)||(e[n]=t[n])}),e}(l),{proxy:"passport"})}else h=l,l.proxy="oauth",u=r;var m=new i(function(e,n){h.onComplete=function(){d.onComplete.apply(null,arguments),e.apply(null,arguments)},["onFailure","onTimeout","onCancel"].forEach(function(t){h[t]=function(){d[t].apply(null,arguments),n.apply(null,arguments)}}),c=t.request(u,h)});return m.cancel=c.cancel,m}}}.apply(e,i))||(t.exports=s)},function(t,e,n){"use strict";var i,s;i=[n(20),n(1),n(9),n(8),n(23),n(117),n(44),n(35),n(2),n(84),n(380),n(743),n(744),n(745)],void 0===(s=function(t,e,n,i,s,o,a,r,l,c,u,h,d,p){var m,f={SocialNetworks:u,ByEmail:h,ToPage:d,GrabLink:p},g=n.singleton({titles:{widget:_("Share widget"),article:_("Share article"),tab:_("Share tab"),locked:_("Share locked tab"),private:_("Share private tab"),page:_("Share dashboard"),external:_("Share article")},elements:{},item:null,init:function(){var t=_("Share settings");this.container=e.createElement("div",{class:"nv-share-content"}).setContent(this.elements.header=e.createElement("div",{class:"nv-share-header box"}),new s({element:this.elements.scroller=e.createElement("div").addContent(this.elements.core=e.createElement("div",{class:"nv-share-core box"})),shadows:!0}),this.elements.footer=e.createElement("div",{class:"nv-share-footer box"}).addContent(l.User.isRegistered&&l.isAllowed("share_edit")?new i.Button({className:"dark-grey iconl cogwheel btn-settings",value:t,events:{onClick:function(){window.location.href="/account/share"}}}):"",new i.Button({className:"dark-grey btn-cancel",value:_("Cancel"),events:{onClick:this.close.bind(this)}})))},close:function(){this.modal.close()},sanitizeItem:function(t){return t.title=t.title.stripTags(),t.preconfigURLS={},t.srcTitle&&(t.srcTitle=t.srcTitle.stripTags()),delete t.originalItem,t},open:function(t){!t.type||"tab"!==t.type&&"locked"!==t.type||r.log("share","openFromTab"),this.item=this.sanitizeItem(t),this.item.type||(this.item.type="article"),this.buildShareHeader(),this.modal||(this.modal=new c({exclusive:!1,className:"nv-share",fullscreenable:!0,fullScreenIcon:"q",title:this.titles[this.item.type],size:{width:600,margin:80},events:{onClose:function(){this.container.remove(),this.modal.destroy(),this.modal=null}.bind(this)}}),this.modal.setContent(this.container),document.body.addContent(this.modal)),this.buildShareCore()},buildShareHeader:function(){var t,n,i,s,o;n=[this.item.title.cut(55)||_("No title")],"tab"===this.item.type&&this.item.picture&&(i=this.getIcon(this.item.picture),n.unshift(i)),this.item.url&&(t=[{tag:"a",href:this.item.url,target:"_blank",html:n},{tag:"a",href:this.item.url,target:"_blank",class:"arrows",text:"H"}]),this.elements.header.setContent(e.createElement("div",{class:"title",html:[this.item.url?t:n]})),(s=this.item.date)&&!isNaN(s)&&(s=new Date(s),o=a.formatLocalizedDate(s)),this.item.srcTitle&&this.elements.header.addContent(e.createElement("div",{class:"subtitle",html:[o?o+" ":"",{tag:"span",text:"by"}," "+this.item.srcTitle]}))},getIcon:function(t){var n;return n=e.createElement("img"),o.setIconSrc(n,t),n},buildShareCore:function(){var t,e,n=g.getTabsConfig();(t=this.elements.core).empty(),e={container:t,item:this.item},n[this.item.type].tabs.forEach(function(t){(e.title=n[e.item.type].title,f[t])?new f[t](e).addEvent("toggleOpenClose",this.onToggleOpenCloseTab.bind(this)):console.log("Unknown class Share."+t)}.bind(this)),this.modal.setTitle(this.titles[this.item.type]),this.modal.refreshPosition(),this.onToggleOpenCloseTab(),this.modal.open()},onToggleOpenCloseTab:function(t){var e=this.modal.isFullScreen();this._closedHeight=this._closedHeight||this.elements.core.getSize().height;var n=e?"":this._closedHeight;if(t)return this.modal.changeSize({height:"full"}),void this.elements.scroller.setStyle("height","");this.modal.changeSize({height:!1}),this.elements.scroller.setStyle("height",n),this.modal.refreshPosition()}});return g.getTabsConfig=function(){if(!m){var t=l.Config.share_services||{};m={widget:{title:_("Share widget"),tabs:t.widget||[]},article:{title:_("Share article"),tabs:t.article||[]},tab:{title:_("Share tab"),tabs:t.tab||[]},locked:{title:_("Share locked tab"),tabs:t.locked||[]},private:{title:_("Share private tab"),tabs:t.private||[]},page:{title:_("Share dashboard"),tabs:t.page||[]},external:{title:_("Share article"),tabs:t.external||[]}}}return m},g.show=function(t){g.open(t)},App.Share=g,g}.apply(e,i))||(t.exports=s)},function(t,e,n){"use strict";var i,s;i=[n(1),n(18),n(3),n(10),n(8),n(59),n(196),n(82),n(11),n(36)],void 0===(s=function(t,e,n,i,s,o,a,r,l,c){var u=i.extend({name:"nv-date-range",options:{title:_("Period")},isAnyEnabled:function(){return Boolean(this.getOption("enableAny",!0))},isToInputEnabled:function(){return Boolean(this.getOption("enableTo",!0))},buildContent:function(){var e=this.elements,n=this,i=this.getOption("calendarOptions",{}),r={};e.periodSelectors=t.createElement("div",{class:"period-predefined",html:[new o({attributes:{"data-period":"custom"},value:_("Custom")}),{tag:"br"},new o({attributes:{"data-period":"-1day"},value:_("Today")}),{tag:"br"},new o({attributes:{"data-period":"-1week"},value:_("Last week")}),{tag:"br"},new o({attributes:{"data-period":"-1month"},value:_("Last month")}),{tag:"br"},new o({attributes:{"data-period":"-1year"},value:_("Last year")})]}),this.getOption("forceDateSelection")&&(r.readonly="readonly"),e.periodFrom=new s.Text({attributes:r,className:this.isToInputEnabled()?"":"hiddenToInput"}),e.periodTo=new s.Text({attributes:r}),e.periodAny=new s.Radio({className:"green",attributes:{id:"range-all",name:"period-any-selector"}}),e.periodDefine=new s.Radio({className:"green",attributes:{id:"range-define",name:"period-any-selector"}});var l=t.createElement("label",{tag:"label",text:_("Your retention"),for:"range-all"});t.createElement("label",{tag:"span",class:"uwa-icon uwa-icon-only tooltip"}).inject(l),e.allDefineChoices=t.createElement("div",{class:"all-define-selector",html:[{tag:"div",class:"all-selector",html:[e.periodAny,l]},{tag:"div",class:"define-selector",html:[e.periodDefine,{tag:"label",text:_("Define a period"),for:"range-define"}]}]}),e.calendar=new a(i).addEvent("onDateSelect",function(t){"periodFrom"===n.focusedDate?n.updateFromDate(c.formatDateForHumanQuery(t)):n.updateToDate(c.formatDateForHumanQuery(t)),n.selectFacet("custom"),n.dispatchEvent("onChangeRange",n.getRange())}).addEvent("onDateChange",function(){if(n.settedUp&&n.changeData(),"periodFrom"===n.focusedDate)e.calendar.setLimit({max:n.getCurrentDate("to")});else{var t=n.getCurrentDate("from");t&&t.setDate(t.getDate()+1),e.calendar.setLimit({min:t})}e.calendar.refreshLimit()}),this.isAnyEnabled()&&(e.periodOverlay=t.createElement("div",{class:"period-any-overlay"})),e.container=t.createElement("div",{class:this.getClassNames(),html:[this.options.title&&{tag:"h2",text:this.options.title},t.createElement("div",{class:"panel-section",html:[this.isAnyEnabled()?e.allDefineChoices:null,{class:"period-selector",html:[e.periodOverlay,e.periodSelectors,{tag:"div",class:"period-custom",html:[{tag:"div",class:"period-inputs",html:[{tag:"label",text:_("From")},e.periodFrom,this.isToInputEnabled()?{tag:"label",text:_("to")}:{},e.periodTo]},{tag:"div",class:"period-calendar",html:e.calendar}]}]}]})]}),this.isToInputEnabled()||this.elements.periodTo.hide(),e.periodOverlay&&e.periodOverlay.addEvent("click",this.onPeriodOverlayCLick.bind(this)),e.periodSelectors.addEvent("click",this.onPeriodSelectorsClick.bind(this)),e.periodFrom.addEvent("onKeyDown",this.changeData.bind(this)),e.periodTo.addEvent("onKeyDown",this.changeData.bind(this)),e.periodAny.addEvent("onChange",this.syncAny.bind(this)),e.periodDefine.addEvent("onChange",this.syncAny.bind(this)),this.addEvent("onInjected",this.setupForm.bind(this))},getContent:function(){return this.elements.container||this.buildContent(),this._parent()},setupForm:function(){this.settedUp||(this.isAnyEnabled()&&new r(this.elements.container.getElement(".tooltip"),_("No period defined. Results will start from the beginning of your Autosave period.")),this.elements.periodFrom.setValue(this.getFormatedDate("from")).addEvent("onClick",this.onInputDateClick.bind(this,"periodFrom")).addEvent("onChange",this.onInputDateChange.bind(this,"periodFrom")).getInputElement().addClassName("selected"),this.elements.periodTo.setValue(this.getFormatedDate("to")).addEvent("onClick",this.onInputDateClick.bind(this,"periodTo")).addEvent("onChange",this.onInputDateChange.bind(this,"periodTo")),this.getDateString("from")&&!c.isRetentionDate(this.getDateString("from"))?(this.updateFromDate(this.getFormatedDate("from")),this.updateToDate(this.getFormatedDate("to")),this.elements.periodDefine.check(),this.setPredefinedPeriod(this.getDateString("from").match(/-1(day|week|month|year)/)?this.getDateString("from"):"custom"),this.elements.calendar.setDate(this.getDate("from"))):(this.setPredefinedPeriod("-1month"),this.elements.periodAny.check()),this.syncAny(),this.settedUp=!0)},getDate:function(t){var e=this.getDateString(t);return e?c.parseDate(e):null},getFormatedDate:function(t){return this.getDateString(t)||"now"},getDateString:function(t){var e="from"===t||"to"===t?this.getOption(t):t;return e&&"now"!==e?e:""},syncAny:function(t){if(this.isAnyEnabled()){var e=this.elements.periodAny.isChecked();this.elements.container.toggleClassName("any",e),t&&(this.changeData(),this.dispatchEvent("onChangeRange",this.getRange()))}},setPredefinedPeriod:function(e){var n=new Date;n.setHours(0),n.setMinutes(0),n.setSeconds(0);var i=t.clone(n);if(this.selectFacet(e),this.focusedDate="periodFrom",this.elements.periodFrom.getInputElement().addClassName("selected"),this.elements.periodTo.getInputElement().removeClassName("selected"),"custom"!==e){switch(e){case"-1week":i.setDate(i.getDate()-7);break;case"-1month":i.setMonth(i.getMonth()-1);break;case"-1year":i.setYear(i.getFullYear()-1)}this.updateFromDate(e),this.updateToDate("now"),this.elements.calendar.setDate(i),this.dispatchEvent("onChangeRange",this.getRange())}},selectFacet:function(t){var e=this.elements.container.getElement(".period-predefined .selected");e&&e.removeClassName("selected"),this.elements.container.getElement('[data-period="'+t+'"]').toggleClassName("selected")},getCurrentDateValue:function(t){var n=this.elements.periodAny.isChecked(),i=this.elements["period"+e.capitalize(t)].getValue();return n?null:i},getCurrentDate:function(t){var e=this.getCurrentDateValue(t);return e?c.parseDate(e):null},changeData:function(){this.dispatchEvent("onDataChanged")},restore:function(t){var e=t["periodFrom"===this.focusedDate?"from":"to"];this.updateFromDate(this.getFormatedDate(t.from)),this.updateToDate(this.getFormatedDate(t.to)),this.elements.calendar.setDate(this.getDate(e))},updateFromDate:function(t){this.getCurrentDateValue("from")!==t&&(this.elements.periodFrom.setValue(t),this.elements.calendar.setDate(this.getCurrentDate("from")))},updateToDate:function(t){this.getCurrentDateValue("to")!==t&&(this.elements.periodTo.setValue(t),this.elements.calendar.setDate(this.getCurrentDate("to")))},setRange:function(t){return this.settedUp?(t.from&&this.updateFromDate(t.from),t.to&&this.updateToDate(t.to)):(t.from&&this.setOption("from",t.from),t.to&&this.setOption("to",t.to)),this},getRange:function(){return{from:this.getCurrentDateValue("from"),to:this.getCurrentDateValue("to")}},onPeriodOverlayCLick:function(){this.elements.periodDefine.check(),this.syncAny()},onPeriodSelectorsClick:function(t){var e=n.findElement(t,".uwa-tag");e&&this.setPredefinedPeriod(e.getAttribute("data-period"))},onInputDateClick:function(t){this.focusedDate=t,this.elements.container.getElement(".period-inputs .selected").removeClassName("selected"),this.elements[t].getInputElement().addClassName("selected"),this.elements.calendar.setDate("periodFrom"===t?this.getCurrentDate("from"):this.getCurrentDate("to"))},onInputDateChange:function(t){var e=this.elements[t],n=c.parseDate(e.getValue());this.setPredefinedPeriod("custom"),this.elements.calendar.setDate(n),this.dispatchEvent("onChangeRange",this.getRange())}});return u.PreactComponent=l.Abstract.extend({_mutateValue:function(t,e){if(this._parent(t,e))return!0;switch(t){case"from":return this._control.setRange({from:e,to:this._control.getCurrentDateValue("to")}),!0;case"to":return this._control.setRange({from:this._control.getCurrentDateValue("from"),to:e}),!0}return!1},_buildControl:function(t){return new u(t)}}),u}.apply(e,i))||(t.exports=s)},function(t,e,n){"use strict";var i,s;i=[n(56),n(225),n(51)],void 0===(s=function(t,e,n){return e.extend({defaultOptions:{addCurves:!0,forecast:!1},setHighlite:function(t,e,i){if(this.chart){var s=this.chart.get(t);s&&(s.data.forEach(function(t){t.graphic&&t.graphic.attr({fill:e?n.brightenColor(i):i,stroke:e?n.brightenColor(i):i})}),this.setNoteHighlite(t+"_",e,i))}},getTooltipOptions:function(t){this._parent(t),t.tooltip.crosshairs=!1,t.tooltip.followPointer=!0},getDefaultOptions:function(t){return UWA.extend(this._parent(t),{plotOptions:{series:{cursor:"pointer",shadow:!1,states:{hover:{brightness:-.3}}}}},!0)},getZoneOptions:function(e,n){return n=t.parse(n).cloneWith({alpha:.5}),[{value:e.length-1},{color:n.toRGBString()}]},build:function(t){var e=this.getDefaultOptions(t);this.buildChart(e,t)},tweakClipBox:function(t){t.height+=23,t.y-=23}})}.apply(e,i))||(t.exports=s)},function(t,e,n){"use strict";var i,s;i=[n(1),n(9),n(39)],void 0===(s=function(t,e,n){return e.extend(n,{name:"",container:null,elements:null,footerMode:!1,init:function(t){this.elements={},this.container=t.container,this.data=t.data},build:function(){this.elements.view=t.createElement("div",{class:"analyse-panel-view "+this.name}).inject(this.container)},show:function(t){this.footerMode=!(!t||!t.footerMode)&&t.footerMode,this.elements.view||this.build(),this.elements.view.setStyle("display","flex")},hide:function(){this.elements.view.setStyle("display","none")},retrieveData:function(){},changeData:function(){},destroy:function(){delete this.elements.view}})}.apply(e,i))||(t.exports=s)},function(t,e,n){"use strict";var i,s;i=[n(0),n(5),n(66),n(55)],void 0===(s=function(t,e,n,i){var s=t.h;return e.extend({render:function(t){return s(n,{title:t.source.getTitle(),scroller:t.scroller,extraClass:"nv-analyze-step-ingredient-"+t.source.getType().toLowerCase()+" dark-background",rightNavigation:t.rightNavigation||[t.hasPreviousStep&&s(i.Text,{label:_("Previous"),onClick:t.events.onPreviousStep}),s(i.Main,{label:_("Done"),disabled:!0===t.loading,onClick:t.onNextStep})]},t.children)}})}.apply(e,i))||(t.exports=s)},function(t,e,n){"use strict";var i,s;i=[n(1),n(10),n(8),n(26)],void 0===(s=function(t,e,n,i){var s=t.createElement;return e.extend({name:"nv-corpus-manager-step",getContent:function(){return this.elements.container||this.buildSkeleton(),this.elements.container},getExtraClassName:function(){return null},getTitle:function(){return""},getHeaderTitle:function(){return""},getDescription:function(){return""},isCloseableStep:function(){return this.options.isCloseableStep||!1},open:function(e){if(this.dispatchEvent("beforeOpen"),t.is(e)&&!e)return this.elements.container.setStyle(this.getVisibleStepStyle()),void this.dispatchEvent("afterOpen");this.elements.container.setStyles(this.getHiddenStepStyle()),new i(this.elements.container,{duration:250,transition:"quadOut",events:{onComplete:function(){this.dispatchEvent("afterOpen",this.options.name)}.bind(this)}}).start(this.getVisibleStepStyle())},close:function(e){if(this.dispatchEvent("beforeClosed",this.options.stepId),t.is(e)&&!e)return this.elements.container.setStyles(this.getHiddenStepStyle()),void this.dispatchEvent("afterClosed",this.options.stepId);new i(this.elements.container,{duration:250,transition:"quadOut",events:{onComplete:function(){this.dispatchEvent("afterClosed",this.options.stepId)}.bind(this)}}).start(this.getHiddenStepStyle())},getHiddenStepStyle:function(){return{opacity:"0"}},getVisibleStepStyle:function(){return{opacity:"1"}},buildSkeleton:function(){var t=this.getExtraClassName()||"",e=this.getTitle(),n=this.getDescription();this.elements.container=s("div",{class:this.getClassNames()+" "+t}).addContent(this.isCloseableStep()?s("div",{class:this.getClassNames("-closebtn")+" uwa-icon delete",title:_("Close"),events:{click:function(){this.onCloseStep()}.bind(this)}}):"",e&&s("div",{class:this.getClassNames("-title"),text:e}),n&&s("div",{class:this.getClassNames("-description"),html:n}),s("div",{class:this.getClassNames("-inner"),html:[this.buildStep(this.options)]}),this.elements.navigation=s("div",{class:this.getClassNames("-nav"),html:this.buildNavigation()}))},buildStep:function(){},buildNavigation:function(){return[this.elements.message=s("div",{class:this.getClassNames("-message")}),new n.Button({value:_("Done"),className:"medium green right-button",events:{onClick:this.onDone.bind(this)}})]},onDone:function(){this.dispatchEvent("onClose")},onCloseStep:function(t){this.options.closeAfter?this.dispatchEvent("onClose"):this.dispatchEvent("onCloseTemporaryStep",t)}})}.apply(e,i))||(t.exports=s)},function(t,e,n){"use strict";var i;void 0===(i=function(){var t={colors:["#9E080E","#637235","#942157","#50299A","#1277DB","#101010","#E51A60","#159A2B","#C41F88","#A159CE","#188D92","#444444","#FC7E29","#85BB23","#E868AE","#7970D0","#37C2DB","#888888","#FEB82C","#C6E12F","#E6A6AB","#A98EE5","#7EBBF5","#AAAAAA","#FFD631","#E6FB4D","#F2C99F","#B9B8E0","#C3E1FE","#CCCCCC"],getColor:function(e){return t.colors[e%t.colors.length]},getMiddleRandomColor:function(){return t.getRandomColor(6,24)},getRandomColor:function(e,n){return e=e||0,n=n||t.colors.length,t.colors[Math.floor(Math.random()*(n-e))+e]}};return t}.call(e,n,e,t))||(t.exports=i)},function(t,e,n){"use strict";n.r(e),n.d(e,"style",function(){return p}),n.d(e,"DataRow",function(){return m}),n.d(e,"default",function(){return f});var i=n(0),s=n.n(i),o=n(14),a=n.n(o),r=n(5),l=n.n(r),c=n(65),u=n.n(c);function h(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function d(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,t.__proto__=e}var p=a.a.namespace("List").addRules({root:{display:"flex",flexFlow:"column",flex:1,backgroundColor:"#ffffff",color:"#666666"},errorContainer:{display:"flex"},errorMessage:{display:"flex",justifyContent:"center",margin:"20px 0",width:"100%",padding:"20px",backgroundColor:"#AAA",fontSize:"18px",color:"#ffffff"},header:{"align-items":"center",display:"flex",flexFlow:"row",fontSize:12,height:"46px",boxShadow:"0 0 16px rgba(0, 0, 0, .15)"},headerCheckbox:{display:"flex",alignItems:"center",marginRight:"50px"},body:{display:"flex",flex:"1"},row:{borderBottom:"1px solid #EEEEEE",display:"flex",transition:"border-color .4s, background-color .4s",cursor:"pointer","flex-direction":"row",":hover":{borderBottom:"1px solid #DDD",backgroundColor:"#EDEDED"}},cell:{"box-sizing":"border-box","flex-grow":"1",padding:"10px 20px 8px 20px"},itemContent:{display:"flex",flex:1}}),m=function(t){function e(e){var n;return(n=t.call(this,e)||this).state={hover:!1},n.onMouseenter=n.onMouseenter.bind(h(n)),n.onMouseleave=n.onMouseleave.bind(h(n)),n}d(e,t);var n=e.prototype;return n.onMouseenter=function(){this.setState({hover:!0})},n.onMouseleave=function(){this.setState({hover:!1})},n.render=function(t){var e=t.renderItem.bind(this)(t.item),n=e.children.map(function(t){return s.a.cloneElement(t,{className:(t.attributes?t.attributes.className:"")+" "+p("cell",t.attributes.sansselStylr)})}),i=Object.assign({},t,{className:t.className+" "+p("row")},{onMouseenter:this.onMouseenter,onMouseleave:this.onMouseleave});return s.a.cloneElement(e,i,n)},e}(l.a),f=function(t){function e(){return t.apply(this,arguments)||this}d(e,t);var n=e.prototype;return n.init=function(t){this._parent(t),this.onScroll=this.onScroll.bind(this),this.onScrollDebounced=this.onScrollDebounced.bind(this),this._bindScrollEvent=this._bindScrollEvent.bind(this)},n.componentWillReceiveProps=function(t){this.state.loadingMore&&(!t.onLoadMore||t.items.length>this.props.items.length)&&this.setState({loadingMore:!1})},n.componentDidMount=function(){this._bindScrollEvent()},n.componentDidUpdate=function(){this._bindScrollEvent()},n.componentWillUnmount=function(){this._scroller&&this._scroller.scroller.getInnerElement().removeEvent("scroll",this.onScroll),clearTimeout(this._scrollTimeout)},n._bindScrollEvent=function(){if(this._scroller){var t=this._scroller.scroller.getInnerElement();this.props.onLoadMore?t.addEvent("scroll",this.onScroll):t.removeEvent("scroll",this.onScroll),this.scrollable=t}},n.sort=function(t,e,n){return t.sort(function(t,i){var s=t[e].toLowerCase(),o=i[e].toLowerCase(),a=0;return s<o?a=-1:s>o&&(a=1),"desc"===n?-1*a:a})},n.render=function(t){var e=t.items;return t.orderKey&&(e=this.sort(e,t.orderKey,t.orderBy)),s.a.h("div",{className:p("root",t.sansselStyle)},t.errorMessage&&this.renderError(t.errorMessage),e&&[!t.singleSelection&&this.renderHead(),this.renderBody()])},n.renderError=function(t){return s.a.h("div",{style:p("errorContainer")},s.a.h("div",{style:p("errorMessage")},t))},n.renderHead=function(){var t=this.props.renderHeader(),e=t.children.map(function(t){return s.a.cloneElement(t,{className:t.attributes.className+" "+p("cell")})});return s.a.cloneElement(t,{className:p("header")},e)},n.renderBody=function(){var t=this.props;return s.a.h("div",{className:p("body")},s.a.h(u.a,{ref:function(t){this._scroller=t}.bind(this),style:{flex:1}},t.items.map(function(e,n){return s.a.h(m,{key:t.getItemKey(e),"data-item-index":n,item:e,renderItem:t.renderItem})},this)))},n.onScroll=function(){this._scrollTimeout||(clearTimeout(this._scrollTimeout),this._scrollTimeout=setTimeout(this.onScrollDebounced,300))},n.onScrollDebounced=function(){if(this._scrollTimeout=null,!this.state.loadingMore){var t=this._scroller.scroller.getInnerElement();t.scrollHeight-(t.scrollTop+t.clientHeight)<400&&(this.setState({loadingMore:!0}),this.props.onLoadMore())}},e}(l.a)},function(t,e,n){"use strict";var i,s;i=[n(1),n(2),n(17),n(188)],void 0===(s=function(e,i,s,o){var a={},r=new WeakMap;function l(t,n){var s="options/"+(n.name||"edit"),o=t.getMenu(s)||{};o.visible=!e.is(n.visible)||n.visible,o.wizard=n.wizard,o.onExecute="launchWizard",o.label||(o.label=n.label||e.i18n("Edit")),o.name||(o.name=s),o.icon||(o.icon=n.name||"edit"),function(t){t.hasEvent("launchWizard")||t.addEvent("launchWizard",function(t){t&&t.wizard&&a.launchWizard(this,t.wizard)})}(t),t.addEvent("onLoad",function(){t.environment.launched=!0,d(t)||(i.isIn3DDashboard()&&!1===o.visible?t.removeMenu(o.name):t.setMenu(o))})}function c(t,e,n){var i=!n&&e.previous&&e.previous.wizard||e.isLeavingWizard,s="maximized"===e.type&&e.wizard;if(s){var o=u(t,s);return o.beforeOpen(),a.openWizard(t,s,o.getOptions(o.openingOptions)),!1}if(i)return h(t,i),!1}function u(t,e){var n=r.get(t);return n||(n={},r.set(t,n),function(t){t.addEvent("onViewChange",function(e){return"maximized"===e.type&&t.elements.body.setStyle("min-height",""),c(t,e)}),t.addEventOnce("onLoad",function(){return c(t,t.getView(),!0)},null,.5)}(t)),n[e]||(n[e]={beforeOpen:function(){t.body.empty()},afterClose:function(){t.body.empty(),t.dispatchEvent("onRefresh")},getOptions:function(){return{}},getMenu:function(){return!1},deleteOnClose:function(){return!1}}),n[e]}function h(t,e){var n=u(t,e);!i.isAloneEnvironment()&&n.deleteOnClose()?t.environment.destroy():(n.afterClose(),i.isIn3DDashboard()&&window.document.body.removeClassName("nv-module-overflow")),n.currentInstance&&n.currentInstance.destroy&&n.currentInstance.destroy(),delete n.currentInstance}function d(t){var e=s.getFromWidget(t);return e&&(e.isReadOnly()||o.hasSnapshot(e))}return a.launchWizard=function(t,e){var n={type:"maximized",chrome:!1,wizard:e};d(t)||("maximized"===t.getView().type||i.isIn3DDPreview()?t.dispatchEvent("onViewChange",n):t.requestView(n))},a.openWizard=function(t,e,s){e&&Promise.all([n.e(0),n.e(119)]).then(function(){var o=[n(1142)("./"+e+"/Wizard")];(function(n){var o=n.launch(t,s);o.cleanStyles&&t.addEventOnce("onViewChange",function(){o.cleanStyles()},null,2),u(t,e).currentInstance=o,o.addEvent("onClose",function(){i.isIn3DDPreview()?h(t,e):t.requestView({type:"windowed",isLeavingWizard:!0})}),i.isIn3DDashboard()&&window.document.body.addClassName("nv-module-overflow")}).apply(null,o)}).catch(n.oe)},a.registerWizard=function(t,n,i){var s=(i=Object.assign(u(t,n),i)).getMenu();return s&&l(t,e.extend({wizard:n},s)),{open:function(e){u(t,n).openingOptions=e,a.launchWizard(t,n)},setMenu:function(i){l(t,e.extend({wizard:n},i))}}},a.launchWizardFromScratch=function(e,s,o){n.e(8).then(function(){(function(t){var a=[n(103)];(function(t){var n=t.factory({moduleName:e,data:o&&o.data||{}},{preview:!0,environmentOptions:{initialView:{type:"maximized",chrome:!1,wizard:s}}});i.Page.inSmartReaderView&&n.inject(document.body),n.load()}).apply(null,a)}).call(this,n(454)(t))}).catch(n.oe)},App.WizardUtil=a,a}.apply(e,i))||(t.exports=s)},function(t,e,n){"use strict";var i,s;i=[n(1)],void 0===(s=function(t){var e={},n=new WeakMap;return e.hasSnapshot=function(t){return Boolean(e.getSnapshot(t))},e.getSnapshot=function(t){if(!n.has(t)){var e=t.getValue?t.getValue("snapshot"):t.getData().snapshot;n.set(t,function(t){if(!t)return!1;try{return JSON.parse(t)}catch(t){return!1}}(e))}return n.get(t)},e.buildSnapshotOverlay=function(){return t.createElement("div",{class:"nv-snapshot-overlay"})},e}.apply(e,i))||(t.exports=s)},function(t,e,n){"use strict";var i,s;i=[n(1),n(9)],void 0===(s=function(t,e){var n=e.extend({setBridge:function(t){if(this._bridge)throw new Error("Unable to set bridge, an instance is already known");this._bridge=t},getBridge:function(){return this._bridge},getBootstrap:function(){return this._bootstrap||(this._bootstrap={}),this._bootstrap},getDashboardData:function(){return this._dashboardData||(this._dashboardData={}),this._dashboardData},getCachedEntities:function(){return this._cachedEntities||(this._cachedEntities=Object.create(null)),this._cachedEntities},setSearchTopic:function(t){this._searchTopic=t},getSearchTopic:function(){return this._searchTopic}});return function(t){return parent.nv=parent.nv||{},parent.nv[t]||(parent.nv[t]=new n),parent.nv[t]}}.apply(e,i))||(t.exports=s)},function(t,e,n){"use strict";var i,s;i=[n(1),n(9),n(39),n(22),n(24),n(20),n(13),n(2),n(4),n(212),n(160),n(671)],void 0===(s=function(t,e,n,i,s,o,a,r,l,c,u,h){var d=e.extend(n,i,s,{options:{hasMore:!0,query:{},producersItemCounts:{}},init:function(e,n,i){t.is(e,"object")?(i=e,e=[],n=[]):t.is(n,"object")&&(i=n,n=[]),this.setOptions(i),this._lastUpdate=0,this._producers=e||[],this._items=[];var s=i&&i.query&&i.query.limit;this._addItems(n,{realItemCount:!!(s&&s<n.length)&&s}),this._sliceRecursion=0,this._updateDone()},destroy:function(){this.stopUpdate(),this.removeEvents(),this._removeProducers(),this._parent()},_removeProducers:function(){this._producerEvents&&this._producers.invoke("removeEvents",this._producerEvents),this._producers.length=0,this._removeItems()},_removeItems:function(){this._itemEvents&&this._items.invoke("removeEvents",this._itemEvents),this._rawLastItem=null,this._realItemCount=0,this._items.length=0,this.options.hasMore=!0,this._loading=null,this._updateDone()},getQuery:function(){return this.options.query||{}},getProducers:function(){return this._producers},getSampling:function(){return this.options.sampling||100},getRawLastItem:function(){return this._rawLastItem},hasMore:function(){return!!this._realItemCount||!1!==this.options.hasMore},addEvent:function(){var t,e=this;this._producerEvents||(this._producerEvents={onChange:(t="onProducerChange",function(){var n=[].slice.call(arguments);n.unshift(this),e.dispatchEvent(t,n)})},this._producers.invoke("addEvents",this._producerEvents),this._itemEvents={onChange:this.dispatchEvent.bind(this,"onItemChange"),onDestroy:this._destroyItem.bind(this)},this._items.invoke("addEvents",this._itemEvents)),this._parent.apply(this,arguments)},_destroyItem:function(t){var e=this._items.indexOf(t);e<0||(0!==e||1!==this._items.length?(t===this._rawLastItem&&(this._rawLastItem=this._items[e-1]),this._realItemCount&&e<this._realItemCount&&this._realItemCount--,this._items.splice(e,1)):this.empty())},_apiCall:function(t,e){if(this._currentApiCall)this._currentApiCall=this._currentApiCall.then(this._apiCall.bind(this,t,e));else{var n=this.options.api;if(!this._producers.length)return o.reject("no_producer");if(!n)return o.reject("no_api_available");this._currentApiCall=n.call(this,t,e||{});var i=function(){this._currentApiCall=null}.bind(this);this._currentApiCall.done(i,i)}return this._currentApiCall},empty:function(){this._removeItems(),this.dispatchEvent("onReset")},replace:function(e){this.options=t.extend({},e.options,!0),this.replaceProducers(e._producers,e._items,{realItemCount:e._realItemCount,rawLastItem:e._rawLastItem})},replaceProducers:function(t,e,n){this._removeProducers(),this._producers.push.apply(this._producers,t),e&&(this._addItems(e,n),this._itemEvents&&this._items.invoke("addEvents",this._itemEvents)),this._producerEvents&&this._producers.invoke("addEvents",this._producerEvents),this.dispatchEvent("onReset"),this._updateDone(),this.isUpdating()&&this.update()},getLastUpdate:function(){return this._lastUpdate},isUpdatable:function(){var t=this.getQuery();return!t.publishedBeforeDate&&!t.publishedBeforeItemId&&"saved"!==t.type},isInfosOnly:function(){return 0===this.getQuery().limit},startUpdate:function(){p.add(this)},stopUpdate:function(){p.remove(this)},isUpdating:function(){return p.has(this)},update:function(t){if(!this.isUpdatable())return o.reject("not_updatable");if(!this.isInfosOnly()&&h.isIdle())return o.reject("idle");if(this._updating)return this._updating;var e=c.getServerTime(),n=this.getNextUpdateTimestamp();if(!this.isInfosOnly()&&n<e-30)return this.empty(),o.reject("update_missed");if(n<e||t){var i=this;return this._updating=this._apiCall("update").then(function(t){var e=t.getItems();return i._addItems(e,{isNew:!0,dispatch:!0}),i._updating=null,i._updateDone(),e},function(){i._updating=null}),this._updating}return o.resolve()},_updateDone:function(){this.isUpdatable()&&(this._nextUpdate=this._computeNextUpdate(),this._lastUpdate=c.getServerTime())},_computeNextUpdate:function(){var t=this._producers.some(function(t){return!t.isStatusFinish()})?5:30;return Math.min.apply(Math,this._producers.invoke("getNextUpdateTimestamp"))+t},getNextUpdateTimestamp:function(){return this.isUpdatable()?this.isInfosOnly()?this._computeNextUpdate():this._nextUpdate||1/0:1/0},getUpdatableProducers:function(){var t=this.getNextUpdateTimestamp();return this._producers.filter(function(e){return e.getNextUpdateTimestamp()<=t})},loadMore:function(t){var e=this.getItems();return this.getSlice(e[e.length-1],t)},getSlice:function(t,e){var n,i=this,s=this._items;if(t){if(!(n=s.indexOf(this.findItem(t))+1))return o.reject("unknown_item")}else n=0;e||(e=this.getQuery().limit||10);var a=n+e,r=a-s.length;return r<=0||!1===this.options.hasMore||this._sliceRecursion>=10?(this._sliceRecursion=0,this._realItemCount&&this._realItemCount<a&&(this._realItemCount=s.length>a?a:0,this.dispatchEvent("onMoreItems",[s.slice(n,a)])),o.resolve(s.slice(n,a))):(this._sliceRecursion+=1,this._load(r,{fromSlice:!0}).then(function(){return i.getSlice(t,e)}))},loadProducers:function(t){return this._loadProducersOptions=Object.assign(this._loadProducersOptions||{limit:0},t),this._loadProducersDeferred||(this._loadProducersDeferred=o.deferred()),this.setDelayed("loadProducers",function(){var t,e=this._loadProducersOptions,n=this._loadProducersDeferred;this._loadProducersDeferred=this._loadProducersOptions=null,(t=e.itemCount||e.filters||!this._loading?this._apiCall("next",e):this._loading).done(function(t){this.options.sampling=t.options.sampling,Object.assign(this.options.producersItemCounts,t.options.producersItemCounts)}.bind(this),function(){}),t.done(n.resolve,n.reject)},50),this._loadProducersDeferred.promise},loadFacets:function(){return this.loadProducers({facets:!0})},getProducerItemCount:function(t){return t.getItemCount?t.getItemCount():this.options.producersItemCounts[t.getId()]},loadItemCount:function(){return this._producers.some(function(t){return void 0===this.getProducerItemCount(t)},this)?this.loadProducers({itemCount:!0}):o.resolve()},_load:function(t,e){if(!this._loading){this.dispatchEvent("onLoading",[!0]);var n=this,i=this._loading=this._apiCall("next",Object.assign({limit:t||0},e));this._loading.done(function(t){if(n._loading===i){var e=t._items;n.options.hasMore=t.options.hasMore,n.options.savedCount=t.options.savedCount,t.isUpdatable()&&!n.getItems().length&&n._updateDone(),n._addItems(e,{dispatch:!0,realItemCount:t._realItemCount,rawLastItem:t._rawLastItem}),n.hasMore()||n.dispatchEvent("onNoMoreItem")}},function(){}).fin(function(){n._loading===i&&(n._loading=null),n.dispatchEvent("onLoading",[!1])})}return this._loading},areItemsLoading:function(){return Boolean(this._loading)},findItem:function(t){if("object"==typeof t)return t;var e;for(e=0;e<this._items.length;e++)if(this._items[e].getId()===t)return this._items[e]},_addItems:function(t,e){t=a.splat(t);var n,i=e&&!0===e.isNew;if(t.length){if(t.invoke("addEvents",this._itemEvents),i&&0!==this._items.length||(e&&e.rawLastItem?this._rawLastItem=e.rawLastItem:this._rawLastItem=t[t.length-1]),this.options.api&&this.options.api.shouldDeduplicateItems(this)&&!this.options.query.fromSlice){var s=t.length;t=u.deduplicate(t,this._items),this._limitFactor=s/t.length}this._items[i?"unshift":"push"].apply(this._items,t)}if(i)n=t;else{var o=this._realItemCount;e&&e.realItemCount&&e.realItemCount<t.length?this._realItemCount=this._items.length-(t.length-e.realItemCount):this._realItemCount=0,n=o||t.length?this._items.slice(o||-t.length,this._realItemCount||void 0):[]}n.length&&e&&!0===e.dispatch&&this.dispatchEvent(i?"onNewItems":"onMoreItems",[n])},getLimitFactor:function(){return this._limitFactor||1},getItems:function(){return this._realItemCount?this._items.slice(0,this._realItemCount):this._items},getTotalFlagCount:function(t){return this._producers.invoke("getFlagCount",t).reduce(l.counterAdd,0)},getTotalItemCount:function(){return"saved"===this.getQuery().type?this.options.savedCount:this._producers.reduce(function(t,e){return void 0===t?void 0:this.getProducerItemCount(e)}.bind(this),0)},hasCached:function(){return this._producers.some(function(t){return t.isCached()})},getLowerComputedAtTimestamp:function(){return this._producers.reduce(function(t,e){return!1===t||t>e.getComputedAtTimestamp()?e.getComputedAtTimestamp():t},!1)},setFlags:function(e,n,i){if(!this.canFlag(e))throw new Error("Can't flag this itemlist with flag "+e);return this.options.api.getAllItemsFromList(this).forEach(function(t){t.canFlag(e)&&(!i||t.getPublishTimestamp()<=i)&&t.setFlag(e,n,{sync:!0,dontUpdateProducerFlags:!0})}),i||!1!==n||this._producers.forEach(function(n){if(n.canFlag(e)){var i=t.clone(n.get("flags"));i[e]=0,n.set("flags",i)}}),this._apiCall("flag",{publishedBeforeDate:i,value:!1!==n})},canFlag:function(t){return Boolean(this.options.api)&&("saved"===t||this._producers.some(function(e){return e.canFlag(t)}))},canFilter:function(t){return this._producers.every(function(e){return e.canFilter(t)})},isIncomplete:function(){return!0===this.options.incomplete}}),p=d.Updater=e.singleton(s,{_lists:[],_index:function(t){return this._lists.indexOf(t)},_handleUpdateFailure:function(t){"not_updatable"!==t&&console.error(t)},update:function(t){this._lists.forEach(function(e){e.update(t).fail(this._handleUpdateFailure.bind(this))},this)},start:function(){this.hasPeriodical("timer")||this.setPeriodical("timer",this.update,5e3)},stop:function(){this.clearPeriodical("timer")},add:function(t){this._index(t)<0&&(this._lists.push(t),t.update().fail(this._handleUpdateFailure.bind(this)))},remove:function(t){var e=this._index(t);e>=0&&this._lists.splice(e,1)},has:function(t){return this._index(t)>=0}});return r.onReady(function(){p.start(),h.addEvent("active",function(){p.update()})}),d}.apply(e,i))||(t.exports=s)},function(t,e,n){"use strict";var i,s;i=[n(1),n(13)],void 0===(s=function(t,e){var n={buildQuery:function(){function i(t){var e,i,s,o,a=[],r=[];if(t.raw)e={text:t.raw,isRaw:!0};else{for(s=0,o=(i=t.multi||[t]).length;s<o;s+=1)(t=i[s]).value&&(o<2||t.type)&&(r.push(n.escapeQuery(t.value)),t.type&&a.push(t.type));e={text:(a.length?a.join(",")+":":"")+r.join(","),isRaw:!1}}return e}function s(e,n){for(var i=" ",o="",a=0,r=e.length;a<r;a+=1)Array.isArray(e[a])&&(e[a]=s(e[a],r>1));"or"===e.context?i=" OR ":"not"===e.context&&(o="-"),function(e){var n,i;for(n=0;n<e.length;n+=1)for(i=n+1;i<e.length;i+=1)t.equals(e[n],e[i])&&(e.splice(i,1),i-=1)}(e);var l,c=1===e.length&&e[0].isRaw;return l=c?e[0].text:e.map(function(t){return t.isRaw?function(t){return!("("===t[0]&&t.indexOf(")")===t.length-1)&&/\s/.test(t)&&(t="("+t+")"),t}(t.text):t.text}).join(i),(o||n)&&(e.length>1||c)&&(l="("+l+")"),{text:o+l,isRaw:!1}}return function(n){return s(function t(e){var n,i,s,o=!1,a=!1;for(n=0,i=e.length;n<i;n+=1)s=e[n],Array.isArray(s)&&1===(s=t(s)).length&&"not"!==s.context&&(s=e[n]=s[0]);if(e.length>1&&e.some(function(t){return"*:*"===t.text}))if("or"===e.context)e=[{text:"*:*",isRaw:!1}];else{for(n=0;n<e.length;n+=1)s=e[n],Array.isArray(s)?"not"===s.context&&(o=!0):"*:*"===s.text?(e.splice(n,1),n-=1):a=!0;(!e.length||o&&!a)&&e.push({text:"*:*",isRaw:!1})}return e}(function t(e){for(var n=[],s=0,o=e.length;s<o;s+=1){var a=e[s];n.push(Array.isArray(a)?t(a):i(a))}return n.context=e.context,n}(n=function t(n,i){var s,o,a,r=function(t){return t.value||t.date||t.raw};return i||((i=[]).context="and"),["or","and","not"].some(function(t){return(s=n[t])&&(o=t),s}),o&&o!==i.context?("and"===i.context&&"not"===o&&i.push({raw:"*:*"}),(a=[]).context=o):a=i,(r(n)||n.multi&&n.multi.some(r))&&a.push(n),s&&(e.splat(s).forEach(function(e){t(e,a)}),delete n[o]),a!==i&&a.length&&i.push(a),i}(t.clone(n))),n.context)).text}}(),escapeQuery:function(e){var n=function(t){return/[\s\\"():]/.test(t)&&(t='"'+t.replace(/\\/g,"\\\\").replace(/(["])/g,"\\$1")+'"'),t};return t.is(e,"array")?e.forEach(function(t,i){e[i]=n(t)}):e=n(e),e},buildQueryPartsFromRequestAdd:function(t){return t&&t.length?t.map(function(t){return"term"===t.filter||"pieTerm"===t.filter?{raw:t.value}:{raw:t.filter+":"+t.value}}):[]}};return n}.apply(e,i))||(t.exports=s)},function(t,e,n){"use strict";var i,s;i=[n(2),n(6)],void 0===(s=function(t,e){return{sendEvent:function(n){t.Config.potion.emit&&e.sendIotEvent(n).done()}}}.apply(e,i))||(t.exports=s)},function(t,e,n){"use strict";var i,s;i=[n(15),n(137)],void 0===(s=function(t,e){return{getPopupSize:function(t){var e={google:{height:700,width:800},gmail:{height:700,width:800},googledrive:{height:700,width:800}};return e[t]?e[t]:{height:480,width:800}},bindTo:function(n,i,s,o,a){if(!n)return!1;var r=this.getPopupSize(a);t.addEvent.call(n,"click",function(){e.openPopup(i,s,r).done(o)})},connect:function(t){window.location.href=t}}}.apply(e,i))||(t.exports=s)},function(t,e,n){"use strict";var i,s;i=[n(13),n(18),n(2),n(4)],void 0===(s=function(t,e,n,i){var s;return{getURL:function(t,e){if(i.isAbsoluteURL(t))return t;var s,o,a=t.split("_");s=(t=a.pop()).unCamelCase().split("-")[0],t=s+t.slice(s.length),(o=a.join("/"))&&(o+="/"),t=t+"/"+t+".html";var r=n.getURL("startpage")+"/modules/"+o+t;return e&&e.withVersion&&n.Config.version.widget&&(r+=r.includes("&")?"&":"?",r+="v="+n.Config.version.widget),r},getName:function(i){var o,a=(i=t.parseUrl(i)).directoryPath.slice(i.directoryPath.lastIndexOf("modules"),-1).split("/");return function(){if(!s){var e=t.parseUrl;s=[e(n.Config.urls.base).domain,e(n.Config.urls.cdn).domain,e(n.Config.urls.startpage).domain,"www.netvibes.com"]}return s}().indexOf(i.domain)>=0&&"modules"===a.shift()&&(o=a.map(e.ucfirst).join("_")),"Uwa"===o&&(o="UWA"),o}}}.apply(e,i))||(t.exports=s)},function(t,e,n){var i,s;i=[n(1),n(54),n(3),n(196),n(10),n(163)],void 0===(s=function(t,e,n,i,s,o){"use strict";var a;return a=o.extend({name:"uwa-datepicker",options:{format:"%x",calendarOptions:{},button:{tag:"div",class:"uwa-icon uwa-icon-only calendar"},time:!1,utc:!1},setOptions:function(t){return t||(t={}),t.date&&(t.value=t.date/1e3),this._parent(t)},syncInput:function(){var t=this.elements,n=this.getDate();t.value&&t.value.setText(n?e.strftime(n,this.options.format):""),t.calendar&&t.calendar.setDate(n),t.time&&n&&(t.time.getElement(".value").setText(e.strftime(n,"%x")),t.time.getElements("input").forEach(function(t){t.value=n["get"+t.getAttribute("data-action")]()||""}))},onChange:function(){this.dispatchEvent("onDateSelect",[this.getDate()])},onOpen:function(){this._parent();var t=this.elements;t.calendar.refreshLimit(),t.time&&(t.time.hide(),t.calendar.show())},buildContent:function(){var e,s=this;return e=function(t){var e=this,i=n.whichKey(t);1===i.length&&isNaN(i)&&n.preventDefault(t),setTimeout(function(){var t,n,i=s.getDate()||new Date;i["set"+e.getAttribute("data-action")](e.value),s.setDate(i),e.value.length>=2&&(n=((t=s.elements.time.getElements("input")).indexOf(e)+1)%t.length,t[n].select())},1)},s.options.time&&(s.elements.time=t.createElement("div",{class:s.getClassNames("-time"),html:[{tag:"div",class:"value"},{tag:"input",type:"text",class:s.getClassNames("-text"),"data-action":"Hours",events:{keydown:e}},":",{tag:"input",type:"text",class:s.getClassNames("-text"),"data-action":"Minutes",events:{keydown:e}}]}).hide()),s.elements.content=t.createElement("div",{html:[s.elements.calendar=new i(t.extend({_root:!1},s.options.calendarOptions)).setDate(this.getDate()).addEvent("onDateSelect",function(t){var e=s.getDate();e?(e.setDate(t.getDate()),e.setMonth(t.getMonth()),e.setFullYear(t.getFullYear())):e=t,s.setDate(e),s.options.time?(s.elements.calendar.hide(),s.elements.time.show().getElement("input").select(),s.elements.dropdown.updatePosition()):(s.toggle(!1),s.dispatchEvent("onChange",[s.getValue()]))}),s.elements.time]}),s.elements.content},buildNavigationItem:function(t){return t.date&&(t.value=t.date/1e3),this._parent(t)},setDate:function(t){return t&&this.options.utc&&(t=t.getTime()-6e4*t.getTimezoneOffset()),this.setValue(t/1e3||"")},getDate:function(){var t=this.getValue();if(t)return this.options.utc&&(t=Number(t)+60*(new Date).getTimezoneOffset()),new Date(1e3*t)},setLimit:function(t){return this.elements.calendar?this.elements.calendar.setLimit(t):this.setOptions({calendarOptions:{limit:t}}),this}}),t.namespace("Controls/DatePicker",a,t)}.apply(e,i))||(t.exports=s)},function(t,e,n){var i,s;i=[n(1),n(54),n(3),n(10),n(18)],void 0===(s=function(t,e,n,i,s){"use strict";var o,a=t.i18n;function r(t,e){var n=!t;return n===!e&&(n||t.getFullYear()===e.getFullYear()&&t.getMonth()===e.getMonth()&&t.getDate()===e.getDate())}function l(t,e,n){var i=t.getDate();if(void 0===n&&(n=1),"year"===e?(n*=12,e="month"):"week"===e&&(n*=7,e="day"),"month"===e)t.setDate(1),t.setMonth(t.getMonth()+n+1),t.setDate(0),i<t.getDate()&&t.setDate(i);else{if("day"!==e)throw new Error('Unknown unit "'+e+'"');t.setDate(i+n)}}return o=i.extend({name:"uwa-calendar",defaultOptions:{view:"month",weekFirstDay:"monday",limit:{}},weekOffset:{monday:1,sunday:0,saturday:6},init:function(t){this._parent(t),this.buildSkeleton(),this.bound={refreshLimit:this.refreshLimit.bind(this)},this.setLimit(this.options.limit),this.setDate(this.options.date),this.displayView(this.options.view)},getWeekOffset:function(){return this.weekOffset[this.options.weekFirstDay]||0},getMonthFirstDay:function(){var t=this.displayDate;return(new Date(t.getFullYear(),t.getMonth(),1).getDay()-this.getWeekOffset()+7)%7},getWeekFirstDay:function(){var t=this.displayDate;return t.getDate()-(7+t.getDay()-this.getWeekOffset())%7},iterateWeek:function(t,e){var n,i=this.displayDate,s=new Date(i.getFullYear(),i.getMonth(),this.getWeekFirstDay()),o=s.getDate();for(n=0;n<7;n+=1){var a=new Date(s);a.setDate(o+n),t.call(e,n,a)}return this},displayView:function(t){if(["month","week"].indexOf(t)<0)throw new Error("Unknown view "+t+"options");return t!==this.currentView&&(this.container.setContent(this["build"+s.ucfirst(t)+"View"]()),this.currentView=t,this.dispatchEvent("onRefresh")),this},setDate:function(t,e){e||(t||((t=new Date).setHours(0),t.setMinutes(0),t.setSeconds(0),t.setMilliseconds(0)),e=t);var n=!r(t,this.selectDate);return!n&&r(e,this.displayDate)||(this.selectDate=t,this.displayDate=e,this.dispatchEvent("onRefresh"),n&&this.dispatchEvent("onDateChange",[t])),this},getDate:function(){return this.selectDate||null},setLimit:function(t){t||(t={});var e=this.options.limit;return this.options.limit=t,[e.max,e.min,t.max,t.min].forEach(function(t,e){t instanceof o&&t[e<2?"removeEvent":"addEvent"]("onDateChange",this.bound.refreshLimit)},this),this.refreshLimit(),this},getLimit:function(){var t,e,n,i=this.options.limit||{},s={};for(t=0;t<2;t+=1)n=i[e=t?"max":"min"],s[e]=n&&new Date((n.getTime||n.getDate||n).call(n)).getTime()||(t?1/0:-1/0);return s.min-=864e5,s},refreshLimit:function(){var t=this.getLimit();if(t.end<t.start)throw new Error("Bad limit specified");return this.selectDate&&(this.preventRefresh(),this.setDate(new Date(Math.max(Math.min(t.max,this.selectDate),t.min))),this.allowRefresh()),this.dispatchEvent("onRefresh")},preventRefresh:function(){return this.doNotRefresh=this.doNotRefresh+1||1,this},allowRefresh:function(){return this.doNotRefresh=this.doNotRefresh-1||0,this},buildSkeleton:function(){this.container=t.createElement("div",{class:this.getClassNames(),events:{click:this.onClick.bind(this),mousedown:n.preventDefault}})},buildMonthView:function(){var n,i,s,o=t.createElement("div",{class:"monthView"}),a=t.createElement("div",{class:"top"}).inject(o),r=t.createElement("table").inject(o),l=t.createElement("tbody").inject(r),c=t.createElement("tr").inject(l);for(this.iterateWeek(function(n,i){t.createElement("th",{text:e.strftime(i,"%a")[0]}).inject(c)}),i=0;i<42;i+=1)i%7==0&&(n=t.createElement("tr").inject(l)),s=t.createElement("td").inject(n),t.createElement("div",{class:"day"}).inject(s);return t.createElement("span",{class:"previous uwa-icon","data-icon":"l"}).inject(a),t.createElement("span",{class:"title"}).inject(a),t.createElement("span",{class:"next uwa-icon","data-icon":"m"}).inject(a),this.elements.monthView=o,o},buildWeekView:function(){var n,i,s=t.createElement("div",{class:"weekView"}),o=t.createElement("div",{class:"top"}).inject(s),a=t.createElement("table").inject(s),r=t.createElement("tbody").inject(a),l=t.createElement("tr").inject(r);for(this.iterateWeek(function(n,i){t.createElement("th",{text:e.strftime(i,"%a")[0]}).inject(l)}),i=0;i<7;i+=1)i%7==0&&(n=t.createElement("tr").inject(r)),t.createElement("td",{html:{tag:"div",class:"day"}}).inject(n);return t.createElement("span",{class:"previous",text:"←"}).inject(o),t.createElement("span",{class:"title"}).inject(o),t.createElement("span",{class:"next",text:"→"}).inject(o),this.elements.weekView=s,s},refreshMonthView:function(){var t,n,i=this.displayDate,s=new Date(i.getFullYear(),i.getMonth(),-this.getMonthFirstDay()),o=this.elements.monthView,r=o.getElements(".day");for(t=0,n=r.length;t<n;t+=1)s.setDate(s.getDate()+1),r[t]=this.buildDay(r[t],s);o.getElement("tbody").getElements("tr")[6][s.getDate()>6?"hide":"show"](),o.getElement(".title").setText(e.strftime(i,a("%B %Y")))},refreshWeekView:function(){var t,n,i,s=this.displayDate,o=new Date(s.getFullYear(),s.getMonth(),this.getWeekFirstDay()),r=e.strftime(o,a("%e %B")),l=this.elements.weekView,c=l.getElements(".day");for(t=0,n=c.length;t<n;t+=1)c[t]=this.buildDay(c[t],o),o.setDate(o.getDate()+1);o.setDate(o.getDate()-1),i=e.strftime(o,a("%e %B %Y")),l.getElement(".title").setText(r+" - "+i)},buildDay:function(t,e){var n=new Date,i=this.displayDate,s=this.getLimit();return t.getClosest("td").toggleClassName("currentDay",r(e,i)).toggleClassName("selectDate",r(e,this.selectDate)).toggleClassName("today",r(e,n)).toggleClassName("currentMonth",e.getMonth()===i.getMonth()).toggleClassName("disabled",e<s.min||e>s.max),t.setText(e.getDate()),t},onRefresh:function(){var t=this.currentView;t&&!this.doNotRefresh&&this["refresh"+s.ucfirst(t)+"View"]()},onClick:function(t){var e,i=this.container,s=n.getElement(t),o=s.hasClassName("next")?1:s.hasClassName("previous")?-1:0,a=new Date(this.displayDate);s.getClosest(".disabled")||(s.hasClassName("day")?(l(a,"day",(e=i.getElements(".day")).indexOf(s)-e.indexOf(i.getElement(".currentDay .day"))),this.setDate(a),this.dispatchEvent("onDateSelect",[a])):o&&(l(a,this.currentView,o),this.setDate(this.selectDate,a)))}}),t.namespace("Controls/Calendar",o,t)}.apply(e,i))||(t.exports=s)},function(t,e,n){"use strict";var i,s;i=[n(1),n(3),n(9),n(39),n(22),n(87)],void 0===(s=function(t,e,n,i,s,o){var a=n.extend(i,s,{options:{className:"edit-in-place",emptyText:"",maxLength:!1,maxWidth:null,minWidth:250,noEdit:function(){},autoEdit:!0},init:function(t,e){this.setOptions(e),this.element=t,this.editMode=!1,this.events={enter:this.onEnter.bind(this),leave:this.onLeave.bind(this),click:this.edit.bind(this)},this.options.autoEdit&&this.attachEvents()},attachEvents:function(){this.element.addEvent("mouseover",this.events.enter),this.element.addEvent("mouseout",this.events.leave),this.element.addEvent("click",this.events.click)},onEnter:function(){this.editMode||this.element.addClassName(this.options.className)},onLeave:function(){this.editMode||this.element.removeClassName(this.options.className)},onKeyUp:function(t){var n=e.whichKey(t);"esc"===n?(this.element.setText(this.originalText),this.endEdit(!0)):"return"===n&&this.endEdit()},edit:function(n){if(!this.options.noEdit()&&!this.editMode){n&&n.type&&e.stop(n),this.onEnter(),this.editMode=!0,this.originalText=this.element.getText(),this.input=t.createElement("input",{type:"text",class:this.options.className,value:this.originalText,maxLength:this.options.maxLength||"",events:{keyup:this.onKeyUp.bind(this),blur:this.endEdit.bind(this)}});var i=this.element.getSize().width;i<this.options.minWidth&&(i=this.options.minWidth),this.options.maxWidth&&i>this.options.maxWidth&&(i=this.options.maxWidth),this.input.setStyle("width",i),this.element.setStyle("display","none"),this.input.inject(this.element,"after"),this.input.focus(),this.input.select()}},endEdit:function(t){if(this.editMode){this.editMode=!1;var e=this.input.value.trim();!0!==t&&e!==this.element.getText()&&e!==this.options.emptyText?(this.dispatchEvent("onEdit",[e,this.element]),this.element.setText(e.length?e:this.options.emptyText||"")):this.dispatchEvent("onCancel",[this.element]),this.input.destroy(),this.element.setStyle("display",""),this.onLeave(),this.dispatchEvent("onComplete",[e,this.element])}}});return a.register=function(t,e){var n=o.get(t,"editInPlace");return n||(n=new a(t,e),o.set(t,"editInPlace",n)),n},window.EditInPlace=a,a}.apply(e,i))||(t.exports=s)},function(t,e,n){"use strict";var i,s;i=[n(1),n(53),n(10),n(24),n(16),n(23),n(15),n(2),n(4),n(153),n(216),n(282),n(41)],void 0===(s=function(t,e,n,i,s,o,a,r,l,c,u,h,d){var p=n.extend(i,{name:"nv-item-list-renderer",_contentType:"normal",options:{loadCountHint:25,showGroups:!0,noItemMessage:_("No items."),sortKey:function(t){return t.getItem().getPublishTimestamp()}},init:function(n){var i=this;this._parent(n),this.setLoadThreshold(300);var s=this.elements.scroller=new o({className:this.options.className,shadows:!0});this._itemEvents={onDestroy:function(){i.itemDestroyListener(this)}},this._waitingForMore=!1,this.elements.container=t.createElement("div",{class:this.getClassNames(),html:s}),this.elements.container.addContent([this.elements.newItemsBanner=t.createElement("div",{class:"new-items-banner",text:_("New Items")}).hide()]);var a=s.getInnerElement();a.addEvent("scroll",this.setDelayed.bind(this,"scroller-debounce",this.scrollHandler,100)),a.addContent([this.elements.inner=t.createElement("div"),this.elements.spinnerContainer=t.createElement("div",{class:this.getClassNames("-spinner-container"),html:this.getSpinner()})]),h.stickyElements(a,{stickySelector:".item-actions-wrapper"}),e.preventParentScroll(a),this.linkToDom(this.elements.container);var r=null;this.elements.container.addEvent("resize",function(){var e=this.elements.container.getSize();r&&t.equals(r,e)||(this.dispatchEvent("onResize"),r=e)}.bind(this)),this.refresh()},destroy:function(){this.clearDelayed("maybeLoadMore"),this.empty(),this._parent()},getSpinner:function(){return this.elements.spinner||(this.elements.spinner=new d({color:"#666666",size:20,autostart:!1,delay:0})),this.elements.spinner},setLoadThreshold:function(t){this._loadThreshold=t},getContainer:function(){return this.elements.container},getContent:function(){return this.getContainer()},getInnerElement:function(){return this.elements.inner},getCurrentRenderers:function(){var t=this.getInnerElement();return t?t.getElements("> .nv-item-renderer").map(c.fromElement):[]},ignoreNextScrollEvent:function(){this._ignoreNextScrollEvent=!0},preventScroll:function(t){var e=this.getRenderer("main");if(!e)return t.call(this);var n=this.elements.scroller.getInnerElement(),i=e.getContainer();if(i){var s=i.getPosition(n).y;t.call(this),n.scrollTop+=i.getPosition(n).y-s}else t.call(this)},itemDestroyListener:function(t){t.removeEvents(this._itemEvents),this.getRenderer(t).destroy(),t===this._focused&&(this._focused=null),this.updateMainRenderer(),window.setTimeout(function(){this.updateGroups()}.bind(this),1)},addItems:function(t,e){var n=this.getCurrentRenderers(),i={};n.forEach(function(t){i[t.getItem().getId()]=!0});var s=t.map(function(t){return{item:t.item?t.item:t,options:t.item?t.options:{}}}).filter(function(t){return!i.hasOwnProperty(t.item.getId())}).map(function(t){var e=this.renderItem(t.item,t.options);if(!(e instanceof c))throw new Error("renderItem should return an ItemRenderer instance");var n=function(t){return function(){var n=[].slice.call(arguments);n.unshift(e),this.dispatchEvent(t,n)}.bind(this)}.bind(this);return e.addEvents({onToggleContent:n("onItemRendererToggleContent"),onPlayEnclosure:n("onItemRendererPlayEnclosure")}),e.setList(this),t.item.addEvents(this._itemEvents),e},this);if(s.length)this.preventScroll(function(){this.setMessage(),e?(this.injectRenderersAt(s,"before"),this.elements.newItemsBanner.show(),this.setDelayed(function(){this.elements.newItemsBanner.hide()},5e3)):this.injectRenderersAt(s,"after"),this.updateGroups(),this.maybeLoadMore()}),this.updateMainRenderer();else if(0===n.length){var o=this.options.noItemMessage;this.setMessage("function"==typeof o?o(this):o)}else this.setMessage();return this},injectRenderersAt:function(t,e){var n=this.getInnerElement();if("after"===e)n.addContent(t);else if("before"===e){var i=document.createDocumentFragment();a.addContent.call(i,t),n.insertBefore(i,n.firstChild)}},renderItem:function(t,e){return c.factory(t,e)},_setFocus:function(t,e){e=!1!==e,t=this.getRenderer(t);var n=this._focused||null,i=n===t;i&&!e?this._focused=null:!i&&e&&(this._focused=t,n&&n.dispatchEvent("onFocusChange",[!1,t])),n!==this._focused&&(t.dispatchEvent("onFocusChange",[e,n!==t?n:null]),this.dispatchEvent("onFocusChange",[this._focused,n]))},focusFirstItem:function(){var t=this.getRenderer("first");t&&t.setFocus()},scrollHandler:function(){this._ignoreNextScrollEvent?this._ignoreNextScrollEvent=!1:this.updateMainRenderer(),this.maybeLoadMore()},updateMainRenderer:function(){var t,e,n=this.getCurrentRenderers(),i=this.elements.container.getOffsets().y,s=i+this.elements.container.getSize().height/4;for(t=0,e=n.length;t<e;t++){var o=n[t].getContainer();if(o){var a=o.getOffsets().y;if(a>s){t--;break}if(a>=i)break}}var r=this._main,l=this._main=n[t]||n[n.length-1];l!==r&&(l&&l.dispatchEvent("onMainChange",[!0]),r&&r.dispatchEvent("onMainChange",[!1]),this.dispatchEvent("onMainChange",[l,r]))},_getGroups:function(){var t=[];function e(e,n){t.push({maxDate:Math.floor(n/1e3),label:e})}var n=new Date;return n.setMilliseconds(0),e("Doc are you telling me you built a time machine?",n),n.setHours(0),n.setMinutes(0),n.setSeconds(0),e(_("Today"),n),n.setDate(n.getDate()-1),e(_("Yesterday"),n),n.setDate(n.getDate()-1),e(_("2 days ago"),n),e(_("More than 2 days ago"),-1/0),t},updateGroups:function(){if(this.options.showGroups){var e,n=this._getGroups(),i=0;this.getInnerElement().getElements(".group-label").invoke("destroy"),this.getCurrentRenderers().forEach(function(s){for(var o=s.getItem().getPublishTimestamp(),a=!1;!e||e.maxDate>o;)e=n[i],i++,a=!0;a&&t.createElement("div",{class:"group-label",text:e.label}).inject(s.getContainer(),"before")})}},maybeLoadMore:function(){!this._waitingForMore&&this.options.loadMore&&this.setDelayed("maybeLoadMore",function(){var t=this.elements.scroller.getInnerElement(),e=t.getScrolls();e.height&&e.top+t.getSize().height+this._loadThreshold>=e.height&&(this._waitingForMore=!0,this.getContainer().addClassName("loading"),this.getSpinner().start(),s.resolve(this.options.loadMore(this.options.loadCountHint)).fin(function(){this._waitingForMore=!1,this.getContainer().removeClassName("loading"),this.getSpinner().stop()}.bind(this)).done(function(t){this.addItems(t||[])}.bind(this)))},300)},getRenderer:function(){function e(t,e,n,i){var s=t.getRenderer();return l.getNext(e,s,{reverse:n,condition:i})}function n(t){return function(e){return e.detect(function(e){return e.getItem().getId()===t})}}var i={previous:function(t){return e(this,t,!0)},next:function(t){return e(this,t,!1)},previousUnread:function(t){return e(this,t,!0,function(t){return t.getItem().hasFlag("unread")})},nextUnread:function(t){return e(this,t,!1,function(t){return t.getItem().hasFlag("unread")})},focused:function(){return this.getRenderer()},firstVisible:function(t){var e=this.getInnerElement();return t.detect(function(t){return t.getContainer().isInViewport(e)})},last:function(t){return t[t.length-1]},first:function(t){return t[0]},main:function(){return this._main}};return function(e){var s,o,a=this.getCurrentRenderers();switch(t.typeOf(e)){case!1:s=this._focused;break;case"number":s=a[e];break;case"object":e instanceof c?s=function t(e,n){if(n)return e.includes(n)?n:t(e,c.fromElement(n.getContainer().getParent()))}(a,e):"function"==typeof e.getId&&(o=n(e.getId()));break;case"function":o=e;break;default:o=i[e]||n(e)}return o&&(s=o.call(this,a)),s}}(),empty:function(){return this._focused&&this._setFocus(this._focused,!1),this._main=null,this.getCurrentRenderers().forEach(function(t){t.getItem().removeEvents(this._itemEvents),t.destroy()},this),this.getInnerElement().empty(!0),this},refresh:function(){this.empty(),this.maybeLoadMore(!0)},setMessage:function(t){var e=this.getInnerElement(),n=e.getElement(".nv-renderer-message");n&&n.destroy(),t&&(e.addContent({tag:"div",class:"nv-renderer-message "+(r.isSmartReaderView()?"nv-smallmessage":"nv-feed-reader-message"),html:{tag:"div",class:r.isSmartReaderView()?"":"uwa-message simple",html:{tag:"p",text:t}}}),this.dispatchEvent("onSetMessage",e)),this.elements.spinnerContainer.toggle(!t)},onResize:function(){this._syncClassNames();var t=this.getRenderer();t&&t.scrollTo(),this.maybeLoadMore()},_syncClassNames:function(){var t=this.elements.container.clientWidth;this.elements.container.toggleClassName("small-view",t<320).toggleClassName("medium-view",t>=320&&t<720).toggleClassName("large-view",t>=720)}});return u(p),t.namespace("ItemListRenderer",p,App)}.apply(e,i))||(t.exports=s)},function(t,e,n){"use strict";var i,s;i=[n(9),n(46)],void 0===(s=function(t,e){return t.extend({init:function(t){this._sources=t?t.slice():[];var n=[];this._sources.forEach(function(t){n=n.concat(t.getFacets())}),e.sortFacets(n),this._sourceFacets=n},asArray:function(){return this._sources.slice()},getSourceFacets:function(){return this._sourceFacets},getSourceById:function(t){return this._sources.detect(function(e){return e.id===t})},getSourceFacetByIdFacet:function(t,e){var n=this.getSourceById(t);return n?n.getFacets().detect(function(t){return t.name===e}):null},getSourceFacetsByView:function(){var t={};return this.getSourceFacets().forEach(function(e){var n=e.getView();if(n.combineWith){var i=n.combineWith+"Combined";t[i]||(t[i]=[]),t[i].push(e)}else t[n.name]||(t[n.name]=[]),t[n.name].push(e)}),t},isSomeTimeFacets:function(){return this.getSourceFacets().some(function(t){return t.isTimeData()})},isSomeQuantitativeFacets:function(){return this.getSourceFacets().some(function(t){return t.isQuantitativeData()})},getTotal:function(){var t=0;return this.getSourceFacets().forEach(function(e){t+=e.getTotal()}),t},getLowerStatus:function(){var t,e=this.asArray()[0].getStatus().progress;return this.asArray().forEach(function(n){(t=n.getStatus().progress)<=e&&(e=t)}),e},hasNotes:function(){return this.getSourceFacets().some(function(t){return t.getNotes().length>0})},toJson:function(){return this.asArray().map(function(t){return t.toJson()})}})}.apply(e,i))||(t.exports=s)},function(t,e,n){var i=n(47),s=n(28),o=s["__core-js_shared__"]||(s["__core-js_shared__"]={});(t.exports=function(t,e){return o[t]||(o[t]=void 0!==e?e:{})})("versions",[]).push({version:i.version,mode:n(127)?"pure":"global",copyright:"© 2019 Denis Pushkarev (zloirock.ru)"})},function(t,e,n){var i=n(74),s=n(42),o=n(129);t.exports=function(t){return function(e,n,a){var r,l=i(e),c=s(l.length),u=o(a,c);if(t&&n!=n){for(;c>u;)if((r=l[u++])!=r)return!0}else for(;c>u;u++)if((t||u in l)&&l[u]===n)return t||u||0;return!t&&-1}}},function(t,e){e.f=Object.getOwnPropertySymbols},function(t,e,n){var i=n(100);t.exports=Array.isArray||function(t){return"Array"==i(t)}},function(t,e,n){var i=n(37)("iterator"),s=!1;try{var o=[7][i]();o.return=function(){s=!0},Array.from(o,function(){throw 2})}catch(t){}t.exports=function(t,e){if(!e&&!s)return!1;var n=!1;try{var o=[7],a=o[i]();a.next=function(){return{done:n=!0}},o[i]=function(){return a},t(o)}catch(t){}return n}},function(t,e,n){"use strict";var i=n(30);t.exports=function(){var t=i(this),e="";return t.global&&(e+="g"),t.ignoreCase&&(e+="i"),t.multiline&&(e+="m"),t.unicode&&(e+="u"),t.sticky&&(e+="y"),e}},function(t,e,n){"use strict";var i=n(168),s=RegExp.prototype.exec;t.exports=function(t,e){var n=t.exec;if("function"==typeof n){var o=n.call(t,e);if("object"!=typeof o)throw new TypeError("RegExp exec method returned something other than an Object or null");return o}if("RegExp"!==i(t))throw new TypeError("RegExp#exec called on incompatible receiver");return s.call(t,e)}},function(t,e,n){"use strict";n(333);var i=n(67),s=n(73),o=n(29),a=n(101),r=n(37),l=n(260),c=r("species"),u=!o(function(){var t=/./;return t.exec=function(){var t=[];return t.groups={a:"7"},t},"7"!=="".replace(t,"$<a>")}),h=function(){var t=/(?:)/,e=t.exec;t.exec=function(){return e.apply(this,arguments)};var n="ab".split(t);return 2===n.length&&"a"===n[0]&&"b"===n[1]}();t.exports=function(t,e,n){var d=r(t),p=!o(function(){var e={};return e[d]=function(){return 7},7!=""[t](e)}),m=p?!o(function(){var e=!1,n=/a/;return n.exec=function(){return e=!0,null},"split"===t&&(n.constructor={},n.constructor[c]=function(){return n}),n[d](""),!e}):void 0;if(!p||!m||"replace"===t&&!u||"split"===t&&!h){var f=/./[d],g=n(a,d,""[t],function(t,e,n,i,s){return e.exec===l?p&&!s?{done:!0,value:f.call(e,n,i)}:{done:!0,value:t.call(n,e,i)}:{done:!1}}),v=g[0],b=g[1];i(String.prototype,t,v),s(RegExp.prototype,d,2==e?function(t,e){return b.call(t,this,e)}:function(t){return b.call(t,this)})}}},function(t,e,n){var i=n(89),s=n(328),o=n(255),a=n(30),r=n(42),l=n(257),c={},u={};(e=t.exports=function(t,e,n,h,d){var p,m,f,g,v=d?function(){return t}:l(t),b=i(n,h,e?2:1),y=0;if("function"!=typeof v)throw TypeError(t+" is not iterable!");if(o(v)){for(p=r(t.length);p>y;y++)if((g=e?b(a(m=t[y])[0],m[1]):b(t[y]))===c||g===u)return g}else for(f=v.call(t);!(m=f.next()).done;)if((g=s(f,b,m.value,e))===c||g===u)return g}).BREAK=c,e.RETURN=u},function(t,e,n){var i=n(28).navigator;t.exports=i&&i.userAgent||""},function(t,e,n){"use strict";var i=n(28),s=n(7),o=n(67),a=n(146),r=n(113),l=n(208),c=n(145),u=n(31),h=n(29),d=n(204),p=n(141),m=n(246);t.exports=function(t,e,n,f,g,v){var b=i[t],y=b,w=g?"set":"add",x=y&&y.prototype,C={},_=function(t){var e=x[t];o(x,t,"delete"==t?function(t){return!(v&&!u(t))&&e.call(this,0===t?0:t)}:"has"==t?function(t){return!(v&&!u(t))&&e.call(this,0===t?0:t)}:"get"==t?function(t){return v&&!u(t)?void 0:e.call(this,0===t?0:t)}:"add"==t?function(t){return e.call(this,0===t?0:t),this}:function(t,n){return e.call(this,0===t?0:t,n),this})};if("function"==typeof y&&(v||x.forEach&&!h(function(){(new y).entries().next()}))){var S=new y,E=S[w](v?{}:-0,1)!=S,k=h(function(){S.has(1)}),T=d(function(t){new y(t)}),A=!v&&h(function(){for(var t=new y,e=5;e--;)t[w](e,e);return!t.has(-0)});T||((y=e(function(e,n){c(e,y,t);var i=m(new b,e,y);return null!=n&&l(n,g,i[w],i),i})).prototype=x,x.constructor=y),(k||A)&&(_("delete"),_("has"),g&&_("get")),(A||E)&&_(w),v&&x.clear&&delete x.clear}else y=f.getConstructor(e,t,g,w),a(y.prototype,n),r.NEED=!0;return p(y,t),C[t]=y,s(s.G+s.W+s.F*(y!=b),C),v||f.setStrong(y,t,g),y}},function(t,e,n){for(var i,s=n(28),o=n(73),a=n(126),r=a("typed_array"),l=a("view"),c=!(!s.ArrayBuffer||!s.DataView),u=c,h=0,d="Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array".split(",");h<9;)(i=s[d[h++]])?(o(i.prototype,r,!0),o(i.prototype,l,!0)):u=!1;t.exports={ABV:c,CONSTR:u,TYPED:r,VIEW:l}},function(t,e,n){"use strict";var i,s;i=[n(1),n(15),n(25),n(18),n(13),n(267),n(19),n(20),n(2),n(352)],void 0===(s=function(t,e,n,i,s,o,a,r,l,c){var u,h,d={},p=!1,m=window.App||{},f=m._serverTimeOffset||0,g={};return e.addEvent.call(window,"beforeunload",function(){p=!0}),d.request=function(e,i,o){var a,d=o&&t.clone(o.urlParameters)||{},m=o&&Boolean(o.dataAsJSON)||!1,v=new r(function(o,v){var b=l.isInStartpage()?"":l.Config.urls.startpage;function y(t,e){if("failure"===t){e instanceof Error&&(e=e.message);var n=/NetworkError: .* ResponseCode with value "(\d+)/.exec(e);n&&"http_0"===(e="http_"+n[1])&&(p?e="page_exiting":c.setOffline()),e||(e=t)}else e=t;v(e)}b+="/api/"+e;var w={type:d.format?null:"json",method:"POST",timeout:!1,headers:{},onComplete:function(t){c.setOnline(),t&&("number"==typeof t.server_time&&(f=Date.now()/1e3-t.server_time),t.late&&(g=t.late),void 0===u?u=t.api_version:"number"==typeof t.api_version&&t.api_version>u&&void 0===h&&(h=setTimeout(function(){document.location.reload(!0)},6e5*Math.random()))),o(t)},onFailure:y.bind(null,"failure"),onTimeout:y.bind(null,"timeout"),onCancel:y.bind(null,"cancel")},x=r.resolve();if(l.isPassportProxyAvailable()){w.proxy="passport";var C=l.get3DDashboardContext();C&&(delete d.pageId,delete i.pageId,d.dashboardId=C.dashboardId||"",d.tenant=d.tenant||i.tenant||l.get3DDPlatformId()||"",delete i.tenant)}else s.matchUrl(b,window.location)||(w.proxy="ajax");w.data=m?JSON.stringify(i):function(e){if(t.is(e,"plain")){var n,i=!1;for(n in e)if(t.is(e[n],"file")){i=!0;break}if(i){var s=new FormData;for(n in e)null!==e[n]&&void 0!==e[n]&&s.append(n,e[n]);e=s}}return e}(i),t.is(w.data,"formdata")||(w.headers["Content-Type"]=m?"application/json":"application/x-www-form-urlencoded"),x.done(function(){b+="?"+s.toQueryString(d),a=n.request(b,w)})});return v.cancel=function(){a&&a.cancel()},v},d.getServerTime=function(){return Math.round(Date.now()/1e3-f)},d.getServerLate=function(t){return g[t]||0},t.namespace("Api/Request",d,m)}.apply(e,i))||(t.exports=s)},function(t,e,n){"use strict";var i,s;i=[n(1),n(3),n(10),n(8)],void 0===(s=function(t,e,n,i){var s=t.createElement;return n.extend({name:"nv-auth-input",init:function(t){this._parent(t),this.buildField()},buildField:function(){var t=this.options.type,e=this.options.name,n=this.options.text,o="password"===t,a={name:e,type:t,"data-type":t,placeholder:n||"","data-placeholder":n||""};this.input=new i.Text({attributes:a,value:this.options.value||""});var r=s("div",{class:"uwa-icon eye"});this.elements.container=s("div",{class:this.getClassNames()+" "+t}).addContent(this.elements.error=s("div",{class:this.getClassNames("-error")}),s("div",{class:this.getClassNames("-field")}).addContent(this.input,o?r:"")),r.addEventListener("mousedown",this.onMouseMove.bind(this)),r.addEventListener("mouseup",this.onMouseMove.bind(this)),r.addEventListener("mouseover",this.onMouseMove.bind(this)),this.input.addEvent("onKeyDown",function(){this.setError()}.bind(this)),this.setError()},focus:function(){this.input.focus()},getValue:function(){return this.input.getValue()},setValue:function(t){return this.input.setValue(t||"")},setError:function(t){this.elements.container.toggleClassName("nv-auth-input-iserror",!!t),this.elements.error.setContent(t)},onMouseMove:function(t){var n=e.findElement(t,".nv-auth-input .eye");"mousedown"===t.type?(n.addClassName("open"),this.input.getInputElement().setAttribute("type","text")):"mouseup"!==t.type&&"mouseover"!==t.type||(n.removeClassName("open"),this.input.getInputElement().setAttribute("type","password"))}})}.apply(e,i))||(t.exports=s)},function(t,e,n){"use strict";var i,s;i=[n(2),n(4),n(357),n(271)],void 0===(s=function(t,e,n,i){function s(e){return e=t.isIn3DDashboard()&&(e||t.get3DDPlatformId()),i.get("searches",e)}var o=n.extend({defaults:{query:{topic:"",context:{}}},getFaviconURL:function(){return this.get("icon")||e.getStaticUrl("/themes/base/img/panel/filter.png")},getTitle:function(){return""},hasUniqueStream:function(){return Boolean(this.get("hasUniqueStream"))},getFacets:function(){var e=this.get("facets");if(!e||!t.NPD.socialpackFacets)return e;var n={};for(var i in Object.keys(t.NPD.socialpackFacets).forEach(function(t){e[t]&&(n[t]=e[t])}),e)n[i]||(n[i]=e[i]);return n},isSearch:function(){return!0}});return o.factory=function(t,e){var i=s((e=e||{}).x3dPlatformId),a=!t.id&&t.query,r=a?JSON.stringify(t.query):t.id,l=i.get(r);return delete t.itemCount,n.preFactory(t,e,l),l?l.set(t,{sync:!0}):(a||r)&&(l=new o(t,{silent:!0}),i.set(r,l)),l},o.getFromCache=function(t,e){return s(e).get(t)},o}.apply(e,i))||(t.exports=s)},function(t,e,n){"use strict";var i,s;i=[n(1),n(3),n(13),n(9),n(22),n(2),n(21),n(173),n(148),n(6)],void 0===(s=function(t,e,n,i,s,o,a,r,l,c){function u(t,e,n){return e<=t&&t<=n}var h=i.singleton(s,{uninitializedCalls:"ignore",options:{enableResize:!0,minWidth:140},init:function(t,e){var n,i;for(this.setOptions(e),this.columnDivs=[],this.container=t.getElement("#columns"),this.drag=!1,this.numCols=-1,this.columnSizes=[],this.layout="",this.columnDivs=this.container.getElements("div.column"),n=1;n<=4;n++)(i=this.columnDivs[n-1]).setAttribute("colNum",n),this["col"+n]=i,i.nextElementSibling.style.visibility=this.options.enableResize?"visible":"hidden";l.registerResizeEvent(this.updateLayout.bind(this))},resetLayout:function(t){var n;for(this.columnSizes=this.columnSizes||[],n=0;n<4;n++)this.columnSizes[n]=n<this.numCols?1:0;return this.updateLayout(),t&&e.stop(t),this},updateLayout:function(){if(!(this.numCols<0)){this.columnSizes||(this.columnSizes=[]);var t,e,i,s,o=r.classPrefix+"-"+(this.layout||this.numCols+"-0");for(-1===this.container.className.search(/flexilayout-\d-\d/)?this.container.addClassName(o):this.container.className=this.container.className.replace(/flexilayout-\d-\d/,o),t=!1,e=0;e<4;e++)this.columnSizes[e]=parseFloat(this.columnSizes[e],10),this.columnSizes[e]>100&&(t=!0),this.columnSizes[e]||(this.columnSizes[e]=1),e+1>this.numCols&&(this.columnSizes[e]=0);for(i=n.toArray(this.columnSizes),t&&(r.isDefault()?(i=this.columnSizes=a.getFocused().dataObj.columnSizes=r.px2percent(i),this.saveLayout()):(this.resetLayout(),a.getFocused().dataObj.columnSizes=[],this.saveLayout())),e=0;e<this.columnDivs.length;e++)s=this.columnDivs[e],i[e]<=.01&&(i[e]=0),1!==i[e]&&0!==i[e]?s.style.width=i[e]+"%":s.style.width="";return this}},saveLayout:function(e){var i=n.toArray(this.columnSizes);return!e&&t.equals(i,a.getFocused()._savedColumnSizes)||(c.tabUpdate({tabId:a.getFocused().dataObj.id,cols:a.getFocused().dataObj.cols,options:{columnSizes:a.getFocused().dataObj.columnSizes,layout:a.getFocused().dataObj.layout}}).done(),a.getFocused()._savedColumnSizes=i),this},getColumn:function(t){return this["col"+t]},columnCount:function(){return this.numCols},set:function(t,e){var n;if("object"==typeof t)for(n in t)t.hasOwnProperty(n)&&this.set(n,t[n]);else{if(!["columnSizes","numCols","layout"].includes(t))throw new Error("Cannot set this value");this[t]=e}return this},isVisible:function(t){return o.Page.inSmartReaderView||t>=1&&t<=this.columnCount()},isTop:function(t){if(!this.isVisible(t))return!1;var e=this.getColumn(t);return!!e&&e.offsetTop===this.getColumn(1).offsetTop},getVisibleColumns:function(){for(var t=[],e=1,n=this.columnCount();e<=n;e++)this.getColumn(e).isHidden()||t.push(this.getColumn(e));return t},getColumnsByRows:function(){var e,n=this.getVisibleColumns(),i=[],s=0;return n.forEach(function(n){var o=n.getBoundingClientRect();t.is(e)||(e=o.top),o.top!==e&&(s++,e=o.top),t.is(i[s])||(i[s]=[]),i[s].push(n)}),i},getDeltaColumn:function(t){var e=this.getColumn(t).getBoundingClientRect();return this.container.getBoundingClientRect().bottom-e.bottom},hasColumnBelow:function(t){var e=this.getColumn(t),n=e.getBoundingClientRect();return this.getVisibleColumns().some(function(t){if(e===t)return!1;var i=t.getBoundingClientRect();return!!(i.top>=n.bottom&&(u(i.left,n.left,n.right)||u(i.right,n.left,n.right)||i.left<=n.left&&i.right>=n.right))||void 0})}});return App.Columns=h,h}.apply(e,i))||(t.exports=s)},function(t,e,n){"use strict";var i,s;i=[n(1),n(87)],void 0===(s=function(t,e){var n=[].forEach;return function(t){var i="$ltd:"+Math.random();t.fromElement=function(t){for(var n;t;){if(n=e.get(t,i))return n;t=t.parentNode}},t.prototype.linkToDom=function(){return n.call(arguments,function(t){e.set(t,i,this)},this),this},t.prototype.unlinkToDom=function(){return n.call(arguments,function(t){e.get(t,i)===this&&e.set(t,i)},this),this}}}.apply(e,i))||(t.exports=s)},function(t,e,n){"use strict";var i,s;i=[n(2),n(21),n(176),n(17),n(374)],void 0===(s=function(t,e,i,s,o){return{focus:function(a){t.Page.inSmartReaderView?function(t){n.e(0).then(function(){var e=[n(118)];(function(e){e.display("widget",t.id)}).apply(null,e)}).catch(n.oe)}(a):function(t){var n;o.stop();try{n=e.getById(t.tab),i.selectTab(n),s.getById(t.id).scrollTo({onTop:!0,margin:10,onComplete:function(){o.run()}}).focus()}catch(t){console.log(t)}}(a)}}}.apply(e,i))||(t.exports=s)},function(t,e,n){"use strict";var i,s;i=[n(1),n(15),n(10),n(372)],void 0===(s=function(t,e,n,i){var s=n.extend({name:"nv-dropdown",defaultOptions:{scroller:!1,scrollerOptions:{momentum:!0,scrollDrag:!0,lockDirection:!0,scrollbarV:!0,scrollbarH:!1,scrollbar:{autoHide:!1},preventDefaultMouseWheel:!0}},init:function(t,e){this._parent(e),this.button=t.setStyle("position","relative"),this.scrollableParent=null,this.putNextToButton=this.putNextToButton.bind(this),this.shown=!1,this.build()},toElement:function(){return this.element},getContentElement:function(){return this.contentElement},build:function(){this.element=t.createElement("div",{class:this.getClassNames()}).inject(this.button),this.options.scroller&&(this.contentElement=t.createElement("div").inject(this.element),this.scroller=new i(this.contentElement,{scrollerOptions:this.options.scrollerOptions,orientation:"vertical"}),this.element.setStyle("zIndex",22)),this.element.setStyle("position","absolute").hide(),this.button.addEvent("click",this.toggle.bind(this)),this.button.addClassName(this.getClassNames("-button")),this.button.addEvent("mouseleave",this.hide.bind(this))},putNextToButton:function(){var t=this.element.getSize(),e=this.button.getPosition(this.scrollableParent),n=this.button.getSize(),i=this.scrollableParent.getSize(),s=this.scrollableParent.getScrolls(),o=Math.floor(e.y+n.height+t.height)>i.height+s.top;o&&(o=e.y>=t.height),this.element.setStyles({top:o?1-t.height:n.height-1,left:Math.min(e.x+t.width,i.x)-t.width-e.x})},toggle:function(){this.shown?this.hide():this.show()},calculateParent:function(){if(!this.scrollableParent){var t,e,n=this.button.getParents();for(t=0;t<n.length&&(this.scrollableParent=n[t],"auto"!==(e=this.scrollableParent.getStyle("overflow-y"))&&"hidden"!==e);t+=1);this.scrollableParent||(this.scrollableParent=window)}},show:function(){this.shown||(this.calculateParent(),this.element.setStyle("visibility","hidden").show(),setTimeout(function(){this.element.setStyle("visibility",""),this.shown=!0,this.button.addClassName("open"),this.dispatchEvent("onShow"),this.putNextToButton()}.bind(this),1),window.addEventListener("resize",this.putNextToButton))},hide:function(){this.shown&&(this.calculateParent(),this.element.hide(),this.button.removeClassName("open"),window.removeEventListener("resize",this.putNextToButton),this.scrollableParent.removeEvent("scroll",this.putNextToButton),this.shown=!1,this.dispatchEvent("onHide"))}});return App.UI||(App.UI={}),App.UI.DropDown=s,s}.apply(e,i))||(t.exports=s)},function(t,e,n){"use strict";var i,s;i=[n(1),n(9),n(19),n(23),n(2),n(116),n(45)],void 0===(s=function(t,e,n,i,s,o,a){var r={},l=[],c="";function u(){r.sidebar.getParent()||s.isSmartReaderView()&&r.sidebar.inject(document.body.getElement("#smartreader-mainContainer"),"after")}var h=e.extend({init:function(e,n,o){this.container=s.isSmartReaderView()?App.SmartReader.UI.container:document.body.getElement("#main-container")||document.body.getElement("#tagContainer")||document.body,r.sidebar||function(){r.sidebar=t.createElement("div",{class:"nv-sidebar nv-sidebar-right"}),r.sidebarContainer=t.createElement("div",{id:"tagging-sidebarContainer",class:"nv-sidebarContainer"}),r.header=t.createElement("div",{class:"nv-sidebar-header"}),r.tabOut=t.createElement("div",{class:"nv-sidebar-scroller"});var e=new i({element:r.tabOut,shadows:!0});r.footer=t.createElement("div",{class:"nv-sidebar-footer"}),r.tabIn=e.getInnerElement(),r.sidebar.addContent(r.sidebarContainer.addContent(r.header,e,r.footer))}(),u(),this.resizeApp(),window.addEventListener("resize",this.resizeApp.bind(this)),this.id=e,this.title=n,this.iconClass=o,l.push(this),this.updateHeader(),this.tab=t.createElement("div",{class:"nv-sidebar-tab",id:this.id+"-sidebar"}).inject(r.tabIn)},updateHeader:function(){l.length>1&&r.header.addClassName("multitabs");var e=t.createElement("a",{href:"_#",id:"tab-"+this.id}).addContent(t.createElement("span",{text:this.title})).addEvent("click",o(this.switchTab,this)).inject(r.header,"tagging"===this.id?"top":"bottom").getParent().getElements("a")[1];e&&e.addClassName("second")},toElement:function(){return this.tab},switchTab:function(){r.header.getElements("a").invoke("removeClassName","selected"),r.header.getElement("#tab-"+this.id).addClassName("selected"),r.sidebar.show();var t=r.sidebarContainer.getElement(".nv-sidebar-tab.selected");return t&&t.removeClassName("selected"),c=this.id,this.tab.addClassName("selected"),this},getSelectedTabId:function(){var t=r.header.getElement(".selected");return t&&t.id},open:function(){return u(),this.switchTab(),this.toggleSidebar("open"),this},close:function(){this.toggleSidebar("close")},hasSidebar:function(){return!document.body.hasClassName("hideSidebarRight")},toggleSidebar:function(t){!this.container||"open"===t&&this.hasSidebar()||"close"===t&&!this.hasSidebar()||(u(),"open"===t?document.body.removeClassName("hideSidebarRight"):"close"===t?document.body.addClassName("hideSidebarRight"):document.body.toggleClassName("hideSidebarRight"),s.isSmartReaderView()&&App.SmartReader&&App.SmartReader.Feed&&App.SmartReader.Feed.resizeNotification&&App.SmartReader.Feed.resizeNotification(),"open"===t||this.hasSidebar()?this.saveStatus(c):this.saveStatus(""),a.set("smartreader.hideSidebarRight",this.hasSidebar()?0:1),a.save(),this.resizeApp())},saveStatus:function(t){a.get("showSidebarRight")!==t&&(a.set("showSidebarRight",t),a.save())},resizeApp:function(t){if(!(App&&App.AddContent&&App.AddContent.isOpen())){var e,n=t||this.getAvailableAppHeight();if(!(isNaN(n)||n<=0||(r.sidebarContainer.setStyle("height",n),e=n-2*parseInt(r.sidebarContainer.getStyle("marginTop"),10),isNaN(e)||n<=0)))return r.sidebarContainer.setStyle("height",e),e}},getAvailableAppHeight:function(){if(s.isSmartReaderView()){if(App.SmartReader.getAvailableAppHeight)return App.SmartReader.getAvailableAppHeight()}else{var t=r.sidebar.getParent(".nv-modal-box");if(t)return t.getSize().height}var e=n.getSize().height,i=(document.body.getElement("#sub-container")||this.container).getPosition().y,o=n.getScrolls().y;if(o<i&&(e-=i-o),s.isSmartReaderView()){var a=document.body.getElement("#footer-toggle"),l=document.body.getElement("#footer-pu");e-=(a||l).getSize().height}return e}});return h.getFooter=function(){return r.footer},h.getContainer=function(){return r.sidebar},App.SidebarRight=h,h}.apply(e,i))||(t.exports=s)},function(t,e,n){"use strict";var i,s;i=[n(1),n(4),n(305),n(276),n(730),n(731),n(23)],void 0===(s=function(t,e,n,i,s,o,a){var r=t.createElement;return i.extend({open:function(t){this.buildSubjectsSelectors(),this._parent(t)},showNextSubstep:function(){var t=Object.keys(this.subjects),n=e.getNext(t,this.currentSubstep,{condition:function(t){return this.subjects[t].selector.isEmpty()}.bind(this)});if(n)return this.subjects[n].selector.focusAddButton(),!0},close:function(t){this.gob&&this.gob.destroy(),this._parent(t)},buildStep:function(){this.elements.container=r("div",{class:"nv-agency-step nv-agency-step--brand"}).addContent(r("div",{class:"nv-agency-step-content wrapper"}).addContent(this.buildTitle(),new a({element:r("div",{class:"nv-agency-step-table"}).addContent(this.elements.subjects=r("div",{class:"nv-agency-step-subjects"}),this.elements.subjectContainer=r("div",{class:"nv-agency-step-subjectdetails"})),shadows:!0}),this.buildNavigation()))},buildSubjectsSelectors:function(){},buildSubjectSelector:function(t,e,n,i,o){this.subjects[t]={title:e,isMultiple:i,selector:new s({title:e,multiple:i,noInput:o}),details:n},this.subjects[t].selector.addEvents({onSelected:this.onSubjectSelected.bind(this,t),onAdding:this.onAddingSubject.bind(this,t,o),onTitleChange:this.onRenameSubject.bind(this,t)}),this.elements.subjects.addContent(this.subjects[t].selector);var a=this.getData();if(a&&a[t]){var r=a[t];Array.isArray(r)||(r=[r]),r.forEach(function(e){this.buildSubjectSelectorItem(this.subjects[t].selector,e.name,e.image)}.bind(this))}},buildSubjectSelectorItem:function(t,e,n){t.createNewSubject({title:e,image:n})},displaySubjectDetails:function(t,e,n){this.currentSubject&&this.currentSubject!==t&&this.subjects[this.currentSubject].selector.unselectSubjects(),this.currentSubject=t,this.currentSubjectId=e,this.elements.subjectContainer.empty(!0);var i={title:this.subjects[t].title,data:this.getCurrentSubjectData()||n,components:this.subjects[t].details};this.buildSubjectDetails(i)},buildSubjectDetails:function(t){this.elements.subjectContainer.addContent(this.elements.subjectDetails=new o(t)),this.elements.subjectDetails.addEvents({onImageChange:this.onSubjectImageChange.bind(this),onClickDelete:this.onDeleteSubject.bind(this),onChange:this.setCurrentSubjectData.bind(this)})},displayGob:function(e,i){var s=this.getData(),o="30px 0 0 130px",a=this.elements.subjectDetails.isDisabled()?"rgba(82, 82, 82, 0)":"rgba(82, 82, 82, 0.9)";"secondaries"===e?(e="secondary",o="150px 0 0 130px"):"influencers"===e?(e="influencer",o=(s.secondaries?60*s.secondaries.length+300:300)+"px 0 0 130px"):"thirdly"===e&&this.subjects[e].isMultiple&&(o=(s.secondaries?60*s.secondaries.length+300:300)+(s.influencers?60*s.influencers.length+130:130)+"px 0 0 130px");var r=t.extend({primary:{margin:o,overlayColor:a},secondary:{margin:o,overlayColor:a},influencer:{margin:o,overlayColor:a},thirdly:{margin:o,overlayColor:a}},i,!0),l=[{highlightMode:"default",highlights:[this.elements.subjects],actions:[{icon:"",title:r[e].title,content:r[e].text+'<p class="nv-agency-gob-note">'+r[e].note+"</p>",anchor:this.elements.subjects,isTop:!0,margin:r[e].margin,className:"nv-agency-gob nv-agency-gob-"+e,width:450,textPadding:"30px",arrow:{height:140,rotate:140,side:"left",margin:"-190px 0 0 -580px"}}]}];this.gob&&this.gob.destroy(),this.gob=new n({steps:l,overlayColor:r[e].overlayColor,hideCoaching:!0,relativePosition:!0}),this.elements.subjectContainer.addContent(this.gob)},setCurrentSubjectData:function(){if(this.currentSubject){var t=this.getData()[this.currentSubject]||[],e=this.elements.subjectDetails.getData();this.subjects[this.currentSubject].isMultiple?t[this.currentSubjectId]=e:t=e;var n={};n[this.currentSubject]=t,this.setData(Object.assign(this.getData(),n))}},getCurrentSubjectData:function(){var t=this.getData()[this.currentSubject],e=this.subjects[this.currentSubject].isMultiple;if(t)return e?t[this.currentSubjectId]:t},deleteCurrentSubjectData:function(){var t=this.getData();this.subjects[this.currentSubject].isMultiple?t[this.currentSubject].splice(this.currentSubjectId,1):delete t[this.currentSubject],this.setData(t)},validateData:function(){var t=this.options.subjectType||this.dataFields[0];this.disableNext(!this.getData()[t])},onStepOpened:function(){this.subjects[this.currentSubject].selector.focusAddButton()},onSubjectImageChange:function(t){this.subjects[this.currentSubject].selector.setImageURL(t,this.currentSubjectId),this.setCurrentSubjectData()},onSubjectSelected:function(t,e){this.currentSubstep=t,this.displaySubjectDetails(t,e.id,{name:e.title}),this.setCurrentSubjectData()},onAddingSubject:function(t,e){this.currentSubstep=t,e?(this.displaySubjectDetails(t,0,{name:t}),this.setCurrentSubjectData()):this.getData()[t]||this.displayGob(t)},onDeleteSubject:function(){this.deleteCurrentSubjectData(),this.displaySubjectDetails(this.currentSubject),this.subjects[this.currentSubject].selector.deleteSubject()},onRenameSubject:function(e,n){var i=this.subjects[this.currentSubject].selector.getTitle(n);this.elements.subjectDetails.setData(Object.assign(t.clone(this.elements.subjectDetails.getData()),{name:i})),this.setCurrentSubjectData()}})}.apply(e,i))||(t.exports=s)},function(t,e,n){"use strict";var i,s;i=[n(16),n(2),n(21),n(6)],void 0===(s=function(t,e,n,i){var s={};function o(t){var i,s=n.getFocused();return i=t.ownerId?t.ownerId:s&&s.dataObj.ownerId?s.dataObj.ownerId:e.User.id,{preconfigureType:t.type,itemId:t.id,target:t.target,pageId:e.Page.id,ownerId:i}}function a(e){var n=o(e),a=JSON.stringify(n);return s[a]?t.resolve(s[a]):i.shareStore(n).then(function(t){return s[a]=t,t})}return a.getParameters=o,a}.apply(e,i))||(t.exports=s)},function(t,e,n){"use strict";var i,s;i=[n(1),n(26),n(3),n(10),n(35),n(27),n(221),n(111),n(62)],void 0===(s=function(t,e,n,i,s,o,a,r,l){return i.extend({init:function(t){this._name=null,this._container=t.container,this._item=t.item,this._title=t.title,this._els={},this.build()},build:function(){},toggleTab:function(t){var e=this._container.getElement("div.tab.selected"),i=n.findElement(t,"div.tab");"div"===n.getElement(t).getTagName()&&(i!==e?(e&&this.closeTab(e),this.openTab(i)):this.closeTab(i))},onCloseExpandClick:function(t){var e=n.findElement(t,"div.tab");n.stop(t),this.closeTab(e)},openTab:function(t){var n,i=t.getElement(".expand");switch(this._name){case"ByEmail":s.log("share","byEmail");break;case"GrabLink":s.log("share","grabLink");break;case"ToPage":s.log("share","ToPage")}t.addClassName("selected"),t.removeClassName("unselected"),this.update(this._item),i&&(n=i.getSize().height,i.setStyles({display:"block",height:"0px"}),new e(i,{duration:250,transition:"quadOut",events:{onComplete:function(){i.setStyles({height:"auto"})}}}).start({height:n})),this.dispatchEvent("toggleOpenClose",!0)},closeTab:function(t){var n=this,i=t.getElement(".expand");t.removeClassName("selected"),t.getElement(".errors")&&t.getElement(".errors").empty(),i&&new e(i,{duration:250,transition:"quadOut",events:{onComplete:function(){i.setStyles({display:"none",height:"auto"}),n.toggleLoadingButton()}}}).start({height:0}),this.dispatchEvent("toggleOpenClose")},createShareURL:function(t){var e=this._item;return a({type:e.type,id:e.id||e.itemId,ownerId:e.ownerId,target:t}).fail(e.url&&function(){return e.url})},attachEvents:function(){this._els.loadingButton=this._els.tab.getElement("div.buttons .share"),this._els.loadingButton&&(this.oldButtonLabel=this._els.loadingButton.getText(),this.addEvent("onRequest",this.onRequest.bind(this)),this.addEvent("onSuccess",this.onSuccess.bind(this)),this.addEvent("onFailure",this.onFailure.bind(this)))},onLoadedPreconfigUrl:function(t,e){var n=t.preconfigUrl;e.error?this.onFailure(e.error):n?(n.set("value",e.preconfigURL),t.getElement(".share-loader")&&t.getElement(".share-loader").remove(),this.submit(t)):this.submit(t)},_updateMessage:function(t){var e,n,i=this._els.tab.getElement("textarea");if(i){if(e=i.getAttribute("itemType"),""===i.value||e!==t){switch(n="",t){case"widget":n=_("Hi, check out this cool widget!");break;case"locked":case"private":case"tab":n=_("Hi, check out this cool selection of widgets!");break;case"article":n=_("Hi, check out this cool article!")}i.value=n}i.setAttribute("itemType",t)}},onRequest:function(){this._sending=!0,this.toggleLoadingButton()},toggleLoadingButton:function(){this._els.loadingButton&&(this._sending?this._els.loadingButton.setText(_("Loading...")):this._els.loadingButton.setText(this.oldButtonLabel))},onSuccess:function(){this._sending=!1,this.toggleLoadingButton(),this.showConfirmDialog(),this._els.errors.empty()},onFailure:function(t){var e=o.getErrorMessage(t,{no_valid_recipients:_("Invalid email(s)."),too_many_preconfiguration:_("Sent mail per hour limit reached."),email_fields_empty:_("Please fill the fields."),twitter_fail:_("An error has occured on Twitter share, please try later."),copy_to_page:_("Unable to copy, please try later.")},!0);this._sending=!1,this.toggleLoadingButton(),this.displayErrorMsg(e,!1)},showConfirmDialog:function(e){var n,i;switch(r.close(),this._name){case"ToPage":n={widget:_("You successfully sent this widget to your page"),tab:_("You successfully sent this tab to your page"),locked:_("You successfully sent this locked tab to your page"),private:_("You successfully sent this private tab to your page"),article:_("You successfully sent this article to your page")};break;case"ReadLater":n={article:_("You successfully marked this article as read later")};break;default:n={widget:_("You shared this widget successfully"),tab:_("You shared this tab successfully"),locked:_("You shared this tab successfully"),private:_("You shared this tab successfully"),article:_("You shared this article successfully"),page:_("You shared this dashboard successfully")}}i=n[this._item.type]||"",e=t.merge(e||{},{titleText:this._title,confirm:{text:"",successText:i},discard:{text:""}});var s=new l(e);s.addEvent("onOpen",function(){this.onDialogComplete()}),s.show()},displayErrorMsg:function(t,e){t||(t=_("An error occured.")),e&&this.tabView.hide(),this._els.errors&&this._els.errors.setContent({tag:"p",text:t}).show()}})}.apply(e,i))||(t.exports=s)},function(t,e,n){"use strict";var i,s;i=[n(2),n(0),n(5),n(14)],void 0===(s=function(t,e,n,i){var s=i.namespace("Thumbnail").addRules({root:{width:"80px",height:"90px",backgroundColor:"#3A3A3A",padding:"8px 8px 0",boxSizing:"border-box",position:"relative"},rootDsCatalog:{background:"#fff",width:"135px",display:"flex"},clickable:{transition:"background .2s ease-out",cursor:"pointer",hover:{backgroundColor:"#4B4B4B"}},clickableDsCatalog:{hover:{backgroundColor:"#82A3B5"}},clickToPick:{hover:{$before:{position:"absolute",content:" ",top:0,left:0,width:"100%",height:"100%",backgroundColor:"#4B4B4B"},$after:{fontFamily:"uwa-icons",position:"absolute",top:"34px",left:"24px",height:48,color:"#FFF",content:"3",display:"flex",fontSize:"40px"}}},clickToPickDsCatalog:{hover:{$before:{backgroundColor:"#82A3B5"},$after:{left:"52px"}}},selected:{backgroundColor:"#ffffff",color:"#3A3A3A",hover:{backgroundColor:"#ffffff"}},disabled:{opacity:.4},icon:{fontFamily:"uwa-icons",height:48,backgroundSize:"64px 48px",backgroundRepeat:"no-repeat",fontSize:"40px",display:"flex",alignItems:"center",justifyContent:"center"},iconDsCatalog:{display:"none"},text:{display:"flex",flexFlow:"column",alignItems:"center",justifyContent:"center",textAlign:"center",overflow:"hidden",wordWrap:"break-word",height:28,margin:"3px -5px",columnWidth:"74px",fontSize:"11px"},textDsCatalog:{height:"auto",margin:"auto",fontSize:"14px",lineHeight:"1.3em"},textWrapper:{minHeight:0,width:"100%"}}),o=e.h;return n.extend({init:function(t){this._parent(t),this.onClick=this.onClick.bind(this)},render:function(t){var e=t.onClick&&!t.disabled,n=t.image?this.getThirdPartySvgUrl(t.image):t.imageURL;return o("div",{"data-id":t.id,class:"nv-thumbnail "+s("root",e&&"clickable",t.style,t.selected&&"selected",t.disabled&&"disabled",t.clickToPick&&"clickToPick","dsCatalog"===t.theme&&"rootDsCatalog",e&&"dsCatalog"===t.theme&&"clickableDsCatalog",t.clickToPick&&"dsCatalog"===t.theme&&"clickToPickDsCatalog"),onClick:e&&this.onClick,title:e&&_("Select")},o("div",{class:s("icon","dsCatalog"===t.theme&&"iconDsCatalog"),style:{backgroundImage:n?"url("+n+")":"",backgroundColor:t.iconBackground,color:t.iconColor}},t.iconCharacter),o("div",{class:s("text","dsCatalog"===t.theme&&"textDsCatalog")},o("span",{class:s("textWrapper")},t.name)))},getThirdPartySvgUrl:function(e){return t.getAssetURL("/img/third-parties/"+e+".svg")},onClick:function(){var t=this.props;t.onClick(t.selected,t)}})}.apply(e,i))||(t.exports=s)},function(t,e,n){"use strict";var i,s;i=[n(1),n(10),n(24)],void 0===(s=function(t,e,n){var i=e.extend(n,{name:"nv-notify",init:function(){this._parent(),this.messages=[]},getContent:function(){if(!this.elements.container){this.elements.container=t.createElement("div",{class:this.getClassNames(),events:{click:this._runLoop.bind(this,!0)}});try{this.elements.container.addEvent("transitionEnd",this._runLoop.bind(this,!1))}catch(t){}}return this.elements.container},show:function(t){this.messages.push(t),this._runLoop()},_runLoop:function(t){if(this.hasDelayed("loop")){if(!t)return;this.clearDelayed("loop")}var e=this.getContent(),n=e.getStyle("opacity");if(0===n){e.empty(!0).setStyle("display","none");var i=this.messages.shift();i&&(this.setDelayed("loop",this._runLoop,i.delay||5e3),e.set({html:i.content,styles:{display:"block"},class:this.getClassNames()+" uwa-message uwa-icon "+(i.class||""),"data-icon":"p"}),this.setAnimate("opening",e.setStyle.bind(e,"opacity",1)))}else 1===n&&(e.setStyle("opacity",0),this.setDelayed("closing",this._runLoop,500))}});return t.namespace("App/Components/Notify",i,window,!0)}.apply(e,i))||(t.exports=s)},function(t,e,n){"use strict";var i,s;i=[n(19),n(56),n(164),n(235),n(158),n(51),n(107),n(4),n(1)],void 0===(s=function(t,e,n,i,s,o,a,r,l){return i.extend({defaultOptions:{addCurves:!0,forecast:!0},name:"nv-line",hasDrawnPins:!1,init:function(t){this._parent(t),this.notePins={}},setHighlite:function(t,e,n){if(this.chart){var i=this.chart.get(t);i&&(i.setState(e?"hover":""),i.points&&(i.graph&&i.graph.attr({stroke:e?o.brightenColor(n):n}),this.setNoteHighlite(t+"_",e,n),i.points.forEach(function(t){t.graphic&&t.graphic.attr({fill:e?o.brightenColor(n):n})})))}},setNoteHighlite:function(t,e,n){this.chart&&Object.keys(this.notePins).map(function(i){this.notePins[i].forEach(function(i){i.element.id===t?i.css({color:e?o.brightenColor(n):n}):i.css({opacity:e?.5:1})})}.bind(this))},setData:function(t,e){var n=!1,i=!0;l.is(e,"boolean")?n=e:l.is(e,"object")&&(n=Boolean(e.refresh),i=!0===e.redraw);var s,o,a,r=[];for(this.updatePinDrawingInjection(),s=0,o=t.length;s<o;s++)(a=this.chart.series[s]).setData(t[s].data,!1),n&&a.forecast&&(a.drawGraph=this.splineDrawGraph),r.push(t[s].data);i&&this.chart.redraw()},updatePinDrawingInjection:function(){if(this.options.notes){var t=this,e=function(){t.drawPointsWithNotes(this,arguments)};this.chart.series.forEach(function(t){t.originalDrawPoints||(t.originalDrawPoints=t.drawPoints,t.drawPoints=e)})}},hideSerie:function(t,e){var n;if(e){for(n=0;n<t.series.length;n++)e[n].hideSerie&&t.series[n].hide();t.redraw()}},addAdditionalSeries:function(t,n,i){var s,a,r,l,c,u,h,d,p=this,m=function(e,n){p.dispatchEvent("onPointClick",[t.series[e].data[n.point.x]])},f=!1,g=[];if(n){for(s=0;s<t.series.length;s++)r=0,!(c=n[s]).hideSerie&&t.series[s].data.length>1&&(a=o.getSerieWithoutNull(t.series[s].data)).length>0&&(this.options.secondAxis&&2===t.series.length&&1===s&&(f=!0,r=1),l=t.yAxis[r].getExtremes(),c.curves.smoothed.isDisplayed&&(d=e.parse(t.series[s].color).cloneWith({alpha:.6}),(u={name:"Smooth curve",data:o.convertStatsToSerieData(this.options.smoothed[s].stats),dashStyle:"ShortDot",color:d.toRGBString(),lineWidth:2,type:"spline",yAxis:f?1:0,marker:{enabled:!1},states:{hover:{enabled:!1}},zIndex:1}).events={click:m.bind(this,t.series[s].index)},g.push(u)),c.curves.trend.isDisplayed&&(d=e.parse(t.series[s].color).cloneWith({alpha:.5}),(h={data:o.convertStatsToSerieData(this.options.trend[s].stats),name:"Linear Regression",lineWidth:1.5,type:"spline",color:d.toRGBString(),yAxis:f?1:0,marker:{enabled:!1},states:{hover:{enabled:!1}},zIndex:1}).events={click:m.bind(this,t.series[s].index)},g.push(h)),c.forecasts&&a.length>2&&i&&c.curves.forecast.isDisplayed&&(t.series[s].forecast=c.forecasts,t.series[s].drawGraph=this.splineDrawGraph,c.forecasts<l.dataMin&&t.yAxis[r].setExtremes(c.forecasts,l.dataMax,!1),c.forecasts>l.dataMax&&t.yAxis[r].setExtremes(l.dataMin,c.forecasts,!1)));for(s=0;s<g.length;s++)t.addSeries(g[s],!1,!1)}},addCategory:function(t){var e,n,i=this.options.range,s=t.data[t.data.length-2].label,r=t.xAxis.categories;r.length<t.data.length&&(e=o.getNextDate(s,i),n=o.getNbDays(t.data[0].label,e),r.push(a.getDateForHighchart(e,i,n)),t.xAxis.setCategories(r))},splineDrawGraph:function(){var t,e="between"===this.chart.options.pointPlacement,i=o.getSerieWithoutNull(this.data,!0),s=i[i.length-1],a=i[i.length-2],r=i[i.length-3],l={plotX:this.xAxis.translate(s.x,0,0,0,1,e),plotY:Math.round(10*this.yAxis.translate(this.forecast.forecast,0,1,0,1))/10},c=Math.atan((l.plotX-a.plotX)/(l.plotY-a.plotY)),u=8*Math.sin(c),h=8*Math.cos(c),d=function(t,e,n,i){return(1+n)*e[i]-n*t[i]};c<0&&(c=Math.PI+c,u=8*Math.sin(c),h=8*Math.cos(c)),n.seriesTypes.spline.prototype.drawGraph.apply(this,arguments),t=this.chart.renderer.g(),this.chart.renderer.path(["M",a.plotX,a.plotY,"C",d(r,a,.3,"plotX"),d(r,a,.3,"plotY"),d(a,l,-.3,"plotX"),d(a,l,-.3,"plotY"),l.plotX-u,l.plotY-h]).attr({stroke:this.color,"stroke-width":2,"stroke-dasharray":"2,2"}).add(t),this.chart.renderer.path(["M",l.plotX-u,l.plotY-h,"L",l.plotX+4*Math.cos(c)-u,l.plotY-4*Math.sin(c)-h,l.plotX,l.plotY,l.plotX-4*Math.cos(c)-u,l.plotY+4*Math.sin(c)-h,"Z"]).attr({fill:this.color}).add(t),this.arrow&&this.arrow.destroy(),this.arrow=t,t.add(this.group)},drawPointsWithNotes:function(t,e){var n=this;t.points.forEach(function(t){var e=t.pointAttr[t.selected?"hover":""];t.nv_originalRadius=e.r,e.r=Math.max(e.r,.05)}),t.originalDrawPoints.apply(t,e),n.notePins[t.options.id]&&n.notePins[t.options.id].map(function(t){t.destroy()}),n.notePins[t.options.id]=[],n.options.notes.getAll().filter(function(e){return String(t.options.id)===e.id.split("_").slice(0,-1).join("_")}).map(function(e){var i,s,o,a=e.id.split("_").pop(),r=(i=t.points,s=a,o=null,i.forEach(function(t){t.itemId.split("_").pop()<=s&&(o=t)}),o);if(r){r.graphic.x||(r.graphic.x=r.plotX-r.pointWidth/2),r.graphic.y||(r.graphic.y=r.plotY),n.hasDrawnPins=!0;var l=n.makeNotePin(t,r,r.itemId);l.add(r.graphic.parentGroup),n.notePins[t.options.id].push(l)}}),t.originalDrawPoints.apply(t,e),t.points.forEach(function(t){t.pointAttr[t.selected?"hover":""].r=t.nv_originalRadius})},makeNotePin:function(e,i,s){var o,a=t.Engine.ie8?"~":"～",r=e.chart.renderer.text('<span style="font-family: uwa-icons;font-size: 20px;">'+a+"</span>",0,0);o=void 0!==i.barX&&void 0!==i.pointWidth?i.barX+i.pointWidth/2:i.plotX;var l=n.perspective([{x:o,y:i.plotY}],e.chart,!0)[0];return r.attr({x:Math.floor(l.x)-8,y:Math.floor(l.y)-6,id:s,zIndex:10}),r.css({"font-size":"20px",color:e.color,stroke:"#f7f7f7","stroke-width":"2px"}),r},getDefaultOptions:function(t){var e=this,n=t.getDimensions(),i=function(t){var n=this.axis.getExtremes(),i="_yAxisCloseNumbers"+t;l.is(e[i])&&this.value!==n.min||(e[i]=[]);var s=r.formatHumanNumber(this.value,{closeNumbers:e[i]});return l.is(this.value)&&e[i].push(this.value),s},s=l.extend(this._parent(t),{chart:{plotBackgroundColor:"#f7f7f7",zoomType:"x",events:{selection:function(t){if(t.xAxis){var i=t.xAxis[0],s=r.round(i.max-i.min);i.axis.options.labels.step=e.getStep(n.width,s)}else e.chart.xAxis[0].options.labels.step=e.getStep(n.width,e.options.data[0].length)}}},plotOptions:{series:{point:{events:{mouseOver:function(){e.dispatchEvent("mouseOverPin",[this.itemId,!0])},mouseOut:function(){e.dispatchEvent("mouseOverPin",[this.itemId,!1])}}}}},yAxis:[{title:{text:""},startOnTick:!1,labels:{style:{color:this.options.colors[0]},formatter:function(){return i.call(this,0)}}},{title:{text:""},labels:{style:{color:this.options.colors[1]},formatter:function(){return i.call(this,1)}},opposite:!0}],xAxis:{title:{text:""},tickmarkPlacement:"on",labels:{maxStaggerLines:1}},legend:{enabled:!1}},!0),o=-1;return this.options.data.invoke("some",function(t,e){if(void 0===t.available)return!0;e>o&&(o=e)}),o>=0&&(s.xAxis.plotBands=[{from:-.5,to:o+.5,color:{pattern:"#DEDEDE",width:1,height:3}}]),s},getZoneOptions:function(t,n){return n=e.parse(n).cloneWith({alpha:.5}),[{value:t.length-2},{color:n.toRGBString()}]},getSeriesOptions:function(t){var e,n,i,s=this,a=t.plotOptions[t.chart.type]&&!t.plotOptions[t.chart.type].stacking,r=function(t,e){var n={color:s.options.colors[t],data:s.options.data[t],name:s.options.name?s.options.name[t]:"",id:s.options.id?s.options.id[t]:"",zIndex:2};return e&&(n.yAxis=t),s.options.temporaryLastValue&&(n.zoneAxis="x",n.zones=s.getZoneOptions(s.options.data[t],s.options.colors[t])),n};if(2===this.options.data.length&&this.options.secondAxis)for(n=0;n<this.options.data.length;n+=1)a&&(e=o.getMinMax([this.options.data[n]]),t.yAxis[n].min="column"===t.type&&e.min===e.max&&0!==e.max?e.min-1:e.min,t.yAxis[n].max=e.max),t.series.push(r(n,!0));else{if(this.options.logarithmic&&(t.yAxis[0].type="logarithmic",t.yAxis[0].minorTickInterval="auto"),this.options.data.length>1&&(t.yAxis[0].labels.style.color="#666666"),a){if(i=o.getSerieWithoutHidden(this.options.data,this.options.obj),(e=o.getMinMax(i)).min>0&&!this.options.logarithmic){var l=parseInt(.1*(e.max-e.min),10);t.yAxis[0].min=e.min-l}t.yAxis[0].max=e.max}for(n=0;n<this.options.data.length;n+=1)t.series.push(r(n))}},getTooltipOptions:function(t){var e=this;t.tooltip={enable:!0,useHTML:!0,crosshairs:{width:1,color:"#ddd"},shared:!0,borderColor:null,borderWidth:0,shadow:!1,backgroundColor:null,formatter:function(){var n,i,o,l,c,u=0,h={},d=e.options.range,p='<div class="chart-tooltip"><div>',m={};function f(t,e){return'<span style="color: '+t+'">'+e+"</span>"}function g(t){var n=e.isEmotion()?t.percentage:t.y;return t.originalValue||n||0}for(i=s.sort(this.points,{type:"bylabel",label:"y",order:"desc"}),n=0;n<i.length;n+=1)if(m[c=i[n].point.label?a.getDateForHighchart(1e3*i[n].point.label,d,"",!0):i[n].key]||(m[c]={count:0,html:'<p class="tooltip-title">'+c.toString().stripTags()+"</p>"},h[c]=0),m[c].count+=1,l=e.isEmotion()?i[n].percentage||0:i[n].y,m[c].count>3&&0===l&&0===h[c])h[c]=1,m[c].html+="<p>"+f("#444444",_("Others"))+" 0 </p>";else if(0!==i[n].y||0===h[c]){var v=[],b=i[n].point.index,y=i[n].point.series.data;b>0&&v.push(g(y[b-1])),b<y.length-1&&v.push(g(y[b+1])),o=r.formatHumanNumber(g(i[n].point),"misodata"===i[n].point.filter?{abbreviate:!1,numDigitAfterComma:3}:{closeNumbers:v}),u+=g(i[n].point);var w=i[n].point.available,x=void 0!==w&&w!==l?" &nbsp; ("+f("black",w)+" available)":"",C=f("black",o+(e.isEmotion()?"% ("+i[n].y+" "+_("Articles")+")":""));m[c].html+="<p>"+f(i[n].series.color,i[n].series.name.cut(25)+" "+C+x)+"</p>"}for(n in m)p+=m[n].html;return t.tooltip.displayTotal&&(p+='<p class="tooltip-total"><span>'+_("Total")+"</span> "+r.formatHumanNumber(u)+"</p>"),p+="</div></div>"},style:{fontSize:"10px"}}},build:function(t){var e=this.getDefaultOptions(t),n=l.extend(e,{chart:{type:"spline"},plotOptions:{spline:{shadow:!1,connectNulls:this.options.connectNulls},series:{cursor:"pointer",shadow:!1,lineWidth:3,marker:{lineWidth:0,symbol:"circle",radius:1,states:{hover:{lineWidth:2,radius:4}}}}}},!0);this.buildChart(n,t)},buildChart:function(t,e){var i=this,s=e.getDimensions();if(this.getSeriesOptions(t),this.chartOptionsFinalize(t,this.options.data,s),this.chart)this.chart.xAxis[0].update({labels:t.xAxis.labels},!1),t.yAxis.forEach(function(t,e){this.chart.yAxis[e].update(t,!1)},this),this.setData(t.series,{refresh:!0,redraw:!1}),this.chart.setSize(t.chart.width,t.chart.height,!1);else{var o;o=n.Chart.prototype.setChartSize,n.Chart.prototype.setChartSize=function(){o.apply(this,arguments),i.tweakClipBox(this.clipBox)},this.chart=new n.Chart(t,function(t){i.hideSerie(t,i.options.obj),i.options.addCurves&&i.addAdditionalSeries(t,i.options.obj,i.options.forecast),i.options.updateGraphData&&i.options.updateGraphData(i.options.obj)}),n.Chart.prototype.setChartSize=o;var a=this.chart.setChartSize;this.chart.setChartSize=function(){a.apply(this,arguments),i.tweakClipBox(this.clipBox)},this.updatePinDrawingInjection(),this.redrawChart(),!this.hasDrawnPins&&i.options.notes&&i.options.notes.getAll().length>0&&this.redrawChart(!0)}},redrawChart:function(t){t?this.chart.setSize(this.chart.chartWidth,this.chart.chartHeight,!1):this.chart.series.forEach(function(t){t.redraw()})},tweakClipBox:function(){}})}.apply(e,i))||(t.exports=s)},function(t,e,n){},function(t,e,n){"use strict";var i,s;i=[n(80)],void 0===(s=function(t){var e={},n=t.SplitNode,i=t.EmptyNode,s=t.FacetsNode,o=1/12,a=3*o;function r(t,e,n){var i=0,s=0;switch(t){case"middle":case"top":case"bottom":case"horizontal-split":i=e.width/2;break;case"right":i=e.width;break;case"vertical-split":i=e.width*n}switch(t){case"middle":case"left":case"right":case"vertical-split":s=e.height/2;break;case"bottom":s=e.height;break;case"horizontal-split":s=e.height*n}return{x:e.left+i,y:e.top+s}}function l(t,e){var i=t.runFromStart?0:1;return function t(e,i,s,o,r){if(!(i instanceof n))return o;var l=e.runFromStart;if(e.isVertical!==i.isSplitVertical()){var c=i.getChildren().map(function(n){return t(e,n,s,o,r)});return(l?Math.max:Math.min).apply(Math,c)}var u=r*(l?i.getSplitRatio():1-i.getSplitRatio()),h=s+(l?u:-u),d=t(e,i.getChildren()[l?0:1],s,o,u),p=e.positions.hasOwnProperty(i.id)?e.positions[i.id]:h,m=e.positions[i.id]=l?Math.max(d+a,p,o+a):Math.min(d-a,p,o-a);return t(e,i.getChildren()[l?1:0],h,m,r-h)}(t,e,i,i,1)}function c(t,e){return function t(e,i,s,o){if(!(e instanceof n))return e;if(!i.hasOwnProperty(e.id))return new n(e.id,e.getChildren().map(function(e){return t(e,i,s,o)}),e.isSplitVertical(),e.getSplitRatio());var a=i[e.id]-s,r=s+a,l=a/o;return new n(e.id,[t(e.getChildren()[0],i,s,a),t(e.getChildren()[1],i,r,o-a)],e.isSplitVertical(),l)}(t,e,0,1)}function u(t,n,i){var s,a={};a[n.id]=(s=i,Math.round(s/o)*o);var r={isVertical:n.isSplitVertical(),positions:a};return e.getPosition(t,n)<i?(l(Object.assign({runFromStart:!0},r),t),l(Object.assign({runFromStart:!1},r),t)):(l(Object.assign({runFromStart:!1},r),t),l(Object.assign({runFromStart:!0},r),t)),c(t,a)}function h(t,e){return t.combineWith?t.combineWith===e.combineWith:t.name===e.name}return e.countSplits=function(t,i){return t instanceof n?void 0===i||t.isSplitVertical()===i?t.getChildren().reduce(function(t,n){return t+e.countSplits(n,i)},1):Math.max(e.countSplits(t.getChildren()[0],i),e.countSplits(t.getChildren()[1],i)):0},e.getRect=function(t,e,n){var i=t.getSplitRatio();if(t.isSplitVertical()){var s=n.width-n.margin,o=s*i;return{top:n.top,left:n.left+(0===e?0:o+n.margin),height:n.height,width:0===e?o:s*(1-i),margin:n.margin}}var a=n.height-n.margin,r=a*i;return{top:n.top+(0===e?0:r+n.margin),left:n.left,height:0===e?r:a*(1-i),width:n.width,margin:n.margin}},e.resizeNode=function(t,n,i,s){var o=n.isSplitVertical()?"width":"height",a=e.getPosition(t,n)+s/(i[o]-i.margin*e.countSplits(t,n.isSplitVertical()));return u(t,n,a)},e.getDropZones=function(t,o,a){var l=[];return function t(o,a,l,c,h,d){var p,m;if(c instanceof i)p=c,d(r("middle",h),o.replace(c,p),p);else if(c instanceof s)e.canAddFacet(c.getFacets(),a.getFacets()[0])&&(p=c,d(r("middle",h),o.replace(c,p),p)),h.top===l.top&&(m=new n(null,[a,c],!1),d(r("top",h),u(o.replace(c,m),m,.5))),h.top+h.height===l.top+l.height&&(m=new n(null,[c,a],!1),d(r("bottom",h),u(o.replace(c,m),m,.5))),h.left===l.left&&(m=new n(null,[a,c],!0),d(r("left",h),u(o.replace(c,m),m,.5))),h.left+h.width===l.left+l.width&&(m=new n(null,[c,a],!0),d(r("right",h),u(o.replace(c,m),m,.5)));else if(c instanceof n){c.getChildren().forEach(function(n,i){t(o,a,l,n,e.getRect(c,i,h),d)});var f=e.getPosition(o,c),g=new n(c.id,[c.getChildren()[0],a],c.isSplitVertical());m=new n(null,[g,c.getChildren()[1]],c.isSplitVertical()),d(r(c.isSplitVertical()?"vertical-split":"horizontal-split",h,c.getSplitRatio()),u(u(o.replace(c,m),m,f+1/6),g,f-1/6))}}(t,o,a,t,a,function(t,n,i){(function(t){return e.countSplits(t,!0)<=2&&e.countSplits(t,!1)<=2&&e.countSplits(t)<=3})(n)&&l.push({point:t,rootNode:n,toReplace:i})}),l},e.getPosition=function(t,e){return function t(e,i,s,o){if(e instanceof n){var a,r,l;if(e.isSplitVertical()===i.isSplitVertical()){if(a=o*e.getSplitRatio(),r=o*(1-e.getSplitRatio()),l=s+a,e.id===i.id)return l}else l=s,a=r=o;var c=t(e.getChildren()[0],i,s,a);return void 0!==c?c:t(e.getChildren()[1],i,l,r)}}(t,e,0,1)},e.canAddFacet=function(t,e){if(!t.length)return!0;var n=e.getView();return t.every(function(t){return h(t.getView(),n)})},e.validLayout=function(t,e){return t.map(function(t){if(!(t instanceof i)){if(t instanceof s){if(!t.getFacets().length)return;var n,o=[];if(t.getFacets().forEach(function(t){var n=e.detect(function(e){return t.getSource().getId()===e.getSource().getId()&&t.getName()===e.getName()});if(n){var i=o.detect(function(t){return h(t[0].getView(),n.getView())});i?i.push(n):o.push([n])}}),o.forEach(function(t){(!n||n.length<t.length)&&(n=t)}),!n)return;return t.cloneWith({facets:n})}return t}})||new i(t.id)},e.__tests__={setPosition:u,collectAdjustedPositions:l},e}.apply(e,i))||(t.exports=s)},function(t,e,n){"use strict";var i,s;i=[n(9),n(36),n(99),n(4)],void 0===(s=function(t,e,n,i){function s(t,e){return function(){return void 0===this._data[t]?e:this._data[t]}}var o=t.extend({init:function(t){if(t.__fromClone)this._data=t.__fromClone;else{var e,i,s=t.key,o=s.split(" ");if(n.getSocialpackFacets().includes(o[0])?(e=o.shift(),i=o.join(" ")):i=s,"geoloc"===t.facet.getName()){var a=s.split(":");i=a[1]?a[1].ucfirst():a[0],s=a[0]}this._data={label:i,keyType:e,value:t.value,key:s,facet:t.facet}}},cloneWith:function(t){return Object.keys(t).forEach(function(t){if("facet"!==t&&"value"!==t)throw new Error("Can't clone a stat with anything other than the facet or value")}),new o({__fromClone:Object.assign({},this._data,t)})},getKey:s("key"),getLabel:s("label"),getValue:s("value"),getKeyType:s("keyType"),getFacet:s("facet"),getPercent:function(){return Math.round(100*this.getValue()/this.getFacet().getTotal()*100)/100},getAvailable:function(){return this.getFacet().getAvailable()[this.getKey()]},getNote:function(){return this.getFacet().getNote(this.getKey())},getColor:function(){return this.getFacet().getColor()},getFacetTitle:function(){return this.getFacet().getTitle()},getFormatedValue:function(){return i.formatHumanNumber(this.getValue()||0)},getFavicon:function(){var t="";return"domain"===this.getFacet().getName()&&(t=i.getFaviconUrl("http://"+this.getKey(),!0)),t},getDomain:function(){var t="";return"domain"===this.getFacet().getName()&&(t=this.getKey()),t},getDate:function(){return this.getFacet().isTimeData()?new Date(1e3*this.getLabel()):""},getFormatedDateForHighChart:function(t,n){return t||(t=1),void 0===n&&(n=!0),this.getFacet().isTimeData()?e.getDateForHighchart(this.getDate(),this.getFacet().getSource().getRange(),t,n):""},getFormatedDate:function(t,e){return this.getFacet().isTimeData()?this.getFormatedDateForHighChart(t,e).stripTags():""},formatStatForHighchart:function(t){t=t||{};var e={y:this.getValue(),key:this.getKey(),label:this.getLabel(),stat:this,facet:this.getFacet()};if(t.logarithmic&&e.y<=0&&(e.y=null),t.color&&(e.color=t.color),this.getFacet().isTimeData()){var n=this.getDate(),i=t.previousDate&&n.getFullYear()!==t.previousDate.getFullYear();e.date=n,e.label=this.getFormatedDateForHighChart(t.nbDays,i),e.x=1e3*this.getKey(),e.available=this.getAvailable()}return e}});return o}.apply(e,i))||(t.exports=s)},function(t,e,n){"use strict";var i,s;i=[n(1),n(18),n(0),n(14),n(5),n(123),n(55),n(46),n(360),n(36)],void 0===(s=function(t,e,n,i,s,o,a,r,l,c){var u=n.h,h=i.namespace("Analyze_SourceQueryDetails").addRules({root:{display:"flex"},left:{flex:1,minWidth:0},right:{marginTop:10,display:"flex",flexDirection:"column",justifyContent:"space-between",alignItems:"flex-end"},row:{display:"flex"},cell:{lineHeight:1.85,minWidth:0},headerCell:{flexShrink:0,color:"#cacaca",whiteSpace:"nowrap"},descriptionCell:{display:"flex",flex:1},seeingMoreCell:{display:"block"},description:{overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},seeingMore:{whiteSpace:"normal"},seeMore:{textDecoration:"underline",color:"#fff",whiteSpace:"nowrap",cursor:"pointer",marginLeft:"5px"},published:{display:"flex",margin:"3px 16px"},publishedBy:{color:"#cacaca"},author:{marginLeft:"3px",maxWidth:"100px",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"}}),d=s.extend({init:function(t){this._parent(t),this._onResize=this._onResize.bind(this),this._onReadMore=this._onReadMore.bind(this),this.state={hasReadMore:!1,isReadingMore:!1}},render:function(t,e){return u(o,{className:h("cell","descriptionCell",e.isReadingMore&&"seeingMoreCell"),onResize:this._onResize},u("span",{className:h("description",e.isReadingMore&&"seeingMore")},t.text),t.showSeeMore&&(e.hasReadMore||e.isReadingMore)&&u("span",{className:h("seeMore"),onClick:this._onReadMore},e.isReadingMore?_("see less"):_("see more")))},_onResize:function(){if(!this.state.isReadingMore&&this.props.showSeeMore){this.base.childNodes[0].style.textOverflow="clip";var t=this.base.clientWidth<this.base.childNodes[0].scrollWidth;this.base.childNodes[0].style.textOverflow="",this.setState({hasReadMore:t})}},_onReadMore:function(){this.setState(function(t){return{isReadingMore:!t.isReadingMore}})}});return s.extend({render:function(t){var e=t.source,n=Object.assign({},e.getDescription());return e.getFrom()&&e.getTo()&&(n[_("Period")]=[c.formatDateRangeForDisplay(e.getFrom(),e.getTo()).ucfirst(),e.getRange()&&!(e instanceof l)&&u("span",{style:{marginLeft:20}},_("Range:")+" "+e.getRange())]),e.getSampling()&&(n[_("Sampling")]=r.getSamplingFromValue(e.getSampling()).label),u("div",{className:h("root")},u("div",{className:h("left"),onResize:this._onResize},Object.keys(n).map(function(e){return u("div",{className:h("row"),"data-row":!0},u("div",{className:h("cell","headerCell"),style:{width:0}},_("{0}:").format(e)),u(d,{text:n[e],showSeeMore:t.showSeeMore}))})),u("div",{className:h("right")},t.onEdit?u(a.Edit,{onClick:t.onEdit}):u("div"),e.isReadOnly()&&u("div",{className:h("published")},u("div",{className:h("publishedBy")},_("Owned by")),u("div",{className:h("author")},e.getAuthor()))))},componentDidMount:function(){this._resizeGrid()},componentDidUpdate:function(){this._resizeGrid()},_resizeGrid:function(){var e=t.extendElement(this.base).getElements("[data-row]"),n=Math.max.apply(Math,e.map(function(t){return t.childNodes[0].scrollWidth})),i=Math.min(n,150)+15+"px";e.forEach(function(t){t.childNodes[0].style.width=i})}})}.apply(e,i))||(t.exports=s)},function(t,e,n){"use strict";var i,s;function o(t,e,n,i,s,o,a){try{var r=t[o](a),l=r.value}catch(t){return void n(t)}r.done?e(l):Promise.resolve(l).then(i,s)}i=[n(0),n(14),n(5),n(411),n(183),n(34),n(417),n(1070),n(1072)],void 0===(s=function(t,e,n,i,s,a,r,l,c){var u=t.h,h=e.namespace("Analyze_Ingredient_SocialAccount").addRules({selectorFormItem:{paddingTop:0},selectorContainer:{display:"flex",flex:1,alignSelf:"stretch",margin:"0 auto",width:"60%",height:"300px"}});return n.extend({init:function(t){this._parent(t),this.onFormChange=this.onFormChange.bind(this),this.onValidateSearch=this.onValidateSearch.bind(this),this.onSelectionChange=this.onSelectionChange.bind(this),this.state={userConnectId:!1,query:"",selectedProfiles:[],initialInputLoading:!1}},_loadInitialInput:function(){var t,e=(t=regeneratorRuntime.mark(function t(e){var n,i;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(this._initialInputQuery!==e.source.getQuery()){t.next=2;break}return t.abrupt("return");case 2:if(this._initialInputQuery=e.source.getQuery(),n=e.initialInput(e.source)){t.next=6;break}return t.abrupt("return");case 6:if(!n.then){t.next=20;break}return this.setState({initialInputLoading:!0}),t.prev=8,t.next=11,n;case 11:if(i=t.sent,this._initialInputQuery===e.source.getQuery()){t.next=14;break}return t.abrupt("return");case 14:i&&this.setState({query:i});case 15:return t.prev=15,this.setState({initialInputLoading:!1}),t.finish(15);case 18:t.next=21;break;case 20:this.setState({query:n});case 21:case"end":return t.stop()}},t,this,[[8,,15,18]])}),function(){var e=this,n=arguments;return new Promise(function(i,s){var a=t.apply(e,n);function r(t){o(a,i,s,r,l,"next",t)}function l(t){o(a,i,s,r,l,"throw",t)}r(void 0)})});return function(t){return e.apply(this,arguments)}}(),componentWillMount:function(){this._loadInitialInput(this.props)},componentWillReceiveProps:function(t){this._loadInitialInput(t)},render:function(t,e){return u(s,{source:t.source,events:t.events,loading:!e.selectedProfiles.length||t.loading,scroller:!0,hasPreviousStep:t.hasPreviousStep,onNextStep:function(){var t=this.state.selectedProfiles[0];this.props.events.onPopulateSource(Object.assign({query:this.props.formatQuery(t),displayableQuery:t.name},this.state.sourceChanges)).done(function(){this.props.events.onDisplayStep("editIngredient",{source:this.props.source})}.bind(this))}.bind(this)},!e.initialInputLoading&&this._renderSection())},_renderSection:function(){var t=this.props,e=this.state;return[u(a,{className:"social-account-form",title:"twitter"===t.service?_("Twitter username"):_("Facebook Page")},e.userConnectId?u(a.Item,{key:"search",title:_("Search")},u(c,{showGlass:!0,initialValue:e.query,onValidateSearch:this.onValidateSearch})):u(i,{schema:{fields:{ucid:{title:t.oauthService.ucfirst()+" "+_("account"),input:{id:t.oauthService+"_account"}}}},submitButton:!1,initialValue:{ucid:e.userConnectId},events:{onChange:this.onFormChange}}),Boolean(e.query)&&u(a.Item,{key:"selector",class:h("selectorFormItem")},u("div",{class:h("selectorContainer")},u(l,{service:t.service,showHeader:!1,singleSelection:!0,selectedProfiles:e.selectedProfiles,query:e.query,onSelectionChange:this.onSelectionChange})))),u(r,{source:t.source,onSourceChange:function(t){this.setState(function(e){return{sourceChanges:Object.assign({},e.sourceChanges,t)}})}.bind(this)})]},onSelectionChange:function(t){this.setState({selectedProfiles:t})},onValidateSearch:function(t){this.setState({query:t})},onFormChange:function(t){t.value&&t.value.ucid&&this.setState({userConnectId:Number(t.value.ucid)})}})}.apply(e,i))||(t.exports=s)},function(t,e,n){"use strict";(function(i){var s,o;s=[n(25),n(13),n(4)],void 0===(o=function(t,e,n){return{scripts:null,container:null,getTemplate:e.memoize(function(t){var e=this.getElement(t);return i.compile(e)}),getElement:function(t){var e=0;for(e=0;e<this.scripts.length;e++)if(this.scripts[e].getAttribute("id")===t)return this.scripts[e].text||this.scripts[e].textContent},registerHelpers:function(){i.registerHelper("translate",function(t){return _(t)}),i.registerHelper("expandUrl",function(){var t=Array.prototype.slice.call(arguments,0,-1).join("");return t.match(/^\/[^/]/)&&(t=n.getStaticUrl(t)),t})},registerPartials:function(){var t,e=0;for(this.scripts=this.container.getElementsByTagName("script"),e=0;e<this.scripts.length;e++)(t=this.scripts[e]).attributes.getNamedItem("class")&&"partial"===t.attributes.getNamedItem("class").value&&i.registerPartial(this.scripts[e].getAttribute("id"),this.scripts[e].text||this.scripts[e].textContent)},init:function(e,n){n=n||function(){};var i=this;t.request(e,{type:"xml",onComplete:function(t){i.container=t,i.registerPartials(),i.registerHelpers(),n()},onFailure:function(){}})}}}.apply(e,s))||(t.exports=o)}).call(this,n(437))},function(t,e,n){"use strict";t.exports={orange:["#a10000","#e8025e","#ff7f0e","#ffba00","#ffd800","#f6af8c","#ffd38a"],green:["#627331","#009b21","#96bc0d","#c6e300","#e5ff36","#c4c200","#a5e779"],pink:["#961d56","#c60089","#ea66af","#e7a6aa","#f4ca9d","#f09b71","#e4b6ec"],violet:["#50229d","#a353d1","#796dd4","#aa8ce7","#b9b7e2","#c5a6eb","#d3ade1"],blue:["#0074df","#078d93","#2ac2dd","#7bbaf7","#c3e1ff","#94dfe9","#b7c1e2"],grey:["#101010","#444444","#888888","#aaaaaa","#cccccc","#222222","#666666"]}},function(t,e,n){"use strict";var i,s;i=[n(2),n(6),n(351)],void 0===(s=function(t,e,n){var i=n.types,s={gobCount:{demoWizard:i.number,potions:i.number},enableSharePage:i.bool,manageServicesBoxClosed:i.bool,announcement:{closedMessageIds:i.array}},o={enableSharePage:!0},a=n.singleton({init:function(){this._parent(s,{defaults:o}),this.setRaw(t.User.preferences)},_save:function(t){return e.saveUserSettings({settings:t}).done()}});return App.UserPreferences=a,a}.apply(e,i))||(t.exports=s)},function(t,e,n){"use strict";var i,s;i=[n(1),n(8),n(13),n(20),n(4),n(116),n(393)],void 0===(s=function(t,e,n,i,s,o,a){var r={searchThumbnails:function(){return function(t){var e=t.get("thumbnails");if(e)return e;var n=(e=function(t){return t.getEnclosuresByType("image")}(t)).sort(function(t,e){var n=t.width||0,i=t.height||0,s=e.width||0,o=e.height||0;return n*i<s*o?1:n*i>s*o?-1:0});return t.set("thumbnails",n),n}}(),getThumbnail:function(){var e;function n(n){if(n.width&&n.height)return i.resolve();var s=t.createElement("img",{src:n.link});return new i(function(i,o){function a(){setTimeout(function(){var t=s.getSize();t.width&&t.height?(n.width=t.width,n.height=t.height,i()):o(new Error("Empty image"))},0)}s.addEvents({load:a,error:a}),(e||(e=t.createElement("div",{styles:{width:0,height:0,overflow:"hidden",position:"absolute",visibility:"hidden"}}),document.body.appendChild(e)),e).appendChild(s)})}function s(t,e,o,a){if(0===t.length)return a&&a.width&&a.width*a.height*2>e*o?i.resolve(a):i.reject(new Error("no valid candidat"));var r=t[0];return function(t){return t.link?i.resolve():i.reject(new Error("No url found"))}(r).then(n.bind(null,r)).then(function(t,e,n){if(void 0===e&&(e=50),void 0===n&&(n=e),t.width<e||t.height<n)return i.reject(new Error("Too small"))}.bind(null,r,e,o)).then(function(){return r}).fail(function(n){return"Too small"===n.message&&a&&a.width*a.height<r.width*r.height&&(a=r),s(t.slice(1),e,o,a)})}return function(t,e,n,i){return s(this.searchThumbnails(t),e,n,i&&i.fallbackToLargest&&{width:0,height:0})}}(),addMediaButtons:function(n,i,r){r||(r={}),r=t.extend({allowDownload:!0,theme:"light"},r);var l=n.getEnclosures();(l=s.unique(l,function(t){return t.link})).filter(function(t){return"audio"===t.type}).forEach(function(n){var s=n.link,o=r.theme+"-grey";t.createElement("div",{class:"podcast autoclear"}).addContent(t.createElement("ul",{class:"entry-podcast-actions"}).addContent(t.createElement("li").addContent(new e.Button({value:_("Listen"),className:o+" iconl play audio-listen",element:t.createElement("a",{href:s,target:"_blank"})})),r.allowDownload?t.createElement("li").addContent(new e.Button({value:_("Download"),className:o+" iconl download",element:t.createElement("a",{href:s,target:"_blank"})})):null)).inject(i,"top")}),l=l.filter(function(t){return"audio"!==t.type&&(!n.getContent().includes(t.link)&&"content"!==t.source)}),t.createElement("ul",{class:"entry-enclosures-list",html:l.map(function(e){var n,i,s="";switch(e.type){case"html":n=t.createElement("li",{class:"search"}),e.image&&(s+='<div><a rel="external" target="_blank" href="'+e.link+'"><img src="'+e.image+'"/></a></div>'),e.title?s+='<h3><a rel="external" target="_blank" href="'+e.link+'">'+e.title+"</a></h3><p>"+e.content+'</p><div class="clear"></div>':s+='<a target="_blank" href="'+e.link+'">'+e.link+'</a><div class="clear"></div>',n.setHTML(s);break;case"image":n=t.createElement("li",{class:"enclosure-image"}),s+='<div><a target="_blank" href="'+e.link+'"><img src="'+e.link+'"/></a></div>',n.setHTML(s);break;case"video":var r=document.createElement("video"),l=!1,c='<a href="'+e.link+'" title="'+e.type+" : "+e.link+'" class="entry-enclosures-link"  target="_blank" >'+_("This article contains a video not readable in Netvibes, click here to watch it")+"</a>";r.canPlayType&&(l=""!==r.canPlayType(e.type)),n=t.createElement("li",{class:"enclosure-video"}),s+=l?'<div><video controls width="100%"><source src="'+e.link+'" type="'+e.type+'" />'+c+"</video></div>":c,n.setHTML(s);break;default:i=e.link,n=t.createElement("li"),t.createElement("a",{href:i,target:"_blank",text:i,title:e.type+" : "+i,class:"entry-enclosures-link"}).inject(n),0===e.type.indexOf("video")?n.addClassName("enclosure-video"):0===e.type.indexOf("audio")&&(n.addClassName("enclosure-audio"),t.createElement("a",{text:_("Play"),href:i,class:"enclosure-play",target:"_blank"}).addEvent("click",o(a.play,a,i,i)).inject(n))}return n})}).inject(i,"bottom")},cleanContentElement:function(t,e){var i,s,o,a,r,l,c,u,h;for(s=function(e,i,s){void 0===s&&(s=!1);var o=e.getAttribute(i);null!==o&&(o=o.trim(),n.isAbsoluteUrl(o)||s&&0===o.indexOf("mailto:")||e.setAttribute(i,n.buildUrl(t.getLink(),o)))},r=function(){this.currentStyle&&(this.currentStyle.width&&(this.style.width=this.currentStyle.width),this.currentStyle.height&&(this.style.height=this.currentStyle.height))},o=0,a=(i=e.getElementsByTagName("img")).length;o<a;o++)i[o].onload=r,s(i[o],"src");for(o=0,a=(l=e.getElementsByTagName("script")).length;o<a;o++)l[o].parentNode.removeChild(l[o]);for(o=0,a=(c=e.getElementsByTagName("style")).length;o<a;o++)c[o].parentNode.removeChild(c[o]);for(o=0,a=(u=e.getElementsByTagName("a")).length;o<a;o++)(h=u[o].firstChild)&&1===h.nodeType&&("IMG"!==h.nodeName&&"img"!==h.nodeName||(u[o].className="noBottomLine")),s(u[o],"href",!0),u[o].setAttribute("target","_blank");return e},fixFlashWmode:function(t){var e,n,i,s,o,a,r,l,c,u,h=(t=t&&1===t.nodeType?t:document).getElementsByTagName("embed"),d=t.getElementsByTagName("object");try{for(n=0,i=h.length;n<i;n+=1)(e=h[n]).outerHTML?(c=(r=e.outerHTML).match(/wmode\s*=\s*('|")[a-zA-Z]+('|")/i)?r.replace(/wmode\s*=\s*('|")window('|")/i,"wmode='transparent'"):r.replace(/<embed\s/i,"<embed wmode='transparent' "),e.insertAdjacentHTML("beforeBegin",c),e.parentNode.removeChild(e)):((c=e.cloneNode(!0)).getAttribute("wmode")&&"window"!==c.getAttribute("wmode").toLowerCase()||c.setAttribute("wmode","transparent"),e.parentNode.replaceChild(c,e));for(n=0,i=d.length;n<i;n+=1)if((l=d[n]).outerHTML){for(u=(r=l.outerHTML).match(/<param\s+name\s*=\s*('|")wmode('|")\s+value\s*=\s*('|")[a-zA-Z]+('|")\s*\/?>/i)?r.replace(/<param\s+name\s*=\s*('|")wmode('|")\s+value\s*=\s*('|")window('|")\s*\/?>/i,"<param name='wmode' value='transparent' />"):r.replace(/<\/object>/i,"<param name='wmode' value='transparent' />\n</object>"),s=0,o=l.childNodes.length;s<o;s+=1)(a=l.childNodes[s]).getAttribute("name")&&a.getAttribute("name").match(/flashvars/i)&&(u=u.replace(/<param\s+name\s*=\s*('|")flashvars('|")\s+value\s*=\s*('|")[^'"]*('|")\s*\/?>/i,"<param name='flashvars' value='"+a.getAttribute("value")+"' />"));l.insertAdjacentHTML("beforeBegin",u),l.parentNode.removeChild(l)}}catch(t){}}};return App.ItemRendererUtils=r,r}.apply(e,i))||(t.exports=s)},function(t,e,n){"use strict";var i,s;i=[n(164),n(158),n(51),n(107),n(4),n(10),n(2)],void 0===(s=function(t,e,n,i,s,o,a){return o.extend({defaultOptions:{addCurves:!1,forecast:!1},name:"nv-pie",init:function(t){this._parent(t),this.elements.container=UWA.createElement("div",{class:this.getClassNames()})},inject:function(t){this._parent.apply(this,arguments),this.build(t)},setData:function(t,e){var n,i;for(n=0,i=t.length;n<i;n++)this.chart.series[n].setData(t[n].data,!1);e&&!1===e.redraw||this.chart.redraw()},setHighlite:function(t,e){if(this.chart){var n=this.chart.get(t);n&&n.setState(e?"hover":"")}},isEmotion:function(){var t=!1;return this.options.data.length>0&&(t=this.options.data.every(function(t){if(t[0]&&t[0].originalGroup)return t[0].originalGroup.match(/(emotion|sentiment)/)})),t},getRange:function(){return this.options.range},getStep:function(t,e){var n=s.round(t/e);return n=n<=0?100:n<=1?60:n<3?30-n:n<5?20-n:n<=18?23-n:n<=25?3:n<=45?2:1},formatDateLabel:function(t){return t},getLabelsOptions:function(t,e){return{align:"center",y:17,step:this.getStep(t.width,e),style:{lineHeight:"11px",fontSize:"10px"}}},chartOptionsFinalize:function(t,e,s){var o=this,a=e[0],r=a&&a[0]&&a[0].label&&a[0].label.match(/^-?\d+$/),l=[];if(a&&t.xAxis){if(r){var c=this.getLabelsOptions(s,a.length),u=n.getNbDays(a[0].label,a[a.length-1].label),h=new Date;l=a.map(function(t){var e=new Date(1e3*t.label),n=e.getFullYear()!==h.getFullYear(),s=i.getDateForHighchart(e,o.getRange(),u,n);return h=e,o.formatDateLabel(s)}),UWA.merge(t.xAxis.labels,c)}else l=a.map(function(t){return t.label});t.xAxis.categories=l}this.getTooltipOptions(t),UWA.merge(t.plotOptions.series,{point:{events:{}}}),UWA.merge(t.plotOptions.series.point.events,{click:function(){(this.key||this.originalKey||this.label)&&o.dispatchEvent("onPointClick",[this])}})},getDefaultOptions:function(t){var e=t.getDimensions(),n="function"==typeof this.options.height?this.options.height():this.options.height;n||(n=250);var i={tooltip:{enabled:!1},chart:{marginTop:10,width:e.width,height:n,renderTo:this.elements.container,animation:{duration:150},style:{fontFamily:"'Open Sans', 'Lucida Grande', 'Lucida Sans Unicode', Arial, Helvetica, sans-serif"}},plotOptions:{series:{animation:!1,dataLabels:{enabled:!1}}},colors:this.options.colors,title:{text:""},series:[]};return a.isIn3DDashboard()&&(i.chart.spacing=[0,0,0,0]),i},getSeriesOptions:function(t){t.series.push({data:this.options.data[0]}),this.options.data.length>1&&(t.series.push({size:"64%",data:this.options.data[1]}),t.series[0].innerSize="65%")},getTooltipOptions:function(t){var e=_("Articles");this.options.units&&(e=this.options.units),this.options.compare&&(e=""),t.tooltip={enable:!0,useHTML:!0,borderColor:null,borderWidth:0,shadow:!1,backgroundColor:null,formatter:function(){var t=this.point,n="misodata"===this.point.type?_("Total: {0}"):"{0} "+e;return'<div class="chart-tooltip"><div><p class="tooltip-title"><span style="color:'+t.color+'">'+(t.label||t.name)+(t.authorType?" ("+t.authorType+")":"")+" </span>"+s.round(t.percent,2)+"%</p><p>"+n.format(s.formatHumanNumber(t.y))+"</p></div></div>"},style:{fontSize:"10px"}}},build:function(t){var e=this,n=this.getDefaultOptions(t),i=UWA.extend({chart:{type:"pie",marginBottom:0,marginTop:0,marginLeft:0,marginRight:0,spacingTop:0,spacingBottom:0,spacingLeft:0,spacingRight:0},plotOptions:{pie:{size:"94%",shadow:!1},series:{cursor:"pointer",innerSize:"42%",slicedOffset:0,states:{hover:{brightness:-.3}},point:{events:{mouseOver:function(){this.slice(!0),e.dispatchEvent("onPointMouseOver",[this])},mouseOut:function(){this.slice(!1),e.dispatchEvent("onPointMouseOut",[this])}}}}},series:[]},n,!0);this.buildChart(i,t)},buildChart:function(e,n){var i=n.getDimensions();this.getSeriesOptions(e),this.chartOptionsFinalize(e,this.options.data,i),this.chart?(this.setData(e.series,{redraw:!1}),this.chart.setSize(e.chart.width,e.chart.height,!1)):this.chart=new t.Chart(e)}})}.apply(e,i))||(t.exports=s)},function(t,e,n){"use strict";var i,s;i=[n(1),n(10),n(3),n(4)],void 0===(s=function(t,e,n,i){var s=e.extend({defaultOptions:{className:"facet",title:null,numArticles:0,isSelection:!1,isSelectable:!0},init:function(t){this._parent(t),this.buildSkeleton()},buildSkeleton:function(){var e=this.options,n=this.elements,s=[{tag:"div",class:"facet-title","uwa-tooltip":e.title,text:e.title},e.numArticles||0===e.numArticles?{tag:"div",class:"facet-num",text:i.formatHumanNumber(e.numArticles)}:null],o=[{tag:"div",class:"facet-title selection",html:[{tag:"div",class:"title-content",text:e.title},{tag:"div",class:"close",text:",",events:{click:this.onFacetClose.bind(this)}}]}];n.container=t.createElement("div",{class:e.className+(this.options.isSelectable?" selectable":""),html:e.isSelection?o:s,events:{click:this.onFacetClick.bind(this)}}),n.container.setAttributes({"data-id":e.id,"data-category":e.category}),e.value&&n.container.setAttribute("data-value",JSON.stringify(e.value))},onFacetClick:function(t){if(n.stop(t),this.dispatchEvent("onClick",t),this.options.isSelectable){var e=n.findElement(t,"div."+this.options.className);e.hasClassName("facet-selected")?(this.unselectFacet(e),this.dispatchEvent("onUnselect",t)):(this.selectFacet(e),this.dispatchEvent("onSelect",t))}},onFacetClose:function(t){n.stop(t),this.dispatchEvent("onClose",t)},selectFacet:function(t){this.options.isSelection||t.addClassName("facet-selected")},unselectFacet:function(t){this.options.isSelection||t.removeClassName("facet-selected")},setAttribute:function(t,e){this.elements.container.setAttribute(t,e)},getAttribute:function(t){return this.elements.container.getData(t)}});return App.Controls=App.Controls||{},App.Controls.Facet=s,s}.apply(e,i))||(t.exports=s)},function(t,e,n){"use strict";var i,s;i=[n(1),n(20),n(6),n(1116),n(121),n(61),n(99)],void 0===(s=function(t,e,n,i,s,o,a){var r={};return r.errorMessages={error_submiting_merge_entity:_("Error submiting rule."),error_importing_merge_entity:_("Error importing rules."),"This rule already exists (.*)":_("This rule already exists or conflict with another one."),"This rule conflict with another one.":_("This rule conflict with another one."),fallback:_("An error has occurred, please try again later or contact the support")},r.getMergeEntity=function(){return n.getMergeEntity().then(function(t){return r.formatMergeEntity(t)},function(t){return e.reject(new r.ApiError(t))})},r.formatMergeEntity=function(t){var e=t.rules.map(function(t){return t.facetTitle=a.getFacetTitle(t.facet),new i(t)}),n={};for(var s in t.counters)t.counters.hasOwnProperty(s)&&(n[s]={title:a.getFacetTitle(s),nbEntities:t.counters[s]});return{counters:n,rules:e}},r.submitMergeEntity=function(t){return t=t||{},n.submitMergeEntity(t).then(function(){},function(t){return e.reject(new r.ApiError("error_submiting_merge_entity",new Error(t)))})},r.deleteSources=function(t){var e={delete:[]};return t.forEach(function(t){e.delete=e.delete.concat(t.getId())}),r.submitMergeEntity(e)},r.importMergeEntity=function(t){return n.importMergeEntity(t).then(function(){},function(t){return e.reject(new r.ApiError("error_importing_merge_entity",new Error(t)))})},r.getErrorMessage=function(e){var n,i="fallback";t.is(e.message)&&(i=String(e.message)),t.is(e.cause)&&(n=String(e.cause.message));var o=new s(r.errorMessages,{formater:"string-format"});return o.match(i)+(n?" "+o.match(n,""):"")},r.ApiError=o.extend(),r}.apply(e,i))||(t.exports=s)},function(t,e,n){"use strict";var i,s;i=[n(1),n(57),n(20),n(6),n(1119),n(121),n(61),n(99)],void 0===(s=function(t,e,n,i,s,o,a,r){var l={};return l.errorMessages={error_submiting_blacklist_entity:_("Error submiting rule."),error_importing_blacklist_entity:_("Error importing rules."),"This rule already exists (.*)":_("This rule already exists or conflict with another one."),"This rule conflict with another one.":_("This rule conflict with another one."),fallback:_("An error has occurred, please try again later or contact the support")},l.getBlacklistEntity=function(t){return i.getBlacklistEntity().then(function(e){return l.formatBlacklistEntity(e,t)},function(t){return n.reject(new l.ApiError(t))})},l.formatBlacklistEntity=function(t,e){var i=Object.keys(t.blacklists).map(function(e){var n=t.blacklists[e];if(n)return new s(n)});return n.all(i).done(function(t){var n={};return t=t.filter(Boolean),n.rules=t,n.counters={},e&&t.forEach(function(t){n.counters.hasOwnProperty(t.getFacet())?n.counters[t.getFacet()].nbEntities++:n.counters[t.getFacet()]={title:r.getFacetTitle(t.getFacet()),nbEntities:1}}),n})},l.submitBlacklistEntity=function(t){return t=t||{},i.submitBlacklistEntity(t).then(function(){},function(t){return n.reject(new l.ApiError("error_submiting_blacklist_entity",new Error(t)))})},l.updateBlacklistEntity=function(t){return t=t||{},i.updateBlacklistEntity(t).then(function(){},function(t){return n.reject(new l.ApiError("error_submiting_blacklist_entity",new Error(t)))})},l.deleteSources=function(t){var n={blacklists:[]};return n.blacklists=e.isArray(t)?t.map(function(t){return t.getId()}):n.blacklists.concat(t.getId()),i.deleteBlacklistEntity(n)},l.importBlacklistEntity=function(t){return i.importBlacklistEntity(t).then(function(){},function(t){return n.reject(new l.ApiError("error_importing_blacklist_entity",new Error(t)))})},l.getErrorMessage=function(e){var n,i="fallback";t.is(e.message)&&(i=String(e.message)),t.is(e.cause)&&(n=String(e.cause.message));var s=new o(l.errorMessages,{formater:"string-format"});return s.match(i)+(n?" "+s.match(n,""):"")},l.ApiError=a.extend(),l}.apply(e,i))||(t.exports=s)},function(t,e,n){var i=n(31),s=n(28).document,o=i(s)&&i(s.createElement);t.exports=function(t){return o?s.createElement(t):{}}},function(t,e,n){e.f=n(37)},function(t,e,n){var i=n(200)("keys"),s=n(126);t.exports=function(t){return i[t]||(i[t]=s(t))}},function(t,e){t.exports="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(",")},function(t,e,n){var i=n(28).document;t.exports=i&&i.documentElement},function(t,e,n){var i=n(31),s=n(30),o=function(t,e){if(s(t),!i(e)&&null!==e)throw TypeError(e+": can't set as prototype!")};t.exports={set:Object.setPrototypeOf||("__proto__"in{}?function(t,e,i){try{(i=n(89)(Function.call,n(92).f(Object.prototype,"__proto__").set,2))(t,[]),e=!(t instanceof Array)}catch(t){e=!0}return function(t,n){return o(t,n),e?t.__proto__=n:i(t,n),t}}({},!1):void 0),check:o}},function(t,e){t.exports="\t\n\v\f\r   ᠎             　\u2028\u2029\ufeff"},function(t,e,n){var i=n(31),s=n(244).set;t.exports=function(t,e,n){var o,a=e.constructor;return a!==n&&"function"==typeof a&&(o=a.prototype)!==n.prototype&&i(o)&&s&&s(t,o),t}},function(t,e,n){"use strict";var i=n(91),s=n(101);t.exports=function(t){var e=String(s(this)),n="",o=i(t);if(o<0||o==1/0)throw RangeError("Count can't be negative");for(;o>0;(o>>>=1)&&(e+=e))1&o&&(n+=e);return n}},function(t,e){t.exports=Math.sign||function(t){return 0==(t=+t)||t!=t?t:t<0?-1:1}},function(t,e){var n=Math.expm1;t.exports=!n||n(10)>22025.465794806718||n(10)<22025.465794806718||-2e-17!=n(-2e-17)?function(t){return 0==(t=+t)?t:t>-1e-6&&t<1e-6?t+t*t/2:Math.exp(t)-1}:n},function(t,e,n){var i=n(91),s=n(101);t.exports=function(t){return function(e,n){var o,a,r=String(s(e)),l=i(n),c=r.length;return l<0||l>=c?t?"":void 0:(o=r.charCodeAt(l))<55296||o>56319||l+1===c||(a=r.charCodeAt(l+1))<56320||a>57343?t?r.charAt(l):o:t?r.slice(l,l+2):a-56320+(o-55296<<10)+65536}}},function(t,e,n){"use strict";var i=n(127),s=n(7),o=n(67),a=n(73),r=n(143),l=n(327),c=n(141),u=n(132),h=n(37)("iterator"),d=!([].keys&&"next"in[].keys()),p=function(){return this};t.exports=function(t,e,n,m,f,g,v){l(n,e,m);var b,y,w,x=function(t){if(!d&&t in E)return E[t];switch(t){case"keys":case"values":return function(){return new n(this,t)}}return function(){return new n(this,t)}},C=e+" Iterator",_="values"==f,S=!1,E=t.prototype,k=E[h]||E["@@iterator"]||f&&E[f],T=k||x(f),A=f?_?x("entries"):T:void 0,I="Array"==e&&E.entries||k;if(I&&(w=u(I.call(new t)))!==Object.prototype&&w.next&&(c(w,C,!0),i||"function"==typeof w[h]||a(w,h,p)),_&&k&&"values"!==k.name&&(S=!0,T=function(){return k.call(this)}),i&&!v||!d&&!S&&E[h]||a(E,h,T),r[e]=T,r[C]=p,f)if(b={values:_?T:x("values"),keys:g?T:x("keys"),entries:A},v)for(y in b)y in E||o(E,y,b[y]);else s(s.P+s.F*(d||S),e,b);return b}},function(t,e,n){var i=n(253),s=n(101);t.exports=function(t,e,n){if(i(e))throw TypeError("String#"+n+" doesn't accept regex!");return String(s(t))}},function(t,e,n){var i=n(31),s=n(100),o=n(37)("match");t.exports=function(t){var e;return i(t)&&(void 0!==(e=t[o])?!!e:"RegExp"==s(t))}},function(t,e,n){var i=n(37)("match");t.exports=function(t){var e=/./;try{"/./"[t](e)}catch(n){try{return e[i]=!1,!"/./"[t](e)}catch(t){}}return!0}},function(t,e,n){var i=n(143),s=n(37)("iterator"),o=Array.prototype;t.exports=function(t){return void 0!==t&&(i.Array===t||o[s]===t)}},function(t,e,n){"use strict";var i=n(49),s=n(125);t.exports=function(t,e,n){e in t?i.f(t,e,s(0,n)):t[e]=n}},function(t,e,n){var i=n(168),s=n(37)("iterator"),o=n(143);t.exports=n(47).getIteratorMethod=function(t){if(null!=t)return t[s]||t["@@iterator"]||o[i(t)]}},function(t,e,n){"use strict";var i=n(60),s=n(129),o=n(42);t.exports=function(t){for(var e=i(this),n=o(e.length),a=arguments.length,r=s(a>1?arguments[1]:void 0,n),l=a>2?arguments[2]:void 0,c=void 0===l?n:s(l,n);c>r;)e[r++]=t;return e}},function(t,e,n){"use strict";var i=n(133),s=n(332),o=n(143),a=n(74);t.exports=n(251)(Array,"Array",function(t,e){this._t=a(t),this._i=0,this._k=e},function(){var t=this._t,e=this._k,n=this._i++;return!t||n>=t.length?(this._t=void 0,s(1)):s(0,"keys"==e?n:"values"==e?t[n]:[n,t[n]])},"values"),o.Arguments=o.Array,i("keys"),i("values"),i("entries")},function(t,e,n){"use strict";var i,s,o=n(205),a=RegExp.prototype.exec,r=String.prototype.replace,l=a,c=(i=/a/,s=/b*/g,a.call(i,"a"),a.call(s,"a"),0!==i.lastIndex||0!==s.lastIndex),u=void 0!==/()??/.exec("")[1];(c||u)&&(l=function(t){var e,n,i,s,l=this;return u&&(n=new RegExp("^"+l.source+"$(?!\\s)",o.call(l))),c&&(e=l.lastIndex),i=a.call(l,t),c&&i&&(l.lastIndex=l.global?i.index+i[0].length:e),u&&i&&i.length>1&&r.call(i[0],n,function(){for(s=1;s<arguments.length-2;s++)void 0===arguments[s]&&(i[s]=void 0)}),i}),t.exports=l},function(t,e,n){"use strict";var i=n(250)(!0);t.exports=function(t,e,n){return e+(n?i(t,e).length:1)}},function(t,e,n){var i,s,o,a=n(89),r=n(321),l=n(243),c=n(239),u=n(28),h=u.process,d=u.setImmediate,p=u.clearImmediate,m=u.MessageChannel,f=u.Dispatch,g=0,v={},b=function(){var t=+this;if(v.hasOwnProperty(t)){var e=v[t];delete v[t],e()}},y=function(t){b.call(t.data)};d&&p||(d=function(t){for(var e=[],n=1;arguments.length>n;)e.push(arguments[n++]);return v[++g]=function(){r("function"==typeof t?t:Function(t),e)},i(g),g},p=function(t){delete v[t]},"process"==n(100)(h)?i=function(t){h.nextTick(a(b,t,1))}:f&&f.now?i=function(t){f.now(a(b,t,1))}:m?(o=(s=new m).port2,s.port1.onmessage=y,i=a(o.postMessage,o,1)):u.addEventListener&&"function"==typeof postMessage&&!u.importScripts?(i=function(t){u.postMessage(t+"","*")},u.addEventListener("message",y,!1)):i="onreadystatechange"in c("script")?function(t){l.appendChild(c("script")).onreadystatechange=function(){l.removeChild(this),b.call(t)}}:function(t){setTimeout(a(b,t,1),0)}),t.exports={set:d,clear:p}},function(t,e,n){"use strict";var i=n(28),s=n(48),o=n(127),a=n(211),r=n(73),l=n(146),c=n(29),u=n(145),h=n(91),d=n(42),p=n(340),m=n(131).f,f=n(49).f,g=n(258),v=n(141),b="prototype",y="Wrong index!",w=i.ArrayBuffer,x=i.DataView,C=i.Math,_=i.RangeError,S=i.Infinity,E=w,k=C.abs,T=C.pow,A=C.floor,I=C.log,N=C.LN2,D=s?"_b":"buffer",O=s?"_l":"byteLength",P=s?"_o":"byteOffset";function F(t,e,n){var i,s,o,a=new Array(n),r=8*n-e-1,l=(1<<r)-1,c=l>>1,u=23===e?T(2,-24)-T(2,-77):0,h=0,d=t<0||0===t&&1/t<0?1:0;for((t=k(t))!=t||t===S?(s=t!=t?1:0,i=l):(i=A(I(t)/N),t*(o=T(2,-i))<1&&(i--,o*=2),(t+=i+c>=1?u/o:u*T(2,1-c))*o>=2&&(i++,o/=2),i+c>=l?(s=0,i=l):i+c>=1?(s=(t*o-1)*T(2,e),i+=c):(s=t*T(2,c-1)*T(2,e),i=0));e>=8;a[h++]=255&s,s/=256,e-=8);for(i=i<<e|s,r+=e;r>0;a[h++]=255&i,i/=256,r-=8);return a[--h]|=128*d,a}function M(t,e,n){var i,s=8*n-e-1,o=(1<<s)-1,a=o>>1,r=s-7,l=n-1,c=t[l--],u=127&c;for(c>>=7;r>0;u=256*u+t[l],l--,r-=8);for(i=u&(1<<-r)-1,u>>=-r,r+=e;r>0;i=256*i+t[l],l--,r-=8);if(0===u)u=1-a;else{if(u===o)return i?NaN:c?-S:S;i+=T(2,e),u-=a}return(c?-1:1)*i*T(2,u-e)}function L(t){return t[3]<<24|t[2]<<16|t[1]<<8|t[0]}function R(t){return[255&t]}function j(t){return[255&t,t>>8&255]}function V(t){return[255&t,t>>8&255,t>>16&255,t>>24&255]}function B(t){return F(t,52,8)}function z(t){return F(t,23,4)}function W(t,e,n){f(t[b],e,{get:function(){return this[n]}})}function U(t,e,n,i){var s=p(+n);if(s+e>t[O])throw _(y);var o=t[D]._b,a=s+t[P],r=o.slice(a,a+e);return i?r:r.reverse()}function H(t,e,n,i,s,o){var a=p(+n);if(a+e>t[O])throw _(y);for(var r=t[D]._b,l=a+t[P],c=i(+s),u=0;u<e;u++)r[l+u]=c[o?u:e-u-1]}if(a.ABV){if(!c(function(){w(1)})||!c(function(){new w(-1)})||c(function(){return new w,new w(1.5),new w(NaN),"ArrayBuffer"!=w.name})){for(var q,G=(w=function(t){return u(this,w),new E(p(t))})[b]=E[b],Y=m(E),X=0;Y.length>X;)(q=Y[X++])in w||r(w,q,E[q]);o||(G.constructor=w)}var K=new x(new w(2)),J=x[b].setInt8;K.setInt8(0,2147483648),K.setInt8(1,2147483649),!K.getInt8(0)&&K.getInt8(1)||l(x[b],{setInt8:function(t,e){J.call(this,t,e<<24>>24)},setUint8:function(t,e){J.call(this,t,e<<24>>24)}},!0)}else w=function(t){u(this,w,"ArrayBuffer");var e=p(t);this._b=g.call(new Array(e),0),this[O]=e},x=function(t,e,n){u(this,x,"DataView"),u(t,w,"DataView");var i=t[O],s=h(e);if(s<0||s>i)throw _("Wrong offset!");if(s+(n=void 0===n?i-s:d(n))>i)throw _("Wrong length!");this[D]=t,this[P]=s,this[O]=n},s&&(W(w,"byteLength","_l"),W(x,"buffer","_b"),W(x,"byteLength","_l"),W(x,"byteOffset","_o")),l(x[b],{getInt8:function(t){return U(this,1,t)[0]<<24>>24},getUint8:function(t){return U(this,1,t)[0]},getInt16:function(t){var e=U(this,2,t,arguments[1]);return(e[1]<<8|e[0])<<16>>16},getUint16:function(t){var e=U(this,2,t,arguments[1]);return e[1]<<8|e[0]},getInt32:function(t){return L(U(this,4,t,arguments[1]))},getUint32:function(t){return L(U(this,4,t,arguments[1]))>>>0},getFloat32:function(t){return M(U(this,4,t,arguments[1]),23,4)},getFloat64:function(t){return M(U(this,8,t,arguments[1]),52,8)},setInt8:function(t,e){H(this,1,t,R,e)},setUint8:function(t,e){H(this,1,t,R,e)},setInt16:function(t,e){H(this,2,t,j,e,arguments[2])},setUint16:function(t,e){H(this,2,t,j,e,arguments[2])},setInt32:function(t,e){H(this,4,t,V,e,arguments[2])},setUint32:function(t,e){H(this,4,t,V,e,arguments[2])},setFloat32:function(t,e){H(this,4,t,z,e,arguments[2])},setFloat64:function(t,e){H(this,8,t,B,e,arguments[2])}});v(w,"ArrayBuffer"),v(x,"DataView"),r(x[b],a.VIEW,!0),e.ArrayBuffer=w,e.DataView=x},function(t,e){var n=t.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=n)},function(t,e){t.exports=function(t){return"object"==typeof t?null!==t:"function"==typeof t}},function(t,e,n){t.exports=!n(345)(function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a})},function(t,e,n){var i,s;i=[n(1),n(13),n(18)],void 0===(s=function(t,e,n){"use strict";var i={getRequest:function(n,s){var o,a,r,l=(s=t.merge(s||{},{url:n,method:"GET",async:!0,responseType:"text",onComplete:function(){},onFailure:function(t){throw t},onTimeout:function(t){throw t},onCancel:function(){}})).method||"GET",c=s.headers||{},u=s.authentication,h=i.onStateChange;if(/OPTIONS|GET|HEAD|POST|PUT|DELETE|TRACE|CONNECT/i.test(l)&&(l=l.toUpperCase()),s.data&&(t.is(s.data,["string","arraybufferview","formdata","blob"])||(s.data=e.toQueryString(s.data)),"GET"===l&&(n+=(n.indexOf("?")>-1?"&":"?")+s.data,s.url=n,delete s.data)),s.cors||(e.getOwnPropertyMatchName(c,"X-Requested-With")||(c["X-Requested-With"]="XMLHttpRequest"),e.getOwnPropertyMatchName(c,"X-Requested-Method")||(c["X-Requested-Method"]=l)),"POST"!==l||e.getOwnPropertyMatchName(c,"Content-Type")||t.is(s.data,["arraybufferview","formdata","blob"])||(c["Content-Type"]="application/x-www-form-urlencoded; charset=utf-8"),u&&(u.username&&u.password?(r=n.split("://"),n=r[0]+"://"+u.username+":"+u.password+"@"+r[1]):n+=(n.indexOf("?")>-1?"&":"?")+e.toQueryString(u)),a=s.cors?i.createCORSRequest():i.createRequest()){if(a.cancel=function(){a.aborted=!0,a.abort()},a.addEventListener&&s.onProgress&&a.addEventListener("progress",function(t){s.onProgress(t)}),a.open(l,n,s.async),s.responseTypeSupport="responseType"in a&&"json"!==s.responseType&&(s.async||"undefined"==typeof window),s.responseTypeSupport)try{a.responseType=s.responseType}catch(t){a.responseType="text"}if(s.withCredentialsSupport="withCredentials"in a&&(s.async||"undefined"==typeof window),s.withCredentials){if(!s.withCredentialsSupport)return void s.onFailure(new Error("XMLHttpRequest does not support withCredentials."));a.withCredentials=s.withCredentials}if(s.timeout&&(a.timeoutTimer=setTimeout(function(){a.timedout=!0,a.abort()},s.timeout)),s.cors?(a.onerror=function(){t.merge(a,{readyState:4,status:500}),h(a,s)},a.onload=function(){t.merge(a,{readyState:4,status:200}),h(a,s)}):a.onreadystatechange=h.bind(i,a,s),a.setRequestHeader)for(o in c)c.hasOwnProperty(o)&&a.setRequestHeader(o,c[o]);return a}s.onFailure(new Error("Unable to initiate XMLHttpRequest object."))},createRequest:function(){var t;return window.XMLHttpRequest?t=new window.XMLHttpRequest:window.ActiveXObject&&(t=new window.ActiveXObject("Msxml2.XMLHTTP")),t},createCORSRequest:function(){var t;return window.XMLHttpRequest&&!(t=new window.XMLHttpRequest).withCredentials&&window.XDomainRequest&&(t=new window.XDomainRequest),t},request:function(t,e){var n;return e=e||{},(n=i.getRequest(t,e)).send(e.data||null),e.async||i.onStateChange(n,e),n},parseResponseHeaders:function(t){var e,n,i,s,o,a,r={};if(t)for(a=t.split("\r\n"),e=0;e<a.length;e++)(n=(o=a[e]).indexOf(": "))>0&&(i=o.substring(0,n),s=o.substring(n+2),r[i]=s);return r},onStateChange:function(){var s="UWA_Platform_";function o(e){var i,o=e;if(t.is(o,"string")&&o.contains(s))try{o=n.stripComments(o),o=JSON.parse(o)}catch(t){o=!1}if(o&&o.error&&String(o.error.type).startsWith(s))return i=new Error(n.format("ProxyError: {0}",o.error.message)),t.merge(i,o.error),i}function a(t,e){var i,s,a=e.responseTypeSupport?t.responseType:e.responseType;if(e.responseTypeSupport){if("text"===a||""===a)i=t.responseText;else try{i=t.response}catch(e){throw new Error(n.format('InvalidResponseError: request has probably invalid "Content-type" header require by responseType "{0}" causing: "{1}".',t.responseType,e))}if(e.fromDataRequest&&(s=o(i)),s)throw s}else{if(e.fromDataRequest&&(s=o(t.responseText)),s)throw s;"text"===a||""===a?i=t.responseText:"json"===a?0===(i=String(t.responseText).trim()).length?i=null:(i=n.stripComments(i),i=JSON.parse(i)):"document"===a?i=t.responseXML:"arraybuffer"===a?i=function(t){var e,n,i=new ArrayBuffer(2*t.length),s=new Uint16Array(i);for(e=0,n=t.length;e<n;e++)s[e]=t.charCodeAt(e);return i}(t.responseText):"blob"===a&&(i=new Blob([t.responseText],{type:t.getResponseHeader("Content-Type")}))}return i}function r(t){return i.parseResponseHeaders(t.getAllResponseHeaders())}return function(t,i){var o,l,c,u;if(t.aborted)i.onCancel(t,i);else if(t.timedout)i.onTimeout(new Error("Request timed out after "+i.timeout+" ms"),t,i);else if(4===t.readyState){if(t.timeoutTimer&&clearTimeout(t.timeoutTimer),t.completed)return;t.completed=!0;var h=!0;if(t.status<=0){var d=e.parseUrl(e.buildUrl(window.location,i.url)).protocol;h="http"!==d&&"https"!==d}else t.status>=400&&(h=!1);if(h){l=r(t);try{o=a(t,i)}catch(t){c=t,String(t.type).startsWith(s)&&(l=t.headers,o=t.body),i.onFailure(t,o,l)}finally{c||i.onComplete(o,l)}}else{u=new Error(n.format('NetworkError: url "{0}" return ResponseCode with value "{1}".',i.fromDataRequest||i.url,t.status||0)),l=r(t);try{o=a(t,i)}catch(t){String(t.type).startsWith(s)&&(Object.assign(u,t),l=t.headers,o=t.body)}i.onFailure(u,o,l)}!function(t,e){e.cors?(t.onerror=null,t.onload=null):t.onreadystatechange=null}(t,i)}}}()};return t.namespace("Ajax",i,t)}.apply(e,i))||(t.exports=s)},function(t,e,n){var i;void 0===(i=function(){return"undefined"==typeof WeakMap&&function(){var t=Object.defineProperty,e=Date.now()%1e9,n=function(){this.name="__st"+(1e9*Math.random()>>>0)+e+++"__"};n.prototype={set:function(e,n){var i=e[this.name];return i&&i[0]===e?i[1]=n:t(e,this.name,{value:[e,n],writable:!0}),this},get:function(t){var e;return(e=t[this.name])&&e[0]===t?e[1]:void 0},delete:function(t){var e=t[this.name];return!(!e||e[0]!==t)&&(e[0]=e[1]=void 0,!0)},has:function(t){var e=t[this.name];return!!e&&e[0]===t}},window.WeakMap=n}(),window.WeakMap}.call(e,n,e,t))||(t.exports=i)},function(t,e,n){"use strict";var i,s;i=[n(3),n(13),n(2),n(121),n(84),n(652),n(52),n(35)],void 0===(s=function(t,e,n,i,s,o,a,r){var l,c=String(window.location.href),u=e.parseUrl(c),h=function(){var t=window.nvSigninDataCallbackUrl;return t?n.NPD?"/token?url="+encodeURIComponent(t):t:n.NPD?"/token":"/dashboard"},d=function(t,n,i){return i=i||{},a.init(),new o({view:t,callbackUrl:i.callbackUrl||h(),urlParams:e.parseQuery(u.query),initialUrl:c,wizardry:i.wizardry,events:{changedView:function(t){var e;"confirmconnect"===t?e=c:("signin"!==t&&"signup"!==t&&(t="signin/"+t),e=n?"#!"+t:"/"+t),window.history.pushState(t,"",e)}}})},p=function(t){l&&l.destroy(),(l=d(t,!1)).inject(document.body.getElement("#content .auth-container")),l.open()},m=function(t,e){var i=(e=e||{}).callbackUrl;if(n.User.isRegistered)window.location.href=i||h();else{l&&l.destroy();var o=new s({className:"nv-authmodal",size:{width:420,margin:40},scrollingOverlay:!0});o.addEvent("onClose",function(){l.destroy(),l=null,o.destroy(),o=null,window.history.pushState(null,"","#!")}),(l=d(t,!0,e)).addEvent("componentResize",function(){o.refreshPosition()}),o.setContent(l),o.inject(document.body),l.open(),o.open()}};function f(t,e){var n=new i({"^(!|/)?signin/?$":e.bind(this,"signin"),"^(!|/)?signup/?$":e.bind(this,"signup"),"^(!|/)?signin/forgotpassword/?$":e.bind(this,"forgotpassword"),"^(!|/)?signin/recoverpassword/?$":e.bind(this,"recoverpassword"),"^(!|/)?signin/confirmation/?$":e.bind(this,"confirmation"),"^(!|/)?signin/success/?$":e.bind(this,"success"),"^(!|/)?connect/(.*)$":e.bind(this,"confirmconnect")},{formater:"apply"});n.match(t?u.anchor:u.path),window.addEventListener("popstate",function(t){l&&l.getCurrentView()===t.state||n.match(t.state)},!1)}function g(t,e){window.history.pushState(t,"","#!"+t),m(t,e)}return{displayAuthModal:g,initAuthModal:function(){f(!0,m),document.body.addEventListener("click",function(e){var n=t.findElement(e,"[id]");if(n&&!n.hasAttribute("no-auto-auth-modal")){var i={"netvibes-login-button":"signin","signin-btn":"signin","menu-item-sign-up":"signup","netvibes-signup-button":"signup","signup-btn":"signup"}[n.id];i&&("signup"===i&&r.log("wizardry-individual","signup"),t.stop(e),g(i))}})},initAuthPage:function(){f(!1,p)}}}.apply(e,i))||(t.exports=s)},function(t,e,n){"use strict";var i,s;i=[n(1),n(15)],void 0===(s=function(t,e){var n,i=[{base:"A",letters:/[\u0041\u24B6\uFF21\u00C0\u00C1\u00C2\u1EA6\u1EA4\u1EAA\u1EA8\u00C3\u0100\u0102\u1EB0\u1EAE\u1EB4\u1EB2\u0226\u01E0\u00C4\u01DE\u1EA2\u00C5\u01FA\u01CD\u0200\u0202\u1EA0\u1EAC\u1EB6\u1E00\u0104\u023A\u2C6F]/g},{base:"AA",letters:/[\uA732]/g},{base:"AE",letters:/[\u00C6\u01FC\u01E2]/g},{base:"AO",letters:/[\uA734]/g},{base:"AU",letters:/[\uA736]/g},{base:"AV",letters:/[\uA738\uA73A]/g},{base:"AY",letters:/[\uA73C]/g},{base:"B",letters:/[\u0042\u24B7\uFF22\u1E02\u1E04\u1E06\u0243\u0182\u0181]/g},{base:"C",letters:/[\u0043\u24B8\uFF23\u0106\u0108\u010A\u010C\u00C7\u1E08\u0187\u023B\uA73E]/g},{base:"D",letters:/[\u0044\u24B9\uFF24\u1E0A\u010E\u1E0C\u1E10\u1E12\u1E0E\u0110\u018B\u018A\u0189\uA779]/g},{base:"DZ",letters:/[\u01F1\u01C4]/g},{base:"Dz",letters:/[\u01F2\u01C5]/g},{base:"E",letters:/[\u0045\u24BA\uFF25\u00C8\u00C9\u00CA\u1EC0\u1EBE\u1EC4\u1EC2\u1EBC\u0112\u1E14\u1E16\u0114\u0116\u00CB\u1EBA\u011A\u0204\u0206\u1EB8\u1EC6\u0228\u1E1C\u0118\u1E18\u1E1A\u0190\u018E]/g},{base:"F",letters:/[\u0046\u24BB\uFF26\u1E1E\u0191\uA77B]/g},{base:"G",letters:/[\u0047\u24BC\uFF27\u01F4\u011C\u1E20\u011E\u0120\u01E6\u0122\u01E4\u0193\uA7A0\uA77D\uA77E]/g},{base:"H",letters:/[\u0048\u24BD\uFF28\u0124\u1E22\u1E26\u021E\u1E24\u1E28\u1E2A\u0126\u2C67\u2C75\uA78D]/g},{base:"I",letters:/[\u0049\u24BE\uFF29\u00CC\u00CD\u00CE\u0128\u012A\u012C\u0130\u00CF\u1E2E\u1EC8\u01CF\u0208\u020A\u1ECA\u012E\u1E2C\u0197]/g},{base:"J",letters:/[\u004A\u24BF\uFF2A\u0134\u0248]/g},{base:"K",letters:/[\u004B\u24C0\uFF2B\u1E30\u01E8\u1E32\u0136\u1E34\u0198\u2C69\uA740\uA742\uA744\uA7A2]/g},{base:"L",letters:/[\u004C\u24C1\uFF2C\u013F\u0139\u013D\u1E36\u1E38\u013B\u1E3C\u1E3A\u0141\u023D\u2C62\u2C60\uA748\uA746\uA780]/g},{base:"LJ",letters:/[\u01C7]/g},{base:"Lj",letters:/[\u01C8]/g},{base:"M",letters:/[\u004D\u24C2\uFF2D\u1E3E\u1E40\u1E42\u2C6E\u019C]/g},{base:"N",letters:/[\u004E\u24C3\uFF2E\u01F8\u0143\u00D1\u1E44\u0147\u1E46\u0145\u1E4A\u1E48\u0220\u019D\uA790\uA7A4]/g},{base:"NJ",letters:/[\u01CA]/g},{base:"Nj",letters:/[\u01CB]/g},{base:"O",letters:/[\u004F\u24C4\uFF2F\u00D2\u00D3\u00D4\u1ED2\u1ED0\u1ED6\u1ED4\u00D5\u1E4C\u022C\u1E4E\u014C\u1E50\u1E52\u014E\u022E\u0230\u00D6\u022A\u1ECE\u0150\u01D1\u020C\u020E\u01A0\u1EDC\u1EDA\u1EE0\u1EDE\u1EE2\u1ECC\u1ED8\u01EA\u01EC\u00D8\u01FE\u0186\u019F\uA74A\uA74C]/g},{base:"OI",letters:/[\u01A2]/g},{base:"OO",letters:/[\uA74E]/g},{base:"OU",letters:/[\u0222]/g},{base:"P",letters:/[\u0050\u24C5\uFF30\u1E54\u1E56\u01A4\u2C63\uA750\uA752\uA754]/g},{base:"Q",letters:/[\u0051\u24C6\uFF31\uA756\uA758\u024A]/g},{base:"R",letters:/[\u0052\u24C7\uFF32\u0154\u1E58\u0158\u0210\u0212\u1E5A\u1E5C\u0156\u1E5E\u024C\u2C64\uA75A\uA7A6\uA782]/g},{base:"S",letters:/[\u0053\u24C8\uFF33\u1E9E\u015A\u1E64\u015C\u1E60\u0160\u1E66\u1E62\u1E68\u0218\u015E\u2C7E\uA7A8\uA784]/g},{base:"T",letters:/[\u0054\u24C9\uFF34\u1E6A\u0164\u1E6C\u021A\u0162\u1E70\u1E6E\u0166\u01AC\u01AE\u023E\uA786]/g},{base:"TZ",letters:/[\uA728]/g},{base:"U",letters:/[\u0055\u24CA\uFF35\u00D9\u00DA\u00DB\u0168\u1E78\u016A\u1E7A\u016C\u00DC\u01DB\u01D7\u01D5\u01D9\u1EE6\u016E\u0170\u01D3\u0214\u0216\u01AF\u1EEA\u1EE8\u1EEE\u1EEC\u1EF0\u1EE4\u1E72\u0172\u1E76\u1E74\u0244]/g},{base:"V",letters:/[\u0056\u24CB\uFF36\u1E7C\u1E7E\u01B2\uA75E\u0245]/g},{base:"VY",letters:/[\uA760]/g},{base:"W",letters:/[\u0057\u24CC\uFF37\u1E80\u1E82\u0174\u1E86\u1E84\u1E88\u2C72]/g},{base:"X",letters:/[\u0058\u24CD\uFF38\u1E8A\u1E8C]/g},{base:"Y",letters:/[\u0059\u24CE\uFF39\u1EF2\u00DD\u0176\u1EF8\u0232\u1E8E\u0178\u1EF6\u1EF4\u01B3\u024E\u1EFE]/g},{base:"Z",letters:/[\u005A\u24CF\uFF3A\u0179\u1E90\u017B\u017D\u1E92\u1E94\u01B5\u0224\u2C7F\u2C6B\uA762]/g},{base:"a",letters:/[\u0061\u24D0\uFF41\u1E9A\u00E0\u00E1\u00E2\u1EA7\u1EA5\u1EAB\u1EA9\u00E3\u0101\u0103\u1EB1\u1EAF\u1EB5\u1EB3\u0227\u01E1\u00E4\u01DF\u1EA3\u00E5\u01FB\u01CE\u0201\u0203\u1EA1\u1EAD\u1EB7\u1E01\u0105\u2C65\u0250]/g},{base:"aa",letters:/[\uA733]/g},{base:"ae",letters:/[\u00E6\u01FD\u01E3]/g},{base:"ao",letters:/[\uA735]/g},{base:"au",letters:/[\uA737]/g},{base:"av",letters:/[\uA739\uA73B]/g},{base:"ay",letters:/[\uA73D]/g},{base:"b",letters:/[\u0062\u24D1\uFF42\u1E03\u1E05\u1E07\u0180\u0183\u0253]/g},{base:"c",letters:/[\u0063\u24D2\uFF43\u0107\u0109\u010B\u010D\u00E7\u1E09\u0188\u023C\uA73F\u2184]/g},{base:"d",letters:/[\u0064\u24D3\uFF44\u1E0B\u010F\u1E0D\u1E11\u1E13\u1E0F\u0111\u018C\u0256\u0257\uA77A]/g},{base:"dz",letters:/[\u01F3\u01C6]/g},{base:"e",letters:/[\u0065\u24D4\uFF45\u00E8\u00E9\u00EA\u1EC1\u1EBF\u1EC5\u1EC3\u1EBD\u0113\u1E15\u1E17\u0115\u0117\u00EB\u1EBB\u011B\u0205\u0207\u1EB9\u1EC7\u0229\u1E1D\u0119\u1E19\u1E1B\u0247\u025B\u01DD]/g},{base:"f",letters:/[\u0066\u24D5\uFF46\u1E1F\u0192\uA77C]/g},{base:"g",letters:/[\u0067\u24D6\uFF47\u01F5\u011D\u1E21\u011F\u0121\u01E7\u0123\u01E5\u0260\uA7A1\u1D79\uA77F]/g},{base:"h",letters:/[\u0068\u24D7\uFF48\u0125\u1E23\u1E27\u021F\u1E25\u1E29\u1E2B\u1E96\u0127\u2C68\u2C76\u0265]/g},{base:"hv",letters:/[\u0195]/g},{base:"i",letters:/[\u0069\u24D8\uFF49\u00EC\u00ED\u00EE\u0129\u012B\u012D\u00EF\u1E2F\u1EC9\u01D0\u0209\u020B\u1ECB\u012F\u1E2D\u0268\u0131]/g},{base:"j",letters:/[\u006A\u24D9\uFF4A\u0135\u01F0\u0249]/g},{base:"k",letters:/[\u006B\u24DA\uFF4B\u1E31\u01E9\u1E33\u0137\u1E35\u0199\u2C6A\uA741\uA743\uA745\uA7A3]/g},{base:"l",letters:/[\u006C\u24DB\uFF4C\u0140\u013A\u013E\u1E37\u1E39\u013C\u1E3D\u1E3B\u017F\u0142\u019A\u026B\u2C61\uA749\uA781\uA747]/g},{base:"lj",letters:/[\u01C9]/g},{base:"m",letters:/[\u006D\u24DC\uFF4D\u1E3F\u1E41\u1E43\u0271\u026F]/g},{base:"n",letters:/[\u006E\u24DD\uFF4E\u01F9\u0144\u00F1\u1E45\u0148\u1E47\u0146\u1E4B\u1E49\u019E\u0272\u0149\uA791\uA7A5]/g},{base:"nj",letters:/[\u01CC]/g},{base:"o",letters:/[\u006F\u24DE\uFF4F\u00F2\u00F3\u00F4\u1ED3\u1ED1\u1ED7\u1ED5\u00F5\u1E4D\u022D\u1E4F\u014D\u1E51\u1E53\u014F\u022F\u0231\u00F6\u022B\u1ECF\u0151\u01D2\u020D\u020F\u01A1\u1EDD\u1EDB\u1EE1\u1EDF\u1EE3\u1ECD\u1ED9\u01EB\u01ED\u00F8\u01FF\u0254\uA74B\uA74D\u0275]/g},{base:"oi",letters:/[\u01A3]/g},{base:"ou",letters:/[\u0223]/g},{base:"oo",letters:/[\uA74F]/g},{base:"p",letters:/[\u0070\u24DF\uFF50\u1E55\u1E57\u01A5\u1D7D\uA751\uA753\uA755]/g},{base:"q",letters:/[\u0071\u24E0\uFF51\u024B\uA757\uA759]/g},{base:"r",letters:/[\u0072\u24E1\uFF52\u0155\u1E59\u0159\u0211\u0213\u1E5B\u1E5D\u0157\u1E5F\u024D\u027D\uA75B\uA7A7\uA783]/g},{base:"s",letters:/[\u0073\u24E2\uFF53\u00DF\u015B\u1E65\u015D\u1E61\u0161\u1E67\u1E63\u1E69\u0219\u015F\u023F\uA7A9\uA785\u1E9B]/g},{base:"t",letters:/[\u0074\u24E3\uFF54\u1E6B\u1E97\u0165\u1E6D\u021B\u0163\u1E71\u1E6F\u0167\u01AD\u0288\u2C66\uA787]/g},{base:"tz",letters:/[\uA729]/g},{base:"u",letters:/[\u0075\u24E4\uFF55\u00F9\u00FA\u00FB\u0169\u1E79\u016B\u1E7B\u016D\u00FC\u01DC\u01D8\u01D6\u01DA\u1EE7\u016F\u0171\u01D4\u0215\u0217\u01B0\u1EEB\u1EE9\u1EEF\u1EED\u1EF1\u1EE5\u1E73\u0173\u1E77\u1E75\u0289]/g},{base:"v",letters:/[\u0076\u24E5\uFF56\u1E7D\u1E7F\u028B\uA75F\u028C]/g},{base:"vy",letters:/[\uA761]/g},{base:"w",letters:/[\u0077\u24E6\uFF57\u1E81\u1E83\u0175\u1E87\u1E85\u1E98\u1E89\u2C73]/g},{base:"x",letters:/[\u0078\u24E7\uFF58\u1E8B\u1E8D]/g},{base:"y",letters:/[\u0079\u24E8\uFF59\u1EF3\u00FD\u0177\u1EF9\u0233\u1E8F\u00FF\u1EF7\u1E99\u1EF5\u01B4\u024F\u1EFF]/g},{base:"z",letters:/[\u007A\u24E9\uFF5A\u017A\u1E91\u017C\u017E\u1E93\u1E95\u01B6\u0225\u0240\u2C6C\uA763]/g}];return String.sanitize=function(t){var e;for(e=0;e<i.length;e++)t=t.replace(i[e].letters,i[e].base);return t.replace(/ /g,"_")},String.toAnchor=function(t){return String.sanitize(t.unescapeHTML())},String.prototype.truncate=function(t,e){return t=t||30,e=void 0===e?"...":e,this.length>t?this.slice(0,t-e.length)+e:this},String.prototype.format=function(){var t=arguments;return this.replace(/\{(\d+)\}/g,function(e,n){return t[n]})},String.highlight=function(t,e,n){if("string"!=typeof t)return t;void 0===n&&(n=!1);var i,s,o,a,r,l,c,u,h,d;if(o="",a=-1,r=[],l=t.toLowerCase(),e=e.toLowerCase(),r.push(e),-1!==e.indexOf("&")&&(c=e.replace(/&/g,"&amp;"),r.push(c)),u=e.length,n){for(i=0,s=0;s<u;s++){for(a=0;a>-1&&-1!==(a=l.indexOf(r[s],a));)a+=1,i+=1;if(i>0)return i}return!1}for(;t.length>0;){for(h=a+1,s=0;s<u&&(d=r[s],-1===(a=l.indexOf(d,h)));s++);if(a<0){o+=t;break}t.lastIndexOf(">",a)<t.lastIndexOf("<",a)||(l.lastIndexOf("/script>",a)<l.lastIndexOf("<script",a)||(o+=t.substring(0,a)+'<span class="highlight"><b>'+t.substr(a,d.length)+"</b></span>",l=(t=t.substr(a+d.length)).toLowerCase(),a=-1))}return o},String.prototype.unescapeHTML=(n=document.createElement("div"),function(){return e.getText.call(e.setHTML.call(n,this))}),String.prototype.stripTags=function(){return this.replace(/<\/?[^>]+>?/gi,"")},String.prototype.sanitizeHTML=function(){return this.stripTags().escapeHTML(!0)},String.prototype.parseUrl=function(){var t=this.match(/^(?:([^:/?#.]+):)?(?:\/\/)?(([^:/?#]*)(?::(\d*))?)((\/(?:[^?#](?![^?#/]*\.[^?#/.]+(?:[?#]|$)))*\/?)?([^?#/]*))?(?:\?([^#]*))?(?:#(.*))?/)||[],e={};return["uri","scheme","authority","host","port","path","directory","file","query","fragment"].forEach(function(n,i){e[n]=t[i]}),e},String.prototype.substitute=function(e){if("function"!=typeof e){var n=e;e=function(e){return t.is(n[e])?n[e]:""}}return this.replace(/\\?\{([^{}]+)\}/g,function(t,n){return"\\"===t.charAt(0)?t.slice(1):e(n)||""})},String}.apply(e,i))||(t.exports=s)},function(t,e,n){"use strict";var i,s;i=[n(2),n(189)],void 0===(s=function(t,e){var n=Object.create(null);function i(i,s){var o=function(i){return t.isIn3DDashboard()?(i=i||t.get3DDPlatformId(),n[i]||(n[i]=e(i).getCachedEntities()),n[i]):n}(s);return o[i]||(o[i]=Object.create(null)),o[i]}return{get:function(t,e){var n=i(t,e);return{getAll:function(){return n},get:function(t){return n[t]},set:function(t,e){n[t]=e},remove:function(t){delete n[t]}}}}}.apply(e,i))||(t.exports=s)},function(t,e,n){"use strict";n.r(e);var i=n(36);e.default={getFrom:function(){return String(this._data.from||Object(i.getDefaultFrom)())}}},function(t,e,n){"use strict";var i,s;i=[n(1),n(9),n(22),n(39),n(52),n(20),n(8),n(103),n(70),n(21),n(111)],void 0===(s=function(t,e,n,i,s,o,a,r,l,c,u){return e.extend(n,i,{options:{},init:function(e,n){var i;if(this.setOptions(n),this.options.eco&&this.setInfosFrom("eco",this.options.eco),"string"==typeof e&&(e=JSON.parse(e)),"object"!=typeof e)throw new Error("App/Components/Preview: constructor needs object or serialized dataObj");e.from&&(this.from=e.from),i=t.clone(e),this.previewModule=r.factory(i,{preview:!0})},setInfosFrom:function(e,n){var i,s;"eco"===e&&(s=n.description,i='<div class="autoclear"><strong>'+n.title+"</strong>"),this.options.infos={after:t.createElement("p",{html:s}),before:t.createElement("div",{html:i})}},open:function(){var t=this;this.deferred=o.deferred();var e=u.open(this.build(),{onOpen:function(){this.mask.addClassName("open"),s.pushFocus("preview")},onClose:function(){t.previewModule&&t.previewModule.remove(!1),this.mask.removeClassName("open"),s.popFocus("preview"),t.dispatchEvent("onRefreshContent")},contentTitle:this.options.title||_("Widget preview"),size:{x:775}});return e.addEvent("closed",function(){document.body.hasClassName("nv-panel-overflow")&&this.body.setStyle("overflow","hidden")}),s.addShortcuts({preview:{esc:function(){e.close()}}}),this.deferred.promise},build:function(){var e=this.options.infos,n=t.createElement("div",{class:"nv-previewExt autoclear"});return this.widget=t.createElement("div",{class:"widgetPanel"}).inject(n),this.infosPanel=t.createElement("div",{class:"infosPanel"}),e&&this.infosPanel.addContent(e.before,e.after),this.infosPanel.inject(n),this.buildOptionSelection(),this.bindButton(),this.displayPreview(),n},getSelectValue:function(){return this.select.getValue()[0]},bindButton:function(){this.button=new a.Button({attributes:{type:"submit"},className:"green medium add-button",value:_("Add to your dashboard")}),this.button.inject(this.infosPanel),this.button.addEvent("onClick",this.addWidgetInTab.bind(this))},addWidgetInTab:function(){var t=this.getSelectValue(),e=this.previewModule;l.add(e.dataObj,t?{tabId:t}:this.options.position).then(this.deferred.resolve,this.deferred.reject).done(),this.previewModule.remove(!1),this.previewModule=null,u.close()},displayPreview:function(){if(!this.previewModule)throw new Error("App/Components/Preview: invalid widget instance");this.previewModule.inject(this.widget).load()},buildOptionSelection:function(){var e,n=[],i=c.getAll();for(e=0;e<i.length;e++)c.isReadOnly(i[e])||n.push({label:i[e].dataObj.title||_("Untitled"),value:i[e].dataObj.id||_("Untitled"),selected:i[e].dataObj.id===c.getFocused().dataObj.id});this.select=new a.Select({options:n,className:"choose-tab-dropdown"}),t.createElement("h3",{text:_("Add to my tab")}).inject(this.infosPanel),this.select.inject(this.infosPanel)}})}.apply(e,i))||(t.exports=s)},function(t,e,n){"use strict";var i,s;i=[n(1),n(3),n(10),n(8),n(59),n(71)],void 0===(s=function(t,e,n,i,s,o){var a=n.extend({name:"nv-tagselection",defaultOptions:{split:/[,;]+/g,data:[],availableValues:[],validate:function(t){if(!/^[^"]+$/.test(t))throw new Error(_("Invalid tag."));return t}},data:[],init:function(t){this._parent(t),this.buildSkeleton(),this.initEvents(),this.setData(this.options.data)},buildSkeleton:function(){var e=this.elements,n={className:this.getClassNames("-input")};this.isSelect()?(n.options=this._getSelectOptions(),e.inputElm=new i.Select(n)):this.options.autocomplete?e.inputElm=new o(this.options.autocompleteOptions):e.inputElm=new i.Text(n),e.container=t.createElement("div",{class:this.getClassNames()}),e.inputContainer=t.createElement("div",{class:this.getClassNames("-input-container"),html:[t.createElement("div",{class:"error-block",html:e.inputElm}),this.isSelect()?"":e.addButton=t.createElement("span",{class:this.getClassNames("-add-button")+" uwa-icon","data-icon":"3"})]}).inject(e.container),e.tagsContainer=t.createElement("div",{class:this.getClassNames("-tags-container")}).inject(e.container)},_getSelectOptions:function(){var t=this.options.availableValues.map(function(t){return"function"==typeof t.label&&(t=Object.assign({},t,{label:t.label()})),t});return t.length>1&&t.unshift({label:this.options.label||_("Choose..."),value:""}),t},initEvents:function(){this.elements.inputElm.addEvent("onChange",this.onAddTag.bind(this)),this.elements.inputElm.addEvent("onBlur",this.onAddTag.bind(this))},onAddTag:function(){if(!this._ignoreAddTag){var t,e,n=[],i=[],s=this.elements.inputElm.getValue();this._ignoreAddTag=!0,this.elements.inputElm.setValue(""),this._ignoreAddTag=!1,this.isSelect()?s.length&&(t=s):t=s.split(this.options.split),(t=t.filter(function(t){return t})).length&&(t.forEach(function(t){(e=this.checkTag(t))&&(e.error?n.push(e.error):i.push(e))},this),n.length?this.addInputError(n.join(". ")):this.removeInputError(),this.data=this.data.concat(i),this.buildTagsList(),this.dispatchOnChange(n))}},dispatchOnChange:function(t){this.dispatchEvent("onChange",[{list:this.data,error:t||[]}])},checkTag:function(t){var e;try{e=this.options.validate(t)}catch(t){return{error:t.message}}return this.data.indexOf(e)<0?e:{error:_("You've already added the same value")}},buildTagsList:function(){var t=this.getData();this.elements.tagsContainer.empty(),t.forEach(function(t,e){this.createTag(t,e)},this)},updateLabels:function(){if(this.isSelect()){var t=this._getSelectOptions();this.elements.inputElm.putOptions(t),1===t.length&&(this.data=[t[0].value])}this.buildTagsList()},createTag:function(t,e){var n=this.isSelect()?this.getTagFromAvailableValues(t).label:t;"function"==typeof n&&(n=n()),this.elements.tagsContainer.addContent(new s({value:n,className:"green",closable:!0,events:{onClose:function(){if(this.data.splice(e,1),this.setData(this.data),this.buildTagsList(),this.isSelect()){var t=this.elements.inputElm.getSelection();t.splice(e,1),this.elements.inputElm.setSelection(t)}this.dispatchOnChange()}.bind(this)}}))},getTagFromAvailableValues:function(t){return this.options.availableValues.filter(function(e){return e.value===t})[0]},setDisabled:function(t){this.elements.inputElm.setDisabled(t)},addInputError:function(t){var e=this.elements.inputElm.getInputElement().getParent(".error-block");e.addClassName("active"),e.setAttribute("data-error",t)},removeInputError:function(){var t=this.elements.inputElm.getInputElement().getParent(".error-block");t.removeClassName("active"),t.setAttribute("data-error","")},isSelect:function(){return this.options.availableValues.length>0},getData:function(){return this.data},setData:function(t){this.data=t,this.buildTagsList()}});return App.Components=App.Components||{},App.Components.TagSelection=a,a}.apply(e,i))||(t.exports=s)},function(t,e,n){"use strict";var i;void 0===(i=function(){var t;function e(){if(!t){var e=document.body.getElement("#top");t={top:e,left:e.getElement(".topbar-left"),right:e.getElement(".topbar-right"),center:e.getElement(".topbar-center")}}return t}function n(){var t=e();if(t.center&&t.right&&t.left){var n=t.left.getBoundingClientRect(),i=t.center.getBoundingClientRect(),s=t.right.getBoundingClientRect();return n.right>i.left||s.left<i.right}}return function(){var t=e().top;t&&(t.removeClassName("smalldisplay-hide"),document.body.removeClassName("smalldisplay"),n()&&(document.body.addClassName("smalldisplay"),n()&&t.addClassName("smalldisplay-hide")))}}.call(e,n,e,t))||(t.exports=i)},function(t,e,n){"use strict";var i,s;i=[n(1),n(10),n(26),n(8),n(41)],void 0===(s=function(t,e,n,i,s){var o=t.createElement;return e.extend({options:{title:"",submitLabel:_("Dashboard it!")},dataFields:[],init:function(t){this._parent(t),this.elements.container||this.buildStep(),this.setData(this.options.data)},buildTitle:function(){return o("div",{class:"nv-agency-step-title",text:this.options.title})},setData:function(e){for(var n in e=t.clone(e||this.defaultData||{}))this.dataFields.indexOf(n)<0&&delete e[n];this._data=e,this.validateData(e)},getData:function(){return t.clone(this._data)},validateData:function(){},getName:function(){return this.options.name},open:function(t){if(!t)return this.elements.container.setStyles({display:"block",opacity:"1"}),void this.dispatchEvent("onStepOpened",this.options.name);this.elements.container.setStyles({display:"block",opacity:"0"}),new n(this.elements.container,{duration:250,transition:"quadOut",events:{onComplete:function(){this.dispatchEvent("onStepOpened",this.options.name)}.bind(this)}}).start({opacity:"1"})},close:function(t){if(!t)return this.elements.container.setStyles({display:"none",opacity:"0"}),void this.dispatchEvent("onStepClosed",this.options.name);new n(this.elements.container,{duration:250,transition:"quadOut",events:{onComplete:function(){this.elements.container.setStyle("display","none"),this.dispatchEvent("onStepClosed",this.options.name)}.bind(this)}}).start({opacity:"0"})},showNextSubstep:function(){return!1},buildStep:function(){},buildNavigation:function(){return this.elements.navigation=o("div",{class:"nv-agency-nav"}).addContent(!this.options.first&&o("span",{class:"previous",text:_("Previous"),events:{click:function(){this.dispatchEvent("onPreviousStep",{currentStep:this.options.name})}.bind(this)}}),this.elements.next=new i.Button({value:this.options.last?this.options.submitLabel:_("Next"),className:"green iconr next",events:{onClick:function(){this.dispatchEvent(this.options.last?"onFinish":"onNextStep",{currentStep:this.options.name})}.bind(this)}})),this.elements.navigation},disableNext:function(t){this.elements.next.setDisabled(t)},setConfirmationState:function(t){this.elements.navigation.removeClassName("waiting"),this.elements.navigation.removeClassName("success"),"waiting"===t?(this.elements.navigation.addClassName("waiting"),this.navigationSpinner||(this.navigationSpinner=new s({autostart:!0,size:30,color:"#ffffff"}),this.elements.navigation.addContent(this.navigationSpinner))):"success"===t&&(this.elements.navigation.addClassName("success"),this.elements.success||(this.elements.success=o("div",{class:"nv-agency-nav-success uwa-icon checked"}),this.elements.navigation.addContent(this.elements.success)))}})}.apply(e,i))||(t.exports=s)},function(t,e,n){"use strict";var i,s;i=[n(1),n(13),n(8),n(17),n(4),n(6),n(109),n(381),n(41),n(23)],void 0===(s=function(t,e,n,i,s,o,a,r,l,c){return r.extend({options:{titleAction:_("add"),action:"add",ckeckboxText:_("Remove original apps")},init:function(t){this.setOptions(t),this.options.title=_("{0} to library").format(this.options.titleAction).ucfirst(),this.selectStreamButtons={},this.streams=(this.options.allLib&&this.options.originalLib?this.options.originalLib.getStreams():this.options.streams)||[]},buildCheckboxRemove:function(){this.options.action.test(/merge|relatedSources/)||this._parent()},displayPreview:function(){this.previewStreams=t.createElement("div",{class:"lib-preview",html:[t.createElement("h3",{class:"lib-preview-title",text:_("Please choose the sources you want to {0} to your library").format(this.options.titleAction)}),t.createElement("div",{class:"lib-preview-streams",html:[t.createElement("label",{class:"lib-preview-streams-select",html:[this.selectAllButton=new n.Checkbox({className:"green",events:{onChange:this.onChangeSelectAll.bind(this)}}),_("Select All")]}),this.previewStreamsList=t.createElement("div",{class:"lib-preview-streams-list"})]})]}).inject(this.widget),this.setButtonState("disable"),"relatedSources"===this.options.action?this.getRelatedSources():this.displayStreamList()},displayStreamList:function(){if(this.streams.length){var e;this.scroller&&(e=this.scroller.getInnerElement().scrollTop,this.scroller.destroy()),this.previewStreamsList.empty(),this.setButtonState(),this.streams.forEach(function(t){this.getStreamElm(t).inject(this.previewStreamsList)}.bind(this)),this.options.allLib&&this.options.originalLib.hasNextStreams()&&(this.loadingNextStreams=t.createElement("div",{class:"lib-preview-stream lib-preview-stream-loading",text:_("Loading...")}).inject(this.previewStreamsList)),this.scroller=new c({element:this.previewStreamsList,shadows:!0});var n=this.scroller.getInnerElement();n.scrollTop=e,n.addEvent("scroll",function(t){var e=t.target;this.options.allLib&&this.options.originalLib&&this.options.originalLib.hasNextStreams()&&e.scrollTop+e.getSize().height>=e.scrollHeight&&this.options.originalLib.getNextStreams().done(function(){this.streams=this.options.originalLib.getStreams(),this.displayStreamList()}.bind(this))}.bind(this)),this.selectAllButton.check(!0),this.selectAllButton.dispatchEvent("onChange")}else this.displayErrorMessage(_("You don't have any stream to add."),this.previewStreams)},getRelatedSources:function(){this.updateSpinner(!0,_("Please wait while your request is being processed.")+"<br/>"+_(" This operation may take some time."));var t=_("We were unable to find suggestions."),e={actions:[{moduleId:this.options.relatedModuleId}]};o.streamRelated(e).then(function(e){this.updateSpinner(!1),e[0]&&e[0].streams.length?(this.streams=e[0].streams.map(function(t){return a.factory(t)}),this.displayStreamList()):this.displayErrorMessage(t,this.previewStreams,!0)}.bind(this)).fail(function(){this.displayErrorMessage(t,this.previewStreams,!0)}.bind(this))},updateSpinner:function(e,n){this.spinnerContainer||(this.spinnerContainer=t.createElement("div",{class:"lib-spinner",html:n||""}).inject(this.widget)),this.spinner||(this.spinner=new l({autostart:!0,size:30,color:"#ffffff"})),this.spinnerContainer.addContent(this.spinner),e?(this.spinnerContainer.show(),this.spinner.start(),this.previewStreams.hide()):(this.spinnerContainer.hide(),this.spinner.stop(),this.previewStreams.show())},getStreamElm:function(e){return t.createElement("label",{class:"lib-preview-stream",html:[this.selectStreamButtons[e.getId()]=new n.Checkbox({className:"green lib-preview-stream-select",events:{onChange:this.onChangeSelectStream.bind(this)}}),t.createElement("img",{class:"lib-preview-stream-icon",src:s.getFaviconUrl(e.getLink())}),t.createElement("p",{class:"lib-preview-stream-title",html:e.getTitle()||_("No title")})]})},getStreamsToAdd:function(){var t=[];for(var e in this.selectStreamButtons)if(this.selectStreamButtons.hasOwnProperty(e)&&this.selectStreamButtons[e].isChecked()){var n=this.streams.filter(function(t){return t.getId()===e})[0];t.push({id:e,title:n.getTitle()})}return t},addStreamToLibrary:function(t){t=t||this.getSelectValue(),this.options.allLib&&this.selectAllButton.isChecked()&&"merge"===this.options.action?this.getLibProcessor().copyToLibrary(t).done(function(){this.refreshLib(t)}.bind(this),function(t){this.displayErrorMessage(t)}.bind(this)):this._parent(t)},removeOriginalApp:function(){if("merge"===this.options.action&&this.options.originalWidget)this.options.originalWidget.remove();else for(var t in this.selectStreamButtons)if(this.selectStreamButtons.hasOwnProperty(t)&&this.selectStreamButtons[t].isChecked()){var e=i.getByStreamId(t);e&&e.length&&e.invoke("remove")}},onChangeSelectAll:function(){e.toArray(this.selectStreamButtons).invoke("check",this.selectAllButton.isChecked())},onChangeSelectStream:function(){e.toArray(this.selectStreamButtons).some(function(t){return!t.isChecked()})&&this.selectAllButton.check(!1)}})}.apply(e,i))||(t.exports=s)},function(t,e,n){(function(t,i){!function(e,n){"use strict";function s(t){var e={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=0);return e}function o(t){var e={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]="number"==typeof t[n]?t[n]:t[n].val);return e}function a(t,e,n,i,s,o,a){var r=-s*(e-i),l=-o*n,c=r+l,u=n+c*t,h=e+u*t;return Math.abs(u)<a&&Math.abs(h-i)<a?(p[0]=i,p[1]=0,p):(p[0]=h,p[1]=u,p)}function r(t,e,n){for(var i in e)if(Object.prototype.hasOwnProperty.call(e,i)){if(0!==n[i])return!1;var s="number"==typeof e[i]?e[i]:e[i].val;if(t[i]!==s)return!1}return!0}function l(t){return function(){return t}}function c(t,e,n){for(var i=0;i<t.length;i++)if(!r(t[i],e[i],n[i]))return!1;return!0}function u(t,e,n){var i=e;return null==i?t.map(function(t,e){return{key:t.key,data:t.data,style:n[e]}}):t.map(function(t,e){for(var s=0;s<i.length;s++)if(i[s].key===t.key)return{key:i[s].key,data:i[s].data,style:n[e]};return{key:t.key,data:t.data,style:n[e]}})}function h(t,e,n,i){if(i.length!==e.length)return!1;for(var s=0;s<i.length;s++)if(i[s].key!==e[s].key)return!1;for(var o=0;o<i.length;o++)if(!r(t[o],e[o].style,n[o]))return!1;return!0}function d(t,e,n,i,o,a,l,c,u){for(var h=function(t,e,n){for(var i={},s=0;s<t.length;s++)i[t[s].key]=s;for(var o={},a=0;a<e.length;a++)o[e[a].key]=a;for(var r=[],l=0;l<e.length;l++)r[l]=e[l];for(var c=0;c<t.length;c++)if(!Object.prototype.hasOwnProperty.call(o,t[c].key)){var u=n(c,t[c]);null!=u&&r.push(u)}return r.sort(function(t,n){var s=o[t.key],a=o[n.key],r=i[t.key],l=i[n.key];if(null!=s&&null!=a)return o[t.key]-o[n.key];if(null!=r&&null!=l)return i[t.key]-i[n.key];if(null!=s){for(var c=0;c<e.length;c++){var u=e[c].key;if(Object.prototype.hasOwnProperty.call(i,u)){if(s<o[u]&&l>i[u])return-1;if(s>o[u]&&l<i[u])return 1}}return 1}for(var h=0;h<e.length;h++){var d=e[h].key;if(Object.prototype.hasOwnProperty.call(i,d)){if(a<o[d]&&r>i[d])return 1;if(a>o[d]&&r<i[d])return-1}}return-1})}(i,o,function(t,i){var s=e(i);return null==s?(n({key:i.key,data:i.data}),null):r(a[t],s,l[t])?(n({key:i.key,data:i.data}),null):{key:i.key,data:i.data,style:s}}),d=[],p=[],m=[],f=[],g=0;g<h.length;g++){for(var v=h[g],b=null,y=0;y<i.length;y++)if(i[y].key===v.key){b=y;break}if(null==b){var w=t(v);d[g]=w,m[g]=w;var x=s(v.style);p[g]=x,f[g]=x}else d[g]=a[b],m[g]=c[b],p[g]=l[b],f[g]=u[b]}return[h,d,p,m,f]}for(var p=[0,0],m="undefined"!=typeof window?window:void 0!==t?t:"undefined"!=typeof self?self:{},f=function(t,e){return t(e={exports:{}},e.exports),e.exports}(function(t){(function(){var e,n,s;"undefined"!=typeof performance&&null!==performance&&performance.now?t.exports=function(){return performance.now()}:null!=i&&i.hrtime?(t.exports=function(){return(e()-s)/1e6},n=i.hrtime,s=(e=function(){var t;return 1e9*(t=n())[0]+t[1]})()):Date.now?(t.exports=function(){return Date.now()-s},s=Date.now()):(t.exports=function(){return(new Date).getTime()-s},s=(new Date).getTime())}).call(m)}),g="undefined"==typeof window?m:window,v=["moz","webkit"],b="AnimationFrame",y=g["request"+b],w=g["cancel"+b]||g["cancelRequest"+b],x=0;!y&&x<v.length;x++)y=g[v[x]+"Request"+b],w=g[v[x]+"Cancel"+b]||g[v[x]+"CancelRequest"+b];if(!y||!w){var C=0,_=0,S=[];y=function(t){if(0===S.length){var e=f(),n=Math.max(0,1e3/60-(e-C));C=n+e,setTimeout(function(){var t=S.slice(0);S.length=0;for(var e=0;e<t.length;e++)if(!t[e].cancelled)try{t[e].callback(C)}catch(t){setTimeout(function(){throw t},0)}},Math.round(n))}return S.push({handle:++_,callback:t,cancelled:!1}),_},w=function(t){for(var e=0;e<S.length;e++)S[e].handle===t&&(S[e].cancelled=!0)}}var E=function(t){return y.call(g,t)};E.cancel=function(){w.apply(g,arguments)},E.polyfill=function(){g.requestAnimationFrame=y,g.cancelAnimationFrame=w};var k=function(){};k.thatReturns=l,k.thatReturnsFalse=l(!1),k.thatReturnsTrue=l(!0),k.thatReturnsNull=l(null),k.thatReturnsThis=function(){return this},k.thatReturnsArgument=function(t){return t};var T=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")},A=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},I=function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)},N=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e},D=1e3/60,O=function(t){function e(n){T(this,e);var i=N(this,t.call(this,n));return i.wasAnimating=!1,i.animationID=null,i.prevTime=0,i.accumulatedTime=0,i.unreadPropStyle=null,i.clearUnreadPropStyle=function(t){var e=!1,n=i.state,s=n.currentStyle,o=n.currentVelocity,a=n.lastIdealStyle,r=n.lastIdealVelocity;for(var l in t)if(Object.prototype.hasOwnProperty.call(t,l)){var c=t[l];"number"==typeof c&&(e||(e=!0,s=A({},s),o=A({},o),a=A({},a),r=A({},r)),s[l]=c,o[l]=0,a[l]=c,r[l]=0)}e&&i.setState({currentStyle:s,currentVelocity:o,lastIdealStyle:a,lastIdealVelocity:r})},i.startAnimationIfNecessary=function(){i.animationID=E(function(t){var e=i.props.style;if(r(i.state.currentStyle,e,i.state.currentVelocity))return i.wasAnimating&&i.props.onRest&&i.props.onRest(),i.animationID=null,i.wasAnimating=!1,void(i.accumulatedTime=0);i.wasAnimating=!0;var n=t||f(),s=n-i.prevTime;if(i.prevTime=n,i.accumulatedTime=i.accumulatedTime+s,i.accumulatedTime>10*D&&(i.accumulatedTime=0),0===i.accumulatedTime)return i.animationID=null,void i.startAnimationIfNecessary();var o=(i.accumulatedTime-Math.floor(i.accumulatedTime/D)*D)/D,l=Math.floor(i.accumulatedTime/D),c={},u={},h={},d={};for(var p in e)if(Object.prototype.hasOwnProperty.call(e,p)){var m=e[p];if("number"==typeof m)h[p]=m,d[p]=0,c[p]=m,u[p]=0;else{for(var g=i.state.lastIdealStyle[p],v=i.state.lastIdealVelocity[p],b=0;b<l;b++){var y=a(D/1e3,g,v,m.val,m.stiffness,m.damping,m.precision);g=y[0],v=y[1]}var w=a(D/1e3,g,v,m.val,m.stiffness,m.damping,m.precision),x=w[0],C=w[1];h[p]=g+(x-g)*o,d[p]=v+(C-v)*o,c[p]=g,u[p]=v}}i.animationID=null,i.accumulatedTime-=l*D,i.setState({currentStyle:h,currentVelocity:d,lastIdealStyle:c,lastIdealVelocity:u}),i.unreadPropStyle=null,i.startAnimationIfNecessary()})},i.state=i.defaultState(),i}return I(e,t),e.prototype.defaultState=function(){var t=this.props,e=t.defaultStyle,n=t.style,i=e||o(n),a=s(i);return{currentStyle:i,currentVelocity:a,lastIdealStyle:i,lastIdealVelocity:a}},e.prototype.componentDidMount=function(){this.prevTime=f(),this.startAnimationIfNecessary()},e.prototype.componentWillReceiveProps=function(t){null!=this.unreadPropStyle&&this.clearUnreadPropStyle(this.unreadPropStyle),this.unreadPropStyle=t.style,null==this.animationID&&(this.prevTime=f(),this.startAnimationIfNecessary())},e.prototype.componentWillUnmount=function(){null!=this.animationID&&(E.cancel(this.animationID),this.animationID=null)},e.prototype.render=function(){return this.props.children[0](this.state.currentStyle)},e}(n.Component),P=1e3/60,F=function(t){function e(n){T(this,e);var i=N(this,t.call(this,n));return i.animationID=null,i.prevTime=0,i.accumulatedTime=0,i.unreadPropStyles=null,i.clearUnreadPropStyle=function(t){for(var e=i.state,n=e.currentStyles,s=e.currentVelocities,o=e.lastIdealStyles,a=e.lastIdealVelocities,r=!1,l=0;l<t.length;l++){var c=t[l],u=!1;for(var h in c)if(Object.prototype.hasOwnProperty.call(c,h)){var d=c[h];"number"==typeof d&&(u||(u=!0,r=!0,n[l]=A({},n[l]),s[l]=A({},s[l]),o[l]=A({},o[l]),a[l]=A({},a[l])),n[l][h]=d,s[l][h]=0,o[l][h]=d,a[l][h]=0)}}r&&i.setState({currentStyles:n,currentVelocities:s,lastIdealStyles:o,lastIdealVelocities:a})},i.startAnimationIfNecessary=function(){i.animationID=E(function(t){var e=i.props.styles(i.state.lastIdealStyles);if(c(i.state.currentStyles,e,i.state.currentVelocities))return i.animationID=null,void(i.accumulatedTime=0);var n=t||f(),s=n-i.prevTime;if(i.prevTime=n,i.accumulatedTime=i.accumulatedTime+s,i.accumulatedTime>10*P&&(i.accumulatedTime=0),0===i.accumulatedTime)return i.animationID=null,void i.startAnimationIfNecessary();for(var o=(i.accumulatedTime-Math.floor(i.accumulatedTime/P)*P)/P,r=Math.floor(i.accumulatedTime/P),l=[],u=[],h=[],d=[],p=0;p<e.length;p++){var m=e[p],g={},v={},b={},y={};for(var w in m)if(Object.prototype.hasOwnProperty.call(m,w)){var x=m[w];if("number"==typeof x)g[w]=x,v[w]=0,b[w]=x,y[w]=0;else{for(var C=i.state.lastIdealStyles[p][w],_=i.state.lastIdealVelocities[p][w],S=0;S<r;S++){var E=a(P/1e3,C,_,x.val,x.stiffness,x.damping,x.precision);C=E[0],_=E[1]}var k=a(P/1e3,C,_,x.val,x.stiffness,x.damping,x.precision),T=k[0],A=k[1];g[w]=C+(T-C)*o,v[w]=_+(A-_)*o,b[w]=C,y[w]=_}}h[p]=g,d[p]=v,l[p]=b,u[p]=y}i.animationID=null,i.accumulatedTime-=r*P,i.setState({currentStyles:h,currentVelocities:d,lastIdealStyles:l,lastIdealVelocities:u}),i.unreadPropStyles=null,i.startAnimationIfNecessary()})},i.state=i.defaultState(),i}return I(e,t),e.prototype.defaultState=function(){var t=this.props,e=t.defaultStyles,n=t.styles,i=e||n().map(o),a=i.map(function(t){return s(t)});return{currentStyles:i,currentVelocities:a,lastIdealStyles:i,lastIdealVelocities:a}},e.prototype.componentDidMount=function(){this.prevTime=f(),this.startAnimationIfNecessary()},e.prototype.componentWillReceiveProps=function(t){null!=this.unreadPropStyles&&this.clearUnreadPropStyle(this.unreadPropStyles),this.unreadPropStyles=t.styles(this.state.lastIdealStyles),null==this.animationID&&(this.prevTime=f(),this.startAnimationIfNecessary())},e.prototype.componentWillUnmount=function(){null!=this.animationID&&(E.cancel(this.animationID),this.animationID=null)},e.prototype.render=function(){return this.props.children[0](this.state.currentStyles)},e}(n.Component),M=1e3/60,L=function(t){function e(n){T(this,e);var i=N(this,t.call(this,n));return i.unmounting=!1,i.animationID=null,i.prevTime=0,i.accumulatedTime=0,i.unreadPropStyles=null,i.clearUnreadPropStyle=function(t){for(var e=d(i.props.willEnter,i.props.willLeave,i.props.didLeave,i.state.mergedPropsStyles,t,i.state.currentStyles,i.state.currentVelocities,i.state.lastIdealStyles,i.state.lastIdealVelocities),n=e[0],s=e[1],o=e[2],a=e[3],r=e[4],l=0;l<t.length;l++){var c=t[l].style,u=!1;for(var h in c)if(Object.prototype.hasOwnProperty.call(c,h)){var p=c[h];"number"==typeof p&&(u||(u=!0,s[l]=A({},s[l]),o[l]=A({},o[l]),a[l]=A({},a[l]),r[l]=A({},r[l]),n[l]={key:n[l].key,data:n[l].data,style:A({},n[l].style)}),s[l][h]=p,o[l][h]=0,a[l][h]=p,r[l][h]=0,n[l].style[h]=p)}}i.setState({currentStyles:s,currentVelocities:o,mergedPropsStyles:n,lastIdealStyles:a,lastIdealVelocities:r})},i.startAnimationIfNecessary=function(){i.unmounting||(i.animationID=E(function(t){if(!i.unmounting){var e=i.props.styles,n="function"==typeof e?e(u(i.state.mergedPropsStyles,i.unreadPropStyles,i.state.lastIdealStyles)):e;if(h(i.state.currentStyles,n,i.state.currentVelocities,i.state.mergedPropsStyles))return i.animationID=null,void(i.accumulatedTime=0);var s=t||f(),o=s-i.prevTime;if(i.prevTime=s,i.accumulatedTime=i.accumulatedTime+o,i.accumulatedTime>10*M&&(i.accumulatedTime=0),0===i.accumulatedTime)return i.animationID=null,void i.startAnimationIfNecessary();for(var r=(i.accumulatedTime-Math.floor(i.accumulatedTime/M)*M)/M,l=Math.floor(i.accumulatedTime/M),c=d(i.props.willEnter,i.props.willLeave,i.props.didLeave,i.state.mergedPropsStyles,n,i.state.currentStyles,i.state.currentVelocities,i.state.lastIdealStyles,i.state.lastIdealVelocities),p=c[0],m=c[1],g=c[2],v=c[3],b=c[4],y=0;y<p.length;y++){var w=p[y].style,x={},C={},_={},S={};for(var E in w)if(Object.prototype.hasOwnProperty.call(w,E)){var k=w[E];if("number"==typeof k)x[E]=k,C[E]=0,_[E]=k,S[E]=0;else{for(var T=v[y][E],A=b[y][E],I=0;I<l;I++){var N=a(M/1e3,T,A,k.val,k.stiffness,k.damping,k.precision);T=N[0],A=N[1]}var D=a(M/1e3,T,A,k.val,k.stiffness,k.damping,k.precision),O=D[0],P=D[1];x[E]=T+(O-T)*r,C[E]=A+(P-A)*r,_[E]=T,S[E]=A}}v[y]=_,b[y]=S,m[y]=x,g[y]=C}i.animationID=null,i.accumulatedTime-=l*M,i.setState({currentStyles:m,currentVelocities:g,lastIdealStyles:v,lastIdealVelocities:b,mergedPropsStyles:p}),i.unreadPropStyles=null,i.startAnimationIfNecessary()}}))},i.state=i.defaultState(),i}return I(e,t),e.prototype.defaultState=function(){var t=this.props,e=t.defaultStyles,n=t.styles,i=t.willEnter,a=t.willLeave,r=t.didLeave,l="function"==typeof n?n(e):n,c=void 0;c=null==e?l:e.map(function(t){for(var e=0;e<l.length;e++)if(l[e].key===t.key)return l[e];return t});var u=null==e?l.map(function(t){return o(t.style)}):e.map(function(t){return o(t.style)}),h=null==e?l.map(function(t){return s(t.style)}):e.map(function(t){return s(t.style)}),p=d(i,a,r,c,l,u,h,u,h),m=p[0];return{currentStyles:p[1],currentVelocities:p[2],lastIdealStyles:p[3],lastIdealVelocities:p[4],mergedPropsStyles:m}},e.prototype.componentDidMount=function(){this.prevTime=f(),this.startAnimationIfNecessary()},e.prototype.componentWillReceiveProps=function(t){this.unreadPropStyles&&this.clearUnreadPropStyle(this.unreadPropStyles);var e=t.styles;this.unreadPropStyles="function"==typeof e?e(u(this.state.mergedPropsStyles,this.unreadPropStyles,this.state.lastIdealStyles)):e,null==this.animationID&&(this.prevTime=f(),this.startAnimationIfNecessary())},e.prototype.componentWillUnmount=function(){this.unmounting=!0,null!=this.animationID&&(E.cancel(this.animationID),this.animationID=null)},e.prototype.render=function(){var t=u(this.state.mergedPropsStyles,this.unreadPropStyles,this.state.currentStyles);return this.props.children[0](t)},e}(n.Component);L.defaultProps={willEnter:function(t){return o(t.style)},willLeave:function(){return null},didLeave:function(){}};var R={noWobble:{stiffness:170,damping:26},gentle:{stiffness:120,damping:14},wobbly:{stiffness:180,damping:12},stiff:{stiffness:210,damping:20}},j=A({},R.noWobble,{precision:.01});e.Motion=O,e.StaggeredMotion=F,e.TransitionMotion=L,e.spring=function(t,e){return A({},j,e,{val:t})},e.presets=R,e.stripStyle=o,e.reorderKeys=function(){},Object.defineProperty(e,"__esModule",{value:!0})}(e,n(0))}).call(this,n(114),n(755))},function(t,e,n){"use strict";var i,s;i=[n(198),n(307)],void 0===(s=function(t,e){return t.extend({renderItem:function(t,n){return new e(t,Object.assign({},this.options.itemOptions,n))}})}.apply(e,i))||(t.exports=s)},function(t,e,n){"use strict";var i,s;i=[n(3),n(56),n(2),n(0),n(5),n(14),n(11),n(395)],void 0===(s=function(t,e,n,i,s,o,a,r){var l=o.namespace("OpinionLabel").addRules({root:{position:"relative",display:"inline-block"},inner:{position:"relative",display:"flex",justifyContent:"center",alignItems:"center",boxSizing:"border-box",padding:"0 10px",borderRadius:"5px",whiteSpace:"nowrap",fontSize:"12px",borderWidth:"2px",borderStyle:"solid"},innerDark:{color:"#333"},innerLight:{color:"#fff"},suggestion:{background:"none",borderColor:"#ececec",color:"#666"},selectable:{cursor:"pointer"},removable:{paddingRight:"25px"},processing:{paddingRight:"25px"},smallSize:{height:"24px"},mediumSize:{height:"32px"},delete:{marginLeft:"8px",position:"absolute",top:"5px",right:"5px",opacity:"0.5",transition:"opacity 0.2s",hover:{opacity:"1"}},spinner:{position:"absolute",top:"8px",right:"6px"},spinnerSuggestion:{top:"9px"}}),c=i.h;return s.extend({getDefaultProps:function(){return{size:"medium"}},init:function(t){this._parent(t),this.onOpinionClick=this.onOpinionClick.bind(this),this.onClickOutsideSentiments=this.onClickOutsideSentiments.bind(this),this.onSentimentSelected=this.onSentimentSelected.bind(this),this.onSentimentError=this.onSentimentError.bind(this)},render:function(t,n){var i=!t.sentiment,s=!t.readOnly&&!i&&this.belongsToUser(),o=!i&&e.checkContrast(e.parse("#fff"),e.parse("#"+t.sentiment.color));return c("div",{class:l("root")},[c("div",{class:l("inner",o&&(o.ratio<3?"innerDark":"innerLight"),i&&"suggestion",!t.readOnly&&!n.processing&&"selectable",s&&"removable",n.processing&&"processing","small"===t.size&&"smallSize","medium"===t.size&&"mediumSize",t.style),style:{backgroundColor:i?null:"#"+t.sentiment.color,borderColor:i?null:"#"+t.sentiment.color},ref:function(t){this._label=t}.bind(this),title:i?"":t.sentiment.name,onClick:!t.readOnly&&!n.processing&&this.onOpinionClick},c("span",{},t.name),s&&!n.processing&&c("span",{class:"uwa-icon delete small "+l("delete"),title:_("Delete")}),n.processing&&c(a.Spinner,{containerClass:l("spinner",i&&"spinnerSuggestion"),delay:0,size:12,color:i?"#666":o.ratio<3?"#333":"#fff"})),n.chooseSentiment&&c(r,{target:this._label,onClickOutside:this.onClickOutsideSentiments,selectSentiment:this.onSentimentSelected,onError:this.onSentimentError})])},belongsToUser:function(){return String(this.props.userId)===String(n.User.id)},removeOpinion:function(){if(!this.props.id)throw new Error("Opinion id is missing");this.setState({processing:!0}),this.props.item.removeTag(this.props.id).done(null,function(t){this.setState({processing:!1}),this.props.onError(t)}.bind(this))},saveOpinion:function(t){return t.id?this.props.item.editTag(t):this.props.item.addTag(t)},showSentiments:function(){this.setState({chooseSentiment:!0})},onOpinionClick:function(e){t.findElement(e,".delete")?this.removeOpinion():this.showSentiments()},onClickOutsideSentiments:function(){this.setState({chooseSentiment:!1})},onSentimentSelected:function(t){this.setState({chooseSentiment:!1,processing:!0});var e={name:this.props.name,sentiment:t};this.props.id&&this.belongsToUser()&&(e.id=this.props.id),this.saveOpinion(e).fin(function(){this.setState({processing:!1})}.bind(this)).done(null,this.props.onError)},onSentimentError:function(t){this.setState({chooseSentiment:!1}),this.props.onError(t)}})}.apply(e,i))||(t.exports=s)},function(t,e,n){"use strict";var i,s;i=[n(13),n(0),n(5),n(14)],void 0===(s=function(t,e,n,i){var s={bookmark:{path:{d:"M8 3.2v24l8-6.4 8 6.4v-24h-16z"}},bookmark_outline:{path:{d:"M8 3.2v24l8-6.4 8 6.4v-24h-16zM20.8 20l-4.8-4-4.8 4v-13.6h9.6v13.6z"}}},o=e.h,a=i.namespace("SvgIcon").addRules({svg:{display:"inline-block",strokeWidth:0,height:"20px",width:"20px"}});return n.extend({render:function(t){var e=s[t.icon];if(!e)throw new Error("Unknown icon : "+t.icon);return o("span",{class:a("svg")+(t.className?" "+t.className:""),title:t.title?t.title:"",style:t.style},o("svg",{viewBox:e.viewBox?e.viewBox:"0 0 32 32",style:t.svgStyle},this._getSvgChildren(e)))},_getSvgChildren:function(e){return Object.keys(e).filter(function(t){return"viewBox"!==t}).map(function(n){return t.splat(e[n]).map(function(t){return o(n,t)})}).reduce(function(t,e){return t.concat(e)},[])}})}.apply(e,i))||(t.exports=s)},function(t,e,n){"use strict";var i,s;i=[n(15),n(19)],void 0===(s=function(t,e){var n,i=[];return{stickyElements:function(s,o){var a,r,l,c=o&&o.stickySelector||".sticky",u=!1,h={fullHeight:0};function d(){a.removeClassName("is-sticky-bottom").removeClassName("is-sticky").setStyles({position:"",top:"",bottom:"",width:"",left:"",marginTop:""})}function p(){var t;s===document.body?((t=e.getSize()).top=0,t.left=0,t.right=t.width,t.bottom=t.height):t=s.getBoundingClientRect();var n=r&&(t.top!==r.top||t.width!==r.width||t.left!==r.left);r=t,s.getElements(c).forEach(function(t){var e=t.getParent();l=e.getBoundingClientRect();var i=a===t;if(l.bottom>r.top&&l.top<=r.top){if(!i||n){a&&(d(),a=null);var s=t.getBoundingClientRect();h={top:s.top-l.top-(l.height-l.bottom)+(s.height-s.bottom),fullHeight:s.bottom+s.top-2*l.top,width:s.width,left:s.left},a=t}l.bottom-h.fullHeight<r.top?u||(a.addClassName("is-sticky-bottom").removeClassName("is-sticky").setStyles({position:"absolute",top:"auto",bottom:0,width:h.width,left:"",marginTop:""}),u=!0):(n||u||!i)&&(a.removeClassName("is-sticky-bottom").addClassName("is-sticky").setStyles({position:"fixed",top:r.top+h.top,bottom:"",width:h.width,left:h.left,marginTop:0}),u=!1)}else i&&(d(),a=null)})}n||(n=setInterval(function(){(i=i.filter(function(t){return t.element._events&&t.element._events.scroll})).forEach(function(t){t.refresh()})},1e3));var m={element:s,refresh:p};return t.addEvent.call(s===document.body?window:s,"scroll",p),i.push(m),{reset:function(){i=i.filter(function(t){return t!==m})}}}}}.apply(e,i))||(t.exports=s)},function(t,e,n){"use strict";var i,s;i=[n(1),n(26),n(3),n(108),n(23),n(282),n(153)],void 0===(s=function(t,e,n,i,s,o,a){var r,l,c;function u(e,n){var i=a.factory(e,n);return i.getContent().getElement(".item-actions").addContent(t.createElement("div",{class:"nv-item-renderer-close-feed",text:"p"})),i}function h(){c.renderer.setFocus(!1),c.renderer.destroy(),c.options.onClose&&c.options.onClose(),c.closingFx&&c.closingFx.stop(),c=null}function d(){c&&!c.closing&&(c.closing=!0,c.closingFx=new e(r.getContent(),{duration:300,events:{onComplete:function(){r.close(),h()}}}).start({opacity:0}))}return{open:function(t,a){var p=!1;c&&(h(),p=!0),a||(a={}),function(){if(!r){r=new i({fxOptions:{duration:0},className:"item-lightbox",exclusive:!0,closeable:!1});var t=new s({shadows:!0});l=t.getInnerElement(),o.stickyElements(l,{stickySelector:".item-actions-wrapper"}),r.addContent(t),r.getContent().addEvent("click",function(t){!n.findElement(t,".nv-item-renderer-close-feed")&&n.findElement(t,".nv-item-renderer.feed")||d()}),r.inject(document.body.getElement("#smartreader-feeds-main"))}}(),c={options:a,renderer:u(t,a.rendererOptions)},l.addContent(c.renderer),c.renderer.updateDOM(),c.renderer.setFocus(!0),r.open();var m=r.getContent();p||m.setStyle("opacity",0),new e(m,{duration:300}).start({opacity:1})},close:d,getItem:function(){return c&&c.renderer.getItem()},getRenderer:function(){return c&&c.renderer}}}.apply(e,i))||(t.exports=s)},function(t,e,n){"use strict";var i,s;i=[n(9),n(0),n(5),n(198),n(780)],void 0===(s=function(t,e,n,i,s){var o=e.h,a=n.extend({_renderContainer:function(t,e){var n=this.props.tileSizes.width,i=this.props.tileSizes.height,s=Math.floor(this.props.width/n);if(s){var a=(this.props.width-s*n)/2,l=new r(this.props.tileSizes,s);e&&(t=t.slice().reverse());var c=t.map(function(t){var s=!1,o=t.getSizes(),r=l.next(function(t){var e=o[t];return e||(s=t),e});return s&&(o[s]=r),t.render({tileSizes:this.props.tileSizes,margin:this.props.margin,style:{top:!e&&r.y*i,bottom:e&&r.y*i,left:a+r.x*n,height:r.height*i,width:r.width*n}})},this),u=l.getCurrentHeight()*i;return o("div",{style:{width:this.props.width,height:u,position:"relative"}},c)}},render:function(t){return o("div",{style:{margin:t.margin}},[this._renderContainer(t.newRenderers,!0),this._renderContainer(t.renderers,!1)])}}),r=t.extend({init:function(t,e){this._tileMaxes=t,this._maxWidth=e,this._grid=[],this._nextY=0},next:function(t){var e,n;if(this._grid.length){var i;for(i=0;i<this._maxWidth;i+=1)if(void 0===n)this._grid[0][i]||(n=i);else if(this._grid[0][i])break;e=this._pickASize(i-n,t)}else e=this._pickASize(this._maxWidth,t),n=0;var s={x:n,y:this._nextY,width:e.width,height:e.height};return this._fillGrid(s),s},getCurrentHeight:function(){return this._nextY+this._grid.length},_fillGrid:function(t){for(var e=0;e<t.height;e+=1){e>=this._grid.length&&this._grid.push(Array.apply(null,{length:this._maxWidth}).map(function(){return!1}));for(var n=t.x;n<t.x+t.width;n+=1)this._grid[e][n]=!0}for(;this._grid.length&&this._grid[0].every(function(t){return t});)this._grid.shift(),this._nextY+=1},_pickASize:function(t,e){var n=e&&e(t);return n||(n={width:Math.floor(Math.random()*this._tileMaxes.maxColumns)+1,height:Math.floor(Math.random()*this._tileMaxes.maxRows)+1}),{width:Math.min(n.width,this._tileMaxes.maxColumns,t),height:Math.min(n.height,this._tileMaxes.maxRows)}}}),l=i.extend({options:{tileSizes:{width:140,height:140,maxRows:3,maxColumns:3},showGroups:!1},init:function(t){this._props={renderers:[],newRenderers:[],margin:6},this._parent(t)},_renderView:function(t){"function"==typeof t&&(t=t(this._props)),this._props=Object.assign({},this._props,t);var n=this.getInnerElement(),i=n.clientWidth-2*this._props.margin;if(!(i<=0)){var s=this.options.tileSizes;Object.assign(this._props,{width:i,tileSizes:"function"==typeof s?s(i):s}),e.render(o(a,this._props),n,n.firstChild)}},onInjected:function(){this._renderView()},onResize:function(){this._parent();var t=this.getInnerElement().clientWidth;this._previousWidth!==t&&(this._previousWidth=t,this._renderView())},renderItem:function(t,e){return new s(t,Object.assign({},this.options.itemOptions,e))},injectRenderersAt:function(t,e){"after"===e?this._renderView({renderers:this._props.renderers.concat(t)}):this._renderView({newRenderers:t.concat(this._props.newRenderers)})},getCurrentRenderers:function(){return this._props?this._props.newRenderers.concat(this._props.renderers):[]},empty:function(){this._renderView({renderers:[],newRenderer:[]})}});return l.__tests__={PlacementGenerator:r},l}.apply(e,i))||(t.exports=s)},function(t,e,n){"use strict";var i,s;i=[n(1),n(96),n(118),n(87)],void 0===(s=function(t,e,n,i){function s(t){return i.get(t,"data")}return{createHandles:function(n){var i=n.widgetData||n.module.dataObj,s=i.moduleName||i.name,o=i.dragIcon||e.getThumbnail(s),a=i.dragText||i.title||"";return t.createElement("div",{class:"panel-tab-module widget-clone uwa-font-aa",styles:{width:"80px",height:"90px"}}).addContent(t.createElement("div",{class:"panel-tab-module-content"}).addContent(t.createElement("img",{src:o}),t.createElement("div",{class:"panel-tab-module-title"}).addContent(t.createElement("span",{text:a}))),t.createElement("div",{class:"panel-tab-module-add uwa-icon"})).inject(n.root)},getWidgetData:function(t){return!!s(t)&&s(t).dataObj},readerClassNames:function(t,e){var i="drag-"+t.type;t.target.toggleClassName("dragging",!e),n.UI.mainTreeView.toggleClassName(i,!e)}}}.apply(e,i))||(t.exports=s)},function(t,e,n){"use strict";var i,s;i=[n(181)],void 0===(s=function(t){return t.extend({defaultOptions:{addCurves:!0,forecast:!1},name:"nv-hbar",init:function(t){this._parent(t),this.options.secondAxis=!1},formatDateLabel:function(t){return t.stripTags()},getLabelsOptions:function(t,e){return{step:this.getStep(t.width,e),style:{lineHeight:"11px",fontSize:"10px"}}},getDefaultOptions:function(t){return UWA.extend(this._parent(t),{chart:{type:"bar",marginRight:33},plotOptions:{bar:{borderWidth:0,groupPadding:.1,pointPadding:0}}},!0)}})}.apply(e,i))||(t.exports=s)},function(t,e,n){"use strict";var i,s;i=[n(181),n(51)],void 0===(s=function(t){return t.extend({defaultOptions:{addCurves:!0,forecast:!1},name:"nv-vbar",getDefaultOptions:function(t){return UWA.extend(this._parent(t),{chart:{type:"column"},plotOptions:{column:{borderWidth:0,groupPadding:.1,pointPadding:0}}},!0)}})}.apply(e,i))||(t.exports=s)},function(t,e,n){"use strict";var i,s;i=[n(1),n(8),n(32)],void 0===(s=function(t,e,n){return n.extend({getContent:function(){return this.elements.container||(this.elements.container=t.createElement("div",{class:this.getClassNames()}),this.labels={true:this.options.labels&&this.options.labels.true?this.options.labels.true:_("Yes"),false:this.options.labels&&this.options.labels.false?this.options.labels.false:_("No")},this.radioContainers=this.getRadioInputs(),Object.keys(this.radioContainers).forEach(function(t){this.radioContainers[t].inject(this.elements.container)},this),this.setValue()),this.elements.container},getRadioInputs:function(){var n={};return this.radioInputs={},Object.keys(this.labels).forEach(function(i,s){var o=t.createElement("label",{class:this.getClassNames("-label"),text:this.labels[i]}),a=new e.Radio(this.getInputOptions({className:"green",attributes:{name:this.options.name,value:s}})).inject(o,"top");n[i]=o,this.radioInputs[i]=a},this),n},setValue:function(t){t="true"===t||!0===t,this.radioInputs.true.check(t),this.radioInputs.false.check(!t)},getValue:function(){return this.radioInputs.true.isChecked()}})}.apply(e,i))||(t.exports=s)},function(t,e,n){"use strict";var i,s;i=[n(0),n(5),n(123),n(14)],void 0===(s=function(t,e,n,i){var s=t.h,o=i.namespace("Analyze_LegendGrid").addRules({root:{position:"relative"},cell:{position:"absolute",transition:"top .4s, left .4s",background:"white"}}),a=20,r=280,l=34;function c(t,e,n){var i=0,s=0;return n.map(function(n){i+n>e&&s<t-1&&(i=0,s+=1);var o={top:i,column:s,height:n};return i+=n,o})}function u(t){return Math.max.apply(Math,t.map(function(t){return t.top+t.height}))}function h(t,e,n){if(!t||!e.length)return 0;var i=n||function(t,e){return Math.max(1,Math.min(Math.floor(t/r),e))}(t,e.length),s=t-(i-1)*a,o=function(t,e){return e.forEach(function(e){e.style.width=t+"px",e.style.height="auto"}),e.map(function(t){return Math.ceil(t.clientHeight/l)*l})}(s/i,e),d=Math.max.apply(Math,o),p=o.reduce(function(t,e){return t+e},0),m=Math.max(d,p/i),f=c(i,m,o),g=u(f);if(g!==m&&(g=u(f=c(i,g,o))),!n){var v=f[f.length-1].column+1;if(v<i)return h(t,e,v)}return function(t,e,n){var i=1;t.forEach(function(t,s){var o=e[s].style;o.top=t.top?t.top-i+"px":t.top+"px",o.left=t.column*n+t.column*a+"px",o.width=(n<800?n:n/2)+"px",o.height=t.height+"px",o.visibility="visible",i=0===t.top?1:i+1})}(f,e,s/i),g}return e.extend({init:function(t){this._parent(t),this._width=0},render:function(t){return s(n,{onResize:function(t){t.width!==this._width&&(this._width=t.width,this._placeCells())}.bind(this),className:o("root")},t.children.map(function(t){return s("div",{className:o("cell"),style:{visibility:this._width?"visible":"hidden"}},t)},this))},componentDidUpdate:function(){this._placeCells()},componentWillUnmount:function(){this.base&&(this.base.style.height="")},_placeCells:function(){if(this._width){var t=h(this._width,[].slice.call(this.base.childNodes));this.base.style.height=t+"px"}}})}.apply(e,i))||(t.exports=s)},function(t,e,n){"use strict";var i,s;i=[n(0),n(5),n(2),n(11),n(1094),n(1095),n(80),n(4),n(14),n(98)],void 0===(s=function(t,e,n,i,s,o,a,r,l,c){var u=t.h,h=l.namespace("Analyze_LegendFacet").addRules({title:{textOverflow:"ellipsis",whiteSpace:"nowrap",overflow:"hidden",padding:"5px 8px",marginLeft:"7px",marginRight:"auto"},hoverTitle:{":hover":{backgroundColor:"#D4D4D4",borderRadius:"3px",cursor:"pointer"}}});return e.extend({init:function(t){this._parent(t),this.setState({editMode:!1})},render:function(t){var e,a=t.facet.getStatus().progress,l=this.state,c=t.facet.getSource().getResultSampling(),d=c&&100!==Number(c),p=t.facet.isTimeData()&&t.facet.isTimeData()&&t.facet.getTotalAvailable()&&t.facet.getTotalAvailable()!==t.facet.getTotal()?r.formatHumanNumber(t.facet.getTotalAvailable())+" "+_("available"):"",m="";return d&&(m+=_("Serie based on {0}% sampling.").format(c)),p&&(m+=d?"<br>"+p:p),t.highlightedFacets&&(e=t.highlightedFacets.includes(t.facet)),u("div",{class:"legend-facet"+(e?" highlighted":"")},[u("div",{class:"legend-facet-container",onMouseOver:function(){t.onHighliteFacet(t.facet,!0)},onMouseOut:function(){t.onHighliteFacet(t.facet,!1)}},[u(i.ColorPicker,{valueInput:null,value:t.facet.getColor(),defaultView:"panton",events:{onChange:function(e){var n="#"+e.target.value;t.onFacetChange(t.facet,{color:n})}}}),l.editMode&&!t.preview?u(s,{initialValue:t.facet.getTitle(),facet:t.facet,focus:l.focus,onFacetChange:t.onFacetChange,onEditModeChange:function(t){this.setState({editMode:t})}.bind(this)}):u("div",{class:h("title",!t.preview&&"hoverTitle"),"uwa-tooltip":t.facet.getTitle(),onClick:function(){this.setState({editMode:!0,focus:!0})}.bind(this)},t.facet.getTitle()),!d&&!p||"details"!==t.selectedTab||n.isInScreenshot()?"":u("div",{class:"legend-facet-informations uwa-icon","data-icon":"T","uwa-tooltip":m}),100!==a?u("div",{class:"legend-facet-indexing uwa-icon","data-icon":"e","uwa-tooltip":_("Please wait for data indexing to complete.")}):"",t.withAggInfos&&100===a?this.getFacetAggInfosElm(t.facet):"",t.hideMenu?"":u(o,{facet:t.facet,readOnly:t.readOnly,onCreateModuleHistory:t.onCreateModuleHistory,onOpenPivot:t.onOpenPivot,onCreatePotion:t.onCreatePotion,onEditSource:t.onEditSource},null)]),t.detail])},getFacetAggInfosElm:function(t){if(t.getStats().length){var e=t.getAggregationMethod();if(e)return u("div",{class:"legend-facet-agg-infos"+(e?" "+e:"")},[u("div",{class:"legend-facet-agg-result"},[u("div",{class:"legend-facet-agg-label"},_("{0}:").format(c.getLabel(e))),u("div",{class:"legend-facet-agg-value"},c.getFormatedValue(e,t,this.props.layout))])])}}})}.apply(e,i))||(t.exports=s)},function(t,e,n){"use strict";var i,s;i=[n(0),n(5),n(11)],void 0===(s=function(t,e,n){var i=t.h;return e.extend({init:function(t){this._parent(t)},render:function(t){return i("div",{class:"legend-facet-details"},[i(n.ColorPicker,{valueInput:null,value:t.facet.getColor(),defaultView:"panton",events:{onChange:function(e){var n="#"+e.target.value;t.onFacetChange(t.facet,{color:n})}}}),i("div",{class:"legend-facet-infos"},t.detail)])}})}.apply(e,i))||(t.exports=s)},function(t,e,n){"use strict";var i,s;i=[n(1),n(13),n(56),n(164),n(4),n(46),n(36),n(421)],void 0===(s=function(t,e,n,i,s,o,a,r){return r.extend({name:"nv-combined-graph",build:function(){var t=this.getChartOptions();this.graph=new i.Chart(t,function(t){this.addAdditionalLines(t)}.bind(this)),this.options.preview||this.updatePinDrawingInjection(),this.redrawGraph()},redrawGraph:function(){this.graph.series.forEach(function(t){t.redraw()})},getChartOptions:function(){var e,n=this._parent();i.dateFormats={Y:function(t){var n=new Date(t),i=e&&new Date(e);return e=t,i&&n.getFullYear()!==i.getFullYear()?n.getFullYear():""},W:function(t){var e=new Date(t),n=a.getDatesFromRange(e,"weekly");return n[0].strftime("%e")+"/"+n[1].strftime("%e")}};var o=function(e){var n=this.axis.getExtremes(),i="_yAxisCloseNumbers"+e;t.is(self[i])&&this.value!==n.min||(self[i]=[]);var o=s.formatHumanNumber(this.value,{closeNumbers:self[i]});return t.is(this.value)&&self[i].push(this.value),o},r={chart:{plotBackgroundColor:"#f7f7f7",zoomType:"x"},plotOptions:{series:{lineWidth:3,fillOpacity:1,marker:{lineWidth:0,symbol:"circle",radius:1,states:{hover:{lineWidth:2,radius:4}}}}},yAxis:[{title:{text:""},startOnTick:!1,labels:{formatter:function(){return o.call(this,0)}}},{title:{text:""},opposite:!0,labels:{formatter:function(){return o.call(this,0)}}}],xAxis:{title:{text:""},tickmarkPlacement:"on",labels:{maxStaggerLines:1,align:"center",y:17,style:{lineHeight:"11px",fontSize:"10px"}},type:"datetime",dateTimeLabelFormats:{hour:"%H:%M",day:"%e <br/>%b %Y",week:"%W <br/>%b %Y",month:"%b <br />%Y"}}};this.options.logarithmic&&(r.yAxis[0].type="logarithmic",r.yAxis[1].type="logarithmic",r.yAxis[0].minorTickInterval="auto",r.yAxis[1].minorTickInterval="auto");var l,c=-1,u=n.series.map(function(t){return t.data.map(function(t){return t.key})}).reduce(function(t,e){return t.concat(e)},[]),h=Math.min.apply(Math,u);return n.series.forEach(function(t){t.data.some(function(t,e){if(void 0===t.available)return!0;e>c&&(c=e,l=t.key)})}),c>=0&&(r.xAxis.plotBands=[{from:1e3*h,to:1e3*l,color:{pattern:"#DEDEDE",width:1,height:3}}]),t.extend(n,r,!0),n},getTooltipOptions:function(){return{enable:!0,useHTML:!0,crosshairs:{width:1,color:"#ddd"},shared:!0,borderColor:null,borderWidth:0,shadow:!1,backgroundColor:null,formatter:function(){var t={},e='<div class="chart-tooltip"><div>',n={};function i(t,e){return'<span style="color: '+t+'">'+e+"</span>"}function a(t){return t.y||0}var r,l=o.sort(this.points,{type:"bylabel",label:"y",order:"desc"});for(r=0;r<l.length;r+=1){var c=l[r].point.label,u=l[r].point.key;if(n[u]||(n[u]={count:0,html:'<p class="tooltip-title">'+c.toString().stripTags()+"</p>"},t[u]=0),n[u].count+=1,n[u].count>3&&0===l[r].y&&0===t[u])t[u]=1,n[u].html+="<p>"+i("#444444",_("Others"))+" 0 </p>";else if(0!==l[r].y||0===t[u]){var h=[],d=l[r].point.index,p=l[r].point.series.data;d>0&&h.push(a(p[d-1])),d<p.length-1&&h.push(a(p[d+1]));var m=s.formatHumanNumber(a(l[r].point),{closeNumbers:h}),f=l[r].point.available,g=f&&f!==l[r].y?" &nbsp; ("+i("black",f)+" available)":"",v=i("black",m);n[u].html+='<p class= "tooltip-series">'+i(l[r].series.color,l[r].series.name.cut(25)+" "+v+g)+"</p>"}}for(r in n)e+=n[r].html;return e+="</div></div>"},style:{fontSize:"10px"}}},addAdditionalLines:function(t){var e=this,i=[],s=function(n,i){var s=t.series[n].data[i.point.x];s&&s.stat&&e.dispatchEvent("onPointClick",[s.stat])},o=function(t){return t.stats.map(function(t){return t.formatStatForHighchart({logarithmic:this.options.logarithmic})},this)}.bind(this);this.options.facetsNode.getFacets().forEach(function(e,a){var r=n.parse(e.getColor()),l="left"===e.getAlignTo()?0:1;if(e.isSmoothedLineVisible()&&e.getSmoothed()){r=r.cloneWith({alpha:.6});var c={name:_("Smooth curve"),data:o(e.getSmoothed()),dashStyle:"ShortDot",color:r.toRGBString(),lineWidth:2,type:"spline",yAxis:l,marker:{enabled:!1},states:{hover:{enabled:!1}},zIndex:1};c.events={click:s.bind(this,t.series[a].index)},i.push(c)}if(e.isTrendLineVisible()&&e.getTrend()){r=r.cloneWith({alpha:.5});var u={data:o(e.getTrend()),name:_("Linear Regression"),lineWidth:1.5,type:"spline",color:r.toRGBString(),yAxis:l,marker:{enabled:!1},states:{hover:{enabled:!1}},zIndex:1};u.events={click:s.bind(this,t.series[a].index)},i.push(u)}"spline"===e.getView().name&&e.isForecastLineVisible()&&e.getForecast()&&e.getStats().length>2&&(t.series[a].forecast=e.getForecast(),t.series[a].drawGraph=this.splineDrawGraph)}.bind(this)),i.forEach(function(e){t.addSeries(e,!1,!1)})},splineDrawGraph:function(){var t,e="between"===this.chart.options.pointPlacement,n=o.getSerieWithoutNull(this.data,!0),s=n[n.length-1],a=n[n.length-2],r=n[n.length-3],l={plotX:this.xAxis.translate(s.x,0,0,0,1,e),plotY:Math.round(10*this.yAxis.translate(this.forecast.forecast,0,1,0,1))/10},c=Math.atan((l.plotX-a.plotX)/(l.plotY-a.plotY)),u=8*Math.sin(c),h=8*Math.cos(c),d=function(t,e,n,i){return(1+n)*e[i]-n*t[i]};c<0&&(c=Math.PI+c,u=8*Math.sin(c),h=8*Math.cos(c)),i.seriesTypes.spline.prototype.drawGraph.apply(this,arguments),t=this.chart.renderer.g(),this.chart.renderer.path(["M",a.plotX,a.plotY,"C",d(r,a,.3,"plotX"),d(r,a,.3,"plotY"),d(a,l,-.3,"plotX"),d(a,l,-.3,"plotY"),l.plotX-u,l.plotY-h]).attr({stroke:this.color,"stroke-width":2,"stroke-dasharray":"2,2"}).add(t),this.chart.renderer.path(["M",l.plotX-u,l.plotY-h,"L",l.plotX+4*Math.cos(c)-u,l.plotY-4*Math.sin(c)-h,l.plotX,l.plotY,l.plotX-4*Math.cos(c)-u,l.plotY+4*Math.sin(c)-h,"Z"]).attr({fill:this.color}).add(t),this.arrow&&this.arrow.destroy(),this.arrow=t,t.add(this.group)},updatePinDrawingInjection:function(){var t=this,e=function(){t.drawPointsWithNotes(this,arguments)};this.graph.series.forEach(function(t){t.originalDrawPoints||(t.originalDrawPoints=t.drawPoints,t.drawPoints=e)})},drawPointsWithNotes:function(t,e){var n=this;if(t.points.forEach(function(t){var e=t.pointAttr[t.selected?"hover":""];t.nv_originalRadius=e.r,e.r=Math.max(e.r,.05)}),t.originalDrawPoints.apply(t,e),t.options.facet){var i=t.options.facet[0].cid;this.notePins[i]&&this.notePins[i].map(function(t){t.destroy()}),this.notePins[i]=[],this.options.preview||t.options.facet[0].getNotes().map(function(e){var s,o,a,r=e.getKey(),l=(s=t.points,o=r,a=null,s.forEach(function(t){t.key<=o&&(a=t)}),a);if(l&&l.graphic){n.hasDrawnPins=!0;var c=n.makeNotePin(t,l,l.key);c.add(l.graphic.parentGroup),n.notePins[i].push(c)}}),t.originalDrawPoints.apply(t,e),t.points.forEach(function(t){t.pointAttr[t.selected?"hover":""].r=t.nv_originalRadius})}},makeNotePin:function(t,n,s){var o,a=e.Client.Engine.ie8?"~":"～",r=t.chart.renderer.text('<span style="font-family: uwa-icons;font-size: 20px;">'+a+"</span>",0,0);o=void 0!==n.barX&&void 0!==n.pointWidth?n.barX+n.pointWidth/2:n.plotX;var l=i.perspective([{x:o,y:n.plotY}],t.chart,!0)[0];return r.attr({x:Math.floor(l.x)-8,y:Math.floor(l.y)-6,id:s,zIndex:10}),r.css({"font-size":"20px",color:t.color,stroke:"#f7f7f7","stroke-width":"2px"}),r}})}.apply(e,i))||(t.exports=s)},function(t,e,n){var i,s;i=[n(1),n(19),n(3),n(15),n(10),n(372)],void 0===(s=function(t,e,n,i,s,o){"use strict";var a=s.extend({defaultOptions:{element:null,selectedTab:null,className:"",classNames:{tabView:"uwa-tabview",tabList:"uwa-tablist",tabPanels:"uwa-tabview-panel",tabPanel:"uwa-tab-panel",tab:"uwa-tab",selected:"selected",disabled:"disabled"},scroller:{scrollSize:1,nextButton:null,previousButton:null},tabScroller:!1,tabSelector:".uwa-tab",allowReload:!1,noContent:!1},tabs:null,selectedTab:null,init:function(e){this._parent(e),this.tabs=[],this.selectedTab=null,this.buildContainer(),this.initEvents(),t.is(this.options.tabs,"array")&&(this.options.tabs.forEach(this.addTab,this),delete this.options.tabs),(this.options.tabScroller||this.options.scroller.nextButton||this.options.scroller.previousButton)&&this.createScroller()},addTab:function(e,n){return e instanceof a.Tab==!1&&(e=new a.Tab(e)),e.setOption("classNames",this.options.classNames),t.is(n,"number")&&n<this.tabs.length&&n>=0?(e.tabElement().inject(this.getTab(n).tabElement(),"before"),this.tabs.splice(n,0,e)):(this.elements.tabList.grab(e.tabElement()),this.tabs.push(e)),this.elements.contentNode&&e.contentElement()&&this.elements.contentNode.grab(e.contentElement()),e.options.selected&&this.selectTab(e),this.onResize(),this.dispatchEvent("onAddTab",[e]),this},removeTab:function(t){var e=this.getTab(t);return e&&(e.remove(),this.tabs.splice(this.tabs.indexOf(e),1),this.onResize(),this.dispatchEvent("onRemoveTab",[e])),this},selectTab:function(t,e){var n,i,s=this.getTab(t);s&&((s!==this.selectedTab||this.options.allowReload)&&((n=this.selectedTab)?n.setSelected(!1):i=0,this.dispatchEvent("onPreSelectTab",[s,n,e]),this.selectedTab=s.setSelected(!0),this.onResize(),this.dispatchEvent("onSelectTab",[s,n,e])),this.ensureTabIsVisible(s,!1,i))},enableTab:function(t,e){var n=this.getTab(t);n&&n.setDisabled(void 0!==e&&!e)},getTab:function(e){var n,i,s=!1;if(t.is(e))if(e instanceof a.Tab)s=e;else for(n=0,i=this.tabs.length;n<i&&(s=this.tabs[n],!e||!e.nodeType||s.tabElement()!==e)&&(n!==e&&s.getId()!==e&&s.getName()!==e);n+=1)s=!1;else s=this.selectedTab;return s},moveTab:function(t,e){var n,i,s=e+1>=this.tabs.length;return n=this.getTab(t),(i=this.tabs.indexOf(n))!==e&&(this.tabs.splice(e,0,this.tabs.splice(i,1)[0]),s?n.tabElement().inject(this.getTab(e-1).tabElement(),"after"):n.tabElement().inject(this.getTab(e+1).tabElement(),"before"),!0)},selectDefaultTab:function(){var t,e,n;for(e=0,n=this.tabs.length;e<n;e+=1)if((t=this.tabs[e]).isSelectable())return this.selectTab(t),t;return!1},setTabContent:function(t,e){return this.getTab(t).setContent(e),this},getTabContent:function(t){return this.getTab(t).contentElement()},buildContainer:function(){this.options.element?(this.elements.container=t.extendElement(this.options.element),delete this.options.element):this.elements.container=t.createElement("div"),this.elements.container.addClassName(this.options.classNames.tabView+" "+this.options.className),this.elements.tabList=t.createElement("ul",{class:this.options.classNames.tabList}).inject(this.elements.container),this.options.noContent||(this.elements.contentNode=t.createElement("div",{class:this.options.classNames.tabPanels}).inject(this.elements.container))},initEvents:function(){this.elements.container.addEvent("click",this.handleEvent.bind(this))},handleEvent:function(e){var i=this.getTabFromEvent(e);i&&(n.preventDefault(e),t.is(i.handleEvent,"function")&&i.handleEvent(e,this),i.isDisabled()||this.selectTab(i,e))},getTabFromEvent:function(t){var e=n.getElement(t).getClosest(this.options.tabSelector);return e&&this.getTab(e)},createScroller:function(){this.elements.container.setAttribute("scrollable","true"),this.scroller=this.getScroller(),this.scroller.addEvent("onScrollerResize",this.onScrollerResize.bind(this))},getScroller:function(){return this.scroller||(this.scroller=new o(this.elements.tabList,this.options.scroller)),this.scroller},onScrollerResize:function(t){var e=this.overflow;this.overflow=this.scroller.hasOverflow(),this.overflow&&this.selectedTab&&t&&Math.abs(t.deltaScroll)>100&&this.ensureTabIsVisible(this.selectedTab,!1,0),e!==this.overflow&&(this.elements.container.setAttribute("overflow",String(this.overflow)),this.dispatchEvent("onOverflowChange",[{overflow:this.overflow}]))},reload:function(){var t=this.selectedTab;this.selectedTab=null,this.selectTab(t)},showTabList:function(){this.elements.tabList.show()},hideTabList:function(){this.elements.tabList.hide()},isTabVisible:function(t,e){var n=!1,i=this.getTab(t);return i&&(n=this.scroller&&this.scroller.isItemVisible(i.tabElement(),e)),n},ensureTabIsVisible:function(t,e,n){this.scroller&&(this.isTabVisible(t,e)||this.scrollToTab(t,n))},scrollNext:function(){this.scroller&&this.scroller.scrollNext()},scrollPrevious:function(){this.scroller&&this.scroller.scrollPrevious()},scrollToTab:function(t,e){var n=this.getTab(t).tabElement();n&&this.scroller.scrollToItem(n,void 0,e)},selectTabItem:function(t,e,n,i){var s=this.getTab(t);return s instanceof a.DropdownTab&&s.items.forEach(function(t){t[e]===n&&s.selectItem(t,this,!1!==i)},this),this},onResize:function(){this.scroller&&this.scroller.onRefresh()},onPreInject:function(){null===this.options.selectedTab&&this.selectDefaultTab()},onPostInject:function(){null!==this.options.selectedTab&&this.selectTab(this.options.selectedTab)}});return a.Tab=s.extend({defaultOptions:{id:"",disabled:!1,selected:!1,text:"",icon:"",name:"",content:null,className:""},init:function(t){!t||t.id||0===t.id||t.name||(t.id=Date.now().toString(36)),this._parent(t)},getId:function(){return this.options.id},getName:function(){return this.options.name},getText:function(){return this.options.text},setIcon:function(e){return e?this.elements.icon?this.options.icon!==e&&(this.options.icon=e,this.elements.icon.src=e):this.elements.icon=t.createElement("img",{class:"icon",src:e}).inject(this.tabElement().getElement(".title"),"before"):this.elements.icon&&this.elements.icon.remove(),this},setText:function(t){return this.tabElement().getElement(".title").setText(t),this},setDisabled:function(t){return void 0===t&&(t=!0),this.tabElement().toggleClassName("disabled",t),this.elements.content&&this.elements.content.toggleClassName("disabled",t),this.options.disabled=t,this},setSelected:function(t){return this.tabElement().toggleClassName("selected",t),this.elements.content&&this.elements.content.toggleClassName("selected",t).toggleClassName("hidden",!t),this.options.selected=t,this},setContent:function(t){return this.contentElement().setHTML(t),this},isSelectable:function(){return!this.isDisabled()},isSelected:function(){return this.options.selected},isDisabled:function(){return this.options.disabled},remove:function(){this.tabElement().remove(),this.elements.content&&this.elements.content.remove()},tabElement:function(){return this.elements.container||(this.elements.container=this._createTabElement(),this.options.name&&this.elements.container.addClassName(this.options.name),this.options.className&&this.elements.container.addClassName(this.options.className),this.options.icon&&this.setIcon(this.options.icon)),this.elements.container},contentElement:function(){return this.elements.content||(this.elements.content=this._createContentElement(),this.elements.content&&this.elements.content.addClassName("hidden "+this.options.name)),this.elements.content},_createTabElement:function(){var e=t.createElement("li",{class:this.options.classNames.tab});return e.grab(this._createInnerTabElement(e))},_createInnerTabElement:function(){return t.createElement("a",{href:this.options.id?"#"+this.options.id:""}).grab(t.createElement("span",{class:"title",text:this.options.text}))},_createContentElement:function(){var e=t.createElement("div",{id:this.options.id,html:this.options.content||t.i18n("Loading..."),class:this.options.classNames.tabPanel});return delete this.options.content,e}}),a.DropdownTab=a.Tab.extend({defaultOptions:{autohide:!0,popupMenuItemSelector:".uwa-popup-menu-item",classNames:{dropdownTab:"uwa-tab-dropdown",popupMenu:"uwa-popup-menu",popupMenuItem:"uwa-popup-menu-item"}},init:function(e,n){this.items=n,this.selectedItem=n[0],this._parent(t.merge({name:String(e)},this.selectedItem))},setSelected:function(t){return this._parent(t),this.options.autohide&&this.elements.container.getElement(".dropdown").toggleClassName("hidden",!t),this},handleEvent:function(t,e){this.isSelected()&&(n.stop(t),this.tabView=e,this.togglePopupMenu())},togglePopupMenu:function(){var t=this.elements.container.hasClassName("open");return t?this.hidePopupMenu():this.showPopupMenu(),!t},showPopupMenu:function(){this.createPopupMenu(),this.elements.container.addClassName("open")},hidePopupMenu:function(e){if(e&&t.Event.getElement(e).getClosest("."+this.options.classPopupMenu))return;this.elements.container.removeClassName("open"),this.elements.popupMenu&&(this.elements.popupMenu.destroy(),delete this.elements.popupMenu),this.boundHidePopupMenu&&(i.removeEvent.apply(document.body,["click",this.boundHidePopupMenu]),delete this.boundHidePopupMenu),this.tabView&&(this.tabView=null,delete this.tabView)},createPopupMenu:function(){var e,n,s,o;for(this.elements.popupMenu&&this.elements.popupMenu.remove(),this.elements.popupMenu=t.createElement("ul",{class:this.options.classNames.popupMenu,events:{click:this.onPopupMenuItemClick.bind(this)}}),e=0,n=this.items.length;e<n;e++)this.selectedItem!==this.items[e]&&this._createPopupMenuItem(this.items[e]).inject(this.elements.popupMenu).setAttribute("data-index",e);return this.elements.popupMenu.inject(this.elements.container.getParent("."+this.options.classNames.tabView)).setPosition({x:0,y:this.elements.container.getDimensions().height},{relative:this.elements.container,boundary:"auto",fit:"resize-max"}),s=this.elements.popupMenu.getDimensions(),o=this.elements.container.getDimensions(),s.width<o.width&&this.elements.popupMenu.setStyle("width",o.width+"px"),this.boundHidePopupMenu||(this.boundHidePopupMenu=this.hidePopupMenu.bind(this),i.addEvent.apply(document.body,["click",this.boundHidePopupMenu])),this.elements.popupMenu},selectItem:function(e,n,i){if(t.is(e,"object")){if(t.is(e.handler,"function"))e.handler.call(this);else if(e!==this.selectedItem){var s=n||this.tabView;this.tabElement().getElement(".title").setText(e.text||""),e.icon&&this.setIcon(e.icon),this.previousItem=this.selectedItem,this.selectedItem=e,s&&!1!==i&&(s.selectedTab=null,s.selectTab(this))}this.hidePopupMenu()}},onPopupMenuItemClick:function(e){n.stop(e);var i,s,o=t.Event.getElement(e).getClosest(this.options.popupMenuItemSelector);o&&(i=Number(o.getAttribute("data-index")),(s=this.items[i])&&this.selectItem(s))},_createPopupMenuItem:function(e){var n=t.createElement("li",{class:this.options.classNames.popupMenuItem}),i=t.createElement("a").inject(n);return e.icon&&i.grab(t.createElement("img",{src:e.icon,class:"icon"})),i.grab(t.createElement("span",{text:e.text})),n},_createTabElement:function(){return this._parent().addClassName(this.options.classNames.dropdownTab)},_createInnerTabElement:function(){return t.createElement("a",{href:this.options.id?"#"+this.options.id:""}).grab(t.createElement("span",{class:"title",text:this.options.text})).grab(t.createElement("span",{class:"dropdown hidden"}))}}),t.namespace("Controls/TabView",a,t)}.apply(e,i))||(t.exports=s)},function(t,e,n){var i,s;i=[n(1),n(24),n(10),n(19),n(3),n(15),n(26)],void 0===(s=function(t,e,n,i,s,o,a){"use strict";var r,l=/input|textarea|select/i,c=/auto|scroll/i,u=i.Features,h=i.Platform,d=i.Engine.version>=5.1&&Boolean(h.ios);function p(t){return t>>0}function m(t){var e,n,i=!0,o=s.getElement(t);return o&&(e=o.getTagName(),n=o.getStyle("overflow"),i=e&&!e.match(l)&&!n.match(c)),i}function f(t){var e=t.type;return-1!==e.indexOf("mouse")?"mouse":-1!==e.indexOf("touch")?"touch":-1!==e.indexOf("ointer")?"pointer":"none"}function g(t,e,n){"init"===t?o.addEvents.call(e,{touchstart:n,mousedown:n,MSPointerDown:n}):"start"===t?o.addEvents.call(e,{touchmove:n,mousemove:n,MSPointerMove:n,touchend:n,touchcancel:n,mouseup:n,MSPointerUp:n}):"stop"===t?o.removeEvents.call(e,{touchmove:n,mousemove:n,MSPointerMove:n,touchcancel:n,touchend:n,mouseup:n,MSPointerUp:n}):"destroy"===t&&o.removeEvents.call(e,{touchstart:n,mousedown:n,MSPointerDown:n,touchmove:n,mousemove:n,MSPointerMove:n,touchcancel:n,touchend:n,mouseup:n,MSPointerUp:n})}return(r=n.extend(e,{name:"uwa-scroller",position:null,direction:null,scroll:null,maxScroll:null,scroller:null,maxPage:null,scrollBars:null,isScrolling:!1,isTracking:!1,isDragging:!1,isPulling:!1,enabled:!0,defaultOptions:{className:"",width:"",height:"",bounce:!1,momentum:!1,snap:!1,threshold:6,lockDirection:!0,scrollableX:!0,scrollableY:!0,scrollbarH:!0,scrollbarV:!0,scrollTime:250,scrollSize:40,scrollDrag:u.dragAndDrop&&!h.blackberry,useTransform:u.transitionsCSS&&!h.webos,useNative:h.blackberry,isTouch:u.touchEvents,has3d:u.cssMatrix,preventDefaultMouseWheel:!1,debugPixel:!1},init:function(e,n){this._parent(n),n=this.options,t.extend(this,{position:{x:0,y:0},direction:{x:0,y:0},scroll:{x:!1,y:!1,width:0,height:0},maxScroll:{x:0,y:0},scroller:{width:0,height:0},page:{x:0,y:0},maxPage:{x:0,y:0},scrollBars:{x:null,y:null}}),n.useNative?this.buildNative(e):this.buildSkeleton(e),this.initEvents(),this.setPosition(0,0,0,!0)},destroy:function(){var t=this.elements,e=t.element,n=t.scroller,i=t.wrapper,s=t.scrollerParent,a=this.eventHandler;r.activeScroller===this&&delete r.activeScroller,e&&(o.removeEvent.call(e,"resize",a),o.inject.call(e,n,"before")),s&&o.removeEvent.call(s,"resize",a),g("destroy",n,this.eventHandler),o.removeEvents.call(n,{keydown:a,mousewheel:a}),n.destroy(),i.destroy()},setOptions:function(t){this._parent(t);var e=(t=this.options).snap;return t.snap=!0===e?{x:null,y:null}:"number"==typeof e?{x:e,y:e}:e,this},buildNative:function(e){var n=this,i=h.android||h.blackberry||d?"scroll":"auto",o=n.options,a=n.elements={element:e,scroller:t.createElement("div",{class:n.getClassNames("","-native"),styles:{overflow:i,overflowScrolling:"touch",zIndex:"0",position:"relative",height:o.height||"100%",width:o.width||"100%",userSelect:"none",zoom:"1"}}),wrapper:t.createElement("div",{class:o.className+"-wrapper"}),ghost:t.createElement("div",{styles:{height:"10px",width:"10px",background:"#000",position:"absolute",zIndex:"1",opacity:o.debugPixel?1:0},events:{click:function(t){return s.stop(t),!1}}})};a.scroller.style.webkitOverflowScrolling="touch",n.body=!1===o.body?a.scroller:o.body||document.body,a.scroller.inject(e,"before"),a.wrapper.inject(a.scroller),a.ghost.inject(a.scroller),e.inject(a.wrapper),a.scrollerParent=a.scroller.getParent(),a.scroller.addEvent("scroll",function(){n.position=n.getPosition(),n.setAnimate("onScroll",function(){n.triggerOnScroll(),n.triggerOnScrollEnd()})}),n.onRefresh()},buildSkeleton:function(e){var n=this,o=n.options,a=n.scrollBars,l=n.elements={element:e,scroller:t.createElement("div",{class:n.getClassNames("","-fake"),tabindex:"0",styles:{overflow:"hidden",position:"relative",userSelect:"none",outline:0,zoom:"1"}}),wrapper:t.createElement("div",{class:o.className+"-wrapper",styles:{width:"100%",height:"100%",position:"relative"}}),ghost:t.createElement("div",{styles:{height:"10px",width:"10px",background:"#000",position:"absolute",zIndex:"1",opacity:o.debugPixel?1:0},events:{click:function(t){s.stop(t),n.updateGhostPosition({y:0,x:0})}}})};n.body=o.body||i.Engine.ie?document.body:window,l.scroller.addContent([l.wrapper,l.ghost]).inject(e,"before"),e.inject(l.wrapper),l.scrollerParent=l.scroller.getParent(),a.x=o.scrollableX&&o.scrollbarH&&new r.Scrollbar(t.extend({dir:"horizontal"},o.scrollbar),n),a.y=o.scrollableY&&o.scrollbarV&&new r.Scrollbar(t.extend({dir:"vertical"},o.scrollbar),n),n.onRefresh()},initEvents:function(){var t,e=this.options,n=this.elements;t=this.eventHandler=this.handleEvent.bind(this),n.scroller.addEvents({keydown:t,mousewheel:t}),e.scrollDrag&&(g("init",n.scroller,this.eventHandler),this.setCursor("grab"),n.scroller.addEvents({mousemove:s.preventDefault,touchmove:s.preventDefault})),n.element.addEvent("resize",t),n.scrollerParent.addEvent("resize",t)},handleEvent:function(t){var e;switch(t.type){case"touchstart":case"mousedown":case"MSPointerDown":e=this.dispatchEvent("onScrollInit",[t]);break;case"touchmove":case"mousemove":case"MSPointerMove":e=this.dispatchEvent("onScrollMove",[t]);break;case"touchend":case"touchcancel":case"mouseup":case"MSPointerUp":e=this.dispatchEvent("onScrollStop",[t]);break;case"DOMMouseScroll":case"onmousewheel":case"mousewheel":e=this.dispatchEvent("onMouseWheel",[t]);break;case"keydown":e=this.dispatchEvent("onKeyDown",[t]);break;case"DOMSubtreeModified":case"orientationchange":case"resize":e=this.dispatchEvent("onRefresh",[t])}return e},scrollTo:function(t,e,n){var i,s=this.options;n=isNaN(n)?s.scrollTime:n,this.options.snap&&(t=(i=this.snap(t,e)).x,e=i.y,n=Math.min(i.time,n)),this.setPosition(t,e,n)},scrollToPage:function(t,e,n){var i=this.options,s=this.getPage(),o=this.position,a=this.getSnapSize();i.snap||(s.x=-p(o.x/a.x),s.y=-p(o.y/a.y)),"next"===t?t=++s.x:"prev"===t&&(t=--s.x),"next"===e?e=++s.y:"prev"===e&&(e=--s.y),t=!1!==t?-t*a.x:o.x,e=!1!==e?-e*a.y:o.y,n=isNaN(n)?i.scrollTime:n,t=(a=this.snap(t,e)).x,e=a.y,n=Math.min(a.time,n),this.setPosition(t,e,n)},scrollToElement:function(t,e,n){"string"==typeof e?e={x:e,y:e}:void 0===e&&(e={x:"center",y:"center"});var i,s,a,r,l=this.scroll,c=this.maxScroll,u=o.getPosition.call(t,this.elements.wrapper),h=o.getDimensions.call(t),d=this.getSnapSize(),p={x:l.width,y:l.height},m={};for(h={x:h.outerWidth,y:h.outerHeight},i=0;i<2;i+=1)l[s=i?"x":"y"]?(a=-u[s],"center"===e[s]?a+=(p[s]-h[s])/2:"end"===e[s]&&(a+=p[s]-h[s])):a=0,r=a<c[s],a=a>0?0:r?c[s]:a,!r&&this.options.snap&&(a=Math[i?"floor":"round"](a/d[s])*d[s]),a<c[s]&&(a=c[s]),m[s]=a;this.setPosition(m.x,m.y,n)},setPosition:function(t,e,n,i){var s,o,a=this.options,r=this.scrollBars,l=this.scroll,c=this.getPosition();n=isNaN(n)?a.scrollTime:n,o={x:t,y:e},a.bounce||(o=this.bounce(o)),s={x:c.x-o.x,y:c.y-o.y},this.direction={x:0===s.x?0:s.x>0?-1:1,y:0===s.y?0:s.y>0?-1:1},0===s.x&&0===s.y||(this.scrollToPosition(o,n),r.x&&l.x&&0!==s.x&&r.x.setPosition(o.x,n,i),r.y&&l.y&&0!==s.y&&r.y.setPosition(o.y,n,i),!this.isPulling&&(this.isMaxPosition("x")&&0!==s.x||this.isMaxPosition("y")&&0!==s.y)&&this.dispatchEvent("onScrollPull"))},stopScroll:function(){this.scrollToPosition(this.getPosition(!0),0)},scrollToPosition:function(t,e){e=e||0;var n,i,s=this,o=s.elements,r=o.scroller,l=o.wrapper,c=s.options;s.triggerOnScrollStart(),s.position=t,c.useNative?(r.scrollTop=-t.y,r.scrollLeft=-t.x,s.triggerOnScroll(),s.triggerOnScrollEnd()):c.useTransform?(l.removeEvent("transitionEnd"),e>0&&l.addEvent("transitionEnd",function(){l.removeEvent("transitionEnd"),s.triggerOnScrollEnd()}),i={transformOrigin:"0 0",transform:"translateZ(0)",fontSmoothing:"antialiased",perspective:800,transformStyle:"preserve-3d",transitionDelay:"0ms",transitionDuration:e+"ms",transitionProperty:l.getStyleName("transform",!0),transitionTimingFunction:"cubic-bezier(0.33, 0.66, 0.66, 1)"},c.has3d?i.transform="translate3d("+t.x+"px,"+t.y+"px, 0)":i.transform="translate("+t.x+"px,"+t.y+"px)",l.setStyles(i),0===e&&s.triggerOnScrollEnd()):((n=s.fx=s.fx||new a(l,{transition:"cubicOut",wait:!1,events:{onComplete:function(){s.triggerOnScrollEnd()},onAnimate:function(){s.triggerOnScroll()}}})).setOptions({duration:e}),n.start({top:t.y,left:t.x}))},triggerOnScrollStart:function(){var t=this,e=t.options,n=t.isScrolling;t.clearDelayed("onScrollEnd"),n||(t.dispatchEvent("onScrollStart"),(e.useNative||e.useTransform)&&t.setAnimate("onScroll",function e(){t.triggerOnScroll(),t.setAnimate("onScroll",e)})),t.dispatchEvent("onScroll")},triggerOnScroll:function(){this.dispatchEvent("onScroll")},triggerOnScrollEnd:function(){var t=this,e=t.options;t.setDelayed("onScrollEnd",function(){(e.useNative||e.useTransform)&&t.clearAnimate("onScroll"),t.dispatchEvent("onScrollEnd")},100)},getPosition:function(t){var e,n,i=!1,s=this.options,a=this.elements;if(s.useNative)n={y:-a.scroller.scrollTop,x:-a.scroller.scrollLeft};else if(s.useTransform){if(n={y:0,x:0},(e=o.getStyle.call(a.wrapper,"transform",!0))&&"none"!==e)if(u.matrixCSS)try{n={y:(e=new(window.WebKitCSSMatrix||window.MSCSSMatrix||window.MOZCSSMatrix||window.CSSMatrix)(e)).f,x:e.e}}catch(t){}else i=0===e.indexOf("matrix3d"),e=e.replace(/[^0-9-.,]/g,"").split(","),n={y:Number(e[i?13:5]),x:Number(e[i?12:4])};t&&(n={x:p(n.x),y:p(n.y)})}else n={y:(t?parseInt:parseFloat)(a.wrapper.style.top||0,10),x:(t?parseInt:parseFloat)(a.wrapper.style.left||0,10)};if(isNaN(n.x)||isNaN(n.y))throw new Error("Invalid scroller position");return n},getResetPosition:function(){var t=this.scroll,e=this.getPosition(),n=this.maxScroll,i=e.x,s=e.y;return e.x>=0||!t.x?i=0:e.x<n.x&&(i=n.x),e.y>0||!t.y?s=0:e.y<n.y&&(s=n.y),{x:p(i),y:p(s)}},isInViewport:function(t,e,n){var i,s,a=this.elements.wrapper,r=o.getOffsets,l=o.getDimensions,c=r.call(a,!0),u=r.call(t),h=l.call(a),d=l.call(t),p=this.getPosition(),m=h.outerHeight,f=h.outerWidth,g=d.width,v=d.height,b=u.y,y=u.x;return c.y=c.y-p.y,c.x=c.x-p.x,e?(i=y<c.x+f&&y+g>c.x,s=b<c.y+m&&b+v>c.y):(i=y>=c.x&&y+g<=c.x+f,s=b>=c.y&&b+v<=c.y+m),"x"===n?i:"y"===n?s:i&&s},isMaxPosition:function(t,e,n){e=e||this.getPosition(),n=n||this.direction[t];var i=this.maxScroll;return n>0?e[t]>=0:e[t]<=i[t]},hasOverflow:function(t){var e=this.scroll,n=this.scroller,i=e.width<n.width,s=e.height<n.height;return"x"===t?i:"y"===t?s:i||s},setSize:function(t){var e=this.options,n=!1;e.width!==t.width&&(n=!0,this.setOption("width",t.width)),e.height!==t.height&&(n=!0,this.setOption("height",t.height)),n&&this.dispatchEvent("onRefresh")},setCursor:function(t){var e=this.scroll;"grabbing"!==t||e.x&&e.y||(t=e.x?"col-resize":"row-resize"),this.elements.scroller.setStyle("cursor",t)},focus:function(){return this.elements.scroller&&this.elements.scroller.focus(),this},updateGhostPosition:function(t){var e=this.elements,n=e.scroller.getOffsets();this.options.useNative&&(n.y-=e.scroller.scrollTop,n.x-=e.scroller.scrollLeft),e.ghost.setStyles({top:t.y-n.y-5,left:t.x-n.x-5})},createDebugPixel:function(e,n,i,s){var o,a=this.elements;this.options.debugPixel&&(this.debugPixels=this.debugPixels||[],s&&this.debugPixels.forEach(function(t){t.remove()}),o=a.scroller.getOffsets(),this.options.useNative&&(o.y-=a.scroller.scrollTop,o.x-=a.scroller.scrollLeft),this.debugPixels.push(t.createElement("div",{title:(i||"")+" x:"+e.x+" y:"+e.y,styles:{height:"4px",width:"4px",background:n||"red",position:"absolute",zIndex:"1",top:e.y-o.y-2,left:e.x-o.x-2}}).inject(a.scroller)))},getPage:function(){var t,e,n,i=this.getPosition(),s=this.getSnapSize(),o=this.maxScroll,a={};for(e=0;e<2;e++)t=i[n=e?"x":"y"]/s[n],a[n]=-t,t*=s[n],isNaN(t)||t>0?a[n]=0:t<o[n]&&(a[n]=this.maxPage[n]);return a},getSnapSize:function(){var t=this.options.snap,e=this.scroll;return{x:t&&t.x||e.width,y:t&&t.y||e.height}},getScrollSize:function(){var t=this.options,e=t.snap;return{x:e&&e.x||t.scrollSize,y:e&&e.y||t.scrollSize}},bounce:function(t){var e,n,i=this.maxScroll;for(e=0;e<2;e+=1)(t[n=e?"x":"y"]>=0||t[n]<i[n])&&(t[n]=t[n]>=0||i[n]>=0?0:i[n]);return t},momentum:function(t,e,n,i,s){var o,a,r,l,c,u,h,d,m,f,g=this.scroll,v=this.scroller,b={x:t,y:e},y={x:0,y:0},w={x:Number(b.x),y:Number(b.y),time:s};for(o=0;o<2;o++)r=o?"width":"height",c=i[a=o?"x":"y"]-n[a],g[a]&&s<=350&&0!==c&&(d=(l=Math.min(Math.abs(c)/s,1.9))*l/.0012,h=g[r],m=-b[a],f=v[r]-g[r]+b[a],u=h/(6/(d/l*6e-4)),c>0&&d>m?(l=l*(m+=u)/d,d=m):c<0&&d>f&&(l=l*(f+=u)/d,d=f),w[a]=p(b[a]+d*(c<0?-1:1)),y[a]=l/6e-4);return w.time=Math.max(y.y,y.x),w},snap:function(t,e,n){var i,s,o,a,r,l=this.getPage(),c=this.getSnapSize(),u=this.maxScroll,h={x:t,y:e};for(r={x:0===(a={x:(n=n||this.position).x-t,y:n.y-e}).x?0:a.x>0?-1:1,y:0===a.y?0:a.y>0?-1:1},s=0;s<2;s++)0!==a[o=s?"x":"y"]&&(i=Math[r[o]<0?"floor":r[o]?"ceil":"round"](h[o]/c[o]),l[o]=-i,i*=c[o],isNaN(i)||i>0?i=l[o]=0:i<u[o]&&(l[o]=this.maxPage[o],i=u[o]),h[o]=i);return h.time=p(Math.max(Math.abs(n.x-h.x)/c.x*500,Math.abs(n.y-h.y)/c.y*500)),h},onScrollInit:function(t){var e,n,i,a,l,c=this,u=c.options;!s.isDefaultPrevented(t)&&(l=c,!r.activeScroller||r.activeScroller===l)&&function(t){return t.scroll.x||t.scroll.y||t.options.bounce}(c)&&function(t){return"touchstart"===t.type||0===s.whichButton(t)}(t)&&m(t)&&(n=f(t),i=s.getPosition(t),a=t.timeStamp,e=c.getPosition(!0),r.activeScroller=c,"mouse"===n&&s.stop(t),c.createDebugPixel(i,"green","onScrollInit",!0),c.isTracking=n,g("start",c.body,c.eventHandler),(c.isPulling||c.isScrolling)&&c.updateGhostPosition(i),c.scrollStart={time:a,position:e,event:i},c.scrollMove={time:a,direction:!1,event:i},c.positions=[],u.momentum&&c.isScrolling&&c.setDelayed("stopOnScrollInit",function(){var t=c.getPosition(!0);!1!==c.isDragging||t.x===e.x&&t.y===e.y||(c.setPosition(e.x,e.y,0),c.createDebugPixel(i,"purple","stopOnScrollInit"))},150),c.setDelayed("focusOnScrollInit",function(){var t=c.elements.scroller,e=t.getDocument().activeElement;e&&o.isInjected.call(e,t)||c.focus()},75),c.setCursor("grabbing"))},onScrollMove:function(e){var n,i,o,a,r,l,c,u,h,d,p,m,g=this.options,v=this.positions,b=s.getPosition(e),y=g.lockDirection?g.threshold:0,w=g.threshold;this.isTracking===f(e)&&(s.stop(e),this.updateGhostPosition(b),this.clearDelayed("stopOnScrollInit"),this.isDragging?(a=this.scrollMove,i=this.maxScroll,n=t.clone(this.position),l=e.timeStamp,u=b.y-a.event.y,p=0===(c=b.x-a.event.x)?0:c>0?-1:1,m=0===u?0:u>0?-1:1,this.enableScrollX&&(n.x+=c,(n.x<i.x||n.x>0)&&(g.bounce?n.x-=c/2:n.x<i.x?n.x=i.x:n.x=0)),this.enableScrollY&&(n.y+=u,(n.y<i.y||n.y>0)&&(g.bounce?n.y-=u/2:n.y<i.y?n.y=i.y:n.y=0)),v.length>60&&v.splice(0,30),v.push(n.x,n.y,l),this.setPosition(n.x,n.y,0),this.scrollMove.direction&&(this.enableScrollX&&0!==a.direction.x&&a.direction.x!==p||this.enableScrollY&&0!==a.direction.y&&a.direction.y!==m)?(this.createDebugPixel(b,"yellow","onScrollMove:directionChange"),this.scrollStart={time:l,position:n,event:b}):this.createDebugPixel(b,"orange","onScrollMove:isDragging"),this.scrollMove={time:l,direction:{x:p,y:m},position:n,event:b}):(o=this.scroll,r=this.scrollStart,h=Math.abs(b.x-r.event.x),d=Math.abs(b.y-r.event.y),this.enableScrollX=o.x&&h>=y,this.enableScrollY=(o.y||!o.x&&!o.y)&&d>=y,this.isDragging=(this.enableScrollX||this.enableScrollY)&&(h>=w||d>=w),this.isDragging&&this.isScrolling&&this.stopScroll(),this.createDebugPixel(b,"red","onScrollMove:notDragging")))},onScrollStop:function(t){var e,n,i,o,a,l=this,c=l.options,u=c.scrollTime;l.isTracking===f(t)&&(l.isTracking=!1,r.activeScroller===l&&delete r.activeScroller,g("stop",l.body,l.eventHandler),o=s.getPosition(t),e=l.getResetPosition(!0),a=t.timeStamp,l.createDebugPixel(o,"blue","onScrollMove"),l.setCursor("grab"),l.isDragging&&(l.isDragging=!1,i=l.scrollStart,l.scrollEnd=n={time:a,position:e,event:o},s.stop(t),l.updateGhostPosition(o),n.event.x===i.event.x&&n.event.y===i.event.y||(c.momentum&&(e=l.momentum(e.x,e.y,i.event,n.event,n.time-i.time),u=Math.max(e.time,u)),c.snap&&(e=l.snap(e.x,e.y,i.position),u=Math.max(e.time,u)))),l.setPosition(e.x,e.y,u,!1),l.positions.length=0,l.scrollStart=null,l.scrollMove=null,l.scrollEnd=null,l.setDelayed("resetGhostPosition",function(){l.updateGhostPosition({x:0,y:0})},500))},onScrollStart:function(){this.isScrolling=!0},onScroll:function(){},onScrollEnd:function(){var t=this,e=t.options;t.isScrolling&&(t.isScrolling=!1,e.useTransform&&t.elements.wrapper.removeEvent("transitionEnd",t.eventHandler)),t.isTracking||(t.isPulling=!1,t.setAnimate("onResetPosition",function(){var e,n=t.getResetPosition(),i=t.getPosition(),s=t.scrollBars;t.options.snap&&(e=t.snap(n.x,n.y),n.x=e.x,n.y=e.y),i.x!==n.x||i.y!==n.y?t.setPosition(n.x,n.y):(s.x&&s.x.onScrollEnd(),s.y&&s.y.onScrollEnd())}))},onScrollPull:function(){this.isPulling=!0},onKeyDown:function(t){var e=this.position,n=this.scroll,i=this.getScrollSize(),o=t.keyCode,a=38===o,r=37===o,l=40===o||a?"y":!(!(39===o)&&!r)&&"x",c=a||r?1:-1,u={x:e.x,y:e.y};n[l]&&m(t)&&!this.isMaxPosition(l,e,c)&&(s.stop(t),u[l]+=c*i[l],this.scrollTo(u.x,u.y))},onMouseWheel:function(t){var e=this.options,n=this.position,i=this.scroll,o=i.x&&!i.y||"shift"===s.whichKey(t)?"x":"y",a=this.getScrollSize(),r=s.wheelDelta(t),l={x:n.x,y:n.y};r&&i[o]&&!this.isMaxPosition(o,n,r)?(s.stop(t),l[o]+=r*a[o],this.scrollTo(l.x,l.y)):e.preventDefaultMouseWheel&&s.stop(t)},onRefresh:function(){if(!this.elements.scroller.isInjected()||this.isScrolling)return!1;var t,e,n,i,s=this.options,a=this.elements,r=this.position,l=this.scrollBars,c=o.getScrolls.call(a.element),u=o.getDimensions.call(a.scrollerParent);if(n={width:c.width,height:c.height},(e={width:s.width||u.innerWidth,height:s.height||u.innerHeight}).width===this.scroll.width&&e.height===this.scroll.height&&n.width===this.scroller.width&&n.height===this.scroller.height)return!1;i={},!1!==s.scrollableX&&(i.width=e.width),!1!==s.scrollableY&&(i.height=e.height),a.scroller.setStyles(i),e.x=s.scrollableX&&e.width<c.width,e.y=s.scrollableY&&e.height<c.height,this.maxScroll={x:n.width<e.width?0:e.width-n.width,y:n.height<e.height?0:e.height-n.height},this.maxPage={x:Math.ceil(n.width/e.width),y:Math.ceil(n.height/e.height)},this.scroll=e,this.scroller=n,l.x&&l.x.setSize(e.width,n.width),l.y&&l.y.setSize(e.height,n.height),t=this.getResetPosition(),this.moved||t.x===r.x&&t.y===r.y||this.setPosition(t.x,t.y,0,!0),a.scroller.toggleClassName("scrollable",e.y||e.x),a.scroller.toggleClassName("scrollable-x",e.x),a.scroller.toggleClassName("scrollable-y",e.y)}})).Scrollbar=n.extend({name:"uwa-scroller-scrollbar",defaultOptions:{className:"",barColor:"#555",bgColor:"#EEE",opacity:1,dir:"vertical",padding:2,width:6,roundCorder:!0,autoHide:!0,draggable:!0,elastic:!1,debugPixel:!1},position:{x:0,y:0},scroller:null,visible:!0,init:function(t,e){this._parent(t),this.scroller=e,this.buildSkeleton(),this.initEvents(),this.options.autoHide&&this.hide()},destroy:function(){this.elements.wrapper.remove()},createDebugPixel:function(e,n,i,s){var o,a=this.isHorizontal,r=this.elements;this.options.debugPixel&&(this.debugPixels=this.debugPixels||[],s&&this.debugPixels.forEach(function(t){t.remove()}),o=r.wrapper.getOffsets(),this.debugPixels.push(t.createElement("div",{title:(i||"")+" x:"+e.x+" y:"+e.y,styles:{height:"2px",width:"4px",background:n||"red",position:"absolute",zIndex:"11",top:a?0:e.y-o.y-2,left:a?e.x-o.x-2:0}}).inject(this.scroller.elements.scroller)))},buildSkeleton:function(){var e,n,s=this.options,o=this.scroller.options,a="horizontal"===s.dir,r=parseInt(s.padding,10),l=parseInt(s.width,10),c=s.roundCorder?p(s.width/2*100/100):0,u=this.scroller.elements.scroller;this.isHorizontal=a,this.axis=a?"x":"y",this.reverseAxis=a?"y":"x",this.elements.wrapper=n=t.createElement("div",{class:this.getClassNames("","-"+s.dir),styles:{zIndex:"10",position:"absolute",overflow:"hidden",opacity:s.opacity}}).inject(u),s.bgColor&&n.setStyle("background",s.bgColor),a?n.setStyles({bottom:r+"px",left:r+"px",height:l+"px"}):n.setStyles({top:r+"px",right:r+"px",width:l+"px"}),this.elements.bar=e=t.createElement("div",{styles:{background:s.barColor,zIndex:"10",position:"absolute",top:0,left:0}}).inject(n),i.Engine.ie<7&&e.setHTML("&nbsp;&nbsp;&nbsp;"),a?e.setStyles({borderRadius:c+"px "+c+"px",width:l+"px",minWidth:l+1+"px",minHeight:l+"px"}):e.setStyles({borderRadius:c+"px "+c+"px",height:l+"px",minWidth:l+"px",minHeight:l+1+"px"}),s.useTransform&&(e.setStyles({transformOrigin:"0 0",transform:"translateZ(0)"}),o.has3d&&e.setStyles({perspective:800,transformStyle:"preserve-3d"}))},initEvents:function(){var t=this,e=t.options,n=t.elements;t.eventHandler=t.handleEvent.bind(t),e.draggable&&(g("init",n.bar,t.eventHandler),n.bar.setStyle("cursor","grab")),e.autoHide&&n.wrapper.addEvents({mouseenter:function(){t.focused=!0,t.show()},mouseleave:function(){t.focused=!1,t.hide()}})},handleEvent:function(t){var e;switch(t.type){case"touchstart":case"mousedown":e=this.dispatchEvent("onScrollInit",[t]);break;case"touchmove":case"mousemove":e=this.dispatchEvent("onScrollMove",[t]);break;case"touchend":case"touchcancel":case"mouseup":e=this.dispatchEvent("onScrollStop",[t])}return e},setSize:function(t,e){var n=this.options,i=this.scroller.scroll,s=this.isHorizontal,o=s?i.y:i.x,a=parseInt(n.width,10),r=parseInt(n.padding,10);e<=t?this.hide(!0):(n.autoHide||this.show(),this.maxSize=p(t-2*r-(o?a:0)),this.minSize=a,this.size=Math.min(Math.max(this.maxSize*this.maxSize/e,3*a),this.maxSize),this.maxScroll=this.maxSize-this.size,this.minScroll=0,this.toWrapperProp=this.maxScroll/(t-e),this.toPropWrapper=e/this.maxSize,this.elements.wrapper.setStyle(s?"width":"height",this.maxSize+"px"),this.elements.bar.setStyle(s?"width":"height",this.size+"px"))},onScrollInit:function(t){s.stop(t);var e=this.scroller,n=s.getPosition(t);this.createDebugPixel(n,"#7FFF00",!0),g("start",e.body,this.eventHandler),this.scrollStart={x:n.x,y:n.y},this.scrollMove={x:n.x,y:n.y},this.elements.bar.setStyle("cursor","grabbing"),e.setCursor("grabbing"),e.isTracking=!0,e.isDragging=!0},onScrollMove:function(t){s.stop(t);var e=this.axis,n=this.toPropWrapper,i=this.scroller,o=i.maxScroll,a=this.scrollMove,r=this.isHorizontal,l=i.position,c=s.getPosition(t),u=r?(c.x-a.x)*n:0,h=r?0:(c.y-a.y)*n,d={x:l.x-u,y:l.y-h};d[e]>o[e]&&d[e]<0?(this.createDebugPixel(c,"orange"),i.setPosition(d.x,d.y,0),this.scrollMove={x:c.x,y:c.y}):this.createDebugPixel(c,"red")},onScrollStop:function(t){s.stop(t);var e=this.scroller,n=s.getPosition(t),i=e.getResetPosition();this.createDebugPixel(n,"#00CED1"),e.setPosition(i.x,i.y,NaN,!1,!0),g("stop",this.scroller.body,this.eventHandler),this.focused||this.hide(),this.elements.bar.setStyle("cursor","grab"),this.scroller.setCursor("grab"),this.scrollMove=null,this.scrollStart=null,e.isTracking=!1,e.isDragging=!1},setPosition:function(t,e,n){var i,s,o,r,l,c=this.elements.bar,u=this.scroller,h=this.size,d=this.axis,p=this.dimension,m=this.minSize,f=this.position,g=this.maxScroll,v=this.minScroll,b=this.options,y=u.options,w={y:0,x:0};s=this.toWrapperProp*t,r=this.isHorizontal?"width":"height",s<0?b.elastic?(l=Math.max(h+s,m),w[d]=v):w[d]=v:s>g?b.elastic?(l=Math.max(h-(s-g),m),w[d]=Math.min(s,g+h-m)):w[d]=g:(l=h,w[d]=s),w.x===f.x&&w.y===f.y&&p===l||(n?e=0:this.show(),w={x:w.x,y:w.y},y.useTransform?(o={transitionDelay:"0ms",transitionDuration:e+"ms",transitionProperty:[c.getStyleName("transform",!0)].concat([r]).join(","),transitionTimingFunction:"cubic-bezier(0.33, 0.66, 0.66, 1.0)"},l&&b.elastic&&(o[r]=l+"px"),b.has3d?o.transform="translate3d("+w.x+"px,"+w.y+"px, 0)":o.transform="translate("+w.x+"px,"+w.y+"px)",c.setStyles(o)):((i=this.fx=this.fx||new a(c,{transition:"cubicOut",wait:!1})).setOptions({duration:e}),o={top:[f.y,w.y],left:[f.x,w.x]},l&&b.elastic&&(o[r]=[h,l]),i.start(o))),this.position=w,this.dimension=l},onScrollStart:function(){this.show()},onScrollEnd:function(){this.hide()},show:function(){var e;this.visible||(e={opacity:this.options.opacity},this.scroller.options.useTransform&&t.merge(e,{transitionProperty:"opacity",transitionDelay:"0ms",transitionDuration:"50ms"}),this.elements.wrapper.setStyles(e),this.visible=!0)},hide:function(e){var n;!this.visible||this.focused||this.scrollMove||!this.options.autoHide&&!e||(n={opacity:0},this.scroller.options.useTransform&&t.merge(n,{transitionProperty:"opacity",transitionDelay:e?"0ms":"300ms",transitionDuration:e?"0ms":"150ms"}),this.elements.wrapper.setStyles(n),this.visible=!1)}}),t.namespace("Controls/Scroller",r,t)}.apply(e,i))||(t.exports=s)},function(t,e,n){"use strict";var i,s;i=[n(2),n(0),n(5)],void 0===(s=function(t,e,n){var i=e.h;return n.extend({render:function(e){var n=i("div",{className:"widget-intro-image"},[i("div",{className:t.isIn3DDashboard()?e.servicePict||e.serviceId:"",style:t.isIn3DDashboard()?{}:{"background-image":"url("+t.getAssetURL("img/third-parties/"+(e.servicePict||e.serviceId)+".svg")+")"}})]),s=t.isIn3DDashboard()?"Netvibes ":"";return i("div",{className:"widget-intro uwa-font-aa"},[i("div",{className:"widget-vertical-responsive"},[n,e.restrictedAccess?i("div",{className:"nv-ribbon widget-intro-ribbon"},i("span",{className:"nv-ribbon-text widget-intro-ribbon-text"},e.restrictedAccess)):"",i("h2",{className:"widget-intro-title"},[s,i("span",{className:"widget-intro-subtitle"},e.serviceName)]),i("p",{className:"widget-intro-desc"},e.serviceDesc),e.children])])}})}.apply(e,i))||(t.exports=s)},function(t,e,n){"use strict";var i,s;i=[n(0),n(5),n(11)],void 0===(s=function(t,e,n){var i=t.h;return e.extend({render:function(t){return i("div",{className:"widget-intro-body"},i("div",{className:"widget-intro-body-input"},i(n.Button,{className:t.className,attributes:{events:{click:t.onClick?t.onClick:function(){}}},value:t.value||""})))}})}.apply(e,i))||(t.exports=s)},function(t,e,n){"use strict";var i,s;i=[n(18),n(9),n(16),n(22),n(298),n(70)],void 0===(s=function(t,e,n,i,s,o){return e.extend(i,{init:function(t){this.setOptions(t)},shouldProcessFullLibrary:function(){return Boolean(this.options.allLib&&this.options.originalLib)},moveToLibrary:function(t){return this.shouldProcessFullLibrary()?this.processFullLibrary(t,!0):this.addToLibrary(t).done(function(){this.removeFromLibrary(t)}.bind(this))},copyToLibrary:function(t){return this.shouldProcessFullLibrary()?this.processFullLibrary(t,!1):this.addToLibrary(t)},addToLibrary:function(t){var e=new s({libraryId:t});return e.addStreamToLibrary(this.options.streams).fail(function(t){return n.reject(e.getErrorMessage(t))})},removeFromLibrary:function(){var t=this.options.streams.map(function(t){return t.id});return this.options.originalLib.removeStreams({streamIds:t})},processFullLibrary:function(t,e){var i=this.options.originalLib,s=e?i.moveAllStreams:i.copyAllStreams,o={destinationId:t,filters:this.options.filters};return s.call(i,o).fail(function(t){return n.reject(i.getErrorMessage(t))})},createLibrary:function(e){var n={moduleName:"Library",data:{title:t.stripTags(e.title)}},i={tab:e.tabId};return o.add(n,i).then(function(t){return t.getId()})},addStreamToTab:function(t){t.streams.forEach(function(e){var n=e.getModule(),i={moduleName:n.name,title:n.title,data:n.data};o.add(i,{tab:t.tabId,bypassDuplicateCheck:!0})})}})}.apply(e,i))||(t.exports=s)},function(t,e,n){"use strict";var i,s;i=[n(1),n(9),n(20),n(6),n(109),n(121),n(61)],void 0===(s=function(t,e,n,i,s,o,a){var r=e.extend({errorMessages:{streams_per_library_quota_exceeded:_("You can't add more than 5000 sources."),error_adding_streams:_("Error adding streams."),error_removing_streams:_("Error removing streams"),error_editing_stream:_("Error editing stream."),error_moving_streams:_("Error moving streams."),error_copying_streams:_("Error copying streams."),error_importing_streams:_("Error importing OPML."),error_uploading_header:_("Error uploading header."),wrong_token:_("You don't have the permission to see this library."),fallback:_("An error has occurred, please try again later or contact the support")},init:function(t){this._libraryId=t.libraryId,this._token=t.token},launchLibrary:function(t){t=t||{},this._offset=t.offset||0,this._limit=t.limit||50,this.filters=t.filters||this.filters,this.sort=t.sort||this.sort,this.libraryItemCount=t.libraryItemCount,this.streamItemCount=t.streamItemCount;var e={libraryId:this._libraryId,token:this._token,limit:this._limit,offset:this._offset};if(this.filters&&(e.filters=this.filters),this.sort&&(e.sort=this.sort),this.libraryItemCount&&(e.libraryItemCount=this.libraryItemCount),this.streamItemCount&&(e.streamItemCount=this.streamItemCount),!this._data||t.next||t.refresh){var s=i.getLibrary(e);return this._processing=!0,s.then(function(e){return t.next?this._data.streams.push.apply(this._data.streams,e.streams):this._data=e,this._processing=!1,this._data}.bind(this),function(t){return n.reject(new r.ApiError(t))})}return n.resolve(this._data)},getFacets:function(t){t=t||{};var e={libraryId:this._libraryId,token:this._token,facets:1,limit:0};return!this._facets||t.refresh?i.getLibrary(e).then(function(t){return this._facets=t.facets,this._facets}.bind(this),function(t){return n.reject(new r.ApiError(t))}):n.resolve(this._facets)},getLibraryId:function(){return this._libraryId},getLibraryToken:function(){return this._token},getData:function(){return this._data},getStreams:function(){var t=[];return this._data&&this._data.streams&&(t=this._data.streams.map(function(t){return s.factory(t)})),t},hasNextStreams:function(){return this._data.streamCount>this.getStreams().length},getNextStreams:function(){return!this.isProcessing()&&this._data.streamCount>this._offset+this._limit?(this._offset=this._offset+this._limit,this.launchLibrary({offset:this._offset,libraryItemCount:this.libraryItemCount,streamItemCount:this.streamItemCount,next:!0})):n.resolve(this._data)},isProcessing:function(){return this._processing},addStreamToLibrary:function(t){return i.addStreamToLibrary({libraryId:this._libraryId,streams:t}).then(function(){},function(t){return n.reject(new r.ApiError("error_adding_streams",t))})},removeStreams:function(t){return i.removeStreamFromLibrary({libraryId:this._libraryId,streamIds:t.streamIds}).then(function(){this._data.streams=this._data.streams.filter(function(e){return!t.streamIds.includes(e.id)}),this._data.streamCount-=t.streamIds.length}.bind(this),function(t){return n.reject(new r.ApiError("error_removing_streams",t))})},removeAllStreams:function(t){return i.removeAllStreamFromLibrary({libraryId:this._libraryId,filters:t.filters}).then(function(){this._data.streams=[],this._data.streamCount=0}.bind(this),function(t){return n.reject(new r.ApiError("error_removing_streams",t))})},editStream:function(t,e){return e=Object.assign({libraryId:this._libraryId,streamId:t},e),i.editStreamFromLibrary(e).then(function(){this._data.streams=this._data.streams.map(function(n){return n.id===t&&e.title&&(n.title=e.title),n})}.bind(this),function(t){return n.reject(new r.ApiError("error_editing_stream",t))})},moveAllStreams:function(t){t=t||{};var e={sourceId:this._libraryId,destinationId:t.destinationId};return t.filters&&(e.filters=t.filters),i.moveStreamToLibrary(e).then(function(){this._data.streams=[],this._data.streamCount=0}.bind(this),function(t){return n.reject(new r.ApiError("error_moving_streams",t))})},copyAllStreams:function(t){t=t||{};var e={sourceId:this._libraryId,destinationId:t.destinationId};return t.filters&&(e.filters=t.filters),i.copyStreamToLibrary(e).then(function(){},function(t){return n.reject(new r.ApiError("error_copying_streams",t))})},uploadHeader:function(t){var e;return e="object"==typeof t?{uploadedFile:t}:{commit:!0,url:t},i.uploadWidgetHeader(e).fail(function(t){return n.reject(new r.ApiError("error_uploading_header",t))})},getErrorMessage:function(e){var n,i="fallback";t.is(e.message)&&(i=String(e.message)),t.is(e.cause)&&(n=String(e.cause));var s=new o(this.errorMessages,{formater:"string-format"});return s.match(i)+(n?" "+s.match(n,""):"")}});return r.ApiError=a.extend(),r}.apply(e,i))||(t.exports=s)},function(t,e,n){"use strict";var i,s;i=[n(9),n(56),n(232)],void 0===(s=function(t,e,n){return t.extend({init:function(t){this.options=t||{},this.options.currentColor&&this.options.currentColor.match("rgb")&&(this.options.currentColor=e.parse(this.options.currentColor).toHexString()),this.addColorPicker()},addColorPicker:function(){var t,e,i,s,o,a=this,r=this.options,l=n,c=function(t,e){var n;(n=a.content.getElement(".color-selected"))&&a.switchSelection(n,!1),a.switchSelection(t,!0),a.hideColorPicker(),a.options.onSuccess(e)};for(o in this.content=UWA.createElement("div",{class:"color-picker",html:'<span class="color-hover"><span>'}),l)if(l.hasOwnProperty(o)){for(t=UWA.createElement("p",{class:"line-color"}),e=0;e<5;e+=1)i=l[o],s=UWA.createElement("span",{class:"col uwa-icon uwa-icon-only",styles:{backgroundColor:i[e]}}),i[e]===r.currentColor&&this.switchSelection(s,!0),s.addEvent("click",c.bind(this,s,i[e])),s.inject(t);t.inject(this.content)}this.content.inject(r.container).hide()},switchSelection:function(t,e){t.toggleClassName("color-selected",Boolean(e))},showColorPicker:function(){this.content.show()},hideColorPicker:function(){this.content.hide()}})}.apply(e,i))||(t.exports=s)},function(t,e,n){var i,s;i=[n(1),n(13),n(57),n(10),n(24)],void 0===(s=function(t,e,n,i,s){"use strict";var o=i.extend(s,{id:null,api:null,map:null,defaultOptions:{width:320,height:240,className:"uwa-map",googleApiKey:null,api:{zoom:15}},init:function(n){if(this._parent(n),this.id=e.random(1e5),this.apiCallbacks=[],!o.States.apiLoading&&!o.States.apiLoaded){o.States.apiLoading=!0;var i="https://maps.google.com/maps/api/js?callback=UWA.Controls.Map.onApiLoad";this.options.googleApiKey&&(i+="&key="+this.options.googleApiKey),t.createElement("script",{type:"text/javascript",src:i}).inject(document.body)}this.setPeriodical("checkLoad",function(){o.States.apiLoaded&&(this.clearPeriodical("checkLoad"),this.onApiReady())},100),this.buildSkeleton()},buildSkeleton:function(){var e=this.options;this.elements.container=t.createElement("div",{id:"map_canvas"+this.id,class:e.className,styles:{height:e.height,width:e.width},events:{resize:this.dispatchEvent.bind(this,"onResize")}})},callApi:function(t){o.States.apiLoaded?t.call(this,this.api,this.map):this.apiCallbacks.push(t)},setPosition:function(t){this.callApi(function(){this.map.setCenter(new this.api.LatLng(t.coords.latitude,t.coords.longitude))}.bind(this))},setSize:function(t){this.elements.container.setStyles({width:t.width,height:t.height})},addMarker:function(t,e,n){var i=this;this.callApi(function(){var s=i.api,o=i.map,a=new s.InfoWindow({content:n});i.marker=new s.Marker({position:new s.LatLng(t.coords.latitude,t.coords.longitude),map:o,title:e}),s.event.addListener(i.marker,"click",function(){a.open(o,i.marker)})})},onApiReady:function(){var e=this.options,i=this.elements;this.api=google.maps,this.map=new this.api.Map(i.container,t.extend({mapTypeControl:!0,mapTypeControlOptions:{style:google.maps.MapTypeControlStyle.DROPDOWN_MENU},navigationControl:!0,navigationControlOptions:{style:google.maps.NavigationControlStyle.SMALL},mapTypeId:google.maps.MapTypeId.HYBRID},e.api)),this.dispatchEvent("onLoad"),this.apiCallbacks.length&&(n.invoke(this.apiCallbacks,"call",this,this.api,this.map),this.apiCallbacks.length=0)},onLoad:function(){},onResize:function(){this.setDelayed("resize",function(){this.map&&this.api&&this.api.event.trigger(this.map,"resize")},500)}});return o.States={apiLoading:!1,apiLoaded:!1},o.onApiLoad=function(){o.States.apiLoading=!1,o.States.apiLoaded=!0},t.namespace("Controls/Map",o,t)}.apply(e,i))||(t.exports=s)},function(t,e,n){"use strict";var i,s;i=[n(3),n(56),n(10),n(82),n(51),n(4)],void 0===(s=function(t,e,n,i,s,o){return n.extend({name:"nv-chartbar",init:function(t){this._parent(t),this.data=[],this.elements.container=UWA.createElement("ul",{class:this.getClassNames()}),t.data&&(this.data=t.data),this.initMax(this.data),this.buildContent()},initMax:function(t){var e,n,i,s,o,a=0;for(e=0,n=t.length;e<n;e+=1){if(Array.isArray(t[e]))for(i=0,s=t[e].length;i<s;i+=1)a=a<(o=t[e][i].value)?o:a;a=a<(o=t[e].value)?o:a}(!this.options.max||0!==this.options.max&&a>this.options.max)&&(this.options.max=a)},setHighlite:function(t,e,n){var i,o,a,r,l=e?s.brightenColor(n):n,c=this.elements.container.getElements(".item-"+t);if(c)for(i=0,o=c.length;i<o;i+=1)(a=c[i]).getElement(".nv-chartbar-inner").setStyle("background-color",l),a.getElement(".nv-chartbar-colored-value").setStyle("color",l),(r=a.getElement(".nv-chartbar-colored-pin"))&&r.setStyle("color",l)},setNoteHighlite:function(t,e,n){this.elements.container&&this.elements.container.getElements(".note-pin").forEach(function(i){i.getAttribute("data-noteId")===t?i.setStyle("color",e?s.brightenColor(n):i.hasClassName("nv-chartbar-colored-pin")?n:"#FFF"):i.setStyle("opacity",e?.5:1)})},getWidth:function(t,e){return e=e||this.getMaxWidth(),t.value*e/this.options.max},getMaxWidth:function(){return 100},noGroupDisplayed:function(t){return!this.options.compare||!t.filter||"misodata"===t.filter},getGroup:function(t){return this.noGroupDisplayed(t)?"":" ("+(t.authorType||t.grouping)+")"},getImg:function(t,e){var n,i,s=this.options;t.image&&(this.elements.container.addClassName("with-image"),(n=UWA.createElement("img")).src=t.image,(t.grouping||t.originalGroup).test(/(domain|author|twitter)/)?(i=UWA.createElement("a",{href:o.isAbsoluteURL(t.domain||t.key)?t.domain||t.key:"http://"+(t.domain||t.key),target:"_blank",title:_("Open website")}).inject(e),n.inject(i)):n.inject(e),s.imageSize&&(n.width=s.imageSize[0],n.height=s.imageSize[1]))},getBarElement:function(t,e){var n,s,a,r,l,c=void 0!==t.id?t.id:t.itemId?t.itemId.split("_")[0]:0,u=this.options.notes.getById(t.itemId);return t.textValue=o.formatHumanNumber(t.value),s=UWA.createElement("li",{class:"nv-chartbar-bar item-"+c}),e||this.getImg(t,s),a=UWA.createElement("div",{class:"nv-chartbar-inner",styles:{width:this.getWidth(t)+"%"}}).inject(s),r=UWA.createElement("span",{class:"nv-chartbar-value nv-chartbar-colored-value",text:t.textValue}).inject(s),l=this._makeInnerValueContainer(t,t.value).inject(a),u&&(this.elements.container.addClassName("with-notes"),this.getNoteElm(u,t,!0).inject(s),this.getNoteElm(u,t,!1).inject(l)),t.color&&(a.setStyle("background-color",t.color),r.setStyle("color",t.color)),t.key&&!e&&(n="&nbsp;"+(t.label||t.key),n+=this.getGroup(t),UWA.createElement("h4",{html:n,class:this.getWidth(t)>80?"text-ellipsis":""}).inject(a),UWA.createElement("h4",{html:n,styles:{width:this.getMaxWidth()+"%"}}).inject(s,"top")),this.options.toolTip&&this.options.toolTip.formatter&&new i(s,this.options.toolTip.formatter(t),{width:this.options.toolTip.width,fx:!1,className:"chart-tooltip",root:this.elements.container}),this.attachEvents(s,t),s},getNoteElm:function(t,e,n){return UWA.createElement("span",{class:"uwa-icon note-pin"+(n?" nv-chartbar-colored-pin":""),"data-icon":"~","data-noteId":t.id,styles:{color:n?e.color:""}})},attachEvents:function(n,i){var o=this,a=n.hasClassName("nv-chartbar-bar")?n.getElement(".nv-chartbar-inner"):n,r=this.elements.container.getElement(".chart-tooltip.uwa-tooltip");n.addEvent("mouseover",function(i){var l,c=n.getElement(".nv-chartbar-colored-value"),u=n.getElement(".nv-chartbar-colored-pin"),h=e.parse(a.getStyle("background-color")),d=s.brightenColor(h.toHexString());a.setStyle("background-color",d),c&&c.setStyle("color",d),u&&(l=u.getAttribute("data-noteId"),u.setStyle("color",d),o.dispatchEvent("mouseOverPin",[l,!0])),"img"===t.getElement(i).tagName.toLowerCase()&&r&&r.hide()}),n.addEvent("mouseout",function(){var t,e=n.getElement(".nv-chartbar-colored-value"),s=n.getElement(".nv-chartbar-colored-pin");e&&e.setStyle("color",i.color),s&&(t=s.getAttribute("data-noteId"),s.setStyle("color",i.color),o.dispatchEvent("mouseOverPin",[t,!1])),a.setStyle("background-color",i.color)}),n.addEvent("click",function(e){"img"!==t.getElement(e).tagName.toLowerCase()&&o.dispatchEvent("onPointClick",[i]),r&&r.hide()})},buildContent:function(){var t,e,n,i,s,o,a=this.getData();for(t=0,e=a.length;t<e;t+=1)if(Array.isArray(a[t]))for(o=UWA.createElement("h3",{html:(a[t][0].label||a[t][0].key)+this.getGroup(a[t][0])}).inject(this.elements.container),this.getImg(a[t][0],o),i=0,s=a[t].length;i<s;i+=1)(n=this.getBarElement(a[t][i],!0)).inject(this.elements.container),i===s-1&&n.addClassName("group-bar");else(n=this.getBarElement(a[t])).inject(this.elements.container)},getData:function(){return this.data},_makeInnerValueContainer:function(t,e,n){var i=UWA.createElement("div",{class:"nv-chartbar-inner-value-container",styles:{width:100/parseFloat(this.getWidth(t,n))*100+"%"}});return UWA.createElement("span",{class:"nv-chartbar-value",text:o.formatHumanNumber(e)}).inject(i),i}})}.apply(e,i))||(t.exports=s)},function(t,e,n){"use strict";var i,s;i=[n(1),n(9),n(16),n(0),n(387),n(84),n(199),n(174),n(185),n(119),n(80),n(227),n(939),n(940),n(1081),n(1082),n(1083),n(1090),n(1110),n(1113),n(70),n(17)],void 0===(s=function(t,e,n,i,s,o,a,r,l,c,u,h,d,p,m,f,g,v,b,y,w,x){var C=i.h;function S(t){var e,n;switch(t.step){case"index":n=[],e=C(d,t.stepProps);break;case"ingredient":n=[t.stepProps.source.getType()],e=C(p,t.stepProps);break;case"selectedIngredients":e=C(g,t.stepProps);break;case"editIngredient":n=[t.stepProps.source.getType()],e=C(f.default,t.stepProps);break;case"pivot":e=C(b,t.stepProps);break;default:throw new Error("Unknown step "+t.step)}return C(s,{class:"nv-analyze-inner",transitionKey:t.preview||t.step},C("div",{class:"nv-analyze-body"},n&&C(y,{ingredients:n}),C("div",{class:"nv-analyze-steps",style:{display:t.preview?"none":""}},e),t.preview&&C(v,t.preview)))}function E(t){var e=t.stepProps.source&&!t.stepProps.source.getId()&&"ingredient"===t.step&&!t.hideDuplicateIngredient&&x.getAll().some(function(e){return e.getSources().some(function(e){return e.getType()===t.stepProps.source.getType()})});return C("div",{style:{display:"flex",justifyContent:"space-between"}},C("span",{class:"nv-analyze-wizard-title"},_("Analytics")),e&&C(m,t.stepProps))}return e.singleton({elements:{},init:function(){this._modalTitle=t.createElement("div"),this.modal=new o({className:"nv-analyze wizard",fullscreenable:!0,title:this._modalTitle,fullScreenIcon:"C",size:{width:"full",height:"full"}}),this._events={onDisplayStep:this.onDisplayStep.bind(this),onPreviousStep:this.onPreviousStep.bind(this),onSelectIngredient:this.onSelectIngredient.bind(this),onDeleteSource:this.onDeleteSource.bind(this),onPopulateSource:this.onPopulateSource.bind(this),onReplaceSource:this.onReplaceSource.bind(this),onGeneralSettingsChanges:this.onGeneralSettingsChanges.bind(this),onLayoutRootNodeChanges:this.onLayoutRootNodeChanges.bind(this),onDisplayPreview:this.onDisplayPreview.bind(this),onClosePreview:this.onClosePreview.bind(this),onCloseRequest:this.onCloseRequest.bind(this),onShowLayout:this.onShowLayout.bind(this),onSourceListChange:this.onSourceListChange.bind(this),onHideDuplicateIngredient:this.onHideDuplicateIngredient.bind(this)},this.modal.addEvent("onClose",this.onClose,this,-10),document.body.addContent(this.modal)},open:function(){this._sourceList=new a,this.modal.open(),this._props={step:"index",stepProps:{}},this._generalSettings={title:_("My comparison charts")},this._layoutRootNode=new u.EmptyNode(null),this._renderView()},openEditSource:function(t){return this._sourceList=new a(t.sources),this._generalSettings=Object.assign({},t.settings),this._moduleId=t.moduleId,this._addModuleOptions=t.addModuleOptions,this._layoutRootNode=u.fromJSONSafe(this._generalSettings.layout,this._sourceList.getSourceFacets()),this.modal.open(),this._props={title:_("Edit")},t.facet?this.onDisplayStep("editIngredient",{source:this._sourceList.asArray().detect(function(e){return e.getId()===t.facet.getSource().getId()}),currentFacet:t.facet}):t.source?this.onDisplayStep("ingredient",{source:t.source}):this.onDisplayStep("selectedIngredients"),new n(function(t){this.modal.addEventOnce("onClose",function(){t({settings:this._saveSource?this._generalSettings:null})}.bind(this))}.bind(this))},openPivot:function(t){return this._sourceList=new a([t.source]),this._layoutRootNode=new u.EmptyNode(null),this.modal.open(),this._props={title:_("Drill down"),step:"index",stepProps:{}},this._generalSettings={},this.onDisplayStep("pivot",{source:t.source,facet:t.facet}),new n(function(t){this.modal.addEventOnce("onClose",t)}.bind(this))},_renderView:function(t){Object.assign(this._props,"function"==typeof t?t(this._props):t),Object.assign(this._props.stepProps,{events:this._events,sourceList:this._sourceList,layoutRootNode:this._layoutRootNode,generalSettings:this._generalSettings,moduleId:this._moduleId,hasPreviousStep:Boolean(this._previousStep)}),i.render(i.h(E,this._props),null,this._modalTitle),i.render(i.h(S,this._props),this.modal.getContainer(),this.modal.getContainer().firstChild)},_renderViewLoading:function(t){this._renderView(function(e){return{stepProps:Object.assign({},e.stepProps,{loading:t})}})},_createModule:function(t){(this._renderViewLoading(!0),t)||(t={moduleName:"Analyze",data:Object.assign({sources:JSON.stringify(this._sourceList.toJson())},this._generalSettings)});return w.add(t,this._addModuleOptions).fin(function(){this._renderViewLoading(!1)}.bind(this))},_submitLayout:function(t){this._layoutRootNode=h.validLayout(t||this._layoutRootNode,this._sourceList.getSourceFacets()),this._generalSettings.layout=JSON.stringify(this._layoutRootNode.toJSON())},_submitSources:function(t){this._sourceList=t,this._generalSettings.sources=JSON.stringify(this._sourceList.toJson()),this._submitLayout()},onDisplayStep:function(t,e){this._previousStep=this._props.step&&{penultimate:this._previousStep,props:{step:this._props.step,stepProps:this._props.stepProps}},this._renderView({step:t,stepProps:e||{},hideDuplicateIngredient:!1})},onPreviousStep:function(){if(!this._previousStep)return!1;var t=this._previousStep;return this._previousStep=t.penultimate,this._renderView(t.props),!0},onDisplayPreview:function(){var t={moduleId:this._moduleId,generalSettings:this._generalSettings,sourceList:new a(this._sourceList.asArray()),events:this._events};this._renderView({preview:t})},onClosePreview:function(){this._renderView({preview:!1})},onDeleteSource:function(t){this._submitSources(new a(this._sourceList.asArray().filter(function(e){return t!==e})))},onSelectIngredient:function(t){var e=this._sourceList.asArray(),n=e[e.length-1],i={type:t};n&&(i.from=n.getFrom(),i.to=n.getTo(),i.range=n.getRange()),this.onDisplayStep("ingredient",{source:r.factory(i)})},onPopulateSource:function(t){var e=this._props.stepProps.source.cloneWith(t);return this._renderViewLoading(!0),(!e.getId()?c.cloneSource:c.updateSource)(e).fin(function(){this._renderViewLoading(!1)}.bind(this)).then(function(t){return this._replaceCurrentSource(t),t}.bind(this),function(t){throw console.error("Error while populating the source: "+t.message),t})},onReplaceSource:function(t){this._replaceCurrentSource(t)},_replaceCurrentSource:function(t){var e=this._props.stepProps.source,n=this._sourceList.asArray();n.includes(e)?this._submitSources(new a(this.setFacetsColors(n.map(function(n){return n===e?t:n})))):this._submitSources(new a(this.setFacetsColors(n.concat([t])))),this._renderView(function(e){return Object.assign({},e,{stepProps:Object.assign({},e.stepProps,{source:t})})})},onGeneralSettingsChanges:function(t){this._generalSettings=t},onSourceListChange:function(t){this._submitSources(t),this._renderView()},onShowLayout:function(t){this._renderView({stepProps:{showLayout:t}})},onLayoutRootNodeChanges:function(t){this._submitLayout(t),this._renderView()},onCloseRequest:function(t){this._moduleId?(this._saveSource=!0,this.modal.close()):this._createModule(t).done(function(){this.modal.close()}.bind(this))},onHideDuplicateIngredient:function(t){this._renderView({hideDuplicateIngredient:t})},colorGenerator:function(t){var e=t.slice(),n=0;return{next:function(){var t;do{t=l.getColor(n),n+=1}while(t&&e.includes(t));return t}}},setFacetsColors:function(t){var e=[],n=!1;if(t.forEach(function(t){t.getFacets().forEach(function(t){t.getColor()?e.push(t.getColor()):n=!0})}),!n)return t;var i=this.colorGenerator(e);return t.map(function(t){var e=!1,n=t.getFacets().map(function(t){return t.getColor()?t:(e=!0,t.cloneWith({color:i.next()}))});return e?t.cloneWith({facets:n}):t})},onClose:function(){i.render(void 0,this.modal.getContainer(),this.modal.getContainer().firstChild),this._saveSource=!1,this._sourceList=null,this._generalSettings=null,this._moduleId=null,this._addModuleOptions={}}})}.apply(e,i))||(t.exports=s)},function(t,e,n){"use strict";var i,s;i=[n(942),n(945),n(1067)],void 0===(s=function(t,e,n){return t.extend({name:"nv-schemaform",options:{inputs:e,validators:n}})}.apply(e,i))||(t.exports=s)},function(t,e,n){"use strict";var i,s;i=[n(2),n(1111),n(159),n(279),n(284),n(423),n(11)],void 0===(s=function(t,e,n,i,s,o,a){var r={condensed:{short:{size:150,items:10},medium:{size:250,items:15},tall:{size:400,items:25},full:{items:42}},list:{short:{size:250,items:8},medium:{size:400,items:13},tall:{size:700,items:20},full:{items:20}},normal:{short:{size:250,items:4},medium:{size:400,items:7},tall:{size:700,items:10},full:{items:10}},mosaic:{short:{size:250,items:8},medium:{size:400,items:16},tall:{size:700,items:20},full:{items:10}}};function l(t){return t=(t||"").toLowerCase(),["condensed","list","normal","mosaic"].includes(t)?t:"list"}function c(e,n){return r[l(e)][function(e){return t.isIn3DDashboard()?"full":(e=(e||"").toLowerCase(),["short","medium","tall"].includes(e)?e:"short")}(n)]||!1}function u(t,a){var r,c=(a=function(t){if(t||(t={}),!t.itemList)throw new Error("No itemList option");t.view=l(t.view),t.isFilteringItems||(t.isFilteringItems=function(){return!1}),t.getFilteredItems||(t.getFilteredItems=function(){return t.itemList.getItems()}),t.getViewSize||(t.getViewSize=function(){}),t.openOutside||(t.openOutside=!1);var e=t.itemList.getProducers()[0];return e&&(t.title||(t.title=e.getTitle()),t.icon||(t.icon=e.getFaviconURL())),t}(a)).itemList,u={className:"white-shadows",showGroups:!1,noItemMessage:_("There are no news in this feed."),itemOptions:{widgetId:a.moduleId,openOutside:a.openOutside,displayInnerItem:!1,displayActions:!1,globalAudioPlayer:!1,buildImage:"normal"===a.view},loadMore:function(t){if(!a.isFilteringItems()&&c.hasMore()&&c.getProducers().length)return c.loadMore(t)},events:{onSetMessage:function(t){var e=a.getViewSize();e&&t.setStyle("height",e-10)}}};t?("mosaic"===a.view?r=new s(u):(r="condensed"===a.view?new o(u):new i(u)).setLoadThreshold(20),r.addEvent("onItemRendererToggleContent",function(t,e){e&&n.open(Object.assign({},a,{item:t.getItem(),onClose:function(){t.setFocus(!1)}}))})):r=new e({view:a.view,asideItemListOptions:u,displayedItemOptions:{widgetId:a.moduleId}});var h={onNewItems:function(t){r.addItems(t,!0)},onMoreItems:function(t){r.addItems(t,!1)}};return r.addEvents({onInjected:function(){c.addEvents(h)},onRemoved:function(){c.removeEvents(h)}}),r.addItems(a.getFilteredItems()),a.itemList.addEvents(h),r}function h(t){return u(!0,t)}var d=a.Abstract.extend({_buildControl:function(t){return h(t)}});return{createReader:function(t){return u(!1,t)},createList:h,getBestView:function(t){var e=t.getItems(),n=e.reduce(function(t,e){return t+(e.getEnclosuresByType("image").some(function(t){return t.width&&t.height&&t.width>=140&&t.height>=140})?1:0)},0),i=e.reduce(function(t,e){return t+(e.getContent().length>300?1:0)},0)/e.length>.8,s=n/e.length>.8;return i?"normal":s?"mosaic":"list"},getItemCountGoal:function(t,e){return c(t,e).items},getViewSize:function(t,e){return c(t,e).size},PreactComponent:d}}.apply(e,i))||(t.exports=s)},function(t,e,n){"use strict";var i,s;i=[n(1),n(26),n(3),n(19),n(10),n(4),n(52)],void 0===(s=function(t,e,n,i,s,o,a){var r=t.createElement,l=s.extend({onChangeStep:"onChangeStep",onCloseGob:"onCloseGob",defaultOptions:{steps:[]},elements:{},steps:[],currentStepNumber:null,currentlyHighlights:[],isPagination:!0,init:function(t){this._parent(t),this.steps=[],a.addShortcuts({gob:{esc:function(){this.close(!0)}.bind(this)}}),a.pushFocus("gob"),this.buildGob()},toElement:function(){return this.elements.container},changeStep:function(e){e=e||0;var n=this.currentStepNumber;if(this.currentStepNumber=e,t.is(n,"number")&&this.steps[n].removeClassName("displayed"),this.steps[e].addClassName("displayed"),this.buildOverlay(e),this.isPagination&&!this.options.hideCoaching){var i=0!==e,s=e!==this.steps.length-1;this.elements.prevStep.toggleClassName("enabled",i),this.elements.nextStep.toggleClassName("enabled",s);var o=this.elements.steps.getSize().height-this.elements.pagination.getSize().height;this.elements.steps.setStyle("height",o),this.dispatchEvent(this.onChangeStep,{step:e})}},close:function(t,n){a.popFocus("gob"),this.currentlyHighlights.length>0&&(this.currentlyHighlights.invoke("removeClassName","nv-gob-highlight"),this.currentlyHighlights.invoke("removeEvent","click",this.close.bind(this)));var i=t?0:300;this.elements.container&&new e(this.elements.container,{duration:i,transition:"linear",events:{onComplete:function(){this.elements.container.remove(!0),n||(this.dispatchEvent(this.onCloseGob),document.body.removeClassName("nv-gob-open"))}.bind(this)}}).start({opacity:0})},destroy:function(){this.close(!0),this._parent()},buildGob:function(){document.body.addClassName("nv-gob-open"),this.elements.container=r("div",{class:"nv-gob uwa-font-aa"}),window.setTimeout(function(){this.elements.container.addClassName("show")}.bind(this),0),this.elements.container.addEvent("resize",o.debounce(this.onResizeEvent,10,this))},buildOverlay:function(t){var e=this.options.steps[t];this.elements.overlay.empty(),"canvas"===e.highlightMode?(this.elements.overlay.setContent(this.buildCanvasOverlay(e.highlights)),this.elements.overlay.setStyle("background","")):(this.elements.overlay.setStyle("background",this.options.overlayColor||"rgba(68, 68, 68, 0.8)"),this.hightlight(t))},buildCanvasOverlay:function(t){var e=this.elements.container.getParent();if(e){var n,i,s,o,a,l=window.innerWidth-e.getOffsets().x,c=window.innerHeight-e.getOffsets().y,u=r("canvas",{width:l,height:c}),h=u.getContext("2d");return h.beginPath(),h.rect(0,0,l,c),h.fillStyle=this.options.overlayColor||"rgba(68, 68, 68, 0.8)",h.fill(),(t=[].concat.apply([],t)).forEach(function(t){n=t.getDimensions(),i=t.getPosition(e).x+n.outerWidth-n.innerWidth,s=t.getPosition(e).y+n.outerHeight-n.innerHeight,o=n.innerWidth,a=n.innerHeight,h.beginPath(),h.clearRect(i,s,o,a),h.fillStyle="rgba(255, 0, 0, 0)",h.fill()}),u}},buildSteps:function(){var t=this.options.steps;if(!t)throw new Error("you must register at least one step to use the Gob wizard");var e=t.map(this.buildStep.bind(this));this.elements.steps&&this.elements.steps.empty(!0),this.elements.steps.addContent(e)},buildPagination:function(){if(this.options.hideCoaching)return this.elements.container.addEvent("click",this.onCloseClick.bind(this)),void this.elements.pagination.hide();this.isPagination=this.steps.length>1,this.elements.pagination.empty(!0);var t=[];this.isPagination&&(t=[this.elements.prevStep=r("div",{class:"nv-gob-pagination-prev nv-gob-pagination-btn","data-action":"prev"}).addContent(r("span",{class:"uwa-icon","data-icon":"L"}),_("Prev")),this.elements.nextStep=r("div",{class:"nv-gob-pagination-next nv-gob-pagination-btn","data-action":"next"}).addContent(_("Next"),r("span",{class:"uwa-icon","data-icon":"M"}))]),this.elements.pagination.addContent(r("div",{class:"nv-gob-pagination-wrapper"}).addContent(t,this.elements.skipCoaching=r("div",{class:"nv-gob-pagination-skip nv-gob-pagination-btn enabled","data-action":"skip",text:_("Close coaching")}))),this.elements.pagination.addEvent("click",this.onPaginationClick.bind(this))},buildStep:function(t,e){var n=t.actions;if(!n)throw new Error("you must register at least one action per step to use the Gob wizard");var i=n.map(this.buildAction.bind(this,e)),s=r("div",{class:"nv-gob-step"}).addContent(i);return this.steps[e]=s,s},buildAction:function(t,e,n){var s=t+"_"+n,o=r("div",{class:"nv-gob-action "+(e.className||"")}),a=e.arrow,l=e.anchor,c=e.number?r("div",{class:"nv-gob-action-text-number",text:e.number}):e.icon?r("div",{class:"nv-gob-action-text-icon uwa-icon","data-icon":e.icon}):"";if(!l)throw new Error("you must register an anchor for your action to stick to");var u=r("div",{class:"nv-gob-action-text"});(o.addContent(u.addContent(c,r("div",{class:"nv-gob-action-text-title"}).addContent(e.title),r("div",{class:"nv-gob-action-text-content"}).addContent(e.content))),a)&&this.buildArrow(s,a,e.isTop).inject(o,e.isTop?"bottom":"top");u.setStyles({margin:e.textMargin||"30px 0 0 0",padding:e.textPadding||""});var h=e.width||230,d=e.margin||"0",p=parseInt(l.getOffsets().y+l.getSize().height,10),m=i.getSize().height-l.getOffsets().y,f=parseInt(l.getOffsets().x+l.getSize().width/2-h/2,10);return o.setStyles({width:h,margin:d}),this.options.relativePosition||(o.setStyles({left:f}),e.isTop?o.setStyle("bottom",m):o.setStyle("top",p)),o},buildArrow:function(t,e,n){var i=e.height?parseInt(e.height,10):100,s='stroke="'+(e.color||"#7EAE00")+'"',o=e.rotate||0,a="right"===e.side?"right":"left";n&&(o+=160,a="right"===a?"left":"right");var l=i+10,c=2*i/100,u='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 30 '+l+'" ';return u+='width="30" height="'+l+'">',u+="<defs>",u+='<marker id="nv-gob-arrow-head-'+t+'" class="nv-gob-arrow-head" orient="auto" markerWidth="10" markerHeight="10" refX="5" refY="5" '+s+' stroke-width="1">',u+='<path d="M2.4,2.8 L5,5 L2.4,7.3" />',u+="</marker>",u+="</defs>",u+='<path class="nv-gob-arrow-path" marker-end="url(#nv-gob-arrow-head-'+t+')" '+s+" ",u+='d="M'+("left"===a?8:22)+","+i+" C"+(c="left"===a?-c:30+c)+","+65*i/100+" "+("left"===a?12:18)+","+20*i/100+' 15,10" />',u+="</svg>",r("div",{class:"nv-gob-arrow",styles:{transform:o="rotate("+o+"deg)",margin:e.margin||""}}).setHTML(u)},hightlight:function(t){var e=this.options.steps[t].highlights;this.currentlyHighlights.length>0&&(this.currentlyHighlights.invoke("removeClassName","nv-gob-highlight"),this.currentlyHighlights.invoke("removeEvent","click",this.close.bind(this))),e?((e=[].concat.apply([],e)).invoke("addClassName","nv-gob-highlight"),e.invoke("addEvent","click",this.close.bind(this))):e=[],this.currentlyHighlights=e},onPaginationClick:function(t){var e=n.findElement(t,".nv-gob-pagination-btn");if(e){var i=e.getAttribute("data-action"),s=e.hasClassName("enabled"),o=this.currentStepNumber||0;i&&s&&("prev"===i&&this.changeStep(o-1),"next"===i&&this.changeStep(o+1),"skip"===i&&this.close())}},onCloseClick:function(t){n.findElement(t,".nv-gob")&&this.close()},onResizeEvent:function(){this.elements.container.empty(!0),this.elements.container.addContent(this.elements.overlay=r("div",{class:"nv-gob-overlay"}),this.elements.pagination=r("div",{class:"nv-gob-pagination"}),this.elements.steps=r("div",{class:"nv-gob-steps"})),this.buildSteps(),this.buildPagination(),this.changeStep(this.currentStepNumber)}});return App.Components=App.Components||{},App.Components.Gob=l,l}.apply(e,i))||(t.exports=s)},function(t,e,n){var i,s;i=[n(1),n(13),n(10)],void 0===(s=function(t,e,n){"use strict";var i=n.extend({id:null,defaultOptions:{url:"",width:320,height:240,className:"uwa-swf",pluginspage:"http://www.macromedia.com/go/getflashplayer",flashVars:"",scale:"exactfit",wmode:"opaque",quality:"hight",allowScriptAccess:"sameDomain",bgcolor:!1,allowfullscreen:"true"},flashVersion:null,init:function(t){this._parent(t),t=this.options,this.id=t.id||e.random(10),this.flashVersion=this.detectFlashVersion(),this.buildSkeleton()},buildSkeleton:function(){function n(t){return String(t).replace(/(&amp;)|(&)/g,"%26")}var i,s,o,a=window.navigator,r=this.elements,l=this.options,c=l.flashVars||"",u=n(l.url||"");if(this.container=r.container=t.createElement("div",{class:l.className}),t.is(c,"string")||(c=n(e.toQueryString(c))),a.plugins&&a.mimeTypes&&a.mimeTypes.length)r.flashTag=t.createElement("embed",{id:this.id,type:"application/x-shockwave-flash",src:u,width:l.width,height:l.height,pluginspage:l.pluginspage,flashvars:c,scale:l.scale,quality:l.quality,allowScriptAccess:l.allowScriptAccess,wmode:l.wmode,allowfullscreen:l.allowfullscreen});else{for(s in o=[],i={movie:u,flashvars:c,quality:l.quality,allowScriptAccess:l.allowScriptAccess,wmode:l.wmode,allowfullscreen:l.allowfullscreen})i.hasOwnProperty(s)&&o.push({tag:"param",name:s,value:i[s]});r.flashTag=t.createElement("object",{id:this.id,width:l.width,height:l.height,classid:"clsid:D27CDB6E-AE6D-11cf-96B8-444553540000",html:o})}return r.flashTag.inject(r.container),this.object=r.flashTag,0===this.flashVersion.major&&t.createElement("p",{text:t.i18n("You need Adobe Flash to display this Content."),styles:{textAlign:"center"}}).inject(r.container),this.container},getFlashContainer:function(){return void 0===this.object&&this.getContent(),this.object},getFlashVersion:function(){return this.flashVersion},detectFlashVersion:function(){var t,e,n,i=[0,0,0];if(navigator.plugins&&navigator.mimeTypes.length)(n=navigator.plugins["Shockwave Flash"])&&n.description&&(i=n.description.replace(/([a-zA-Z]|\s)+/,"").replace(/(\s+r|\s+b[0-9]+)/,".").split("."));else if(navigator.userAgent&&navigator.userAgent.indexOf("Windows CE")>=0)for(t=1,e=3;t;)try{e++,t=new ActiveXObject("ShockwaveFlash.ShockwaveFlash."+e),i=[e,0,0]}catch(e){t=null}else{try{t=new ActiveXObject("ShockwaveFlash.ShockwaveFlash.7")}catch(e){try{t=new ActiveXObject("ShockwaveFlash.ShockwaveFlash.6"),i=[6,0,21],t.AllowScriptAccess="always"}catch(t){if(6===i.major)return i}try{t=new ActiveXObject("ShockwaveFlash.ShockwaveFlash")}catch(e){t=null}}null!==t&&(i=t.GetVariable("$version").split(" ")[1].split(","))}return{major:i[0],minor:i[1],rev:i[2]}}});return t.namespace("Controls/Flash",i,t)}.apply(e,i))||(t.exports=s)},function(t,e,n){"use strict";var i,s;i=[n(1),n(3),n(2),n(153),n(234),n(44),n(283),n(281)],void 0===(s=function(t,e,n,i,s,o,a,r){return i.extend({name:"nv-line-item-renderer",options:{displayInnerItem:!0},render:function(){this.elements.content=t.createElement("div",{class:"item-content"});var e=this.getItem(),n=e.getFaviconURL(!1);return!1===this.options.displayActions&&(this.elements.flags=t.createElement("span",{class:"item-flags"})),[{tag:"a",target:"_blank",href:e.getLink(),class:"item-header","uwa-tooltip":this._getDescriptionToolTipContent(),"uwa-tooltip-delay":1500,"uwa-tooltip-quick":!0,html:[{tag:"span",class:"item-enclosure-action uwa-icon","data-icon":"M"},this.options.buildImage?this.buildImage():"",this.options.buildImage?"":{tag:"span",class:"item-feedinfo",html:[n&&{tag:"img",class:"item-feedinfo-favicon",src:n},e.getSourceOrStreamTitle()&&{tag:"span",class:"item-feedinfo-name",html:e.getSourceOrStreamTitle().sanitizeHTML()}]},{tag:"span",class:"item-preview-wrapper",html:[{tag:"span",class:"item-title",html:e.getTitle().sanitizeHTML()},this.options.buildImage?this.buildDateElement():"",e.getContent()&&{tag:"span",class:"item-preview",html:this.options.buildImage?e.getContent().sanitizeHTML():" — "+e.getContent().sanitizeHTML()}]},{tag:"span",class:"item-flags-and-time",html:[this.elements.flags,this.options.buildImage?"":this.buildDateElement()]}]},this.options.buildImage?"":this.getActions(),this.options.buildImage?"":this.elements.content]},buildFlags:function(){var t=this.elements.flags;if(t){var e=[],i=this.getItem();return i.hasFlag("saved")&&e.push({tag:"span",class:"uwa-icon "+"star","data-icon":"8"}),n.isAllowed("tag")&&(i.hasTags()?e.push(s("tags","bookmark")):i.hasSuggestedTags()&&e.push(s("suggested","bookmark_outline"))),t.setContent(e),this.elements.container.toggleClassName("item-flags-shown",Boolean(e.length)),this.elements.container.set("data-flags-count",e.length),t}function s(t,e){return new r({className:t,icon:e})}},buildImage:function(){var e=t.createElement("div",{class:"item-feedinfo-image"});return s.getThumbnail(this.getItem(),140,100,{fallbackToLargest:!0}).then(function(t){t.link&&e.setStyle("background-image","url("+JSON.stringify(t.link)+")")}).fail(function(t){"no valid candidat"===t.message&&(this.elements.container.addClassName("no-image"),e.destroy())}.bind(this)),e},buildDateElement:function(){var e=t.createElement("span",{class:"item-time"}),n=this.getItem().getPublishDate();return this.options.buildImage?e.setText(o.formatLocalizedDate(n,"date")+" ● "+o.formatLocalizedDate(n,"time")):o.bindRelativeTime(e,n,"abbr"),e},toggleContent:function(t){var n=this.elements.content,i=this.elements.actions,s=n&&n.childNodes.length>0;return void 0===t&&(t=!s),t=!!t,this.elements.container.toggleClassName("open",!!this.options.forceExpand||t),this.options.displayInnerItem?this.options.forceExpand&&!t||t===s||(t?(n.addContent(this.getInnerItemRenderer()),this.options.forceExpand||i.getElement(".item-actions").addContent({tag:"div",class:"nv-item-renderer-close-feed",text:"p"})):(n.empty(),i.getElements(".nv-item-renderer-close-feed").invoke("destroy"),this.scrollTo())):this.dispatchEvent("onToggleContent",[t]),e.dispatchEvent(this.elements.container,"scroll"),t},initDOM:function(){var t=this.options.showSource,e=!!this.getItem().getSourceTitle();this.elements.container.toggleClassName("no-tagging",!n.isAllowed("tag")).toggleClassName("in-expanded-view",!!this.options.forceExpand).toggleClassName("has-source",Boolean(t)&&e).toggleClassName("has-audio-enclosures",this.getItem().getEnclosuresByType("audio").length>0).toggleClassName("build-image",!!this.options.buildImage).toggleClassName("display-inner-item",!!this.options.displayInnerItem),this.options.forceExpand&&this.toggleContent(!0),this.updateDOM()},updateDOM:function(){this._parent(),this.buildFlags()},onClick:function(t){this._parent(t);var i=e.whichButton(t)<=0,s=!!e.whichKey(t),o=!!e.findElement(t,".item-actions *"),a=this.options.openOutside||!i||s||!n.isAllowed("feed_reader")&&!o;a?this.toggleReadFlag(!0):e.stop(t),o&&e.getElement(t).match(".nv-item-renderer-close-feed")&&this.setFocus(!1),o||a||(this.setFocus(!this.hasFocus()),this.scrollTo({smooth:!0}))},onPostInject:function(){this.initDOM()},onFocusChange:function(t){a.getRenderer()&&a.close(),n.isAllowed("feed_reader")&&(this.getContainer().toggleClassName("focus",t),t?(this.toggleReadFlag(!0),this.toggleContent(!0)):this.toggleContent(!1),this._parent(t))},onMainChange:function(t){this.getContainer().toggleClassName("main",t),t&&this.options.forceExpand&&this.setFocus()},getInnerItemRenderer:function(){if(this.options.displayInnerItem){var t=this.elements.innerItemRenderer;if(!t){var e=Object.assign({},this.options);e.displayActions=!1,(t=this.elements.innerItemRenderer=i.factory(this.getItem(),e)).addEvent("onItemChange",function(t){this.dispatchEvent("onItemChange",t),"destroy"===t.name&&this.destroy()}.bind(this)),this.options.forceExpand&&t.addEvent("onClick",this.setFocus.bind(this,!0))}return t}},toggleOpinionEditor:function(){this.options.displayInnerItem&&(this.hasFocus()?this.getInnerItemRenderer().toggleOpinionEditor():(this.setFocus(!0),this.getInnerItemRenderer().openOpinionEditor()))},changeContentType:function(t){this.options.displayInnerItem&&this.getInnerItemRenderer().changeContentType(t)},toggleWebsiteView:function(t){this.options.displayInnerItem&&this.getInnerItemRenderer().toggleWebsiteView(t)}})}.apply(e,i))||(t.exports=s)},function(t,e,n){"use strict";var i,s;i=[n(10),n(300),n(13),n(2),n(4),n(51),n(400)],void 0===(s=function(t,e,n,i,s,o,a){return t.extend({name:"nv-map",styles:[{brightness:-.1,size:35,anchor:[18,0],textSize:11,xPosition:26},{brightness:-.2,size:45,anchor:[22,0],textSize:12,xPosition:21},{brightness:-.4,size:55,anchor:[28,0],textSize:13,xPosition:15},{brightness:-.6,size:65,anchor:[32,0],textSize:13,xPosition:8}],init:function(t){this._parent(t),this.data=UWA.clone(this.options.data),this.markerClusters=[],this.elements.container=UWA.createElement("div",{class:this.getClassNames()}),this.build()},build:function(){var t=i.Config.api_keys,n=t.googlecloud&&t.googlecloud.key?t.googlecloud.key:null;this.map=new e({api:{zoom:Number(this.options.mapZoom)||1,mapTypeId:"roadmap",streetViewControl:!1,mapTypeControl:!1},googleApiKey:n,height:"350",width:"100%"}),this.map.inject(this.elements.container),this.addEvents()},setMapStyle:function(){this.map.map.setOptions({styles:[{featureType:"administrative",elementType:"all",stylers:[{visibility:"simplified"}]},{featureType:"administrative",elementType:"geometry.fill",stylers:[{visibility:"off"}]},{featureType:"administrative.country",elementType:"geometry.stroke",stylers:[{visibility:"on"},{color:"#eeeeee"}]},{featureType:"landscape",elementType:"geometry",stylers:[{visibility:"simplified"},{color:"#fcfcfc"}]},{featureType:"poi",elementType:"geometry",stylers:[{visibility:"simplified"},{color:"#fcfcfc"}]},{featureType:"road.highway",elementType:"geometry",stylers:[{visibility:"simplified"},{color:"#dddddd"}]},{featureType:"road.arterial",elementType:"geometry",stylers:[{visibility:"simplified"},{color:"#dddddd"}]},{featureType:"road.local",elementType:"geometry",stylers:[{visibility:"simplified"},{color:"#eeeeee"}]},{featureType:"water",elementType:"geometry",stylers:[{visibility:"simplified"},{color:"#dddddd"}]}]})},buildMarkers:function(){this.data.forEach(function(t){var e=[],n=UWA.clone(this.styles).map(function(e){return this.getMarkerStyle(UWA.merge(e,{color:t.color}))}.bind(this));t.stats.forEach(function(n){var i=n.key.split(":"),s=i[0].split(","),o=new google.maps.LatLng(s[0],s[1]);n.itemId=t.id+"_"+n.key,n.key='"'+i[0]+'"',n.label=i[1]?i[1].ucfirst():"";var a=new google.maps.Marker({position:o,icon:this.getMarkerSymbol(n,t.color),value:n.value,markerData:n,optimized:!1});this.addMarkerEvents(a,t),e.push(a)}.bind(this));var i=new a(this.map.map,e,{styles:n,zoomOnClick:!1,useMarkerValue:!0});this.addMarkerClusterEvents(i,t),this.markerClusters.push(i)}.bind(this))},getMarkerSymbol:function(t,e){var n;return n=t.value<10?0:t.value<100?1:t.value<1e3?2:3,{url:this.getCircleSymbol({stat:t,size:this.styles[n].size,color:o.brightenColor(e,this.styles[n].brightness),value:t.value,xPosition:this.styles[n].xPosition,note:this.options.notes.getById(t.itemId)}),scaledSize:new google.maps.Size(this.styles[n].size,this.styles[n].size+15)}},getCircleSymbol:function(t){return"data:image/svg+xml;base64,"+n.base64Encode('<svg xmlns="http://www.w3.org/2000/svg" height="'+(t.size+15)+'" viewBox="0 0 64 64" width="'+t.size+'" ><g><circle fill-opacity="0.8" stroke="'+o.brightenColor(t.color,.2)+'" stroke-width="10" stroke-opacity="0.5" cx="32" cy="32" r="15" fill="'+t.color+'"/>'+(t.value?'<text x="'+t.xPosition+'" y="38" font-family="Arial" font-size="18" font-weight="bold" fill="#FFF">'+s.formatHumanNumber(t.value)+"</text>":"")+(t.note?'<g transform="translate(24, -15)"><path d="M8,0C3.582,0,0,3.582,0,8s8,24,8,24s8-19.582,8-24S12.418,0,8,0z M8,12c-2.209,0-4-1.791-4-4   s1.791-4,4-4s4,1.791,4,4S10.209,12,8,12z" fill="'+t.color+'"/></g>':"")+"</g></svg>")},getMarkerStyle:function(t){return{url:this.getCircleSymbol({size:t.size,color:o.brightenColor(t.color,t.brightness)}),height:t.size,width:t.size,anchor:t.anchor,textColor:"#FFF",textSize:t.textSize}},refresh:function(t){this.clearMarkers(),this.data=UWA.clone(t),this.buildMarkers()},clearMarkers:function(){this.markerClusters.forEach(function(t){t.clearMarkers()}),this.markerClusters=[]},addEvents:function(){this.map.addEvent("onLoad",function(){this.setMapStyle();var t=this.options.mapCenter;"string"==typeof t&&(t=s.tryJSONParse(t)),t&&"object"==typeof t||(t={}),this.map.setPosition({coords:{latitude:t.lat||45,longitude:t.lng||28}}),this.buildMarkers(),google.maps.event.addListener(this.map.map,"zoom_changed",function(){this.infoWindowCluster&&this.infoWindowCluster.close(),this.dispatchEvent("onUpdatePreferences",{mapZoom:String(this.map.map.getZoom()),mapCenter:JSON.stringify({lat:this.map.map.getCenter().lat(),lng:this.map.map.getCenter().lng()})})}.bind(this)),google.maps.event.addListener(this.map.map,"dragend",function(){this.dispatchEvent("onUpdatePreferences",{mapCenter:JSON.stringify({lat:this.map.map.getCenter().lat(),lng:this.map.map.getCenter().lng()})})}.bind(this))}.bind(this))},addMarkerEvents:function(t,e){var n=new google.maps.InfoWindow({content:'<div class="map-tooltip"><p class="tooltip-series"><span style="color:'+e.color+'">'+e.name+' </span></p><p class="tooltip-title"><span>'+t.markerData.label+"</span> "+s.formatHumanNumber(t.markerData.value)+"</p></div>",disableAutoPan:!0,pixelOffset:{height:10,width:0}});google.maps.event.addListener(t,"click",function(){this.dispatchEvent("onPointClick",t.markerData)}.bind(this)),google.maps.event.addListener(t,"mouseover",function(){n.open(this.map.map,t)}.bind(this)),google.maps.event.addListener(t,"mouseout",function(){n.close()})},addMarkerClusterEvents:function(t,e){google.maps.event.addListener(t,"clusterclick",function(t){var e=t.getMarkers(),n=[],i=[];e.forEach(function(t){n.push(t.markerData.key),i.push(t.markerData.label||t.markerData.key)}),this.dispatchEvent("onPointClick",[UWA.merge({key:"("+n.join(" OR ")+")",label:i.join(", ")},e[0].markerData),{displayNote:!1}])}.bind(this)),google.maps.event.addListener(t,"clustermouseover",function(t){var n=t.getMarkers(),i="";n.sort(function(t,e){return t.markerData.value<e.markerData.value?1:t.markerData.value>e.markerData.value?-1:0});for(var o=0;o<n.length;o++)if(i+='<p class="tooltip-title"><span>'+(n[o].markerData.label||n[o].markerData.key)+"</span> "+s.formatHumanNumber(n[o].markerData.value)+"</p>",5===o){i+="<p>...</p>";break}this.infoWindowCluster=new google.maps.InfoWindow({content:'<div class="map-tooltip"><p class="tooltip-series"><span style="color:'+e.color+'">'+e.name+" </span></p>"+i+"</div>",disableAutoPan:!0,position:{lat:t.getCenter().lat(),lng:t.getCenter().lng()},pixelOffset:{height:-10,width:0}}),this.infoWindowCluster.open(this.map.map)}.bind(this)),google.maps.event.addListener(t,"clustermouseout",function(){this.infoWindowCluster&&this.infoWindowCluster.close()}.bind(this))}})}.apply(e,i))||(t.exports=s)},function(t,e,n){"use strict";var i,s;i=[n(3),n(10),n(157),n(51)],void 0===(s=function(t,e,n,i){return e.extend({name:"nv-table",init:function(t){this._parent(t),this.elements.container=UWA.createElement("div",{class:this.getClassNames()}),this.build()},setNoteHighlite:function(t,e,n){this.grid&&this.grid.elements.grid.getElements(".note-pin").forEach(function(s){s.getAttribute("data-noteId")===t?s.setStyle("color",e?i.brightenColor(n):n):s.setStyle("opacity",e?.5:1)})},inject:function(){this._parent.apply(this,arguments),this.grid.options.scrollerOptions.scrollbar={autoHide:!1,bgColor:"transparent",opacity:.65},this.grid.addScroller()},build:function(){var t=UWA.merge(this.options,{className:"chart-grid",sortable:!0});t=this.addSortOptions(t),this.grid=new n(t).inject(this.elements.container),this.addEvents()},addSortOptions:function(t){var e,n=this.options.columns;t.widget&&t.widget.getValue("tableSort")&&(e=JSON.parse(t.widget.getValue("tableSort")),n.some(function(t){return t.dataIndex===e.orderBy})||(e=null));return t.widget&&!e&&(e=n.length>1?{orderBy:n[1].dataIndex,sortReverse:!0}:{orderBy:n[0].dataIndex,sortReverse:!1},t.widget.setValue("tableSort",JSON.stringify(e))),UWA.merge(t,e),t},updateSortOptions:function(t){var e={orderBy:t.orderBy,sortReverse:t.sortReverse};this.options.widget.setValue("tableSort",JSON.stringify(e))},addEvents:function(){var e=this;this.elements.container.addEvent("mouseover td",function(n){var i=t.getElement(n).getElement(".note-pin");i&&e.dispatchEvent("mouseOverPin",[i.getAttribute("data-noteId"),!0])}),this.elements.container.addEvent("mouseout td",function(n){var i=t.getElement(n).getElement(".note-pin");i&&e.dispatchEvent("mouseOverPin",[i.getAttribute("data-noteId"),!1])}),this.elements.container.addEvent("click td.grid-data",function(n){var i=t.getElement(n),s=e.getItemData(i.getAttribute("data-itemId"));s&&e.dispatchEvent("onPointClick",s)}),this.grid.addEvent("updateSortOptions",function(t){e.updateSortOptions(t)})},getItemData:function(t){var e,n,i;for(i=0;i<this.options.data.length;i++)for(n in e=this.options.data[i])if(e.hasOwnProperty(n)&&e[n].itemId===t)return e[n]}})}.apply(e,i))||(t.exports=s)},function(t,e,n){"use strict";var i,s;i=[n(0),n(5)],void 0===(s=function(t,e){var n=t.h;return e.extend({init:function(t){this._parent(t),this.state={displayChildren:this.props.children}},componentWillReceiveProps:function(t){t.children.some(Boolean)&&this.setState({displayChildren:t.children})},render:function(t,e){var i=t.children.some(Boolean),s=e.displayChildren.some(Boolean);return n("div",s?Object.assign({},t,{children:e.displayChildren,style:Object.assign({},t.style,{transition:"opacity .4s",opacity:i?1:0}),onTransitionEnd:function(e){e.target===this.base&&this.setState({displayChildren:t.children})}.bind(this)}):{style:{transition:"opacity .4s",opacity:0}})}})}.apply(e,i))||(t.exports=s)},function(t,e,n){"use strict";var i,s;i=[n(3),n(13),n(1),n(16),n(2),n(61),n(4),n(0),n(5),n(65),n(119),n(46),n(27),n(199),n(1091),n(1092),n(1099),n(1109),n(80),n(227)],void 0===(s=function(t,e,n,i,s,o,a,r,l,c,u,h,d,p,m,f,g,v,b,y){var w=5,x=o.extend(),C=o.extend(),S=i.resolve();function E(t){return new i(function(e){return setTimeout(e,t)})}function k(t){var e={snapshotData:t.snapshotData,preview:t.preview},n=0;function s(){return u.requestSourcesWithStats(t.sources,e).fail(o)}function o(e){var o=String(e.message);if(("timeout"===o||o.match(/725\d{2}/))&&(t.onStillLoading(),t.onCancelScreenshot&&t.onCancelScreenshot("API error: "+o),n<w))return n+=1,E(3e4).then(function(){var t=S;return S=S.then(function(){return E(1e4)}),t}).then(s);if(window.console&&window.console.error("Error: Load error: "+(o||"(no message)")),o&&(800===o||o.match(/Date range is too wide/)))return i.reject(new C);var a=d.getErrorMessage("source_"+o,{fallback:_("An error has occured, please try later...")});return i.reject(new x(a))}return s()}var T=r.h;function A(t){if(t.imageUrl||t.description)return T("div",{class:"nv-source-list-view-header"},t.imageUrl&&T("div",{class:"img-head",style:{"background-color":e(t.imageBckgColor),"text-align":t.imagePosition||"left"}},T("img",{src:s.Config.urls.storage+t.imageUrl})),t.description&&T("div",{class:"description-head",style:{"background-color":e(t.descriptionBckgColor),textAlign:t.descriptionPosition,color:e(t.descriptionTextColor)}},t.description));function e(t){return t?"#"+t:""}}function I(t,n){var i="",s=e.splat(t);i+='<p class="tooltip-title"><span>'+s[0].getLabel()+(s[0].getKeyType()?" ("+s[0].getKeyType()+")":"")+"<span></p>";for(var o=0;o<s.length;o++)if(i+='<p class="tooltip-series"><span style="color:'+s[o].getColor()+'">'+s[o].getFacetTitle()+"</span> "+s[o].getFormatedValue()+"</p>",n&&o===n){i+="<p>...</p>";break}return i}var N=l.extend({name:"nv-source-list-view",init:function(t){this._parent(t),this.state={load:0,highlightedFacets:[],highlightedNote:null,selectedTab:this.props.settings.selectedTab},this._onChangeTab=this._onChangeTab.bind(this)},_loadData:function(t){var e=this._loadRun={};this.setState({load:1}),k({sources:h.parseSourcesPreference(t.settings.sources),snapshotData:a.tryJSONParse(t.settings.snapshotData),onStillLoading:function(){this.setState({load:2})}.bind(this),onCancelScreenshot:t.onCancelScreenshot,preview:t.preview,moduleId:t.moduleId}).done(function(n){e===this._loadRun&&(n=function(t,e){var n=b.fromJSONSafe(e.settings.layout,t.getSourceFacets()),i=t.asArray();return n.each(function(t){if(t instanceof b.FacetsNode&&t.shouldFilterNullValues()){var e=t.getFacets().map(function(t){return t.getStats().filter(function(t){return null===t.getValue()}).map(function(t){return t.getKey()})}),n=e[0].filter(function(t){return e.every(function(e){return-1!==e.indexOf(t)})});t.getFacets().forEach(function(t){var e=t.getStats().filter(function(t){return-1===n.indexOf(t.getKey())}),s=t.cloneWith({stats:e});i[i.indexOf(t.getSource())]=t.getSource().cloneWith({facets:t.getSource().getFacets().map(function(e){return e===t?s:e})})})}}),new p(i)}(n,t),this._rootNode=b.fromJSONSafe(t.settings.layout,n.getSourceFacets()),this.props.onSourceListChange&&this.props.onSourceListChange(n),this.setState({load:0,sourceList:n}))}.bind(this),function(t){e===this._loadRun&&this.setState({load:3,loadingError:t})}.bind(this))},componentWillMount:function(){this._loadData(this.props)},componentWillReceiveProps:function(t){this.props.settings.sources===t.settings.sources&&this.props.settings.snapshotData===t.settings.snapshotData||this._loadData(t)},componentDidUpdate:function(){this.props.onResizable&&this.props.onResizable(0===this.state.load)},render:function(t,e){var n;switch(e.load){case 0:n=t.fixedHeight?T(c,{style:{height:"100%"}},this._renderGraphs(),this._renderLegend()):[this._renderGraphs(),this._renderLegend()];break;case 1:case 2:n=T(m,{slowliness:2===e.load?m.VERY_SLOW:m.NORMAL});break;case 3:n=this._renderError()}return T("div",{class:this.getClassNames()},T("div",{class:this.getClassNames("-content")},T(A,t.settings),n,e.statOverlay&&T(v,{onClose:function(){this.setState({statOverlay:!1})}.bind(this),onNoteChange:function(n){this._onChangeTab("notes");var i=new p(e.sourceList.asArray().map(function(t){return t.getId()===e.statOverlay.facet.getSource().getId()?n:t}));t.onUpdateWidgetPreference("sources",JSON.stringify(i.toJson())),this._rootNode=b.fromJSONSafe(t.settings.layout,i.getSourceFacets()),this.setState({statOverlay:!1,sourceList:i}),t.onSourceListChange(i)}.bind(this),stat:e.statOverlay.stat,note:e.statOverlay.note,facet:e.statOverlay.facet,isNotesVisible:e.statOverlay.isNotesVisible,onOpenPivot:t.onOpenPivot})))},_renderLegend:function(){var t=this.props,e=this.state,i=!1;b.fromJSONSafe(t.settings.layout,e.sourceList.getSourceFacets()).each(function(t){t instanceof b.FacetsNode&&(t.getFacets().some(function(t){return t.getAvailable()&&n.is(t.getAvailable(),"object")})&&(i=!0))});var o={sourceList:e.sourceList,preview:t.preview,readOnly:t.readOnly,displayAutosave:i&&!t.settings.hideAutosave&&s.NPD&&s.NPD.retention,selectedTab:e.selectedTab,highlightedFacets:e.highlightedFacets,highlightedNote:e.highlightedNote,layout:this._rootNode,onHighliteFacet:function(t,e){this.setState({highlightedFacets:e?[t]:[]})}.bind(this),onHighliteNote:function(t,e){this.setState({highlightedNote:e?t:null})}.bind(this),onOpenNote:function(t,e){this.setState({statOverlay:{note:t,facet:e,isNotesVisible:!0}})}.bind(this),onFacetChange:function(n,i){var s=new p(e.sourceList.asArray().map(function(t){return t.cloneWith({facets:t.getFacets().map(function(t){return t===n?t.cloneWith(i):t})})}));t.onUpdateWidgetPreference("sources",JSON.stringify(s.toJson())),this._rootNode=b.fromJSONSafe(t.settings.layout,s.getSourceFacets()),this.setState({sourceList:s}),t.onSourceListChange(s)}.bind(this),onCreateModuleHistory:t.onCreateModuleHistory,onOpenPivot:t.onOpenPivot,onEditSource:t.onEditSource,onCreatePotion:t.onCreatePotion,onChangeTab:this._onChangeTab};return T(f,o)},_renderGraphs:function(){var t=this.props,e=this.state,n=Math.max(50,t.fixedHeight?this.base.getBoundingClientRect().height-20:200*(y.countSplits(this._rootNode,!1)+1)+(Number(t.settings.graphsHeightDelta)||0)),i={rootNode:this._rootNode,height:n,chartProps:{tooltipFormatter:I,preview:t.preview,readOnly:t.readOnly,highlightFacet:e.highlightedFacets[0],highlightNote:e.highlightedNote,events:{onMouseOverNote:function(t,n){var i=n&&t?t:null;e.highlightedNote!==i&&this.setState({highlightedNote:i})}.bind(this),onMouseOverMsg:function(t,e){this.setState({highlightedFacets:e?t:[]})}.bind(this)}}};if(!(t.preview||t.readOnly&&t.isShared)){var s=this;i.chartProps.events.onPointClick=function(t){s.setState({statOverlay:{stat:t,note:t.getNote(),facet:t.getFacet(),isNotesVisible:this.isNotesVisible()}})}}return T(g,i)},_renderError:function(){var e=this.state.loadingError;return T("div",{class:"uwa-message simple"},e instanceof C?[T("p",null,_("The range is too big.")),T("p",null,_("Or recommandation:")+" ",T("a",{onClick:function(e){t.stop(e),this.props.onEditSource()}.bind(this)},_("edit the range")),".")]:e.message)},_onChangeTab:function(t){this.props.onUpdateWidgetPreference&&this.props.onUpdateWidgetPreference("selectedTab",t),this.setState({selectedTab:t})}});return N.checkProps=function(t){if(!t.settings)throw new Error("SourceListView settings prop is required");if(!t.settings.sources)throw new Error("SourceListView settings.sources prop is required")},N}.apply(e,i))||(t.exports=s)},function(t,e,n){"use strict";var i,s;i=[n(1),n(13),n(10),n(8),n(4),n(41)],void 0===(s=function(t,e,n,i,s,o){var a=t.createElement;return n.extend({name:"nv-corpus-manager-listingview",init:function(t){t=t||{},this._parent(t),this.buildSkeleton(),t.entities&&(this.entities=t.entities)},buildSkeleton:function(){this.elements.container=a("div",{class:this.getClassNames(),html:[this.elements.loading=a("div",{class:this.getClassNames("-loading"),html:[this.spinner=new o({size:30,color:"#CACACA"}),a("div",{class:"uwa-message simple grey",text:_("Loading...")})]}),this.elements.list=a("div",{class:this.getClassNames("-list")})]}),this.elements.buttons={}},setMergeEntity:function(t){this.entities=t,this.spinner.stop(),this.updateContent()},updateContent:function(){this.elements.loading.hide(),this.elements.list.show(),this.buildGrid()},getGridData:function(){},buildGrid:function(){},getCell:function(t){return a("span",{html:t})},getSelectCell:function(t){return t.isLocked()?"":(this.elements.buttons[t.getId()]=new i.Checkbox({className:"green",events:{onChange:function(){var n=this.elements.buttons[t.getId()];n.isChecked()?(n.getContent().getParent("tr").addClassName("selected"),t.set("isSelected",!0)):(n.getContent().getParent("tr").removeClassName("selected"),t.set("isSelected",!1));var i=e.toArray(this.elements.buttons),s=function(t){return!t.isChecked()};i.some(s)&&this.elements.selectAllButton&&this.elements.selectAllButton.check(!1),this.setDeleteButtonState(!i.every(s))}.bind(this)}}),this.elements.buttons[t.getId()])},updateTableDisplay:function(){this.addHeaderButtons(),this.setCheckbox()},addHeaderButtons:function(){this.getFilteredSources().every(function(t){return t.isLocked()})||(this.elements.container.getElement(".fixed-column .select-column").setContent(this.elements.container.getDimensions().width>1150?_("Select All"):"",this.elements.selectAllButton=new i.Checkbox({className:"green",events:{onChange:this.onChangeSelectAll.bind(this)}})),this.elements.deleteButton=a("div",{class:"uwa-icon delete-button disabled","data-icon":"Ź",events:{click:function(){this.elements.deleteButton.hasClassName("disabled")||this.onDeleteSelectedSources()}.bind(this)}}).inject(this.elements.container.getElement(".fixed-column .action-column > span")))},setCheckbox:function(){this.elements.selectAllButton&&this.elements.selectAllButton.isChecked()&&this.elements.selectAllButton.dispatchEvent("onChange"),this.getFilteredSources().forEach(function(t){this.elements.buttons[t.getId()]&&t.isSelected()&&(this.elements.buttons[t.getId()].check(!0),this.elements.buttons[t.getId()].dispatchEvent("onChange"))}.bind(this))},setDeleteButtonState:function(t){this.elements.deleteButton[t?"removeClassName":"addClassName"]("disabled")},resetList:function(){this.elements.loading.show(),this.elements.list.hide()},displayMessage:function(t,e,n){var i=t||_("Error loading {0}. Please try later.",n),s=a("div",{class:"uwa-message simple"}),o=e||this.elements.container;i.inject?i.inject(s):s.setText(i),o.setContent(s)},filterListView:function(t){this.filters=t,this.buildGrid()},getFilteredSources:function(t){return this.filters&&(this.filters.facets&&this.filters.facets.length&&(t=t.filter(function(t){return this.filters.facets.includes(t.getFacet())}.bind(this))),this.filters.title&&(t=t.filter(function(t){return t.getDestination().match(this.filters.title)||t.getSource().match(this.filters.title)}.bind(this)))),t},displayWelcomeNotice:function(t){var e=a("div",{class:this.getClassNames("-notice"),styles:{"text-align":"right","font-size":"1.7em"},html:[a("span",{styles:{"padding-right":"10px",color:"grey"},text:t})]}).addContent(a("img",{src:s.getStaticUrl("/img/emptyLib/arrow.svg"),styles:{"padding-right":"20px","padding-top":"20px"}}));this.elements.container.setContent(e)},addTableEvents:function(){},onChangeSelectAll:function(){var t=this.elements.selectAllButton.isChecked();this.getFilteredSources().forEach(function(e){if(!e.isLocked()){e.set("isSelected",t),this.elements.buttons[e.getId()].check(t);var n=this.elements.buttons[e.getId()].getContent().getParent("tr");n&&n[t?"addClassName":"removeClassName"]("selected")}}.bind(this)),this.setDeleteButtonState(t)},onDeleteSelectedSources:function(){var t=[];this.getFilteredSources().forEach(function(e){e.isSelected()&&t.push(e)}),this.onDeleteSources(t)},onDeleteSources:function(){}})}.apply(e,i))||(t.exports=s)},function(t,e,n){t.exports=!n(48)&&!n(29)(function(){return 7!=Object.defineProperty(n(239)("div"),"a",{get:function(){return 7}}).a})},function(t,e,n){var i=n(28),s=n(47),o=n(127),a=n(240),r=n(49).f;t.exports=function(t){var e=s.Symbol||(s.Symbol=o?{}:i.Symbol||{});"_"==t.charAt(0)||t in e||r(e,t,{value:a.f(t)})}},function(t,e,n){var i=n(72),s=n(74),o=n(201)(!1),a=n(241)("IE_PROTO");t.exports=function(t,e){var n,r=s(t),l=0,c=[];for(n in r)n!=a&&i(r,n)&&c.push(n);for(;e.length>l;)i(r,n=e[l++])&&(~o(c,n)||c.push(n));return c}},function(t,e,n){var i=n(49),s=n(30),o=n(128);t.exports=n(48)?Object.defineProperties:function(t,e){s(t);for(var n,a=o(e),r=a.length,l=0;r>l;)i.f(t,n=a[l++],e[n]);return t}},function(t,e,n){var i=n(74),s=n(131).f,o={}.toString,a="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[];t.exports.f=function(t){return a&&"[object Window]"==o.call(t)?function(t){try{return s(t)}catch(t){return a.slice()}}(t):s(i(t))}},function(t,e,n){"use strict";var i=n(48),s=n(128),o=n(202),a=n(167),r=n(60),l=n(166),c=Object.assign;t.exports=!c||n(29)(function(){var t={},e={},n=Symbol(),i="abcdefghijklmnopqrst";return t[n]=7,i.split("").forEach(function(t){e[t]=t}),7!=c({},t)[n]||Object.keys(c({},e)).join("")!=i})?function(t,e){for(var n=r(t),c=arguments.length,u=1,h=o.f,d=a.f;c>u;)for(var p,m=l(arguments[u++]),f=h?s(m).concat(h(m)):s(m),g=f.length,v=0;g>v;)p=f[v++],i&&!d.call(m,p)||(n[p]=m[p]);return n}:c},function(t,e){t.exports=Object.is||function(t,e){return t===e?0!==t||1/t==1/e:t!=t&&e!=e}},function(t,e,n){"use strict";var i=n(90),s=n(31),o=n(321),a=[].slice,r={};t.exports=Function.bind||function(t){var e=i(this),n=a.call(arguments,1),l=function(){var i=n.concat(a.call(arguments));return this instanceof l?function(t,e,n){if(!(e in r)){for(var i=[],s=0;s<e;s++)i[s]="a["+s+"]";r[e]=Function("F,a","return new F("+i.join(",")+")")}return r[e](t,n)}(e,i.length,i):o(e,i,t)};return s(e.prototype)&&(l.prototype=e.prototype),l}},function(t,e){t.exports=function(t,e,n){var i=void 0===n;switch(e.length){case 0:return i?t():t.call(n);case 1:return i?t(e[0]):t.call(n,e[0]);case 2:return i?t(e[0],e[1]):t.call(n,e[0],e[1]);case 3:return i?t(e[0],e[1],e[2]):t.call(n,e[0],e[1],e[2]);case 4:return i?t(e[0],e[1],e[2],e[3]):t.call(n,e[0],e[1],e[2],e[3])}return t.apply(n,e)}},function(t,e,n){var i=n(28).parseInt,s=n(142).trim,o=n(245),a=/^[-+]?0[xX]/;t.exports=8!==i(o+"08")||22!==i(o+"0x16")?function(t,e){var n=s(String(t),3);return i(n,e>>>0||(a.test(n)?16:10))}:i},function(t,e,n){var i=n(28).parseFloat,s=n(142).trim;t.exports=1/i(n(245)+"-0")!=-1/0?function(t){var e=s(String(t),3),n=i(e);return 0===n&&"-"==e.charAt(0)?-0:n}:i},function(t,e,n){var i=n(100);t.exports=function(t,e){if("number"!=typeof t&&"Number"!=i(t))throw TypeError(e);return+t}},function(t,e,n){var i=n(31),s=Math.floor;t.exports=function(t){return!i(t)&&isFinite(t)&&s(t)===t}},function(t,e){t.exports=Math.log1p||function(t){return(t=+t)>-1e-8&&t<1e-8?t-t*t/2:Math.log(1+t)}},function(t,e,n){"use strict";var i=n(130),s=n(125),o=n(141),a={};n(73)(a,n(37)("iterator"),function(){return this}),t.exports=function(t,e,n){t.prototype=i(a,{next:s(1,n)}),o(t,e+" Iterator")}},function(t,e,n){var i=n(30);t.exports=function(t,e,n,s){try{return s?e(i(n)[0],n[1]):e(n)}catch(e){var o=t.return;throw void 0!==o&&i(o.call(t)),e}}},function(t,e,n){var i=n(554);t.exports=function(t,e){return new(i(t))(e)}},function(t,e,n){var i=n(90),s=n(60),o=n(166),a=n(42);t.exports=function(t,e,n,r,l){i(e);var c=s(t),u=o(c),h=a(c.length),d=l?h-1:0,p=l?-1:1;if(n<2)for(;;){if(d in u){r=u[d],d+=p;break}if(d+=p,l?d<0:h<=d)throw TypeError("Reduce of empty array with no initial value")}for(;l?d>=0:h>d;d+=p)d in u&&(r=e(r,u[d],d,c));return r}},function(t,e,n){"use strict";var i=n(60),s=n(129),o=n(42);t.exports=[].copyWithin||function(t,e){var n=i(this),a=o(n.length),r=s(t,a),l=s(e,a),c=arguments.length>2?arguments[2]:void 0,u=Math.min((void 0===c?a:s(c,a))-l,a-r),h=1;for(l<r&&r<l+u&&(h=-1,l+=u-1,r+=u-1);u-- >0;)l in n?n[r]=n[l]:delete n[r],r+=h,l+=h;return n}},function(t,e){t.exports=function(t,e){return{value:e,done:!!t}}},function(t,e,n){"use strict";var i=n(260);n(7)({target:"RegExp",proto:!0,forced:i!==/./.exec},{exec:i})},function(t,e,n){n(48)&&"g"!=/./g.flags&&n(49).f(RegExp.prototype,"flags",{configurable:!0,get:n(205)})},function(t,e,n){"use strict";var i,s,o,a,r=n(127),l=n(28),c=n(89),u=n(168),h=n(7),d=n(31),p=n(90),m=n(145),f=n(208),g=n(169),v=n(262).set,b=n(574)(),y=n(336),w=n(575),x=n(209),C=n(337),_=l.TypeError,S=l.process,E=S&&S.versions,k=E&&E.v8||"",T=l.Promise,A="process"==u(S),I=function(){},N=s=y.f,D=!!function(){try{var t=T.resolve(1),e=(t.constructor={})[n(37)("species")]=function(t){t(I,I)};return(A||"function"==typeof PromiseRejectionEvent)&&t.then(I)instanceof e&&0!==k.indexOf("6.6")&&-1===x.indexOf("Chrome/66")}catch(t){}}(),O=function(t){var e;return!(!d(t)||"function"!=typeof(e=t.then))&&e},P=function(t,e){if(!t._n){t._n=!0;var n=t._c;b(function(){for(var i=t._v,s=1==t._s,o=0,a=function(e){var n,o,a,r=s?e.ok:e.fail,l=e.resolve,c=e.reject,u=e.domain;try{r?(s||(2==t._h&&L(t),t._h=1),!0===r?n=i:(u&&u.enter(),n=r(i),u&&(u.exit(),a=!0)),n===e.promise?c(_("Promise-chain cycle")):(o=O(n))?o.call(n,l,c):l(n)):c(i)}catch(t){u&&!a&&u.exit(),c(t)}};n.length>o;)a(n[o++]);t._c=[],t._n=!1,e&&!t._h&&F(t)})}},F=function(t){v.call(l,function(){var e,n,i,s=t._v,o=M(t);if(o&&(e=w(function(){A?S.emit("unhandledRejection",s,t):(n=l.onunhandledrejection)?n({promise:t,reason:s}):(i=l.console)&&i.error&&i.error("Unhandled promise rejection",s)}),t._h=A||M(t)?2:1),t._a=void 0,o&&e.e)throw e.v})},M=function(t){return 1!==t._h&&0===(t._a||t._c).length},L=function(t){v.call(l,function(){var e;A?S.emit("rejectionHandled",t):(e=l.onrejectionhandled)&&e({promise:t,reason:t._v})})},R=function(t){var e=this;e._d||(e._d=!0,(e=e._w||e)._v=t,e._s=2,e._a||(e._a=e._c.slice()),P(e,!0))},j=function(t){var e,n=this;if(!n._d){n._d=!0,n=n._w||n;try{if(n===t)throw _("Promise can't be resolved itself");(e=O(t))?b(function(){var i={_w:n,_d:!1};try{e.call(t,c(j,i,1),c(R,i,1))}catch(t){R.call(i,t)}}):(n._v=t,n._s=1,P(n,!1))}catch(t){R.call({_w:n,_d:!1},t)}}};D||(T=function(t){m(this,T,"Promise","_h"),p(t),i.call(this);try{t(c(j,this,1),c(R,this,1))}catch(t){R.call(this,t)}},(i=function(t){this._c=[],this._a=void 0,this._s=0,this._d=!1,this._v=void 0,this._h=0,this._n=!1}).prototype=n(146)(T.prototype,{then:function(t,e){var n=N(g(this,T));return n.ok="function"!=typeof t||t,n.fail="function"==typeof e&&e,n.domain=A?S.domain:void 0,this._c.push(n),this._a&&this._a.push(n),this._s&&P(this,!1),n.promise},catch:function(t){return this.then(void 0,t)}}),o=function(){var t=new i;this.promise=t,this.resolve=c(j,t,1),this.reject=c(R,t,1)},y.f=N=function(t){return t===T||t===a?new o(t):s(t)}),h(h.G+h.W+h.F*!D,{Promise:T}),n(141)(T,"Promise"),n(144)("Promise"),a=n(47).Promise,h(h.S+h.F*!D,"Promise",{reject:function(t){var e=N(this);return(0,e.reject)(t),e.promise}}),h(h.S+h.F*(r||!D),"Promise",{resolve:function(t){return C(r&&this===a?T:this,t)}}),h(h.S+h.F*!(D&&n(204)(function(t){T.all(t).catch(I)})),"Promise",{all:function(t){var e=this,n=N(e),i=n.resolve,s=n.reject,o=w(function(){var n=[],o=0,a=1;f(t,!1,function(t){var r=o++,l=!1;n.push(void 0),a++,e.resolve(t).then(function(t){l||(l=!0,n[r]=t,--a||i(n))},s)}),--a||i(n)});return o.e&&s(o.v),n.promise},race:function(t){var e=this,n=N(e),i=n.reject,s=w(function(){f(t,!1,function(t){e.resolve(t).then(n.resolve,i)})});return s.e&&i(s.v),n.promise}})},function(t,e,n){"use strict";var i=n(90);function s(t){var e,n;this.promise=new t(function(t,i){if(void 0!==e||void 0!==n)throw TypeError("Bad Promise constructor");e=t,n=i}),this.resolve=i(e),this.reject=i(n)}t.exports.f=function(t){return new s(t)}},function(t,e,n){var i=n(30),s=n(31),o=n(336);t.exports=function(t,e){if(i(t),s(e)&&e.constructor===t)return e;var n=o.f(t);return(0,n.resolve)(e),n.promise}},function(t,e,n){"use strict";var i=n(49).f,s=n(130),o=n(146),a=n(89),r=n(145),l=n(208),c=n(251),u=n(332),h=n(144),d=n(48),p=n(113).fastKey,m=n(134),f=d?"_s":"size",g=function(t,e){var n,i=p(e);if("F"!==i)return t._i[i];for(n=t._f;n;n=n.n)if(n.k==e)return n};t.exports={getConstructor:function(t,e,n,c){var u=t(function(t,i){r(t,u,e,"_i"),t._t=e,t._i=s(null),t._f=void 0,t._l=void 0,t[f]=0,null!=i&&l(i,n,t[c],t)});return o(u.prototype,{clear:function(){for(var t=m(this,e),n=t._i,i=t._f;i;i=i.n)i.r=!0,i.p&&(i.p=i.p.n=void 0),delete n[i.i];t._f=t._l=void 0,t[f]=0},delete:function(t){var n=m(this,e),i=g(n,t);if(i){var s=i.n,o=i.p;delete n._i[i.i],i.r=!0,o&&(o.n=s),s&&(s.p=o),n._f==i&&(n._f=s),n._l==i&&(n._l=o),n[f]--}return!!i},forEach:function(t){m(this,e);for(var n,i=a(t,arguments.length>1?arguments[1]:void 0,3);n=n?n.n:this._f;)for(i(n.v,n.k,this);n&&n.r;)n=n.p},has:function(t){return!!g(m(this,e),t)}}),d&&i(u.prototype,"size",{get:function(){return m(this,e)[f]}}),u},def:function(t,e,n){var i,s,o=g(t,e);return o?o.v=n:(t._l=o={i:s=p(e,!0),k:e,v:n,p:i=t._l,n:void 0,r:!1},t._f||(t._f=o),i&&(i.n=o),t[f]++,"F"!==s&&(t._i[s]=o)),t},getEntry:g,setStrong:function(t,e,n){c(t,e,function(t,n){this._t=m(t,e),this._k=n,this._l=void 0},function(){for(var t=this._k,e=this._l;e&&e.r;)e=e.p;return this._t&&(this._l=e=e?e.n:this._t._f)?u(0,"keys"==t?e.k:"values"==t?e.v:[e.k,e.v]):(this._t=void 0,u(1))},n?"entries":"values",!n,!0),h(e)}}},function(t,e,n){"use strict";var i=n(146),s=n(113).getWeak,o=n(30),a=n(31),r=n(145),l=n(208),c=n(94),u=n(72),h=n(134),d=c(5),p=c(6),m=0,f=function(t){return t._l||(t._l=new g)},g=function(){this.a=[]},v=function(t,e){return d(t.a,function(t){return t[0]===e})};g.prototype={get:function(t){var e=v(this,t);if(e)return e[1]},has:function(t){return!!v(this,t)},set:function(t,e){var n=v(this,t);n?n[1]=e:this.a.push([t,e])},delete:function(t){var e=p(this.a,function(e){return e[0]===t});return~e&&this.a.splice(e,1),!!~e}},t.exports={getConstructor:function(t,e,n,o){var c=t(function(t,i){r(t,c,e,"_i"),t._t=e,t._i=m++,t._l=void 0,null!=i&&l(i,n,t[o],t)});return i(c.prototype,{delete:function(t){if(!a(t))return!1;var n=s(t);return!0===n?f(h(this,e)).delete(t):n&&u(n,this._i)&&delete n[this._i]},has:function(t){if(!a(t))return!1;var n=s(t);return!0===n?f(h(this,e)).has(t):n&&u(n,this._i)}}),c},def:function(t,e,n){var i=s(o(e),!0);return!0===i?f(t).set(e,n):i[t._i]=n,t},ufstore:f}},function(t,e,n){var i=n(91),s=n(42);t.exports=function(t){if(void 0===t)return 0;var e=i(t),n=s(e);if(e!==n)throw RangeError("Wrong length!");return n}},function(t,e,n){var i=n(131),s=n(202),o=n(30),a=n(28).Reflect;t.exports=a&&a.ownKeys||function(t){var e=i.f(o(t)),n=s.f;return n?e.concat(n(t)):e}},function(t,e,n){var i=n(42),s=n(247),o=n(101);t.exports=function(t,e,n,a){var r=String(o(t)),l=r.length,c=void 0===n?" ":String(n),u=i(e);if(u<=l||""==c)return r;var h=u-l,d=s.call(c,Math.ceil(h/c.length));return d.length>h&&(d=d.slice(0,h)),a?d+r:r+d}},function(t,e,n){var i=n(48),s=n(128),o=n(74),a=n(167).f;t.exports=function(t){return function(e){for(var n,r=o(e),l=s(r),c=l.length,u=0,h=[];c>u;)n=l[u++],i&&!a.call(r,n)||h.push(t?[n,r[n]]:r[n]);return h}}},function(t,e){var n=t.exports={version:"2.6.9"};"number"==typeof __e&&(__e=n)},function(t,e){t.exports=function(t){try{return!!t()}catch(t){return!0}}},function(t,e,n){(function(i){var s;void 0===(s=function(){"use strict";var t,e,n,i=new Function("return this")();return i.setImmediate&&i.clearImmediate?t={set:i.setImmediate.bind(i),clear:i.clearImmediate.bind(i)}:i.addEventListener&&i.postMessage?(e={},n=0,i.addEventListener("message",function(t){var n;try{n="string"==typeof t.data&&"{"===t.data[0]&&JSON.parse(t.data)}catch(t){}n&&"uwa-setImmediate"===n.type&&t.source===i&&(t.stopPropagation(),e[n.id]&&(e[n.id](),delete e[n.id]))},!0),t={set:function(t){var s=n++;return e[s]=t,i.postMessage(JSON.stringify({type:"uwa-setImmediate",id:s}),"*"),s},clear:function(t){delete e[t]}}):t={set:function(t){return i.setTimeout(t,0)},clear:i.clearTimeout},t}.call(e,n,e,t))||(t.exports=s)}).call(this,n(114))},function(t,e,n){var i,s;i=[n(268)],void 0===(s=function(){return function(t){var e,n=new WeakMap;if(/Trident/.test(navigator.userAgent))e=setTimeout;else if(window.setImmediate)e=window.setImmediate;else{var i=[],s=String(Math.random());window.addEventListener("message",function(t){if(t.data===s){var e=i;i=[],e.forEach(function(t){t()})}}),e=function(t){i.push(t),window.postMessage(s,"*")}}var o=!1,a=[];function r(){o=!1;var t=a;a=[],t.sort(function(t,e){return t.uid_-e.uid_});var e=!1;t.forEach(function(t){var i=t.takeRecords();!function(t){t.nodes_.forEach(function(e){var i=n.get(e);i&&i.forEach(function(e){e.observer===t&&e.removeTransientObservers()})})}(t),i.length&&(t.callback_(i,t),e=!0)}),e&&r()}function l(t,e){for(var i=t;i;i=i.parentNode){var s=n.get(i);if(s)for(var o=0;o<s.length;o++){var a=s[o],r=a.options;if(i===t||r.subtree){var l=e(r);l&&a.enqueue(l)}}}}var c,u,h=0;function d(t){this.callback_=t,this.nodes_=[],this.records_=[],this.uid_=++h}function p(t,e){this.type=t,this.target=e,this.addedNodes=[],this.removedNodes=[],this.previousSibling=null,this.nextSibling=null,this.attributeName=null,this.attributeNamespace=null,this.oldValue=null}function m(t,e){return c=new p(t,e)}function f(t){return u||((n=new p((e=c).type,e.target)).addedNodes=e.addedNodes.slice(),n.removedNodes=e.removedNodes.slice(),n.previousSibling=e.previousSibling,n.nextSibling=e.nextSibling,n.attributeName=e.attributeName,n.attributeNamespace=e.attributeNamespace,n.oldValue=e.oldValue,(u=n).oldValue=t,u);var e,n}function g(t,e){return t===e?t:u&&((n=t)===u||n===c)?u:null;var n}function v(t,e,n){this.observer=t,this.target=e,this.options=n,this.transientObservedNodes=[]}d.prototype={observe:function(t,e){var i;if(i=t,t=window.ShadowDOMPolyfill&&window.ShadowDOMPolyfill.wrapIfNeeded(i)||i,!e.childList&&!e.attributes&&!e.characterData||e.attributeOldValue&&!e.attributes||e.attributeFilter&&e.attributeFilter.length&&!e.attributes||e.characterDataOldValue&&!e.characterData)throw new SyntaxError;var s,o=n.get(t);o||n.set(t,o=[]);for(var a=0;a<o.length;a++)if(o[a].observer===this){(s=o[a]).removeListeners(),s.options=e;break}s||(s=new v(this,t,e),o.push(s),this.nodes_.push(t)),s.addListeners()},disconnect:function(){this.nodes_.forEach(function(t){for(var e=n.get(t),i=0;i<e.length;i++){var s=e[i];if(s.observer===this){s.removeListeners(),e.splice(i,1);break}}},this),this.records_=[]},takeRecords:function(){var t=this.records_;return this.records_=[],t}},v.prototype={enqueue:function(t){var n,i=this.observer.records_,s=i.length;if(i.length>0){var l=g(i[s-1],t);if(l)return void(i[s-1]=l)}else n=this.observer,a.push(n),o||(o=!0,e(r));i[s]=t},addListeners:function(){this.addListeners_(this.target)},addListeners_:function(t){var e=this.options;e.attributes&&t.addEventListener("DOMAttrModified",this,!0),e.characterData&&t.addEventListener("DOMCharacterDataModified",this,!0),e.childList&&t.addEventListener("DOMNodeInserted",this,!0),(e.childList||e.subtree)&&t.addEventListener("DOMNodeRemoved",this,!0)},removeListeners:function(){this.removeListeners_(this.target)},removeListeners_:function(t){var e=this.options;e.attributes&&t.removeEventListener("DOMAttrModified",this,!0),e.characterData&&t.removeEventListener("DOMCharacterDataModified",this,!0),e.childList&&t.removeEventListener("DOMNodeInserted",this,!0),(e.childList||e.subtree)&&t.removeEventListener("DOMNodeRemoved",this,!0)},addTransientObserver:function(t){if(t!==this.target){this.addListeners_(t),this.transientObservedNodes.push(t);var e=n.get(t);e||n.set(t,e=[]),e.push(this)}},removeTransientObservers:function(){var t=this.transientObservedNodes;this.transientObservedNodes=[],t.forEach(function(t){this.removeListeners_(t);for(var e=n.get(t),i=0;i<e.length;i++)if(e[i]===this){e.splice(i,1);break}},this)},handleEvent:function(t){switch(t.stopImmediatePropagation(),t.type){case"DOMAttrModified":var e=t.attrName,n=t.relatedNode.namespaceURI,i=t.target;(o=new m("attributes",i)).attributeName=e,o.attributeNamespace=n;var s=t.attrChange===MutationEvent.ADDITION?null:t.prevValue;l(i,function(t){if(t.attributes&&(!t.attributeFilter||!t.attributeFilter.length||-1!==t.attributeFilter.indexOf(e)||-1!==t.attributeFilter.indexOf(n)))return t.attributeOldValue?f(s):o});break;case"DOMCharacterDataModified":var o=m("characterData",i=t.target);s=t.prevValue;l(i,function(t){if(t.characterData)return t.characterDataOldValue?f(s):o});break;case"DOMNodeRemoved":this.addTransientObserver(t.target);case"DOMNodeInserted":i=t.relatedNode;var a,r,h=t.target;"DOMNodeInserted"===t.type?(a=[h],r=[]):(a=[],r=[h]);var d=h.previousSibling,p=h.nextSibling;(o=m("childList",i)).addedNodes=a,o.removedNodes=r,o.previousSibling=d,o.nextSibling=p,l(i,function(t){if(t.childList)return o})}c=u=void 0}},t.JsMutationObserver=d,t.MutationObserver||(t.MutationObserver=d)}(this),window.MutationObserver}.apply(e,i))||(t.exports=s)},function(t,e,n){var i,s;i=[n(9)],void 0===(s=function(t){"use strict";function e(t){return"_x_"+t}return t.extend({init:function(){this._data={}},get:function(t){return this._data[e(t)]},set:function(t,n){return this._data[e(t)]=n,this},getAll:function(){var t={};for(var e in this._data)t[e.slice(3)]=this._data[e];return t},remove:function(t){return delete this._data[e(t)],this}})}.apply(e,i))||(t.exports=s)},function(t,e,n){var i,s;i=[n(1),n(3),n(26),n(10),n(24)],void 0===(s=function(t,e,n,i,s){"use strict";var o=new WeakMap,a=new WeakMap,r=i.extend(s,{name:"uwa-overlay",defaultOptions:{exclusive:!0,exclusiveWith:function(t){return t.name===this.name},closeable:!0,fxOptions:{},resizeParent:!1},init:function(e){this._parent(e),this.buildSkeleton(),this.fx=new n(this.elements.container,t.merge({wait:!1,events:{onComplete:this.onFxComplete.bind(this)}},this.options.fxOptions))},buildSkeleton:function(){var n=this.elements.container=t.createElement("div",{class:this.getClassNames(),styles:{display:"none",opacity:0}});o.set(n,this),this.options.closeable&&n.addClassName("closeable").addEvent("click",function(t){e.getElement(t)===n&&this.close()}.bind(this))},closeOverlays:function(t){var e=1;function n(){0===(e-=1)&&t()}if(this.options.exclusive){var i=this.elements.container&&this.elements.container.getParent();i&&i.getElements(".uwa-overlay").forEach(function(t){var i=o.get(t);i&&this!==i&&i.isOpen()&&this.options.exclusiveWith.call(this,i)&&(e+=1,i.addEventOnce("onClose",n),i.close())},this)}n()},onFxComplete:function(){var t=this.opening,e=this.elements.container;t||(e.setStyle("display","none"),this.resize(!0)),this.dispatchEvent(t?"onOpen":"onClose",[e]),this.opening=null},isOpen:function(){var t=this.elements.container;return t.getParent()&&"none"!==t.getStyle("display")&&!1!==this.opening},open:function(){return this.setPeriodical("needResize",this.resize,500),this.toggle(!0)},close:function(){return this.clearPeriodical("needResize"),this.toggle(!1)},toggle:function(t){var e=this.elements.container,n=this.isOpen();if(void 0===t)t=!n;else if(t===n)return;return this.dispatchEvent(t?"onPreOpen":"onPreClose",[e]),this.opening=t,e.setStyle("display","block"),this.fx&&this.fx.fade(t?"in":"out"),t&&this.closeOverlays(function(){this.resize()}.bind(this)),this.fx||this.onFxComplete(),this},resize:function(t){if(this.options.resizeParent){var e=a.get(this),n=this.getContent(),i=n.getOffsetParent();!e||i&&e===i||(e.setStyle("height",""),a.delete(this)),i&&(t?(i.setStyle("height",""),a.delete(this)):n.scrollHeight>i.offsetHeight&&(i.setStyle("height",n.scrollHeight),a.set(this,i)))}},onRemoved:function(){this.resize(!0)},onInjected:function(){this.resize()},destroy:function(){this.resize(!0),this._parent()}});return t.namespace("Controls/Overlay",r,t)}.apply(e,i))||(t.exports=s)},function(t,e,n){"use strict";var i,s;i=[n(1),n(13),n(19),n(4),n(2),n(172)],void 0===(s=function(t,e,n,i,s,o){var a,r=!1,l=!1,c=0;function u(){return document.body.getElement("#iframes")}function h(){var o=function(){var t;return(t="hidden"===document.body.getStyle("overflow-y")?n.getSize().y:document.body.offsetHeight)<700&&(t=700),t}();if(r!==l||!l&&c!==o){a&&(a.destroy(),a=null);var h=e.toQueryString({height:l?null:o,rnd:i.uniqueID(),scroll:l===r?null:l?"top":"restore"});c=o,r=l,(a=t.createElement("iframe",{src:s.NPD.resizeURL+"?"+h,styles:{width:1,height:1,border:0,visibility:"hidden"}})).addEvent("load",function(){setTimeout(this.destroy.bind(this),100)}).inject(u())}}function d(){return Boolean(window.top.location!==location&&!i.getVar("noResize")&&s.NPD&&s.NPD.resizeURL&&u())}return o.addCallback(function(){d()&&setInterval(h,500)}),{adjustFrameToViewportSize:function(t){d()&&(l=Boolean(t),h())}}}.apply(e,i))||(t.exports=s)},function(t,e,n){"use strict";var i,s;i=[n(1),n(9),n(22),n(24),n(16),n(61),n(4)],void 0===(s=function(t,e,n,i,s,o,a){function r(e,n,i){var s=n.split(".").reduce(function(e,n){if(t.owns(e,n))return e[n]},e);return void 0===s?i:s}function l(e,n){var i,s={};function o(i){if("object"===t.typeOf(e[i])&&"object"===t.typeOf(n[i])){var o=l(e[i],n[i]);0!==Object.keys(o).length&&(s[i]=o)}else t.equals(e[i],n[i])||(s[i]=n[i])}for(i in e)o(i);for(i in n)t.owns(e,i)||o(i);return s}function c(t){return t&&"function"==typeof t.get}function u(t){return t&&"object"==typeof t&&"function"!=typeof t.get}var h=e.extend(n,i,{options:{defaults:{},debounceSave:1e3},init:function(t,e){!function t(e){if(!u(e))throw new Error("Invalid schema");a.forEachProperty(e,function(e,n){if(!c(e)){if(u(e))return t(e);throw new Error("Invalid value in schema: "+n+" -> "+e)}})}(t),this.setOptions(e),this._schema=t,this._values={},this._savedValues={},delete this.options.initialValues,this._previousValues=null},get:function(t){var e,n=r(this._schema,t);if(u(n))e={},a.forEachProperty(n,function(n,i){e[i]=this.get(t+"."+i)},this);else{if(!c(n))throw new Error('Unknown key "'+t+'"');var i=n,s=r(this._values,t,r(this.options.defaults,t));e=void 0===s?i.default:i.get(s)}return e},set:function(e,n){if(t.is(e,"plain"))a.forEachProperty(e,function(t,e){this.set(e,t)},this);else{var i=r(this._schema,e);if(u(i))a.forEachProperty(n,function(t,n){this.set(e+"."+n,t)},this);else{if(!c(i))throw new Error('Unknown key "'+e+'"');void 0!==n&&i.set&&(n=i.set(n)),function(e,n,i){var s=n.split("."),o=s.pop();e=s.reduce(function(e,n){return t.owns(e,n)&&t.is(e[n],"plain")||(e[n]={}),e[n]},e),void 0===i?delete e[o]:e[o]=i}(this._values,e,n)}}return this},setRaw:function(e){return t.extend(this._values,e,!0),this._savedValues=t.clone(this._values),this},store:function(){this._previousValues=t.clone(this._values)},restore:function(){this._values=t.clone(this._previousValues)},hasChanged:function(e){return!!this._previousValues&&(e?Boolean(!t.equals(r(this._previousValues,e),r(this._values,e))):!t.equals(this._previousValues,this._values))},_save:function(){throw new h.Exception("Save isn't supported for this TypedHash")},saveNow:function(){return this.save(),this._sleepPromise.now(),this._sleepPromise.promise},save:function(){var e,n,i,o;return this._sleepPromise?this._sleepPromise.reset():(this._sleepPromise=(e=this.options.debounceSave,(o={now:function(){n()},reset:function(){clearTimeout(i),i=setTimeout(function(){n()},e)},promise:new s(function(t){n=t})}).reset(),o),this._sleepPromise.promise=this._sleepPromise.promise.then(function(){if(!t.equals(this._savedValues,this._values)){var e=l(this._savedValues,this._values);return this._savedValues=t.clone(this._values),this._sleepPromise=!1,this._save(e)}}.bind(this))),this._sleepPromise.promise}});return h.Exception=o.extend(),h.types={array:{get:function(t){return Array.isArray(t)?t.slice():[]},default:[]},bool:{get:function(t){return Boolean("string"==typeof t?"false"!==t&&("true"===t||parseInt(t,10)):t)},set:function(t){return"false"===t?0:t?1:0},default:!1},string:{get:function(e){return t.is(e)?String(e):""},default:""},number:{get:Number,default:0},json:{get:function(t){return t?JSON.parse(t):null},set:JSON.stringify,default:null}},h.__tests_diff=l,h}.apply(e,i))||(t.exports=s)},function(t,e,n){"use strict";var i,s;i=[n(171)],void 0===(s=function(t){var e=new t,n=!0,i=function(t){var i=n;n=t,i!==t&&e.dispatch([n])};return{setOffline:function(){i(!1)},setOnline:function(){i(!0)},onlineStateChanged:e}}.apply(e,i))||(t.exports=s)},function(t,e,n){"use strict";var i,s;i=[n(9),n(22),n(20),n(4)],void 0===(s=function(t,e,n,i){return t.extend(e,{options:{pool:!0,group:!1,cache:!1,maxGroup:5,timeout:100,cacheTime:3e5},init:function(t){this.setOptions(t),t=this.options,this.tasks={},t.group&&(this.groups={},this.groupCount={}),t.cache&&(this.cacheTimeout=setInterval(this._cacheGC.bind(this),Math.max(6e4,t.cacheTime)))},destroy:function(){var t;for(t in clearTimeout(this.cacheTimeout),this.tasks)clearTimeout(this.tasks[t].timeout);if(this.groups)for(t in this.groups)clearTimeout(this.groups[t].timeout);delete this.tasks,delete this.groups},get:function(t){return n.resolve(t)},key:function(){return i.uniqueID()},groupKey:function(){return"single"},add:function(t){var e=this.key(t),i=this.tasks[e];if(!i||i.expire<Date.now()?(i={deferred:n.deferred(),parameters:t,key:e,expire:1/0,resolved:!1},this.tasks[e]=i):i.parameters=this._mixParameters(i.parameters,t),!i.resolved)if(this.groups){var s=this._groupKey(i.parameters),o=this.groups[s];o||(o=this.groups[s]={tasks:[],key:s}),o.tasks.indexOf(i)<0&&o.tasks.push(i),clearTimeout(o.timeout),o.timeout=setTimeout(this._groupGet.bind(this,o),this.options.timeout)}else this.options.pool?(clearTimeout(i.timeout),i.timeout=setTimeout(function(t){t._result(i,t.get(i.parameters))},this.options.timeout,this)):this._result(i,this.get(i.parameters));return i.deferred.promise},multiAdd:function(t){return n.all(t.map(this.add,this))},_groupGet:function(t){delete this.groups[t.key];var e=this.get(t.tasks.map(function(t){return t.parameters}));t.tasks.forEach(function(t,n){this._result(t,function(t){return e.then(function(e){return e[t]})}(n))},this)},_groupKey:function(t){var e,n=this.groupKey(t),i=this.options.maxGroup;return i&&(e=this.groupCount[n]||0,this.groupCount[n]=e+1,n+="~~group:"+Math.floor(e/i)),n},_result:function(t,e){var n=this;function i(){n.options.cache&&(t.expire=Date.now()+n.options.cacheTime)}t.resolved=!0,n.options.cache||delete this.tasks[t.id],e.then(i,i),e.then(t.deferred.resolve,t.deferred.reject)},_cacheGC:function(){var t,e=Date.now();for(t in this.tasks){var n=this.tasks[n];n.expire<e&&delete this.tasks[t]}},_mixParameters:function(t){return t}})}.apply(e,i))||(t.exports=s)},function(t,e,n){"use strict";var i;void 0===(i=function(){return{isValid:function(t,e,n){var i,s=!0;switch(t){case"username":s=e.test(/^[a-z0-9][a-z0-9-]{1,48}[a-z0-9]/);break;case"email":s=e.isEmail()&&(i=e.replace(/.*@/,""),{"gmail.fr":"gmail.com","gmai.com":"gmail.com","gmail.cm":"gmail.com","gmaoil.com":"gmail.com","gamail.com":"gmail.com","hottmai.com":"hotmail.com","hotmai.com":"hotmail.com","hottmail.com":"hotmail.com","lives.fr":"live.fr","lives.com":"live.com","outloo.com":"outlook.com","hotmai.fr":"hotmail.fr","homtail.fr":"hotmail.fr","outloook.com":"outlook.com","gmal.com":"gmail.com","gmail.es":"gmail.com","gmaill.com":"gmail.com","gmail.co":"gmail.com","gmaii.com":"gmail.com","gimal.com":"gmail.com","ive.com":"live.com"}.hasOwnProperty(i));break;case"password":s=e.length>=12;break;case"phone":s=!e.test(/[a-zA-Z]/);break;case"legal":s=n.checked;break;case"CardNo":s=function(t){var e,n=!1,i=!1,s=0,o=0;if((t=t.replace(/[^0-9]/g,"")).test(/^4[0-9]{12}([0-9]{3})?$/)?i="Visa":t.test(/^5[1-5]([0-9]{14})$/)?i="Master Card":t.test(/^6011[0-9]{12}$/)&&(i="Discover"),i){for(e=t.length-1;e>=0;--e)0!==(o=Number(t.charAt(e)))&&((t.length-e)%2==0&&(o+=o),o>9&&(o=Number(o.toString().charAt(0))+Number(o.toString().charAt(1))),s+=o);s%10==0&&(n=!0)}return n}(e);break;case"cvc":s=e.test(/^[0-9]{3,4}$/)}return s},getMessage:function(t,e){return this.message[t][e]||this.message[t][0]},message:{back:{otherwise:_("Please try later")},CN:{empty:_("Cart name is mandatory"),invalid:_("Cart name is invalid")},CardNo:{empty:_("Cart number is mandatory"),invalid:_("Cart number is invalid")},cvc:{empty:_("CVC number is mandatory"),invalid:_("CVC number is invalid")},name:{empty:_("Name is mandatory")},phone:{empty:_("Phone is mandatory"),invalid:_("Phone is not valid")},address:{empty:_("Address is mandatory")},city:{empty:_("City is mandatory")},zipCode:{empty:_("Zip code is mandatory")},country:{empty:_("Country code is mandatory")},email:{invalid:_("Please enter a valid email address."),empty:_("E-mail is mandatory")},legal:{empty:_("Please read and accept our Terms of Service"),invalid:_("Please read and accept our Terms of Service")},username:{invalid:_("Invalid username : (3 to 50 characters, allowed characters are lower-case letters, numbers and '-'. First and last letter can't be '-'.)"),notvalid:_("The username is invalid"),inuse:_("Sorry, this username is already in use"),empty:_("Username is mandatory")},password:{invalid:_("Your password must be at least 12 characters long."),empty:_("Password is mandatory")},signin:{0:_("Please try later"),"missing email":{message:_("Please enter your email address."),input:"email"},"missing password":{message:_("Please enter your password."),input:"password"},"no match":_("Invalid e-mail or password."),"not confirmed":_("This account must be activated. The activation link has been sent to your email adress. We can ")+'<a href="/signin/confirmation" class="resendConfirmation">'+_("send you the confirmation e-mail again.")+"</a>","email in use":{message:_("This email is already in use"),input:"email"}},signup:{0:_("Please try later"),"invalid email given":{message:_("Invalid e-mail."),input:"email"},"missing email":{message:_("Please enter your email address."),input:"email"},"missing password":{message:_("Please enter your password."),input:"password"},pending:{message:_("An account is already awaiting activation"),input:null},"username in use":{message:_("This username already exists"),input:"username"},"username is invalid":{message:_("This username is not allowed."),input:"username"},"bad captcha":{message:_("Invalid Captcha. Please try again."),input:"captcha"},"email in use":{message:_("This email is already in use"),input:"email"},"not valid":{message:_("3 to 50 characters, allowed characters are lower-case letters, numbers and '-'. First and last letter can't be '-'."),input:"username"},"password not secure":{message:[_("Your password must be at least 12 characters long."),_("Must contain at least 1 lowercase character."),_("Must contain at least 1 uppercase character."),_("Must contain at least 1 number."),_("Must contain at least 1 of the following special characters: {0}").format("!\"#$%&'()*+,-./:;<=>?@[]^_‘{|}~")].join("<br/>"),input:"password"}},sendActivation:{0:_("Please try later"),"in use":_("This email is already in use"),"wrong password":_("wrong password"),"already confirmed":_("This E-mail is already confirmed"),"missing parameter":_("Incomplete fields"),success:_("The new activation has been sent")},retrievePassword:{0:_("Please try later"),"missing email":{message:_("Please enter your email address."),input:"email"},success:_(" If we have an account for the email address you provided, we have emailed instructions to reset your password.")},recoverPwd:{0:_("Please try later"),nomatch:_("Passwords do not match."),success:_("The password has been changed!"),"missing parameter":_("Incomplete fields"),"not secure":[_("Your password must be at least 12 characters long."),_("Must contain at least 1 lowercase character."),_("Must contain at least 1 uppercase character."),_("Must contain at least 1 number."),_("Must contain at least 1 of the following special characters: {0}").format("!\"#$%&'()*+,-./:;<=>?@[]^_‘{|}~")].join("\n")},confirmConnect:{0:_("Please try later"),"'email' is required":_("Please enter your email address.")}}}}.apply(e,[]))||(t.exports=i)},function(t,e,n){"use strict";var i,s;i=[n(1),n(10),n(147),n(2)],void 0===(s=function(t,e,n,i){var s=e.extend({name:"nv-recaptcha",options:{theme:"light",size:"normal",lang:null},getContent:function(){return this.elements.content||(this.elements.content=t.createElement("div",{class:this.getClassNames()}),this._render()),this.elements.content},_render:function(){var t=function(){this._captchaId=grecaptcha.render(this.getContent(),{sitekey:i.Config.api_keys.recaptcha.key,size:this.options.size,theme:this.options.theme})}.bind(this);window.grecaptcha?t():(window.onloadReCaptchaCallback=t,n.js("//www.google.com/recaptcha/api.js?onload=onloadReCaptchaCallback&render=explicit&hl="+(this.options.lang||i.Globalization.shortLanguage)).done())},isAnswered:function(){return void 0!==this._captchaId&&grecaptcha.getResponse(this._captchaId).length>0},getValue:function(){return void 0===this._captchaId?"":grecaptcha.getResponse(this._captchaId)},reset:function(){void 0!==this._captchaId&&grecaptcha.reset(this._captchaId)}});return s.isEnabled=function(){return Boolean(i.Config.api_keys&&i.Config.api_keys.recaptcha&&i.Config.api_keys.recaptcha.key)},s}.apply(e,i))||(t.exports=s)},function(t,e,n){"use strict";var i,s;i=[n(1),n(3),n(2),n(35),n(10),n(83),n(8)],void 0===(s=function(t,e,i,s,o,a,r){var l=t.createElement,c=[{id:"brand",isActive:!0,title:_("Brand Wizard"),textIntro:[_("Competitors"),_("Brand Sentiment"),_("Share of Voice"),_("Crisis alerts")],titleDetail:_("Outsmart the competition"),textDetail:_("Track everywhere your brand is mentioned online: across social media, news, blogs and forums. Drill down to see what is really being said. Analyze sentiment and identify influencers.")},{id:"topic",isActive:!0,title:_("Topic Wizard"),textIntro:[_("Keywords"),_("Trend analysis"),_("Influencers"),_("Related news")],titleDetail:_("Know the latest buzz"),textDetail:_("Monitor any topic or keyword to know where it’s being mentioned, by whom and where. Who are the key influencers, and how is this topic trending over time?")},{id:"market",isActive:!0,title:_("Market Wizard"),textIntro:[_("Industry news"),_("Stock prices"),_("Market research"),_("Influencers")],titleDetail:_("Be ahead of the market"),textDetail:_("Watch everything online related to your industry or market—including stock prices, industry trends, market research and competitive brand analysis.")},{id:"event",isActive:!0,title:_("Event Wizard"),textIntro:[_("Speakers"),_("Top sessions"),_("Social engagement"),_("Trending topics")],titleDetail:_("Measure success – before, during and after"),textDetail:_("Understand and share everything going on at your event. What are the topics being discussed, and what is the sentiment? Who are the top speakers and sessions?")}],u=[{id:"reset",isActive:!0,title:_("Restart from scratch"),text:_("Reset to a blank dashboard. You can then customize your new dashboard with the sources and analytics you want to add."),note:_("Note: All existing configurations and updates within the dashboard will be erased. This action cannot be undone.")},{id:"alter",isActive:!0,title:_("Restart from the current configuration"),text:_("Reset your dashboard to its original settings. Your dashboard will be pre-populated with relevant sources and charts, which you can then customize."),note:_("Note: All updates you have made within the dashboard will be erased. This action cannot be undone.")}],h=o.extend({name:"nv-agency-wizards-index",options:{clickable:!0,forceActive:!1},init:function(t){if(this._parent(t),this.options.element){var e=this.options.element.getAttribute("data-clickable");e&&(this.options.clickable="true"===e);var n=this.options.element.getAttribute("data-force-active");n&&(this.options.forceActive="true"===n);var i=this.options.element.getAttribute("data-from-landing");i&&(this.options.fromLanding="true"===i)}},getContent:function(){return this.elements.container||this.build(),this.elements.container},build:function(){var t=this.options.reset?u:c,n=this.getClassNames()+(this.options.reset?this.getClassNames("--reset"):"");this.elements.container=l("ul",{class:n}).addContent(t.map(this.buildItem,this)),this.options.clickable&&this.elements.container.addEvent("click",this.onItemListClick.bind(this)),this.options.reset||this.elements.container.addEvents({mouseover:this.onItemListMouseover.bind(this),mouseleave:this.onItemListMouseleave.bind(this)}),this.options.fromLanding&&setTimeout(function(){this.elements.container.hasClassName("is-active")||e.dispatchEvent(this.elements.container.getElement(".nv-agency-wizards-index-item.brand"),"mouseover")}.bind(this),2e3)},buildItem:function(t){var e=this.options.forceActive||t.isActive,n=l(this.options.fromLanding&&this.options.clickable?"a":"li",{class:this.getClassNames("-item")+" "+t.id+(e?" active":" inactive")+(this.options.clickable?" clickable":"")}).addContent(l("div",{class:"hovereffect",html:[this.getHiddenItemContent(t)]}),this.getItemContent(t));return n.setData("id",t.id),n.setData("isActive",e),this.options.reset&&"alter"===t.id&&i.NPD.wizardryConfig&&n.setAttribute("data-wizardry-type",i.NPD.wizardryConfig.type),n},getHiddenItemContent:function(t){var e=l("div");return t.titleDetail&&t.textDetail&&e.addContent(l("div",{class:this.getClassNames("-item-detailcontent"),html:[l("div",{class:this.getClassNames("-item-title"),text:t.title}),l("p",{class:this.getClassNames("-item-detailtitle"),text:t.titleDetail}),l("p",{class:this.getClassNames("-item-detailtext"),text:t.textDetail}),this.getItemButton(t,!0)]})),e},getItemContent:function(t){var e=l("div");return t.textIntro&&e.addContent(l("div",{class:this.getClassNames("-item-content"),html:[l("div",{class:this.getClassNames("-item-title"),text:t.title}),l("ul",{class:this.getClassNames("-item-textintro"),html:t.textIntro.map(function(t){return l("li",{html:[l("span",{text:t})]})})}),this.getItemButton(t)]})),this.options.reset&&t.text&&e.addContent(l("div",{class:this.getClassNames("-item-title"),text:t.title}),l("div",{class:this.getClassNames("-item-text"),text:t.text}),t.note?{tag:"div",class:this.getClassNames("-item-note"),text:t.note}:"",this.getItemButton(t)),e},getItemButton:function(t,e){var n=l("div",{class:this.getClassNames("-item-button")});return(this.options.forceActive||t.isActive)&&this.options.reset&&this.options.clickable?n.addContent(new r.Button({value:_("Next"),className:"green iconr next"})):e?n.addContent(l("div",{class:this.getClassNames("-item-start"),html:this.options.clickable?_("Start Wizard"):_("Feature not available")+', <a href="'+i.getWelcomeBusinessURL("contact-us")+"?referer=wizardry-"+t.id+'">'+_("contact us")+"</a>"})):n.addContent(l("span",{class:this.getClassNames("-item-discover"),text:this.options.clickable?(this.options.fromLanding?_("Discover"):_("Start"))+" "+t.title:_("Not available")})),n},onItemListClick:function(t){var s=e.findElement(t,".nv-agency-wizards-index-item"),o=s.getData("id"),a=s.getData("is-active");o&&a&&(this.options.fromLanding&&n.e(0).then(function(){var t=[n(269)];(function(t){t.displayAuthModal("signup",{callbackUrl:i.Config.urls.startpage+"/dashboard?wizardry="+o,wizardry:"agency"})}).apply(null,t)}).catch(n.oe),this.dispatchEvent("onClick",[o]))},onItemListMouseover:function(n){var i=t.is(n,"element")?n:e.findElement(n,".nv-agency-wizards-index-item"),o=this.elements.container.getElements(".nv-agency-wizards-index-item");i&&(i.hasClassName("is-active")||s.log("wizardry",i.getData("id")),o.invoke("setStyles",{width:"calc((100% - 645px - 9px) / 3)","font-size":"0.8em"}),o.invoke("removeClassName","is-active"),i.setStyles({width:"645px","font-size":""}),this.elements.container.addClassName("is-active"),i.addClassName("is-active"))},onItemListMouseleave:function(){this.elements.container.removeClassName(".is-active"),this.elements.container.getElements(".is-active").invoke("removeClassName","is-active"),this.elements.container.getElements(".nv-agency-wizards-index-item").invoke("setStyles",{width:"","font-size":""})}});return a.register(h),h}.apply(e,i))||(t.exports=s)},function(t,e,n){"use strict";var i,s;i=[n(1),n(122),n(4),n(212)],void 0===(s=function(t,e,n,i){function s(t){return function(){return this.get(t)}}var o=e.extend({defaults:{updateAt:1e10,computedAt:1e10,late:!1,hidden:!1,status:{progress:100,eta:-1},title:"",itemCount:null},setup:function(){this.get("flags")||this.set("flags",{})},getId:s("id"),getTitle:s("title"),getToken:s("token"),getNextUpdateTimestamp:function(){return(this.get("updateAt")||1e10)+i.getServerLate(this.getQueue())},getQueue:s("queue"),getComputedAtTimestamp:s("computedAt"),getType:s("type"),getQuery:s("query"),isHidden:s("hidden"),getError:s("error"),isCached:function(){return Boolean(this.get("cached"))},getSelector:function(){var t=this.getId(),e=t?{id:t}:{query:this.getQuery()};return e.estimatedItemCount=this.get("estimatedItemCount"),e.token=this.getToken(),e.moduleId=this.get("moduleId"),e},hasError:function(){return!!this.get("error")},getFlagCount:function(t){return this.get("flags")[t]||0},getFaviconURL:function(){throw new Error("To implement")},canFlag:function(t){return"number"==typeof this.get("flags")[t]},canFilter:function(){return!1},isMultiSources:function(){return!0},getStatusETATimestamp:function(){return this.get("status").eta},isStatusFinish:function(){return 100===this.get("status").progress},getStatusProgress:function(){return this.get("status").progress},isStream:function(){return!1},isSearch:function(){return!1}});return o.preFactory=function(e,s,o){t.is(e.flags,"plain")&&n.forEachProperty(e.flags,function(t,e,n){var i=typeof t;"number"!==i&&"boolean"!==i&&(n[e]=+t||!1)}),t.owns(e,"updateAt")&&(!e.updateAt||e.updateAt<i.getServerTime())&&(e.updateAt=i.getServerTime()+120),"moduleId"in e&&!e.moduleId&&delete e.moduleId,"title"in e&&!e.title&&delete e.title;var a=0;if("newItemsCount"in e&&(a=e.newItemsCount,delete e.newItemsCount),e.error||(e.error=!1),o&&s&&s.updateTimestamp&&(!o._lastUpdateTimestamp||s.updateTimestamp>=o._lastUpdateTimestamp)){if(a){if(o.canFlag("unread")){var r=t.clone(o.get("flags"));r.unread=n.counterAdd(a,r.unread),o.set("flags",r)}}else if(t.is(e.flags,"plain")){var l=o.get("flags");n.forEachProperty(e.flags,function(t,e,i){i[e]=n.counterAdd(t,l[e]||0)})}o._lastUpdateTimestamp=i.getServerTime()}},o}.apply(e,i))||(t.exports=s)},function(t,e,n){"use strict";var i,s;i=[n(1),n(440),n(20),n(13),n(2),n(190),n(160),n(4),n(212),n(353)],void 0===(s=function(t,e,n,i,s,o,a,r,l,c){var u=c.extend({options:{group:!0,maxGroup:1},groupKey:function(t){return t.pageId+t.route},get:function(t){return l.request(t[0].route,t.map(function(t){return t.actions}),{dataAsJSON:!0,urlParameters:{pageId:t[0].pageId}}).then(function(t){var e;return Array.isArray(t.results)?t.results:((e=t.error&&t.error.message?new Error("Error: "+t.error.message):new Error("Error: Invalid Response")).originalResponse=t,n.reject(e))})}});return e.extend({FetchPool:u,name:"producers",factory:function(){throw new Error("To implement")},init:function(){this._fetchPool=new this.FetchPool(this.getPoolOptions())},getPoolOptions:function(){},areDataStored:function(){return!0},fetch:function(){return function(e,l){e=function(e){return e.map(function(e){var n=e.id&&this.getFromCache(e.id,s.get3DDPlatformId());return n&&t.merge(n.getSelector(),e)||e},this)}.call(this,i.splat(e)),l||(l={}),l._sentSelectors=[],l.limit&&(l.limit=+l.limit||0),l.name||(l.name=this.name),l.route||(l.route=l.name),l.pageId||(l.pageId=s.Page.id);var c=function(e,n){var s=t.clone(e);delete s.pageId,delete s.route,delete s.name,delete s.separate,delete s._sentSelectors,delete s.fromSlice,delete s.limitFactor,delete s.ignoreProducerErrors;var o={route:e.route,actions:{options:s},pageId:e.pageId};return o.actions[e.name]=i.splat(n),this._preFetchHook(o,e),e._sentSelectors.push.apply(e._sentSelectors,o.actions[e.name]||[]),this._fetchPool.add(o)}.bind(this,l);return(l.separate?n.all(e.map(c)):c(e)).then(function(t,e){e=i.splat(e);var s=!0!==t.ignoreProducerErrors&&this._errorValidator(e);if(s)return n.reject(s);var l=r.mapSplat(e,function(e){return e[t.name]||[]}),c=r.mapSplat(e,function(t){return t.items||[]});if(t._sentSelectors.length&&l.length!==t._sentSelectors.length)return(s=e.error&&e.error.message?new Error("Error: "+e.error.message):new Error("Error: Invalid Response")).originalResponse=e,n.reject(s);t.publishedBeforeItemId&&c.length>0&&c[c.length-1].id===t.publishedBeforeItemId&&(c.length=0),this._preFactoryHook(l,c,t);var u,h={},d=l.map(function(e,n){h[e.id]=e.itemCount;var i=t._sentSelectors[n];return i&&(!e.token&&i.token&&(e.token=i.token),i.moduleId&&(e.moduleId=i.moduleId)),this.factory(e,{updateTimestamp:t.crawledAfterDate})},this),p=c.map(function(t){return a.factory(t)});u=!t.limit||(e.every(function(t){return"boolean"==typeof t.hasMore})?e.some(function(t){return t.hasMore}):p.length>=t.limit);var m=e.reduce(function(t,e){return t+Number(e.sampling||100)},0)/e.length,f=e.reduce(function(t,e){return t+Number(e.savedCount||0)},0);delete t._sentSelectors;var g=new o(d,p,{query:t,hasMore:u,api:this,savedCount:f,sampling:m,incomplete:e.some(function(t){return t.incomplete}),producersItemCounts:h});return(t.limit&&!0!==t.fromSlice?g.getSlice(null,t.limit):n.resolve()).then(function(){return this._responseHook(g,e),g}.bind(this))}.bind(this,l))}}(),call:function(e,n,i){var s=t.clone(e.getQuery(),!1)||{};i||(i={}),i.producers||(i.producers=e.getProducers()),r.forEachProperty(i,function(e,n){t.is(e)&&(s[n]=e)});var o=this["_"+n+"Action"];if(!o)throw new Error("Undefined action "+n+" for the "+this.name+" API");o.call(this,e,s);var a=s.producers.invoke("getSelector");return delete s.producers,s.limitFactor=e.getLimitFactor(),this.fetch(a,s)},_nextAction:function(t,e){var n=t.getRawLastItem();e.limit&&n&&(e.publishedBeforeDate=n.getPublishTimestamp(),e.publishedBeforeItemId=n.getId(),e.publishedBeforeStreamId=n.getStream().getId()),e.limit||(e.limit=0)},_updateAction:function(t,e){t.isInfosOnly()?e.producers=t.getUpdatableProducers():delete e.limit},_flagAction:function(t,e){e.route=e.value?"streams/read/remove":"streams/read/add",e.name="streams",e.producers=t.getProducers().filter(function(t){return t.canFlag("unread")}),delete e.value,delete e.limit},_preFetchHook:function(){},_preFactoryHook:function(){},_responseHook:function(){},_errorValidator:function(){},_dynamicallyIncreaseLimit:function(t,e){if(e.limit){var n=Math.max(s.Config.max_search_items_load,e.limit),i=Math.max(e.limitFactor||1.5,1.5);t.actions.options.limit=Math.min(Math.ceil(e.limit*i)+5,n)}}})}.apply(e,i))||(t.exports=s)},function(t,e,n){"use strict";var i,s;i=[n(15),n(2),n(215),n(4),n(21),n(17)],void 0===(s=function(t,e,n,i,s,o){var a=Object.create(null);var r=function(t){var e,s=[1/0,1/0,1/0,1/0,1/0];for(e=1;e<s.length;e+=1)n.isTop(e)&&(s[e-1]=0);return o.getAll().forEach(function(e){var n=e.getColumnIndex();e.getTabId()===t&&n<s.length&&(s[n-1]+=1)}),i.forEachProperty(a,function(e){e.tab===t&&(s[e.col-1]+=1)}),s.indexOf(Math.min.apply(null,s))+1},l=function(t){var e="object"==typeof t?t:o.getById(t);if(e)return{tab:e.getTabId(),col:e.getColumnIndex(),row:e.getRowIndex()}},c=function(t,e,n){var i=n<0,s=o.getByTab(t).filter(function(t){return t.getColumnIndex()===e&&(i||t.getRowIndex()<n)}).map(function(t){return t.getRowIndex()});return Math[i?"min":"max"].apply(null,s)},u=function(t){return(t=s.getById(t))&&!s.isReadOnly(t)};function h(e,n){var i=t.extend(e.nextElementSibling);return i&&n&&!i.match(n)?h(i,n):i}var d=function(t){var n;return e.isSmartReaderView()?(n=(n=(n=h(t.getClosest("li")))&&n.getElement("> .nv-treeview-row"))&&n.id,/^widget-/.test(n)?l(n.slice(7)):{col:1,tab:t.getParent(".nv-treeview-section").id.slice(8),row:1/0}):(n=t.getClosest(".module:not(.hidden)")||h(t,".module:not(.hidden)"))?l(n.id.slice(2)):{col:t.getParent(".column").getAttribute("colnum"),tab:e.Page.openTabId,row:1/0}};return{setTemporaryPosition:function(t,e){a[t]=e},unsetTemporaryPosition:function(t){delete a[t]},get:function(t){t||(t={});var n,i=!0,s=t.tab||e.Page.openTabId,o=t.col||r(s),a=t.before,h=t.col?1/0:-1/0;return a&&((a=a.nodeType?d(a):l(a))?(s=a.tab,o=a.col,h=a.row):i=!1),i&&!u(s)&&(i=!1),i&&(n=c(s,+o,h),(!isFinite(n)||n<0)&&(n=0),i={tab:s,col:o,row:isFinite(h)?(h+n)/2:h>0?n+1e3:n/2||1e3}),i}}}.apply(e,i))||(t.exports=s)},function(t,e,n){"use strict";var i,s;i=[n(40)],void 0===(s=function(t){return t.extend({defaults:{title:_("CSV/XLS or Excel data files"),icon:"miso",visible:!0},getDisplayableSuggestion:function(){return this.getQuery().parser.fileName||this.getQuery().uploadType}})}.apply(e,i))||(t.exports=s)},function(t,e,n){"use strict";var i,s;i=[n(9)],void 0===(s=function(t){var e=t.extend({init:function(t){this._key=t.key||"",this._label=t.label||t.key||"",this._text=t.text||""},cloneWith:function(t){return new e(Object.assign({key:this._key,label:this._label,text:this._label},t))},getKey:function(){return this._key},getLabel:function(){return this._label},getText:function(){return this._text}});return e}.apply(e,i))||(t.exports=s)},function(t,e,n){"use strict";var i,s;i=[n(2)],void 0===(s=function(t){var e="img/icons.png?v=8796",n="img/tabicons.png?v=8796",i={"img/aol.gif":[e,3,2],"img/arrowList.gif":[e,21,2],"img/blogmarksnet.png":[e,39,2],"img/blogsearch.png":[e,57,2],"img/bookmark.gif":[e,75,2],"img/boxnet.png":[e,93,2],"img/cart.gif":[e,111,2],"img/clear.gif":[e,129,2],"img/closeMod.gif":[e,147,2],"img/closeTab.gif":[e,165,2],"img/digg.gif":[e,21,20],"img/ebay.gif":[e,39,20],"img/edit.gif":[e,75,20],"img/flickr.png":[e,93,20],"img/foxsports.png":[e,111,20],"img/gmail.gif":[e,129,20],"img/hideMod.gif":[e,147,20],"img/hideModBlue.gif":[e,165,20],"img/ical.gif":[e,3,38],"img/info.gif":[e,57,38],"img/kelkoo.gif":[e,75,38],"img/note.gif":[e,111,38],"img/next.gif":[e,129,38],"img/previous.gif":[e,147,38],"img/popmail.gif":[e,165,38],"img/publish.png":[e,3,56],"img/refresh.gif":[e,21,56],"img/search.gif":[e,39,56],"img/showMod.gif":[e,57,56],"img/showModBlue.gif":[e,75,56],"img/signin.gif":[e,93,56],"img/signout.gif":[e,111,56],"img/speaker.gif":[e,129,56],"img/tabOptions.gif":[e,147,56],"img/todolist.gif":[e,165,56],"img/video-player.gif":[e,21,74],"img/wand.png":[e,39,74],"img/weather.gif":[e,57,74],"img/writely.gif":[e,75,74],"img/yahoomail.gif":[e,93,74],"modules/aolMail/img/aol.png":[e,111,74],"modules/alexa/img/favicon.png":[e,129,74],"modules/craigslist/favicon.png":[e,147,74],"modules/externalWidget/img/icon-api.gif":[e,165,74],"modules/hotmail/img/hotmail.png":[e,3,92],"modules/imagesSearch/favicon.png":[e,21,92],"modules/macMail/icone_mac.png":[e,39,92],"modules/myspace/icon-myspace.gif":[e,57,92],"modules/twitter/twitter.ico":[e,75,92],"modules/zoho/zoho.ico":[e,93,92],"img/eco.png":[n,2,2],"img/favicon.png":[n,20,2],"img/icons/anchor.gif":[n,38,2],"img/icons/attach.gif":[n,56,2],"img/icons/basket.gif":[n,74,2],"img/icons/bomb.gif":[n,92,2],"img/icons/book.gif":[n,110,2],"img/icons/book_addresses.gif":[n,128,2],"img/icons/book_open.gif":[n,146,2],"img/icons/brick.gif":[n,164,2],"img/icons/briefcase.gif":[n,182,2],"img/icons/bug.gif":[n,200,2],"img/icons/cake.gif":[n,218,2],"img/icons/calendar_view_day.gif":[n,236,2],"img/icons/calendar_view_month.gif":[n,2,20],"img/icons/camera.gif":[n,20,20],"img/icons/car.gif":[n,38,20],"img/icons/cd.gif":[n,56,20],"img/icons/chart_bar.gif":[n,74,20],"img/icons/chart_curve.gif":[n,92,20],"img/icons/chart_organisation.gif":[n,110,20],"img/icons/chart_pie.gif":[n,128,20],"img/icons/clock.gif":[n,146,20],"img/icons/clock_red.gif":[n,164,20],"img/icons/cog.gif":[n,182,20],"img/icons/coins.gif":[n,200,20],"img/icons/color_swatch.gif":[n,218,20],"img/icons/comment.gif":[n,236,20],"img/icons/computer.gif":[n,2,38],"img/icons/connect.gif":[n,20,38],"img/icons/creditcards.gif":[n,38,38],"img/icons/door.gif":[n,56,38],"img/icons/door_open.gif":[n,74,38],"img/icons/drink.gif":[n,92,38],"img/icons/drink_empty.gif":[n,110,38],"img/icons/email.gif":[n,128,38],"img/icons/email_open.gif":[n,146,38],"img/icons/email_open_image.gif":[n,164,38],"img/icons/emoticon_evilgrin.gif":[n,182,38],"img/icons/emoticon_grin.gif":[n,200,38],"img/icons/emoticon_happy.gif":[n,218,38],"img/icons/emoticon_smile.gif":[n,236,38],"img/icons/emoticon_surprised.gif":[n,2,56],"img/icons/emoticon_tongue.gif":[n,20,56],"img/icons/emoticon_unhappy.gif":[n,38,56],"img/icons/emoticon_waii.gif":[n,56,56],"img/icons/emoticon_wink.gif":[n,74,56],"img/icons/exclamation.gif":[n,92,56],"img/icons/eye.gif":[n,110,56],"img/icons/feed.gif":[n,128,56],"img/icons/flag_blue.gif":[n,146,56],"img/icons/flag_green.gif":[n,164,56],"img/icons/flag_orange.gif":[n,182,56],"img/icons/flag_pink.gif":[n,200,56],"img/icons/flag_purple.gif":[n,218,56],"img/icons/flag_red.gif":[n,236,56],"img/icons/flag_yellow.gif":[n,2,74],"img/icons/folder.gif":[n,20,74],"img/icons/heart.gif":[n,38,74],"img/icons/house.gif":[n,56,74],"img/icons/image.gif":[n,74,74],"img/icons/information.gif":[n,92,74],"img/icons/ipod.gif":[n,110,74],"img/icons/keyboard.gif":[n,128,74],"img/icons/layout.gif":[n,146,74],"img/icons/lightbulb.gif":[n,164,74],"img/icons/lightbulb_off.gif":[n,182,74],"img/icons/lock.gif":[n,200,74],"img/icons/lock_open.gif":[n,218,74],"img/icons/lorry.gif":[n,236,74],"img/icons/lorry_flatbed.gif":[n,2,92],"img/icons/magnifier.gif":[n,20,92],"img/icons/money.gif":[n,38,92],"img/icons/money_dollar.gif":[n,56,92],"img/icons/money_euro.gif":[n,74,92],"img/icons/money_pound.gif":[n,92,92],"img/icons/money_yen.gif":[n,110,92],"img/icons/monitor.gif":[n,128,92],"img/icons/mouse.gif":[n,146,92],"img/icons/music.gif":[n,164,92],"img/icons/new.gif":[n,182,92],"img/icons/note.gif":[n,200,92],"img/icons/page.gif":[n,218,92],"img/icons/page_copy.gif":[n,236,92],"img/icons/page_white.gif":[n,2,110],"img/icons/page_white_acrobat.gif":[n,20,110],"img/icons/page_white_code.gif":[n,38,110],"img/icons/page_white_compressed.gif":[n,56,110],"img/icons/page_white_excel.gif":[n,74,110],"img/icons/page_white_flash.gif":[n,92,110],"img/icons/page_white_php.gif":[n,110,110],"img/icons/page_white_picture.gif":[n,128,110],"img/icons/page_white_powerpoint.gif":[n,146,110],"img/icons/page_white_text.gif":[n,164,110],"img/icons/page_white_word.gif":[n,182,110],"img/icons/page_white_world.gif":[n,200,110],"img/icons/palette.gif":[n,218,110],"img/icons/paste_plain.gif":[n,236,110],"img/icons/pencil.gif":[n,2,128],"img/icons/phone.gif":[n,20,128],"img/icons/photo.gif":[n,38,128],"img/icons/picture.gif":[n,56,128],"img/icons/printer.gif":[n,74,128],"img/icons/printer_empty.gif":[n,92,128],"img/icons/rainbow.gif":[n,110,128],"img/icons/rosette.gif":[n,128,128],"img/icons/server.gif":[n,146,128],"img/icons/shield.gif":[n,164,128],"img/icons/sport_8ball.gif":[n,182,128],"img/icons/sport_basketball.gif":[n,200,128],"img/icons/sport_football.gif":[n,218,128],"img/icons/sport_golf.gif":[n,236,128],"img/icons/sport_raquet.gif":[n,2,146],"img/icons/sport_shuttlecock.gif":[n,20,146],"img/icons/sport_soccer.gif":[n,38,146],"img/icons/sport_tennis.gif":[n,56,146],"img/icons/star.gif":[n,74,146],"img/icons/stop.gif":[n,92,146],"img/icons/tag_blue.gif":[n,110,146],"img/icons/tag_green.gif":[n,128,146],"img/icons/tag_orange.gif":[n,146,146],"img/icons/tag_pink.gif":[n,164,146],"img/icons/tag_purple.gif":[n,182,146],"img/icons/tag_red.gif":[n,200,146],"img/icons/tag_yellow.gif":[n,218,146],"img/icons/telephone.gif":[n,236,146],"img/icons/television.gif":[n,2,164],"img/icons/thumb_down.gif":[n,20,164],"img/icons/thumb_up.gif":[n,38,164],"img/icons/time.png":[n,56,164],"img/icons/trash.gif":[n,74,164],"img/icons/tux.gif":[n,92,164],"img/icons/user.gif":[n,110,164],"img/icons/user_female.gif":[n,128,164],"img/icons/user_gray.gif":[n,146,164],"img/icons/user_green.gif":[n,164,164],"img/icons/user_orange.gif":[n,182,164],"img/icons/user_red.gif":[n,200,164],"img/icons/user_suit.gif":[n,218,164],"img/icons/vcard.gif":[n,236,164],"img/icons/weather_clouds.gif":[n,2,182],"img/icons/weather_cloudy.gif":[n,20,182],"img/icons/weather_lightning.gif":[n,38,182],"img/icons/weather_rain.gif":[n,56,182],"img/icons/weather_snow.gif":[n,74,182],"img/icons/weather_sun.gif":[n,92,182],"img/icons/world.gif":[n,110,182],"img/icons/zoom.gif":[n,128,182],"img/uwa.png":[n,146,182]};return App.iconMapper=function(e){return void 0!==e&&(e.substr(0,t.Config.urls.cdn.length)===t.Config.urls.cdn&&(e=e.substr(t.Config.urls.cdn.length)),"/"===e[0]&&(e=e.slice(1)),e=e.replace(/^https?:\/\/.*\.?netvibes\.(com|local)\//,""),void 0!==i[e]&&i[e])},App.iconMapper}.apply(e,i))||(t.exports=s)},function(t,e,n){"use strict";var i,s;i=[n(173),n(96),n(17),n(21)],void 0===(s=function(t,e,n,i){var s={canMovePosition:function(e,i){var s=t.isDefault(),o=e.getColumnIndex(),a=n.getByColumn(o,e.getTabId()),r=a.indexOf(e);if(s)switch(i){case"up":s=r>0;break;case"top":s=r-1>0;break;case"down":s=r+1<a.length;break;case"bottom":s=r+2<a.length;break;case"left":s=o>1;break;default:s=o<e.getTab().dataObj.cols}return s},getModuleAt:function(t,e){var s,o,a,r=t.getColumnIndex(),l=t.getTabId(),c=n.getByColumn(r,l),u=c.indexOf(t);switch(e){case"left":case"right":a=i.getById(l).getColumnCount();do{r=(r+("left"===e?-2:0)+a)%a+1,o=(s=n.getByColumn(r,l))[u]||s[s.length-1]}while(!o);break;case"down":o=c[u+1]||c[0];break;case"top":o=c[0];break;case"up":o=c[u-1]||c[c.length-1]}return o},movePosition:function(t,i){var s={tab:t.getTabId(),col:t.getColumnIndex()},o=n.getByColumn(s.col,s.tab),a=o.indexOf(t);switch(i){case"left":case"right":s.col+="left"===i?-1:1,s.before=n.getByColumn(s.col,t.getTabId())[a];break;case"down":s.before=o[a+2];break;case"top":s.before=o[0];break;case"up":s.before=o[a-1]}e.changePosition(t,s)}};return App.LayoutManager=s,s}.apply(e,i))||(t.exports=s)},function(t,e,n){"use strict";var i,s;i=[n(10),n(8),n(2),n(44)],void 0===(s=function(t,e,n,i){return t.extend({name:"insights",options:{view:null,stream:null},buildContent:function(){this.elements.container=UWA.createElement("div",{class:"content-box feed-insights",html:[this.contentsToTable(this.getFirstTableContents()),this.contentsToTable(this.getSecondTableContents())]})},getContent:function(){return this.elements.container||this.buildContent(),this.elements.container},getFirstTableContents:function(){var t=this.getComputedStreamMetadata(),e=null;return"slow"!==t.sourceType&&"talkative"!==t.sourceType||(e={name:_("This source is"),value:"talkative"===t.sourceType?_("talkative"):_("slow")}),[{name:_("Keeping up to:"),value:_("{0} articles").format(t.currentRetention)},{name:_("During the last 7 days:"),value:_("{0} articles").format(t.postsThisWeek)},{name:_("This source publishes every:"),value:this.formatDuration(this.options.stream.getItemGap())},e]},getSecondTableContents:function(){var t=this.getComputedStreamMetadata(),e=" ("+_("Success")+")";return this.options.stream.getError()&&(e=" ("+_("Failed")+")"),[{name:_("Crawled every:"),value:this.formatDuration(t.currentRefreshInterval)},{name:_("Last crawl:"),value:i.formatRelativeTime(t.lastUpdateDate)+e},{name:_("Next crawl:"),value:i.formatRelativeTime(t.nextUpdateDate)}]},contentsToTable:function(t){return{tag:"table",html:t.map(function(t){return t?{tag:"tr",class:t.class||"",html:[{tag:"td",html:t.name},{tag:"td",html:t.value}]}:null})}},formatDuration:function(t){for(var e=[{template:_("{0} seconds"),factor:1},{template:_("{0} minutes"),factor:60},{template:_("{0} hours"),factor:60},{template:_("{0} days"),factor:24},{template:_("{0} weeks"),factor:7},{template:_("{0} months"),factor:30.4375},{template:_("{0} years"),factor:365.25}],n=t,i=0;;){var s=e[i+1];if(!s||s.factor>n)break;n/=s.factor,i++}return e[i].template.format(Math.round(n))},getComputedStreamMetadata:function(){var t=this.options.stream;return{sourceType:t.isTalkative()?"talkative":t.isSlow()?"slow":"none",currentRetention:t.getRetention(),currentRefreshInterval:t.getRefresh(),postsThisWeek:t.getWeeklyItemCount(),lastUpdateDate:new Date(1e3*t.getLastUpdateTimestamp()),nextUpdateDate:new Date(1e3*t.getNextUpdateTimestamp())}}})}.apply(e,i))||(t.exports=s)},function(t,e,n){var i,s;i=[n(1),n(3),n(10)],void 0===(s=function(t,e,n){"use strict";var i=n.extend({name:"uwa-segmented",defaultOptions:{title:null,multiSelect:!1,atLeastOneSelected:!1,constantItemWidth:!1,className:"",data:null},itemLength:0,init:function(t){this._parent(t),this.options.data=this.options.data||{},this.elements.items={},this.selectedItemsName={},this.buildSkeleton(),this.options.data&&this.addItems(this.options.data)},buildSkeleton:function(){var e=this.elements,n=this.options;e.container=t.createElement("ul",{class:this.getClassNames()}),n.title&&t.createElement("li",{class:this.getClassNames("-title"),html:{tag:"span",text:n.title}}).inject(e.container),e.itemContainer=e.container},updateItemClassNames:function(){var t,e,n=this.elements.items,i=0;for(t in n)n.hasOwnProperty(t)&&((e=n[t]).removeClassName(this.getClassNames("-item-first")),e.removeClassName(this.getClassNames("-item-last")),e.addClassName(this.getClassNames("-item")+" "+t),0===i&&e.addClassName(this.getClassNames("-item-first")),i===this.itemLength-1&&e.addClassName(this.getClassNames("-item-last")),i++)},createItem:function(n,i){var s,o=this.elements.items,a=i.text||"",r=this;return(s=t.createElement("li",{html:{tag:"a",class:n+"-title "+this.getClassNames("-item-title"),html:{tag:"span",text:a},title:t.i18n("Expand"),events:{click:function(t){e.stop(t),r.dispatchEvent("onClick",[n])}}}})).getElement("a")&&i.tooltipText&&(s.getElement("a").title=i.tooltipText),i.title&&(this.options.data[n].text=i.title,s.getElement("span").setHTML(i.title)),o[n]=s,i.pinned&&(s.addClassName("uwa-pinned"),this.selectItem(n,!1)),s},onResize:function(){var t,e,n=this.elements.items,i=0;if(this.options.constantItemWidth){for(t in n)n.hasOwnProperty(t)&&(i=(e=n[t].getDimensions().width)>i?e:i);for(t in n)n.hasOwnProperty(t)&&0!==i&&n[t].setStyle("width",i+"px")}},onClick:function(t){this.options.multiSelect?this.toggleItem(t):this.selectItem(t)},addItems:function(t){var e;for(e in t)t.hasOwnProperty(e)&&this.addItem(e,t[e])},addItem:function(t,e){var n,i,s;if(e=e||{},this.options.data[t]=e,e.where||(e.where="bottom"),n=(i=e.where.split(" "))[0],1!==i.length||"top"!==n&&"bottom"!==n){if(2!==i.length||"before"!==n&&"after"!==n)throw new Error('Has to be "top", "bottom", "before item" of "after item"');s=this.elements.items[i[1]]}else s=this.elements.itemContainer;this.createItem(t,e).inject(s,n),this.itemLength++,this.updateItemClassNames()},setItemTitle:function(t,e){var n=this.elements.items[t];n&&(this.options.data[t].text=e,n.getElement("span").setHTML(e))},setItemState:function(e,n,i){var s=this.options.data[e],o=this.elements.items[e];i=!t.is(i)||i,!n&&this.options.atLeastOneSelected&&1===this.getSelectedItems().length||(o||this.selectedItemsName[e]!==n)&&(this.options.multiSelect||this.unselectItems(),o.toggleClassName("selected",n),!o.getElement("a")||s&&s.tooltipText||(o.getElement("a").title=n?t.i18n("Collapse"):t.i18n("Expand")),this.selectedItemsName[e]=n,i&&this.dispatchEvent("onChange",[e,n,s]))},toggleItem:function(t,e){this.setItemState(t,!this.isSelected(t),e)},unselectItem:function(t,e){this.setItemState(t,!1,e)},selectItem:function(t,e){this.setItemState(t,!0,e)},getSelectedItems:function(){var t,e=this.selectedItemsName,n=[];for(t in e)e.hasOwnProperty(t)&&!0===e[t]&&n.push(t);return n},isSelected:function(t){return this.selectedItemsName[t]},unselectItems:function(t,e){var n,i=this.selectedItemsName,s=this.elements.items;for(n in t=void 0===t||t,s)s.hasOwnProperty(n)&&i[n]&&!s[n].hasClassName("uwa-pinned")&&e!==n&&(s[n].removeClassName("selected"),i[n]=!1,t&&this.dispatchEvent("onChange",[n,!1,this.options.data[n]]))},enable:function(){this.enabled=!0,this.getContent().removeClassName("disabled")},disable:function(){this.enabled=!1,this.getContent().addClassName("disabled")},isEnabled:function(){return this.enabled}});return t.namespace("Controls/Segmented",i,t)}.apply(e,i))||(t.exports=s)},function(t,e,n){var i,s;i=[n(1),n(24),n(8)],void 0===(s=function(t,e,n){"use strict";var i;return i=n.Text.extend(e,{name:"uwa-enhanced-textarea",options:{autoGrow:!1},_hiddenInput:!0,buildInput:function(){return t.createElement("textarea")},buildSkeleton:function(){this._parent();var e=this.elements;e.input.removeClassName("uwa-input-text"),e.caret=t.createElement("span",{class:this.getClassNames("-caret")}),e.input.addEvents({scroll:this.syncScroll.bind(this),mouseup:this.syncInput.bind(this),paste:this.syncInput.bind(this)}),e.container.addClassName("uwa-input-text").grab(e.input),this.isAutoGrow()&&e.container.addClassName("autogrow")},getCaretElement:function(){return this.elements.caret},isAutoGrow:function(){return this.options.autoGrow},syncInput:function(){this.setAnimate("sync-input",function(){var t=this.elements;t.content.empty(!0).addContent(this.buildContentMimic()," "),this.isAutoGrow()?t.content.offsetHeight!==t.container.offsetHeight?(t.container.setStyle("height",t.content.offsetHeight),this.dispatchEvent("onResize")):(this.syncScroll(),this._hideInputScroll()):this.syncScroll()})},buildContentMimic:function(){var t=this.elements,e=this.getValue(),n=t.input.selectionStart,i=e.slice(0,n),s=e.slice(n);return[i,t.caret,s]},_hideInputScroll:function(){if(this.isAutoGrow()){var t=this.elements.input;t.setStyles({overflow:t.offsetHeight===t.scrollHeight?"hidden":null})}},syncScroll:function(){this.elements.content.scrollTop=this.elements.input.scrollTop},onMouseDown:function(){}}),t.namespace("Controls/EnhancedTextarea",i,t)}.apply(e,i))||(t.exports=s)},function(t,e,n){"use strict";var i,s;i=[n(1),n(9)],void 0===(s=function(t,e){return e.extend({name:null,container:null,elements:null,init:function(t){this.name=t.name,this.container=t.container,this.elements={}},build:function(){this.elements.tab=t.createElement("div",{class:"panel-tab panel-tab-"+this.name}).inject(this.container)},show:function(){this.elements.tab||this.build(),this.elements.tab.setStyle("display","block")},hide:function(){this.elements.tab.setStyle("display","none"),this.elements.tab.hide()}})}.apply(e,i))||(t.exports=s)},function(t,e,n){"use strict";var i,s;i=[n(10),n(1)],void 0===(s=function(t,e){return t.extend({onShow:"onShow",onHide:"onHide",defaultOptions:{closable:!1,hideDelay:0},timeout:null,elements:{},init:function(t){this._parent(t);var n=e.createElement;this.elements.container=n("div",{class:"uwa-message"}).addContent(this.elements.message=n("span",{class:"uwa-message-text"})),this.options.closable&&(this.elements.container.addContent(this.elements.close=n("span",{class:"close uwa-icon","data-icon":","})),this.elements.close.addEvent("click",this.onCloseClick.bind(this))),this.hide()},show:function(t){var e=this.options.hideDelay;e>0&&(this.timeout=window.setTimeout(function(){this.hide()}.bind(this),e)),this.elements.message.set({html:t.content}),this.elements.container.addClassName(t.className||""),this.elements.container.show(),this.dispatchEvent(this.onShow)},hide:function(){this.timeout&&window.clearTimeout(this.timeout),this.elements.container.hide(),this.dispatchEvent(this.onHide)},onCloseClick:function(){this.hide()}})}.apply(e,i))||(t.exports=s)},function(t,e,n){"use strict";var i,s;i=[n(1),n(13),n(9),n(3),n(82),n(2),n(70),n(4)],void 0===(s=function(t,e,i,s,o,a,r,l){function c(n){var i,s=n.link.parseUrl();switch(n.typeString){case"feed":case"podcast":i={widgetId:n.id,moduleName:"RssReader",title:n.title,data:{feedUrl:n.link,title:n.title}},n.flags.includes("feed_open_outside")&&(i.data.openOutside=!0),n.data&&["view","nbTitles"].forEach(function(t){n.data[t]&&(i.data[t]=n.data[t])});break;case"flash":i={widgetId:n.id,moduleName:"Flash",title:n.title,data:{flashUrl:n.link,flashvars:n.flashvars||""}};break;case"uwa":case"multifeed":case"misodata":"/modules/multipleFeeds/multipleFeeds.php"===s.path?i={widgetId:n.id,moduleName:"MultipleFeeds",title:n.title,data:e.parseQuery(s.query)}:(i={widgetId:n.id,moduleName:"UWA",title:n.title,data:{moduleUrl:n.link}},n.flags.includes("feed_open_outside")&&(i.data.openOutside=!0),n.data&&t.extend(i.data,n.data));break;case"native":i={widgetId:n.id,moduleName:n.link,title:n.title,data:n.data||{}};break;case"miniapi":i={widgetId:n.id,moduleName:"Api",title:n.title,data:{moduleUrl:n.link}};break;case"event":i={widgetId:n.id,moduleName:"Ical",title:n.title,data:{icalUrl:n.link}};break;case"universe":i=null}return i}return i.singleton({size:{w:80,h:90,margin:20},tempIds:[],getRenderer:function(e,n){var i=t.createElement,s=this.getModuleTitle(n),r=n.descriptions&&(n.descriptions[a.Globalization.shortLanguage]||n.descriptions.en)||n.description,l={id:n.id||n.data.feedUrl,dataObj:"eco"===e?c(n):n,title:s,icon:n.thumbnail||this.getDefaultThumbnail(n.typeString)},u=l.dataObj;if(!a.Page.inSmartReaderView||"RssReader"!==u.moduleName||"true"!==u.data.savedStream){var h=i("div",{class:"panel-tab-module create-widget uwa-icon","data-icon":"r",styles:{width:this.size.w,height:this.size.h,marginRight:this.size.margin,marginBottom:this.size.margin}}).addContent(i("div",{class:"panel-tab-module-content"}).addContent(i("img",{src:l.icon}),i("div",{class:"panel-tab-module-title"}).addContent(i("span",{text:s}))),i("div",{class:"panel-tab-module-add uwa-icon"}));h.addEvent("click",this.onModuleClick.bind(this));var d=[i("p",{class:"panel-tooltip-title",text:s})];return r&&d.push(i("p",{text:r})),new o(h,d,{className:"dark-grey"}),this.saveModuleData(h,l),h}},saveModuleData:function(t,e){t.storage("data",{ecoObj:e,dataObj:e.dataObj})},addModuleToStartpage:function(t,e){var i=t.storage("data").dataObj,s={showPreview:e,eco:t.storage("data").ecoObj};Promise.resolve().then(function(){var e=[n(104)];(function(e){r.add(i,s).done(function(){e.toggleDropdownState(!0),t.addClassName("added"),window.setTimeout(function(){e.toggleDropdownState(!1),t.removeClassName("added")},1500)})}).apply(null,e)}).catch(n.oe)},getDefaultThumbnail:function(t){var e="module_feed";return"podcast"===t?e="module_podcast":"miniapi"===t||"uwa"===t?e="module_app":"misodata"===t?e="module_misodata":"event"===t?e="module_event":"flash"===t&&(e="module_flash"),l.getStaticUrl("/img/addcontent/"+e+".png")},onModuleClick:function(t){var e=s.findElement(t,".panel-tab-module"),n=s.getElement(t);if(e){var i=e.getParent(".uwa-themed-scroller-content").getElement(".nv-search-input input");i&&i.blur();var o=!n.hasClassName("panel-tab-module-add");this.addModuleToStartpage(e,o)}},getModuleTitle:function(t){return t.titles&&(t.titles[a.Globalization.shortLanguage]||t.titles.en)||t.title}})}.apply(e,i))||(t.exports=s)},,,function(t,e,n){var i,s;i=[n(1),n(24),n(19),n(3),n(15),n(10),n(294)],void 0===(s=function(t,e,n,i,s,o,a){"use strict";var r=o.extend(e,{defaultOptions:{className:"uwa-carousel",orientation:"horizontal",scrollSize:3,scrollerOptions:{lockDirection:!0,momentum:!1,scrollbarH:!1,scrollbarV:!1,scrollDrag:n.Features.touchEvents},nextButton:null,previousButton:null,scrollButtonClassName:"uwa-carousel-button",scrollDuration:300,autoScrollPressedDelay:500,itemSelector:"li"},init:function(e,n){this._parent(n),this.element=t.extendElement(e),this.elements.container=t.createElement("div",{class:this.options.className}).inject(this.element,"before").grab(this.element),this.initEvents(),this.options.scrollerOptions.scrollableY=this.isVertical(),this.options.scrollerOptions.scrollableX=!this.options.scrollerOptions.scrollableY,this.scroller=new a(e,t.merge({_root:!1},this.options.scrollerOptions)),this.scroller.addEvent("onMouseWheel",this.updateScrollButtonsDisabledState.bind(this)),this.scroller.addEvent("onScrollEnd",this.updateScrollButtonsDisabledState.bind(this)),this.scroller.addEvent("onRefresh",this.dispatchEvent.bind(this,"onRefresh"))},scrollHead:function(t){this.scrollToItem(this.element.firstChild,t)},scrollTail:function(t){this.scrollToItem(this.element.lastChild,t)},scrollNext:function(t){this.scrollTo("next",t)},scrollPrevious:function(t){this.scrollTo("previous",t)},scrollToItem:function(t,e){var n,i,s;this.hasDelayed("onRefresh")&&(this.clearDelayed("onRefresh"),this.onRefreshNoDelay()),isNaN(e)&&(e=this.options.scrollDuration),this.element.firstChild===t?n="start":this.element.lastChild===t?n="end":(i=this.getItems(),s=this.getVisibleItems(!0),n=i.indexOf(t)>i.indexOf(s[0])?"end":"before"),this.scroller.scrollToElement(t,n,e)},scrollTo:function(t,e,n){var i,s,o=this.getItems();e=e||this.options.scrollSize,isNaN(n)&&(n=this.options.scrollDuration),"next"===t?(i=o.indexOf(this.getLastItemVisible())+e,s="end"):"previous"===t&&(i=o.indexOf(this.getFirstItemVisible())-e,s="start"),i=Math.min(o.length-1,Math.max(0,i)),this.scroller.scrollToElement(o[i],s,n),this.updateScrollButtonsDisabledState()},isItemVisible:function(t,e){var n=this.isVertical()?"y":"x";return this.scroller.isInViewport(t,!1!==e,n)},getFirstItemVisible:function(){var t,e,n,i=this.getItems();for(e=0,n=i.length;e<n;e+=1)if(t=i[e],this.isItemVisible(t,!1))return t;return null},getLastItemVisible:function(){var t=this.getVisibleItems(!1);return t.length?t[t.length-1]:null},getVisibleItems:function(t){var e,n,i;return this.getItems().filter(function(s){return!0!==i?(e=this.isItemVisible(s,t),i=!1===e&&!0===n,n=e):e=!1,e},this)},nextButton:function(){return this.elements.nextButton||(this.elements.nextButton=this._createScrollButton("next")),this.elements.nextButton},previousButton:function(){return this.elements.previousButton||(this.elements.previousButton=this._createScrollButton("previous")),this.elements.previousButton},initEvents:function(){var t,e=n.Features.touchEvents,i={};i[e?"touchstart":"mousedown"]=this.onScrollButtonDown.bind(this),i[e?"touchend":"mouseup"]=this.onScrollButtonUp.bind(this),i.click=this.onScrollButtonClick.bind(this),(t=this.nextButton())&&(t.addEvents(i),t.setAttribute("data-scroll","next")),(t=this.previousButton())&&(t.addEvents(i),t.setAttribute("data-scroll","previous"))},onScrollButtonClick:function(t){if(!this.stopScroll()){var e=t.timeStamp||Date.now();this.lastClickTime&&e-this.lastClickTime<=300?(delete this.lastClickTime,this.onScrollButtonDblClick(t)):(i.preventDefault(t),this.lastClickTime=e,this.scrollTo(this.getScrollButtonFromEvent(t).getAttribute("data-scroll"),this.options.scrollSize))}},onScrollButtonDblClick:function(t){i.stop(t),this.scrollTo(this.getScrollButtonFromEvent(t).getAttribute("data-scroll"),this.getVisibleItems(!0).length)},onScrollButtonDown:function(t){this.setDelayed("pressedTimeout",this.autoScroll.bind(this,this.getScrollButtonFromEvent(t).getAttribute("data-scroll")),this.options.autoScrollPressedDelay)},onScrollButtonUp:function(){this.stopScroll()},autoScrollNext:function(){this.autoScroll("next")},autoScrollPrevious:function(){this.autoScroll("previous")},autoScroll:function(t){this.stopScroll(),this.setPeriodical("scrollTimer",function(){var e=this.scroller.getPosition(),n=this.isVertical()?"y":"x";"previous"===t?e[n]+=20:"next"===t&&(e[n]-=20),this.scroller.setPosition(e.x,e.y,0)}.bind(this),20)},stopScroll:function(){this.clearDelayed("pressedTimeout");var t=this.hasPeriodical("scrollTimer");return this.clearPeriodical("scrollTimer"),this.scroller.dragScrolling&&(this.scroller.dragScrolling=!1),t},onRefresh:function(){this.setDelayed("onRefresh",this.onRefreshNoDelay.bind(this),50)},onRefreshNoDelay:function(){if(this.isInjected()){var t,e=this.isVertical()?"y":"x",n=this.scroller.maxScroll[e];this.elements.container.hasAttribute("overflow")||this._updateOverflowStatus(),this._updateOverflowStatus(),this.scroller.dispatchEvent("onRefresh"),t=Math.abs(n)-Math.abs(this.scroller.maxScroll[e]),this.dispatchEvent("onScrollerResize",[{deltaScroll:t}]),this.updateScrollButtonsDisabledState()}},updateScrollButtonsDisabledState:function(){var t,e,n=this,i=n.elements,s=n.isVertical()?"y":"x";[i.nextButton,i.previousButton].forEach(function(o,a){o&&(t=n.scroller.isMaxPosition(s,!1,2*a-1),o.toggleClassName("disabled",t),e="max-scroll-"+o.getAttribute("data-scroll"),t?i.container.setAttribute(e,"true"):i.container.removeAttribute(e))})},hasOverflow:function(){return"true"===this.elements.container.getAttribute("overflow")},isVertical:function(){return"vertical"===this.options.orientation},getItems:function(){return this.element.getElements(this.options.itemSelector)},isInjected:function(){return!0!==this.injected&&(this.injected=this.elements.container&&this.elements.container.isInjected()),this.injected},getScrollButtonFromEvent:function(e){return t.Event.getElement(e).getClosest("."+this.options.scrollButtonClassName)},_createScrollButton:function(e){var n=this.options,i=e+"Button",s=!1;return!1!==n[i]&&(s=t.is(n[i],"function")?n[i](this.elements.container):t.is(n[i],"element")?n[i]:t.createElement("a",{class:n.scrollButtonClassName+" "+n.scrollButtonClassName+"-"+e}).grab(t.createElement("span")).inject(this.elements.container),s=t.extendElement(s)),s},_updateOverflowStatus:function(){var t=this.isVertical()?"y":"x",e=this.scroller.hasOverflow(t);this.elements.container.setAttribute("overflow",String(e)),this.scroller.setOptions({preventDefaultMouseWheel:e})}});return t.namespace("Controls/Carousel",r,t)}.apply(e,i))||(t.exports=s)},function(t,e,n){"use strict";var i,s;i=[n(17),n(6)],void 0===(s=function(t,e){function n(){var n,o,a,r;n=i(),o=n?"expand":"collapse",a=n?1:0,(r=t.getByTab().map(function(t){return t[o]("nosave"),t.getId()})).length>0&&e.saveUserPageCollapseExpand({status:a,moduleIds:r}).done(),s()}function i(){return t.getByTab().every(function(t){return!t.isExpanded()})}function s(){var t=document.body.getElement("#collapseExpand");if(t){var e=i(),n=t.getElement("img");n.toggleClassName("actions-window-expand",e).toggleClassName("actions-window-collapse",!e),t.rel=i?"expand":"collapse",n.title=n.alt=i?_("Collapse all"):_("Expand all")}}return{init:function(){var t=document.body.getElement("#collapseExpand");t&&t.addEvent("click",n)},update:s}}.apply(e,i))||(t.exports=s)},function(t,e,n){"use strict";var i,s;i=[n(1),n(103)],void 0===(s=function(t,e){var n,i=!1;return App.Modules=App.Modules||{},App.Modules.LazyLoad={loadAllTheThings:function(){this.getLoadableWidgets(!0).forEach(function(t){t.load()})},hasLoadableWidgets:function(){return document.body.getElements(".lazyLoadable").length>0},getLoadableWidgets:function(t){t=t||!1;var n=document.body.getElements(".lazyLoadable"),i=[];return n.forEach(function(n){(t||this.isVisible(n))&&i.push(e.fromElement(n))},this),i},isVisible:function(e){return n||(n=document.body.getElement("#sub-container")),(e=t.extendElement(e)).isInViewport(n,!0,!0)},loadModule:function(t){t.addEvent("onLoaded",function(){t.toggleLazyLoadStatus(!1)}),t.load()},run:function(){function t(){this.getLoadableWidgets().forEach(this.loadModule,this)}i&&this.stop(),i=setInterval(t.bind(this),1e3),t.call(this)},stop:function(){clearInterval(i),i=!1}},App.Modules.LazyLoad}.apply(e,i))||(t.exports=s)},function(t,e,n){(function(e){
/**
 * @license Highcharts JS v4.2.7 (2016-09-21)
 *
 * (c) 2009-2016 Torstein Honsi
 *
 * License: www.highcharts.com/license
 */var n,i;n="undefined"!=typeof window?window:this,i=function(t){var e,n,i,s,o,a,r,l,c,u,h,d,p,m,f,g,v,b,y,w,x,C,_,S,E,k,T=t.document,A=Math,I=A.round,N=A.floor,D=A.ceil,O=A.max,P=A.min,F=A.abs,M=A.cos,L=A.sin,R=A.PI,j=2*R/360,V=t.navigator&&t.navigator.userAgent||"",B=t.opera,z=/(msie|trident|edge)/i.test(V)&&!B,W=T&&8===T.documentMode,U=!z&&/AppleWebKit/.test(V),H=/Firefox/.test(V),q=/(Mobile|Android|Windows Phone)/.test(V),G="http://www.w3.org/2000/svg",Y=T&&T.createElementNS&&!!T.createElementNS(G,"svg").createSVGRect,X=H&&parseInt(V.split("Firefox/")[1],10)<4,K=T&&!Y&&!z&&!!T.createElement("canvas").getContext,J={},Q=0,$=function(){},Z=[],tt=0,et="div",nt="highcharts-",it="px",st="none",ot="M",at="L",rt=/[0-9]/g,lt=["plotTop","marginRight","marginBottom","plotLeft"],ct={};function ut(e,n){var i="Highcharts error #"+e+": www.highcharts.com/errors/"+e;if(n)throw new Error(i);t.console&&console.log(i)}(k=t.Highcharts?ut(16,!0):{win:t}).seriesTypes=ct;var ht,dt,pt,mt,ft,gt,vt,bt,yt,wt,xt,Ct=[];function _t(t,e,n){this.options=e,this.elem=t,this.prop=n}_t.prototype={dSetter:function(){var t,e=this.paths[0],n=this.paths[1],i=[],s=this.now,o=e.length;if(1===s)i=this.toD;else if(o===n.length&&s<1)for(;o--;)t=parseFloat(e[o]),i[o]=isNaN(t)?e[o]:s*parseFloat(n[o]-t)+t;else i=n;this.elem.attr("d",i)},update:function(){var t=this.elem,e=this.prop,n=this.now,i=this.options.step;this[e+"Setter"]?this[e+"Setter"]():t.attr?t.element&&t.attr(e,n):t.style[e]=n+this.unit,i&&i.call(t,n,this)},run:function(t,e,n){var i,s=this,o=function(t){return!o.stopped&&s.step(t)};this.startTime=+new c,this.start=t,this.end=e,this.unit=n,this.now=this.start,this.pos=0,o.elem=this.elem,o()&&1===Ct.push(o)&&(o.timerId=setInterval(function(){for(i=0;i<Ct.length;i++)Ct[i]()||Ct.splice(i--,1);Ct.length||clearInterval(o.timerId)},13))},step:function(t){var e,n,i,s=+new c,o=this.options,a=this.elem,r=o.complete,l=o.duration,u=o.curAnim;if(a.attr&&!a.element)e=!1;else if(t||s>=l+this.startTime){for(i in this.now=this.end,this.pos=1,this.update(),u[this.prop]=!0,n=!0,u)!0!==u[i]&&(n=!1);n&&r&&r.call(a),e=!1}else this.pos=o.easing((s-this.startTime)/l),this.now=this.start+(this.end-this.start)*this.pos,this.update(),e=!0;return e},initPath:function(t,e,n){e=e||"";var i,s,o,a,r,l=t.startX,c=t.endX,u=e.indexOf("C")>-1,h=u?7:3,d=e.split(" "),p=n.slice(),m=t.isArea,f=m?2:1;function g(t){for(a=t.length;a--;)t[a]!==ot&&t[a]!==at||t.splice(a+1,0,t[a+1],t[a+2],t[a+1],t[a+2])}function v(t,e,n){[].splice.apply(t,[n,0].concat(e))}function b(t,e){for(;t.length<s;)t[0]=e[s-t.length],v(t,t.slice(0,h),0),m&&(v(t,t.slice(t.length-h),t.length),a--);t[0]="M"}function y(t,e){for(var n=(s-t.length)/h;n>0&&n--;)(o=t.slice().splice(t.length/f-h,h*f))[0]=e[s-h-n*h],u&&(o[h-6]=o[h-2],o[h-5]=o[h-1]),v(t,o,t.length/f),m&&n--}if(u&&(g(d),g(p)),l&&c){for(a=0;a<l.length;a++){if(l[a]===c[0]){i=a;break}if(l[0]===c[c.length-l.length+a]){i=a,r=!0;break}}void 0===i&&(d=[])}return d.length&&k.isNumber(i)&&(s=p.length+i*f*h,r?(b(d,p),y(p,d)):(b(p,d),y(d,p))),[d,p]}};var St=k.extend=function(t,e){var n;for(n in t||(t={}),e)t[n]=e[n];return t};function Et(){var t,e,n=arguments,i={},s=function(t,e){var n,i;for(i in"object"!=typeof t&&(t={}),e)e.hasOwnProperty(i)&&(n=e[i],k.isObject(n,!0)&&"renderTo"!==i&&"number"!=typeof n.nodeType?t[i]=s(t[i]||{},n):t[i]=e[i]);return t};for(!0===n[0]&&(i=n[1],n=Array.prototype.slice.call(n,2)),e=n.length,t=0;t<e;t++)i=s(i,n[t]);return i}function kt(t,e){return parseInt(t,e||10)}function Tt(t){return"string"==typeof t}function At(t){var e=Object.prototype.toString.call(t);return"[object Array]"===e||"[object Array Iterator]"===e}var It=k.isObject=function(t,e){return t&&"object"==typeof t&&(!e||!At(t))},Nt=k.isNumber=function(t){return"number"==typeof t&&!isNaN(t)};function Dt(t,e){for(var n=t.length;n--;)if(t[n]===e){t.splice(n,1);break}}function Ot(t){return t!==e&&null!==t}function Pt(t,e,n){var i,s;if(Tt(e))Ot(n)?t.setAttribute(e,n):t&&t.getAttribute&&(s=t.getAttribute(e));else if(Ot(e)&&It(e))for(i in e)t.setAttribute(i,e[i]);return s}function Ft(t){return At(t)?t:[t]}function Mt(t,e,n){if(e)return setTimeout(t,e,n);t.call(0,n)}var Lt=k.pick=function(){var t,n,i=arguments,s=i.length;for(t=0;t<s;t++)if((n=i[t])!==e&&null!==n)return n};function Rt(t,n){z&&!Y&&n&&n.opacity!==e&&(n.filter="alpha(opacity="+100*n.opacity+")"),St(t.style,n)}function jt(t,e,n,i,s){var o=T.createElement(t);return e&&St(o,e),s&&Rt(o,{padding:0,border:"none",margin:0}),n&&Rt(o,n),i&&i.appendChild(o),o}function Vt(t,e){var n=function(){};return n.prototype=new t,St(n.prototype,e),n}function Bt(t,e,n){return new Array((e||2)+1-String(t).length).join(n||0)+t}function zt(t,e){return/%$/.test(t)?e*parseFloat(t)/100:parseFloat(t)}var Wt=k.wrap=function(t,e,n){var i=t[e];t[e]=function(){var t=Array.prototype.slice.call(arguments);return t.unshift(i),n.apply(this,t)}};function Ut(t){return 6e4*(d&&d(t)||h||0)}function Ht(t,e){var n,i=o.lang;return/f$/.test(t)?(n=(n=t.match(/\.([0-9])/))?n[1]:-1,null!==e&&(e=k.numberFormat(e,n,i.decimalPoint,t.indexOf(",")>-1?i.thousandsSep:""))):e=a(t,e),e}function qt(t,e){for(var n,i,s,o,a,r,l,c="{",u=!1,h=[];-1!==(l=t.indexOf(c));){if(n=t.slice(0,l),u){for(a=(s=(i=n.split(":")).shift().split(".")).length,r=e,o=0;o<a;o++)r=r[s[o]];i.length&&(r=Ht(i.join(":"),r)),h.push(r)}else h.push(n);t=t.slice(l+1),c=(u=!u)?"}":"{"}return h.push(t),h.join("")}function Gt(t){return A.pow(10,N(A.log(t)/A.LN10))}function Yt(t,e,n,i,s){var o,a,r=t;for(o=t/(n=Lt(n,1)),e||(e=[1,2,2.5,5,10],!1===i&&(1===n?e=[1,2,5,10]:n<=.1&&(e=[1/n]))),a=0;a<e.length&&(r=e[a],!(s&&r*n>=t||!s&&o<=(e[a]+(e[a+1]||e[a]))/2));a++);return r*=n}function Xt(t,e){var n,i,s=t.length;for(i=0;i<s;i++)t[i].safeI=i;for(t.sort(function(t,i){return 0===(n=e(t,i))?t.safeI-i.safeI:n}),i=0;i<s;i++)delete t[i].safeI}function Kt(t){for(var e=t.length,n=t[0];e--;)t[e]<n&&(n=t[e]);return n}function Jt(t){for(var e=t.length,n=t[0];e--;)t[e]>n&&(n=t[e]);return n}function Qt(t,e){var n;for(n in t)t[n]&&t[n]!==e&&t[n].destroy&&t[n].destroy(),delete t[n]}function $t(t){s||(s=jt(et)),t&&s.appendChild(t),s.innerHTML=""}function Zt(t,e){return parseFloat(t.toPrecision(e||14))}function te(t,e){e.renderer.globalAnimation=Lt(t,e.animation)}function ee(t){return It(t)?Et(t):{duration:t?500:0}}function ne(){var e=o.global,n=e.useUTC,i=n?"getUTC":"get",s=n?"setUTC":"set";c=e.Date||t.Date,h=n&&e.timezoneOffset,d=n&&e.getTimezoneOffset,u=function(t,e,i,s,o,a){var r;return n?(r=c.UTC.apply(0,arguments),r+=Ut(r)):r=new c(t,e,Lt(i,1),Lt(s,0),Lt(o,0),Lt(a,0)).getTime(),r},p=i+"Minutes",m=i+"Hours",f=i+"Day",g=i+"Date",v=i+"Month",b=i+"FullYear",y=s+"Milliseconds",w=s+"Seconds",x=s+"Minutes",C=s+"Hours",_=s+"Date",S=s+"Month",E=s+"FullYear"}a=function(t,e,n){if(!Ot(e)||isNaN(e))return o.lang.invalidDate||"";t=Lt(t,"%Y-%m-%d %H:%M:%S");var i,s=new c(e-Ut(e)),a=s[m](),r=s[f](),l=s[g](),u=s[v](),h=s[b](),d=o.lang,y=d.weekdays,w=d.shortWeekdays,x=St({a:w?w[r]:y[r].substr(0,3),A:y[r],d:Bt(l),e:Bt(l,2," "),w:r,b:d.shortMonths[u],B:d.months[u],m:Bt(u+1),y:h.toString().substr(2,2),Y:h,H:Bt(a),k:a,I:Bt(a%12||12),l:a%12||12,M:Bt(s[p]()),p:a<12?"AM":"PM",P:a<12?"am":"pm",S:Bt(s.getSeconds()),L:Bt(I(e%1e3),3)},k.dateFormats);for(i in x)for(;-1!==t.indexOf("%"+i);)t=t.replace("%"+i,"function"==typeof x[i]?x[i](e):x[i]);return n?t.substr(0,1).toUpperCase()+t.substr(1):t},r={millisecond:1,second:1e3,minute:6e4,hour:36e5,day:864e5,week:6048e5,month:24192e5,year:314496e5},k.numberFormat=function(t,e,n,i){t=+t||0,e=+e;var s,a,r,l=o.lang,c=(t.toString().split(".")[1]||"").length,u=Math.abs(t);return-1===e?e=Math.min(c,20):Nt(e)||(e=2),a=(s=String(kt(u.toFixed(e)))).length>3?s.length%3:0,n=Lt(n,l.decimalPoint),i=Lt(i,l.thousandsSep),r=t<0?"-":"",r+=a?s.substr(0,a)+i:"",r+=s.substr(a).replace(/(\d{3})(?=\d)/g,"$1"+i),e&&(r+=n+Math.abs(u-s+Math.pow(10,-Math.max(e,c)-1)).toFixed(e).slice(2)),r},Math.easeInOutSine=function(t){return-.5*(Math.cos(Math.PI*t)-1)},ht=function(e,n){var i;return"width"===n?Math.min(e.offsetWidth,e.scrollWidth)-ht(e,"padding-left")-ht(e,"padding-right"):"height"===n?Math.min(e.offsetHeight,e.scrollHeight)-ht(e,"padding-top")-ht(e,"padding-bottom"):(i=t.getComputedStyle(e,void 0))&&kt(i.getPropertyValue(n))},dt=function(t,e){return e.indexOf?e.indexOf(t):[].indexOf.call(e,t)},mt=function(t,e){return[].filter.call(t,e)},gt=function(t,e){for(var n=[],i=0,s=t.length;i<s;i++)n[i]=e.call(t[i],t[i],i,t);return n},ft=function(e){var n=T.documentElement,i=e.getBoundingClientRect();return{top:i.top+(t.pageYOffset||n.scrollTop)-(n.clientTop||0),left:i.left+(t.pageXOffset||n.scrollLeft)-(n.clientLeft||0)}},xt=function(t){for(var e=Ct.length;e--;)Ct[e].elem===t&&(Ct[e].stopped=!0)},pt=function(t,e){return Array.prototype.forEach.call(t,e)},vt=function(e,n,i){var s=e.hcEvents=e.hcEvents||{};function o(n){n.target=n.srcElement||t,i.call(e,n)}e.addEventListener?e.addEventListener(n,i,!1):e.attachEvent&&(e.hcEventsIE||(e.hcEventsIE={}),e.hcEventsIE[i.toString()]=o,e.attachEvent("on"+n,o)),s[n]||(s[n]=[]),s[n].push(i)},bt=function(t,e,n){var i,s,o=t.hcEvents;function a(e,n){t.removeEventListener?t.removeEventListener(e,n,!1):t.attachEvent&&(n=t.hcEventsIE[n.toString()],t.detachEvent("on"+e,n))}function r(){var n,i,s;if(t.nodeName)for(s in e?(n={})[e]=!0:n=o,n)if(o[s])for(i=o[s].length;i--;)a(s,o[s][i])}o&&(e?(i=o[e]||[],n?((s=dt(n,i))>-1&&(i.splice(s,1),o[e]=i),a(e,n)):(r(),o[e]=[])):(r(),t.hcEvents={}))},yt=function(t,e,n,i){var s,o,a,r,l,c=t.hcEvents;if(n=n||{},T.createEvent&&(t.dispatchEvent||t.fireEvent))(s=T.createEvent("Events")).initEvent(e,!0,!0),s.target=t,St(s,n),t.dispatchEvent?t.dispatchEvent(s):t.fireEvent(e,s);else if(c)for(a=(o=c[e]||[]).length,n.preventDefault||(n.preventDefault=function(){n.defaultPrevented=!0}),n.target=t,n.type||(n.type=e),r=0;r<a;r++)(l=o[r])&&!1===l.call(t,n)&&n.preventDefault();i&&!n.defaultPrevented&&i(n)},wt=function(t,e,n){var i,s,o,a,r,l="";for(r in It(n)||(n={duration:(a=arguments)[2],easing:a[3],complete:a[4]}),Nt(n.duration)||(n.duration=400),n.easing="function"==typeof n.easing?n.easing:Math[n.easing]||Math.easeInOutSine,n.curAnim=Et(e),e)o=new _t(t,n,r),s=null,"d"===r?(o.paths=o.initPath(t,t.d,e.d),o.toD=e.d,i=0,s=1):t.attr?i=t.attr(r):(i=parseFloat(ht(t,r))||0,"opacity"!==r&&(l="px")),s||(s=e[r]),s.match&&s.match("px")&&(s=s.replace(/px/g,"")),o.run(i,s,l)},t.jQuery&&(t.jQuery.fn.highcharts=function(){var t=[].slice.call(arguments);if(this[0])return t[0]?(new(k[Tt(t[0])?t.shift():"Chart"])(this[0],t[0],t[1]),this):Z[Pt(this[0],"data-highcharts-chart")]}),T&&!T.defaultView&&(ht=function(t,e){var n,i={width:"clientWidth",height:"clientHeight"}[e];return t.style[e]?kt(t.style[e]):("opacity"===e&&(e="filter"),i?(t.style.zoom=1,Math.max(t[i]-2*ht(t,"padding"),0)):(n=t.currentStyle[e.replace(/\-(\w)/g,function(t,e){return e.toUpperCase()})],"filter"===e&&(n=n.replace(/alpha\(opacity=([0-9]+)\)/,function(t,e){return e/100})),""===n?1:kt(n)))}),Array.prototype.forEach||(pt=function(t,e){for(var n=0,i=t.length;n<i;n++)if(!1===e.call(t[n],t[n],n,t))return n}),Array.prototype.indexOf||(dt=function(t,e){var n,i=0;if(e)for(n=e.length;i<n;i++)if(e[i]===t)return i;return-1}),Array.prototype.filter||(mt=function(t,e){for(var n=[],i=0,s=t.length;i<s;i++)e(t[i],i)&&n.push(t[i]);return n}),k.Fx=_t,k.inArray=dt,k.each=pt,k.grep=mt,k.offset=ft,k.map=gt,k.addEvent=vt,k.removeEvent=bt,k.fireEvent=yt,k.animate=wt,k.animObject=ee,k.stop=xt;var ie=(o={colors:["#7cb5ec","#434348","#90ed7d","#f7a35c","#8085e9","#f15c80","#e4d354","#2b908f","#f45b5b","#91e8e1"],symbols:["circle","diamond","square","triangle","triangle-down"],lang:{loading:"Loading...",months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],weekdays:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],decimalPoint:".",numericSymbols:["k","M","G","T","P","E"],resetZoom:"Reset zoom",resetZoomTitle:"Reset zoom level 1:1",thousandsSep:" "},global:{useUTC:!0,canvasToolsURL:"http://code.highcharts.com/modules/canvas-tools.js",VMLRadialGradientURL:"http://code.highcharts.com/4.2.7/gfx/vml-radial-gradient.png"},chart:{borderColor:"#4572A7",borderRadius:0,defaultSeriesType:"line",ignoreHiddenSeries:!0,spacing:[10,10,15,10],backgroundColor:"#FFFFFF",plotBorderColor:"#C0C0C0",resetZoomButton:{theme:{zIndex:20},position:{align:"right",x:-10,y:10}},width:null,height:null},title:{text:"Chart title",align:"center",margin:15,style:{color:"#333333",fontSize:"18px"},widthAdjust:-44},subtitle:{text:"",align:"center",style:{color:"#555555"},widthAdjust:-44},plotOptions:{line:{allowPointSelect:!1,showCheckbox:!1,animation:{duration:1e3},events:{},lineWidth:2,marker:{lineWidth:0,radius:4,lineColor:"#FFFFFF",states:{hover:{enabled:!0,lineWidthPlus:1,radiusPlus:2},select:{fillColor:"#FFFFFF",lineColor:"#000000",lineWidth:2}}},point:{events:{}},dataLabels:{align:"center",formatter:function(){return null===this.y?"":k.numberFormat(this.y,-1)},style:{color:"contrast",fontSize:"11px",fontWeight:"bold",textShadow:"0 0 6px contrast, 0 0 3px contrast"},verticalAlign:"bottom",x:0,y:0,padding:5},cropThreshold:300,pointRange:0,softThreshold:!0,states:{hover:{lineWidthPlus:1,marker:{},halo:{size:10,opacity:.25}},select:{marker:{}}},stickyTracking:!0,turboThreshold:1e3}},labels:{style:{position:"absolute",color:"#3E576F"}},legend:{enabled:!0,align:"center",layout:"horizontal",labelFormatter:function(){return this.name},borderColor:"#909090",borderRadius:0,navigation:{activeColor:"#274b6d",inactiveColor:"#CCC"},shadow:!1,itemStyle:{color:"#333333",fontSize:"12px",fontWeight:"bold"},itemHoverStyle:{color:"#000"},itemHiddenStyle:{color:"#CCC"},itemCheckboxStyle:{position:"absolute",width:"13px",height:"13px"},symbolPadding:5,verticalAlign:"bottom",x:0,y:0,title:{style:{fontWeight:"bold"}}},loading:{labelStyle:{fontWeight:"bold",position:"relative",top:"45%"},style:{position:"absolute",backgroundColor:"white",opacity:.5,textAlign:"center"}},tooltip:{enabled:!0,animation:Y,backgroundColor:"rgba(249, 249, 249, .85)",borderWidth:1,borderRadius:3,dateTimeLabelFormats:{millisecond:"%A, %b %e, %H:%M:%S.%L",second:"%A, %b %e, %H:%M:%S",minute:"%A, %b %e, %H:%M",hour:"%A, %b %e, %H:%M",day:"%A, %b %e, %Y",week:"Week from %A, %b %e, %Y",month:"%B %Y",year:"%Y"},footerFormat:"",headerFormat:'<span style="font-size: 10px">{point.key}</span><br/>',pointFormat:'<span style="color:{point.color}">●</span> {series.name}: <b>{point.y}</b><br/>',shadow:!0,snap:q?25:10,style:{color:"#333333",cursor:"default",fontSize:"12px",padding:"8px",pointerEvents:"none",whiteSpace:"nowrap"}},credits:{enabled:!0,text:"Highcharts.com",href:"http://www.highcharts.com",position:{align:"right",x:-10,verticalAlign:"bottom",y:-5},style:{cursor:"pointer",color:"#909090",fontSize:"9px"}}}).plotOptions,se=ie.line;function oe(t){if(!(this instanceof oe))return new oe(t);this.init(t)}function ae(){}ne(),oe.prototype={parsers:[{regex:/rgba\(\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*,\s*([0-9]?(?:\.[0-9]+)?)\s*\)/,parse:function(t){return[kt(t[1]),kt(t[2]),kt(t[3]),parseFloat(t[4],10)]}},{regex:/#([a-fA-F0-9]{2})([a-fA-F0-9]{2})([a-fA-F0-9]{2})/,parse:function(t){return[kt(t[1],16),kt(t[2],16),kt(t[3],16),1]}},{regex:/rgb\(\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*\)/,parse:function(t){return[kt(t[1]),kt(t[2]),kt(t[3]),1]}}],init:function(t){var e,n,i,s;if(this.input=t,t&&t.stops)this.stops=gt(t.stops,function(t){return new oe(t[1])});else for(i=this.parsers.length;i--&&!n;)(e=(s=this.parsers[i]).regex.exec(t))&&(n=s.parse(e));this.rgba=n||[]},get:function(t){var e,n=this.input,i=this.rgba;return this.stops?((e=Et(n)).stops=[].concat(e.stops),pt(this.stops,function(n,i){e.stops[i]=[e.stops[i][0],n.get(t)]})):e=i&&Nt(i[0])?"rgb"===t||!t&&1===i[3]?"rgb("+i[0]+","+i[1]+","+i[2]+")":"a"===t?i[3]:"rgba("+i.join(",")+")":n,e},brighten:function(t){var e,n=this.rgba;if(this.stops)pt(this.stops,function(e){e.brighten(t)});else if(Nt(t)&&0!==t)for(e=0;e<3;e++)n[e]+=kt(255*t),n[e]<0&&(n[e]=0),n[e]>255&&(n[e]=255);return this},setOpacity:function(t){return this.rgba[3]=t,this}},ae.prototype={opacity:1,textProps:["direction","fontSize","fontWeight","fontFamily","fontStyle","color","lineHeight","width","textDecoration","textOverflow","textShadow"],init:function(t,e){this.element="span"===e?jt(e):T.createElementNS(G,e),this.renderer=t},animate:function(t,e,n){var i=Lt(e,this.renderer.globalAnimation,!0);return xt(this),i?(n&&(i.complete=n),wt(this,t,i)):this.attr(t,null,n),this},colorGradient:function(t,e,n){var i,s,o,a,r,l,c,u,h,d,p,m,f,g=this.renderer,v=[];if(t.linearGradient?s="linearGradient":t.radialGradient&&(s="radialGradient"),s){for(p in o=t[s],r=g.gradients,c=t.stops,d=n.radialReference,At(o)&&(t[s]=o={x1:o[0],y1:o[1],x2:o[2],y2:o[3],gradientUnits:"userSpaceOnUse"}),"radialGradient"===s&&d&&!Ot(o.gradientUnits)&&(a=o,o=Et(o,g.getRadialAttr(d,a),{gradientUnits:"userSpaceOnUse"})),o)"id"!==p&&v.push(p,o[p]);for(p in c)v.push(c[p]);r[v=v.join(",")]?m=r[v].attr("id"):(o.id=m=nt+Q++,r[v]=l=g.createElement(s).attr(o).add(g.defs),l.radAttr=a,l.stops=[],pt(c,function(t){var e;0===t[1].indexOf("rgba")?(i=oe(t[1]),u=i.get("rgb"),h=i.get("a")):(u=t[1],h=1),e=g.createElement("stop").attr({offset:t[0],"stop-color":u,"stop-opacity":h}).add(l),l.stops.push(e)})),f="url("+g.url+"#"+m+")",n.setAttribute(e,f),n.gradient=v,t.toString=function(){return f}}},applyTextShadow:function(t){var n,i=this.element,s=-1!==t.indexOf("contrast"),o={},a=this.renderer.forExport,r=a||i.style.textShadow!==e&&!z;s&&(o.textShadow=t=t.replace(/contrast/g,this.renderer.getContrast(i.style.fill))),(U||a)&&(o.textRendering="geometricPrecision"),r?this.css(o):(this.fakeTS=!0,this.ySetter=this.xSetter,n=[].slice.call(i.getElementsByTagName("tspan")),pt(t.split(/\s?,\s?/g),function(t){var e,s,o=i.firstChild;t=t.split(" "),e=t[t.length-1],(s=t[t.length-2])&&pt(n,function(t,n){var a;0===n&&(t.setAttribute("x",i.getAttribute("x")),n=i.getAttribute("y"),t.setAttribute("y",n||0),null===n&&i.setAttribute("y",0)),Pt(a=t.cloneNode(1),{class:nt+"text-shadow",fill:e,stroke:e,"stroke-opacity":1/O(kt(s),3),"stroke-width":s,"stroke-linejoin":"round"}),i.insertBefore(a,o)})}))},attr:function(t,n,i){var s,o,a,r,l,c=this.element,u=this;if("string"==typeof t&&n!==e&&(s=t,(t={})[s]=n),"string"==typeof t)u=(this[t+"Getter"]||this._defaultGetter).call(this,t,c);else{for(s in t)o=t[s],r=!1,this.symbolName&&/^(x|y|width|height|r|start|end|innerR|anchorX|anchorY)/.test(s)&&(a||(this.symbolAttr(t),a=!0),r=!0),!this.rotation||"x"!==s&&"y"!==s||(this.doTransform=!0),r||((l=this[s+"Setter"]||this._defaultSetter).call(this,o,s,c),this.shadows&&/^(width|height|visibility|x|y|d|transform|cx|cy|r)$/.test(s)&&this.updateShadows(s,o,l));this.doTransform&&(this.updateTransform(),this.doTransform=!1)}return i&&i(),u},updateShadows:function(t,e,n){for(var i=this.shadows,s=i.length;s--;)n.call(i[s],"height"===t?Math.max(e-(i[s].cutHeight||0),0):"d"===t?this.d:e,t,i[s])},addClass:function(t){var e=this.element,n=Pt(e,"class")||"";return-1===n.indexOf(t)&&Pt(e,"class",n+" "+t),this},symbolAttr:function(t){var e=this;pt(["x","y","r","start","end","width","height","innerR","anchorX","anchorY"],function(n){e[n]=Lt(t[n],e[n])}),e.attr({d:e.renderer.symbols[e.symbolName](e.x,e.y,e.width,e.height,e)})},clip:function(t){return this.attr("clip-path",t?"url("+this.renderer.url+"#"+t.id+")":st)},crisp:function(t){var e,n,i={},s=this.strokeWidth||0;for(e in n=I(s)%2/2,t.x=N(t.x||this.x||0)+n,t.y=N(t.y||this.y||0)+n,t.width=N((t.width||this.width||0)-2*n),t.height=N((t.height||this.height||0)-2*n),t.strokeWidth=s,t)this[e]!==t[e]&&(this[e]=i[e]=t[e]);return i},css:function(t){var e,n,i,s=this.styles,o={},a=this.element,r="",l=!s;if(t&&t.color&&(t.fill=t.color),s)for(n in t)t[n]!==s[n]&&(o[n]=t[n],l=!0);if(l){if(e=this.textWidth=t&&t.width&&"text"===a.nodeName.toLowerCase()&&kt(t.width)||this.textWidth,s&&(t=St(s,o)),this.styles=t,e&&(K||!Y&&this.renderer.forExport)&&delete t.width,z&&!Y)Rt(this.element,t);else{for(n in i=function(t,e){return"-"+e.toLowerCase()},t)r+=n.replace(/([A-Z])/g,i)+":"+t[n]+";";Pt(a,"style",r)}e&&this.added&&this.renderer.buildText(this)}return this},on:function(t,e){var n=this,s=n.element;return i&&"click"===t?(s.ontouchstart=function(t){n.touchEventFired=c.now(),t.preventDefault(),e.call(s,t)},s.onclick=function(t){(-1===V.indexOf("Android")||c.now()-(n.touchEventFired||0)>1100)&&e.call(s,t)}):s["on"+t]=e,this},setRadialReference:function(t){var e=this.renderer.gradients[this.element.gradient];return this.element.radialReference=t,e&&e.radAttr&&e.animate(this.renderer.getRadialAttr(t,e.radAttr)),this},translate:function(t,e){return this.attr({translateX:t,translateY:e})},invert:function(){return this.inverted=!0,this.updateTransform(),this},updateTransform:function(){var t,e=this.translateX||0,n=this.translateY||0,i=this.scaleX,s=this.scaleY,o=this.inverted,a=this.rotation,r=this.element;o&&(e+=this.attr("width"),n+=this.attr("height")),t=["translate("+e+","+n+")"],o?t.push("rotate(90) scale(-1,1)"):a&&t.push("rotate("+a+" "+(r.getAttribute("x")||0)+" "+(r.getAttribute("y")||0)+")"),(Ot(i)||Ot(s))&&t.push("scale("+Lt(i,1)+" "+Lt(s,1)+")"),t.length&&r.setAttribute("transform",t.join(" "))},toFront:function(){var t=this.element;return t.parentNode.appendChild(t),this},align:function(t,e,n){var i,s,o,a,r,l={},c=this.renderer,u=c.alignedObjects;return t?(this.alignOptions=t,this.alignByTranslate=e,n&&!Tt(n)||(this.alignTo=r=n||"renderer",Dt(u,this),u.push(this),n=null)):(t=this.alignOptions,e=this.alignByTranslate,r=this.alignTo),n=Lt(n,c[r],c),i=t.align,s=t.verticalAlign,o=(n.x||0)+(t.x||0),a=(n.y||0)+(t.y||0),"right"!==i&&"center"!==i||(o+=(n.width-(t.width||0))/{right:1,center:2}[i]),l[e?"translateX":"x"]=I(o),"bottom"!==s&&"middle"!==s||(a+=(n.height-(t.height||0))/({bottom:1,middle:2}[s]||1)),l[e?"translateY":"y"]=I(a),this[this.placed?"animate":"attr"](l),this.placed=!0,this.alignAttr=l,this},getBBox:function(t,n){var i,s,o,a,r,l,c,u,h=this.renderer,d=this.element,p=this.styles,m=this.textStr,f=d.style,g=h.cache,v=h.cacheKeys;if(r=(a=Lt(n,this.rotation))*j,m!==e&&(u=m.toString().replace(rt,"0")+["",a||0,p&&p.fontSize,d.style.width].join(",")),u&&!t&&(i=g[u]),!i){if(d.namespaceURI===G||h.forExport){try{c=this.fakeTS&&function(t){pt(d.querySelectorAll("."+nt+"text-shadow"),function(e){e.style.display=t})},H&&f.textShadow?(l=f.textShadow,f.textShadow=""):c&&c(st),i=d.getBBox?St({},d.getBBox()):{width:d.offsetWidth,height:d.offsetHeight},l?f.textShadow=l:c&&c("")}catch(t){}(!i||i.width<0)&&(i={width:0,height:0})}else i=this.htmlGetBBox();if(h.isSVG&&(s=i.width,o=i.height,z&&p&&"11px"===p.fontSize&&"16.9"===o.toPrecision(3)&&(i.height=o=14),a&&(i.width=F(o*L(r))+F(s*M(r)),i.height=F(o*M(r))+F(s*L(r)))),u&&i.height>0){for(;v.length>250;)delete g[v.shift()];g[u]||v.push(u),g[u]=i}}return i},show:function(t){return this.attr({visibility:t?"inherit":"visible"})},hide:function(){return this.attr({visibility:"hidden"})},fadeOut:function(t){var e=this;e.animate({opacity:0},{duration:t||150,complete:function(){e.attr({y:-9999})}})},add:function(t){var e,n=this.renderer,i=this.element;return t&&(this.parentGroup=t),this.parentInverted=t&&t.inverted,void 0!==this.textStr&&n.buildText(this),this.added=!0,(!t||t.handleZ||this.zIndex)&&(e=this.zIndexSetter()),e||(t?t.element:n.box).appendChild(i),this.onAdd&&this.onAdd(),this},safeRemoveChild:function(t){var e=t.parentNode;e&&e.removeChild(t)},destroy:function(){var t,e,n,i=this,s=i.element||{},o=i.shadows,a=i.renderer.isSVG&&"SPAN"===s.nodeName&&i.parentGroup;if(s.onclick=s.onmouseout=s.onmouseover=s.onmousemove=s.point=null,xt(i),i.clipPath&&(i.clipPath=i.clipPath.destroy()),i.stops){for(n=0;n<i.stops.length;n++)i.stops[n]=i.stops[n].destroy();i.stops=null}for(i.safeRemoveChild(s),o&&pt(o,function(t){i.safeRemoveChild(t)});a&&a.div&&0===a.div.childNodes.length;)t=a.parentGroup,i.safeRemoveChild(a.div),delete a.div,a=t;for(e in i.alignTo&&Dt(i.renderer.alignedObjects,i),i)delete i[e];return null},shadow:function(t,e,n){var i,s,o,a,r,l,c=[],u=this.element;if(t){for(a=Lt(t.width,3),r=(t.opacity||.15)/a,l=this.parentInverted?"(-1,-1)":"("+Lt(t.offsetX,1)+", "+Lt(t.offsetY,1)+")",i=1;i<=a;i++)o=2*a+1-2*i,Pt(s=u.cloneNode(0),{isShadow:"true",stroke:t.color||"black","stroke-opacity":r*i,"stroke-width":o,transform:"translate"+l,fill:st}),n&&(Pt(s,"height",O(Pt(s,"height")-o,0)),s.cutHeight=o),e?e.element.appendChild(s):u.parentNode.insertBefore(s,u),c.push(s);this.shadows=c}return this},xGetter:function(t){return"circle"===this.element.nodeName&&(t={x:"cx",y:"cy"}[t]||t),this._defaultGetter(t)},_defaultGetter:function(t){var e=Lt(this[t],this.element?this.element.getAttribute(t):null,0);return/^[\-0-9\.]+$/.test(e)&&(e=parseFloat(e)),e},dSetter:function(t,e,n){t&&t.join&&(t=t.join(" ")),/(NaN| {2}|^$)/.test(t)&&(t="M 0 0"),n.setAttribute(e,t),this[e]=t},dashstyleSetter:function(t){var e,n=this["stroke-width"];if("inherit"===n&&(n=1),t=t&&t.toLowerCase()){for(e=(t=t.replace("shortdashdotdot","3,1,1,1,1,1,").replace("shortdashdot","3,1,1,1").replace("shortdot","1,1,").replace("shortdash","3,1,").replace("longdash","8,3,").replace(/dot/g,"1,3,").replace("dash","4,3,").replace(/,$/,"").split(",")).length;e--;)t[e]=kt(t[e])*n;t=t.join(",").replace(/NaN/g,"none"),this.element.setAttribute("stroke-dasharray",t)}},alignSetter:function(t){this.element.setAttribute("text-anchor",{left:"start",center:"middle",right:"end"}[t])},titleSetter:function(t){var e=this.element.getElementsByTagName("title")[0];e||(e=T.createElementNS(G,"title"),this.element.appendChild(e)),e.firstChild&&e.removeChild(e.firstChild),e.appendChild(T.createTextNode(String(Lt(t),"").replace(/<[^>]*>/g,"")))},textSetter:function(t){t!==this.textStr&&(delete this.bBox,this.textStr=t,this.added&&this.renderer.buildText(this))},fillSetter:function(t,e,n){"string"==typeof t?n.setAttribute(e,t):t&&this.colorGradient(t,e,n)},visibilitySetter:function(t,e,n){"inherit"===t?n.removeAttribute(e):n.setAttribute(e,t)},zIndexSetter:function(t,e){var n,i,s,o,a,r=this.renderer,l=this.parentGroup,c=(l||r).element||r.box,u=this.element,h=this.added;if(Ot(t)&&(u.zIndex=t,t=+t,this[e]===t&&(h=!1),this[e]=t),h){for((t=this.zIndex)&&l&&(l.handleZ=!0),n=c.childNodes,a=0;a<n.length&&!o;a++)s=(i=n[a]).zIndex,i!==u&&(kt(s)>t||!Ot(t)&&Ot(s))&&(c.insertBefore(u,i),o=!0);o||c.appendChild(u)}return o},_defaultSetter:function(t,e,n){n.setAttribute(e,t)}},ae.prototype.yGetter=ae.prototype.xGetter,ae.prototype.translateXSetter=ae.prototype.translateYSetter=ae.prototype.rotationSetter=ae.prototype.verticalAlignSetter=ae.prototype.scaleXSetter=ae.prototype.scaleYSetter=function(t,e){this[e]=t,this.doTransform=!0},ae.prototype.opacitySetter=ae.prototype.displaySetter=function(t,e,n){this[e]=t,n.setAttribute(e,t)},ae.prototype["stroke-widthSetter"]=ae.prototype.strokeSetter=function(t,e,n){this[e]=t,this.stroke&&this["stroke-width"]?(this.strokeWidth=this["stroke-width"],ae.prototype.fillSetter.call(this,this.stroke,"stroke",n),n.setAttribute("stroke-width",this["stroke-width"]),this.hasStroke=!0):"stroke-width"===e&&0===t&&this.hasStroke&&(n.removeAttribute("stroke"),this.hasStroke=!1)};var re,le,ce,ue,he=function(){this.init.apply(this,arguments)};if(he.prototype={Element:ae,init:function(e,n,i,s,o,a){var r,l,c,u;l=(r=this.createElement("svg").attr({version:"1.1"}).css(this.getStyle(s))).element,e.appendChild(l),-1===e.innerHTML.indexOf("xmlns")&&Pt(l,"xmlns",G),this.isSVG=!0,this.box=l,this.boxWrapper=r,this.alignedObjects=[],this.url=(H||U)&&T.getElementsByTagName("base").length?t.location.href.replace(/#.*?$/,"").replace(/([\('\)])/g,"\\$1").replace(/ /g,"%20"):"",this.createElement("desc").add().element.appendChild(T.createTextNode("Created with Highcharts 4.2.7")),this.defs=this.createElement("defs").add(),this.allowHTML=a,this.forExport=o,this.gradients={},this.cache={},this.cacheKeys=[],this.imgCount=0,this.setSize(n,i,!1),H&&e.getBoundingClientRect&&(this.subPixelFix=c=function(){Rt(e,{left:0,top:0}),u=e.getBoundingClientRect(),Rt(e,{left:D(u.left)-u.left+it,top:D(u.top)-u.top+it})},c(),vt(t,"resize",c))},getStyle:function(t){return this.style=St({fontFamily:'"Lucida Grande", "Lucida Sans Unicode", Arial, Helvetica, sans-serif',fontSize:"12px"},t),this.style},isHidden:function(){return!this.boxWrapper.getBBox().width},destroy:function(){var e=this.defs;return this.box=null,this.boxWrapper=this.boxWrapper.destroy(),Qt(this.gradients||{}),this.gradients=null,e&&(this.defs=e.destroy()),this.subPixelFix&&bt(t,"resize",this.subPixelFix),this.alignedObjects=null,null},createElement:function(t){var e=new this.Element;return e.init(this,t),e},draw:function(){},getRadialAttr:function(t,e){return{cx:t[0]-t[2]/2+e.cx*t[2],cy:t[1]-t[2]/2+e.cy*t[2],r:e.r*t[2]}},buildText:function(t){for(var e,n,i,s,o=t.element,a=this,r=a.forExport,l=Lt(t.textStr,"").toString(),c=-1!==l.indexOf("<"),u=o.childNodes,h=Pt(o,"x"),d=t.styles,p=t.textWidth,m=d&&d.lineHeight,f=d&&d.textShadow,g=d&&"ellipsis"===d.textOverflow,v=u.length,b=p&&!t.added&&this.box,y=function(t){return m?kt(m):a.fontMetrics(/(px|em)$/.test(t&&t.style.fontSize)?t.style.fontSize:d&&d.fontSize||a.style.fontSize||12,t).h},w=function(t){return t.replace(/&lt;/g,"<").replace(/&gt;/g,">")};v--;)o.removeChild(u[v]);c||f||g||p||-1!==l.indexOf(" ")?(n=/<.*style="([^"]+)".*>/,i=/<.*href="(http[^"]+)".*>/,b&&b.appendChild(o),e=c?l.replace(/<(b|strong)>/g,'<span style="font-weight:bold">').replace(/<(i|em)>/g,'<span style="font-style:italic">').replace(/<a/g,"<span").replace(/<\/(b|strong|i|em|a)>/g,"</span>").split(/<br.*?>/g):[l],e=mt(e,function(t){return""!==t}),pt(e,function(e,l){var c,u=0;e=e.replace(/^\s+|\s+$/g,"").replace(/<span/g,"|||<span").replace(/<\/span>/g,"</span>|||"),c=e.split("|||"),pt(c,function(e){if(""!==e||1===c.length){var m,f={},v=T.createElementNS(G,"tspan");if(n.test(e)&&Pt(v,"style",m=e.match(n)[1].replace(/(;| |^)color([ :])/,"$1fill$2")),i.test(e)&&!r&&(Pt(v,"onclick",'location.href="'+e.match(i)[1]+'"'),Rt(v,{cursor:"pointer"}))," "!==(e=w(e.replace(/<(.|\n)*?>/g,"")||" "))){if(v.appendChild(T.createTextNode(e)),u?f.dx=0:l&&null!==h&&(f.x=h),Pt(v,f),o.appendChild(v),!u&&l&&(!Y&&r&&Rt(v,{display:"block"}),Pt(v,"dy",y(v))),p){for(var b,x,C=e.replace(/([^\^])-/g,"$1- ").split(" "),_="nowrap"===d.whiteSpace,S=c.length>1||l||C.length>1&&!_,E=[],k=y(v),A=t.rotation,I=e,N=I.length;(S||g)&&(C.length||E.length);)t.rotation=0,x=t.getBBox(!0).width,!Y&&a.forExport&&(x=a.measureSpanWidth(v.firstChild.data,t.styles)),b=x>p,void 0===s&&(s=b),g&&s?(N/=2,""===I||!b&&N<.5?C=[]:(C=[(I=e.substring(0,I.length+(b?-1:1)*D(N)))+(p>3?"…":"")],v.removeChild(v.firstChild))):b&&1!==C.length?(v.removeChild(v.firstChild),E.unshift(C.pop())):(C=E,E=[],C.length&&!_&&(0,Pt(v=T.createElementNS(G,"tspan"),{dy:k,x:h}),m&&Pt(v,"style",m),o.appendChild(v)),x>p&&(p=x)),C.length&&v.appendChild(T.createTextNode(C.join(" ").replace(/- /g,"-")));t.rotation=A}u++}}})}),s&&t.attr("title",t.textStr),b&&b.removeChild(o),f&&t.applyTextShadow&&t.applyTextShadow(f)):o.appendChild(T.createTextNode(w(l)))},getContrast:function(t){return(t=oe(t).rgba)[0]+t[1]+t[2]>384?"#000000":"#FFFFFF"},button:function(t,e,n,i,s,o,a,r,l){var c,u,h,d,p,m,f=this.label(t,e,n,l,null,null,null,null,"button"),g=0,v={x1:0,y1:0,x2:0,y2:1};return s=Et({"stroke-width":1,stroke:"#CCCCCC",fill:{linearGradient:v,stops:[[0,"#FEFEFE"],[1,"#F6F6F6"]]},r:2,padding:5,style:{color:"black"}},s),h=s.style,delete s.style,o=Et(s,{stroke:"#68A",fill:{linearGradient:v,stops:[[0,"#FFF"],[1,"#ACF"]]}},o),d=o.style,delete o.style,a=Et(s,{stroke:"#68A",fill:{linearGradient:v,stops:[[0,"#9BD"],[1,"#CDF"]]}},a),p=a.style,delete a.style,r=Et(s,{style:{color:"#CCC"}},r),m=r.style,delete r.style,vt(f.element,z?"mouseover":"mouseenter",function(){3!==g&&f.attr(o).css(d)}),vt(f.element,z?"mouseout":"mouseleave",function(){3!==g&&(c=[s,o,a][g],u=[h,d,p][g],f.attr(c).css(u))}),f.setState=function(t){f.state=g=t,t?2===t?f.attr(a).css(p):3===t&&f.attr(r).css(m):f.attr(s).css(h)},f.on("click",function(t){3!==g&&i.call(f,t)}).attr(s).css(St({cursor:"default"},h))},crispLine:function(t,e){return t[1]===t[4]&&(t[1]=t[4]=I(t[1])-e%2/2),t[2]===t[5]&&(t[2]=t[5]=I(t[2])+e%2/2),t},path:function(t){var e={fill:st};return At(t)?e.d=t:It(t)&&St(e,t),this.createElement("path").attr(e)},circle:function(t,e,n){var i=It(t)?t:{x:t,y:e,r:n},s=this.createElement("circle");return s.xSetter=s.ySetter=function(t,e,n){n.setAttribute("c"+e,t)},s.attr(i)},arc:function(t,e,n,i,s,o){var a;return It(t)&&(e=t.y,n=t.r,i=t.innerR,s=t.start,o=t.end,t=t.x),(a=this.symbol("arc",t||0,e||0,n||0,n||0,{innerR:i||0,start:s||0,end:o||0})).r=n,a},rect:function(t,n,i,s,o,a){o=It(t)?t.r:o;var r=this.createElement("rect"),l=It(t)?t:t===e?{}:{x:t,y:n,width:O(i,0),height:O(s,0)};return a!==e&&(r.strokeWidth=a,l=r.crisp(l)),o&&(l.r=o),r.rSetter=function(t,e,n){Pt(n,{rx:t,ry:t})},r.attr(l)},setSize:function(t,e,n){var i=this.alignedObjects,s=i.length;for(this.width=t,this.height=e,this.boxWrapper[Lt(n,!0)?"animate":"attr"]({width:t,height:e});s--;)i[s].align()},g:function(t){var e=this.createElement("g");return Ot(t)?e.attr({class:nt+t}):e},image:function(t,e,n,i,s){var o,a={preserveAspectRatio:st};return arguments.length>1&&St(a,{x:e,y:n,width:i,height:s}),(o=this.createElement("image").attr(a)).element.setAttributeNS?o.element.setAttributeNS("http://www.w3.org/1999/xlink","href",t):o.element.setAttribute("hc-svg-href",t),o},symbol:function(t,e,n,i,s,o){var a,r,l,c,u=this,h=this.symbols[t],d=h&&h(I(e),I(n),i,s,o),p=/^url\((.*?)\)$/;return d?(a=this.path(d),St(a,{symbolName:t,x:e,y:n,width:i,height:s}),o&&St(a,o)):p.test(t)&&(c=function(t,e){t.element&&(t.attr({width:e[0],height:e[1]}),t.alignByTranslate||t.translate(I((i-e[0])/2),I((s-e[1])/2)))},r=t.match(p)[1],l=J[r]||o&&o.width&&o.height&&[o.width,o.height],(a=this.image(r).attr({x:e,y:n})).isImg=!0,l?c(a,l):(a.attr({width:0,height:0}),jt("img",{onload:function(){var t=Z[u.chartIndex];0===this.width&&(Rt(this,{position:"absolute",top:"-999em"}),T.body.appendChild(this)),c(a,J[r]=[this.width,this.height]),this.parentNode&&this.parentNode.removeChild(this),u.imgCount--,!u.imgCount&&t&&t.onload&&t.onload()},src:r}),this.imgCount++)),a},symbols:{circle:function(t,e,n,i){var s=.166*n;return[ot,t+n/2,e,"C",t+n+s,e,t+n+s,e+i,t+n/2,e+i,"C",t-s,e+i,t-s,e,t+n/2,e,"Z"]},square:function(t,e,n,i){return[ot,t,e,at,t+n,e,t+n,e+i,t,e+i,"Z"]},triangle:function(t,e,n,i){return[ot,t+n/2,e,at,t+n,e+i,t,e+i,"Z"]},"triangle-down":function(t,e,n,i){return[ot,t,e,at,t+n,e,t+n/2,e+i,"Z"]},diamond:function(t,e,n,i){return[ot,t+n/2,e,at,t+n,e+i/2,t+n/2,e+i,t,e+i/2,"Z"]},arc:function(t,e,n,i,s){var o=s.start,a=s.r||n||i,r=s.end-.001,l=s.innerR,c=s.open,u=M(o),h=L(o),d=M(r),p=L(r),m=s.end-o<R?0:1;return[ot,t+a*u,e+a*h,"A",a,a,0,m,1,t+a*d,e+a*p,c?ot:at,t+l*d,e+l*p,"A",l,l,0,m,0,t+l*u,e+l*h,c?"":"Z"]},callout:function(t,e,n,i,s){var o,a=P(s&&s.r||0,n,i),r=a+6,l=s&&s.anchorX,c=s&&s.anchorY;return o=["M",t+a,e,"L",t+n-a,e,"C",t+n,e,t+n,e,t+n,e+a,"L",t+n,e+i-a,"C",t+n,e+i,t+n,e+i,t+n-a,e+i,"L",t+a,e+i,"C",t,e+i,t,e+i,t,e+i-a,"L",t,e+a,"C",t,e,t,e,t+a,e],l&&l>n&&c>e+r&&c<e+i-r?o.splice(13,3,"L",t+n,c-6,t+n+6,c,t+n,c+6,t+n,e+i-a):l&&l<0&&c>e+r&&c<e+i-r?o.splice(33,3,"L",t,c+6,t-6,c,t,c-6,t,e+a):c&&c>i&&l>t+r&&l<t+n-r?o.splice(23,3,"L",l+6,e+i,l,e+i+6,l-6,e+i,t+a,e+i):c&&c<0&&l>t+r&&l<t+n-r&&o.splice(3,3,"L",l-6,e,l,e-6,l+6,e,n-a,e),o}},clipRect:function(t,e,n,i){var s,o=nt+Q++,a=this.createElement("clipPath").attr({id:o}).add(this.defs);return(s=this.rect(t,e,n,i,0).add(a)).id=o,s.clipPath=a,s.count=0,s},text:function(t,e,n,i){var s,o=K||!Y&&this.forExport,a={};return!i||!this.allowHTML&&this.forExport?(a.x=Math.round(e||0),n&&(a.y=Math.round(n)),(t||0===t)&&(a.text=t),s=this.createElement("text").attr(a),o&&s.css({position:"absolute"}),i||(s.xSetter=function(t,e,n){var i,s,o=n.getElementsByTagName("tspan"),a=n.getAttribute(e);for(s=0;s<o.length;s++)(i=o[s]).getAttribute(e)===a&&i.setAttribute(e,t);n.setAttribute(e,t)}),s):this.html(t,e,n)},fontMetrics:function(e,n){var i,s;return!(e=e||this.style.fontSize)&&n&&t.getComputedStyle&&(n=n.element||n,e=(s=t.getComputedStyle(n,""))&&s.fontSize),{h:i=(e=/px/.test(e)?kt(e):/em/.test(e)?12*parseFloat(e):12)<24?e+3:I(1.2*e),b:I(.8*i),f:e}},rotCorr:function(t,e,n){var i=t;return e&&n&&(i=O(i*M(e*j),4)),{x:-t/3*L(e*j),y:i}},label:function(t,n,i,s,o,a,r,l,c){var u,h,d,p,m,f,g,v,b,y,w=this,x=w.g(c),C=w.text("",0,0,r).attr({zIndex:1}),_=0,S=3,E=0,k=0,T={},A=/^url\((.*?)\)$/.test(s),N=A;v=function(){var t,e,n=C.element.style;h=(void 0===d||void 0===p||x.styles.textAlign)&&Ot(C.textStr)&&C.getBBox(),x.width=(d||h.width||0)+2*S+E,x.height=(p||h.height||0)+2*S,g=S+w.fontMetrics(n&&n.fontSize,C).b,N&&(u||(t=k,e=(l?-g:0)+k,x.box=u=w.symbols[s]||A?w.symbol(s,t,e,x.width,x.height,T):w.rect(t,e,x.width,x.height,0,T["stroke-width"]),u.isImg||u.attr("fill",st),u.add(x)),u.isImg||u.attr(St({width:I(x.width),height:I(x.height)},T)),T=null)},b=function(){var t,n=x.styles,i=n&&n.textAlign,s=E+S;t=l?0:g,Ot(d)&&h&&("center"===i||"right"===i)&&(s+={center:.5,right:1}[i]*(d-h.width)),s===C.x&&t===C.y||(C.attr("x",s),t!==e&&C.attr("y",t)),C.x=s,C.y=t},y=function(t,e){u?u.attr(t,e):T[t]=e},x.onAdd=function(){C.add(x),x.attr({text:t||0===t?t:"",x:n,y:i}),u&&Ot(o)&&x.attr({anchorX:o,anchorY:a})},x.widthSetter=function(t){d=t},x.heightSetter=function(t){p=t},x.paddingSetter=function(t){Ot(t)&&t!==S&&(S=x.padding=t,b())},x.paddingLeftSetter=function(t){Ot(t)&&t!==E&&(E=t,b())},x.alignSetter=function(t){(t={left:0,center:.5,right:1}[t])!==_&&(_=t,h&&x.attr({x:m}))},x.textSetter=function(t){t!==e&&C.textSetter(t),v(),b()},x["stroke-widthSetter"]=function(t,e){t&&(N=!0),k=t%2/2,y(e,t)},x.strokeSetter=x.fillSetter=x.rSetter=function(t,e){"fill"===e&&t&&(N=!0),y(e,t)},x.anchorXSetter=function(t,e){o=t,y(e,I(t)-k-m)},x.anchorYSetter=function(t,e){a=t,y(e,t-f)},x.xSetter=function(t){x.x=t,_&&(t-=_*((d||h.width)+2*S)),m=I(t),x.attr("translateX",m)},x.ySetter=function(t){f=x.y=I(t),x.attr("translateY",f)};var D=x.css;return St(x,{css:function(t){if(t){var n={};t=Et(t),pt(x.textProps,function(i){t[i]!==e&&(n[i]=t[i],delete t[i])}),C.css(n)}return D.call(x,t)},getBBox:function(){return{width:h.width+2*S,height:h.height+2*S,x:h.x-S,y:h.y-S}},shadow:function(t){return u&&u.shadow(t),x},destroy:function(){bt(x.element,"mouseenter"),bt(x.element,"mouseleave"),C&&(C=C.destroy()),u&&(u=u.destroy()),ae.prototype.destroy.call(x),x=w=v=b=y=null}})}},n=he,St(ae.prototype,{htmlCss:function(t){var e=this.element,n=t&&"SPAN"===e.tagName&&t.width;return n&&(delete t.width,this.textWidth=n,this.updateTransform()),t&&"ellipsis"===t.textOverflow&&(t.whiteSpace="nowrap",t.overflow="hidden"),this.styles=St(this.styles,t),Rt(this.element,t),this},htmlGetBBox:function(){var t=this.element;return"text"===t.nodeName&&(t.style.position="absolute"),{x:t.offsetLeft,y:t.offsetTop,width:t.offsetWidth,height:t.offsetHeight}},htmlUpdateTransform:function(){if(this.added){var t=this.renderer,e=this.element,n=this.translateX||0,i=this.translateY||0,s=this.x||0,o=this.y||0,a=this.textAlign||"left",r={left:0,center:.5,right:1}[a],l=this.shadows,c=this.styles;if(Rt(e,{marginLeft:n,marginTop:i}),l&&pt(l,function(t){Rt(t,{marginLeft:n+1,marginTop:i+1})}),this.inverted&&pt(e.childNodes,function(n){t.invertChild(n,e)}),"SPAN"===e.tagName){var u,h=this.rotation,d=kt(this.textWidth),p=c&&c.whiteSpace,m=[h,a,e.innerHTML,this.textWidth,this.textAlign].join(",");m!==this.cTT&&(u=t.fontMetrics(e.style.fontSize).b,Ot(h)&&this.setSpanRotation(h,r,u),Rt(e,{width:"",whiteSpace:p||"nowrap"}),e.offsetWidth>d&&/[ \-]/.test(e.textContent||e.innerText)&&Rt(e,{width:d+it,display:"block",whiteSpace:p||"normal"}),this.getSpanCorrection(e.offsetWidth,u,r,h,a)),Rt(e,{left:s+(this.xCorr||0)+it,top:o+(this.yCorr||0)+it}),U&&(u=e.offsetHeight),this.cTT=m}}else this.alignOnAdd=!0},setSpanRotation:function(t,e,n){var i={},s=z?"-ms-transform":U?"-webkit-transform":H?"MozTransform":B?"-o-transform":"";i[s]=i.transform="rotate("+t+"deg)",i[s+(H?"Origin":"-origin")]=i.transformOrigin=100*e+"% "+n+"px",Rt(this.element,i)},getSpanCorrection:function(t,e,n){this.xCorr=-t*n,this.yCorr=-e}}),St(he.prototype,{html:function(t,e,n){var i=this.createElement("span"),s=i.element,o=i.renderer,a=o.isSVG,r=function(t,e){pt(["display","opacity","visibility"],function(n){Wt(t,n+"Setter",function(t,n,i,s){t.call(this,n,i,s),e[i]=n})})};return i.textSetter=function(t){t!==s.innerHTML&&delete this.bBox,s.innerHTML=this.textStr=t,i.htmlUpdateTransform()},a&&r(i,i.element.style),i.xSetter=i.ySetter=i.alignSetter=i.rotationSetter=function(t,e){"align"===e&&(e="textAlign"),i[e]=t,i.htmlUpdateTransform()},i.attr({text:t,x:I(e),y:I(n)}).css({position:"absolute",fontFamily:this.style.fontFamily,fontSize:this.style.fontSize}),s.style.whiteSpace="nowrap",i.css=i.htmlCss,a&&(i.add=function(t){var e,n,a=o.box.parentNode,l=[];if(this.parentGroup=t,t){if(!(e=t.div)){for(n=t;n;)l.push(n),n=n.parentGroup;pt(l.reverse(),function(t){var n,i=Pt(t.element,"class");i&&(i={className:i}),e=t.div=t.div||jt(et,i,{position:"absolute",left:(t.translateX||0)+it,top:(t.translateY||0)+it,display:t.display,opacity:t.opacity,pointerEvents:t.styles&&t.styles.pointerEvents},e||a),n=e.style,St(t,{translateXSetter:function(e,i){n.left=e+it,t[i]=e,t.doTransform=!0},translateYSetter:function(e,i){n.top=e+it,t[i]=e,t.doTransform=!0}}),r(t,n)})}}else e=a;return e.appendChild(s),i.added=!0,i.alignOnAdd&&i.htmlUpdateTransform(),i}),i}}),!Y&&!K){(le={init:function(t,e){var n=["<",e,' filled="f" stroked="f"'],i=["position: ","absolute",";"],s=e===et;("shape"===e||s)&&i.push("left:0;top:0;width:1px;height:1px;"),i.push("visibility: ",s?"hidden":"visible"),n.push(' style="',i.join(""),'"/>'),e&&(n=s||"span"===e||"img"===e?n.join(""):t.prepVML(n),this.element=jt(n)),this.renderer=t},add:function(t){var e=this.renderer,n=this.element,i=e.box,s=t&&t.inverted,o=t?t.element||t:i;return t&&(this.parentGroup=t),s&&e.invertChild(n,o),o.appendChild(n),this.added=!0,this.alignOnAdd&&!this.deferUpdateTransform&&this.updateTransform(),this.onAdd&&this.onAdd(),this},updateTransform:ae.prototype.htmlUpdateTransform,setSpanRotation:function(){var t=this.rotation,e=M(t*j),n=L(t*j);Rt(this.element,{filter:t?["progid:DXImageTransform.Microsoft.Matrix(M11=",e,", M12=",-n,", M21=",n,", M22=",e,", sizingMethod='auto expand')"].join(""):st})},getSpanCorrection:function(t,e,n,i,s){var o,a=i?M(i*j):1,r=i?L(i*j):0,l=Lt(this.elemHeight,this.element.offsetHeight),c=s&&"left"!==s;this.xCorr=a<0&&-t,this.yCorr=r<0&&-l,o=a*r<0,this.xCorr+=r*e*(o?1-n:n),this.yCorr-=a*e*(i?o?n:1-n:1),c&&(this.xCorr-=t*n*(a<0?-1:1),i&&(this.yCorr-=l*n*(r<0?-1:1)),Rt(this.element,{textAlign:s}))},pathToVML:function(t){for(var e=t.length,n=[];e--;)Nt(t[e])?n[e]=I(10*t[e])-5:"Z"===t[e]?n[e]="x":(n[e]=t[e],!t.isArc||"wa"!==t[e]&&"at"!==t[e]||(n[e+5]===n[e+7]&&(n[e+7]+=t[e+7]>t[e+5]?1:-1),n[e+6]===n[e+8]&&(n[e+8]+=t[e+8]>t[e+6]?1:-1)));return n.join(" ")||"x"},clip:function(t){var e,n,i=this;return t?(Dt(e=t.members,i),e.push(i),i.destroyClip=function(){Dt(e,i)},n=t.getCSS(i)):(i.destroyClip&&i.destroyClip(),n={clip:W?"inherit":"rect(auto)"}),i.css(n)},css:ae.prototype.htmlCss,safeRemoveChild:function(t){t.parentNode&&$t(t)},destroy:function(){return this.destroyClip&&this.destroyClip(),ae.prototype.destroy.apply(this)},on:function(e,n){return this.element["on"+e]=function(){var e=t.event;e.target=e.srcElement,n(e)},this},cutOffPath:function(t,e){var n;return 9!==(n=(t=t.split(/[ ,]/)).length)&&11!==n||(t[n-4]=t[n-2]=kt(t[n-2])-10*e),t.join(" ")},shadow:function(t,e,n){var i,s,o,a,r,l,c,u=[],h=this.element,d=this.renderer,p=h.style,m=h.path;if(m&&"string"!=typeof m.value&&(m="x"),r=m,t){for(l=Lt(t.width,3),c=(t.opacity||.15)/l,i=1;i<=3;i++)a=2*l+1-2*i,n&&(r=this.cutOffPath(m.value,a+.5)),o=['<shape isShadow="true" strokeweight="',a,'" filled="false" path="',r,'" coordsize="10 10" style="',h.style.cssText,'" />'],s=jt(d.prepVML(o),null,{left:kt(p.left)+Lt(t.offsetX,1),top:kt(p.top)+Lt(t.offsetY,1)}),n&&(s.cutOff=a+1),o=['<stroke color="',t.color||"black",'" opacity="',c*i,'"/>'],jt(d.prepVML(o),null,null,s),e?e.element.appendChild(s):h.parentNode.insertBefore(s,h),u.push(s);this.shadows=u}return this},updateShadows:$,setAttr:function(t,e){W?this.element[t]=e:this.element.setAttribute(t,e)},classSetter:function(t){this.element.className=t},dashstyleSetter:function(t,e,n){(n.getElementsByTagName("stroke")[0]||jt(this.renderer.prepVML(["<stroke/>"]),null,null,n))[e]=t||"solid",this[e]=t},dSetter:function(t,e,n){var i,s=this.shadows;if(t=t||[],this.d=t.join&&t.join(" "),n.path=t=this.pathToVML(t),s)for(i=s.length;i--;)s[i].path=s[i].cutOff?this.cutOffPath(t,s[i].cutOff):t;this.setAttr(e,t)},fillSetter:function(t,e,n){var i=n.nodeName;"SPAN"===i?n.style.color=t:"IMG"!==i&&(n.filled=t!==st,this.setAttr("fillcolor",this.renderer.color(t,n,e,this)))},"fill-opacitySetter":function(t,e,n){jt(this.renderer.prepVML(["<",e.split("-")[0],' opacity="',t,'"/>']),null,null,n)},opacitySetter:$,rotationSetter:function(t,e,n){var i=n.style;this[e]=i[e]=t,i.left=-I(L(t*j)+1)+it,i.top=I(M(t*j))+it},strokeSetter:function(t,e,n){this.setAttr("strokecolor",this.renderer.color(t,n,e,this))},"stroke-widthSetter":function(t,e,n){n.stroked=!!t,this[e]=t,Nt(t)&&(t+=it),this.setAttr("strokeweight",t)},titleSetter:function(t,e){this.setAttr(e,t)},visibilitySetter:function(t,e,n){"inherit"===t&&(t="visible"),this.shadows&&pt(this.shadows,function(n){n.style[e]=t}),"DIV"===n.nodeName&&(t="hidden"===t?"-999em":0,W||(n.style[e]=t?"visible":"hidden"),e="top"),n.style[e]=t},displaySetter:function(t,e,n){n.style[e]=t},xSetter:function(t,e,n){this[e]=t,"x"===e?e="left":"y"===e&&(e="top"),this.updateClipping?(this[e]=t,this.updateClipping()):n.style[e]=t},zIndexSetter:function(t,e,n){n.style[e]=t}})["stroke-opacitySetter"]=le["fill-opacitySetter"],k.VMLElement=le=Vt(ae,le),le.prototype.ySetter=le.prototype.widthSetter=le.prototype.heightSetter=le.prototype.xSetter;var de={Element:le,isIE8:V.indexOf("MSIE 8.0")>-1,init:function(t,e,n,i){var s,o,a;if(this.alignedObjects=[],o=(s=this.createElement(et).css(St(this.getStyle(i),{position:"relative"}))).element,t.appendChild(s.element),this.isVML=!0,this.box=o,this.boxWrapper=s,this.gradients={},this.cache={},this.cacheKeys=[],this.imgCount=0,this.setSize(e,n,!1),!T.namespaces.hcv){T.namespaces.add("hcv","urn:schemas-microsoft-com:vml"),a="hcv\\:fill, hcv\\:path, hcv\\:shape, hcv\\:stroke{ behavior:url(#default#VML); display: inline-block; } ";try{T.createStyleSheet().cssText=a}catch(t){T.styleSheets[0].cssText+=a}}},isHidden:function(){return!this.box.offsetWidth},clipRect:function(t,e,n,i){var s=this.createElement(),o=It(t);return St(s,{members:[],count:0,left:(o?t.x:t)+1,top:(o?t.y:e)+1,width:(o?t.width:n)-1,height:(o?t.height:i)-1,getCSS:function(t){var e=t.element,n=e.nodeName,i="shape"===n,s=t.inverted,o=this.top-(i?e.offsetTop:0),a=this.left,r=a+this.width,l=o+this.height,c={clip:"rect("+I(s?a:o)+"px,"+I(s?l:r)+"px,"+I(s?r:l)+"px,"+I(s?o:a)+"px)"};return!s&&W&&"DIV"===n&&St(c,{width:r+it,height:l+it}),c},updateClipping:function(){pt(s.members,function(t){t.element&&t.css(s.getCSS(t))})}})},color:function(t,e,n,i){var s,a,r,l=this,c=/^rgba/,u=st;if(t&&t.linearGradient?r="gradient":t&&t.radialGradient&&(r="pattern"),r){var h,d,p,m,f,g,v,b,y,w,x,C,_=t.linearGradient||t.radialGradient,S="",E=t.stops,k=[],T=function(){a=['<fill colors="'+k.join(",")+'" opacity="',b,'" o:opacity2="',v,'" type="',r,'" ',S,'focus="100%" method="any" />'],jt(l.prepVML(a),null,null,e)};if(x=E[0],C=E[E.length-1],x[0]>0&&E.unshift([0,x[1]]),C[0]<1&&E.push([1,C[1]]),pt(E,function(t,e){c.test(t[1])?(s=oe(t[1]),h=s.get("rgb"),d=s.get("a")):(h=t[1],d=1),k.push(100*t[0]+"% "+h),e?(b=d,y=h):(v=d,w=h)}),"fill"===n)if("gradient"===r)p=_.x1||_[0]||0,m=_.y1||_[1]||0,f=_.x2||_[2]||0,g=_.y2||_[3]||0,S='angle="'+(90-180*A.atan((g-m)/(f-p))/R)+'"',T();else{var I,N=_.r,D=2*N,O=2*N,P=_.cx,F=_.cy,M=e.radialReference,L=function(){M&&(I=i.getBBox(),P+=(M[0]-I.x)/I.width-.5,F+=(M[1]-I.y)/I.height-.5,D*=M[2]/I.width,O*=M[2]/I.height),S='src="'+o.global.VMLRadialGradientURL+'" size="'+D+","+O+'" origin="0.5,0.5" position="'+P+","+F+'" color2="'+w+'" ',T()};i.added?L():i.onAdd=L,u=y}else u=h}else if(c.test(t)&&"IMG"!==e.tagName)s=oe(t),i[n+"-opacitySetter"](s.get("a"),n,e),u=s.get("rgb");else{var j=e.getElementsByTagName(n);j.length&&(j[0].opacity=1,j[0].type="solid"),u=t}return u},prepVML:function(t){var e="display:inline-block;behavior:url(#default#VML);",n=this.isIE8;return t=t.join(""),t=n?-1===(t=t.replace("/>",' xmlns="urn:schemas-microsoft-com:vml" />')).indexOf('style="')?t.replace("/>",' style="'+e+'" />'):t.replace('style="','style="'+e):t.replace("<","<hcv:")},text:he.prototype.html,path:function(t){var e={coordsize:"10 10"};return At(t)?e.d=t:It(t)&&St(e,t),this.createElement("shape").attr(e)},circle:function(t,e,n){var i=this.symbol("circle");return It(t)&&(n=t.r,e=t.y,t=t.x),i.isCircle=!0,i.r=n,i.attr({x:t,y:e})},g:function(t){var e;return t&&(e={className:nt+t,class:nt+t}),this.createElement(et).attr(e)},image:function(t,e,n,i,s){var o=this.createElement("img").attr({src:t});return arguments.length>1&&o.attr({x:e,y:n,width:i,height:s}),o},createElement:function(t){return"rect"===t?this.symbol(t):he.prototype.createElement.call(this,t)},invertChild:function(t,e){var n=this,i=e.style,s="IMG"===t.tagName&&t.style;Rt(t,{flip:"x",left:kt(i.width)-(s?kt(s.top):1),top:kt(i.height)-(s?kt(s.left):1),rotation:-90}),pt(t.childNodes,function(e){n.invertChild(e,t)})},symbols:{arc:function(t,e,n,i,s){var o,a=s.start,r=s.end,l=s.r||n||i,c=s.innerR,u=M(a),h=L(a),d=M(r),p=L(r);return r-a==0?["x"]:(o=["wa",t-l,e-l,t+l,e+l,t+l*u,e+l*h,t+l*d,e+l*p],s.open&&!c&&o.push("e",ot,t,e),o.push("at",t-c,e-c,t+c,e+c,t+c*d,e+c*p,t+c*u,e+c*h,"x","e"),o.isArc=!0,o)},circle:function(t,e,n,i,s){return s&&(n=i=2*s.r),s&&s.isCircle&&(t-=n/2,e-=i/2),["wa",t,e,t+n,e+i,t+n,e+i/2,t+n,e+i/2,"e"]},rect:function(t,e,n,i,s){return he.prototype.symbols[Ot(s)&&s.r?"callout":"square"].call(0,t,e,n,i,s)}}};k.VMLRenderer=re=function(){this.init.apply(this,arguments)},re.prototype=Et(he.prototype,de),n=re}function pe(t,e,n,i){this.axis=t,this.pos=e,this.type=n||"",this.isNew=!0,n||i||this.addLabel()}he.prototype.measureSpanWidth=function(t,e){var n,i=T.createElement("span"),s=T.createTextNode(t);return i.appendChild(s),Rt(i,e),this.box.appendChild(i),n=i.offsetWidth,$t(i),n},K&&(k.CanVGRenderer=ce=function(){G="http://www.w3.org/1999/xhtml"},ce.prototype.symbols={},ue=function(){var t=[];function e(){var e,n=t.length;for(e=0;e<n;e++)t[e]();t=[]}return{push:function(n,i){0===t.length&&function(t,e){var n=T.getElementsByTagName("head")[0],i=T.createElement("script");i.type="text/javascript",i.src=t,i.onload=e,n.appendChild(i)}(i,e),t.push(n)}}}(),n=ce),pe.prototype={addLabel:function(){var t,e,n=this.axis,i=n.options,s=n.chart,o=n.categories,a=n.names,r=this.pos,l=i.labels,c=n.tickPositions,u=r===c[0],h=r===c[c.length-1],d=o?Lt(o[r],a[r],r):r,p=this.label,m=c.info;n.isDatetimeAxis&&m&&(e=i.dateTimeLabelFormats[m.higherRanks[r]||m.unitName]),this.isFirst=u,this.isLast=h,t=n.labelFormatter.call({axis:n,chart:s,isFirst:u,isLast:h,dateTimeLabelFormat:e,value:n.isLog?Zt(n.lin2log(d)):d}),Ot(p)?p&&p.attr({text:t}):(this.label=p=Ot(t)&&l.enabled?s.renderer.text(t,0,0,l.useHTML).css(Et(l.style)).add(n.labelGroup):null,this.labelLength=p&&p.getBBox().width,this.rotation=0)},getLabelSize:function(){return this.label?this.label.getBBox()[this.axis.horiz?"height":"width"]:0},handleOverflow:function(t){var e,n,i=this.axis,s=t.x,o=i.chart.chartWidth,a=i.chart.spacing,r=Lt(i.labelLeft,P(i.pos,a[3])),l=Lt(i.labelRight,O(i.pos+i.len,o-a[1])),c=this.label,u=this.rotation,h={left:0,center:.5,right:1}[i.labelAlign],d=c.getBBox().width,p=i.getSlotWidth(),m=p,f=h,g=1,v={};u?u<0&&s-h*d<r?n=I(s/M(u*j)-r):u>0&&s+h*d>l&&(n=I((o-s)/M(u*j))):(e=s+(1-h)*d,s-h*d<r?m=t.x+m*(1-h)-r:e>l&&(m=l-t.x+m*h,g=-1),(m=P(p,m))<p&&"center"===i.labelAlign&&(t.x+=g*(p-m-f*(p-P(d,m)))),(d>m||i.autoRotation&&c.styles.width)&&(n=m)),n&&(v.width=n,i.options.labels.style.textOverflow||(v.textOverflow="ellipsis"),c.css(v))},getPosition:function(t,e,n,i){var s=this.axis,o=s.chart,a=i&&o.oldChartHeight||o.chartHeight;return{x:t?s.translate(e+n,null,null,i)+s.transB:s.left+s.offset+(s.opposite?(i&&o.oldChartWidth||o.chartWidth)-s.right-s.left:0),y:t?a-s.bottom+s.offset-(s.opposite?s.height:0):a-s.translate(e+n,null,null,i)-s.transB}},getLabelPosition:function(t,e,n,i,s,o,a,r){var l,c=this.axis,u=c.transA,h=c.reversed,d=c.staggerLines,p=c.tickRotCorr||{x:0,y:0},m=s.y;return Ot(m)||(m=0===c.side?n.rotation?-8:-n.getBBox().height:2===c.side?p.y+8:M(n.rotation*j)*(p.y-n.getBBox(!1,0).height/2)),t=t+s.x+p.x-(o&&i?o*u*(h?-1:1):0),e=e+m-(o&&!i?o*u*(h?1:-1):0),d&&(l=a/(r||1)%d,c.opposite&&(l=d-l-1),e+=l*(c.labelOffset/d)),{x:t,y:I(e)}},getMarkPath:function(t,e,n,i,s,o){return o.crispLine([ot,t,e,at,t+(s?0:-n),e+(s?n:0)],i)},render:function(t,n,i){var s,o,a,r=this.axis,l=r.options,c=r.chart.renderer,u=r.horiz,h=this.type,d=this.label,p=this.pos,m=l.labels,f=this.gridLine,g=h?h+"Grid":"grid",v=h?h+"Tick":"tick",b=l[g+"LineWidth"],y=l[g+"LineColor"],w=l[g+"LineDashStyle"],x=r.tickSize(v),C=l[v+"Color"],_=this.mark,S=m.step,E=!0,k=r.tickmarkOffset,T=this.getPosition(u,p,k,n),A=T.x,I=T.y,N=u&&A===r.pos+r.len||!u&&I===r.pos?-1:1;i=Lt(i,1),this.isActive=!0,b&&(s=r.getPlotLinePath(p+k,b*N,n,!0),f===e&&(a={stroke:y,"stroke-width":b},w&&(a.dashstyle=w),h||(a.zIndex=1),n&&(a.opacity=0),this.gridLine=f=b?c.path(s).attr(a).add(r.gridGroup):null),!n&&f&&s&&f[this.isNew?"attr":"animate"]({d:s,opacity:i})),x&&(r.opposite&&(x[0]=-x[0]),o=this.getMarkPath(A,I,x[0],x[1]*N,u,c),_?_.animate({d:o,opacity:i}):this.mark=c.path(o).attr({stroke:C,"stroke-width":x[1],opacity:i}).add(r.axisGroup)),d&&Nt(A)&&(d.xy=T=this.getLabelPosition(A,I,d,u,m,k,t,S),this.isFirst&&!this.isLast&&!Lt(l.showFirstLabel,1)||this.isLast&&!this.isFirst&&!Lt(l.showLastLabel,1)?E=!1:!u||r.isRadial||m.step||m.rotation||n||0===i||this.handleOverflow(T),S&&t%S&&(E=!1),E&&Nt(T.y)?(T.opacity=i,d[this.isNew?"attr":"animate"](T)):(xt(d),d.attr("y",-9999)),this.isNew=!1)},destroy:function(){Qt(this,this.axis)}},k.PlotLineOrBand=function(t,e){this.axis=t,e&&(this.options=e,this.id=e.id)},k.PlotLineOrBand.prototype={render:function(){var t,e,n=this,i=n.axis,s=i.horiz,o=n.options,a=o.label,r=n.label,l=o.width,c=o.to,u=o.from,h=Ot(u)&&Ot(c),d=o.value,p=o.dashStyle,m=n.svgElem,f=[],g=o.color,v=Lt(o.zIndex,0),b=o.events,y={},w=i.chart.renderer,x=i.log2lin;if(i.isLog&&(u=x(u),c=x(c),d=x(d)),l)f=i.getPlotLinePath(d,l),y={stroke:g,"stroke-width":l},p&&(y.dashstyle=p);else{if(!h)return;f=i.getPlotBandPath(u,c,o),g&&(y.fill=g),o.borderWidth&&(y.stroke=o.borderColor,y["stroke-width"]=o.borderWidth)}if(y.zIndex=v,m)f?(m.show(),m.animate({d:f})):(m.hide(),r&&(n.label=r=r.destroy()));else if(f&&f.length&&(n.svgElem=m=w.path(f).attr(y).add(),b))for(e in t=function(t){m.on(t,function(e){b[t].apply(n,[e])})},b)t(e);return a&&Ot(a.text)&&f&&f.length&&i.width>0&&i.height>0&&!f.flat?(a=Et({align:s&&h&&"center",x:s?!h&&4:10,verticalAlign:!s&&h&&"middle",y:s?h?16:10:h?6:-4,rotation:s&&!h&&90},a),this.renderLabel(a,f,h,v)):r&&r.hide(),n},renderLabel:function(t,e,n,i){var s,o,a,r,l,c=this.label,u=this.axis.chart.renderer;c||((s={align:t.textAlign||t.align,rotation:t.rotation}).zIndex=i,this.label=c=u.text(t.text,0,0,t.useHTML).attr(s).css(t.style).add()),o=[e[1],e[4],n?e[6]:e[1]],a=[e[2],e[5],n?e[7]:e[2]],r=Kt(o),l=Kt(a),c.align(t,!1,{x:r,y:l,width:Jt(o)-r,height:Jt(a)-l}),c.show()},destroy:function(){Dt(this.axis.plotLinesAndBands,this),delete this.axis,Qt(this)}},l={getPlotBandPath:function(t,e){var n=this.getPlotLinePath(e,null,null,!0),i=this.getPlotLinePath(t,null,null,!0);return i&&n?(i.flat=i.toString()===n.toString(),i.push(n[4],n[5],n[1],n[2])):i=null,i},addPlotBand:function(t){return this.addPlotBandOrLine(t,"plotBands")},addPlotLine:function(t){return this.addPlotBandOrLine(t,"plotLines")},addPlotBandOrLine:function(t,e){var n=new k.PlotLineOrBand(this,t).render(),i=this.userOptions;return n&&(e&&(i[e]=i[e]||[],i[e].push(t)),this.plotLinesAndBands.push(n)),n},removePlotBandOrLine:function(t){for(var e=this.plotLinesAndBands,n=this.options,i=this.userOptions,s=e.length;s--;)e[s].id===t&&e[s].destroy();pt([n.plotLines||[],i.plotLines||[],n.plotBands||[],i.plotBands||[]],function(e){for(s=e.length;s--;)e[s].id===t&&Dt(e,e[s])})}};var me=k.Axis=function(){this.init.apply(this,arguments)};me.prototype={defaultOptions:{dateTimeLabelFormats:{millisecond:"%H:%M:%S.%L",second:"%H:%M:%S",minute:"%H:%M",hour:"%H:%M",day:"%e. %b",week:"%e. %b",month:"%b '%y",year:"%Y"},endOnTick:!1,gridLineColor:"#D8D8D8",labels:{enabled:!0,style:{color:"#606060",cursor:"default",fontSize:"11px"},x:0},lineColor:"#C0D0E0",lineWidth:1,minPadding:.01,maxPadding:.01,minorGridLineColor:"#E0E0E0",minorGridLineWidth:1,minorTickColor:"#A0A0A0",minorTickLength:2,minorTickPosition:"outside",startOfWeek:1,startOnTick:!1,tickColor:"#C0D0E0",tickLength:10,tickmarkPlacement:"between",tickPixelInterval:100,tickPosition:"outside",title:{align:"middle",style:{color:"#707070"}},type:"linear"},defaultYAxisOptions:{endOnTick:!0,gridLineWidth:1,tickPixelInterval:72,showLastLabel:!0,labels:{x:-8},lineWidth:0,maxPadding:.05,minPadding:.05,startOnTick:!0,title:{rotation:270,text:"Values"},stackLabels:{enabled:!1,formatter:function(){return k.numberFormat(this.total,-1)},style:Et(ie.line.dataLabels.style,{color:"#000000"})}},defaultLeftAxisOptions:{labels:{x:-15},title:{rotation:270}},defaultRightAxisOptions:{labels:{x:15},title:{rotation:90}},defaultBottomAxisOptions:{labels:{autoRotation:[-45],x:0},title:{rotation:0}},defaultTopAxisOptions:{labels:{autoRotation:[-45],x:0},title:{rotation:0}},init:function(t,n){var i=n.isX;this.chart=t,this.horiz=t.inverted?!i:i,this.isXAxis=i,this.coll=this.coll||(i?"xAxis":"yAxis"),this.opposite=n.opposite,this.side=n.side||(this.horiz?this.opposite?0:2:this.opposite?1:3),this.setOptions(n);var s=this.options,o=s.type,a="datetime"===o;this.labelFormatter=s.labels.formatter||this.defaultLabelFormatter,this.userOptions=n,this.minPixelPadding=0,this.reversed=s.reversed,this.visible=!1!==s.visible,this.zoomEnabled=!1!==s.zoomEnabled,this.hasNames="category"===o||!0===s.categories,this.categories=s.categories||this.hasNames,this.names=this.names||[],this.isLog="logarithmic"===o,this.isDatetimeAxis=a,this.isLinked=Ot(s.linkedTo),this.ticks={},this.labelEdge=[],this.minorTicks={},this.plotLinesAndBands=[],this.alternateBands={},this.len=0,this.minRange=this.userMinRange=s.minRange||s.maxZoom,this.range=s.range,this.offset=s.offset||0,this.stacks={},this.oldStacks={},this.stacksTouched=0,this.max=null,this.min=null,this.crosshair=Lt(s.crosshair,Ft(t.options.tooltip.crosshairs)[i?0:1],!1);var r,l=this.options.events;for(r in-1===dt(this,t.axes)&&(i?t.axes.splice(t.xAxis.length,0,this):t.axes.push(this),t[this.coll].push(this)),this.series=this.series||[],t.inverted&&i&&this.reversed===e&&(this.reversed=!0),this.removePlotBand=this.removePlotBandOrLine,this.removePlotLine=this.removePlotBandOrLine,l)vt(this,r,l[r]);this.isLog&&(this.val2lin=this.log2lin,this.lin2val=this.lin2log)},setOptions:function(t){this.options=Et(this.defaultOptions,"yAxis"===this.coll&&this.defaultYAxisOptions,[this.defaultTopAxisOptions,this.defaultRightAxisOptions,this.defaultBottomAxisOptions,this.defaultLeftAxisOptions][this.side],Et(o[this.coll],t))},defaultLabelFormatter:function(){var t,n,i=this.axis,s=this.value,r=i.categories,l=this.dateTimeLabelFormat,c=o.lang.numericSymbols,u=c&&c.length,h=i.options.labels.format,d=i.isLog?s:i.tickInterval;if(h)n=qt(h,this);else if(r)n=s;else if(l)n=a(l,s);else if(u&&d>=1e3)for(;u--&&n===e;)d>=(t=Math.pow(1e3,u+1))&&10*s%t==0&&null!==c[u]&&0!==s&&(n=k.numberFormat(s/t,-1)+c[u]);return n===e&&(n=F(s)>=1e4?k.numberFormat(s,-1):k.numberFormat(s,-1,e,"")),n},getSeriesExtremes:function(){var t=this,e=t.chart;t.hasVisibleSeries=!1,t.dataMin=t.dataMax=t.threshold=null,t.softThreshold=!t.isXAxis,t.buildStacks&&t.buildStacks(),pt(t.series,function(n){if(n.visible||!e.options.chart.ignoreHiddenSeries){var i,s,o,a=n.options,r=a.threshold;t.hasVisibleSeries=!0,t.isLog&&r<=0&&(r=null),t.isXAxis?(i=n.xData).length&&(s=Kt(i),Nt(s)||s instanceof c||(s=Kt(i=mt(i,function(t){return Nt(t)}))),t.dataMin=P(Lt(t.dataMin,i[0]),s),t.dataMax=O(Lt(t.dataMax,i[0]),Jt(i))):(n.getExtremes(),o=n.dataMax,Ot(s=n.dataMin)&&Ot(o)&&(t.dataMin=P(Lt(t.dataMin,s),s),t.dataMax=O(Lt(t.dataMax,o),o)),Ot(r)&&(t.threshold=r),a.softThreshold&&!t.isLog||(t.softThreshold=!1))}})},translate:function(t,e,n,i,s,o){var a,r=this.linkedParent||this,l=1,c=0,u=i?r.oldTransA:r.transA,h=i?r.oldMin:r.min,d=r.minPixelPadding,p=(r.isOrdinal||r.isBroken||r.isLog&&s)&&r.lin2val;return u||(u=r.transA),n&&(l*=-1,c=r.len),r.reversed&&(c-=(l*=-1)*(r.sector||r.len)),e?(t=t*l+c,a=(t-=d)/u+h,p&&(a=r.lin2val(a))):(p&&(t=r.val2lin(t)),"between"===o&&(o=.5),a=l*(t-h)*u+c+l*d+(Nt(o)?u*o*r.pointRange:0)),a},toPixels:function(t,e){return this.translate(t,!1,!this.horiz,null,!0)+(e?0:this.pos)},toValue:function(t,e){return this.translate(t-(e?0:this.pos),!0,!this.horiz,null,!0)},getPlotLinePath:function(t,e,n,i,s){var o,a,r,l,c,u=this.chart,h=this.left,d=this.top,p=n&&u.oldChartHeight||u.chartHeight,m=n&&u.oldChartWidth||u.chartWidth,f=this.transB,g=function(t,e,n){return(t<e||t>n)&&(i?t=P(O(e,t),n):c=!0),t};return s=Lt(s,this.translate(t,null,null,n)),o=r=I(s+f),a=l=I(p-s-f),Nt(s)?this.horiz?(a=d,l=p-this.bottom,o=r=g(o,h,h+this.width)):(o=h,r=m-this.right,a=l=g(a,d,d+this.height)):c=!0,c&&!i?null:u.renderer.crispLine([ot,o,a,at,r,l],e||1)},getLinearTickPositions:function(t,e,n){var i,s,o=Zt(N(e/t)*t),a=Zt(D(n/t)*t),r=[];if(e===n&&Nt(e))return[e];for(i=o;i<=a&&(r.push(i),(i=Zt(i+t))!==s);)s=i;return r},getMinorTickPositions:function(){var t,e,n,i=this.options,s=this.tickPositions,o=this.minorTickInterval,a=[],r=this.pointRangePadding||0,l=this.min-r,c=this.max+r,u=c-l;if(u&&u/o<this.len/3)if(this.isLog)for(n=s.length,e=1;e<n;e++)a=a.concat(this.getLogTickPositions(o,s[e-1],s[e],!0));else if(this.isDatetimeAxis&&"auto"===i.minorTickInterval)a=a.concat(this.getTimeTicks(this.normalizeTimeTickInterval(o),l,c,i.startOfWeek));else for(t=l+(s[0]-l)%o;t<=c;t+=o)a.push(t);return 0!==a.length&&this.trimTicks(a,i.startOnTick,i.endOnTick),a},adjustForMinRange:function(){var t,n,i,s,o,a,r,l,c,u=this.options,h=this.min,d=this.max,p=this.dataMax-this.dataMin>=this.minRange;this.isXAxis&&this.minRange===e&&!this.isLog&&(Ot(u.min)||Ot(u.max)?this.minRange=null:(pt(this.series,function(t){for(o=t.xData,a=t.xIncrement?1:o.length-1,i=a;i>0;i--)s=o[i]-o[i-1],(n===e||s<n)&&(n=s)}),this.minRange=P(5*n,this.dataMax-this.dataMin))),d-h<this.minRange&&(r=[h-(t=((c=this.minRange)-d+h)/2),Lt(u.min,h-t)],p&&(r[2]=this.isLog?this.log2lin(this.dataMin):this.dataMin),l=[(h=Jt(r))+c,Lt(u.max,h+c)],p&&(l[2]=this.isLog?this.log2lin(this.dataMax):this.dataMax),(d=Kt(l))-h<c&&(r[0]=d-c,r[1]=Lt(u.min,d-c),h=Jt(r))),this.min=h,this.max=d},getClosest:function(){var t;return this.categories?t=1:pt(this.series,function(e){var n=e.closestPointRange;!e.noSharedTooltip&&Ot(n)&&(t=Ot(t)?P(t,n):n)}),t},nameToX:function(t){var e,n=At(this.categories),i=n?this.categories:this.names,s=t.options.x;return t.series.requireSorting=!1,Ot(s)||(s=!1===this.options.nameToX?t.series.autoIncrement():dt(t.name,i)),-1===s?n||(e=i.length):e=s,this.names[e]=t.name,e},updateNames:function(){var t=this;this.names.length>0&&(this.names.length=0,this.minRange=void 0,pt(this.series||[],function(e){e.processedXData||(e.processData(),e.generatePoints()),pt(e.points,function(n,i){var s;n.options&&void 0===n.options.x&&(s=t.nameToX(n))!==n.x&&(n.x=s,e.xData[i]=s)})}))},setAxisTranslation:function(t){var e,n,i=this,s=i.max-i.min,o=i.axisPointRange||0,a=0,r=0,l=i.linkedParent,c=!!i.categories,u=i.transA,h=i.isXAxis;(h||c||o)&&(l?(a=l.minPointOffset,r=l.pointRangePadding):(e=i.getClosest(),pt(i.series,function(t){var n=c?1:h?Lt(t.options.pointRange,e,0):i.axisPointRange||0,s=t.options.pointPlacement;o=O(o,n),i.single||(a=O(a,Tt(s)?0:n/2),r=O(r,"on"===s?0:n))})),n=i.ordinalSlope&&e?i.ordinalSlope/e:1,i.minPointOffset=a*=n,i.pointRangePadding=r*=n,i.pointRange=P(o,s),h&&(i.closestPointRange=e)),t&&(i.oldTransA=u),i.translationSlope=i.transA=u=i.len/(s+r||1),i.transB=i.horiz?i.left:i.bottom,i.minPixelPadding=u*a},minFromRange:function(){return this.max-this.range},setTickInterval:function(t){var e,n,i,s,o,a,r,l=this,c=l.chart,u=l.options,h=l.isLog,d=l.log2lin,p=l.isDatetimeAxis,m=l.isXAxis,f=l.isLinked,g=u.maxPadding,v=u.minPadding,b=u.tickInterval,y=u.tickPixelInterval,w=l.categories,x=l.threshold,C=l.softThreshold;p||w||f||this.getTickAmount(),a=Lt(l.userMin,u.min),r=Lt(l.userMax,u.max),f?(l.linkedParent=c[l.coll][u.linkedTo],n=l.linkedParent.getExtremes(),l.min=Lt(n.min,n.dataMin),l.max=Lt(n.max,n.dataMax),u.type!==l.linkedParent.options.type&&ut(11,1)):(!C&&Ot(x)&&(l.dataMin>=x?(s=x,v=0):l.dataMax<=x&&(o=x,g=0)),l.min=Lt(a,s,l.dataMin),l.max=Lt(r,o,l.dataMax)),h&&(!t&&P(l.min,Lt(l.dataMin,l.min))<=0&&ut(10,1),l.min=Zt(d(l.min),15),l.max=Zt(d(l.max),15)),l.range&&Ot(l.max)&&(l.userMin=l.min=a=O(l.min,l.minFromRange()),l.userMax=r=l.max,l.range=null),yt(l,"foundExtremes"),l.beforePadding&&l.beforePadding(),l.adjustForMinRange(),w||l.axisPointRange||l.usePercentage||f||!Ot(l.min)||!Ot(l.max)||(e=l.max-l.min)&&(!Ot(a)&&v&&(l.min-=e*v),!Ot(r)&&g&&(l.max+=e*g)),Nt(u.floor)&&(l.min=O(l.min,u.floor)),Nt(u.ceiling)&&(l.max=P(l.max,u.ceiling)),C&&Ot(l.dataMin)&&(x=x||0,!Ot(a)&&l.min<x&&l.dataMin>=x?l.min=x:!Ot(r)&&l.max>x&&l.dataMax<=x&&(l.max=x)),l.min===l.max||void 0===l.min||void 0===l.max?l.tickInterval=1:f&&!b&&y===l.linkedParent.options.tickPixelInterval?l.tickInterval=b=l.linkedParent.tickInterval:l.tickInterval=Lt(b,this.tickAmount?(l.max-l.min)/O(this.tickAmount-1,1):void 0,w?1:(l.max-l.min)*y/O(l.len,y)),m&&!t&&pt(l.series,function(t){t.processData(l.min!==l.oldMin||l.max!==l.oldMax)}),l.setAxisTranslation(!0),l.beforeSetTickPositions&&l.beforeSetTickPositions(),l.postProcessTickInterval&&(l.tickInterval=l.postProcessTickInterval(l.tickInterval)),l.pointRange&&!b&&(l.tickInterval=O(l.pointRange,l.tickInterval)),i=Lt(u.minTickInterval,l.isDatetimeAxis&&l.closestPointRange),!b&&l.tickInterval<i&&(l.tickInterval=i),p||h||b||(l.tickInterval=Yt(l.tickInterval,null,Gt(l.tickInterval),Lt(u.allowDecimals,!(l.tickInterval>.5&&l.tickInterval<5&&l.max>1e3&&l.max<9999)),!!this.tickAmount)),this.tickAmount||(l.tickInterval=l.unsquish()),this.setTickPositions()},setTickPositions:function(){var t,e,n=this.options,i=n.tickPositions,s=n.tickPositioner,o=n.startOnTick,a=n.endOnTick;this.tickmarkOffset=this.categories&&"between"===n.tickmarkPlacement&&1===this.tickInterval?.5:0,this.minorTickInterval="auto"===n.minorTickInterval&&this.tickInterval?this.tickInterval/5:n.minorTickInterval,this.tickPositions=t=i&&i.slice(),t||((t=this.isDatetimeAxis?this.getTimeTicks(this.normalizeTimeTickInterval(this.tickInterval,n.units),this.min,this.max,n.startOfWeek,this.ordinalPositions,this.closestPointRange,!0):this.isLog?this.getLogTickPositions(this.tickInterval,this.min,this.max):this.getLinearTickPositions(this.tickInterval,this.min,this.max)).length>this.len&&(t=[t[0],t.pop()]),this.tickPositions=t,s&&(s=s.apply(this,[this.min,this.max]))&&(this.tickPositions=t=s)),this.isLinked||(this.trimTicks(t,o,a),this.min===this.max&&Ot(this.min)&&!this.tickAmount&&(e=!0,this.min-=.5,this.max+=.5),this.single=e,i||s||this.adjustTickAmount())},trimTicks:function(t,e,n){var i=t[0],s=t[t.length-1],o=this.minPointOffset||0;if(e)this.min=i;else for(;this.min-o>t[0];)t.shift();if(n)this.max=s;else for(;this.max+o<t[t.length-1];)t.pop();0===t.length&&Ot(i)&&t.push((s+i)/2)},alignToOthers:function(){var t,e={},n=this.options;return!1!==this.chart.options.chart.alignTicks&&!1!==n.alignTicks&&pt(this.chart[this.coll],function(n){var i=n.options,s=[n.horiz?i.left:i.top,i.width,i.height,i.pane].join(",");n.series.length&&(e[s]?t=!0:e[s]=1)}),t},getTickAmount:function(){var t=this.options,e=t.tickAmount,n=t.tickPixelInterval;!Ot(t.tickInterval)&&this.len<n&&!this.isRadial&&!this.isLog&&t.startOnTick&&t.endOnTick&&(e=2),!e&&this.alignToOthers()&&(e=D(this.len/n)+1),e<4&&(this.finalTickAmt=e,e=5),this.tickAmount=e},adjustTickAmount:function(){var t,n,i=this.tickInterval,s=this.tickPositions,o=this.tickAmount,a=this.finalTickAmt,r=s&&s.length;if(r<o){for(;s.length<o;)s.push(Zt(s[s.length-1]+i));this.transA*=(r-1)/(o-1),this.max=s[s.length-1]}else r>o&&(this.tickInterval*=2,this.setTickPositions());if(Ot(a)){for(t=n=s.length;t--;)(3===a&&t%2==1||a<=2&&t>0&&t<n-1)&&s.splice(t,1);this.finalTickAmt=e}},setScale:function(){var t,e;this.oldMin=this.min,this.oldMax=this.max,this.oldAxisLength=this.len,this.setAxisSize(),e=this.len!==this.oldAxisLength,pt(this.series,function(e){(e.isDirtyData||e.isDirty||e.xAxis.isDirty)&&(t=!0)}),e||t||this.isLinked||this.forceRedraw||this.userMin!==this.oldUserMin||this.userMax!==this.oldUserMax||this.alignToOthers()?(this.resetStacks&&this.resetStacks(),this.forceRedraw=!1,this.getSeriesExtremes(),this.setTickInterval(),this.oldUserMin=this.userMin,this.oldUserMax=this.userMax,this.isDirty||(this.isDirty=e||this.min!==this.oldMin||this.max!==this.oldMax)):this.cleanStacks&&this.cleanStacks()},setExtremes:function(t,e,n,i,s){var o=this,a=o.chart;n=Lt(n,!0),pt(o.series,function(t){delete t.kdTree}),s=St(s,{min:t,max:e}),yt(o,"setExtremes",s,function(){o.userMin=t,o.userMax=e,o.eventArgs=s,n&&a.redraw(i)})},zoom:function(t,n){var i=this.dataMin,s=this.dataMax,o=this.options,a=P(i,Lt(o.min,i)),r=O(s,Lt(o.max,s));return this.allowZoomOutside||(Ot(i)&&t<=a&&(t=a),Ot(s)&&n>=r&&(n=r)),this.displayBtn=t!==e||n!==e,this.setExtremes(t,n,!1,e,{trigger:"zoom"}),!0},setAxisSize:function(){var t=this.chart,e=this.options,n=e.offsetLeft||0,i=e.offsetRight||0,s=this.horiz,o=Lt(e.width,t.plotWidth-n+i),a=Lt(e.height,t.plotHeight),r=Lt(e.top,t.plotTop),l=Lt(e.left,t.plotLeft+n),c=/%$/;c.test(a)&&(a=Math.round(parseFloat(a)/100*t.plotHeight)),c.test(r)&&(r=Math.round(parseFloat(r)/100*t.plotHeight+t.plotTop)),this.left=l,this.top=r,this.width=o,this.height=a,this.bottom=t.chartHeight-a-r,this.right=t.chartWidth-o-l,this.len=O(s?o:a,0),this.pos=s?l:r},getExtremes:function(){var t=this.isLog,e=this.lin2log;return{min:t?Zt(e(this.min)):this.min,max:t?Zt(e(this.max)):this.max,dataMin:this.dataMin,dataMax:this.dataMax,userMin:this.userMin,userMax:this.userMax}},getThreshold:function(t){var e=this.isLog,n=this.lin2log,i=e?n(this.min):this.min,s=e?n(this.max):this.max;return null===t?t=i:i>t?t=i:s<t&&(t=s),this.translate(t,0,1,0,1)},autoLabelAlign:function(t){var e=(Lt(t,0)-90*this.side+720)%360;return e>15&&e<165?"right":e>195&&e<345?"left":"center"},tickSize:function(t){var e=this.options,n=e[t+"Length"],i=Lt(e[t+"Width"],"tick"===t&&this.isXAxis?1:0);if(i&&n)return"inside"===e[t+"Position"]&&(n=-n),[n,i]},labelMetrics:function(){return this.chart.renderer.fontMetrics(this.options.labels.style.fontSize,this.ticks[0]&&this.ticks[0].label)},unsquish:function(){var t,e,n,i=this.options.labels,s=this.horiz,o=this.tickInterval,a=o,r=this.len/(((this.categories?1:0)+this.max-this.min)/o),l=i.rotation,c=this.labelMetrics(),u=Number.MAX_VALUE,h=function(t){var e=t/(r||1);return(e=e>1?D(e):1)*o};return s?(n=!i.staggerLines&&!i.step&&(Ot(l)?[l]:r<Lt(i.autoRotationLimit,80)&&i.autoRotation))&&pt(n,function(n){var i;(n===l||n&&n>=-90&&n<=90)&&(i=(e=h(F(c.h/L(j*n))))+F(n/360))<u&&(u=i,t=n,a=e)}):i.step||(a=h(c.h)),this.autoRotation=n,this.labelRotation=Lt(t,l),a},getSlotWidth:function(){var t=this.chart,e=this.horiz,n=this.options.labels,i=Math.max(this.tickPositions.length-(this.categories?0:1),1),s=t.margin[3];return e&&(n.step||0)<2&&!n.rotation&&(this.staggerLines||1)*t.plotWidth/i||!e&&(s&&s-t.spacing[3]||.33*t.chartWidth)},renderUnsquish:function(){var t,e,n,i,s=this.chart,o=s.renderer,a=this.tickPositions,r=this.ticks,l=this.options.labels,c=this.horiz,u=this.getSlotWidth(),h=O(1,I(u-2*(l.padding||5))),d={},p=this.labelMetrics(),m=l.style.textOverflow,f=0;if(Tt(l.rotation)||(d.rotation=l.rotation||0),pt(a,function(t){(t=r[t])&&t.labelLength>f&&(f=t.labelLength)}),this.maxLabelLength=f,this.autoRotation)f>h&&f>p.h?d.rotation=this.labelRotation:this.labelRotation=0;else if(u&&(t={width:h+it},!m))for(t.textOverflow="clip",n=a.length;!c&&n--;)i=a[n],(e=r[i].label)&&("ellipsis"===e.styles.textOverflow?e.css({textOverflow:"clip"}):r[i].labelLength>u&&e.css({width:u+"px"}),e.getBBox().height>this.len/a.length-(p.h-p.f)&&(e.specCss={textOverflow:"ellipsis"}));d.rotation&&(t={width:(f>.5*s.chartHeight?.33*s.chartHeight:s.chartHeight)+it},m||(t.textOverflow="ellipsis")),this.labelAlign=l.align||this.autoLabelAlign(this.labelRotation),this.labelAlign&&(d.align=this.labelAlign),pt(a,function(e){var n=r[e],i=n&&n.label;i&&(i.attr(d),t&&i.css(Et(t,i.specCss)),delete i.specCss,n.rotation=d.rotation)}),this.tickRotCorr=o.rotCorr(p.b,this.labelRotation||0,0!==this.side)},hasData:function(){return this.hasVisibleSeries||Ot(this.min)&&Ot(this.max)&&!!this.tickPositions},getOffset:function(){var t,e,n,i,s,o,a,r,l=this,c=l.chart,u=c.renderer,h=l.options,d=l.tickPositions,p=l.ticks,m=l.horiz,f=l.side,g=c.inverted?[1,0,3,2][f]:f,v=0,b=0,y=h.title,w=h.labels,x=0,C=l.opposite,_=c.axisOffset,S=c.clipOffset,E=[-1,1,1,-1][f],k=l.axisParent,T=this.tickSize("tick");if(t=l.hasData(),l.showAxis=e=t||Lt(h.showEmpty,!0),l.staggerLines=l.horiz&&w.staggerLines,l.axisGroup||(l.gridGroup=u.g("grid").attr({zIndex:h.gridZIndex||1}).add(k),l.axisGroup=u.g("axis").attr({zIndex:h.zIndex||2}).add(k),l.labelGroup=u.g("axis-labels").attr({zIndex:w.zIndex||7}).addClass(nt+l.coll.toLowerCase()+"-labels").add(k)),t||l.isLinked)pt(d,function(t){p[t]?p[t].addLabel():p[t]=new pe(l,t)}),l.renderUnsquish(),!1===w.reserveSpace||0!==f&&2!==f&&{1:"left",3:"right"}[f]!==l.labelAlign&&"center"!==l.labelAlign||pt(d,function(t){x=O(p[t].getLabelSize(),x)}),l.staggerLines&&(x*=l.staggerLines,l.labelOffset=x*(l.opposite?-1:1));else for(o in p)p[o].destroy(),delete p[o];y&&y.text&&!1!==y.enabled&&(l.axisTitle||((a=y.textAlign)||(a=(m?{low:"left",middle:"center",high:"right"}:{low:C?"right":"left",middle:"center",high:C?"left":"right"})[y.align]),l.axisTitle=u.text(y.text,0,0,y.useHTML).attr({zIndex:7,rotation:y.rotation||0,align:a}).addClass(nt+this.coll.toLowerCase()+"-title").css(y.style).add(l.axisGroup),l.axisTitle.isNew=!0),e&&(v=l.axisTitle.getBBox()[m?"height":"width"],b=Ot(n=y.offset)?0:Lt(y.margin,m?5:10)),l.axisTitle[e?"show":"hide"](!0)),l.offset=E*Lt(h.offset,_[f]),l.tickRotCorr=l.tickRotCorr||{x:0,y:0},r=0===f?-l.labelMetrics().h:2===f?l.tickRotCorr.y:0,i=Math.abs(x)+b,x&&(i-=r,i+=E*(m?Lt(w.y,l.tickRotCorr.y+8*E):w.x)),l.axisTitleMargin=Lt(n,i),_[f]=O(_[f],l.axisTitleMargin+v+E*l.offset,i,t&&d.length&&T?T[0]:0),s=h.offset?0:2*N(h.lineWidth/2),S[g]=O(S[g],s)},getLinePath:function(t){var e=this.chart,n=this.opposite,i=this.offset,s=this.horiz,o=this.left+(n?this.width:0)+i,a=e.chartHeight-this.bottom-(n?this.height:0)+i;return n&&(t*=-1),e.renderer.crispLine([ot,s?this.left:o,s?a:this.top,at,s?e.chartWidth-this.right:o,s?a:e.chartHeight-this.bottom],t)},getTitlePosition:function(){var t=this.horiz,e=this.left,n=this.top,i=this.len,s=this.options.title,o=t?e:n,a=this.opposite,r=this.offset,l=s.x||0,c=s.y||0,u=this.chart.renderer.fontMetrics(s.style.fontSize).f,h={low:o+(t?0:i),middle:o+i/2,high:o+(t?i:0)}[s.align],d=(t?n+this.height:e)+(t?1:-1)*(a?-1:1)*this.axisTitleMargin+(2===this.side?u:0);return{x:t?h+l:d+(a?this.width:0)+r+l,y:t?d+c-(a?this.height:0)+r:h+c}},render:function(){var t,n,i,s=this,o=s.chart,a=o.renderer,r=s.options,l=s.isLog,c=s.lin2log,u=s.isLinked,h=s.tickPositions,d=s.axisTitle,p=s.ticks,m=s.minorTicks,f=s.alternateBands,g=r.stackLabels,v=r.alternateGridColor,b=s.tickmarkOffset,y=r.lineWidth,w=o.hasRendered&&Nt(s.oldMin),x=s.showAxis,C=ee(a.globalAnimation);s.labelEdge.length=0,s.overlap=!1,pt([p,m,f],function(t){var e;for(e in t)t[e].isActive=!1}),(s.hasData()||u)&&(s.minorTickInterval&&!s.categories&&pt(s.getMinorTickPositions(),function(t){m[t]||(m[t]=new pe(s,t,"minor")),w&&m[t].isNew&&m[t].render(null,!0),m[t].render(null,!1,1)}),h.length&&(pt(h,function(t,e){(!u||t>=s.min&&t<=s.max)&&(p[t]||(p[t]=new pe(s,t)),w&&p[t].isNew&&p[t].render(e,!0,.1),p[t].render(e))}),b&&(0===s.min||s.single)&&(p[-1]||(p[-1]=new pe(s,-1,null,!0)),p[-1].render(-1))),v&&pt(h,function(t,a){i=h[a+1]!==e?h[a+1]+b:s.max-b,a%2==0&&t<s.max&&i<=s.max+(o.polar?-b:b)&&(f[t]||(f[t]=new k.PlotLineOrBand(s)),n=t+b,f[t].options={from:l?c(n):n,to:l?c(i):i,color:v},f[t].render(),f[t].isActive=!0)}),s._addedPlotLB||(pt((r.plotLines||[]).concat(r.plotBands||[]),function(t){s.addPlotBandOrLine(t)}),s._addedPlotLB=!0)),pt([p,m,f],function(t){var e,n,i=[],s=C.duration;for(e in t)t[e].isActive||(t[e].render(e,!1,0),t[e].isActive=!1,i.push(e));Mt(function(){for(n=i.length;n--;)t[i[n]]&&!t[i[n]].isActive&&(t[i[n]].destroy(),delete t[i[n]])},t!==f&&o.hasRendered&&s?s:0)}),y&&(t=s.getLinePath(y),s.axisLine?s.axisLine.animate({d:t}):s.axisLine=a.path(t).attr({stroke:r.lineColor,"stroke-width":y,zIndex:7}).add(s.axisGroup),s.axisLine[x?"show":"hide"](!0)),d&&x&&(d[d.isNew?"attr":"animate"](s.getTitlePosition()),d.isNew=!1),g&&g.enabled&&s.renderStackTotals(),s.isDirty=!1},redraw:function(){this.visible&&(this.render(),pt(this.plotLinesAndBands,function(t){t.render()})),pt(this.series,function(t){t.isDirty=!0})},destroy:function(t){var e,n,i=this,s=i.stacks,o=i.plotLinesAndBands;for(e in t||bt(i),s)Qt(s[e]),s[e]=null;for(pt([i.ticks,i.minorTicks,i.alternateBands],function(t){Qt(t)}),n=o.length;n--;)o[n].destroy();pt(["stackTotalGroup","axisLine","axisTitle","axisGroup","gridGroup","labelGroup","cross"],function(t){i[t]&&(i[t]=i[t].destroy())}),this._addedPlotLB=this.chart._labelPanes=this.ordinalSlope=void 0},drawCrosshair:function(t,e){var n,i,s,o,a,r=this.crosshair;if(t||(t=this.cross&&this.cross.e),this.crosshair&&!1!==(Ot(e)||!Lt(r.snap,!0))){if(Lt(r.snap,!0)?Ot(e)&&(i=this.isXAxis?e.plotX:this.len-e.plotY):i=this.horiz?t.chartX-this.pos:this.len-t.chartY+this.pos,null===(n=this.isRadial?this.getPlotLinePath(this.isXAxis?e.x:Lt(e.stackY,e.y))||null:this.getPlotLinePath(null,null,null,null,i)||null))return void this.hideCrosshair();o=this.categories&&!this.isRadial,a=Lt(r.width,o?this.transA:1),this.cross?this.cross.attr({d:n,visibility:"visible","stroke-width":a}):(s={"pointer-events":"none","stroke-width":a,stroke:r.color||(o?"rgba(155,200,255,0.2)":"#C0C0C0"),zIndex:Lt(r.zIndex,2)},r.dashStyle&&(s.dashstyle=r.dashStyle),this.cross=this.chart.renderer.path(n).attr(s).add()),this.cross.e=t}else this.hideCrosshair()},hideCrosshair:function(){this.cross&&this.cross.hide()}},St(me.prototype,l),me.prototype.getTimeTicks=function(t,e,n,i){var s,a,l=[],k={},T=o.global.useUTC,A=new c(e-Ut(e)),I=t.unitRange,D=t.count;if(Ot(e)){A[y](I>=r.second?0:D*N(A.getMilliseconds()/D)),I>=r.second&&A[w](I>=r.minute?0:D*N(A.getSeconds()/D)),I>=r.minute&&A[x](I>=r.hour?0:D*N(A[p]()/D)),I>=r.hour&&A[C](I>=r.day?0:D*N(A[m]()/D)),I>=r.day&&A[_](I>=r.month?1:D*N(A[g]()/D)),I>=r.month&&(A[S](I>=r.year?0:D*N(A[v]()/D)),a=A[b]()),I>=r.year&&(a-=a%D,A[E](a)),I===r.week&&A[_](A[g]()-A[f]()+Lt(i,1)),s=1,(h||d)&&(A=A.getTime(),A=new c(A+Ut(A))),a=A[b]();for(var O=A.getTime(),P=A[v](),F=A[g](),M=!T||!!d,L=(r.day+(T?Ut(A):60*A.getTimezoneOffset()*1e3))%r.day;O<n;)l.push(O),I===r.year?O=u(a+s*D,0):I===r.month?O=u(a,P+s*D):!M||I!==r.day&&I!==r.week?O+=I*D:O=u(a,P,F+s*D*(I===r.day?1:7)),s++;l.push(O),pt(mt(l,function(t){return I<=r.hour&&t%r.day===L}),function(t){k[t]="day"})}return l.info=St(t,{higherRanks:k,totalRange:I*D}),l},me.prototype.normalizeTimeTickInterval=function(t,e){var n,i=e||[["millisecond",[1,2,5,10,20,25,50,100,200,500]],["second",[1,2,5,10,15,30]],["minute",[1,2,5,10,15,30]],["hour",[1,2,3,4,6,8,12]],["day",[1,2]],["week",[1,2]],["month",[1,2,3,4,6]],["year",null]],s=i[i.length-1],o=r[s[0]],a=s[1];for(n=0;n<i.length;n++){if(s=i[n],o=r[s[0]],a=s[1],i[n+1])if(t<=(o*a[a.length-1]+r[i[n+1][0]])/2)break}return o===r.year&&t<5*o&&(a=[1,2,5]),{unitRange:o,count:Yt(t/o,a,"year"===s[0]?O(Gt(t/o),1):1),unitName:s[0]}},me.prototype.getLogTickPositions=function(t,n,i,s){var o=this.options,a=this.len,r=this.lin2log,l=this.log2lin,c=[];if(s||(this._minorAutoInterval=null),t>=.5)t=I(t),c=this.getLinearTickPositions(t,n,i);else if(t>=.08){var u,h,d,p,m,f,g;for(u=t>.3?[1,2,4]:t>.15?[1,2,4,6,8]:[1,2,3,4,5,6,7,8,9],h=N(n);h<i+1&&!g;h++)for(p=u.length,d=0;d<p&&!g;d++)(m=l(r(h)*u[d]))>n&&(!s||f<=i)&&f!==e&&c.push(f),f>i&&(g=!0),f=m}else{var v=r(n),b=r(i),y=o[s?"minorTickInterval":"tickInterval"],w="auto"===y?null:y,x=o.tickPixelInterval/(s?5:1),C=s?a/this.tickPositions.length:a;t=Yt(t=Lt(w,this._minorAutoInterval,(b-v)*x/(C||1)),null,Gt(t)),c=gt(this.getLinearTickPositions(t,v,b),l),s||(this._minorAutoInterval=t/5)}return s||(this.tickInterval=t),c},me.prototype.log2lin=function(t){return A.log(t)/A.LN10},me.prototype.lin2log=function(t){return A.pow(10,t)};var fe,ge=k.Tooltip=function(){this.init.apply(this,arguments)};ge.prototype={init:function(t,e){var n=e.borderWidth,i=e.style,s=kt(i.padding);this.chart=t,this.options=e,this.crosshairs=[],this.now={x:0,y:0},this.isHidden=!0,this.label=t.renderer.label("",0,0,e.shape||"callout",null,null,e.useHTML,null,"tooltip").attr({padding:s,fill:e.backgroundColor,"stroke-width":n,r:e.borderRadius,zIndex:8,display:"none"}).css(i).css({padding:0}).add(),K||this.label.shadow(e.shadow),this.shared=e.shared},destroy:function(){this.label&&(this.label=this.label.destroy()),clearTimeout(this.hideTimer),clearTimeout(this.tooltipTimeout)},move:function(t,n,i,s){var o=this,a=o.now,r=!1!==o.options.animation&&!o.isHidden&&(F(t-a.x)>1||F(n-a.y)>1),l=o.followPointer||o.len>1;St(a,{x:r?(2*a.x+t)/3:t,y:r?(a.y+n)/2:n,anchorX:l?e:r?(2*a.anchorX+i)/3:i,anchorY:l?e:r?(a.anchorY+s)/2:s}),o.label.attr(a),r&&(clearTimeout(this.tooltipTimeout),this.tooltipTimeout=setTimeout(function(){o&&o.move(t,n,i,s)},32))},hide:function(t){var e=this;clearTimeout(this.hideTimer),t=Lt(t,this.options.hideDelay,500),this.isHidden||(this.hideTimer=Mt(function(){e.label[t?"fadeOut":"hide"](),e.isHidden=!0},t))},getAnchor:function(t,n){var i,s,o,a=this.chart,r=a.inverted,l=a.plotTop,c=a.plotLeft,u=0,h=0;return i=(t=Ft(t))[0].tooltipPos,this.followPointer&&n&&(n.chartX===e&&(n=a.pointer.normalize(n)),i=[n.chartX-a.plotLeft,n.chartY-l]),i||(pt(t,function(t){s=t.series.yAxis,o=t.series.xAxis,u+=t.plotX+(!r&&o?o.left-c:0),h+=(t.plotLow?(t.plotLow+t.plotHigh)/2:t.plotY)+(!r&&s?s.top-l:0)}),u/=t.length,h/=t.length,i=[r?a.plotWidth-h:u,this.shared&&!r&&t.length>1&&n?n.chartY-l:r?a.plotHeight-u:h]),gt(i,I)},getPosition:function(t,e,n){var i,s=this.chart,o=this.distance,a={},r=n.h||0,l=["y",s.chartHeight,e,n.plotY+s.plotTop,s.plotTop,s.plotTop+s.plotHeight],c=["x",s.chartWidth,t,n.plotX+s.plotLeft,s.plotLeft,s.plotLeft+s.plotWidth],u=!this.followPointer&&Lt(n.ttBelow,!s.inverted==!!n.negative),h=function(t){var e=l;l=c,c=e,i=t},d=function(){!1!==function(t,e,n,i,s,l){var c=n<i-o,h=i+o+n<e,d=i-o-n,p=i+o;if(u&&h)a[t]=p;else if(!u&&c)a[t]=d;else if(c)a[t]=P(l-n,d-r<0?d:d-r);else{if(!h)return!1;a[t]=O(s,p+r+n>e?p:p+r)}}.apply(0,l)?!1!==function(t,e,n,i){var s;return i<o||i>e-o?s=!1:a[t]=i<n/2?1:i>e-n/2?e-n-2:i-n/2,s}.apply(0,c)||i||(h(!0),d()):i?a.x=a.y=0:(h(!0),d())};return(s.inverted||this.len>1)&&h(),d(),a},defaultFormatter:function(t){var e,n=this.points||Ft(this);return(e=(e=[t.tooltipFooterHeaderFormatter(n[0])]).concat(t.bodyFormatter(n))).push(t.tooltipFooterHeaderFormatter(n[0],!0)),e.join("")},refresh:function(t,e){var n,i,s,o,a,r,l=this.chart,c=this.label,u=this.options,h={},d=[],p=u.formatter||this.defaultFormatter,m=l.hoverPoints,f=this.shared;clearTimeout(this.hideTimer),this.followPointer=Ft(t)[0].series.tooltipOptions.followPointer,n=(s=this.getAnchor(t,e))[0],i=s[1],!f||t.series&&t.series.noSharedTooltip?h=t.getLabelConfig():(l.hoverPoints=t,m&&pt(m,function(t){t.setState()}),pt(t,function(t){t.setState("hover"),d.push(t.getLabelConfig())}),(h={x:t[0].category,y:t[0].y}).points=d,this.len=d.length,t=t[0]),o=p.call(h,this),r=t.series,this.distance=Lt(r.tooltipOptions.distance,16),!1===o?this.hide():(this.isHidden&&(xt(c),c.attr({opacity:1,display:"block"}).show()),c.attr({text:o}),a=u.borderColor||t.color||r.color||"#606060",c.attr({stroke:a}),this.updatePosition({plotX:n,plotY:i,negative:t.negative,ttBelow:t.ttBelow,h:s[2]||0}),this.isHidden=!1),yt(l,"tooltipRefresh",{text:o,x:n+l.plotLeft,y:i+l.plotTop,borderColor:a})},updatePosition:function(t){var e=this.chart,n=this.label,i=(this.options.positioner||this.getPosition).call(this,n.width,n.height,t);this.move(I(i.x),I(i.y||0),t.plotX+e.plotLeft,t.plotY+e.plotTop)},getXDateFormat:function(t,e,n){var i,s,o,l=e.dateTimeLabelFormats,c=n&&n.closestPointRange,u="01-01 00:00:00.000",h={millisecond:15,second:12,minute:9,hour:6,day:3},d="millisecond";if(c){for(s in o=a("%m-%d %H:%M:%S.%L",t.x),r){if(c===r.week&&+a("%w",t.x)===n.options.startOfWeek&&o.substr(6)===u.substr(6)){s="week";break}if(r[s]>c){s=d;break}if(h[s]&&o.substr(h[s])!==u.substr(h[s]))break;"week"!==s&&(d=s)}s&&(i=l[s])}else i=l.day;return i||l.year},tooltipFooterHeaderFormatter:function(t,e){var n=e?"footer":"header",i=t.series,s=i.tooltipOptions,o=s.xDateFormat,a=i.xAxis,r=a&&"datetime"===a.options.type&&Nt(t.key),l=s[n+"Format"];return r&&!o&&(o=this.getXDateFormat(t,s,a)),r&&o&&(l=l.replace("{point.key}","{point.key:"+o+"}")),qt(l,{point:t,series:i})},bodyFormatter:function(t){return gt(t,function(t){var e=t.series.tooltipOptions;return(e.pointFormatter||t.point.tooltipFormatter).call(t.point,e.pointFormat)})}},i=T&&T.documentElement.ontouchstart!==e;var ve=k.Pointer=function(t,e){this.init(t,e)};if(ve.prototype={init:function(t,e){var n,i,s=e.chart,o=s.events,a=K?"":s.zoomType,r=t.inverted;this.options=e,this.chart=t,this.zoomX=n=/x/.test(a),this.zoomY=i=/y/.test(a),this.zoomHor=n&&!r||i&&r,this.zoomVert=i&&!r||n&&r,this.hasZoom=n||i,this.runChartClick=o&&!!o.click,this.pinchDown=[],this.lastValidTouch={},k.Tooltip&&e.tooltip.enabled&&(t.tooltip=new ge(t,e.tooltip),this.followTouchMove=Lt(e.tooltip.followTouchMove,!0)),this.setDOMEvents()},normalize:function(n,i){var s,o,a;return(n=n||t.event).target||(n.target=n.srcElement),a=n.touches?n.touches.length?n.touches.item(0):n.changedTouches[0]:n,i||(this.chartPosition=i=ft(this.chart.container)),a.pageX===e?(s=O(n.x,n.clientX-i.left),o=n.y):(s=a.pageX-i.left,o=a.pageY-i.top),St(n,{chartX:I(s),chartY:I(o)})},getCoordinates:function(t){var e={xAxis:[],yAxis:[]};return pt(this.chart.axes,function(n){e[n.isXAxis?"xAxis":"yAxis"].push({axis:n,value:n.toValue(t[n.horiz?"chartX":"chartY"])})}),e},runPointActions:function(t){var e,n,i,s,o,a,r=this.chart,l=r.series,c=r.tooltip,u=!!c&&c.shared,h=!0,d=r.hoverPoint,p=r.hoverSeries,m=[];if(!u&&!p)for(n=0;n<l.length;n++)!l[n].directTouch&&l[n].options.stickyTracking||(l=[]);if(p&&(u?p.noSharedTooltip:p.directTouch)&&d?m=[d]:(u||!p||p.options.stickyTracking||(l=[p]),pt(l,function(e){s=e.noSharedTooltip&&u,o=!u&&e.directTouch,e.visible&&!s&&!o&&Lt(e.options.enableMouseTracking,!0)&&(a=e.searchPoint(t,!s&&1===e.kdDimensions))&&a.series&&m.push(a)}),m.sort(function(t,e){var n=t.distX-e.distX,i=t.dist-e.dist,s=t.series.group.zIndex>e.series.group.zIndex?-1:1;return 0!==n?n:0!==i?i:s})),u)for(n=m.length;n--;)(m[n].clientX!==m[0].clientX||m[n].series.noSharedTooltip)&&m.splice(n,1);if(m[0]&&(m[0]!==this.hoverPoint||c&&c.isHidden)){if(u&&!m[0].series.noSharedTooltip){for(n=0;n>=0;n--)m[n].onMouseOver(t,m[n]!==(p&&p.directTouch&&d||m[0]));p&&p.directTouch&&d&&d!==m[0]&&d.onMouseOver(t,!1),m.length&&c&&c.refresh(m.sort(function(t,e){return t.series.index-e.series.index}),t)}else c&&c.refresh(m[0],t),p&&p.directTouch||m[0].onMouseOver(t);this.prevKDPoint=m[0],h=!1}h&&(e=p&&p.tooltipOptions.followPointer,c&&e&&!c.isHidden&&(i=c.getAnchor([{}],t),c.updatePosition({plotX:i[0],plotY:i[1]}))),this._onDocumentMouseMove||(this._onDocumentMouseMove=function(t){Z[fe]&&Z[fe].pointer.onDocumentMouseMove(t)},vt(T,"mousemove",this._onDocumentMouseMove)),pt(u?m:[Lt(d,m[0])],function(e){pt(r.axes,function(n){(!e||e.series&&e.series[n.coll]===n)&&n.drawCrosshair(t,e)})})},reset:function(t,e){var n=this.chart,i=n.hoverSeries,s=n.hoverPoint,o=n.hoverPoints,a=n.tooltip,r=a&&a.shared?o:s;t&&r&&pt(Ft(r),function(e){e.series.isCartesian&&void 0===e.plotX&&(t=!1)}),t?a&&r&&(a.refresh(r),s&&(s.setState(s.state,!0),pt(n.axes,function(t){t.crosshair&&t.drawCrosshair(null,s)}))):(s&&s.onMouseOut(),o&&pt(o,function(t){t.setState()}),i&&i.onMouseOut(),a&&a.hide(e),this._onDocumentMouseMove&&(bt(T,"mousemove",this._onDocumentMouseMove),this._onDocumentMouseMove=null),pt(n.axes,function(t){t.hideCrosshair()}),this.hoverX=this.prevKDPoint=n.hoverPoints=n.hoverPoint=null)},scaleGroups:function(t,e){var n,i=this.chart;pt(i.series,function(s){n=t||s.getPlotBox(),s.xAxis&&s.xAxis.zoomEnabled&&(s.group.attr(n),s.markerGroup&&(s.markerGroup.attr(n),s.markerGroup.clip(e?i.clipRect:null)),s.dataLabelsGroup&&s.dataLabelsGroup.attr(n))}),i.clipRect.attr(e||i.clipBox)},dragStart:function(t){var e=this.chart;e.mouseIsDown=t.type,e.cancelClick=!1,e.mouseDownX=this.mouseDownX=t.chartX,e.mouseDownY=this.mouseDownY=t.chartY},drag:function(t){var e,n,i=this.chart,s=i.options.chart,o=t.chartX,a=t.chartY,r=this.zoomHor,l=this.zoomVert,c=i.plotLeft,u=i.plotTop,h=i.plotWidth,d=i.plotHeight,p=this.selectionMarker,m=this.mouseDownX,f=this.mouseDownY,g=s.panKey&&t[s.panKey+"Key"];p&&p.touch||(o<c?o=c:o>c+h&&(o=c+h),a<u?a=u:a>u+d&&(a=u+d),this.hasDragged=Math.sqrt(Math.pow(m-o,2)+Math.pow(f-a,2)),this.hasDragged>10&&(e=i.isInsidePlot(m-c,f-u),i.hasCartesianSeries&&(this.zoomX||this.zoomY)&&e&&!g&&(p||(this.selectionMarker=p=i.renderer.rect(c,u,r?1:h,l?1:d,0).attr({fill:s.selectionMarkerFill||"rgba(69,114,167,0.25)",zIndex:7}).add())),p&&r&&(n=o-m,p.attr({width:F(n),x:(n>0?0:n)+m})),p&&l&&(n=a-f,p.attr({height:F(n),y:(n>0?0:n)+f})),e&&!p&&s.panning&&i.pan(t,s.panning)))},drop:function(t){var e=this,n=this.chart,i=this.hasPinched;if(this.selectionMarker){var s,o={originalEvent:t,xAxis:[],yAxis:[]},a=this.selectionMarker,r=a.attr?a.attr("x"):a.x,l=a.attr?a.attr("y"):a.y,c=a.attr?a.attr("width"):a.width,u=a.attr?a.attr("height"):a.height;(this.hasDragged||i)&&(pt(n.axes,function(n){if(n.zoomEnabled&&Ot(n.min)&&(i||e[{xAxis:"zoomX",yAxis:"zoomY"}[n.coll]])){var a=n.horiz,h="touchend"===t.type?n.minPixelPadding:0,d=n.toValue((a?r:l)+h),p=n.toValue((a?r+c:l+u)-h);o[n.coll].push({axis:n,min:P(d,p),max:O(d,p)}),s=!0}}),s&&yt(n,"selection",o,function(t){n.zoom(St(t,i?{animation:!1}:null))})),this.selectionMarker=this.selectionMarker.destroy(),i&&this.scaleGroups()}n&&(Rt(n.container,{cursor:n._cursor}),n.cancelClick=this.hasDragged>10,n.mouseIsDown=this.hasDragged=this.hasPinched=!1,this.pinchDown=[])},onContainerMouseDown:function(t){(t=this.normalize(t)).preventDefault&&t.preventDefault(),this.dragStart(t)},onDocumentMouseUp:function(t){Z[fe]&&Z[fe].pointer.drop(t)},onDocumentMouseMove:function(t){var e=this.chart,n=this.chartPosition;t=this.normalize(t,n),!n||this.inClass(t.target,"highcharts-tracker")||e.isInsidePlot(t.chartX-e.plotLeft,t.chartY-e.plotTop)||this.reset()},onContainerMouseLeave:function(t){var e=Z[fe];e&&(t.relatedTarget||t.toElement)&&(e.pointer.reset(),e.pointer.chartPosition=null)},onContainerMouseMove:function(t){var e=this.chart;Ot(fe)&&Z[fe]&&Z[fe].mouseIsDown||(fe=e.index),(t=this.normalize(t)).returnValue=!1,"mousedown"===e.mouseIsDown&&this.drag(t),!this.inClass(t.target,"highcharts-tracker")&&!e.isInsidePlot(t.chartX-e.plotLeft,t.chartY-e.plotTop)||e.openMenu||this.runPointActions(t)},inClass:function(t,e){for(var n;t;){if(n=Pt(t,"class")){if(-1!==n.indexOf(e))return!0;if(-1!==n.indexOf(nt+"container"))return!1}t=t.parentNode}},onTrackerMouseOut:function(t){var e=this.chart.hoverSeries,n=t.relatedTarget||t.toElement;!e||!n||e.options.stickyTracking||this.inClass(n,nt+"tooltip")||this.inClass(n,nt+"series-"+e.index)||e.onMouseOut()},onContainerClick:function(t){var e=this.chart,n=e.hoverPoint,i=e.plotLeft,s=e.plotTop;t=this.normalize(t),e.cancelClick||(n&&this.inClass(t.target,nt+"tracker")?(yt(n.series,"click",St(t,{point:n})),e.hoverPoint&&n.firePointEvent("click",t)):(St(t,this.getCoordinates(t)),e.isInsidePlot(t.chartX-i,t.chartY-s)&&yt(e,"click",t)))},setDOMEvents:function(){var t=this,e=t.chart.container;e.onmousedown=function(e){t.onContainerMouseDown(e)},e.onmousemove=function(e){t.onContainerMouseMove(e)},e.onclick=function(e){t.onContainerClick(e)},vt(e,"mouseleave",t.onContainerMouseLeave),1===tt&&vt(T,"mouseup",t.onDocumentMouseUp),i&&(e.ontouchstart=function(e){t.onContainerTouchStart(e)},e.ontouchmove=function(e){t.onContainerTouchMove(e)},1===tt&&vt(T,"touchend",t.onDocumentTouchEnd))},destroy:function(){var t;for(t in bt(this.chart.container,"mouseleave",this.onContainerMouseLeave),tt||(bt(T,"mouseup",this.onDocumentMouseUp),bt(T,"touchend",this.onDocumentTouchEnd)),clearInterval(this.tooltipTimeout),this)this[t]=null}},St(k.Pointer.prototype,{pinchTranslate:function(t,e,n,i,s,o){(this.zoomHor||this.pinchHor)&&this.pinchTranslateDirection(!0,t,e,n,i,s,o),(this.zoomVert||this.pinchVert)&&this.pinchTranslateDirection(!1,t,e,n,i,s,o)},pinchTranslateDirection:function(t,e,n,i,s,o,a,r){var l,c,u,h,d,p,m=this.chart,f=t?"x":"y",g=t?"X":"Y",v="chart"+g,b=t?"width":"height",y=m["plot"+(t?"Left":"Top")],w=r||1,x=m.inverted,C=m.bounds[t?"h":"v"],_=1===e.length,S=e[0][v],E=n[0][v],k=!_&&e[1][v],T=!_&&n[1][v],A=function(){!_&&F(S-k)>20&&(w=r||F(E-T)/F(S-k)),u=(y-E)/w+S,l=m["plot"+(t?"Width":"Height")]/w};A(),(c=u)<C.min?(c=C.min,h=!0):c+l>C.max&&(c=C.max-l,h=!0),h?(E-=.8*(E-a[f][0]),_||(T-=.8*(T-a[f][1])),A()):a[f]=[E,T],x||(o[f]=u-y,o[b]=l),p=x?t?"scaleY":"scaleX":"scale"+g,d=x?1/w:w,s[b]=l,s[f]=c,i[p]=w,i["translate"+g]=d*y+(E-d*S)},pinch:function(t){var e=this,n=e.chart,i=e.pinchDown,s=t.touches,o=s.length,a=e.lastValidTouch,r=e.hasZoom,l=e.selectionMarker,c={},u=1===o&&(e.inClass(t.target,nt+"tracker")&&n.runTrackerClick||e.runChartClick),h={};o>1&&(e.initiated=!0),r&&e.initiated&&!u&&t.preventDefault(),gt(s,function(t){return e.normalize(t)}),"touchstart"===t.type?(pt(s,function(t,e){i[e]={chartX:t.chartX,chartY:t.chartY}}),a.x=[i[0].chartX,i[1]&&i[1].chartX],a.y=[i[0].chartY,i[1]&&i[1].chartY],pt(n.axes,function(t){if(t.zoomEnabled){var e=n.bounds[t.horiz?"h":"v"],i=t.minPixelPadding,s=t.toPixels(Lt(t.options.min,t.dataMin)),o=t.toPixels(Lt(t.options.max,t.dataMax)),a=P(s,o),r=O(s,o);e.min=P(t.pos,a-i),e.max=O(t.pos+t.len,r+i)}}),e.res=!0):i.length&&(l||(e.selectionMarker=l=St({destroy:$,touch:!0},n.plotBox)),e.pinchTranslate(i,s,c,l,h,a),e.hasPinched=r,e.scaleGroups(c,h),!r&&e.followTouchMove&&1===o?this.runPointActions(e.normalize(t)):e.res&&(e.res=!1,this.reset(!1,0)))},touch:function(t,e){var n,i,s=this.chart;fe=s.index,1===t.touches.length?(t=this.normalize(t),s.isInsidePlot(t.chartX-s.plotLeft,t.chartY-s.plotTop)&&!s.openMenu?(e&&this.runPointActions(t),"touchmove"===t.type&&(n=!!(i=this.pinchDown)[0]&&Math.sqrt(Math.pow(i[0].chartX-t.chartX,2)+Math.pow(i[0].chartY-t.chartY,2))>=4),Lt(n,!0)&&this.pinch(t)):e&&this.reset()):2===t.touches.length&&this.pinch(t)},onContainerTouchStart:function(t){this.touch(t,!0)},onContainerTouchMove:function(t){this.touch(t)},onDocumentTouchEnd:function(t){Z[fe]&&Z[fe].pointer.drop(t)}}),t.PointerEvent||t.MSPointerEvent){var be={},ye=!!t.PointerEvent,we=function(){var t,e=[];for(t in e.item=function(t){return this[t]},be)be.hasOwnProperty(t)&&e.push({pageX:be[t].pageX,pageY:be[t].pageY,target:be[t].target});return e},xe=function(t,e,n,i){"touch"!==t.pointerType&&t.pointerType!==t.MSPOINTER_TYPE_TOUCH||!Z[fe]||(i(t),Z[fe].pointer[e]({type:n,target:t.currentTarget,preventDefault:$,touches:we()}))};St(ve.prototype,{onContainerPointerDown:function(t){xe(t,"onContainerTouchStart","touchstart",function(t){be[t.pointerId]={pageX:t.pageX,pageY:t.pageY,target:t.currentTarget}})},onContainerPointerMove:function(t){xe(t,"onContainerTouchMove","touchmove",function(t){be[t.pointerId]={pageX:t.pageX,pageY:t.pageY},be[t.pointerId].target||(be[t.pointerId].target=t.currentTarget)})},onDocumentPointerUp:function(t){xe(t,"onDocumentTouchEnd","touchend",function(t){delete be[t.pointerId]})},batchMSEvents:function(t){t(this.chart.container,ye?"pointerdown":"MSPointerDown",this.onContainerPointerDown),t(this.chart.container,ye?"pointermove":"MSPointerMove",this.onContainerPointerMove),t(T,ye?"pointerup":"MSPointerUp",this.onDocumentPointerUp)}}),Wt(ve.prototype,"init",function(t,e,n){t.call(this,e,n),this.hasZoom&&Rt(e.container,{"-ms-touch-action":st,"touch-action":st})}),Wt(ve.prototype,"setDOMEvents",function(t){t.apply(this),(this.hasZoom||this.followTouchMove)&&this.batchMSEvents(vt)}),Wt(ve.prototype,"destroy",function(t){this.batchMSEvents(bt),t.call(this)})}var Ce=k.Legend=function(t,e){this.init(t,e)};Ce.prototype={init:function(t,e){var n,i=this,s=e.itemStyle,o=e.itemMarginTop||0;this.options=e,e.enabled&&(i.itemStyle=s,i.itemHiddenStyle=Et(s,e.itemHiddenStyle),i.itemMarginTop=o,i.padding=n=Lt(e.padding,8),i.initialItemX=n,i.initialItemY=n-5,i.maxItemWidth=0,i.chart=t,i.itemHeight=0,i.symbolWidth=Lt(e.symbolWidth,16),i.pages=[],i.render(),vt(i.chart,"endResize",function(){i.positionCheckboxes()}))},colorizeItem:function(t,n){var i,s,o=this.options,a=t.legendItem,r=t.legendLine,l=t.legendSymbol,c=this.itemHiddenStyle.color,u=n?o.itemStyle.color:c,h=n?t.legendColor||t.color||"#CCC":c,d=t.options&&t.options.marker,p={fill:h};if(a&&a.css({fill:u,color:u}),r&&r.attr({stroke:h}),l){if(d&&l.isMarker)for(i in p.stroke=h,d=t.convertAttribs(d))(s=d[i])!==e&&(p[i]=s);l.attr(p)}},positionItem:function(t){var e=this.options,n=e.symbolPadding,i=!e.rtl,s=t._legendItemPos,o=s[0],a=s[1],r=t.checkbox,l=t.legendGroup;l&&l.element&&l.translate(i?o:this.legendWidth-o-2*n-4,a),r&&(r.x=o,r.y=a)},destroyItem:function(t){var e=t.checkbox;pt(["legendItem","legendLine","legendSymbol","legendGroup"],function(e){t[e]&&(t[e]=t[e].destroy())}),e&&$t(t.checkbox)},destroy:function(){var t=this.group,e=this.box;e&&(this.box=e.destroy()),t&&(this.group=t.destroy())},positionCheckboxes:function(t){var e,n=this.group.alignAttr,i=this.clipHeight||this.legendHeight,s=this.titleHeight;n&&(e=n.translateY,pt(this.allItems,function(o){var a,r=o.checkbox;r&&(a=e+s+r.y+(t||0)+3,Rt(r,{left:n.translateX+o.checkboxOffset+r.x-20+it,top:a+it,display:a>e-6&&a<e+i-6?"":st}))}))},renderTitle:function(){var t,e=this.options,n=this.padding,i=e.title,s=0;i.text&&(this.title||(this.title=this.chart.renderer.label(i.text,n-3,n-4,null,null,null,null,null,"legend-title").attr({zIndex:1}).css(i.style).add(this.group)),s=(t=this.title.getBBox()).height,this.offsetWidth=t.width,this.contentGroup.attr({translateY:s})),this.titleHeight=s},setText:function(t){var e=this.options;t.legendItem.attr({text:e.labelFormat?qt(e.labelFormat,t):e.labelFormatter.call(t)})},renderItem:function(t){var e,n,i,s=this.chart,o=s.renderer,a=this.options,r="horizontal"===a.layout,l=this.symbolWidth,c=a.symbolPadding,u=this.itemStyle,h=this.itemHiddenStyle,d=this.padding,p=r?Lt(a.itemDistance,20):0,m=!a.rtl,f=a.width,g=a.itemMarginBottom||0,v=this.itemMarginTop,b=this.initialItemX,y=t.legendItem,w=t.series&&t.series.drawLegendSymbol?t.series:t,x=w.options,C=this.createCheckboxForItem&&x&&x.showCheckbox,_=a.useHTML;y||(t.legendGroup=o.g("legend-item").attr({zIndex:1}).add(this.scrollGroup),t.legendItem=y=o.text("",m?l+c:-c,this.baseline||0,_).css(Et(t.visible?u:h)).attr({align:m?"left":"right",zIndex:2}).add(t.legendGroup),this.baseline||(this.fontMetrics=o.fontMetrics(u.fontSize,y),this.baseline=this.fontMetrics.f+3+v,y.attr("y",this.baseline)),w.drawLegendSymbol(this,t),this.setItemEvents&&this.setItemEvents(t,y,_,u,h),C&&this.createCheckboxForItem(t)),this.colorizeItem(t,t.visible),this.setText(t),n=y.getBBox(),i=t.checkboxOffset=a.itemWidth||t.legendItemWidth||l+c+n.width+p+(C?20:0),this.itemHeight=e=I(t.legendItemHeight||n.height),r&&this.itemX-b+i>(f||s.chartWidth-2*d-b-a.x)&&(this.itemX=b,this.itemY+=v+this.lastLineHeight+g,this.lastLineHeight=0),this.maxItemWidth=O(this.maxItemWidth,i),this.lastItemY=v+this.itemY+g,this.lastLineHeight=O(e,this.lastLineHeight),t._legendItemPos=[this.itemX,this.itemY],r?this.itemX+=i:(this.itemY+=v+e+g,this.lastLineHeight=e),this.offsetWidth=f||O((r?this.itemX-b-p:i)+d,this.offsetWidth)},getAllItems:function(){var t=[];return pt(this.chart.series,function(n){var i=n.options;Lt(i.showInLegend,!Ot(i.linkedTo)&&e,!0)&&(t=t.concat(n.legendItems||("point"===i.legendType?n.data:n)))}),t},adjustMargins:function(t,e){var n=this.chart,i=this.options,s=i.align.charAt(0)+i.verticalAlign.charAt(0)+i.layout.charAt(0);i.floating||pt([/(lth|ct|rth)/,/(rtv|rm|rbv)/,/(rbh|cb|lbh)/,/(lbv|lm|ltv)/],function(o,a){o.test(s)&&!Ot(t[a])&&(n[lt[a]]=O(n[lt[a]],n.legend[(a+1)%2?"legendHeight":"legendWidth"]+[1,-1,-1,1][a]*i[a%2?"x":"y"]+Lt(i.margin,12)+e[a]))})},render:function(){var t,e,n,i,s=this,o=s.chart,a=o.renderer,r=s.group,l=s.box,c=s.options,u=s.padding,h=c.borderWidth,d=c.backgroundColor;s.itemX=s.initialItemX,s.itemY=s.initialItemY,s.offsetWidth=0,s.lastItemY=0,r||(s.group=r=a.g("legend").attr({zIndex:7}).add(),s.contentGroup=a.g().attr({zIndex:1}).add(r),s.scrollGroup=a.g().add(s.contentGroup)),s.renderTitle(),Xt(t=s.getAllItems(),function(t,e){return(t.options&&t.options.legendIndex||0)-(e.options&&e.options.legendIndex||0)}),c.reversed&&t.reverse(),s.allItems=t,s.display=e=!!t.length,s.lastLineHeight=0,pt(t,function(t){s.renderItem(t)}),n=(c.width||s.offsetWidth)+u,i=s.lastItemY+s.lastLineHeight+s.titleHeight,i=s.handleOverflow(i),i+=u,(h||d)&&(l?n>0&&i>0&&(l[l.isNew?"attr":"animate"](l.crisp({width:n,height:i})),l.isNew=!1):(s.box=l=a.rect(0,0,n,i,c.borderRadius,h||0).attr({stroke:c.borderColor,"stroke-width":h||0,fill:d||st}).add(r).shadow(c.shadow),l.isNew=!0),l[e?"show":"hide"]()),s.legendWidth=n,s.legendHeight=i,pt(t,function(t){s.positionItem(t)}),e&&r.align(St({width:n,height:i},c),!0,"spacingBox"),o.isResizing||this.positionCheckboxes()},handleOverflow:function(t){var e,n,i=this,s=this.chart,o=s.renderer,a=this.options,r=a.y,l="top"===a.verticalAlign,c=s.spacingBox.height+(l?-r:r)-this.padding,u=a.maxHeight,h=this.clipRect,d=a.navigation,p=Lt(d.animation,!0),m=d.arrowSize||12,f=this.nav,g=this.pages,v=this.padding,b=this.allItems,y=function(t){h.attr({height:t}),i.contentGroup.div&&(i.contentGroup.div.style.clip="rect("+v+"px,9999px,"+(v+t)+"px,0)")};return"horizontal"===a.layout&&(c/=2),u&&(c=P(c,u)),g.length=0,t>c&&!1!==d.enabled?(this.clipHeight=e=O(c-20-this.titleHeight-v,0),this.currentPage=Lt(this.currentPage,1),this.fullHeight=t,pt(b,function(t,i){var s=t._legendItemPos[1],o=I(t.legendItem.getBBox().height),a=g.length;(!a||s-g[a-1]>e&&(n||s)!==g[a-1])&&(g.push(n||s),a++),i===b.length-1&&s+o-g[a-1]>e&&g.push(s),s!==n&&(n=s)}),h||(h=i.clipRect=o.clipRect(0,v,9999,0),i.contentGroup.clip(h)),y(e),f||(this.nav=f=o.g().attr({zIndex:1}).add(this.group),this.up=o.symbol("triangle",0,0,m,m).on("click",function(){i.scroll(-1,p)}).add(f),this.pager=o.text("",15,10).css(d.style).add(f),this.down=o.symbol("triangle-down",0,0,m,m).on("click",function(){i.scroll(1,p)}).add(f)),i.scroll(0),t=c):f&&(y(s.chartHeight),f.hide(),this.scrollGroup.attr({translateY:1}),this.clipHeight=0),t},scroll:function(t,n){var i,s=this.pages,o=s.length,a=this.currentPage+t,r=this.clipHeight,l=this.options.navigation,c=l.activeColor,u=l.inactiveColor,h=this.pager,d=this.padding;a>o&&(a=o),a>0&&(n!==e&&te(n,this.chart),this.nav.attr({translateX:d,translateY:r+this.padding+7+this.titleHeight,visibility:"visible"}),this.up.attr({fill:1===a?u:c}).css({cursor:1===a?"default":"pointer"}),h.attr({text:a+"/"+o}),this.down.attr({x:18+this.pager.getBBox().width,fill:a===o?u:c}).css({cursor:a===o?"default":"pointer"}),i=-s[a-1]+this.initialItemY,this.scrollGroup.animate({translateY:i}),this.currentPage=a,this.positionCheckboxes(i))}};var _e=k.LegendSymbolMixin={drawRectangle:function(t,e){var n=t.options.symbolHeight||t.fontMetrics.f;e.legendSymbol=this.chart.renderer.rect(0,t.baseline-n+1,t.symbolWidth,n,t.options.symbolRadius||0).attr({zIndex:3}).add(e.legendGroup)},drawLineMarker:function(t){var e,n,i,s=this.options,o=s.marker,a=t.symbolWidth,r=this.chart.renderer,l=this.legendGroup,c=t.baseline-I(.3*t.fontMetrics.b);s.lineWidth&&(i={"stroke-width":s.lineWidth},s.dashStyle&&(i.dashstyle=s.dashStyle),this.legendLine=r.path([ot,0,c,at,a,c]).attr(i).add(l)),o&&!1!==o.enabled&&(e=o.radius,this.legendSymbol=n=r.symbol(this.symbol,a/2-e,c-e,2*e,2*e,o).add(l),n.isMarker=!0)}};(/Trident\/7\.0/.test(V)||H)&&Wt(Ce.prototype,"positionItem",function(t,e){var n=this,i=function(){e._legendItemPos&&t.call(n,e)};i(),setTimeout(i)});var Se=k.Chart=function(){this.getArgs.apply(this,arguments)};k.chart=function(t,e,n){return new Se(t,e,n)},Se.prototype={callbacks:[],getArgs:function(){var t=[].slice.call(arguments);(Tt(t[0])||t[0].nodeName)&&(this.renderTo=t.shift()),this.init(t[0],t[1])},init:function(t,e){var n,i=t.series;t.series=null,(n=Et(o,t)).series=t.series=i,this.userOptions=t;var s=n.chart;this.margin=this.splashArray("margin",s),this.spacing=this.splashArray("spacing",s);var a=s.events;this.bounds={h:{},v:{}},this.callback=e,this.isResizing=0,this.options=n,this.axes=[],this.series=[],this.hasCartesianSeries=s.showAxes;var r,l=this;if(l.index=Z.length,Z.push(l),tt++,!1!==s.reflow&&vt(l,"load",function(){l.initReflow()}),a)for(r in a)vt(l,r,a[r]);l.xAxis=[],l.yAxis=[],l.animation=!K&&Lt(s.animation,!0),l.pointCount=l.colorCounter=l.symbolCounter=0,l.firstRender()},initSeries:function(t){var e,n=this.options.chart,i=t.type||n.type||n.defaultSeriesType,s=ct[i];return s||ut(17,!0),(e=new s).init(this,t),e},isInsidePlot:function(t,e,n){var i=n?e:t,s=n?t:e;return i>=0&&i<=this.plotWidth&&s>=0&&s<=this.plotHeight},redraw:function(t){var e,n,i,s=this.axes,o=this.series,a=this.pointer,r=this.legend,l=this.isDirtyLegend,c=this.hasCartesianSeries,u=this.isDirtyBox,h=o.length,d=h,p=this.renderer,m=p.isHidden(),f=[];for(te(t,this),m&&this.cloneRenderTo(),this.layOutTitles();d--;)if((i=o[d]).options.stacking&&(e=!0,i.isDirty)){n=!0;break}if(n)for(d=h;d--;)(i=o[d]).options.stacking&&(i.isDirty=!0);pt(o,function(t){t.isDirty&&"point"===t.options.legendType&&(t.updateTotals&&t.updateTotals(),l=!0),t.isDirtyData&&yt(t,"updatedData")}),l&&r.options.enabled&&(r.render(),this.isDirtyLegend=!1),e&&this.getStacks(),c&&(this.isResizing||(this.maxTicks=null,pt(s,function(t){t.updateNames(),t.setScale()}))),this.getMargins(),c&&(pt(s,function(t){t.isDirty&&(u=!0)}),pt(s,function(t){var n=t.min+","+t.max;t.extKey!==n&&(t.extKey=n,f.push(function(){yt(t,"afterSetExtremes",St(t.eventArgs,t.getExtremes())),delete t.eventArgs})),(u||e)&&t.redraw()})),u&&this.drawChartBox(),pt(o,function(t){t.isDirty&&t.visible&&(!t.isCartesian||t.xAxis)&&t.redraw()}),a&&a.reset(!0),p.draw(),yt(this,"redraw"),m&&this.cloneRenderTo(!0),pt(f,function(t){t.call()})},get:function(t){var e,n,i,s=this.axes,o=this.series;for(e=0;e<s.length;e++)if(s[e].options.id===t)return s[e];for(e=0;e<o.length;e++)if(o[e].options.id===t)return o[e];for(e=0;e<o.length;e++)for(i=o[e].points||[],n=0;n<i.length;n++)if(i[n].id===t)return i[n];return null},getAxes:function(){var t,e=this,n=this.options,i=n.xAxis=Ft(n.xAxis||{}),s=n.yAxis=Ft(n.yAxis||{});pt(i,function(t,e){t.index=e,t.isX=!0}),pt(s,function(t,e){t.index=e}),t=i.concat(s),pt(t,function(t){new me(e,t)})},getSelectedPoints:function(){var t=[];return pt(this.series,function(e){t=t.concat(mt(e.points||[],function(t){return t.selected}))}),t},getSelectedSeries:function(){return mt(this.series,function(t){return t.selected})},setTitle:function(t,e,n){var i,s,o=this,a=o.options;i=a.title=Et(a.title,t),s=a.subtitle=Et(a.subtitle,e),pt([["title",t,i],["subtitle",e,s]],function(t){var e=t[0],n=o[e],i=t[1],s=t[2];n&&i&&(o[e]=n=n.destroy()),s&&s.text&&!n&&(o[e]=o.renderer.text(s.text,0,0,s.useHTML).attr({align:s.align,class:nt+e,zIndex:s.zIndex||4}).css(s.style).add())}),o.layOutTitles(n)},layOutTitles:function(t){var e,n=0,i=this.title,s=this.subtitle,o=this.options,a=o.title,r=o.subtitle,l=this.renderer,c=this.spacingBox;i&&(i.css({width:(a.width||c.width+a.widthAdjust)+it}).align(St({y:l.fontMetrics(a.style.fontSize,i).b-3},a),!1,c),a.floating||a.verticalAlign||(n=i.getBBox().height)),s&&(s.css({width:(r.width||c.width+r.widthAdjust)+it}).align(St({y:n+(a.margin-13)+l.fontMetrics(r.style.fontSize,i).b},r),!1,c),r.floating||r.verticalAlign||(n=D(n+s.getBBox().height))),e=this.titleOffset!==n,this.titleOffset=n,!this.isDirtyBox&&e&&(this.isDirtyBox=e,this.hasRendered&&Lt(t,!0)&&this.isDirtyBox&&this.redraw())},getChartSize:function(){var t=this.options.chart,e=t.width,n=t.height,i=this.renderToClone||this.renderTo;Ot(e)||(this.containerWidth=ht(i,"width")),Ot(n)||(this.containerHeight=ht(i,"height")),this.chartWidth=O(0,e||this.containerWidth||600),this.chartHeight=O(0,Lt(n,this.containerHeight>19?this.containerHeight:400))},cloneRenderTo:function(t){var e=this.renderToClone,n=this.container;if(t){if(e){for(;e.childNodes.length;)this.renderTo.appendChild(e.firstChild);$t(e),delete this.renderToClone}}else n&&n.parentNode===this.renderTo&&this.renderTo.removeChild(n),this.renderToClone=e=this.renderTo.cloneNode(0),Rt(e,{position:"absolute",top:"-9999px",display:"block"}),e.style.setProperty&&e.style.setProperty("display","block","important"),T.body.appendChild(e),n&&e.appendChild(n)},getContainer:function(){var t,e,i,s,o,a=this.options,r=a.chart,l=this.renderTo,c="highcharts-"+Q++;l||(this.renderTo=l=r.renderTo),Tt(l)&&(this.renderTo=l=T.getElementById(l)),l||ut(13,!0),s=kt(Pt(l,"data-highcharts-chart")),Nt(s)&&Z[s]&&Z[s].hasRendered&&Z[s].destroy(),Pt(l,"data-highcharts-chart",this.index),l.innerHTML="",r.skipClone||l.offsetWidth||this.cloneRenderTo(),this.getChartSize(),e=this.chartWidth,i=this.chartHeight,this.container=t=jt(et,{className:nt+"container"+(r.className?" "+r.className:""),id:c},St({position:"relative",overflow:"hidden",width:e+it,height:i+it,textAlign:"left",lineHeight:"normal",zIndex:0,"-webkit-tap-highlight-color":"rgba(0,0,0,0)"},r.style),this.renderToClone||l),this._cursor=t.style.cursor,o=k[r.renderer]||n,this.renderer=new o(t,e,i,r.style,r.forExport,a.exporting&&a.exporting.allowHTML),K&&this.renderer.create(this,t,e,i),this.renderer.chartIndex=this.index},getMargins:function(t){var e=this.spacing,n=this.margin,i=this.titleOffset;this.resetMargins(),i&&!Ot(n[0])&&(this.plotTop=O(this.plotTop,i+this.options.title.margin+e[0])),this.legend.display&&this.legend.adjustMargins(n,e),this.extraBottomMargin&&(this.marginBottom+=this.extraBottomMargin),this.extraTopMargin&&(this.plotTop+=this.extraTopMargin),t||this.getAxisMargins()},getAxisMargins:function(){var t=this,e=t.axisOffset=[0,0,0,0],n=t.margin;t.hasCartesianSeries&&pt(t.axes,function(t){t.visible&&t.getOffset()}),pt(lt,function(i,s){Ot(n[s])||(t[i]+=e[s])}),t.setChartSize()},reflow:function(e){var n=this,i=n.options.chart,s=n.renderTo,o=Ot(i.width),a=i.width||ht(s,"width"),r=i.height||ht(s,"height"),l=e?e.target:t;o||n.isPrinting||!a||!r||l!==t&&l!==T||(a===n.containerWidth&&r===n.containerHeight||(clearTimeout(n.reflowTimeout),n.reflowTimeout=Mt(function(){n.container&&n.setSize(void 0,void 0,!1)},e?100:0)),n.containerWidth=a,n.containerHeight=r)},initReflow:function(){var e=this,n=function(t){e.reflow(t)};vt(t,"resize",n),vt(e,"destroy",function(){bt(t,"resize",n)})},setSize:function(t,e,n){var i,s=this,o=s.renderer;s.isResizing+=1,te(n,s),s.oldChartHeight=s.chartHeight,s.oldChartWidth=s.chartWidth,void 0!==t&&(s.options.chart.width=t),void 0!==e&&(s.options.chart.height=e),s.getChartSize(),((i=o.globalAnimation)?wt:Rt)(s.container,{width:s.chartWidth+it,height:s.chartHeight+it},i),s.setChartSize(!0),o.setSize(s.chartWidth,s.chartHeight,n),s.maxTicks=null,pt(s.axes,function(t){t.isDirty=!0,t.setScale()}),pt(s.series,function(t){t.isDirty=!0}),s.isDirtyLegend=!0,s.isDirtyBox=!0,s.layOutTitles(),s.getMargins(),s.redraw(n),s.oldChartHeight=null,yt(s,"resize"),Mt(function(){s&&yt(s,"endResize",null,function(){s.isResizing-=1})},ee(i).duration)},setChartSize:function(t){var e,n,i,s,o,a,r,l=this.inverted,c=this.renderer,u=this.chartWidth,h=this.chartHeight,d=this.options.chart,p=this.spacing,m=this.clipOffset;this.plotLeft=i=I(this.plotLeft),this.plotTop=s=I(this.plotTop),this.plotWidth=o=O(0,I(u-i-this.marginRight)),this.plotHeight=a=O(0,I(h-s-this.marginBottom)),this.plotSizeX=l?a:o,this.plotSizeY=l?o:a,this.plotBorderWidth=d.plotBorderWidth||0,this.spacingBox=c.spacingBox={x:p[3],y:p[0],width:u-p[3]-p[1],height:h-p[0]-p[2]},this.plotBox=c.plotBox={x:i,y:s,width:o,height:a},r=2*N(this.plotBorderWidth/2),e=D(O(r,m[3])/2),n=D(O(r,m[0])/2),this.clipBox={x:e,y:n,width:N(this.plotSizeX-O(r,m[1])/2-e),height:O(0,N(this.plotSizeY-O(r,m[2])/2-n))},t||pt(this.axes,function(t){t.setAxisSize(),t.setAxisTranslation()})},resetMargins:function(){var t=this;pt(lt,function(e,n){t[e]=Lt(t.margin[n],t.spacing[n])}),t.axisOffset=[0,0,0,0],t.clipOffset=[0,0,0,0]},drawChartBox:function(){var t,e,n=this.options.chart,i=this.renderer,s=this.chartWidth,o=this.chartHeight,a=this.chartBackground,r=this.plotBackground,l=this.plotBorder,c=this.plotBGImage,u=n.borderWidth||0,h=n.backgroundColor,d=n.plotBackgroundColor,p=n.plotBackgroundImage,m=n.plotBorderWidth||0,f=this.plotLeft,g=this.plotTop,v=this.plotWidth,b=this.plotHeight,y=this.plotBox,w=this.clipRect,x=this.clipBox;t=u+(n.shadow?8:0),(u||h)&&(a?a.animate(a.crisp({width:s-t,height:o-t})):(e={fill:h||st},u&&(e.stroke=n.borderColor,e["stroke-width"]=u),this.chartBackground=i.rect(t/2,t/2,s-t,o-t,n.borderRadius,u).attr(e).addClass(nt+"background").add().shadow(n.shadow))),d&&(r?r.animate(y):this.plotBackground=i.rect(f,g,v,b,0).attr({fill:d}).add().shadow(n.plotShadow)),p&&(c?c.animate(y):this.plotBGImage=i.image(p,f,g,v,b).add()),w?w.animate({width:x.width,height:x.height}):this.clipRect=i.clipRect(x),m&&(l?(l.strokeWidth=-m,l.animate(l.crisp({x:f,y:g,width:v,height:b}))):this.plotBorder=i.rect(f,g,v,b,0,-m).attr({stroke:n.plotBorderColor,"stroke-width":m,fill:st,zIndex:1}).add()),this.isDirtyBox=!1},propFromSeries:function(){var t,e,n,i=this,s=i.options.chart,o=i.options.series;pt(["inverted","angular","polar"],function(a){for(t=ct[s.type||s.defaultSeriesType],n=i[a]||s[a]||t&&t.prototype[a],e=o&&o.length;!n&&e--;)(t=ct[o[e].type])&&t.prototype[a]&&(n=!0);i[a]=n})},linkSeries:function(){var t=this,e=t.series;pt(e,function(t){t.linkedSeries.length=0}),pt(e,function(e){var n=e.options.linkedTo;Tt(n)&&(n=":previous"===n?t.series[e.index-1]:t.get(n))&&n.linkedParent!==e&&(n.linkedSeries.push(e),e.linkedParent=n,e.visible=Lt(e.options.visible,n.options.visible,e.visible))})},renderSeries:function(){pt(this.series,function(t){t.translate(),t.render()})},renderLabels:function(){var t=this,e=t.options.labels;e.items&&pt(e.items,function(n){var i=St(e.style,n.style),s=kt(i.left)+t.plotLeft,o=kt(i.top)+t.plotTop+12;delete i.left,delete i.top,t.renderer.text(n.html,s,o).attr({zIndex:2}).css(i).add()})},render:function(){var t,e,n,i,s=this.axes,o=this.renderer,a=this.options;this.setTitle(),this.legend=new Ce(this,a.legend),this.getStacks&&this.getStacks(),this.getMargins(!0),this.setChartSize(),t=this.plotWidth,e=this.plotHeight=this.plotHeight-21,pt(s,function(t){t.setScale()}),this.getAxisMargins(),n=t/this.plotWidth>1.1,i=e/this.plotHeight>1.05,(n||i)&&(this.maxTicks=null,pt(s,function(t){(t.horiz&&n||!t.horiz&&i)&&t.setTickInterval(!0)}),this.getMargins()),this.drawChartBox(),this.hasCartesianSeries&&pt(s,function(t){t.visible&&t.render()}),this.seriesGroup||(this.seriesGroup=o.g("series-group").attr({zIndex:3}).add()),this.renderSeries(),this.renderLabels(),this.showCredits(a.credits),this.hasRendered=!0},showCredits:function(e){e.enabled&&!this.credits&&(this.credits=this.renderer.text(e.text,0,0).on("click",function(){e.href&&(t.location.href=e.href)}).attr({align:e.position.align,zIndex:8}).css(e.style).add().align(e.position))},destroy:function(){var t,n=this,i=n.axes,s=n.series,o=n.container,a=o&&o.parentNode;for(yt(n,"destroy"),Z[n.index]=e,tt--,n.renderTo.removeAttribute("data-highcharts-chart"),bt(n),t=i.length;t--;)i[t]=i[t].destroy();for(t=s.length;t--;)s[t]=s[t].destroy();for(t in pt(["title","subtitle","chartBackground","plotBackground","plotBGImage","plotBorder","seriesGroup","clipRect","credits","pointer","scroller","rangeSelector","legend","resetZoomButton","tooltip","renderer"],function(t){var e=n[t];e&&e.destroy&&(n[t]=e.destroy())}),o&&(o.innerHTML="",bt(o),a&&$t(o)),n)delete n[t]},isReadyToRender:function(){var e=this;return!(!Y&&t==t.top&&"complete"!==T.readyState||K&&!t.canvg)||(K?ue.push(function(){e.firstRender()},e.options.global.canvasToolsURL):T.attachEvent("onreadystatechange",function(){T.detachEvent("onreadystatechange",e.firstRender),"complete"===T.readyState&&e.firstRender()}),!1)},firstRender:function(){var t=this,e=t.options;t.isReadyToRender()&&(t.getContainer(),yt(t,"init"),t.resetMargins(),t.setChartSize(),t.propFromSeries(),t.getAxes(),pt(e.series||[],function(e){t.initSeries(e)}),t.linkSeries(),yt(t,"beforeRender"),k.Pointer&&(t.pointer=new ve(t,e)),t.render(),t.renderer.draw(),!t.renderer.imgCount&&t.onload&&t.onload(),t.cloneRenderTo(!0))},onload:function(){var t=this;pt([this.callback].concat(this.callbacks),function(e){e&&void 0!==t.index&&e.apply(t,[t])}),yt(t,"load"),this.onload=null},splashArray:function(t,e){var n=e[t],i=It(n)?n:[n,n,n,n];return[Lt(e[t+"Top"],i[0]),Lt(e[t+"Right"],i[1]),Lt(e[t+"Bottom"],i[2]),Lt(e[t+"Left"],i[3])]}};var Ee=k.CenteredSeriesMixin={getCenter:function(){var t,e,n,i=this.options,s=this.chart,o=2*(i.slicedOffset||0),a=s.plotWidth-2*o,r=s.plotHeight-2*o,l=i.center,c=[Lt(l[0],"50%"),Lt(l[1],"50%"),i.size||"100%",i.innerSize||0],u=P(a,r);for(e=0;e<4;++e)n=c[e],t=e<2||2===e&&/%$/.test(n),c[e]=zt(n,[a,r,u,c[2]][e])+(t?o:0);return c[3]>c[2]&&(c[3]=c[2]),c}},ke=function(){};ke.prototype={init:function(t,e,n){var i;return this.series=t,this.color=t.color,this.applyOptions(e,n),this.pointAttr={},t.options.colorByPoint&&(i=t.options.colors||t.chart.options.colors,this.color=this.color||i[t.colorCounter++],t.colorCounter===i.length&&(t.colorCounter=0)),t.chart.pointCount++,this},applyOptions:function(t,e){var n=this.series,i=n.options.pointValKey||n.pointValKey;return t=ke.prototype.optionsToObject.call(this,t),St(this,t),this.options=this.options?St(this.options,t):t,t.group&&delete this.group,i&&(this.y=this[i]),this.isNull=Lt(this.isValid&&!this.isValid(),null===this.x||!Nt(this.y,!0)),"name"in this&&void 0===e&&n.xAxis&&n.xAxis.hasNames&&(this.x=n.xAxis.nameToX(this)),void 0===this.x&&n&&(this.x=void 0===e?n.autoIncrement(this):e),this},optionsToObject:function(t){var e,n={},i=this.series,s=i.options.keys,o=s||i.pointArrayMap||["y"],a=o.length,r=0,l=0;if(Nt(t)||null===t)n[o[0]]=t;else if(At(t))for(!s&&t.length>a&&("string"===(e=typeof t[0])?n.name=t[0]:"number"===e&&(n.x=t[0]),r++);l<a;)s&&void 0===t[r]||(n[o[l]]=t[r]),r++,l++;else"object"==typeof t&&(n=t,t.dataLabels&&(i._hasPointLabels=!0),t.marker&&(i._hasPointMarkers=!0));return n},destroy:function(){var t,e=this.series.chart,n=e.hoverPoints;for(t in e.pointCount--,n&&(this.setState(),Dt(n,this),n.length||(e.hoverPoints=null)),this===e.hoverPoint&&this.onMouseOut(),(this.graphic||this.dataLabel)&&(bt(this),this.destroyElements()),this.legendItem&&e.legend.destroyItem(this),this)this[t]=null},destroyElements:function(){for(var t,e=["graphic","dataLabel","dataLabelUpper","connector","shadowGroup"],n=6;n--;)this[t=e[n]]&&(this[t]=this[t].destroy())},getLabelConfig:function(){return{x:this.category,y:this.y,color:this.color,key:this.name||this.category,series:this.series,point:this,percentage:this.percentage,total:this.total||this.stackTotal}},tooltipFormatter:function(t){var e=this.series,n=e.tooltipOptions,i=Lt(n.valueDecimals,""),s=n.valuePrefix||"",o=n.valueSuffix||"";return pt(e.pointArrayMap||["y"],function(e){e="{point."+e,(s||o)&&(t=t.replace(e+"}",s+e+"}"+o)),t=t.replace(e+"}",e+":,."+i+"f}")}),qt(t,{point:this,series:this.series})},firePointEvent:function(t,e,n){var i=this,s=this.series.options;(s.point.events[t]||i.options&&i.options.events&&i.options.events[t])&&this.importEvents(),"click"===t&&s.allowPointSelect&&(n=function(t){i.select&&i.select(null,t.ctrlKey||t.metaKey||t.shiftKey)}),yt(this,t,e,n)},visible:!0};var Te=k.Series=function(){};function Ae(t,e,n,i,s){var o=t.chart.inverted;this.axis=t,this.isNegative=n,this.options=e,this.x=i,this.total=null,this.points={},this.stack=s,this.leftCliff=0,this.rightCliff=0,this.alignOptions={align:e.align||(o?n?"left":"right":"center"),verticalAlign:e.verticalAlign||(o?"middle":n?"bottom":"top"),y:Lt(e.y,o?4:n?14:-6),x:Lt(e.x,o?n?-6:6:0)},this.textAlign=e.textAlign||(o?n?"right":"left":"center")}Te.prototype={isCartesian:!0,type:"line",pointClass:ke,sorted:!0,requireSorting:!0,pointAttrToOptions:{stroke:"lineColor","stroke-width":"lineWidth",fill:"fillColor",r:"radius"},directTouch:!1,axisTypes:["xAxis","yAxis"],colorCounter:0,parallelArrays:["x","y"],init:function(t,e){var n,i,s=this,o=t.series,a=function(t,e){return Lt(t.options.index,t._i)-Lt(e.options.index,e._i)};for(n in s.chart=t,s.options=e=s.setOptions(e),s.linkedSeries=[],s.bindAxes(),St(s,{name:e.name,state:"",pointAttr:{},visible:!1!==e.visible,selected:!0===e.selected}),K&&(e.animation=!1),i=e.events)vt(s,n,i[n]);(i&&i.click||e.point&&e.point.events&&e.point.events.click||e.allowPointSelect)&&(t.runTrackerClick=!0),s.getColor(),s.getSymbol(),pt(s.parallelArrays,function(t){s[t+"Data"]=[]}),s.setData(e.data,!1),s.isCartesian&&(t.hasCartesianSeries=!0),o.push(s),s._i=o.length-1,Xt(o,a),this.yAxis&&Xt(this.yAxis.series,a),pt(o,function(t,e){t.index=e,t.name=t.name||"Series "+(e+1)})},bindAxes:function(){var t,n=this,i=n.options,s=n.chart;pt(n.axisTypes||[],function(o){pt(s[o],function(s){t=s.options,(i[o]===t.index||i[o]!==e&&i[o]===t.id||i[o]===e&&0===t.index)&&(s.series.push(n),n[o]=s,s.isDirty=!0)}),n[o]||n.optionalAxis===o||ut(18,!0)})},updateParallelArrays:function(t,e){var n=t.series,i=arguments,s=Nt(e)?function(i){var s="y"===i&&n.toYData?n.toYData(t):t[i];n[i+"Data"][e]=s}:function(t){Array.prototype[e].apply(n[t+"Data"],Array.prototype.slice.call(i,2))};pt(n.parallelArrays,s)},autoIncrement:function(){var t,e,n=this.options,i=this.xIncrement,s=n.pointIntervalUnit;return i=Lt(i,n.pointStart,0),this.pointInterval=e=Lt(this.pointInterval,n.pointInterval,1),s&&(t=new c(i),"day"===s?t=+t[_](t[g]()+e):"month"===s?t=+t[S](t[v]()+e):"year"===s&&(t=+t[E](t[b]()+e)),e=t-i),this.xIncrement=i+e,i},setOptions:function(t){var e,n,i=this.chart,s=i.options.plotOptions,a=i.userOptions||{},r=a.plotOptions||{},l=s[this.type];return this.userOptions=t,e=Et(l,s.series,t),this.tooltipOptions=Et(o.tooltip,o.plotOptions[this.type].tooltip,a.tooltip,r.series&&r.series.tooltip,r[this.type]&&r[this.type].tooltip,t.tooltip),null===l.marker&&delete e.marker,this.zoneAxis=e.zoneAxis,n=this.zones=(e.zones||[]).slice(),!e.negativeColor&&!e.negativeFillColor||e.zones||n.push({value:e[this.zoneAxis+"Threshold"]||e.threshold||0,color:e.negativeColor,fillColor:e.negativeFillColor}),n.length&&Ot(n[n.length-1].value)&&n.push({color:this.color,fillColor:this.fillColor}),e},getCyclic:function(t,e,n){var i,s=this.userOptions,o="_"+t+"Index",a=t+"Counter";e||(Ot(s[o])?i=s[o]:(s[o]=i=this.chart[a]%n.length,this.chart[a]+=1),e=n[i]),this[t]=e},getColor:function(){this.options.colorByPoint?this.options.color=null:this.getCyclic("color",this.options.color||ie[this.type].color,this.chart.options.colors)},getSymbol:function(){var t=this.options.marker;this.getCyclic("symbol",t.symbol,this.chart.options.symbols),/^url/.test(this.symbol)&&(t.radius=0)},drawLegendSymbol:_e.drawLineMarker,setData:function(t,n,i,s){var o,a,r,l=this,c=l.points,u=c&&c.length||0,h=l.options,d=l.chart,p=null,m=l.xAxis,f=h.turboThreshold,g=this.xData,v=this.yData,b=l.pointArrayMap,y=b&&b.length;if(o=(t=t||[]).length,n=Lt(n,!0),!1!==s&&o&&u===o&&!l.cropped&&!l.hasGroupedData&&l.visible)pt(t,function(t,e){c[e].update&&t!==h.data[e]&&c[e].update(t,!1,null,!1)});else{if(l.xIncrement=null,l.colorCounter=0,pt(this.parallelArrays,function(t){l[t+"Data"].length=0}),f&&o>f){for(a=0;null===p&&a<o;)p=t[a],a++;if(Nt(p))for(a=0;a<o;a++)g[a]=this.autoIncrement(),v[a]=t[a];else if(At(p))if(y)for(a=0;a<o;a++)r=t[a],g[a]=r[0],v[a]=r.slice(1,y+1);else for(a=0;a<o;a++)r=t[a],g[a]=r[0],v[a]=r[1];else ut(12)}else for(a=0;a<o;a++)t[a]!==e&&(r={series:l},l.pointClass.prototype.applyOptions.apply(r,[t[a]]),l.updateParallelArrays(r,a));for(Tt(v[0])&&ut(14,!0),l.data=[],l.options.data=l.userOptions.data=t,a=u;a--;)c[a]&&c[a].destroy&&c[a].destroy();m&&(m.minRange=m.userMinRange),l.isDirty=l.isDirtyData=d.isDirtyBox=!0,i=!1}"point"===h.legendType&&(this.processData(),this.generatePoints()),n&&d.redraw(i)},processData:function(t){var n,i,s,o,a,r,l,c,u=this.xData,h=this.yData,d=u.length,p=0,m=this.xAxis,f=this.options,g=f.cropThreshold,v=this.getExtremesFromAll||f.getExtremesFromAll,b=this.isCartesian,y=m&&m.val2lin,w=m&&m.isLog;if(b&&!this.isDirty&&!m.isDirty&&!this.yAxis.isDirty&&!t)return!1;for(m&&(l=(r=m.getExtremes()).min,c=r.max),b&&this.sorted&&!v&&(!g||d>g||this.forceCrop)&&(u[d-1]<l||u[0]>c?(u=[],h=[]):(u[0]<l||u[d-1]>c)&&(u=(n=this.cropData(this.xData,this.yData,l,c)).xData,h=n.yData,p=n.start,i=!0)),a=u.length||1;--a;)(s=w?y(u[a])-y(u[a-1]):u[a]-u[a-1])>0&&(o===e||s<o)?o=s:s<0&&this.requireSorting&&ut(15);this.cropped=i,this.cropStart=p,this.processedXData=u,this.processedYData=h,this.closestPointRange=o},cropData:function(t,e,n,i){var s,o,a=t.length,r=0,l=a,c=Lt(this.cropShoulder,1);for(s=0;s<a;s++)if(t[s]>=n){r=O(0,s-c);break}for(o=s;o<a;o++)if(t[o]>i){l=o+c;break}return{xData:t.slice(r,l),yData:e.slice(r,l),start:r,end:l}},generatePoints:function(){var t,n,i,s,o=this.options.data,a=this.data,r=this.processedXData,l=this.processedYData,c=this.pointClass,u=r.length,h=this.cropStart||0,d=this.hasGroupedData,p=[];if(!a&&!d){var m=[];m.length=o.length,a=this.data=m}for(s=0;s<u;s++)n=h+s,d?(p[s]=(new c).init(this,[r[s]].concat(Ft(l[s]))),p[s].dataGroup=this.groupMap[s]):(a[n]?i=a[n]:o[n]!==e&&(a[n]=i=(new c).init(this,o[n],r[s])),p[s]=i),p[s].index=n;if(a&&(u!==(t=a.length)||d))for(s=0;s<t;s++)s!==h||d||(s+=u),a[s]&&(a[s].destroyElements(),a[s].plotX=e);this.data=a,this.points=p},getExtremes:function(t){var e,n,i,s,o,a,r,l=this.xAxis,c=this.yAxis,u=this.processedXData,h=[],d=0,p=l.getExtremes(),m=p.min,f=p.max;for(e=(t=t||this.stackedYData||this.processedYData||[]).length,a=0;a<e;a++)if(s=u[a],o=t[a],n=(Nt(o,!0)||At(o))&&(!c.isLog||o.length||o>0),i=this.getExtremesFromAll||this.options.getExtremesFromAll||this.cropped||(u[a+1]||s)>=m&&(u[a-1]||s)<=f,n&&i)if(r=o.length)for(;r--;)null!==o[r]&&(h[d++]=o[r]);else h[d++]=o;this.dataMin=Kt(h),this.dataMax=Jt(h)},translate:function(){this.processedXData||this.processData(),this.generatePoints();var t,n,i,s,o,a=this.options,r=a.stacking,l=this.xAxis,c=l.categories,u=this.yAxis,h=this.points,d=h.length,p=!!this.modifyValue,m=a.pointPlacement,f="between"===m||Nt(m),g=a.threshold,v=a.startFromThreshold?g:0,b=Number.MAX_VALUE;for(t=0;t<d;t++){var y,w,x=h[t],C=x.x,_=x.y,S=x.low,E=r&&u.stacks[(this.negStacks&&_<(v?0:g)?"-":"")+this.stackKey];u.isLog&&null!==_&&_<=0&&(x.isNull=!0),x.plotX=n=Zt(P(O(-1e5,l.translate(C,0,0,0,1,m,"flags"===this.type)),1e5)),r&&this.visible&&!x.isNull&&E&&E[C]&&(o=this.getStackIndicator(o,C,this.index),S=(w=(y=E[C]).points[o.key])[0],_=w[1],S===v&&o.key===E[C].base&&(S=Lt(g,u.min)),u.isLog&&S<=0&&(S=null),x.total=x.stackTotal=y.total,x.percentage=y.total&&x.y/y.total*100,x.stackY=_,y.setOffset(this.pointXOffset||0,this.barW||0)),x.yBottom=Ot(S)?u.translate(S,0,1,0,1):null,p&&(_=this.modifyValue(_,x)),x.plotY=i="number"==typeof _&&_!==1/0?P(O(-1e5,u.translate(_,0,1,0,1)),1e5):e,x.isInside=i!==e&&i>=0&&i<=u.len&&n>=0&&n<=l.len,x.clientX=f?Zt(l.translate(C,0,0,0,1,m)):n,x.negative=x.y<(g||0),x.category=c&&c[x.x]!==e?c[x.x]:x.x,x.isNull||(void 0!==s&&(b=P(b,F(n-s))),s=n)}this.closestPointRangePx=b},getValidPoints:function(t,e){var n=this.chart;return mt(t||this.points||[],function(t){return!(e&&!n.isInsidePlot(t.plotX,t.plotY,n.inverted))&&!t.isNull})},setClip:function(t){var e=this.chart,n=this.options,i=e.renderer,s=e.inverted,o=this.clipBox,a=o||e.clipBox,r=this.sharedClipKey||["_sharedClip",t&&t.duration,t&&t.easing,a.height,n.xAxis,n.yAxis].join(","),l=e[r],c=e[r+"m"];l||(t&&(a.width=0,e[r+"m"]=c=i.clipRect(-99,s?-e.plotLeft:-e.plotTop,99,s?e.chartWidth:e.chartHeight)),e[r]=l=i.clipRect(a),l.count={length:0}),t&&(l.count[this.index]||(l.count[this.index]=!0,l.count.length+=1)),!1!==n.clip&&(this.group.clip(t||o?l:e.clipRect),this.markerGroup.clip(c),this.sharedClipKey=r),t||(l.count[this.index]&&(delete l.count[this.index],l.count.length-=1),0===l.count.length&&r&&e[r]&&(o||(e[r]=e[r].destroy()),e[r+"m"]&&(e[r+"m"]=e[r+"m"].destroy())))},animate:function(t){var e,n,i=this.chart,s=ee(this.options.animation);t?this.setClip(s):((e=i[n=this.sharedClipKey])&&e.animate({width:i.plotSizeX},s),i[n+"m"]&&i[n+"m"].animate({width:i.plotSizeX+99},s),this.animate=null)},afterAnimate:function(){this.setClip(),yt(this,"afterAnimate")},drawPoints:function(){var t,n,i,s,o,a,r,l,c,u,h,d,p,m=this.points,f=this.chart,g=this.options.marker,v=this.pointAttr[""],b=this.markerGroup,y=this.xAxis,w=Lt(g.enabled,y.isRadial,this.closestPointRangePx>2*g.radius);if(!1!==g.enabled||this._hasPointMarkers)for(s=m.length;s--;)o=m[s],n=N(o.plotX),i=o.plotY,c=o.graphic,u=o.marker||{},h=!!o.marker,d=w&&u.enabled===e||u.enabled,p=o.isInside,d&&Nt(i)&&null!==o.y?(a=(t=o.pointAttr[o.selected?"select":""]||v).r,l=0===(r=Lt(u.symbol,this.symbol)).indexOf("url"),c?c[p?"show":"hide"](!0).attr(t).animate(St({x:n-a,y:i-a},c.symbolName?{width:2*a,height:2*a}:{})):p&&(a>0||l)&&(o.graphic=c=f.renderer.symbol(r,n-a,i-a,2*a,2*a,h?u:g).attr(t).add(b))):c&&(o.graphic=c.destroy())},convertAttribs:function(t,e,n,i){var s,o,a=this.pointAttrToOptions,r={};for(s in t=t||{},e=e||{},n=n||{},i=i||{},a)o=a[s],r[s]=Lt(t[o],e[s],n[s],i[s]);return r},getAttribs:function(){var t,e,n,i,s,o,a,r,l,c=this,u=c.options,h=ie[c.type].marker?u.marker:u,d=h.states,p=d.hover,m=c.color,f=c.options.negativeColor,g={stroke:m,fill:m},v=c.points||[],b=[],y=c.pointAttrToOptions,w=c.hasPointSpecificOptions,x=h.lineColor,C=h.fillColor,_=u.turboThreshold,S=c.zones,E=c.zoneAxis||"y";if(u.marker?(p.radius=+p.radius||+h.radius+ +p.radiusPlus,p.lineWidth=p.lineWidth||h.lineWidth+p.lineWidthPlus):(p.color=p.color||oe(p.color||m).brighten(p.brightness).get(),p.negativeColor=p.negativeColor||oe(p.negativeColor||f).brighten(p.brightness).get()),b[""]=c.convertAttribs(h,g),pt(["hover","select"],function(t){b[t]=c.convertAttribs(d[t],b[""])}),c.pointAttr=b,e=v.length,!_||e<_||w)for(;e--;){if((h=(s=v[e]).options&&s.options.marker||s.options)&&!1===h.enabled&&(h.radius=0),a=null,S.length){for(i=S[n=0];s[E]>=i.value;)i=S[++n];s.color=s.fillColor=a=Lt(i.color,c.color)}if(w=u.colorByPoint||s.color,s.options)for(l in y)Ot(h[y[l]])&&(w=!0);w?(o=[],t=(d=(h=h||{}).states||{}).hover=d.hover||{},u.marker&&(!s.negative||t.fillColor||p.fillColor)||(t[c.pointAttrToOptions.fill]=t.color||!s.options.color&&p[s.negative&&f?"negativeColor":"color"]||oe(s.color).brighten(t.brightness||p.brightness).get()),r={color:s.color},C||(r.fillColor=s.color),x||(r.lineColor=s.color),h.hasOwnProperty("color")&&!h.color&&delete h.color,a&&!p.fillColor&&(t.fillColor=a),o[""]=c.convertAttribs(St(r,h),b[""]),o.hover=c.convertAttribs(d.hover,b.hover,o[""]),o.select=c.convertAttribs(d.select,b.select,o[""])):o=b,s.pointAttr=o}},destroy:function(){var t,e,n,i,s,o=this,a=o.chart,r=/AppleWebKit\/533/.test(V),l=o.data||[];for(yt(o,"destroy"),bt(o),pt(o.axisTypes||[],function(t){(s=o[t])&&(Dt(s.series,o),s.isDirty=s.forceRedraw=!0)}),o.legendItem&&o.chart.legend.destroyItem(o),e=l.length;e--;)(n=l[e])&&n.destroy&&n.destroy();for(i in o.points=null,clearTimeout(o.animationTimeout),o)o[i]instanceof ae&&!o[i].survive&&(t=r&&"group"===i?"hide":"destroy",o[i][t]());for(i in a.hoverSeries===o&&(a.hoverSeries=null),Dt(a.series,o),o)delete o[i]},getGraphPath:function(t,e,n){var i,s,o=this,a=o.options,r=a.step,l=[],c=[];return(i=(t=t||o.points).reversed)&&t.reverse(),(r={right:1,center:2}[r]||r&&3)&&i&&(r=4-r),!a.connectNulls||e||n||(t=this.getValidPoints(t)),pt(t,function(i,u){var h,d=i.plotX,p=i.plotY,m=t[u-1];(i.leftCliff||m&&m.rightCliff)&&!n&&(s=!0),i.isNull&&!Ot(e)&&u>0?s=!a.connectNulls:i.isNull&&!e?s=!0:(0===u||s?h=[ot,i.plotX,i.plotY]:o.getPointSpline?h=o.getPointSpline(t,i,u):r?(h=1===r?[at,m.plotX,p]:2===r?[at,(m.plotX+d)/2,m.plotY,at,(m.plotX+d)/2,p]:[at,d,m.plotY]).push(at,d,p):h=[at,d,p],c.push(i.x),r&&c.push(i.x),l.push.apply(l,h),s=!1)}),l.xMap=c,o.graphPath=l,l},drawGraph:function(){var t=this,e=this.options,n=[["graph",e.lineColor||this.color,e.dashStyle]],i=e.lineWidth,s="square"!==e.linecap,o=(this.gappedPath||this.getGraphPath).call(this),a=this.zones;pt(a,function(i,s){n.push(["zoneGraph"+s,i.color||t.color,i.dashStyle||e.dashStyle])}),pt(n,function(n,a){var r,l=n[0],c=t[l];c?(c.endX=o.xMap,c.animate({d:o})):i&&o.length&&(r={stroke:n[1],"stroke-width":i,fill:"none",zIndex:1},n[2]?r.dashstyle=n[2]:s&&(r["stroke-linecap"]=r["stroke-linejoin"]="round"),c=t[l]=t.chart.renderer.path(o).attr(r).add(t.group).shadow(a<2&&e.shadow)),c&&(c.startX=o.xMap,c.isArea=o.isArea)})},applyZones:function(){var t,n,i,s,o,a,r,l,c,u=this,h=this.chart,d=h.renderer,p=this.zones,m=this.clips||[],f=this.graph,g=this.area,v=O(h.chartWidth,h.chartHeight),b=this[(this.zoneAxis||"y")+"Axis"],y=h.inverted,w=!1;p.length&&(f||g)&&b&&b.min!==e&&(o=b.reversed,a=b.horiz,f&&f.hide(),g&&g.hide(),s=b.getExtremes(),pt(p,function(e,p){t=o?a?h.plotWidth:0:a?0:b.toPixels(s.min),t=P(O(Lt(n,t),0),v),n=P(O(I(b.toPixels(Lt(e.value,s.max),!0)),0),v),w&&(t=n=b.toPixels(s.max)),r=Math.abs(t-n),l=P(t,n),c=O(t,n),b.isXAxis?(i={x:y?c:l,y:0,width:r,height:v},a||(i.x=h.plotHeight-i.x)):(i={x:0,y:y?c:l,width:v,height:r},a&&(i.y=h.plotWidth-i.y)),y&&d.isVML&&(i=b.isXAxis?{x:0,y:o?l:c,height:i.width,width:h.chartWidth}:{x:i.y-h.plotLeft-h.spacingBox.x,y:0,width:i.height,height:h.chartHeight}),m[p]?m[p].animate(i):(m[p]=d.clipRect(i),f&&u["zoneGraph"+p].clip(m[p]),g&&u["zoneArea"+p].clip(m[p])),w=e.value>s.max}),this.clips=m)},invertGroups:function(){var t=this,e=t.chart;function n(){var e={width:t.yAxis.len,height:t.xAxis.len};pt(["group","markerGroup"],function(n){t[n]&&t[n].attr(e).invert()})}t.xAxis&&(vt(e,"resize",n),vt(t,"destroy",function(){bt(e,"resize",n)}),n(),t.invertGroups=n)},plotGroup:function(t,e,n,i,s){var o=this[t],a=!o;return a&&(this[t]=o=this.chart.renderer.g(e).attr({zIndex:i||.1}).add(s),o.addClass("highcharts-series-"+this.index)),o.attr({visibility:n})[a?"attr":"animate"](this.getPlotBox()),o},getPlotBox:function(){var t=this.chart,e=this.xAxis,n=this.yAxis;return t.inverted&&(e=n,n=this.xAxis),{translateX:e?e.left:t.plotLeft,translateY:n?n.top:t.plotTop,scaleX:1,scaleY:1}},render:function(){var t,e=this,n=e.chart,i=e.options,s=!!e.animate&&n.renderer.isSVG&&ee(i.animation).duration,o=e.visible?"inherit":"hidden",a=i.zIndex,r=e.hasRendered,l=n.seriesGroup;t=e.plotGroup("group","series",o,a,l),e.markerGroup=e.plotGroup("markerGroup","markers",o,a,l),s&&e.animate(!0),e.getAttribs(),t.inverted=!!e.isCartesian&&n.inverted,e.drawGraph&&(e.drawGraph(),e.applyZones()),pt(e.points,function(t){t.redraw&&t.redraw()}),e.drawDataLabels&&e.drawDataLabels(),e.visible&&e.drawPoints(),e.drawTracker&&!1!==e.options.enableMouseTracking&&e.drawTracker(),n.inverted&&e.invertGroups(),!1===i.clip||e.sharedClipKey||r||t.clip(n.clipRect),s&&e.animate(),r||(e.animationTimeout=Mt(function(){e.afterAnimate()},s)),e.isDirty=e.isDirtyData=!1,e.hasRendered=!0},redraw:function(){var t=this.chart,e=this.isDirty||this.isDirtyData,n=this.group,i=this.xAxis,s=this.yAxis;n&&(t.inverted&&n.attr({width:t.plotWidth,height:t.plotHeight}),n.animate({translateX:Lt(i&&i.left,t.plotLeft),translateY:Lt(s&&s.top,t.plotTop)})),this.translate(),this.render(),e&&delete this.kdTree},kdDimensions:1,kdAxisArray:["clientX","plotY"],searchPoint:function(t,e){var n=this.xAxis,i=this.yAxis,s=this.chart.inverted;return this.searchKDTree({clientX:s?n.len-t.chartY+n.pos:t.chartX-n.pos,plotY:s?i.len-t.chartX+i.pos:t.chartY-i.pos},e)},buildKDTree:function(){var t=this,e=t.kdDimensions;delete t.kdTree,Mt(function(){t.kdTree=function e(n,i,s){var o,a,r=n&&n.length;if(r)return o=t.kdAxisArray[i%s],n.sort(function(t,e){return t[o]-e[o]}),{point:n[a=Math.floor(r/2)],left:e(n.slice(0,a),i+1,s),right:e(n.slice(a+1),i+1,s)}}(t.getValidPoints(null,!t.directTouch),e,e)},t.options.kdNow?0:1)},searchKDTree:function(t,e){var n=this,i=this.kdAxisArray[0],s=this.kdAxisArray[1],o=e?"distX":"dist";if(this.kdTree||this.buildKDTree(),this.kdTree)return function t(e,a,r,l){var c,u,h,d,p,m,f,g,v,b=a.point,y=n.kdAxisArray[r%l],w=b;return f=b,g=Ot((m=e)[i])&&Ot(f[i])?Math.pow(m[i]-f[i],2):null,v=(g||0)+((Ot(m[s])&&Ot(f[s])?Math.pow(m[s]-f[s],2):null)||0),f.dist=Ot(v)?Math.sqrt(v):Number.MAX_VALUE,f.distX=Ot(g)?Math.sqrt(g):Number.MAX_VALUE,h=(c=e[y]-b[y])<0?"right":"left",a[u=c<0?"left":"right"]&&(w=(d=t(e,a[u],r+1,l))[o]<w[o]?d:b),a[h]&&Math.sqrt(c*c)<w[o]&&(w=(p=t(e,a[h],r+1,l))[o]<w[o]?p:w),w}(t,this.kdTree,this.kdDimensions,this.kdDimensions)}},Ae.prototype={destroy:function(){Qt(this,this.axis)},render:function(t){var e=this.options,n=e.format,i=n?qt(n,this):e.formatter.call(this);this.label?this.label.attr({text:i,visibility:"hidden"}):this.label=this.axis.chart.renderer.text(i,null,null,e.useHTML).css(e.style).attr({align:this.textAlign,rotation:e.rotation,visibility:"hidden"}).add(t)},setOffset:function(t,e){var n,i=this.axis,s=i.chart,o=s.inverted,a=i.reversed,r=this.isNegative&&!a||!this.isNegative&&a,l=i.translate(i.usePercentage?100:this.total,0,0,0,1),c=i.translate(0),u=F(l-c),h=s.xAxis[0].translate(this.x)+t,d=s.plotHeight,p={x:o?r?l:l-u:h,y:o?d-h-e:r?d-l-u:d-l,width:o?u:e,height:o?e:u},m=this.label;m&&(m.align(this.alignOptions,null,p),n=m.alignAttr,m[!1===this.options.crop||s.isInsidePlot(n.x,n.y)?"show":"hide"](!0))}},Se.prototype.getStacks=function(){var t=this;pt(t.yAxis,function(t){t.stacks&&t.hasVisibleSeries&&(t.oldStacks=t.stacks)}),pt(t.series,function(e){!e.options.stacking||!0!==e.visible&&!1!==t.options.chart.ignoreHiddenSeries||(e.stackKey=e.type+Lt(e.options.stack,""))})},me.prototype.buildStacks=function(){var t,e,n=this.series,i=Lt(this.options.reversedStacks,!0),s=n.length;if(!this.isXAxis){for(this.usePercentage=!1,e=s;e--;)n[i?e:s-e-1].setStackedPoints();for(e=s;e--;)(t=n[i?e:s-e-1]).setStackCliffs&&t.setStackCliffs();if(this.usePercentage)for(e=0;e<s;e++)n[e].setPercentStacks()}},me.prototype.renderStackTotals=function(){var t,e,n,i=this.chart,s=i.renderer,o=this.stacks,a=this.stackTotalGroup;for(t in a||(this.stackTotalGroup=a=s.g("stack-labels").attr({visibility:"visible",zIndex:6}).add()),a.translate(i.plotLeft,i.plotTop),o)for(n in e=o[t])e[n].render(a)},me.prototype.resetStacks=function(){var t,e,n=this.stacks;if(!this.isXAxis)for(t in n)for(e in n[t])n[t][e].touched<this.stacksTouched?(n[t][e].destroy(),delete n[t][e]):(n[t][e].total=null,n[t][e].cum=0)},me.prototype.cleanStacks=function(){var t,e,n;if(!this.isXAxis)for(e in this.oldStacks&&(t=this.stacks=this.oldStacks),t)for(n in t[e])t[e][n].cum=t[e][n].total},Te.prototype.setStackedPoints=function(){if(this.options.stacking&&(!0===this.visible||!1===this.chart.options.chart.ignoreHiddenSeries)){var t,e,n,i,s,o,a,r,l,c=this.processedXData,u=this.processedYData,h=[],d=u.length,p=this.options,m=p.threshold,f=p.startFromThreshold?m:0,g=p.stack,v=p.stacking,b=this.stackKey,y="-"+b,w=this.negStacks,x=this.yAxis,C=x.stacks,_=x.oldStacks;for(x.stacksTouched+=1,a=0;a<d;a++)r=c[a],l=u[a],o=(t=this.getStackIndicator(t,r,this.index)).key,C[s=(e=w&&l<(f?0:m))?y:b]||(C[s]={}),C[s][r]||(_[s]&&_[s][r]?(C[s][r]=_[s][r],C[s][r].total=null):C[s][r]=new Ae(x,x.options.stackLabels,e,r,g)),n=C[s][r],null!==l&&(n.points[o]=n.points[this.index]=[Lt(n.cum,f)],Ot(n.cum)||(n.base=o),n.touched=x.stacksTouched,t.index>0&&!1===this.singleStacks&&(n.points[o][0]=n.points[this.index+","+r+",0"][0])),"percent"===v?(i=e?b:y,w&&C[i]&&C[i][r]?(i=C[i][r],n.total=i.total=O(i.total,n.total)+F(l)||0):n.total=Zt(n.total+(F(l)||0))):n.total=Zt(n.total+(l||0)),n.cum=Lt(n.cum,f)+(l||0),null!==l&&(n.points[o].push(n.cum),h[a]=n.cum);"percent"===v&&(x.usePercentage=!0),this.stackedYData=h,x.oldStacks={}}},Te.prototype.setPercentStacks=function(){var t,e=this,n=e.stackKey,i=e.yAxis.stacks,s=e.processedXData;pt([n,"-"+n],function(n){for(var o,a,r,l,c=s.length;c--;)o=s[c],t=e.getStackIndicator(t,o,e.index),(r=(a=i[n]&&i[n][o])&&a.points[t.key])&&(l=a.total?100/a.total:0,r[0]=Zt(r[0]*l),r[1]=Zt(r[1]*l),e.stackedYData[c]=r[1])})},Te.prototype.getStackIndicator=function(t,e,n){return Ot(t)&&t.x===e?t.index++:t={x:e,index:0},t.key=[n,e,t.index].join(","),t},St(Se.prototype,{addSeries:function(t,e,n){var i,s=this;return t&&(e=Lt(e,!0),yt(s,"addSeries",{options:t},function(){i=s.initSeries(t),s.isDirtyLegend=!0,s.linkSeries(),e&&s.redraw(n)})),i},addAxis:function(t,e,n,i){var s=e?"xAxis":"yAxis",o=this.options,a=Et(t,{index:this[s].length,isX:e});new me(this,a),o[s]=Ft(o[s]||{}),o[s].push(a),Lt(n,!0)&&this.redraw(i)},showLoading:function(t){var e=this,n=e.options,i=e.loadingDiv,s=n.loading,o=function(){i&&Rt(i,{left:e.plotLeft+it,top:e.plotTop+it,width:e.plotWidth+it,height:e.plotHeight+it})};i||(e.loadingDiv=i=jt(et,{className:nt+"loading"},St(s.style,{zIndex:10,display:st}),e.container),e.loadingSpan=jt("span",null,s.labelStyle,i),vt(e,"redraw",o)),e.loadingSpan.innerHTML=t||n.lang.loading,e.loadingShown||(Rt(i,{opacity:0,display:""}),wt(i,{opacity:s.style.opacity},{duration:s.showDuration||0}),e.loadingShown=!0),o()},hideLoading:function(){var t=this.options,e=this.loadingDiv;e&&wt(e,{opacity:0},{duration:t.loading.hideDuration||100,complete:function(){Rt(e,{display:st})}}),this.loadingShown=!1}}),St(ke.prototype,{update:function(t,e,n,i){var s,o=this,a=o.series,r=o.graphic,l=a.chart,c=a.options;function u(){o.applyOptions(t),null===o.y&&r&&(o.graphic=r.destroy()),It(t,!0)&&(o.redraw=function(){r&&r.element&&t&&t.marker&&t.marker.symbol&&(o.graphic=r.destroy()),t&&t.dataLabels&&o.dataLabel&&(o.dataLabel=o.dataLabel.destroy()),o.redraw=null}),s=o.index,a.updateParallelArrays(o,s),c.data[s]=It(c.data[s],!0)?o.options:t,a.isDirty=a.isDirtyData=!0,!a.fixedBox&&a.hasCartesianSeries&&(l.isDirtyBox=!0),"point"===c.legendType&&(l.isDirtyLegend=!0),e&&l.redraw(n)}e=Lt(e,!0),!1===i?u():o.firePointEvent("update",{options:t},u)},remove:function(t,e){this.series.removePoint(dt(this,this.series.data),t,e)}}),St(Te.prototype,{addPoint:function(t,e,n,i){var s,o,a,r,l=this.options,c=this.data,u=this.chart,h=this.xAxis&&this.xAxis.names,d=l.data,p=this.xData;if(e=Lt(e,!0),s={series:this},this.pointClass.prototype.applyOptions.apply(s,[t]),r=s.x,a=p.length,this.requireSorting&&r<p[a-1])for(o=!0;a&&p[a-1]>r;)a--;this.updateParallelArrays(s,"splice",a,0,0),this.updateParallelArrays(s,a),h&&s.name&&(h[r]=s.name),d.splice(a,0,t),o&&(this.data.splice(a,0,null),this.processData()),"point"===l.legendType&&this.generatePoints(),n&&(c[0]&&c[0].remove?c[0].remove(!1):(c.shift(),this.updateParallelArrays(s,"shift"),d.shift())),this.isDirty=!0,this.isDirtyData=!0,e&&(this.getAttribs(),u.redraw(i))},removePoint:function(t,e,n){var i=this,s=i.data,o=s[t],a=i.points,r=i.chart,l=function(){a&&a.length===s.length&&a.splice(t,1),s.splice(t,1),i.options.data.splice(t,1),i.updateParallelArrays(o||{series:i},"splice",t,1),o&&o.destroy(),i.isDirty=!0,i.isDirtyData=!0,e&&r.redraw()};te(n,r),e=Lt(e,!0),o?o.firePointEvent("remove",null,l):l()},remove:function(t,e,n){var i=this,s=i.chart;function o(){i.destroy(),s.isDirtyLegend=s.isDirtyBox=!0,s.linkSeries(),Lt(t,!0)&&s.redraw(e)}!1!==n?yt(i,"remove",null,o):o()},update:function(t,n){var i,s=this,o=this.chart,a=this.userOptions,r=this.type,l=ct[r].prototype,c=["group","markerGroup","dataLabelsGroup"];for(i in(t.type&&t.type!==r||void 0!==t.zIndex)&&(c.length=0),pt(c,function(t){c[t]=s[t],delete s[t]}),t=Et(a,{animation:!1,index:this.index,pointStart:this.xData[0]},{data:this.options.data},t),this.remove(!1,null,!1),l)this[i]=e;St(this,ct[t.type||r].prototype),pt(c,function(t){s[t]=c[t]}),this.init(o,t),o.linkSeries(),Lt(n,!0)&&o.redraw(!1)}}),St(me.prototype,{update:function(t,n){var i=this.chart;t=i.options[this.coll][this.options.index]=Et(this.userOptions,t),this.destroy(!0),this.init(i,St(t,{events:e})),i.isDirtyBox=!0,Lt(n,!0)&&i.redraw()},remove:function(t){for(var e=this.chart,n=this.coll,i=this.series,s=i.length;s--;)i[s]&&i[s].remove(!1);Dt(e.axes,this),Dt(e[n],this),e.options[n].splice(this.options.index,1),pt(e[n],function(t,e){t.options.index=e}),this.destroy(),e.isDirtyBox=!0,Lt(t,!0)&&e.redraw()},setTitle:function(t,e){this.update({title:t},e)},setCategories:function(t,e){this.update({categories:t},e)}});var Ie=Vt(Te);ct.line=Ie,ie.area=Et(se,{softThreshold:!1,threshold:0});var Ne=Vt(Te,{type:"area",singleStacks:!1,getStackPoints:function(){var t,e,n,i=[],s=[],o=this.xAxis,a=this.yAxis,r=a.stacks[this.stackKey],l={},c=this.points,u=this.index,h=a.series,d=h.length,p=Lt(a.options.reversedStacks,!0)?1:-1;if(this.options.stacking){for(e=0;e<c.length;e++)l[c[e].x]=c[e];for(n in r)null!==r[n].total&&s.push(n);s.sort(function(t,e){return t-e}),t=gt(h,function(){return this.visible}),pt(s,function(n,c){var h,m,f=0;if(l[n]&&!l[n].isNull)i.push(l[n]),pt([-1,1],function(i){var o=1===i?"rightNull":"leftNull",a=1===i?"rightCliff":"leftCliff",f=0,g=r[s[c+i]];if(g)for(e=u;e>=0&&e<d;)(h=g.points[e])||(e===u?l[n][o]=!0:t[e]&&(m=r[n].points[e])&&(f-=m[1]-m[0])),e+=p;l[n][a]=f});else{for(e=u;e>=0&&e<d;){if(h=r[n].points[e]){f=h[1];break}e+=p}f=a.toPixels(f,!0),i.push({isNull:!0,plotX:o.toPixels(n,!0),plotY:f,yBottom:f})}})}return i},getGraphPath:function(t){var e,n,i,s,o,a,r,l,c=Te.prototype.getGraphPath,u=this.options,h=u.stacking,d=this.yAxis,p=[],m=[],f=this.index,g=d.stacks[this.stackKey],v=u.threshold,b=d.getThreshold(u.threshold),y=u.connectNulls||"percent"===h,w=function(e,n,i){var s,o,r=t[e],l=h&&g[r.x].points[f],c=r[i+"Null"]||0,u=r[i+"Cliff"]||0,y=!0;u||c?(s=(c?l[0]:l[1])+u,o=l[0]+u,y=!!c):!h&&t[n]&&t[n].isNull&&(s=o=v),void 0!==s&&(m.push({plotX:a,plotY:null===s?b:d.getThreshold(s),isNull:y}),p.push({plotX:a,plotY:null===o?b:d.getThreshold(o),doCurve:!1}))};for(t=t||this.points,h&&(t=this.getStackPoints()),s=0;s<t.length;s++)r=t[s].isNull,a=Lt(t[s].rectPlotX,t[s].plotX),l=Lt(t[s].yBottom,b),r&&!y||(y||w(s,s-1,"left"),r&&!h&&y||(m.push(t[s]),p.push({x:s,plotX:a,plotY:l})),y||w(s,s+1,"right"));return n=c.call(this,m,!0,!0),p.reversed=!0,(i=c.call(this,p,!0,!0)).length&&(i[0]=at),o=n.concat(i),e=c.call(this,m,!1,y),o.xMap=n.xMap,this.areaPath=o,e},drawGraph:function(){this.areaPath=[],Te.prototype.drawGraph.apply(this);var t=this,e=this.areaPath,n=this.options,i=this.zones,s=[["area",this.color,n.fillColor]];pt(i,function(e,i){s.push(["zoneArea"+i,e.color||t.color,e.fillColor||n.fillColor])}),pt(s,function(i){var s,o=i[0],a=t[o];a?(a.endX=e.xMap,a.animate({d:e})):(s={fill:i[2]||i[1],zIndex:0},i[2]||(s["fill-opacity"]=Lt(n.fillOpacity,.75)),(a=t[o]=t.chart.renderer.path(e).attr(s).add(t.group)).isArea=!0),a.startX=e.xMap,a.shiftUnit=n.step?2:1})},drawLegendSymbol:_e.drawRectangle});ct.area=Ne,ie.spline=Et(se);var De=Vt(Te,{type:"spline",getPointSpline:function(t,e,n){var i,s,o,a,r,l=e.plotX,c=e.plotY,u=t[n-1],h=t[n+1];function d(t){return t&&!t.isNull&&!1!==t.doCurve}if(d(u)&&d(h)){var p=u.plotX,m=u.plotY,f=h.plotX,g=h.plotY,v=0;s=(1.5*c+m)/2.5,a=(1.5*c+g)/2.5,(o=(1.5*l+f)/2.5)!==(i=(1.5*l+p)/2.5)&&(v=(a-s)*(o-l)/(o-i)+c-a),a+=v,(s+=v)>m&&s>c?a=2*c-(s=O(m,c)):s<m&&s<c&&(a=2*c-(s=P(m,c))),a>g&&a>c?s=2*c-(a=O(g,c)):a<g&&a<c&&(s=2*c-(a=P(g,c))),e.rightContX=o,e.rightContY=a}return r=["C",Lt(u.rightContX,u.plotX),Lt(u.rightContY,u.plotY),Lt(i,l),Lt(s,c),l,c],u.rightContX=u.rightContY=null,r}});ct.spline=De,ie.areaspline=Et(ie.area);var Oe=Ne.prototype,Pe=Vt(De,{type:"areaspline",getStackPoints:Oe.getStackPoints,getGraphPath:Oe.getGraphPath,setStackCliffs:Oe.setStackCliffs,drawGraph:Oe.drawGraph,drawLegendSymbol:_e.drawRectangle});ct.areaspline=Pe,ie.column=Et(se,{borderColor:"#FFFFFF",borderRadius:0,groupPadding:.2,marker:null,pointPadding:.1,minPointLength:0,cropThreshold:50,pointRange:null,states:{hover:{brightness:.1,shadow:!1,halo:!1},select:{color:"#C0C0C0",borderColor:"#000000",shadow:!1}},dataLabels:{align:null,verticalAlign:null,y:null},softThreshold:!1,startFromThreshold:!0,stickyTracking:!1,tooltip:{distance:6},threshold:0});var Fe=Vt(Te,{type:"column",pointAttrToOptions:{stroke:"borderColor",fill:"color",r:"borderRadius"},cropShoulder:0,directTouch:!0,trackerGroups:["group","dataLabelsGroup"],negStacks:!0,init:function(){Te.prototype.init.apply(this,arguments);var t=this,e=t.chart;e.hasRendered&&pt(e.series,function(e){e.type===t.type&&(e.isDirty=!0)})},getColumnMetrics:function(){var t,n=this,i=n.options,s=n.xAxis,o=n.yAxis,a=s.reversed,r={},l=0;!1===i.grouping?l=1:pt(n.chart.series,function(i){var s,a=i.options,c=i.yAxis;i.type===n.type&&i.visible&&o.len===c.len&&o.pos===c.pos&&(a.stacking?(t=i.stackKey,r[t]===e&&(r[t]=l++),s=r[t]):!1!==a.grouping&&(s=l++),i.columnIndex=s)});var c=P(F(s.transA)*(s.ordinalSlope||i.pointRange||s.closestPointRange||s.tickInterval||1),s.len),u=c*i.groupPadding,h=(c-2*u)/l,d=P(i.maxPointWidth||s.len,Lt(i.pointWidth,h*(1-2*i.pointPadding))),p=(h-d)/2+(u+((n.columnIndex||0)+(a?1:0))*h-c/2)*(a?-1:1);return n.columnMetrics={width:d,offset:p},n.columnMetrics},crispCol:function(t,e,n,i){var s,o,a=this.chart,r=this.borderWidth,l=-(r%2?.5:0),c=r%2?.5:1;return a.inverted&&a.renderer.isVML&&(c+=1),n=Math.round(t+n)+l-(t=Math.round(t)+l),s=Math.round(e+i)+c,o=F(e)<=.5&&s>.5,i=s-(e=Math.round(e)+c),o&&i&&(e-=1,i+=1),{x:t,y:e,width:n,height:i}},translate:function(){var t=this,e=t.chart,n=t.options,i=t.borderWidth=Lt(n.borderWidth,t.closestPointRange*t.xAxis.transA<2?0:1),s=t.yAxis,o=n.threshold,a=t.translatedThreshold=s.getThreshold(o),r=Lt(n.minPointLength,5),l=t.getColumnMetrics(),c=l.width,u=t.barW=O(c,1+2*i),h=t.pointXOffset=l.offset;e.inverted&&(a-=.5),n.pointPadding&&(u=D(u)),Te.prototype.translate.apply(t),pt(t.points,function(n){var i,o=P(Lt(n.yBottom,a),9e4),l=999+F(o),d=P(O(-l,n.plotY),s.len+l),p=n.plotX+h,m=u,f=P(d,o),g=O(d,o)-f;F(g)<r&&r&&(g=r,i=!s.reversed&&!n.negative||s.reversed&&n.negative,f=F(f-a)>r?o-r:a-(i?r:0)),n.barX=p,n.pointWidth=c,n.tooltipPos=e.inverted?[s.len+s.pos-e.plotLeft-d,t.xAxis.len-p-m/2,g]:[p+m/2,d+s.pos-e.plotTop,g],n.shapeType="rect",n.shapeArgs=t.crispCol.apply(t,n.isNull?[n.plotX,s.len/2,0,0]:[p,f,m,g])})},getSymbol:$,drawLegendSymbol:_e.drawRectangle,drawGraph:$,drawPoints:function(){var t,e,n=this,i=this.chart,s=n.options,o=i.renderer,a=s.animationLimit||250;pt(n.points,function(r){var l,c=r.plotY,u=r.graphic;Nt(c)&&null!==r.y?(t=r.shapeArgs,l=Ot(n.borderWidth)?{"stroke-width":n.borderWidth}:{},e=r.pointAttr[r.selected?"select":""]||n.pointAttr[""],u?(xt(u),u.attr(l).attr(e)[i.pointCount<a?"animate":"attr"](Et(t))):r.graphic=u=o[r.shapeType](t).attr(l).attr(e).add(r.group||n.group).shadow(s.shadow,null,s.stacking&&!s.borderRadius)):u&&(r.graphic=u.destroy())})},animate:function(t){var e,n=this,i=this.yAxis,s=n.options,o=this.chart.inverted,a={};Y&&(t?(a.scaleY=.001,e=P(i.pos+i.len,O(i.pos,i.toPixels(s.threshold))),o?a.translateX=e-i.len:a.translateY=e,n.group.attr(a)):(a[o?"translateX":"translateY"]=i.pos,n.group.animate(a,St(ee(n.options.animation),{step:function(t,e){n.group.attr({scaleY:O(.001,e.pos)})}})),n.animate=null))},remove:function(){var t=this,e=t.chart;e.hasRendered&&pt(e.series,function(e){e.type===t.type&&(e.isDirty=!0)}),Te.prototype.remove.apply(t,arguments)}});ct.column=Fe,ie.bar=Et(ie.column);var Me=Vt(Fe,{type:"bar",inverted:!0});ct.bar=Me,ie.scatter=Et(se,{lineWidth:0,marker:{enabled:!0},tooltip:{headerFormat:'<span style="color:{point.color}">●</span> <span style="font-size: 10px;"> {series.name}</span><br/>',pointFormat:"x: <b>{point.x}</b><br/>y: <b>{point.y}</b><br/>"}});var Le=Vt(Te,{type:"scatter",sorted:!1,requireSorting:!1,noSharedTooltip:!0,trackerGroups:["group","markerGroup","dataLabelsGroup"],takeOrdinalPosition:!1,kdDimensions:2,drawGraph:function(){this.options.lineWidth&&Te.prototype.drawGraph.call(this)}});ct.scatter=Le,ie.pie=Et(se,{borderColor:"#FFFFFF",borderWidth:1,center:[null,null],clip:!1,colorByPoint:!0,dataLabels:{distance:30,enabled:!0,formatter:function(){return null===this.y?void 0:this.point.name},x:0},ignoreHiddenPoint:!0,legendType:"point",marker:null,size:null,showInLegend:!1,slicedOffset:10,states:{hover:{brightness:.1,shadow:!1}},stickyTracking:!1,tooltip:{followPointer:!0}});var Re={type:"pie",isCartesian:!1,pointClass:Vt(ke,{init:function(){ke.prototype.init.apply(this,arguments);var t,e=this;return e.name=Lt(e.name,"Slice"),t=function(t){e.slice("select"===t.type)},vt(e,"select",t),vt(e,"unselect",t),e},setVisible:function(t,n){var i=this,s=i.series,o=s.chart,a=s.options.ignoreHiddenPoint;n=Lt(n,a),t!==i.visible&&(i.visible=i.options.visible=t=t===e?!i.visible:t,s.options.data[dt(i,s.data)]=i.options,pt(["graphic","dataLabel","connector","shadowGroup"],function(e){i[e]&&i[e][t?"show":"hide"](!0)}),i.legendItem&&o.legend.colorizeItem(i,t),t||"hover"!==i.state||i.setState(""),a&&(s.isDirty=!0),n&&o.redraw())},slice:function(t,e,n){var i,s=this.series;te(n,s.chart),e=Lt(e,!0),this.sliced=this.options.sliced=t=Ot(t)?t:!this.sliced,s.options.data[dt(this,s.data)]=this.options,i=t?this.slicedTranslation:{translateX:0,translateY:0},this.graphic.animate(i),this.shadowGroup&&this.shadowGroup.animate(i)},haloPath:function(t){var e=this.shapeArgs,n=this.series.chart;return this.sliced||!this.visible?[]:this.series.chart.renderer.symbols.arc(n.plotLeft+e.x,n.plotTop+e.y,e.r+t,e.r+t,{innerR:this.shapeArgs.r,start:e.start,end:e.end})}}),requireSorting:!1,directTouch:!0,noSharedTooltip:!0,trackerGroups:["group","dataLabelsGroup"],axisTypes:[],pointAttrToOptions:{stroke:"borderColor","stroke-width":"borderWidth",fill:"color"},animate:function(t){var e=this,n=e.points,i=e.startAngleRad;t||(pt(n,function(t){var n=t.graphic,s=t.shapeArgs;n&&(n.attr({r:t.startR||e.center[3]/2,start:i,end:i}),n.animate({r:s.r,start:s.start,end:s.end},e.options.animation))}),e.animate=null)},updateTotals:function(){var t,e,n=0,i=this.points,s=i.length,o=this.options.ignoreHiddenPoint;for(t=0;t<s;t++)(e=i[t]).y<0&&(e.y=null),n+=o&&!e.visible?0:e.y;for(this.total=n,t=0;t<s;t++)(e=i[t]).percentage=n>0&&(e.visible||!o)?e.y/n*100:0,e.total=n},generatePoints:function(){Te.prototype.generatePoints.call(this),this.updateTotals()},translate:function(t){this.generatePoints();var e,n,i,s,o,a,r,l=0,c=this.options,u=c.slicedOffset,h=u+c.borderWidth,d=c.startAngle||0,p=this.startAngleRad=R/180*(d-90),m=(this.endAngleRad=R/180*(Lt(c.endAngle,d+360)-90))-p,f=this.points,g=c.dataLabels.distance,v=c.ignoreHiddenPoint,b=f.length;for(t||(this.center=t=this.getCenter()),this.getX=function(e,n){return i=A.asin(P((e-t[1])/(t[2]/2+g),1)),t[0]+(n?-1:1)*(M(i)*(t[2]/2+g))},a=0;a<b;a++)r=f[a],e=p+l*m,v&&!r.visible||(l+=r.percentage/100),n=p+l*m,r.shapeType="arc",r.shapeArgs={x:t[0],y:t[1],r:t[2]/2,innerR:t[3]/2,start:I(1e3*e)/1e3,end:I(1e3*n)/1e3},(i=(n+e)/2)>1.5*R?i-=2*R:i<-R/2&&(i+=2*R),r.slicedTranslation={translateX:I(M(i)*u),translateY:I(L(i)*u)},s=M(i)*t[2]/2,o=L(i)*t[2]/2,r.tooltipPos=[t[0]+.7*s,t[1]+.7*o],r.half=i<-R/2||i>R/2?1:0,r.angle=i,h=P(h,g/2),r.labelPos=[t[0]+s+M(i)*g,t[1]+o+L(i)*g,t[0]+s+M(i)*h,t[1]+o+L(i)*h,t[0]+s,t[1]+o,g<0?"center":r.half?"right":"left",i]},drawGraph:null,drawPoints:function(){var t,e,n,i,s,o,a=this,r=a.chart.renderer,l=a.options.shadow;l&&!a.shadowGroup&&(a.shadowGroup=r.g("shadow").add(a.group)),pt(a.points,function(c){null!==c.y&&(e=c.graphic,s=c.shapeArgs,n=c.shadowGroup,(i=c.pointAttr[c.selected?"select":""]).stroke||(i.stroke=i.fill),l&&!n&&(n=c.shadowGroup=r.g("shadow").add(a.shadowGroup)),t=c.sliced?c.slicedTranslation:{translateX:0,translateY:0},n&&n.attr(t),e?e.setRadialReference(a.center).attr(i).animate(St(s,t)):(o={"stroke-linejoin":"round"},c.visible||(o.visibility="hidden"),c.graphic=e=r[c.shapeType](s).setRadialReference(a.center).attr(i).attr(o).attr(t).add(a.group).shadow(l,n)))})},searchPoint:$,sortByAngle:function(t,e){t.sort(function(t,n){return void 0!==t.angle&&(n.angle-t.angle)*e})},drawLegendSymbol:_e.drawRectangle,getCenter:Ee.getCenter,getSymbol:$};Re=Vt(Te,Re),ct.pie=Re,Te.prototype.drawDataLabels=function(){var t,n,i,s,o=this,a=o.options,r=a.cursor,l=a.dataLabels,c=o.points,u=o.hasRendered||0,h=Lt(l.defer,!0),d=o.chart.renderer;(l.enabled||o._hasPointLabels)&&(o.dlProcessOptions&&o.dlProcessOptions(l),s=o.plotGroup("dataLabelsGroup","data-labels",h&&!u?"hidden":"visible",l.zIndex||6),h&&(s.attr({opacity:+u}),u||vt(o,"afterAnimate",function(){o.visible&&s.show(!0),s[a.animation?"animate":"attr"]({opacity:1},{duration:200})})),n=l,pt(c,function(c){var u,h,p,m,f,g,v=c.dataLabel,b=c.connector,y=!0,w={};if(t=c.dlOptions||c.options&&c.options.dataLabels,u=Lt(t&&t.enabled,n.enabled)&&null!==c.y,v&&!u)c.dataLabel=v.destroy();else if(u){if(g=(l=Et(n,t)).style,f=l.rotation,h=c.getLabelConfig(),i=l.format?qt(l.format,h):l.formatter.call(h,l),g.color=Lt(l.color,g.color,o.color,"black"),v)Ot(i)?(v.attr({text:i}),y=!1):(c.dataLabel=v=v.destroy(),b&&(c.connector=b.destroy()));else if(Ot(i)){for(m in p={fill:l.backgroundColor,stroke:l.borderColor,"stroke-width":l.borderWidth,r:l.borderRadius||0,rotation:f,padding:l.padding,zIndex:1},"contrast"===g.color&&(w.color=l.inside||l.distance<0||a.stacking?d.getContrast(c.color||o.color):"#000000"),r&&(w.cursor=r),p)p[m]===e&&delete p[m];v=c.dataLabel=d[f?"text":"label"](i,0,-9999,l.shape,null,null,l.useHTML).attr(p).css(St(g,w)).add(s).shadow(l.shadow)}v&&o.alignDataLabel(c,v,l,null,y)}}))},Te.prototype.alignDataLabel=function(t,e,n,i,s){var o,a,r,l,c=this.chart,u=c.inverted,h=Lt(t.plotX,-9999),d=Lt(t.plotY,-9999),p=e.getBBox(),m=c.renderer.fontMetrics(n.style.fontSize).b,f=n.rotation,g=n.align,v=this.visible&&(t.series.forceDL||c.isInsidePlot(h,I(d),u)||i&&c.isInsidePlot(h,u?i.x+1:i.y+i.height-1,u)),b="justify"===Lt(n.overflow,"justify");v&&(i=St({x:u?c.plotWidth-d:h,y:I(u?c.plotHeight-h:d),width:0,height:0},i),St(n,{width:p.width,height:p.height}),f?(b=!1,r=c.renderer.rotCorr(m,f),l={x:i.x+n.x+i.width/2+r.x,y:i.y+n.y+{top:0,middle:.5,bottom:1}[n.verticalAlign]*i.height},e[s?"attr":"animate"](l).attr({align:g}),a=(o=(f+720)%360)>180&&o<360,"left"===g?l.y-=a?p.height:0:"center"===g?(l.x-=p.width/2,l.y-=p.height/2):"right"===g&&(l.x-=p.width,l.y-=a?0:p.height)):(e.align(n,null,i),l=e.alignAttr),b?this.justifyDataLabel(e,n,l,p,i,s):Lt(n.crop,!0)&&(v=c.isInsidePlot(l.x,l.y)&&c.isInsidePlot(l.x+p.width,l.y+p.height)),n.shape&&!f&&e.attr({anchorX:t.plotX,anchorY:t.plotY})),v||(xt(e),e.attr({y:-9999}),e.placed=!1)},Te.prototype.justifyDataLabel=function(t,e,n,i,s,o){var a,r,l=this.chart,c=e.align,u=e.verticalAlign,h=t.box?0:t.padding||0;(a=n.x+h)<0&&("right"===c?e.align="left":e.x=-a,r=!0),(a=n.x+i.width-h)>l.plotWidth&&("left"===c?e.align="right":e.x=l.plotWidth-a,r=!0),(a=n.y+h)<0&&("bottom"===u?e.verticalAlign="top":e.y=-a,r=!0),(a=n.y+i.height-h)>l.plotHeight&&("top"===u?e.verticalAlign="bottom":e.y=l.plotHeight-a,r=!0),r&&(t.placed=!o,t.align(e,null,s))},ct.pie&&(ct.pie.prototype.drawDataLabels=function(){var t,e,n,i,s,o,a,r,l,c,u,h,d,p=this,m=p.data,f=p.chart,g=p.options.dataLabels,v=Lt(g.connectorPadding,10),b=Lt(g.connectorWidth,1),y=f.plotWidth,w=f.plotHeight,x=Lt(g.softConnector,!0),C=g.distance,_=p.center,S=_[2]/2,E=_[1],k=C>0,T=[[],[]],A=[0,0,0,0],N=function(t,e){return e.y-t.y};if(p.visible&&(g.enabled||p._hasPointLabels)){for(Te.prototype.drawDataLabels.apply(p),pt(m,function(t){t.dataLabel&&t.visible&&(T[t.half].push(t),t.dataLabel._pos=null)}),h=2;h--;){var D,M,L,R,j=[],V=[],B=T[h],z=B.length;if(z){for(p.sortByAngle(B,h-.5),d=a=0;!a&&B[d];)a=B[d]&&B[d].dataLabel&&(B[d].dataLabel.getBBox().height||21),d++;if(C>0){for(L=P(E+S+C,f.plotHeight),M=O(0,E-S-C);M<=L;M+=a)j.push(M);if(z>(D=j.length)){for((u=[].concat(B)).sort(N),d=z;d--;)u[d].rank=d;for(d=z;d--;)B[d].rank>=D&&B.splice(d,1);z=B.length}for(d=0;d<z;d++){t=B[d],o=t.labelPos;var W,U,H=9999;for(U=0;U<D;U++)(W=F(j[U]-o[1]))<H&&(H=W,R=U);if(R<d&&null!==j[d])R=d;else if(D<z-d+R&&null!==j[d])for(R=D-z+d;null===j[R];)R++;else for(;null===j[R];)R++;V.push({i:R,y:j[R]}),j[R]=null}V.sort(N)}for(d=0;d<z;d++){var q,G;t=B[d],o=t.labelPos,i=t.dataLabel,c=!1===t.visible?"hidden":"inherit",G=o[1],C>0?(R=(q=V.pop()).i,(G>(l=q.y)&&null!==j[R+1]||G<l&&null!==j[R-1])&&(l=P(O(0,G),f.plotHeight))):l=G,r=g.justify?_[0]+(h?-1:1)*(S+C):p.getX(l===E-S-C||l===E+S+C?G:l,h),i._attr={visibility:c,align:o[6]},i._pos={x:r+g.x+({left:v,right:-v}[o[6]]||0),y:l+g.y-10},i.connX=r,i.connY=l,null===this.options.size&&(s=i.width,r-s<v?A[3]=O(I(s-r+v),A[3]):r+s>y-v&&(A[1]=O(I(r+s-y+v),A[1])),l-a/2<0?A[0]=O(I(a/2-l),A[0]):l+a/2>w&&(A[2]=O(I(l+a/2-w),A[2])))}}}(0===Jt(A)||this.verifyDataLabelOverflow(A))&&(this.placeDataLabels(),k&&b&&pt(this.points,function(t){e=t.connector,o=t.labelPos,(i=t.dataLabel)&&i._pos&&t.visible?(c=i._attr.visibility,r=i.connX,l=i.connY,n=x?[ot,r+("left"===o[6]?5:-5),l,"C",r,l,2*o[2]-o[4],2*o[3]-o[5],o[2],o[3],at,o[4],o[5]]:[ot,r+("left"===o[6]?5:-5),l,at,o[2],o[3],at,o[4],o[5]],e?(e.animate({d:n}),e.attr("visibility",c)):t.connector=e=p.chart.renderer.path(n).attr({"stroke-width":b,stroke:g.connectorColor||t.color||"#606060",visibility:c}).add(p.dataLabelsGroup)):e&&(t.connector=e.destroy())}))}},ct.pie.prototype.placeDataLabels=function(){pt(this.points,function(t){var e,n=t.dataLabel;n&&t.visible&&((e=n._pos)?(n.attr(n._attr),n[n.moved?"animate":"attr"](e),n.moved=!0):n&&n.attr({y:-9999}))})},ct.pie.prototype.alignDataLabel=$,ct.pie.prototype.verifyDataLabelOverflow=function(t){var e,n=this.center,i=this.options,s=i.center,o=i.minSize||80,a=o;return null!==s[0]?a=O(n[2]-O(t[1],t[3]),o):(a=O(n[2]-t[1]-t[3],o),n[0]+=(t[3]-t[1])/2),null!==s[1]?a=O(P(a,n[2]-O(t[0],t[2])),o):(a=O(P(a,n[2]-t[0]-t[2]),o),n[1]+=(t[0]-t[2])/2),a<n[2]?(n[2]=a,n[3]=Math.min(zt(i.innerSize||0,a),a),this.translate(n),this.drawDataLabels&&this.drawDataLabels()):e=!0,e}),ct.column&&(ct.column.prototype.alignDataLabel=function(t,e,n,i,s){var o,a=this.chart.inverted,r=t.series,l=t.dlBox||t.shapeArgs,c=Lt(t.below,t.plotY>Lt(this.translatedThreshold,r.yAxis.len)),u=Lt(n.inside,!!this.options.stacking);l&&((i=Et(l)).y<0&&(i.height+=i.y,i.y=0),(o=i.y+i.height-r.yAxis.len)>0&&(i.height-=o),a&&(i={x:r.yAxis.len-i.y-i.height,y:r.xAxis.len-i.x-i.width,width:i.height,height:i.width}),u||(a?(i.x+=c?0:i.width,i.width=0):(i.y+=c?i.height:0,i.height=0))),n.align=Lt(n.align,!a||u?"center":c?"right":"left"),n.verticalAlign=Lt(n.verticalAlign,a||u?"middle":c?"top":"bottom"),Te.prototype.alignDataLabel.call(this,t,e,n,i,s)}),function(t){var e=t.Chart,n=t.each,i=t.pick,s=t.addEvent;e.prototype.callbacks.push(function(t){function e(){var e=[];n(t.series,function(t){var s=t.options.dataLabels,o=t.dataLabelCollections||["dataLabel"];(s.enabled||t._hasPointLabels)&&!s.allowOverlap&&t.visible&&n(o,function(s){n(t.points,function(t){t[s]&&(t[s].labelrank=i(t.labelrank,t.shapeArgs&&t.shapeArgs.height),e.push(t[s]))})})}),t.hideOverlappingLabels(e)}e(),s(t,"redraw",e)}),e.prototype.hideOverlappingLabels=function(t){var e,i,s,o,a,r,l,c,u,h,d,p,m,f,g,v,b,y,w=t.length;for(i=0;i<w;i++)(e=t[i])&&(e.oldOpacity=e.opacity,e.newOpacity=1);for(t.sort(function(t,e){return(e.labelrank||0)-(t.labelrank||0)}),i=0;i<w;i++)for(o=t[i],s=i+1;s<w;++s)a=t[s],o&&a&&o.placed&&a.placed&&0!==o.newOpacity&&0!==a.newOpacity&&(r=o.alignAttr,l=a.alignAttr,c=o.parentGroup,u=a.parentGroup,h=2*(o.box?0:o.padding),d=r.x+c.translateX,p=r.y+c.translateY,m=o.width-h,f=o.height-h,g=l.x+u.translateX,v=l.y+u.translateY,b=a.width-h,y=a.height-h,!(g>d+m||g+b<d||v>p+f||v+y<p)&&((o.labelrank<a.labelrank?o:a).newOpacity=0));n(t,function(t){var e,n;t&&(n=t.newOpacity,t.oldOpacity!==n&&t.placed&&(n?t.show(!0):e=function(){t.hide()},t.alignAttr.opacity=n,t[t.isOld?"animate":"attr"](t.alignAttr,null,e)),t.isOld=!0)})}}(k);var je=k.TrackerMixin={drawTrackerPoint:function(){var t=this,n=t.chart,s=n.pointer,o=t.options.cursor,a=o&&{cursor:o},r=function(t){for(var i,s=t.target;s&&!i;)i=s.point,s=s.parentNode;i!==e&&i!==n.hoverPoint&&i.onMouseOver(t)};pt(t.points,function(t){t.graphic&&(t.graphic.element.point=t),t.dataLabel&&(t.dataLabel.element.point=t)}),t._hasTracking||(pt(t.trackerGroups,function(e){t[e]&&(t[e].addClass(nt+"tracker").on("mouseover",r).on("mouseout",function(t){s.onTrackerMouseOut(t)}).css(a),i&&t[e].on("touchstart",r))}),t._hasTracking=!0)},drawTrackerGraph:function(){var t,e=this,n=e.options,s=n.trackByArea,o=[].concat(s?e.areaPath:e.graphPath),a=o.length,r=e.chart,l=r.pointer,c=r.renderer,u=r.options.tooltip.snap,h=e.tracker,d=n.cursor,p=d&&{cursor:d},m=function(){r.hoverSeries!==e&&e.onMouseOver()},f="rgba(192,192,192,"+(Y?1e-4:.002)+")";if(a&&!s)for(t=a+1;t--;)o[t]===ot&&o.splice(t+1,0,o[t+1]-u,o[t+2],at),(t&&o[t]===ot||t===a)&&o.splice(t,0,at,o[t-2]+u,o[t-1]);h?h.attr({d:o}):(e.tracker=c.path(o).attr({"stroke-linejoin":"round",visibility:e.visible?"visible":"hidden",stroke:f,fill:s?f:st,"stroke-width":n.lineWidth+(s?0:2*u),zIndex:2}).add(e.group),pt([e.tracker,e.markerGroup],function(t){t.addClass(nt+"tracker").on("mouseover",m).on("mouseout",function(t){l.onTrackerMouseOut(t)}).css(p),i&&t.on("touchstart",m)}))}};return ct.column&&(Fe.prototype.drawTracker=je.drawTrackerPoint),ct.pie&&(ct.pie.prototype.drawTracker=je.drawTrackerPoint),ct.scatter&&(Le.prototype.drawTracker=je.drawTrackerPoint),St(Ce.prototype,{setItemEvents:function(t,e,n,i,s){var o=this;(n?e:t.legendGroup).on("mouseover",function(){t.setState("hover"),e.css(o.options.itemHoverStyle)}).on("mouseout",function(){e.css(t.visible?i:s),t.setState()}).on("click",function(e){var n=function(){t.setVisible&&t.setVisible()};e={browserEvent:e},t.firePointEvent?t.firePointEvent("legendItemClick",e,n):yt(t,"legendItemClick",e,n)})},createCheckboxForItem:function(t){t.checkbox=jt("input",{type:"checkbox",checked:t.selected,defaultChecked:t.selected},this.options.itemCheckboxStyle,this.chart.container),vt(t.checkbox,"click",function(e){var n=e.target;yt(t.series||t,"checkboxClick",{checked:n.checked,item:t},function(){t.select()})})}}),o.legend.itemStyle.cursor="pointer",St(Se.prototype,{showResetZoom:function(){var t=this,e=o.lang,n=t.options.chart.resetZoomButton,i=n.theme,s=i.states,a="chart"===n.relativeTo?null:"plotBox";this.resetZoomButton=t.renderer.button(e.resetZoom,null,null,function(){t.zoomOut()},i,s&&s.hover).attr({align:n.position.align,title:e.resetZoomTitle}).add().align(n.position,!1,a)},zoomOut:function(){var t=this;yt(t,"selection",{resetSelection:!0},function(){t.zoom()})},zoom:function(t){var e,n,i=this.pointer,s=!1;!t||t.resetSelection?pt(this.axes,function(t){e=t.zoom()}):pt(t.xAxis.concat(t.yAxis),function(t){var n=t.axis,o=n.isXAxis;(i[o?"zoomX":"zoomY"]||i[o?"pinchX":"pinchY"])&&(e=n.zoom(t.min,t.max),n.displayBtn&&(s=!0))}),n=this.resetZoomButton,s&&!n?this.showResetZoom():!s&&It(n)&&(this.resetZoomButton=n.destroy()),e&&this.redraw(Lt(this.options.chart.animation,t&&t.animation,this.pointCount<100))},pan:function(t,e){var n,i=this,s=i.hoverPoints;s&&pt(s,function(t){t.setState()}),pt("xy"===e?[1,0]:[1],function(e){var s=i[e?"xAxis":"yAxis"][0],o=s.horiz,a=t[o?"chartX":"chartY"],r=o?"mouseDownX":"mouseDownY",l=i[r],c=(s.pointRange||0)/2,u=s.getExtremes(),h=s.toValue(l-a,!0)+c,d=s.toValue(l+s.len-a,!0)-c,p=l>a;s.series.length&&(p||h>P(u.dataMin,u.min))&&(!p||d<O(u.dataMax,u.max))&&(s.setExtremes(h,d,!1,!1,{trigger:"pan"}),n=!0),i[r]=a}),n&&i.redraw(!1),Rt(i.container,{cursor:"move"})}}),St(ke.prototype,{select:function(t,e){var n=this,i=n.series,s=i.chart;t=Lt(t,!n.selected),n.firePointEvent(t?"select":"unselect",{accumulate:e},function(){n.selected=n.options.selected=t,i.options.data[dt(n,i.data)]=n.options,n.setState(t&&"select"),e||pt(s.getSelectedPoints(),function(t){t.selected&&t!==n&&(t.selected=t.options.selected=!1,i.options.data[dt(t,i.data)]=t.options,t.setState(""),t.firePointEvent("unselect"))})})},onMouseOver:function(t,e){var n=this.series,i=n.chart,s=i.tooltip,o=i.hoverPoint;i.hoverSeries!==n&&n.onMouseOver(),o&&o!==this&&o.onMouseOut(),this.series&&(this.firePointEvent("mouseOver"),!s||s.shared&&!n.noSharedTooltip||s.refresh(this,t),this.setState("hover"),e||(i.hoverPoint=this))},onMouseOut:function(){var t=this.series.chart,e=t.hoverPoints;this.firePointEvent("mouseOut"),e&&-1!==dt(this,e)||(this.setState(),t.hoverPoint=null)},importEvents:function(){if(!this.hasImportedEvents){var t,e=Et(this.series.options.point,this.options).events;for(t in this.events=e,e)vt(this,t,e[t]);this.hasImportedEvents=!0}},setState:function(t,e){var n,i,s,o,a=N(this.plotX),r=this.plotY,l=this.series,c=l.options.states,u=ie[l.type].marker&&l.options.marker,h=u&&!u.enabled,d=u&&u.states[t],p=d&&!1===d.enabled,m=l.stateMarkerGraphic,f=this.marker||{},g=l.chart,v=l.halo;t=t||"",o=this.pointAttr[t]||l.pointAttr[t],t===this.state&&!e||this.selected&&"select"!==t||c[t]&&!1===c[t].enabled||t&&(p||h&&!1===d.enabled)||t&&f.states&&f.states[t]&&!1===f.states[t].enabled||(this.graphic?(n=u&&this.graphic.symbolName&&o.r,this.graphic.attr(Et(o,n?{x:a-n,y:r-n,width:2*n,height:2*n}:{})),m&&m.hide()):(t&&d&&(n=d.radius,s=f.symbol||l.symbol,m&&m.currentSymbol!==s&&(m=m.destroy()),m?m[e?"animate":"attr"]({x:a-n,y:r-n}):s&&(l.stateMarkerGraphic=m=g.renderer.symbol(s,a-n,r-n,2*n,2*n).attr(o).add(l.markerGroup),m.currentSymbol=s)),m&&(m[t&&g.isInsidePlot(a,r,g.inverted)?"show":"hide"](),m.element.point=this)),(i=c[t]&&c[t].halo)&&i.size?(v||(l.halo=v=g.renderer.path().add(g.seriesGroup)),v.attr(St({fill:this.color||l.color,"fill-opacity":i.opacity,zIndex:-1},i.attributes))[e?"animate":"attr"]({d:this.haloPath(i.size)})):v&&v.attr({d:[]}),this.state=t)},haloPath:function(t){var e=this.series,n=e.chart,i=e.getPlotBox(),s=n.inverted,o=Math.floor(this.plotX);return n.renderer.symbols.circle(i.translateX+(s?e.yAxis.len-this.plotY:o)-t,i.translateY+(s?e.xAxis.len-o:this.plotY)-t,2*t,2*t)}}),St(Te.prototype,{onMouseOver:function(){var t=this.chart,e=t.hoverSeries;e&&e!==this&&e.onMouseOut(),this.options.events.mouseOver&&yt(this,"mouseOver"),this.setState("hover"),t.hoverSeries=this},onMouseOut:function(){var t=this.options,e=this.chart,n=e.tooltip,i=e.hoverPoint;e.hoverSeries=null,i&&i.onMouseOut(),this&&t.events.mouseOut&&yt(this,"mouseOut"),!n||t.stickyTracking||n.shared&&!this.noSharedTooltip||n.hide(),this.setState()},setState:function(t){var e,n=this.options,i=this.graph,s=n.states,o=n.lineWidth,a=0;if(t=t||"",this.state!==t){if(this.state=t,s[t]&&!1===s[t].enabled)return;if(t&&(o=s[t].lineWidth||o+(s[t].lineWidthPlus||0)),i&&!i.dashstyle)for(e={"stroke-width":o},i.attr(e);this["zoneGraph"+a];)this["zoneGraph"+a].attr(e),a+=1}},setVisible:function(t,e){var n,i=this,s=i.chart,o=i.legendItem,a=s.options.chart.ignoreHiddenSeries,r=i.visible;i.visible=t=i.options.visible=i.userOptions.visible=void 0===t?!r:t,n=t?"show":"hide",pt(["group","dataLabelsGroup","markerGroup","tracker"],function(t){i[t]&&i[t][n]()}),s.hoverSeries!==i&&(s.hoverPoint&&s.hoverPoint.series)!==i||i.onMouseOut(),o&&s.legend.colorizeItem(i,t),i.isDirty=!0,i.options.stacking&&pt(s.series,function(t){t.options.stacking&&t.visible&&(t.isDirty=!0)}),pt(i.linkedSeries,function(e){e.setVisible(t,!1)}),a&&(s.isDirtyBox=!0),!1!==e&&s.redraw(),yt(i,n)},show:function(){this.setVisible(!0)},hide:function(){this.setVisible(!1)},select:function(t){this.selected=t=t===e?!this.selected:t,this.checkbox&&(this.checkbox.checked=t),yt(this,t?"select":"unselect")},drawTracker:je.drawTrackerGraph}),St(k,{Color:oe,Point:ke,Tick:pe,Renderer:n,SVGElement:ae,SVGRenderer:he,arrayMin:Kt,arrayMax:Jt,charts:Z,correctFloat:Zt,dateFormat:a,error:ut,format:qt,pathAnim:void 0,getOptions:function(){return o},hasBidiBug:X,isTouchDevice:q,setOptions:function(t){return o=Et(!0,o,t),ne(),o},addEvent:vt,removeEvent:bt,createElement:jt,discardElement:$t,css:Rt,each:pt,map:gt,merge:Et,splat:Ft,stableSort:Xt,extendClass:Vt,pInt:kt,svg:Y,canvas:K,vml:!Y&&!K,product:"Highcharts",version:"4.2.7"}),k},t.exports?t.exports=n.document?i(n):i:n.Highcharts=i(n),
/**
 * @license Highcharts JS v4.2.7 (2016-09-21)
 *
 * 3D features for Highcharts JS
 *
 * @license: www.highcharts.com/license
 */
function(n){t.exports?n(t.exports):n(e)}(function(t){var e=t.animObject,n=t.each,i=t.extend,s=t.inArray,o=t.merge,a=t.pick,r=t.wrap,l=Math.PI,c=l/180,u=Math.sin,h=Math.cos,d=Math.round;var p=t.perspective=function(e,n,i){var s=n.options.chart.options3d,o=!!i&&n.inverted,r={x:n.plotWidth/2,y:n.plotHeight/2,z:s.depth/2,vd:a(s.depth,1)*a(s.viewDistance,0)},l=n.scale3d||1,d=c*s.beta*(o?-1:1),p=c*s.alpha*(o?-1:1),m={cosA:h(p),cosB:h(-d),sinA:u(p),sinB:u(-d)};return i||(r.x+=n.plotLeft,r.y+=n.plotTop),t.map(e,function(t){var e=function(t,e,n,i){return{x:i.cosB*t-i.sinB*n,y:-i.sinA*i.sinB*t+i.cosA*e-i.cosB*i.sinA*n,z:i.cosA*i.sinB*t+i.sinA*e+i.cosA*i.cosB*n}}((o?t.y:t.x)-r.x,(o?t.x:t.y)-r.y,(t.z||0)-r.z,m),n=function(t,e,n){var i=n>0&&n<Number.POSITIVE_INFINITY?n/(t.z+e.z+n):1;return{x:t.x*i,y:t.y*i}}(e,r,r.vd);return n.x=n.x*l+r.x,n.y=n.y*l+r.y,n.z=e.z*l+r.z,{x:o?n.y:n.x,y:o?n.x:n.y,z:n.z}})},m=4*(Math.sqrt(2)-1)/3/(l/2);function f(t){return null!=t}function g(t){var e,n,i=0;for(e=0;e<t.length;e++)n=(e+1)%t.length,i+=t[e].x*t[n].y-t[n].x*t[e].y;return i/2}function v(t){var e,n=0;for(e=0;e<t.length;e++)n+=t[e].z;return t.length?n/t.length:0}function b(t,e,n,i,s,o,a,r){var c=[];if(o>s&&o-s>l/2+1e-4)c=(c=c.concat(b(t,e,n,i,s,s+l/2,a,r))).concat(b(t,e,n,i,s+l/2,o,a,r));else if(o<s&&s-o>l/2+1e-4)c=(c=c.concat(b(t,e,n,i,s,s-l/2,a,r))).concat(b(t,e,n,i,s-l/2,o,a,r));else{var d=o-s;c=["C",t+n*h(s)-n*m*d*u(s)+a,e+i*u(s)+i*m*d*h(s)+r,t+n*h(o)+n*m*d*u(o)+a,e+i*u(o)-i*m*d*h(o)+r,t+n*h(o)+a,e+i*u(o)+r]}return c}t.SVGRenderer.prototype.toLinePath=function(e,n){var i=[];return t.each(e,function(t){i.push("L",t.x,t.y)}),e.length&&(i[0]="M",n&&i.push("Z")),i},t.SVGRenderer.prototype.cuboid=function(e){var n=this.g(),i=this.cuboidPath(e);return n.front=this.path(i[0]).attr({zIndex:i[3],"stroke-linejoin":"round"}).add(n),n.top=this.path(i[1]).attr({zIndex:i[4],"stroke-linejoin":"round"}).add(n),n.side=this.path(i[2]).attr({zIndex:i[5],"stroke-linejoin":"round"}).add(n),n.fillSetter=function(e){var n=e,i=t.Color(e).brighten(.1).get(),s=t.Color(e).brighten(-.1).get();return this.front.attr({fill:n}),this.top.attr({fill:i}),this.side.attr({fill:s}),this.color=e,this},n.opacitySetter=function(t){return this.front.attr({opacity:t}),this.top.attr({opacity:t}),this.side.attr({opacity:t}),this},n.attr=function(e){if(!e.shapeArgs&&!f(e.x))return t.SVGElement.prototype.attr.call(this,e);var n=e.shapeArgs||e,i=this.renderer.cuboidPath(n);return this.front.attr({d:i[0],zIndex:i[3]}),this.top.attr({d:i[1],zIndex:i[4]}),this.side.attr({d:i[2],zIndex:i[5]}),this},n.animate=function(e,n,i){if(f(e.x)&&f(e.y)){var s=this.renderer.cuboidPath(e);this.front.attr({zIndex:s[3]}).animate({d:s[0]},n,i),this.top.attr({zIndex:s[4]}).animate({d:s[1]},n,i),this.side.attr({zIndex:s[5]}).animate({d:s[2]},n,i),this.attr({zIndex:-s[6]})}else e.opacity?(this.front.animate(e,n,i),this.top.animate(e,n,i),this.side.animate(e,n,i)):t.SVGElement.prototype.animate.call(this,e,n,i);return this},n.destroy=function(){return this.front.destroy(),this.top.destroy(),this.side.destroy(),null},n.attr({zIndex:-i[6]}),n},t.SVGRenderer.prototype.cuboidPath=function(e){var n=e.x,i=e.y,s=e.z,o=e.height,a=e.width,r=e.depth,l=t.charts[this.chartIndex],c=t.map,u=[{x:n,y:i,z:s},{x:n+a,y:i,z:s},{x:n+a,y:i+o,z:s},{x:n,y:i+o,z:s},{x:n,y:i+o,z:s+r},{x:n+a,y:i+o,z:s+r},{x:n+a,y:i,z:s+r},{x:n,y:i,z:s+r}];function h(t){return u[t]}u=p(u,l,e.insidePlotArea);var d=function(t,e){var n=[];return t=c(t,h),e=c(e,h),g(t)<0?n=t:g(e)<0&&(n=e),n},m=d([3,2,1,0],[7,6,5,4]),f=[4,5,2,3],b=d([1,6,7,0],f),y=d([1,2,5,6],[0,7,4,3]);return[this.toLinePath(m,!0),this.toLinePath(b,!0),this.toLinePath(y,!0),v(m),v(b),v(y),9e9*v(c(f,h))]},t.SVGRenderer.prototype.arc3d=function(l){var u=this.g(),h=u.renderer,d=["x","y","r","innerR","start","end"];function p(t){var e=!1,n={};for(var i in t)-1!==s(i,d)&&(n[i]=t[i],delete t[i],e=!0);return!!e&&n}return(l=o(l)).alpha*=c,l.beta*=c,u.top=h.path(),u.side1=h.path(),u.side2=h.path(),u.inn=h.path(),u.out=h.path(),u.onAdd=function(){var t=u.parentGroup;u.top.add(u),u.out.add(t),u.inn.add(t),u.side1.add(t),u.side2.add(t)},u.setPaths=function(t){var e=u.renderer.arc3dPath(t),n=100*e.zTop;u.attribs=t,u.top.attr({d:e.top,zIndex:e.zTop}),u.inn.attr({d:e.inn,zIndex:e.zInn}),u.out.attr({d:e.out,zIndex:e.zOut}),u.side1.attr({d:e.side1,zIndex:e.zSide1}),u.side2.attr({d:e.side2,zIndex:e.zSide2}),u.zIndex=n,u.attr({zIndex:n}),t.center&&(u.top.setRadialReference(t.center),delete t.center)},u.setPaths(l),u.fillSetter=function(e){var n=t.Color(e).brighten(-.1).get();return this.fill=e,this.side1.attr({fill:n}),this.side2.attr({fill:n}),this.inn.attr({fill:n}),this.out.attr({fill:n}),this.top.attr({fill:e}),this},n(["opacity","translateX","translateY","visibility"],function(t){u[t+"Setter"]=function(t,e){u[e]=t,n(["out","inn","side1","side2","top"],function(n){u[n].attr(e,t)})}}),r(u,"attr",function(t,e,n){var s;return"object"==typeof e&&(s=p(e))&&(i(u.attribs,s),u.setPaths(u.attribs)),t.call(this,e,n)}),r(u,"animate",function(t,n,i,s){var r,l,c,u=this.attribs;return delete n.center,delete n.z,delete n.depth,delete n.alpha,delete n.beta,(c=e(a(i,this.renderer.globalAnimation))).duration&&((r=p(n=o(n)))&&(l=r,c.step=function(t,e){function n(t){return u[t]+(a(l[t],u[t])-u[t])*e.pos}e.elem.setPaths(o(u,{x:n("x"),y:n("y"),r:n("r"),innerR:n("innerR"),start:n("start"),end:n("end")}))}),i=c),t.call(this,n,i,s)}),u.destroy=function(){this.top.destroy(),this.out.destroy(),this.inn.destroy(),this.side1.destroy(),this.side2.destroy(),t.SVGElement.prototype.destroy.call(this)},u.hide=function(){this.top.hide(),this.out.hide(),this.inn.hide(),this.side1.hide(),this.side2.hide()},u.show=function(){this.top.show(),this.out.show(),this.inn.show(),this.side1.show(),this.side2.show()},u},t.SVGRenderer.prototype.arc3dPath=function(t){var e=t.x,n=t.y,i=t.start,s=t.end-1e-5,o=t.r,a=t.innerR,r=t.depth,c=t.alpha,d=t.beta,p=h(i),m=u(i),f=h(s),g=u(s),v=o*h(d),y=o*h(c),w=a*h(d),x=a*h(c),C=r*u(d),_=r*u(c),S=["M",e+v*p,n+y*m];S=(S=(S=(S=S.concat(b(e,n,v,y,i,s,0,0))).concat(["L",e+w*f,n+x*g])).concat(b(e,n,w,x,s,i,0,0))).concat(["Z"]);var E=d>0?l/2:0,k=c>0?0:l/2,T=i>-E?i:s>-E?-E:i,A=s<l-k?s:i<l-k?l-k:s,I=2*l-k,N=["M",e+v*h(T),n+y*u(T)];N=N.concat(b(e,n,v,y,T,A,0,0)),s>I&&i<I?N=(N=(N=(N=(N=(N=(N=(N=N.concat(["L",e+v*h(A)+C,n+y*u(A)+_])).concat(b(e,n,v,y,A,I,C,_))).concat(["L",e+v*h(I),n+y*u(I)])).concat(b(e,n,v,y,I,s,0,0))).concat(["L",e+v*h(s)+C,n+y*u(s)+_])).concat(b(e,n,v,y,s,I,C,_))).concat(["L",e+v*h(I),n+y*u(I)])).concat(b(e,n,v,y,I,A,0,0)):s>l-k&&i<l-k&&(N=(N=(N=(N=N.concat(["L",e+v*h(A)+C,n+y*u(A)+_])).concat(b(e,n,v,y,A,s,C,_))).concat(["L",e+v*h(s),n+y*u(s)])).concat(b(e,n,v,y,s,A,0,0))),N=(N=(N=N.concat(["L",e+v*h(A)+C,n+y*u(A)+_])).concat(b(e,n,v,y,A,T,C,_))).concat(["Z"]);var D=["M",e+w*p,n+x*m];D=(D=(D=(D=D.concat(b(e,n,w,x,i,s,0,0))).concat(["L",e+w*h(s)+C,n+x*u(s)+_])).concat(b(e,n,w,x,s,i,C,_))).concat(["Z"]);var O=["M",e+v*p,n+y*m,"L",e+v*p+C,n+y*m+_,"L",e+w*p+C,n+x*m+_,"L",e+w*p,n+x*m,"Z"],P=["M",e+v*f,n+y*g,"L",e+v*f+C,n+y*g+_,"L",e+w*f+C,n+x*g+_,"L",e+w*f,n+x*g,"Z"],F=Math.atan2(_,-C),M=Math.abs(s+F),L=Math.abs(i+F),R=Math.abs((i+s)/2+F);function j(t){return(t%=2*l)>l&&(t=2*l-t),t}M=j(M),L=j(L);var V=1e5*(R=j(R)),B=1e5*L,z=1e5*M;return{top:S,zTop:1e5*l+1,out:N,zOut:Math.max(V,B,z),inn:D,zInn:Math.max(V,B,z),side1:O,zSide1:.99*z,side2:P,zSide2:.99*B}},t.Chart.prototype.is3d=function(){return this.options.chart.options3d&&this.options.chart.options3d.enabled},t.wrap(t.Chart.prototype,"isInsidePlot",function(t){return this.is3d()||t.apply(this,[].slice.call(arguments,1))}),t.getOptions().chart.options3d={enabled:!1,alpha:0,beta:0,depth:100,fitToPlot:!0,viewDistance:25,frame:{bottom:{size:1,color:"rgba(255,255,255,0)"},side:{size:1,color:"rgba(255,255,255,0)"},back:{size:1,color:"rgba(255,255,255,0)"}}},t.wrap(t.Chart.prototype,"init",function(e){var n,i=[].slice.call(arguments,1);i[0].chart&&i[0].chart.options3d&&i[0].chart.options3d.enabled&&(i[0].chart.options3d.alpha=(i[0].chart.options3d.alpha||0)%360,i[0].chart.options3d.beta=(i[0].chart.options3d.beta||0)%360,(n=(i[0].plotOptions||{}).pie||{}).borderColor=t.pick(n.borderColor,void 0)),e.apply(this,i)}),t.wrap(t.Chart.prototype,"setChartSize",function(t){var e=this.options.chart.options3d;if(t.apply(this,[].slice.call(arguments,1)),this.is3d()){var i=this.inverted,s=this.clipBox,o=this.margin,a=i?"x":"y",r=i?"height":"width",l=i?"width":"height";s[i?"y":"x"]=-(o[3]||0),s[a]=-(o[0]||0),s[r]=this.chartWidth+(o[3]||0)+(o[1]||0),s[l]=this.chartHeight+(o[0]||0)+(o[2]||0),this.scale3d=1,!0===e.fitToPlot&&(this.scale3d=function(t,e){var i,s=t.plotLeft,o=t.plotWidth+s,a=t.plotTop,r=t.plotHeight+a,l=s+t.plotWidth/2,c=a+t.plotHeight/2,u={minX:Number.MAX_VALUE,maxX:-Number.MAX_VALUE,minY:Number.MAX_VALUE,maxY:-Number.MAX_VALUE},h=1;return i=[{x:s,y:a,z:0},{x:s,y:a,z:e}],n([0,1],function(t){i.push({x:o,y:i[t].y,z:i[t].z})}),n([0,1,2,3],function(t){i.push({x:i[t].x,y:r,z:i[t].z})}),i=p(i,t,!1),n(i,function(t){u.minX=Math.min(u.minX,t.x),u.maxX=Math.max(u.maxX,t.x),u.minY=Math.min(u.minY,t.y),u.maxY=Math.max(u.maxY,t.y)}),s>u.minX&&(h=Math.min(h,1-Math.abs((s+l)/(u.minX+l))%1)),o<u.maxX&&(h=Math.min(h,(o-l)/(u.maxX-l))),a>u.minY&&(h=u.minY<0?Math.min(h,(a+c)/(-u.minY+a+c)):Math.min(h,1-(a+c)/(u.minY+c)%1)),r<u.maxY&&(h=Math.min(h,Math.abs((r-c)/(u.maxY-c)))),h}(this,e.depth))}}),t.wrap(t.Chart.prototype,"redraw",function(t){this.is3d()&&(this.isDirtyBox=!0),t.apply(this,[].slice.call(arguments,1))}),t.wrap(t.Chart.prototype,"renderSeries",function(t){var e,n=this.series.length;if(this.is3d())for(;n--;)(e=this.series[n]).translate(),e.render();else t.call(this)}),t.Chart.prototype.retrieveStacks=function(e){var n,i=this.series,s={},o=1;return t.each(this.series,function(t){n=a(t.options.stack,e?0:i.length-1-t.index),s[n]?s[n].series.push(t):(s[n]={series:[t],position:o},o++)}),s.totalStacks=o+1,s},t.wrap(t.Axis.prototype,"setOptions",function(e,n){var i;e.call(this,n),this.chart.is3d()&&((i=this.options).tickWidth=t.pick(i.tickWidth,0),i.gridLineWidth=t.pick(i.gridLineWidth,1))}),t.wrap(t.Axis.prototype,"render",function(t){if(t.apply(this,[].slice.call(arguments,1)),this.chart.is3d()){var e=this.chart,n=e.renderer,i=e.options.chart.options3d,s=i.frame,o=s.bottom,a=s.back,r=s.side,l=i.depth,c=this.height,u=this.width,h=this.left,d=this.top;if(!this.isZAxis)if(this.horiz){var p={x:h,y:d+(e.xAxis[0].opposite?-o.size:c),z:0,width:u,height:o.size,depth:l,insidePlotArea:!1};this.bottomFrame?this.bottomFrame.animate(p):this.bottomFrame=n.cuboid(p).attr({fill:o.color,zIndex:e.yAxis[0].reversed&&i.alpha>0?4:-1}).css({stroke:o.color}).add()}else{var m={x:h+(e.yAxis[0].opposite?0:-r.size),y:d+(e.xAxis[0].opposite?-o.size:0),z:l,width:u+r.size,height:c+o.size,depth:a.size,insidePlotArea:!1};this.backFrame?this.backFrame.animate(m):this.backFrame=n.cuboid(m).attr({fill:a.color,zIndex:-3}).css({stroke:a.color}).add();var f={x:h+(e.yAxis[0].opposite?u:-r.size),y:d+(e.xAxis[0].opposite?-o.size:0),z:0,width:r.size,height:c+o.size,depth:l,insidePlotArea:!1};this.sideFrame?this.sideFrame.animate(f):this.sideFrame=n.cuboid(f).attr({fill:r.color,zIndex:-2}).css({stroke:r.color}).add()}}}),t.wrap(t.Axis.prototype,"getPlotLinePath",function(t){var e=t.apply(this,[].slice.call(arguments,1));if(!this.chart.is3d())return e;if(null===e)return e;var n=this.chart,i=n.options.chart.options3d,s=this.isZAxis?n.plotWidth:i.depth,o=this.opposite;this.horiz&&(o=!o);var a=[this.swapZ({x:e[1],y:e[2],z:o?s:0}),this.swapZ({x:e[1],y:e[2],z:s}),this.swapZ({x:e[4],y:e[5],z:s}),this.swapZ({x:e[4],y:e[5],z:o?0:s})];return a=p(a,this.chart,!1),e=this.chart.renderer.toLinePath(a,!1)}),t.wrap(t.Axis.prototype,"getLinePath",function(t){return this.chart.is3d()?[]:t.apply(this,[].slice.call(arguments,1))}),t.wrap(t.Axis.prototype,"getPlotBandPath",function(t){if(!this.chart.is3d())return t.apply(this,[].slice.call(arguments,1));var e=arguments,n=e[1],i=e[2],s=this.getPlotLinePath(i),o=this.getPlotLinePath(n);return o&&s?o.push("L",s[10],s[11],"L",s[7],s[8],"L",s[4],s[5],"L",s[1],s[2]):o=null,o}),t.wrap(t.Tick.prototype,"getMarkPath",function(t){var e=t.apply(this,[].slice.call(arguments,1));if(!this.axis.chart.is3d())return e;var n=[this.axis.swapZ({x:e[1],y:e[2],z:0}),this.axis.swapZ({x:e[4],y:e[5],z:0})];return e=["M",(n=p(n,this.axis.chart,!1))[0].x,n[0].y,"L",n[1].x,n[1].y]}),t.wrap(t.Tick.prototype,"getLabelPosition",function(t){var e=t.apply(this,[].slice.call(arguments,1));return this.axis.chart.is3d()&&(e=p([this.axis.swapZ({x:e.x,y:e.y,z:0})],this.axis.chart,!1)[0]),e}),t.wrap(t.Axis.prototype,"getTitlePosition",function(t){var e,n,i=this.chart.is3d();return i&&(n=this.axisTitleMargin,this.axisTitleMargin=0),e=t.apply(this,[].slice.call(arguments,1)),i&&((e=p([this.swapZ({x:e.x,y:e.y,z:0})],this.chart,!1)[0])[this.horiz?"y":"x"]+=(this.horiz?1:-1)*(this.opposite?-1:1)*n,this.axisTitleMargin=n),e}),t.wrap(t.Axis.prototype,"drawCrosshair",function(t){var e=arguments;this.chart.is3d()&&e[2]&&(e[2]={plotX:e[2].plotXold||e[2].plotX,plotY:e[2].plotYold||e[2].plotY}),t.apply(this,[].slice.call(e,1))}),t.Axis.prototype.swapZ=function(t,e){if(this.isZAxis){var n=e?0:this.chart.plotLeft,i=this.chart;return{x:n+(i.yAxis[0].opposite?t.z:i.xAxis[0].width-t.z),y:t.y,z:t.x-n}}return t};var y=t.ZAxis=function(){this.isZAxis=!0,this.init.apply(this,arguments)};function w(e){if(this.chart.is3d()){var n=this.chart.options.plotOptions.column.grouping;void 0===n||n||void 0===this.group.zIndex||this.zIndexSet||(this.group.attr({zIndex:10*this.group.zIndex}),this.zIndexSet=!0);var i=this.options,s=this.options.states;this.borderWidth=i.borderWidth=f(i.edgeWidth)?i.edgeWidth:1,t.each(this.data,function(e){if(null!==e.y){var n=e.pointAttr;this.borderColor=t.pick(i.edgeColor,n[""].fill),n[""].stroke=this.borderColor,n.hover.stroke=t.pick(s.hover.edgeColor,this.borderColor),n.select.stroke=t.pick(s.select.edgeColor,this.borderColor)}})}e.apply(this,[].slice.call(arguments,1))}t.extend(y.prototype,t.Axis.prototype),t.extend(y.prototype,{setOptions:function(e){e=t.merge({offset:0,lineWidth:0},e),t.Axis.prototype.setOptions.call(this,e),this.coll="zAxis"},setAxisSize:function(){t.Axis.prototype.setAxisSize.call(this),this.width=this.len=this.chart.options.chart.options3d.depth,this.right=this.chart.chartWidth-this.width-this.left},getSeriesExtremes:function(){var e=this,n=e.chart;e.hasVisibleSeries=!1,e.dataMin=e.dataMax=e.ignoreMinPadding=e.ignoreMaxPadding=null,e.buildStacks&&e.buildStacks(),t.each(e.series,function(t){if(t.visible||!n.options.chart.ignoreHiddenSeries){var i,s=t.options.threshold;e.hasVisibleSeries=!0,e.isLog&&s<=0&&(s=null),(i=t.zData).length&&(e.dataMin=Math.min(a(e.dataMin,i[0]),Math.min.apply(null,i)),e.dataMax=Math.max(a(e.dataMax,i[0]),Math.max.apply(null,i)))}})}}),t.wrap(t.Chart.prototype,"getAxes",function(e){var n=this,i=this.options,s=i.zAxis=t.splat(i.zAxis||{});e.call(this),n.is3d()&&(this.zAxis=[],t.each(s,function(t,e){t.index=e,t.isX=!0,new y(n,t).setScale()}))}),t.wrap(t.seriesTypes.column.prototype,"translate",function(e){if(e.apply(this,[].slice.call(arguments,1)),this.chart.is3d()){var n=this.chart,i=this.options,s=i.depth||25,o=(i.stacking?i.stack||0:this._i)*(s+(i.groupZPadding||1));!1!==i.grouping&&(o=0),o+=i.groupZPadding||1,t.each(this.data,function(t){if(null!==t.y){var e=t.shapeArgs,i=t.tooltipPos;t.shapeType="cuboid",e.z=o,e.depth=s,e.insidePlotArea=!0,i=p([{x:i[0],y:i[1],z:o}],n,!0)[0],t.tooltipPos=[i.x,i.y]}}),this.z=o}}),t.wrap(t.seriesTypes.column.prototype,"animate",function(e){if(this.chart.is3d()){var n=arguments[1],i=this.yAxis,s=this,o=this.yAxis.reversed;t.svg&&(n?t.each(s.data,function(t){null!==t.y&&(t.height=t.shapeArgs.height,t.shapey=t.shapeArgs.y,t.shapeArgs.height=1,o||(t.stackY?t.shapeArgs.y=t.plotY+i.translate(t.stackY):t.shapeArgs.y=t.plotY+(t.negative?-t.height:t.height)))}):(t.each(s.data,function(t){null!==t.y&&(t.shapeArgs.height=t.height,t.shapeArgs.y=t.shapey,t.graphic&&t.graphic.animate(t.shapeArgs,s.options.animation))}),this.drawDataLabels(),s.animate=null))}else e.apply(this,[].slice.call(arguments,1))}),t.wrap(t.seriesTypes.column.prototype,"init",function(t){if(t.apply(this,[].slice.call(arguments,1)),this.chart.is3d()){var e=this.options,n=e.grouping,i=e.stacking,s=a(this.yAxis.options.reversedStacks,!0),o=0;if(void 0===n||n){var r,l=this.chart.retrieveStacks(i),c=e.stack||0;for(r=0;r<l[c].series.length&&l[c].series[r]!==this;r++);o=10*(l.totalStacks-l[c].position)+(s?r:-r),this.xAxis.reversed||(o=10*l.totalStacks-o)}e.zIndex=o}}),t.wrap(t.Series.prototype,"alignDataLabel",function(t){if(this.chart.is3d()&&("column"===this.type||"columnrange"===this.type)){var e=this.chart,n=arguments[4],i={x:n.x,y:n.y,z:this.z};i=p([i],e,!0)[0],n.x=i.x,n.y=i.y}t.apply(this,[].slice.call(arguments,1))}),t.seriesTypes.columnrange&&t.wrap(t.seriesTypes.columnrange.prototype,"drawPoints",w),t.wrap(t.seriesTypes.column.prototype,"drawPoints",w),t.wrap(t.seriesTypes.pie.prototype,"translate",function(t){if(t.apply(this,[].slice.call(arguments,1)),this.chart.is3d()){var e=this,i=e.chart.options,s=e.options,o=s.depth||0,a=i.chart.options3d,r=a.alpha,l=a.beta,p=s.stacking?(s.stack||0)*o:e._i*o;p+=o/2,!1!==s.grouping&&(p=0),n(e.data,function(t){var n,i=t.shapeArgs;t.shapeType="arc3d",i.z=p,i.depth=.75*o,i.alpha=r,i.beta=l,i.center=e.center,n=(i.end+i.start)/2,t.slicedTranslation={translateX:d(h(n)*s.slicedOffset*h(r*c)),translateY:d(u(n)*s.slicedOffset*h(r*c))}})}}),t.wrap(t.seriesTypes.pie.prototype.pointClass.prototype,"haloPath",function(t){var e=arguments;return this.series.chart.is3d()?[]:t.call(this,e[1])}),t.wrap(t.seriesTypes.pie.prototype,"drawPoints",function(e){var i=this.options,s=i.states;this.chart.is3d()&&(this.borderWidth=i.borderWidth=i.edgeWidth||1,this.borderColor=i.edgeColor=t.pick(i.edgeColor,i.borderColor,void 0),s.hover.borderColor=t.pick(s.hover.edgeColor,this.borderColor),s.hover.borderWidth=t.pick(s.hover.edgeWidth,this.borderWidth),s.select.borderColor=t.pick(s.select.edgeColor,this.borderColor),s.select.borderWidth=t.pick(s.select.edgeWidth,this.borderWidth),n(this.data,function(t){var e=t.pointAttr;e[""].stroke=t.series.borderColor||t.color,e[""]["stroke-width"]=t.series.borderWidth,e.hover.stroke=s.hover.borderColor,e.hover["stroke-width"]=s.hover.borderWidth,e.select.stroke=s.select.borderColor,e.select["stroke-width"]=s.select.borderWidth})),e.apply(this,[].slice.call(arguments,1)),this.chart.is3d()&&n(this.points,function(t){var e=t.graphic;e&&e[t.y&&t.visible?"show":"hide"]()})}),t.wrap(t.seriesTypes.pie.prototype,"drawDataLabels",function(t){if(this.chart.is3d()){var e=this.chart.options.chart.options3d;n(this.data,function(t){var i=t.shapeArgs,s=i.r,o=(i.alpha||e.alpha)*c,a=(i.beta||e.beta)*c,r=(i.start+i.end)/2,l=t.labelPos,d=-s*(1-h(o))*u(r),p=s*(h(a)-1)*h(r);n([0,2,4],function(t){l[t]+=p,l[t+1]+=d})})}t.apply(this,[].slice.call(arguments,1))}),t.wrap(t.seriesTypes.pie.prototype,"addPoint",function(t){t.apply(this,[].slice.call(arguments,1)),this.chart.is3d()&&this.update(this.userOptions,!0)}),t.wrap(t.seriesTypes.pie.prototype,"animate",function(e){if(this.chart.is3d()){var n,i=arguments[1],s=this.options.animation,o=this.center,a=this.group,r=this.markerGroup;t.svg&&(!0===s&&(s={}),i?(a.oldtranslateX=a.translateX,a.oldtranslateY=a.translateY,n={translateX:o[0],translateY:o[1],scaleX:.001,scaleY:.001},a.attr(n),r&&(r.attrSetters=a.attrSetters,r.attr(n))):(n={translateX:a.oldtranslateX,translateY:a.oldtranslateY,scaleX:1,scaleY:1},a.animate(n,s),r&&r.animate(n,s),this.animate=null))}else e.apply(this,[].slice.call(arguments,1))}),t.wrap(t.seriesTypes.scatter.prototype,"translate",function(e){if(e.apply(this,[].slice.call(arguments,1)),this.chart.is3d()){var n,i,s,o,a,r=this.chart,l=t.pick(this.zAxis,r.options.zAxis[0]),c=[];for(a=0;a<this.data.length;a++)n=this.data[a],o=l.isLog&&l.val2lin?l.val2lin(n.z):n.z,n.plotZ=l.translate(o),n.isInside=!!n.isInside&&(o>=l.min&&o<=l.max),c.push({x:n.plotX,y:n.plotY,z:n.plotZ});for(i=p(c,r,!0),a=0;a<this.data.length;a++)n=this.data[a],s=i[a],n.plotXold=n.plotX,n.plotYold=n.plotY,n.plotZold=n.plotZ,n.plotX=s.x,n.plotY=s.y,n.plotZ=s.z}}),t.wrap(t.seriesTypes.scatter.prototype,"init",function(t,e,n){e.is3d()&&(this.axisTypes=["xAxis","yAxis","zAxis"],this.pointArrayMap=["x","y","z"],this.parallelArrays=["x","y","z"],this.directTouch=!0);var i=t.apply(this,[e,n]);if(this.chart.is3d()){var s="x: <b>{point.x}</b><br/>y: <b>{point.y}</b><br/>z: <b>{point.z}</b><br/>";this.userOptions.tooltip?this.tooltipOptions.pointFormat=this.userOptions.tooltip.pointFormat||s:this.tooltipOptions.pointFormat=s}return i}),t.VMLRenderer&&(t.setOptions({animate:!1}),t.VMLRenderer.prototype.cuboid=t.SVGRenderer.prototype.cuboid,t.VMLRenderer.prototype.cuboidPath=t.SVGRenderer.prototype.cuboidPath,t.VMLRenderer.prototype.toLinePath=t.SVGRenderer.prototype.toLinePath,t.VMLRenderer.prototype.createElement3D=t.SVGRenderer.prototype.createElement3D,t.VMLRenderer.prototype.arc3d=function(e){var n=t.SVGRenderer.prototype.arc3d.call(this,e);return n.css({zIndex:n.zIndex}),n},t.VMLRenderer.prototype.arc3dPath=t.SVGRenderer.prototype.arc3dPath,t.wrap(t.Axis.prototype,"render",function(t){t.apply(this,[].slice.call(arguments,1)),this.sideFrame&&(this.sideFrame.css({zIndex:0}),this.sideFrame.front.attr({fill:this.sideFrame.color})),this.bottomFrame&&(this.bottomFrame.css({zIndex:1}),this.bottomFrame.front.attr({fill:this.bottomFrame.color})),this.backFrame&&(this.backFrame.css({zIndex:0}),this.backFrame.front.attr({fill:this.backFrame.color}))}))})}).call(this,n(375))},function(t,e,n){var i,s;i=[n(1),n(13),n(19),n(3),n(15),n(10)],void 0===(s=function(t,e,n,i,s,o){"use strict";var a=o.extend({name:"uwa-slider",defaultOptions:{className:"",isTouch:n.Features.touchEvents,value:0,handleButton:!1,handleDragTreshold:40,slider:{html:[{tag:"div",class:"scrubber-wrapper",html:{tag:"div",class:"scrubber",html:[{tag:"div",class:"progress"},{tag:"div",class:"loaded"},{tag:"div",class:"handle handle-hide"}]}}],scrubberClass:"scrubber",progressClass:"progress",handleClass:"handle",loadedClass:"loaded"}},init:function(t){t=t||{},this._parent(t),this.eventNames={start:this.options.isTouch?"touchstart":"mousedown",move:this.options.isTouch?"touchmove":"mousemove",end:this.options.isTouch?"touchend":"mouseup"},this.body=t.body||document.body,this.bodyEvents={},this.options.handleButton&&(this.bodyEvents[this.eventNames.move]=this.onHandleDrag.bind(this),this.bodyEvents[this.eventNames.end]=this.onHandleDragEnd.bind(this)),this._buildSkeleton(),this._attachEvents(),this.reset()},reset:function(){var t=this.elements;this.loadedPercent=0,t.progress.setStyle("width",0),this._updatePosition(0)},show:function(){this.container.show()},hide:function(){this.container.hide()},setValue:function(t){t<0||t>100?console.log("The value should be an integer between 0 and 100"):(this.setOption("value",t),this._updatePosition(t))},setLoadedValue:function(t){this.elements.loaded.setStyle("width",t+"%")},onInjected:function(){this.options.value>0&&this._updatePosition(this.options.value)},onHandleDragStart:function(t){var e=this.elements.handle,n=i.getPosition(t).x-e.getPosition(document).x;Math.abs(n)<=this.options.handleDragTreshold&&(i.stop(t),s.addEvents.call(this.body,this.bodyEvents))},onHandleDrag:function(t){i.stop(t);var e=i.getPosition(t).x,n=this.elements.scrubber.getParent().getClientRects()[0].left;(n=e-n)<0?n=0:n>this.elements.scrubber.offsetWidth&&(n=this.elements.scrubber.offsetWidth),this._updateValue(n)},onHandleDragEnd:function(t){i.stop(t),s.removeEvents.call(this.body,this.bodyEvents),this.drag=null},onProgressBarClick:function(t){var e;e=i.getPosition(t).x-this.elements.scrubber.getPosition(document).x,this._updateValue(e)},_buildSkeleton:function(){var e,n,i=this.options,s=i.slider;return i.container&&t.is(i.container.getElement(".controls-slider"),"element")?((e=i.container.getElement(".controls-slider")).addClassName(this.getClassNames()),e.addContent(i.slider.html)):e=t.createElement("div",{class:this.getClassNames(),html:i.slider.html}),n=e.getElement.bind(e),this.elements={scrubber:n("."+s.scrubberClass),progress:n("."+s.progressClass),handle:n("."+s.handleClass),loaded:n("."+s.loadedClass)},i.handleButton&&this.elements.handle.removeClassName("handle-hide"),this.container=e,this},_attachEvents:function(){var t=this.elements,e=this.dispatchEvent.bind(this);return this.options.handleButton&&this.container.addEvent(this.eventNames.start,this.onHandleDragStart.bind(this)),t.scrubber.addEvent("click",e.bind(this,"onProgressBarClick")),this},_updateValue:function(t){var e=this.elements.scrubber.offsetWidth,n=Math.round(100*t/e);this.setOption("value",n),this._updatePosition(n),this.dispatchEvent("onChange",n)},_updatePosition:function(t){if(this.container&&this.container.isInjected()){var e=this.elements.progress,n=this.elements.scrubber,i=this.elements.handle,s=i.offsetWidth/2/n.offsetWidth*100;e.setStyle("width",t+"%"),i.setStyle("left",t-s+"%")}}});return t.namespace("Controls/Slider",a,t)}.apply(e,i))||(t.exports=s)},function(t,e,n){"use strict";var i,s;i=[n(24),n(3),n(8)],void 0===(s=function(t,e,n){var i=n.Text.extend(t,{_previousValue:void 0,name:"nv-autosave-input",init:function(t){this._parent(t),function(){var t=this,n=function(){var e=t.getValue();t._previousValue!==e&&(t._previousValue=e,t.elements.input.addClassName("saving"),t.dispatchEvent("onSaveReady",[e]))};t.elements.input.addEvents({blur:n,keydown:function(i){"input"===this.getTagName()&&"return"===e.whichKey(i)?n():t.setDelayed("isThereInputYet",n,1e3)}})}.call(this)},setValue:function(t){this._parent(t),this._previousValue=t},saved:function(){this.elements.input.removeClassName("saving")}});return App.UI||(App.UI={}),App.UI.AutoSaveInput=i,i}.apply(e,i))||(t.exports=s)},function(t,e,n){"use strict";var i,s;i=[n(1),n(10),n(8),n(6),n(274),n(4)],void 0===(s=function(t,e,n,i,s,o){var a=t.createElement;return e.extend({name:"nv-corpus-selector",init:function(e,n){this._parent(e),this.isRequired=n,this.elements.container||(this.elements.container=t.createElement("div",{class:this.getClassNames()})),this.corpus=[{id:"languages",title:_("Corpus language"),multiple:!0,required:!0,availableValues:[{label:_("English"),value:"en"},{label:_("French"),value:"fr"}]},{id:"industry",title:_("Industry Corpus"),availableValues:[]},{id:"generic",title:_("Generic Corpus"),multiple:!0,availableValues:[]},{id:"topics",title:_("Special focus on"),multiple:!0,availableValues:[]}],this._inputs={},this._updateLabels={},this._segments={},this.dataFields=["languages","corpus","topics"],this.defaultData={languages:[],corpus:{industry:[],generic:[]},topics:[]},this._data=t.clone(this.defaultData),this.getCorpus().done(function(t){this.formatCorpus(t),this.elements.container.setContent(this.corpus.map(this.buildItem,this)),this.corpus.forEach(this.syncItem,this)}.bind(this))},setData:function(e){if(!this._syncing){for(var n in e&&!Object.keys(e).length&&(e=null),e=t.clone(e||this.defaultData||{}))this.dataFields.indexOf(n)<0&&delete e[n];this._data=e,this.corpus.forEach(this.syncItem,this),this.updateLabels(),this.dispatchEvent("onChange",[this.getData()])}},getData:function(){return t.clone(this._data)},isDataValid:function(){var t,e=this.getData();return!this.corpus.some(function(n){var i=e[n.id]||e.corpus&&e.corpus[n.id];if(!this.isRequired||"industry"!==n.id&&"generic"!==n.id){if(n.required&&(!i||!i.length))return!0}else{if("generic"===n.id&&!i.length&&!t)return!0;"industry"===n.id&&i.length&&!t&&(t=!0)}},this)},getItemById:function(t){return t="agency"===(t=t.toLowerCase())?"industry":t,this.corpus.filter(function(e){return e.id===t})[0]},getAvailableSegments:function(t,e){var n=t.availableValues.detect(function(t){return t.value===e});return!!(n&&n.segments&&n.segments.length)&&n.segments},disableNext:function(){},getCorpus:function(){return i.wizardryGetAllCorpora({type:"agency",generic:!0}).then(function(t){if(!t)throw new Error("no corpus");return t})},buildItem:function(t){var e,i;if(t.multiple)e=new s({availableValues:t.availableValues,events:{onChange:function(e){this.onUpdateItem(t,e.list)}.bind(this)}}),i=function(){e.updateLabels()};else{var o=function(){var e=t.availableValues.map(function(t){return"function"==typeof t.label&&(t=Object.assign({},t,{label:t.label()})),t});return e.unshift({label:_("Choose..."),value:""}),e};e=new n.Select({options:o(),events:{onChange:function(){this.onUpdateItem(t,e.getValue())}.bind(this)}}),i=function(){e.putOptions(o())}}return this._inputs[t.id]=e,this._updateLabels[t.id]=i,a("div",{class:this.getClassNames("-item"),html:[{tag:"span",class:this.getClassNames("-item-title"),text:t.title},e]})},syncItem:function(e){if(!this._syncing){this._syncing=!0;var n=this._inputs[e.id];if(n){var i=this.formatDataForInput(e);n instanceof s?n.setData(i.values):n.setValue(i.values);var o=this._segments[e.id],a=this.getAvailableSegments(e,i.values[0]);!o||a&&t.equals(a,o.availableSegments)||(o.input.destroy(),o.element.destroy(),o=this._segments[e.id]=null),a&&(o||(o=this._segments[e.id]=this.buildSegment(e,a),n.getContent().grab(o.element,"after")),o.input.options.label=i.segments&&i.segments.length?"":_("All"),1===o.availableSegments.length&&(o.input.hide(),o.element.hide()),o.input.setData(i.segments||[]))}this._syncing=!1}},buildSegment:function(t,e){var n=new s({availableValues:e,label:_("All"),events:{onChange:function(e){this.onUpdateSegments(t,e.list,"segments")}.bind(this)}});return{input:n,element:a("div",{class:this.getClassNames("-item-segment"),html:[{tag:"span",class:this.getClassNames("-item-title"),text:_("Segment")},n]}),availableSegments:e}},formatCorpus:function(t){var e=function(t){var e=this._data.languages||[];if(0===e.length||e.length&&e.every(function(e){return t.langs.includes(e)}))return t.name;var n=t.langs.map(function(t){return this.corpus[0].availableValues.filter(function(e){return e.value===t})[0].label}.bind(this));return _("{0} ({1} only)").format(t.name,n.join(", "))},n=Object.create(null);function i(t,e,n){var i=t.detect(function(t){return t.name===e});return i?i.langs.push(n):(i={name:e,langs:[n]},t.push(i)),i}o.forEachProperty(t,function(t,e){o.forEachProperty(t,function(t,s){n[s]||(n[s]=[]),o.forEachProperty(t,function(t,a){var r=i(n[s],a,e);t&&(r.segments||(r.segments=[]),o.forEachProperty(t,function(t,n){i(r.segments,n,e)}))})},this)},this),o.forEachProperty(n,function(t,n){this.getItemById(n).availableValues=t.map(function(t){var n={label:e.bind(this,t),value:t.name};return t.segments&&(n.segments=t.segments.map(function(t){return{label:e.bind(this,t),value:t.name}},this)),n},this)},this)},formatDataForInput:function(t){var e,n,i=this.getData();if(i[t.id])e=i[t.id];else if(i.corpus){var s=i.corpus[t.id];e=s.map(function(t){return t.category}),t.multiple||(n=s.length&&s[0].segments)}else e=[];return{values:e,segments:n}},updateLabels:function(){this._updateLabels.industry&&this._updateLabels.industry(),this.updateLabels.generic&&this._updateLabels.generic(),o.forEachProperty(this._segments,function(t){t.input.updateLabels()})},onUpdateItem:function(t,e){this.dispatchEvent("onItemSelected",{id:t.id,title:t.title,value:e});var n=this.getData();n[t.id]?n[t.id]=e:(n.corpus=n.corpus||{},n.corpus[t.id]=e.filter(function(t){return t}).map(function(t){return{category:t}})),this.setData(n)},onUpdateSegments:function(t,e){var n=this.getData();n.corpus[t.id][0].segments=e,this.setData(n)}})}.apply(e,i))||(t.exports=s)},function(t,e,n){"use strict";var i,s;i=[n(1),n(10),n(8),n(108),n(59),n(23),n(16),n(3),n(26),n(2),n(4),n(21),n(17),n(217),n(52),n(117),n(35),n(6),n(27),n(377),n(62),n(176),n(177),n(179),n(364),n(277),n(180),n(111),n(449),n(36),n(173),n(216)],void 0===(s=function(t,e,n,i,s,o,a,r,l,c,u,h,d,p,m,f,g,v,b,y,w,x,C,S,E,k,T,A,I,N,D,O){var P=t.createElement,F=[{label:_("All"),filter:{}},{label:_("What is said"),filter:{name:"SocialPack_Analytics",data:{widgetMode:"what"}}},{label:_("How is it perceived"),filter:{name:"SocialPack_Analytics",data:{widgetMode:"how"}}},{label:_("Who is talking"),filter:{name:"SocialPack_Analytics",data:{widgetMode:"who"}}},{label:_("Where is it happening"),filter:{name:"SocialPack_Analytics",data:{widgetMode:"where"}}},{label:_("Miso Data"),filter:{name:"SocialPack_Compare",data:{query:/./}}},{label:_("Analytics compare"),filter:{name:"SocialPack_Compare",data:{query:/^$/}}},{label:_("Facebook Search and Compare"),filter:{name:"SearchTrends",data:{type:/^(facebook|)$/}}},{label:_("Twitter Search and Compare"),filter:{name:"SearchTrends",data:{type:"twitter"}}}];function M(e,n){if(e.name&&n.getName()!==e.name)return!1;if(e.data){var i,s=n.getData();for(i in e.data){var o=e.data[i],a=s[i]||"";if(!(t.is(o,"regexp")?o.test(a):a===o))return!1}}return!0}var L=e.extend({name:"nv-options",controls:{},isOpen:!1,isBuilt:!1,init:function(t){this._parent(t),this._overlays={},this.getContent()},getContent:function(){return this.elements.container||this.build(),this.elements.container},build:function(){this.isBuilt||(this.elements.container=P("div",{action:"#",class:this.getClassNames(),html:this.getElementsToBuild(),events:{keydown:function(t){var e=r.getElement(t);e.isInjected()&&!e.getParent(".nv-agency")&&"return"===r.whichKey(t)&&this.close()}.bind(this)}}),this.isBuilt=!0)},getElementsToBuild:function(){return[u.createCloseIcon("options").addEvent("click",this.close.bind(this))]},buildOptionsGroupContainer:function(t,e){return P("div",{class:"options-group",id:e,html:[{tag:"div",class:"title",text:t},{tag:"div",class:"content autoclear"}]})},buildSubtabOptions:function(){if(!c.Page.inSmartReaderView)return null;var t=this,e=t.buildOptionsGroupContainer(_("Subtab option"),"subTabOption"),i=e.getElement(".content"),s=App.SmartReader.getGroup();return t.controls.subtabDeleteButton=new n.Button({attributes:{id:"btn-tab-delete"},className:"iconl delete dark-grey",value:_("Delete"),events:{onClick:function(){t.showOverlay("ReaderRemoveFromGroup")}}}),i.addContent(P("p",{class:"suboption",html:[P("span",{class:"uwa-icon uwa-icon-only "+s.icon}),P("span",{class:"text",html:s.label})]}),P("p",{class:"suboption controls",html:t.controls.subtabDeleteButton})),e},buildGeneralOptions:function(){return this.buildOptionsGroupContainer(_("Options"),"globalOption")},toggle:function(){this.isOpen?this.close():this.open()},close:function(t){if(this.isOpen){"function"!=typeof t&&(t=null);var e=this,n=function(n){e.elements.container.remove(),h.updateLabelFilter(),t&&t(n)};if(e.unlinkToDom(e.getParent()),e.fx){var i=e.elements.container.getSize().height;e.fx[0].addEventOnce("onComplete",n),e.fx[0].start({height:0}),e.fx[1].start({marginTop:-i})}else e.getParent().setStyles({height:0,overflow:"hidden"}),n();e.isOpen=!1,e.dispatchEvent("onClose")}},open:function(){if(!this.isOpen&&this.elements.container.isInjected()){var t=this.getParent();t.setStyles({overflow:"hidden",height:0});var e=this.elements.container,n=e.getSize().height;this.fx||(this.fx=[new l(t,{duration:200,events:{onComplete:function(){t.getSize().height>0&&t.setStyle("overflow","")},onStart:function(){t.setStyle("overflow","hidden")}}}),new l(e,{duration:200})]),0===e.getComputedSize("margin-top")&&e.setStyle("margin-top",-n),this.fx[0].start({height:n}),this.fx[1].start({marginTop:0}),this.isOpen=!0,this.linkToDom(this.getParent()),this.dispatchEvent("onOpen")}},getParent:function(){return this.elements.container.getParent()},getTabObj:function(){var t=h.getFocused();return t&&t.dataObj},getTabInstanceInWidgetView:function(){var t=h.getFocused();if(t&&!t.setTitle)throw new Error("Not a widget view tab instance");return t},showOverlay:function(t){this._overlays[t]=new j[t],this._overlays[t].inject(this.elements.container).open(),this._overlays[t].elements.container.setStyles({height:this.elements.container.getDimensions().height}),m.pushFocus("tab-overlay")},getElement:function(t){return this.getContent().getElement(t)},getElements:function(t){return this.getContent().getElements(t)}}),R=L.extend({name:"tab autoclear",controls:{privateCheckbox:null,lockedCheckbox:null,tabIcon:null,shareButton:null,duplicateButton:null,deleteButton:null,addToLibButton:null,topic:null,language:null},defaultOptions:{withWizard:!1,tabId:null},init:function(t){if(t&&t.withWizard&&void 0===t.tabId)throw new Error("Missing tabId parameter");this._parent(t)},toggle:function(){this.isOpen?this.close():this.open()},getElementsToBuild:function(){return[u.createCloseIcon("tabOptions").addEvent("click",this.close.bind(this)),this.buildWizard()]},buildGeneralOptions:function(){return this.buildOptionsGroupContainer(_("Tab options"),"tabGlobalOption")},buildLabelOptions:function(){var e,i=this.buildOptionsGroupContainer(_("Tab labels"),"tabLabels"),o=i.getElement(".content"),a=this.getTabObj(),l=!(c.Page.isMaster||c.Page.isDraft);if(!l||h.getLabels(a.id).length){var u=function t(){e.setContent(null),h.getLabels(a.id).forEach(function(n){new s({value:n,className:"green",closable:!l,events:{onClose:function(){h.removeLabel(a.id,n),t()}}}).inject(e)})},d=function(){var t=o.getElement(".add-label-name-input"),e=t.value;""!==e&&(h.addLabel(a.id,e),t.set("value",""),u())};if(!l){var p=t.createElement("div",{class:"add-label-form"}).inject(o);p.addContent({tag:"span",text:"Enter new label:"}),new n.Text({className:"add-label-name-input",events:{onKeyDown:function(t){"return"===r.whichKey(t)&&(r.stopPropagation(t),d())}}}).inject(p),new n.Button({value:"Add",className:"add-label-button dark-grey",events:{onClick:d}}).inject(p)}return e=t.createElement("span",{class:"label-list",text:""}).inject(o),u(),i}},buildAnalyticsOptions:function(){var t=this.getAvailableDateRangeInfos();if(t.length){var e=this.buildOptionsGroupContainer(_("Tab analytics settings"),"tabAnalyticsOptions"),i=e.getElement(".content");return this.initRangePicker(),i.addContent({tag:"form",method:"post",events:{submit:this.onSubmitChangeAnalyticsPeriod.bind(this)},html:[{tag:"label",html:[_("Define a period:"),this.rangePicker]},{tag:"label",html:[_("Type:"),new n.Select({attributes:{name:"mode"},options:t.map(function(t,e){return{value:e,label:t.label}})})]},new n.Button({value:_("Apply"),attributes:{type:"submit"}})]}),e}},buildSubOptionTypeOptions:function(t){t=t||"";var e;if(this.hasLockedTabOption()||this.hasPrivateTabOption()){var i=this.setTypeLockedOrPrivateChecked.bind(this);e=P("p",{class:"suboption {0} suboption-tab-type".format(t)}),this.hasLockedTabOption()&&(this.controls.lockedCheckbox=new n.Checkbox({className:"green",value:"locked",events:{onChange:i}}),e.addContent(P("label",{class:"locked"}).addContent(this.controls.lockedCheckbox.getContent(),P("span",{class:"uwa-icon uwa-icon-only lock"}),P("span",{text:_("Locked tab")})))),this.hasPrivateTabOption()&&(this.controls.privateCheckbox=new n.Checkbox({className:"green",value:"private",events:{onChange:i}}),e.addContent(P("label",{class:"private",title:_("Will not be published")}).addContent(this.controls.privateCheckbox,P("span",{"data-icon":"₦",class:"uwa-icon uwa-icon-only small-icon"}),P("span",{text:_("Private tab")}))))}return e},buildIconPicker:function(){return P("button",{id:"btn-tab-icon",type:"button",class:"nv-flat-button uwa-input",html:'<img id="previewIconTab" src="'+u.BLANK_IMAGE_URL+'" class="tab-icon" /><b class="caret"></b>',events:{click:this.onShowIconPicker.bind(this)}})},buildNameChanger:function(){var t=this;return new y({attributes:{id:"field-tabName"},className:"text",placeholder:_("Choose an icon and title"),events:{onSaveReady:function(e){t.getTabInstanceInWidgetView().setTitle(e),this.saved()}}}).getContent()},buildSuboptionControls:function(t){t=t||"";var e=this;return h.getAll().length>1&&(e.controls.deleteButton=new n.Button({attributes:{id:"btn-tab-delete"},className:"iconl delete dark-grey",value:_("Delete"),events:{onClick:e.onActionDeleteTab.bind(e)}})),e.isTabSharingEnabled()&&c.isAllowed("share")&&(e.controls.shareButton=new n.Button({attributes:{id:"btn-tab-share"},className:"iconl curvy-next dark-grey",value:_("Share"),events:{onClick:function(){h.share(e.getTabObj().id)}}})),c.User.isRegistered&&!h.isReadOnly(this.getTabObj())&&(e.controls.duplicateButton=new n.Button({attributes:{id:"btn-tab-duplicate"},className:"iconl duplicate dark-grey",value:_("Duplicate"),events:{onClick:function(){h.duplicate(e.getTabObj().id)}}})),this.controls.addToLibButton=null,e.hasLibraryAddButton()&&(e.controls.addToLibButton=new n.Button({attributes:{id:"btn-tab-addToLib"},className:"iconl book dark-grey",value:_("Add to library"),events:{onClick:e.onActionAddToLibrary.bind(e)}})),P("p",{class:"suboption {0} suboption-actions".format(t)}).addContent(e.controls.shareButton,e.controls.duplicateButton,e.controls.addToLibButton,e.controls.deleteButton)},buildWizard:function(){if(this.options.withWizard)return C.isAvailable()?this.buildWizardryAgency():this.buildTabWizard()},buildTabWizard:function(){var e=this,i=e.buildOptionsGroupContainer(_("Enter your topic, or leave empty"),"tabWizardOption"),s=i.getElement(".content");return this.controls.topic=new n.Text({attributes:{id:"topic"}}),this.controls.language=new n.Select({attributes:{name:"mode"},options:[{value:"en",label:_("English"),selected:"en"===c.Globalization.shortLanguage},{value:"fr",label:_("French"),selected:"fr"===c.Globalization.shortLanguage},{value:"es",label:_("Spanish"),selected:"es"===c.Globalization.shortLanguage},{value:"de",label:_("German"),selected:"de"===c.Globalization.shortLanguage}]}),s.addContent(t.createElement("form",{events:{submit:function(t){t.preventDefault(),e.populate()}}}).addContent(t.createElement("strong",{html:_("Populate with")}),this.controls.topic,t.createElement("strong",{html:_("in")}),this.controls.language,new n.Button({attributes:{type:"submit"},className:"green action",value:_("Submit")}))),i},buildWizardryAgency:function(){var e=this.buildOptionsGroupContainer(_("Agency Wizardry"),"agencyWizardOption"),i=t.createElement("span",{events:{click:function(t){var e=r.getElement(t).getAttribute("data-type");e&&C.populateTab(this.options.tabId,e)}.bind(this)}});return i.setContent(C.getTabSubjectTypes().map(function(t,e,i){return[0===e?"":e===i.length-1?" "+_("or")+" ":", ",new n.Button({value:t.label,className:"green",attributes:{"data-type":t.type}})]})),e.getElement(".content").addContent(_("Populate with a new"),i),e},isTabSharingEnabled:function(){return S.getTabsConfig().locked.tabs.length>0},hasLockedTabOption:function(){return c.Page.isMaster||c.Page.isDraft},hasPrivateTabOption:function(){return c.Page.isMaster||c.Page.isDraft},hasLibraryAddButton:function(){return this.getStreamsFromModules().length&&c.isAllowed("library")},getAvailableDateRangeInfos:function(){if(!c.isAllowed("socialpack")||h.isReadOnly(this.getTabObj()))return[];var t=d.getByTab(this.tabId),e=F.filter(function(e){return t.some(function(t){return M(e.filter,t)})});return e.length<=2&&e.shift(),e},buildIconColorsBlock:function(){var t=document.createDocumentFragment(),e=P("ul");P("p",{html:_("Select icons' color")}).inject(t);var n=this.getTabObj().iconConfig||{},i=f.availableColors.includes(n.color)?n.color:"green";return f.availableColors.forEach(function(t){P("li",{"data-color":t,class:"tab-icon-container {0} {1}".format(t,i===t?"selected":""),html:P("span",{class:"uwa-icon checked"}),events:{click:this.onIconColorChange.bind(this)}}).inject(e)},this),e.inject(t),t},buildIcons:function(t){t=t||{color:"green"};var e=document.createDocumentFragment(),n=P("ul"),i=[];return f.getSplatIcons().forEach(function(s,o){0!==o&&o%12==0&&(i.includes(n)||(n.inject(e),i.push(n)),n=P("ul"));var a=f.getIconPosition(s,t.color);P("li",{"data-icon":s,class:"tab-icon-container {0}".format(t.icon===s?"selected":""),html:P("span",{class:"tab-icon",styles:{"background-position":"{0}px {1}px".format(a.x,a.y)}})}).inject(n)}),i.includes(n)||n.inject(e),e},getStreamsFromModules:function(){var t=[];return d.getByTab().forEach(function(e){e.isStream()&&e.getStreams().forEach(function(e){t.includes(e)||t.push(e)})}),t},onActionDeleteTab:function(){this.showOverlay("AppsRemoveTab")},onActionAddToLibrary:function(){new k({streams:this.getStreamsFromModules()}).open()},onSubmitChangeAnalyticsPeriod:function(t){r.stop(t);var e=new w({titleText:this.getTabObj().title.unescapeHTML(),message:_("Update all analytics on this tab?"),confirm:{text:_("Update")},discard:{text:""}}),n=this.getAvailableDateRangeInfos()[r.getElement(t).getElement("select").value];e.addEvent("onConfirm",this.changeAnalyticsPeriod.bind(this,n)),e.show()},onIconChosen:function(){var t;t=this.elements.noTabIconRadio.isChecked()?null:this.elements.tabIconRadio.isChecked()?this.elements.iconInput.getValue():{color:this.elements.colorWrapper.getElement(".selected").getAttribute("data-color"),icon:this.elements.iconsWrapper.getElement(".selected").getAttribute("data-icon")},this.updateIconPickerButton(t,!0),this.hideIconPicker()},onIconPickerIconClick:function(t){var e=r.getElement(t).getClosest(".tab-icon-container");e&&(this.elements.tabIconRadio.check(!1),this.elements.noTabIconRadio.check(!1),this.setIconSelected(e.getAttribute("data-icon")))},setIconSelected:function(t){f.getSplatIcons().includes(t)&&this.elements.iconsWrapper.getElements(".tab-icon-container").forEach(function(e){e.toggleClassName("selected",e.getAttribute("data-icon")===t)})},setColorSelected:function(t){f.availableColors.includes(t)&&this.elements.colorWrapper.getElements(".tab-icon-container").forEach(function(e){e.toggleClassName("selected",e.getAttribute("data-color")===t)})},onShowIconPicker:function(e){var i,s,o=this.elements,a=this,l=o.iconPicker,u=this.getTabObj();if(l&&"none"!==l.style.display)this.hideIconPicker();else{l?l.empty():o.iconPicker=l=P("div",{id:"panelIcons",class:this.name});var h=u.iconConfig;o.colorWrapper=P("div",{class:"autoclear colorsblock"}).addContent(this.buildIconColorsBlock()).inject(l),o.iconsWrapper=P("div",{class:"autoclear icons-list"}).addContent(this.buildIcons(h)).addEvent("click",this.onIconPickerIconClick.bind(this)).inject(l),o.alternateIconContainer=P("ul",{class:"alternative-icon-container"}).inject(l),o.actionWrapper=P("div",{class:"action-container",html:new n.Button({value:_("Done"),events:{onClick:this.onIconChosen.bind(this)}}).getContent()}).inject(l),o.iconInput=new n.Text({attributes:{id:"urlTabIcon-input",class:"url",events:{blur:function(){p()},focus:function(){o.tabIconRadio.check(!0)}}}}),o.noTabIconRadio=new n.Radio({className:"green",attributes:{id:"noTabIcon",name:"alternativeTabIcon",events:{click:function(t){r.stop(t),a.updateIconPickerButton("",!0)}}}}),o.tabIconRadio=new n.Radio({className:"green",attributes:{id:"urlTabIcon",name:"alternativeTabIcon",events:{click:function(t){r.stopPropagation(t),p()}}}}),o.alternateIconContainer.addContent(P("li").addContent(o.noTabIconRadio,P("label",{text:_("No icon"),for:"noTabIcon"})),P("li").addContent(o.tabIconRadio,P("label",{text:_("URL"),for:"urlTabIcon"}),o.iconInput));var d=t.extendElement(a.getElement("#btn-tab-icon"));e&&(r.stop(e),i=d.getOffsets(),s=d.getSize(),i.x=c.isRTLLanguage()?i.x-300+s.width:i.x,l.setStyles({top:i.y+s.height,left:i.x})),this.openOverlay({onOpen:function(){d.addClassName("open"),l.style.display=""},onClose:function(){d.removeClassName("open"),l.style.display="none"}}),document.body.addContent(l),u.icon||u.iconConfig?u.icon&&!u.iconConfig&&(o.tabIconRadio.check(!0),o.iconInput.setValue(u.icon)):o.noTabIconRadio.check(!0)}function p(){var t=o.iconInput.getValue().trim();(""!==t||t.test(/^(http|https):\/\//i))&&(o.tabIconRadio.check(!0),a.updateIconPickerButton(t,!0))}},onIconColorChange:function(t){var e=r.getElement(t).getAttribute("data-color"),n=this.elements.iconsWrapper.getElement(".selected");this.setColorSelected(e),this.elements.iconsWrapper.setContent(this.buildIcons({icon:n&&n.getAttribute("data-icon"),color:e}))},initRangePicker:function(){var t=this,e=this.getTabObj();if(!t.rangePicker){var n=e.lastAnalyticsFrom||N.getRetentionPeriod(),i=e.lastAnalyticsTo||"now";t.rangePicker=new I({dropdownContainer:document.body,className:"dark",dateRangeOptions:{calendarOptions:{className:"dark"}},events:{onOpen:function(){var e=this;t.openOverlay({onClose:function(){e.close()}})},onClose:function(){t.closeOverlay()}}}).setRange({from:n,to:i})}return t.rangePicker},open:function(){!this.isOpen&&this.elements.container.isInjected()&&L.closeActive(null,function(){this._parent(),this.update(),g.log("tab","options"),c.Page.inSmartReaderView||App.Columns.updateLayout()}.bind(this))},close:function(t,e){this.isOpen&&(this._parent(t,e),this.closeOverlay(),this.rangePicker&&this.rangePicker.toggle(!1),c.Page.inSmartReaderView||App.Columns.updateLayout())},openOverlay:function(t){this.closeOverlay(),this.overlay=new i({className:"tab-options-overlay",fxOptions:{duration:0}}).addContent(P("div",{class:"overlay-inner"})).inject(document.body),t&&this.overlay.addEvents(t),this.overlay.open()},closeOverlay:function(){this.overlay&&(this.overlay.close(),this.overlay=null)},setTypeLockedOrPrivateChecked:function(t){var e,n;n=(e=r.getElement(t)).checked&&e.value;var i=this.getTabObj();if(i.type=n,v.saveUserTabType({tabId:i.id,type:n||"none"}).done(),c.Page.inSmartReaderView){App.SmartReader.Feed.updateHeaderTitleExtra();var s=App.SmartReader.getSectionRow();s.removeClassName("nv-treeview-section-locked"),s.removeClassName("nv-treeview-section-private"),n&&s.addClassName("uwa-icon nv-treeview-section-"+n)}else this.getTabInstanceInWidgetView().refreshType();this.updateType()},changeAnalyticsPeriod:function(t){var e=this.getTabObj().id,n=this.rangePicker.getRange();d.getByTab(e).filter(function(e){return M(t.filter,e)}).forEach(function(t){var e=t.getData();e.date_from=n.from,e.date_to=n.to,t.save(),t.sendContent("onRefresh")}),h.getFocused().setAnalyticsRange(n.from,n.to).done()},update:function(){var t=this.getTabObj();t&&(this.getElement("#field-tabName").value=t.title.unescapeHTML(),h.isReadOnly(t)?(this.getElement("#field-tabName").hide(),this.getElement("#btn-tab-icon").hide()):(this.getElement("#field-tabName").show(),this.getElement("#btn-tab-icon").show(),this.updateIconPickerButton(t.iconConfig||t.icon))),this.updateType(),this.hasPrivateTabOption()&&this.getElement("#tabGlobalOption").getElement(".suboption .private")[h.getAll().length>1?"show":"hide"]()},updateType:function(){var t=this.controls,e=this.getTabObj().type;function n(n){var i=t[n+"Checkbox"];i&&i.check(n===e)}n("private"),n("locked")},hideIconPicker:function(){this.closeOverlay()},updateIconPickerButton:function(t,e){var n=this.getElement("#previewIconTab");t||(t=!1),f.setIconSrc(n,t),n.toggleClassName("no-icon",!1===t),e&&(this.getTabInstanceInWidgetView().setIcon(t||""),this.hideIconPicker())},displayMessage:function(e,n){if(!this.messageBox){this.messageBox=t.createElement("div",{id:"processing-template"});var i=t.createElement("div",{class:"dbwz-item",html:this.messageBox});A.open(i,{contentTitle:_("Tab build in progress"),size:{x:800,y:190},classWindow:"dashboard-wizard tab-only",closeWithOverlay:!1,overlayOpacity:.5,closeButton:!1})}e&&this.messageBox.setContent({tag:"h4",class:"dbwz-item-title",text:e},n)},populate:function(){var t=this,e=this.controls.topic.getValue().trim(),n=this.controls.language.getValue()[0];if(0!==e.length){var i=v.myTabsCreateFromTemplate({topic:e,locale:n,tabId:this.options.tabId,template:"tab-wizard"});i.fin(function(){t.close()}),i.done(function(t){setTimeout(function(){document.location.hash=t.title.replace(/ /g,"_"),document.location.reload()},1e3)},function(t){b.displayError(t)})}else this.close()}}),j={};return j.RemoveTab=i.extend({name:"removeTab",defaultOptions:{exclusive:!0,closeable:!1,resizeParent:!0,fxOptions:{duration:200}},modules:null,onClose:function(){m.popFocus("tab-overlay")},onRemoved:function(){this._parent(),m.popFocus("tab-overlay")},init:function(){this._parent(),m.addShortcuts({"tab-overlay":{esc:function(){this.toggle(!1)}.bind(this),return:this.onRemove}}),this.getDependents().then(function(t){t&&t.modules&&(this.modules=t.modules),this.build()}.bind(this)).done()},buildNotice:function(e){return t.createElement("div",{class:"notice",html:[t.createElement("div",{class:"dependent-widget",text:e.title.unescapeHTML(),events:{click:function(){this.close(),p.focus({tab:e.tab,id:e.id})}.bind(this)}}),t.createElement("div",{text:_("is used by")}),e.dependents.map(function(e){return t.createElement("div",{class:"dependent-widget",text:e.title.unescapeHTML(),events:{click:function(){this.close(),p.focus(e)}.bind(this)}})}.bind(this))]})},build:function(){var e=this.elements.container.getElement(".tab-overlay-content");if(this.modules){var i=Object.keys(this.modules).map(function(t){return this.buildNotice(this.modules[t])}.bind(this)),s=t.createElement("div",{class:"notice-container",html:[t.createElement("div",{text:_("{0} app(s) located on this tab are currently used by other apps:").format(i.length)}),this.elements.dependentsContainer=new o({shadows:!0})]});this.elements.dependentsContainer.getInnerElement().addClassName(this.getClassNames("-inner")).setContent(i),e.addContent(s)}var a="";this.modules&&(a=_("Deleting this {0} will prevent those other apps from working properly.").format(this.toRemove)),e.addContent(t.createElement("div",{class:"confirm",html:[t.createElement("div",{text:a}),_("Delete {0}?").format(this.toRemove),new n.Button({value:_("Yes"),className:"medium-grey medium",events:{onClick:this.onRemove}})]}))},buildSkeleton:function(){this._parent(),this.elements.container.addClassName("tab-overlay tab-overlay-"+this.name).setContent(['<div class="tab-overlay-inner">','<div class="tab-overlay-content"></div>','<div class="tab-overlay-close nv-close-icon uwa-icon delete"></div>',"</div>"].join("\n")),this.elements.container.addClassName("uwa-font-aa"),this.elements.container.getElement(".tab-overlay-close").addEvent("click",this.close.bind(this))}}),j.AppsRemoveTab=j.RemoveTab.extend({toRemove:_("tab"),getDependents:function(){var t=x.selectedTab.getModules().map(function(t){return t.getId()});return t.length?v.getModulesDependents({moduleIds:t}):a.resolve()},onRemove:function(){x.confirmRemoveTab()&&x.deleteTab()}}),j.ReaderRemoveTab=j.RemoveTab.extend({toRemove:_("tab"),getDependents:function(){var t=App.SmartReader.getSection().widgets.map(function(t){return t.getId()});return t.length?v.getModulesDependents({moduleIds:t}):a.resolve()},onRemove:function(){App.SmartReader.deleteCurrentSection()}}),j.ReaderRemoveFromGroup=j.RemoveTab.extend({toRemove:_("section"),getDependents:function(){var t=App.SmartReader.getGroup(),e=App.SmartReader.getWidgetsFromGroup(t.name).map(function(t){return t.getId()});return e.length?v.getModulesDependents({moduleIds:e}):a.resolve()},onRemove:function(){var t=App.SmartReader.getGroup();App.SmartReader.removeWidgetsFromGroup(t.name)}}),j.ReaderRemoveFeed=j.RemoveTab.extend({toRemove:_("feed"),getDependents:function(){var t=App.SmartReader.getWidget();return v.getModulesDependents({moduleIds:[t.getId()]})},onRemove:function(){App.SmartReader.getWidget().remove()}}),j.ReaderRemoveWidget=j.ReaderRemoveFeed.extend({toRemove:_("widget")}),O(L),L.getActive=function(t,e){return e=e||"#tabOptions",t=t||document.body.getElement(e),L.fromElement(t)},L.closeActive=function(t,e){var n=L.getActive(t);if(n)return n.close(e),!0;e&&e()},L.Feed=L.extend({name:"feed",controls:{nameInput:null,shareButton:null,deleteButton:null},getElementsToBuild:function(){return[u.createCloseIcon("FeedOptions").addEvent("click",this.close.bind(this)),this.buildGeneralOptions(),App.SmartReader.getCurrentType().includes("section-")&&this.buildSubtabOptions()]},buildGeneralOptions:function(){var t=[],e=this.buildOptionsGroupContainer(_("Feed options"),"feedGlobalOption");e.getElement(".content").addContent(this.buildNameChanger(),this.buildSuboptionControls("controls"),this.isFilter()?"":this.buildUrlEntry()),t.push(e);var n=App.SmartReader.getProducer();if(n&&n.isStream()){var i=this.buildOptionsGroupContainer(_("Insights"),"insightsOptionPanel"),s=i.getElement(".content"),o=i.getElement(".title");o.innerHTML='<span data-icon="T" class="uwa-icon insights-title-icon"></span> '+o.innerHTML,s.addContent(new E({view:"reader",stream:n})),t.push(i)}return t},buildUrlEntry:function(){var e=App.SmartReader.getProducer();if("filter-exported"!==e.getType())return P("p",{class:"suboption infos"}).addContent(t.createElement("span",{html:_("URL")}),t.createElement("input",{attributes:{value:e.getQuery(),class:"url-or-query",readonly:"readonly"}}))},buildNameChanger:function(){var e=App.SmartReader.getWidget();return this.controls.nameInput=new y({attributes:{id:"field-feedName"},className:"text",placeholder:_("Choose a title for this feed"),events:{onSaveReady:function(t){e.setTitle(t),e.getData().title=t,e.save(),App.SmartReader.renameCurrentFeedModule(t),this.saved()}}}),this.controls.nameInput.setValue(e.getTitle()||_("untitled")),P("p",{class:"suboption"}).addContent(t.createElement("span",{html:_("Title")}),this.controls.nameInput)},buildSuboptionControls:function(t){t=t||"";var e=this;return e.controls.deleteButton=new n.Button({attributes:{id:"btn-{0}-delete".format(this.name)},className:"iconl delete dark-grey",value:_("Delete"),events:{onClick:function(){e.showOverlay("ReaderRemoveFeed")}}}),c.isAllowed("share")&&(e.controls.shareButton=new n.Button({attributes:{id:"btn-{0}-share".format(this.name)},className:"iconl curvy-next dark-grey",value:_("Share"),events:{onClick:App.SmartReader.shareCurrentFeedModule.bind(App.SmartReader)}})),this.isFilter()?e.controls.editButton=new n.Button({attributes:{id:"btn-{0}-edit".format(this.name)},className:"iconl edit dark-grey",value:_("Edit"),events:{onClick:function(){var t=App.SmartReader.getWidget();t.launchWizard("SocialPack",{query:t.getSearches()[0].getQuery()}).done(function(){e.close(),App.SmartReader.setWidgetQuery(t,JSON.parse(t.getData().searchQuery))})}}}):e.controls.editButton=null,P("p",{class:"suboption {0}".format(t)}).addContent(e.controls.editButton,e.controls.shareButton,e.controls.deleteButton)},isFilter:function(){return App.SmartReader.getProducer().isSearch()}}),L.MultipleFeed=L.extend({name:"multiplefeed",controls:{shareButton:null,deleteButton:null},getElementsToBuild:function(){return[u.createCloseIcon("FeedOptions").addEvent("click",this.close.bind(this)),this.buildGeneralOptions(),App.SmartReader.getCurrentType().includes("section-")&&this.buildSubtabOptions()]},buildGeneralOptions:function(){var t=this.buildOptionsGroupContainer(_("Multiplefeed options"),"multiplefeedGlobalOption");return t.getElement(".content").addContent(this.buildSuboptionControls("controls")),t},buildSuboptionControls:function(t){t=t||"";var e=this;return e.controls.deleteButton=new n.Button({attributes:{id:"btn-{0}-delete".format(this.name)},className:"iconl delete dark-grey",value:_("Delete"),events:{onClick:function(){e.showOverlay("ReaderRemoveWidget")}}}),c.isAllowed("share")&&(e.controls.shareButton=new n.Button({attributes:{id:"btn-{0}-share".format(this.name)},className:"iconl curvy-next dark-grey",value:_("Share"),events:{onClick:App.SmartReader.shareCurrentFeedModule.bind(App.SmartReader)}})),P("p",{class:"suboption {0}".format(t)}).addContent(e.controls.shareButton?e.controls.shareButton.getContent():null,e.controls.deleteButton.getContent())}}),L.ReaderView=R.extend({name:"reader",init:function(t){this.tabId=this.getTabObj().id,this._parent(t)},getElementsToBuild:function(){return[u.createCloseIcon("tabOptions").addEvent("click",this.close.bind(this)),this.buildGeneralOptions(),this.buildAnalyticsOptions(),App.SmartReader.getCurrentType().includes("section-")&&this.buildSubtabOptions(),this.buildLabelOptions(),this.buildWizard()]},buildGeneralOptions:function(){var t=this.buildOptionsGroupContainer(_("Tab options"),"tabGlobalOption");return t.getElement(".content").addContent(P("p",{class:"suboption"}).addContent(this.buildIconPicker(),this.buildNameChanger()),this.buildSuboptionControls("controls"),this.buildSubOptionTypeOptions()),t},updateIconPickerButton:function(e,n){var i=this,s=i.getElement("#previewIconTab"),o=this.getTabObj();if(e||(e=!1),f.setIconSrc(s,e),s.toggleClassName("no-icon",!e),n){var a=t.is(e,"object");v.tabUpdate({tabId:o.id,icon:a||!1===e?"":e,options:{iconConfig:a?e:""}}).done(function(){var t=App.SmartReader.getSection(o.id);t&&(t.icon=t.iconConfig="",t["icon{0}".format(a?"Config":"")]=e,App.SmartReader.Feed.updateHeader(),App.SmartReader.Feed.updateSectionIcon(t.id),i.hideIconPicker())})}},buildNameChanger:function(){var t=this.getTabObj();return new y({attributes:{id:"field-tabName"},className:"text",placeholder:_("Choose an icon and title"),events:{onSaveReady:function(e){v.tabUpdate({tabId:t.id,title:e}).done(function(){var n=App.SmartReader.getSection(t.id);n&&(n.title=e),App.SmartReader.Feed.updateHeader(),App.SmartReader.getSectionRow(t.id).getElement(".nv-treeview-label").set("text",e),this.saved()}.bind(this))}}}).getContent()},onActionDeleteTab:function(){this.showOverlay("ReaderRemoveTab")}}),L.WidgetView=R.extend({name:"widget-view",getElementsToBuild:function(){return[u.createCloseIcon("tabOptions").addEvent("click",this.close.bind(this)),this.buildGeneralOptions(),this.buildLayoutOptions(),this.buildAnalyticsOptions(),this.buildLabelOptions(),this.buildWizard()]},buildGeneralOptions:function(){var t=this.buildOptionsGroupContainer(_("Tab options"),"tabGlobalOption"),e=t.getElement(".content");return e.addContent(P("p",{class:"suboption"}).addContent(this.buildIconPicker(),this.buildNameChanger()),this.buildSubOptionTypeOptions(),this.buildSuboptionControls()),(this.hasLockedTabOption()||this.hasPrivateTabOption())&&this.hasLibraryAddButton()&&e.addClassName("with-lib"),t},buildLayoutOptions:function(){var t=this.buildOptionsGroupContainer(_("Tab layout"),"tabLayout"),e=t.getElement(".content");return e.addContent(P("p").addContent(P("span",{id:"tabLayout-columns",class:"nv-button-group",html:'<button type="button" class="nv-flat-button">1</button><button type="button" class="nv-flat-button">2</button><button type="button" class="nv-flat-button">3</button><button type="button" class="nv-flat-button">4</button>'})).addContent(P("strong",{text:"Boxes"}),P("ul",{class:"option",id:"tabLayout-gallery"}))),(this.hasLockedTabOption()||this.hasPrivateTabOption())&&this.hasLibraryAddButton()&&e.addClassName("with-lib"),t},update:function(){this._parent(),h.isReadOnly(this.getTabObj())?this.getElement("#tabLayout").hide():this.updateLayoutOption()},updateLayoutOption:function(t){this.getElement("#tabLayout").show();var e,n,i,s,o=this.getTabInstanceInWidgetView(),a=this.getElements("#tabLayout-columns button"),l=this.getElement("#tabLayout-gallery"),c=t||o.dataObj.cols,u=D.modelsBynumCols[c],h=function(t){var e,n=r.getElement(t);n.hasClassName("active")||(e=n.getText(),o.updateColNums(e)&&this.updateLayoutOption(e))}.bind(this);for(e=0;e<a.length;e+=1)(n=a[e]).className=e+1===+c?"nv-flat-button active":"nv-flat-button",n.onclick=h;for(l.empty(),e=0;e<u.length;e+=1)s=D.getClassName(e,c),P("li").addContent(P("a",{href:"#_",id:s,class:s===D.classPrefix+"-"+o.dataObj.layout?"selected":""})).inject(l);i=l.getElements("a").invoke("addEvent","click",function(t){var e=t.target;r.stop(t),i.invoke("removeClassName","selected"),e.addClassName("selected"),D.update(e.id.substring(e.id.indexOf("-")+1))})}}),App.UI||(App.UI={}),App.UI.Options=L,L}.apply(e,i))||(t.exports=s)},function(t,e,n){"use strict";var i,s;i=[n(1),n(3),n(9),n(13),n(35),n(233),n(221),n(2),n(222)],void 0===(s=function(t,e,n,i,s,o,a,r,l){var c=l.extend({_name:"SocialNetworks",build:function(){var e,n,s,a,l,c=_("More web services to send to?"),u=_("Manage your list {0}on your account page{1}.").format('<a href="/account/share "target="_blank">',"</a>"),h=_("{0}Create a Netvibes account{1}.").format('<a href="/signup" target="_blank">',"</a>");if(!(r.User.share.customServices&&r.User.share.customServices.length<=0&&(r.User.share.services.length<=0||1===r.User.share.services.length&&"mail"===r.User.share.services[0]))){for(n in e=t.createElement("div",{class:"social-tab tab",html:[{tag:"ul",class:"links"}]}).inject(this._container),r.User.share.isCustom||o.get("manageServicesBoxClosed")||!r.isAllowed("share_edit")||t.createElement("div",{tag:"div",class:"manage",html:[{tag:"a",href:"#",class:"close",text:"p",events:{click:this.onCloseManageClick.bind(this)}},{tag:"div",class:"text",html:[{tag:"div",class:"subtitle",text:c},r.User.isRegistered?{tag:"p",html:u}:{tag:"p",html:h}]}]}).inject(e.getElement(".links")),r.User.share.customServices)if(r.User.share.customServices.hasOwnProperty(n)){s=r.User.share.customServices[n];var d="custom - "+(i.parseUrl(String(s.url)).domain||"n/a").toLowerCase();a=s.favicon?'<img src="'+s.favicon+'" alt="'+s.title+'" />':"",(l=t.createElement("li",{html:[{tag:"a",href:"#",class:"h-custom",title:s.title,events:{click:this.onSocialShareClick.bind(this,s)}}]}).inject(e.getElement(".links"))).setData("service",d),l.getElement("a").setHTML(a)}App.Config.available_share_services.forEach(function(n){if(r.User.share.services.indexOf(n.name)>-1&&"mail"!==n.name){if("flipboard"===n.name&&"article"!==this._item.type)return;t.createElement("li",{html:[{tag:"a",href:"#",class:"nv-social-icon light "+n.name,title:n.title,text:n.fonticon,events:{click:this.onSocialShareClick.bind(this,n)}}]}).setData("service",n.name).inject(e.getElement(".links"))}}.bind(this))}},onCloseManageClick:function(t){e.stop(t),this._container.getElement(".manage").destroy(),o.set("manageServicesBoxClosed",!0).save()},onSocialShareClick:function(t,n){var i=e.findElement(n,"li").getData("service");e.stop(n),s.log("share","shareToSocial",{serviceName:i}),this.createShareURL(i).done(function(e){var n=c.formatSocialLink({link:t.url.toString(),url:e,title:this._item.title});window.open(n,"_blank")}.bind(this))}});return c.formatSocialLink=function(t){var e,n=t.link;return n=(n=n.replace(new RegExp("\\${url}","gi"),encodeURIComponent(t.url))).replace(new RegExp("\\${title}","gi"),encodeURIComponent(t.title)),/twitter/.test(t.link)&&r.Config.social_accounts&&r.Config.social_accounts.twitter&&r.Config.urls.startpage===r.Config.urls.base&&(n+="&related="+(e=encodeURIComponent(r.Config.social_accounts.twitter))+"&via="+e),n},c}.apply(e,i))||(t.exports=s)},function(t,e,n){"use strict";var i,s;i=[n(1),n(8),n(273),n(6),n(17),n(21),n(4),n(111),n(41),n(297)],void 0===(s=function(t,e,n,i,s,o,a,r,l,c){return n.extend({options:{title:_("Add to library preview"),ckeckboxText:_("Remove original app"),originalLib:null,selectedLibId:null},bindButton:function(){this.buildCheckboxRemove(),this.navigation=t.createElement("div",{class:"lib-preview-nav",html:[this.button=new e.Button({attributes:{type:"submit"},className:"green medium add-button",value:_("Add to library")})]}),this.navigation.inject(this.infosPanel),this.button.addEvent("onClick",this.addToLibrary.bind(this))},buildCheckboxRemove:function(){t.createElement("label",{class:"label-remove-app",html:[this.checkboxRemove=new e.Checkbox({className:"green"}),t.createElement("span",{text:this.options.ckeckboxText})]}).inject(this.infosPanel)},buildOptionSelection:function(){var n=[];t.createElement("h3",{text:_("Select Library")}).inject(this.infosPanel),this.select=new e.Select({options:n,className:"choose-tab-dropdown choose-lib"+(this.options.selectedLib?"":" has-create-new"),events:{onChange:function(){"new"===this.getSelectValue()&&this.createNewLib()}.bind(this)}}),this.select.inject(this.infosPanel),i.getLibraries().done(function(t){if(t.libraries.length){if(this.options.selectedLibId){var e=t.libraries.filter(function(t){return t.id===this.options.selectedLibId}.bind(this))[0];n.push({label:e.title,value:e.id})}else n.push({label:_("Choose..."),value:"choose"}),n.push({label:_("Create new..."),value:"new"}),t.libraries.forEach(function(t){(!this.options.originalLib||this.options.originalLib&&this.options.originalLib.getLibraryId()!==t.id)&&n.push({label:t.title,value:t.id})}.bind(this));this.select.putOptions(n)}else this.createNewLib()}.bind(this),function(){this.buildError(_("Error loading libraries list"))}.bind(this))},createNewLib:function(){var n=[];this.infosPanel.setContent(t.createElement("h3",{text:_("New library name")}),this.nameNewLib=new e.Text({className:"new-lib-name"}),t.createElement("h3",{text:_("Add to my tab")}),this.selectTabNewLib=new e.Select({options:n,className:"choose-tab-dropdown"})),o.getAll().forEach(function(e){n.push({label:e.dataObj.title,value:e.dataObj.id,selected:!!t.is(e.isSelected)&&e.isSelected()})}),this.selectTabNewLib.putOptions(n),this.bindButton()},getStreamsToAdd:function(){var t=this.previewModule.getStreamCustomTitles();return this.previewModule.getStreamIds().map(function(e,n){return{id:e,title:t[n].title}})},addStreamToLibrary:function(t){t=t||this.getSelectValue(),this.getLibProcessor().addToLibrary(t).done(function(){this.refreshLib(t)}.bind(this),function(t){this.displayErrorMessage(t)}.bind(this))},addToLibrary:function(){var t=this.getStreamsToAdd();"choose"!==this.getSelectValue()?t.length?(this.setButtonState("waiting"),this.getSelectValue()&&"new"!==this.getSelectValue()?this.addStreamToLibrary():this.getLibProcessor().createLibrary({title:this.nameNewLib.getValue().stripTags(),tabId:this.selectTabNewLib.getValue()[0]}).then(function(t){this.addStreamToLibrary(t)}.bind(this)).fail(function(t){this.displayErrorMessage(t.message||t||_("Error adding library"))}.bind(this))):this.displayErrorMessage(_("You don't have any sources to add.")):this.displayErrorMessage(_("You have to select a library."))},refreshLib:function(t){t=t||this.getSelectValue(),this.checkboxRemove&&this.checkboxRemove.isChecked()&&this.removeOriginalApp(),this.previewModule&&(this.previewModule.remove(!1),this.previewModule=null),s.getById(t).sendContent("onRefresh"),this.closePreview()},closePreview:function(){this.setButtonState("success"),this.dispatchEvent("onRefreshContent"),r.close()},removeOriginalApp:function(){s.getById(this.previewModule.getId()).remove()},setButtonState:function(e){this.button.setDisabled(!0),this.navigation.removeClassName("waiting"),this.navigation.removeClassName("success"),"waiting"===e?(this.navigation.addClassName("waiting"),this.navigationSpinner||(this.navigationSpinner=new l({autostart:!0,size:30,color:"#ffffff"}),this.navigation.addContent(this.navigationSpinner))):"success"===e?(this.navigation.addClassName("success"),this.success||(this.success=t.createElement("div",{class:"lib-preview-nav-success uwa-icon checked"}),this.navigation.addContent(this.success))):e||this.button.setDisabled(!1)},buildError:function(t){this.infosPanel.empty(),new e.Button({attributes:{type:"submit"},className:"green medium add-button",value:_("Cancel"),events:{onClick:function(){r.close()}}}).inject(this.infosPanel),this.displayErrorMessage(t)},displayErrorMessage:function(e,n,i){this.setButtonState(i),this.errorMessage&&this.errorMessage.destroy(),this.errorMessage=t.createElement("div",{class:"uwa-message error",text:e}),n?n.setContent(this.errorMessage):this.errorMessage.inject(this.infosPanel,"top")},getLibProcessor:function(){return this._libProcessor||(this._libProcessor=new c(Object.assign({streams:this.getStreamsToAdd()},a.pick(this.options,"allLib","originalLib","filters")))),this._libProcessor}})}.apply(e,i))||(t.exports=s)},function(t,e,n){"use strict";var i,s;i=[n(1),n(2),n(219),n(97),n(746),n(747)],void 0===(s=function(t,e,n,i,s,o){return{isExternal:!1,isSidebarOpen:function(){return i.isOpen()},initializeEdition:function(){if(!this._editInitialized&&e.isAllowed("tag")){this._editInitialized=!0,document.body.addClassName("tagging-editor-mode");var t=new s;this._createModules(t),i.setView(t),t.switchTab(),n.getFooter().setStyle("display","none")}},_createModules:function(t){["NewTag","CurrentTags","SuggestedTags","RecentTags"].forEach(function(e){(new o[e]).container.inject(t.body)})}}}.apply(e,i))||(t.exports=s)},function(t,e,n){"use strict";var i,s;i=[n(1),n(9),n(22),n(88),n(3),n(2),n(4),n(116),n(26),n(97)],void 0===(s=function(t,e,n,i,s,o,a,r,l,c){return e.extend(n,{options:{forceOpening:!1,keyboardNavigation:!1,tagObj:null,tagName:null,dropdown:{target:null,autoPosition:["below-center","above-center"],margin:0,className:"sentiment-dropdown"}},init:function(t){this.setOptions(t);var e=this.options.dropdown,n=e.target;c.getSentiments().done(function(t){this._sentiments=t.sentiments,t.sentiments.length>1?(this.dropdown=new i.Pointy(e).inject(this.options.inject||n),this.dropdown.getInnerElement().setContent("<p>"+_("Loading...")+"</p>"),this.dropdown.getContent().setAttribute("tabindex","0"),this.options.keyboardNavigation&&this.dropdown.getContent().addEvent("keydown",this.onKeyDown.bind(this)),this.options.forceOpening||(n.addEvent("click",r(this.open,this)),n.addEvent("mouseleave",r(this.close,this))),this.dropdown.addEvent("onClickOutside",function(){this.isOpening||this.close()}.bind(this)),this.populate(t.sentiments)):n.addEvent("click",function(){n.hasClassName("inactive")||this.selectSentiment(this)}.bind(this))}.bind(this))},isOpen:function(){return this.dropdown&&this.dropdown.isOpen()},populate:function(e){if(this.dropdown){var n=this.dropdown.getInnerElement(),i=t.createElement("ul"),s=t.createElement("div");n.empty(),t.is(e,"array")&&(e.forEach(function(e){t.createElement("li").addContent(t.createElement("a",{href:"#_"}).addContent(t.createElement("span",{class:"tagging-color",styles:{"background-color":"#"+e.color}}),t.createElement("span",{class:"tagging-name",text:"none"===e.name?_("none"):e.name}))).setData("sentiment",e).addEvent("click",this.onSentimentClick.bind(this)).inject(i)},this),s.addContent(t.createElement("p",{class:"alreadyInUse",styles:{"text-align":"center",padding:"5px 0px",color:"black"},text:_("All entries are in use")})),n.setContent(i,s))}},onSentimentClick:function(t){s.stop(t);var e=s.findElement(t,"li").getData("sentiment");this.selectSentiment(e),this.close()},selectSentiment:function(t){t&&"undefined"!==t||(t=this._sentiments.length>0?this._sentiments[0]:{id:0,name:"none",color:"989898"});var e,n=this.options.tagObj,i=n&&n.name||this.options.tagName;if(n&&n.id&&n.user.id===o.User.id){var s=Object.assign({},n);s.sentiment=t,c.editTag(s),e=!0}else i&&(c.addTag({name:i,sentiment:t}),e=!0);e&&(this.options.tagName=null)},onKeyDown:function(t){var e=this.dropdown.getContent().getElement(".current"),n=!!this.dropdown.getContent().getElement(".current"),i=s.whichKey(t);if("return"===i){if(n){var o=e.getData("sentiment");this.selectSentiment(o),this.close()}s.stop(t)}else"up"===i?(this.goNext(!0),s.stop(t)):"down"===i&&(this.goNext(!1),s.stop(t))},goNext:function(t){var e=this.dropdown.getContent(),n=e.getElement(".current"),i=e.getElements("li"),s=a.getNext(i,n,{loop:!0,reverse:t});n&&n.removeClassName("current"),s&&s.addClassName("current")},open:function(){if(this.dropdown&&!this.options.dropdown.target.hasClassName("inactive")){var t,e=this.dropdown.getContent();if(!this.dropdown.isOpen()){e.focus();var n=this.options.tagObj&&this.options.tagObj.name||this.options.tagName,i=c.getItem().getUserTags(),s=[];i.forEach(function(t){var e=t.name===n,i=s.indexOf(t.sentiment.id)>=0;e&&!i&&s.push(t.sentiment.id)});var o=!0;e.getElements("li").forEach(function(t){var e=t.getData("sentiment").id;s.indexOf(e)>=0?t.setStyle("display","none"):(t.setStyle("display","block"),o=!1)});var a=e.getElement(".alreadyInUse");o?a.setStyle("display","block"):a.setStyle("display","none"),this.dropdown.show(),t=e.hasClassName("above")?"10px":"-10px",e.setStyles({display:"block",opacity:"0","margin-top":t}),this.isOpening=!0,new l(e,{duration:150,transition:"linear",events:{onComplete:function(){this.isOpening=!1}.bind(this)}}).start({opacity:1,"margin-top":0})}}},close:function(){if(this.dropdown){var t=this.dropdown.getContent();this.dropdown.isOpen()&&new l(t,{duration:100,transition:"linear",events:{onComplete:function(){t.setStyle("display","none"),this.dropdown.hide()}.bind(this)}}).start({opacity:0})}},destroy:function(){this.dropdown&&this.dropdown.destroy()}})}.apply(e,i))||(t.exports=s)},,function(t,e,n){"use strict";var i,s;i=[n(1),n(9),n(22),n(8),n(3),n(39),n(16),n(25),n(18),n(355),n(4),n(2),n(6)],void 0===(s=function(t,e,n,i,s,o,a,r,l,c,u,h,d){function p(t,e,n){t[e].length||n.push({elt:e,label:_("This field is mandatory")})}return e.extend(o,n,{init:function(t){this.elements={},this.setOptions(t)},build:function(e){e=e||{};var n=!t.is(e.buildBtns)||Boolean(e.buildBtns);return this.container=t.createElement("div",{class:"emailus-form"}),this.buildIntroduction().inject(this.container),this.buildForm().inject(this.container),n&&this.buildButtons().inject(this.container),this.container},buildIntroduction:function(){var e=t.createElement("div",{class:"emailus-introduction"});return t.createElement("h3",{html:_("We welcome your comments and suggestions.")}).inject(e),this.mustShowNotice()&&t.createElement("p",{class:"emailus-notice",html:_("Please note: we do not provide personalized email support for basic dashboard.")}).inject(e),t.createElement("p",{class:"emailus-visit",html:l.format(_("You may also visit our {0}Knowledge Base for tips, tutorials and FAQs.{1}"),'<a href="'+h.Config.urls.faq+'" target="_blank">',"</a>")}).inject(e),h.User.isRegistered||t.createElement("p",{class:"emailus-signin",html:l.format(_("Already have an account? {0}Sign in{1}"),'<a href="/signin">',"</a>")}).inject(e),e},buildForm:function(){var e=[];return this.mustShowIdentityFields()&&(e.push(this.buildInputName()),e.push(this.buildInputEmail())),e.push(this.buildInputTopic()),e.push(this.buildInputQuestion()),this.mustShowCaptcha()&&e.push(this.buildInputCaptcha()),this.mustShowInterests()&&e.push(this.buildInterests()),this.elements.form=t.createElement("form",{html:e}),this.elements.form},buildFormRow:function(){return t.createElement("div",{class:"emailus-form-row"})},buildInputName:function(){var t=this.buildFormRow();return t.addClassName("emailus-form-row-name"),this.elements.name=new i.Text({className:"emailus-name",attributes:{placeholder:_("Your name"),name:"name"}}).inject(t),t},buildInputEmail:function(){var t=this.buildFormRow();return t.addClassName("emailus-form-row-email"),this.elements.email=new i.Text({className:"emailus-email",attributes:{placeholder:_("Your email adress"),name:"email"}}).inject(t),t},buildInputTopic:function(){var t=this.buildFormRow();return this.elements.topic=new i.Select({className:"emailus-topic",attributes:{name:"topic"},options:[{label:_("Choose a topic"),value:""},{label:_("Products and Services"),value:_("Products and Services")},{label:_("Business Opportunity"),value:_("Business Opportunity")},{label:_("Security"),value:_("Security")}]}).inject(t),t},buildInputQuestion:function(){var t=this.buildFormRow();return this.elements.question=new i.Text({className:"emailus-question",multiline:!0,attributes:{placeholder:_("Your question"),name:"question"}}).inject(t),t},buildInputCaptcha:function(){var e=this.buildFormRow();e.addClassName("recaptcha"),t.createElement("label",{text:_("Are you human?"),class:"emailus-label-captcha"}).inject(e);var n={};return this.getOption("lang")&&(n.lang=this.getOption("lang").slice(0,2)),this.recaptcha=new c(n),this.elements.captcha=t.createElement("div",{html:this.recaptcha}).inject(e),e},buildInterests:function(){var e,n=this.buildFormRow();return n.addClassName("emailus-interests"),t.createElement("p",{text:_("I am also interested in:")}).inject(n),e=this.getInterests().map(function(e){var s=new i.Checkbox({className:this.getOption("lightTheme")?"light":null,attributes:{name:"interests[]",value:e}});return t.createElement("label",{class:"emailus-interest",html:[s,e]}).inject(n),s},this),this.elements.interests=e,n},buildButtons:function(){return t.createElement("div",{class:"emailus-buttons",html:this.getButtons()})},getButtons:function(){var e=t.createElement("a",{class:"emailus-reset-link",text:_("Reset"),href:"#"});return e.addEvent("click",function(t){s.stop(t),this.resetForm().resetCaptcha()}.bind(this)),[e,new i.Button({className:"green btn-submit",value:_("Submit"),events:{onClick:function(){this.dispatchEvent("onSubmit")}.bind(this)}})]},getInterests:function(){return h.User.isPremium&&!h.User.isVip?[_("Collaboration"),_("Users Permissions"),_("Single Sign-on"),_("Push Publishing"),_("Custom branding"),_("Infographics")]:h.User.isVip?[_("Opinion"),_("Drag & Compare"),_("Analytics"),_("MisoData"),_("Alerts")]:[_("Universal Search"),_("Faster Feeds"),_("Tracked Topics"),_("Faceted Exploration"),_("1-Day Priority Support"),_("Early Access")]},resetForm:function(){return this.elements.form.reset(),this.elements.topic.setSelection([0]),this.mustShowInterests()&&this.elements.interests.forEach(function(t){t.check(!1)}),this},mustShowIdentityFields:function(){return!h.User||!h.User.email&&!h.User.username},mustShowNotice:function(){return!(h.User.isPremium||h.User.isVip)},mustShowCaptcha:function(){return c.isEnabled()&&!h.User.isRegistered},mustShowInterests:function(){return Boolean(h.User)},isValid:function(t){var e=[];return this.resetErrorState(),this.mustShowIdentityFields()&&(p(t,"name",e),p(t,"email",e)),p(t,"question",e),this.mustShowCaptcha()&&!this.recaptcha.isAnswered()&&e.push({elt:"captcha",label:_("Please prove that you are not a robot")}),!e.length||(this.displayErrors(e),!1)},resetErrorState:function(){return this.elements.form.getElements(".emailus-error-msg").forEach(function(t){t.getParent(".emailus-form-row").removeClassName("emailus-error"),t.destroy()}),this},displayErrors:function(e){return e.forEach(function(e){var n,s=this.elements[e.elt];(n=s instanceof i?s.getContent().getParent():s.getParent()).addClassName("emailus-error"),t.createElement("div",{class:"emailus-error-msg",text:e.label}).inject(n,"top")},this),this},displayServerErrors:function(t){var e=[];for(var n in t)t.hasOwnProperty(n)&&e.push({elt:n,label:t[n]});this.displayErrors(e)},sendFeedBack:function(t){this.getOption("lang")&&(t.lang=this.getOption("lang")),this.getOption("referer")&&(t.referer=this.getOption("referer")),this.getOption("formChecksum")&&(t.formChecksum=this.getOption("formChecksum")),d.sendFeedback(t).done(function(){this.dispatchEvent("onSubmitSuccess")}.bind(this),function(t){this.dispatchEvent("onSubmitFail",t)}.bind(this))},resetCaptcha:function(){this.recaptcha&&this.recaptcha.reset()},displayMessage:function(e){return this.elements.message||(this.elements.message=t.createElement("div",{class:"emailus-message",html:[t.createElement("span",{class:"uwa-icon","data-icon":","}),t.createElement("p")]}).inject(this.elements.form,"before"),this.elements.message.addEvent("click",function(t){var e=e=s.getElement(t);e.hasClassName("uwa-icon")&&this.elements.message.hide()}.bind(this))),this.elements.message.show().removeClassName("emailus-message-error").removeClassName("emailus-message-success").addClassName("emailus-message-"+(e.type||"success")).getElement("p").setText(e.message),e.hideDelay&&setTimeout(function(){this.elements.message.hide()}.bind(this),e.hideDelay),this},onSubmit:function(){var t=u.getInputsValue(this.elements.form);this.isValid(t)&&this.sendFeedBack(t)},onSubmitSuccess:function(){this.displayMessage({type:"success",message:_("Feedback successfully sent !")}),this.resetForm().resetCaptcha()},onSubmitFail:function(e){t.is(e,"plain")?this.displayServerErrors(e):this.displayMessage({type:"error",message:e||_("An unknown error occured")}),this.resetCaptcha()}})}.apply(e,i))||(t.exports=s)},function(t,e,n){"use strict";var i,s;i=[n(1),n(13),n(16),n(3),n(8),n(95),n(2),n(6),n(27),n(4),n(35),n(84)],void 0===(s=function(t,e,n,i,s,o,a,r,l,c,u,h){var d=function(t,e){u&&u.log(t,e)},p={languages:{en:_("English"),fr:_("French"),es:_("Spanish"),de:_("German"),ja:_("Japanese")},templates:{default:_("Default"),refugee:_("Refugee"),"breaking-news":_("News"),"social-network":_("Social"),"best-productivity":_("Productivity"),finance:_("Finance"),"high-tech":_("High-Tech"),"video-games":_("Video games"),sports:_("Sports"),design:_("Design"),podcast:_("Podcast"),"movies-tv":_("Movies-TV")},elts:{},open:function(){d("dashwizard","open");var t=this._mainModal=new h({title:_("Create a new dashboard"),size:{width:800},closeable:!1,draggable:!0,events:{onOpen:function(){this.bindEvents(),this.elts.textInput.focus()}.bind(this),onClosed:function(){t.destroy()}}});t.getContent().addClassName("dashboard-wizard"),t.inject(document.body),t.setContent(this.build()),t.open()},build:function(){var e=t.createElement;return this.elts.textInput=new s.Text({attributes:{id:"dbwz-topic-input",class:"dbwz-topic-input",autofocus:"submit"}}),this.elts.selectInput=new s.Select({options:this.buildLanguageOptions()}),this.elts.btnSubmit=new s.Button({attributes:{type:"submit"},className:"green medium dbwz-submit",value:_("Dashboard it!")}),this.elts.form=e("form",{class:"dbwz-item",html:[{tag:"label",class:"dbwz-item-title",text:_("Enter the topic you want to track"),attributes:{for:"dbwz-topic-input"}},{tag:"div",class:"dbwz-item-input",html:[this.elts.textInput,{tag:"span",text:_("in")},this.elts.selectInput,this.elts.btnSubmit]}]}),this.elts.icons=e("div",{class:"dbwz-item dbwz-popular",html:[{tag:"h4",class:"dbwz-item-title",text:_("Or pick-up a popular dashboard")},{tag:"ul",class:"dbwz-popular-items",html:[this.buildTemplates()]}]}),this.elts.uploadFrame=t.createElement("iframe",{id:"target_upload",name:"target_upload"}),this.elts.opml=e("form",{class:"dbwz-item dbwz-opml",enctype:"multipart/form-data",encoding:"multipart/form-data",target:"target_upload",method:"post",html:[{tag:"label",class:"dbwz-item-title",attributes:{for:"dbwz-opml-browse"},html:[{tag:"span",text:_("Or Import OPML")},{tag:"span","data-icon":"3",class:"uwa-icon"},this.elts.opmlInput=new s.File({className:"dbwz-opml-browse",attributes:{id:"dbwz-opml-browse",name:"userfile"}}),this.elts.uploadFrame=t.createElement("iframe",{id:"target_upload",name:"target_upload"}),t.createElement("input",{type:"hidden",name:"MAX_FILE_SIZE",value:"500000"})]}]}),this.elts.errorMsg=t.createElement("div",{class:"dbwz-item"}).hide(),e("div",{html:[this.elts.errorMsg,this.elts.uploadFrame,this.elts.form,this.elts.icons,this.elts.opml]})},disabledSubmit:function(t){this.elts.btnSubmit.setDisabled(t),t?this.elts.btnSubmit.setValue(_("Loading...")):this.elts.btnSubmit.setValue(_("Dashboard it!"))},buildLanguageOptions:function(){var t,e=[];for(t in this.languages)this.languages.hasOwnProperty(t)&&e.push({selected:a.Globalization.userLocale===t,label:this.languages[t],value:t});return e},buildTemplates:function(){var e,n=[];for(e in this.templates)this.templates.hasOwnProperty(e)&&n.push(t.createElement("li",{class:"dbwz-popular-item",id:e+"-template",html:[{tag:"img",class:"dbwz-popular-img",src:c.getStaticUrl("/img/s.gif")},{tag:"span",class:"dbwz-popular-title",text:this.templates[e]}]}));return n},bindEvents:function(){this.elts.icons.addEvent("click",this.onTemplateClick.bind(this)),this.elts.form.addEvent("submit",this.onTopicSubmit.bind(this)),this.elts.opmlInput.addEvent("onChange",this.onOmplSubmit.bind(this))},onTemplateClick:function(t){var e,n=t.target.getParent("li");n&&(n&&n.id.indexOf("-template")>0||!this.dashboardProceed)&&(e=n.id.substr(0,n.id.indexOf("-template")),d("dashwizard",e),this.createDashboard({template:e,title:n.getText()}))},onTopicSubmit:function(t){i.stop(t);var e=this.elts.textInput.getValue();e&&!this.dashboardProceed&&(this.disabledSubmit(!0),d("dashwizard","it"),this.createDashboard({topic:e,template:"dashboard-wizard",title:e,lang:this.elts.selectInput.getValue()[0]}))},onOmplSubmit:function(){var t=c.uniqueID("__opmlCallback");this.removeError(),window[t]=this.onOpmlSubmitted.bind(this),this.elts.opml.set("action",a.Config.mount_points.api+"/my/dashboards/create-import?"+e.toQueryString({format:"jsonp",callbackMode:"html",callback:"parent."+t})),this.elts.opml.submit()},onOpmlSubmitted:function(t){t.pageUrl?this.loadNewPage(t):this.displayError(_("The file to import must be a valid opml file."))},displayError:function(t){this.elts.errorMsg.setContent({tag:"div",class:"uwa-message error",text:t||_("An error has occured.")}).show()},removeError:function(){this.elts.errorMsg.empty().hide()},displayMessage:function(e,n){var i;if(!this.elts.messageBox){this.elts.messageBox=t.createElement("div",{id:"processing-template",class:"dbwz-item"});var s=new h({title:_("Dashboard build in progress"),size:{width:800},closable:!1,displayCloseButton:!1,events:{onClosed:function(){s.destroy()}}});s.getContent().addClassName("dashboard-wizard"),s.addContent(this.elts.messageBox),s.inject(document.body),s.open()}e&&(i=t.createElement("h4",{class:"dbwz-item-title",text:e}),this.elts.messageBox.setContent(i),n&&this.elts.messageBox.grab(n))},createDashboard:function(e){this.dashboardProceed=!0,e=t.extend({lang:a.Globalization.shortLanguage,feedback:"feeds"},e),r.dashboardCreate(e).fin(function(){this.disabledSubmit(!1),this.dashboardProceed=!1}.bind(this)).done(function(n){t.merge(n,e),this.dashboardReady(n)}.bind(this),function(t){this._mainModal&&this._mainModal.close(),l.displayError(t)}.bind(this))},loadNewPage:function(t){window.location=t.pageUrl},dashboardReady:function(t){var e=n.resolve();t.analytics&&"default"!==t.template&&(e=e.then(function(){return r.myDashboardAddAnalyzeTab({topic:t.topic,pageId:t.pageId})})),e.done().fin(function(){this.displayMessage(_("It's ready! Wait a second while page is loading...")),this.loadNewPage(t)}.bind(this))},bindElement:function(t){t&&t.addEvent("click",function(t){t.preventDefault(),p.open()})}};return p}.apply(e,i))||(t.exports=s)},function(t,e,n){"use strict";var i,s;i=[n(0),n(278),n(5)],void 0===(s=function(t,e,n){var i=t.h;return n.extend({init:function(t){this._parent(t),this.state={previousProps:null,transition:!1}},componentWillReceiveProps:function(t){this.props.transitionKey!==t.transitionKey&&this.setState({previousProps:this.props,transition:!0})},render:function(t,n){var s=n.previousProps,o=s?1:0,a=s?0:1,r={stiffness:120,damping:17,precision:s?1:.1};return i(e.Motion,{defaultStyle:{opacity:o},style:{opacity:n.transition?e.spring(a,r):a},onRest:this.onFadeInDone.bind(this)},function(e){var o=s?n.previousProps:t;return i("div",Object.assign({},o,{style:Object.assign({},e,o.style),transitionKey:void 0}))})},onFadeInDone:function(){this.setState({previousProps:null})}})}.apply(e,i))||(t.exports=s)},,,function(t,e,n){"use strict";var i,s;i=[n(0),n(5),n(123),n(14),n(758),n(223)],void 0===(s=function(t,e,n,i,s,o){var a=t.h,r=i.namespace("ThumbnailsList").addRules({root:{flex:1},row:{display:"flex",flexFlow:"row",alignItems:"flex-start",marginBottom:"20px"},rowTight:{flexFlow:"column",alignItems:"stretch"},label:{marginBottom:"20px",width:"300px"},labelDsCatalog:{width:"310px"},labelTight:{width:"auto"},thumbnail:{marginRight:"10px",marginBottom:"10px"},rowThumbnails:{display:"flex",flexFlow:"row wrap",flex:1,padding:"0 0 0 20px",boxSizing:"border-box"},rowThumbnailsTight:{padding:"0",MsFlex:"1 0 auto"}});return e.extend({init:function(t){this._parent(t),this.onLabelClick=this.onLabelClick.bind(this),this.onThumbnailClick=this.onThumbnailClick.bind(this)},render:function(t){return a(n,{class:r("root")},function(e){var n=e.width<700;return t.thumbnails.map(function(t){return this.renderRow(t,n)},this)}.bind(this))},renderRow:function(t,e){var n=this.props,i=t.thumbnails.every(function(t){return t.selected||n.selectedThumbnails&&n.selectedThumbnails[t.id]},this);return a("div",{class:"nv-thumbslist-row "+(i?"selected ":"")+r("row",e&&"rowTight"),"data-id":t.id,key:t.id},[a(s,{key:t.id,id:t.id,name:t.label.name,text:t.label.text,selected:i,style:r("label","dsCatalog"===n.theme&&"labelDsCatalog",e&&"labelTight"),selectable:t.selectable,onClick:n.toggleThumbnailsSelection&&this.onLabelClick,theme:n.theme}),this.renderThumbnails(t.thumbnails,e)])},renderThumbnails:function(t,e){var n=this.props,i=t.map(function(t){var e=t.selected||n.selectedThumbnails&&n.selectedThumbnails[t.id];return a(o,Object.assign({},t,{selected:e,style:r("thumbnail"),onClick:n.toggleThumbnailsSelection&&this.onThumbnailClick,clickToPick:n.clickToPick,theme:n.theme}))},this);return a("div",{class:r("rowThumbnails",e&&"rowThumbnailsTight")},[i])},getThumbnailsFromLabelId:function(t){return this.props.thumbnails.detect(function(e){return e.id===t}).thumbnails},onLabelClick:function(t,e){var n=this.getThumbnailsFromLabelId(e);this.props.toggleThumbnailsSelection(t,n)},onThumbnailClick:function(t,e){this.props.toggleThumbnailsSelection(t,[e])}})}.apply(e,i))||(t.exports=s)},,function(t,e,n){"use strict";var i,s;i=[n(1),n(9),n(2),n(148)],void 0===(s=function(t,e,i,s){var o=e.extend({init:function(t){this.datasource=t,document.body.getElement("#smartreader-main").grab(this.buildContainer())},buildContainer:function(){return t.createElement("div",{id:"smartreader-"+this.viewName+"-container",class:"smartreader-display"}).addContent(this.buildHeader(),this.buildOptions(),this.buildMain()).hide()},buildHeader:function(){return t.createElement("div",{id:"smartreader-"+this.viewName+"-header",class:"smartreader-header"}).addContent(this.buildHeaderLeft(),this.buildHeaderRight())},buildMain:function(){return t.createElement("div",{id:"smartreader-"+this.viewName+"-main",class:"smartreader-main"})},buildOptions:function(){return t.createElement("div",{id:"tabOptions"})},buildHeaderLeft:function(){return t.createElement("div",{class:"smartreader-header-top left "+this.viewName,html:[t.createElement("div",{class:"container"}),t.createElement("div",{class:"container"})]})},buildHeaderRight:function(){return t.createElement("div",{class:"smartreader-header-top right "+this.viewName,html:t.createElement("div",{class:"container"})})},buildPrevNext:function(e,n,i,s){return t.createElement("div",{id:"smartreader-"+this.viewName+"-header-prevNext",class:"header-prevNext header-button-set"}).addContent(t.createElement("div",{id:"smartreader-"+this.viewName+"-header-prev",class:"prev header-button first",events:{click:n}}).addContent(t.createElement("div",{class:"img"}),t.createElement("div",{class:"text",text:e})),t.createElement("div",{class:"separator"}),t.createElement("div",{id:"smartreader-"+this.viewName+"-header-next",class:"next header-button last",events:{click:s}}).addContent(t.createElement("div",{class:"text",text:i}),t.createElement("div",{class:"img"})))},_displayView:function(){var t=document.body.getElement("#smartreader-"+this.viewName+"-container");"none"===t.style.display&&(document.body.getElement("#smartreader-main").getElements(".smartreader-display").invoke("setStyle","display","none"),t.setStyle("display","block"),this.datasource.setActiveView(this.viewName))}});return o.toggleSidebar=function(t){if(!["right","left"].includes(t))throw Error("which : Wrong value "+t);Promise.resolve().then(function(){var e=[n(118)];(function(e){var n=e.Widget.getQuickSidebar();s.closeOtherSidebarIfNeeded(t),"right"===t?n.toggleSidebar():e.toggleSidebar()}).apply(null,e)}).catch(n.oe)},o}.apply(e,i))||(t.exports=s)},function(t,e,n){"use strict";var i,s;i=[n(394),n(172),n(35),n(45),n(275)],void 0===(s=function(t,e,n,i,s){var o,a,r="audioplayerStatus";function l(){return document.body.querySelector("#playermp3Container")}function c(){return Boolean(o||l())}function u(t){var e=Object.assign({},t);clearInterval(a),a=setInterval(function(){var t=h().adapter,n=t.getCurrentTime()||0;0!==e.currentTime||0!==n||t.isPaused()?e.currentTime!==n&&(e.currentTime=n,n>0&&function(t){i.set(r,t),i.saveNow()}(e)):clearInterval(a)},5e3)}function h(){if(!c())throw new Error("AudioPlayer not available");return o||((o=new t({className:"dark"})).inject(l()),o.hide(),o.addEvents({onPlayPause:function(){s(),o.adapter.isPaused()||n.log("flashplayer","play")},onShow:function(){s()},onHide:function(){s(),clearInterval(a),i.set(r,null),i.saveNow()}})),o}return e.addCallback(function(){var t;try{t=i.get(r)}catch(t){}if(t&&c()){var e=h();e.addEventOnce("onCanPlay",function(){e.adapter.play(),e.adapter.pause(),e.adapter.setCurrentTime(t.currentTime),u(t)}),e.load(t.url)}}),{play:function(e,n){h().play(e,n),t.canPlay(e)&&u({url:e,title:n})},isAvailable:c}}.apply(e,i))||(t.exports=s)},function(t,e,n){var i,s;i=[n(1),n(13),n(19),n(3),n(15),n(10),n(306),n(376)],void 0===(s=function(t,e,n,i,s,o,a,r){"use strict";var l,c=0;function u(t){var n,i,s=l.Adapter,o=e.parseUrl(t);for(n in s)s.hasOwnProperty(n)&&!i&&s[n].isAvailable(o.fileName)&&(i=s[n]);return i}return(l=o.extend({name:"uwa-audioplayer",defaultOptions:{url:"",autoPlay:!1,handleButton:!0,closeButton:!0,preload:"none",className:"",isTouch:n.Features.touchEvents,player:{html:[{tag:"div",class:"uwa-icon play-pause"},{tag:"div",class:"controls-times",html:[{tag:"span",class:"played",text:"00:00"},{tag:"span",class:"duration duration-hide",text:"00:00"}]},{tag:"div",class:"controls-slider"},{tag:"div",class:"controls-right",html:{tag:"div",class:"uwa-icon close close-hide"}}],playPauseClass:"play-pause",timeClass:"time",durationClass:"duration",playedClass:"played",errorMessageClass:"error-message",playingClass:"playing",waitingClass:"waiting",errorClass:"error",closeClass:"close"}},adapter:null,init:function(e){var n=this;this.id=c,c++,t.Controls.AudioPlayer.Instances["x"+this.id]=this,e=e||{},this._parent(e),this.eventNames={start:this.options.isTouch?"touchstart":"mousedown",move:this.options.isTouch?"touchmove":"mousemove",end:this.options.isTouch?"touchend":"mouseup"},this.body=e.body||document.body,this.buildSkeleton(),this.attachEvents(),this.reset(),this.options.url&&this[this.options.autoPlay?"play":"load"](),this.container.addEvent("resize",function(){var t,e,i,s,o,a,r;(t=n.elements).slider.show(),t.controlsTimes.show(),t.controlsRight.show(),e=n.container.getSize().width,i=t.playPause.getSize().width,s=t.slider.getSize().width,o=t.controlsTimes.getSize().width,a=t.controlsRight.getSize().width,s<30&&(t.slider.hide(),(r=i+o+a)>e-10&&(t.controlsTimes.hide(),(r-=o)>e-7&&t.controlsRight.hide()))})},getAdapter:function(t){var e=u(t);if(e)return this.adapter||(this.adapter=e.build(this)),this.adapter.setUrl(t),this.adapter;window.open(t)},buildSkeleton:function(){var e,n,i=this.options,s=i.player;return n=(e=t.createElement("div",{class:this.getClassNames(),html:i.player.html})).getElement.bind(e),this.elements={playPause:n(".play-pause"),slider:null,controlsTimes:n(".controls-times"),controlsRight:n(".controls-right"),played:n("."+s.playedClass),duration:n("."+s.durationClass),play:n("."+s.playPauseClass),close:n("."+s.closeClass)},this.options.closeButton&&this.elements.close.removeClassName("close-hide"),this.container=e,this},attachEvents:function(){var t=this,e=t.elements,n=t.dispatchEvent.bind(t);return e.play.addEvent("click",n.bind(t,"onPlayPause")),this.options.closeButton&&e.close.addEvent("click",n.bind(t,"close")),t.slider=new r({_root:!1,container:t.container,events:{onChange:function(n){var i=n*t.adapter.getDuration()/100;t.adapter.setCurrentTime(i),e.played.setText(t.formatTime(i))}}}),t.elements.slider=t.slider.elements.scrubber,this},reset:function(){var t=this.elements;this.loadedPercent=0,this.canPlay=!1,this.shouldPlay=!1,t.duration.setText(this.formatTime(0)),t.played.setText(this.formatTime(0))},load:function(t){t=t||this.options.url,this.stop(),this.reset(),this.show(),this.adapter=this.getAdapter(t)},play:function(t,e){this.load(t,e),this.adapter&&(this.adapter.play(),this.shouldPlay=!0)},pause:function(){this.adapter&&this.adapter.pause(),this.shouldPlay=!1},stop:function(){this.adapter&&(this.adapter.stop(),this.slider.reset())},close:function(){this.stop(),this.slider.reset(),this.hide()},onPlayPause:function(){this.adapter&&this.adapter[this.adapter.isPaused()?"play":"pause"]()},onPlay:function(){this.container.addClassName(this.options.player.playingClass).removeClassName("paused"),this.canPlay||this.container.addClassName(this.options.player.waitingClass),this.shouldPlay=!0},onPause:function(){this.container.removeClassName(this.options.player.waitingClass).removeClassName(this.options.player.playingClass).addClassName("paused"),this.shouldPlay=!1},onCanPlay:function(){(this.options.preload||"none"!==this.options.preload)&&this.trackLoadProgress(),this.container.removeClassName(this.options.player.waitingClass),this.canPlay=!0,this.shouldPlay&&this.adapter&&this.adapter.isPaused()&&this.adapter.play()},onMetadataLoaded:function(){this.elements.duration.setText(this.formatTime(this.adapter.getDuration()))},onTimeUpdate:function(){this.elements.played.setText(this.formatTime(this.adapter.getCurrentTime()));var t=100*this.adapter.getCurrentTime()/this.adapter.getDuration();this.slider.setValue(t)},trackLoadProgress:function(){this.loadTimer&&clearTimeout(this.loadTimer),this.loadedPercent<1&&(this.loadTimer=setTimeout(function(){this.onLoadProgress(),this.trackLoadProgress()}.bind(this),400))},onLoadProgress:function(){this.loadedPercent=this.adapter?this.adapter.getLoadProgress():0,this.loadedPercent&&this.slider.setLoadedValue(this.loadedPercent)},formatTime:function(t){var e=parseInt(t,10),n=Math.floor(e/60,10),i=e-60*n;return i=isNaN(i)?0:i,(n=isNaN(n)?0:n)+":"+(i<10?"0"+i:i)}})).canPlay=function(t){return Boolean(u(t))},l.Instances={},l.Adapter={audio:{audioTag:null,isAvailable:function(t){var e=document.createElement("audio");return!!e.canPlayType&&(/\.mp3$/.test(t)&&""!==e.canPlayType("audio/mpeg")||/\.m4a$/.test(t)&&""!==e.canPlayType("audio/x-m4a")||/\.ogg$/.test(t)&&""!==e.canPlayType('audio/ogg; codecs="vorbis"'))},build:function(e){return this.audioTag=t.createElement("audio",{id:"uwa-audioplayer-audio-"+e.id,preload:e.options.preload,events:{play:e.onPlay.bind(e),pause:e.onPause.bind(e),ended:function(){e.pause(),e.elements.played.setText(e.formatTime(0)),e.slider.reset()},timeupdate:function(){e.dispatchEvent("onTimeUpdate"),e.onLoadProgress()},loadedmetadata:e.onMetadataLoaded.bind(e),canplay:e.dispatchEvent.bind(e,"onCanPlay")}}).setStyles({position:"absolute",top:"-100000px"}),this.audioTag.inject(e.container),this},isPaused:function(){return this.audioTag.paused},play:function(){this.audioTag.play()},pause:function(){this.audioTag.pause()},stop:function(){this.audioTag.pause()},setCurrentTime:function(t){try{this.audioTag.currentTime=t}catch(t){}},getCurrentTime:function(){return this.audioTag.currentTime},getDuration:function(){return this.audioTag.duration},getLoadProgress:function(){var t=0,e=this.audioTag;return e&&e.buffered&&e.buffered.length>0&&e.buffered.end&&e.duration?t=e.buffered.end(0)/e.duration:e&&void 0!==e.bytesTotal&&e.bytesTotal>0&&void 0!==e.bufferedBytes&&(t=e.bufferedBytes/e.bytesTotal),100*t},setVolume:function(t){this.audioTag.volume=parseFloat(t/200)},getVolume:function(){return 200*this.audioTag.volume},setUrl:function(t){this.audioTag.src=t,this.audioTag.load()}},flash:{flashTag:null,isAvailable:function(t){return 0!==a.prototype.detectFlashVersion().major&&/\.mp3$/.test(t)},build:function(e){var i,s="uwa-audioplayer-flash-"+e.id,o=new a({_root:!1,id:s,url:t.hosts.uwa+"/lib/UWA/assets/img/flash/player_mp3_js.swf",width:1,height:1,flashVars:"listener=UWA.Controls.AudioPlayer.Instances.x"+e.id+".adapter.listener&interval=750&userexternalinterface=1",allowScriptAccess:"always"});if(this.pendingVariables=[],this.control=e,this.listener={isPlaying:!1,ready:!1,onInit:this.onReady.bind(this),onUpdate:function(){e.onMetadataLoaded(),e.dispatchEvent("onTimeUpdate"),e.onLoadProgress()}},this.flashTag=o.getFlashContainer(),this.flashTag.setStyles({position:"absolute",top:"-100000px"}),n.Engine.ie)try{(i=document.createElement("<script for="+s+" event=FSCommand(command,args)><\/script>")).text="eval(args);",document.body.appendChild(i)}catch(t){}return this.flashTag.inject(e.container),this},SetVariable:function(t,e){var n=this;if(n.listener.ready){n.variableTimers=n.variableTimers||{};try{clearTimeout(n.variableTimers[t]),n.flashTag.SetVariable(t,e)}catch(i){n.variableTimers[t]=setTimeout(function(){n.flashTag.SetVariable(t,e)},500)}}else n.pendingVariables.push([t,e])},onReady:function(){this.listener.ready=!0,this.pendingVariables.forEach(function(t){this.SetVariable.apply(this,t)},this),this.control.dispatchEvent("onCanPlay")},isPaused:function(){return"true"!==this.listener.isPlaying},play:function(){this.SetVariable("enabled","true"),this.SetVariable("method:play"),this.control.onPlay()},pause:function(){this.SetVariable("method:pause"),this.control.onPause()},stop:function(){this.SetVariable("method:setPosition",0),this.SetVariable("method:stop"),this.control.onPause()},setCurrentTime:function(t){this.SetVariable("enabled","false"),this.SetVariable("method:setPosition",Math.round(1e3*t)),this.SetVariable("enabled","true")},getCurrentTime:function(){return this.listener.position/1e3},getDuration:function(){return this.listener.duration/1e3},getLoadProgress:function(){var t=this.listener.bytesPercent;return isNaN(t)?100:t},setVolume:function(t){t=isNaN(t)?100:t,this.SetVariable("method:setVolume",t)},getVolume:function(){return this.listener.volume},setUrl:function(t){this.SetVariable("method:setUrl",t)}}},t.namespace("Controls/AudioPlayer",l,t)}.apply(e,i))||(t.exports=s)},function(t,e,n){"use strict";var i,s;i=[n(3),n(57),n(0),n(5),n(772),n(14),n(97)],void 0===(s=function(t,e,n,i,s,o,a){var r=o.namespace("OpinionSentiments").addRules({loading:{padding:"10px"},list:{padding:0},listItem:{padding:"5px 10px",lineHeight:"20px",cursor:"pointer",whiteSpace:"nowrap",transition:"background-color 0.2s",borderBottom:"1px dotted #bfbfbf",hover:{backgroundColor:"#d4d4d4"},"last-child":{borderBottom:"none"}},color:{display:"inline-block",width:"16px",height:"16px",verticalAlign:"middle"},name:{display:"inline-block",marginLeft:"10px"}}),l=n.h;return i.extend({init:function(t){this._parent(t),this.state={sentiments:[]},this.onClickItem=this.onClickItem.bind(this)},componentDidMount:function(){a.getSentiments().done(function(t){this.setState({sentiments:t.sentiments})}.bind(this),this.props.onError)},render:function(t,e){return l(s,{target:t.target,onClickOutside:t.onClickOutside,roundedCorners:!0,maxHeight:250},e.sentiments.length?l("ul",{class:r("list")},e.sentiments.map(function(t){return l("li",{class:r("listItem"),key:t.id,"data-id":t.id,onClick:this.onClickItem},[l("span",{class:r("color"),style:{backgroundColor:"#"+t.color}}),l("span",{class:r("name")},t.name)])},this)):l("div",{class:r("loading")},_("Loading...")))},onClickItem:function(n){var i=t.findElement(n,"li[data-id]").getAttribute("data-id"),s=e.detect(this.state.sentiments,function(t){return t.id.toString()===i});this.props.selectSentiment(s)}})}.apply(e,i))||(t.exports=s)},function(t,e,n){"use strict";var i,s;i=[n(1),n(8),n(2),n(4),n(104),n(51),n(107),n(435),n(298),n(381),n(277)],void 0===(s=function(t,e,i,s,o,a,r,l,c,u,h){var d={},p=["pub_date","emotion","opinion_sentiment","like","mention","tweets","following","followers","time"],m=["author","twitter_author","twitter_retweeter","domain","media","term","quantitative","geoloc"],f=["rssreader","facebook","twitter","extendedvibes","multiplefeeds"];function g(t,e){return t.some(function(t){return 0===e.indexOf(t)})}function v(n){var i,s=[t.createElement("div",{class:"autoclear"}).grab(t.createElement("strong",{text:_("Compare app")})),t.createElement("p",{text:n.text.truncate(150)}),t.createElement("label",{html:[new e.Checkbox({className:"light",events:{onChange:function(){i=this.isChecked()}}}),_("Remove original apps")]})];o.showPopup(n.newDataObj,{position:{before:n.widgetA.getId()},width:{widget:"55%",infos:"40%"},infos:{before:s}}).done(function(){i&&(n.widgetA.remove(),n.widgetB.remove())})}function b(t){var e=t.analyticsIds.split(","),n=t.tokens?t.tokens.split(","):[],i=t.colorChart&&t.colorChart.split(","),o=t.colors?t.colors.split(","):"",a=t.subColors?t.subColors.split(","):"",r=t.types?t.types.split(","):"",c=t.names?t.names.split(","):"",u=t.sampling?t.sampling.split(","):"",h=t.samplingAuto?t.samplingAuto.split(","):"",d=t.hiddenSeries?t.hiddenSeries.split(","):"",p=t.queryRestriction?s.tryJSONParse(t.queryRestriction):[],m=t.hiddenAggMethods?t.hiddenAggMethods.split(","):"",f=[];function g(e,s,a,d,p){var g="",v=o[s]||i&&l.Colors[i[s]][2];g=t.type&&t.type.match(/facebook|twitter/)?c[s]+" ("+t.type+" "+_("{0}").format(t.grouping)+")":c[s];var b={analyticsId:e,token:n[s]||"",queryRestriction:p,color:d||v,type:a||t.grouping||(r?r[s]:""),name:g,sampling:u[s]||"auto",samplingAuto:h[s]};m.includes(String(s))&&(b.hiddenAggMethods=!0),f.push(b)}return e.forEach(function(e,n){var i;if(e&&!d.includes(String(n)))if(t.grouping&&t.grouping.split(",").length>1)t.grouping.split(",").forEach(function(t,s){i=a?a[s]:"",g(e,n,t,i,p.length?p[n]:{})});else if(p&&p.length){for(var s=!1,o=0;o<p.length;o++)p[o]&&e===p[o].id&&(g(e,n,"","",p[o]),s=!0);s||g(e,n)}else g(e,n)}),f}function y(t){var e,n,i=t.analyticsIds.split(","),o=t.tokens?t.tokens.split(","):[],a=t.colors.split(","),r=t.types.split(","),l=t.names.split(","),c=t.sampling?t.sampling.split(","):"",u=t.samplingAuto?t.samplingAuto.split(","):"",h=s.tryJSONParse(t.queryRestriction)||[],d=t.hiddenSeries?t.hiddenSeries.split(","):"",p=t.hiddenAggMethods?t.hiddenAggMethods.split(","):"",m=[];for(e=0,n=i.length;e<n;e++)if(!d.includes(String(e))){var f={analyticsId:i[e],token:o[e],queryRestriction:h[e],color:a[e],type:r[e],name:l[e],sampling:c[e]||"auto",samplingAuto:u[e]};p.includes(String(e))&&(f.hiddenAggMethods=!0),m.push(f)}return m}function w(t,e,n){var i=n._page_id,s=a.getRandomColor();t.push(i),e.push(s)}function x(t,e,n,i){var s,o=i.trackings?i.trackings.split(","):[],r=i.colors.split(","),l=i.names?i.names.split(","):[];o.forEach(function(i,o){s=r[o],e.includes(s)&&(s=a.getRandomColor(s)),t.push(i),e.push(s),l[o]&&n.push(l[o])})}return d.isComparableWith=function(e,n){var i,s,o,a,r=!1,l=[{widgets:["socialpack_analytics","socialpack_compare","searchtrends"],comparable:"SocialPack_Compare",isComparable:function(t,e,n){var i=e.grouping||e.typeSerie,s=n.grouping||n.typeSerie;return i&&s&&(g(p,i)&&g(p,s)||g(m,i)&&g(m,s))}},{widgets:["searchtrends","facebook"],comparable:"SearchTrends",isComparable:function(t,e,n){return!!("facebook"===e.type&&n._page_id||"facebook"===n.type&&e._page_id||e._page_id&&n._page_id)}},{widgets:f.concat(["library"]),comparable:"Library",isComparable:function(){return!("library"!==o&&"library"!==a||"library"===o&&e.isShared()||"library"===a&&n.isShared())}},{widgets:["analyze"],comparable:"Analyze",isComparable:function(){return!0}}];return e&&n&&e!==n&&(o=e.getName().toLowerCase(),a=n.getName().toLowerCase(),i=e.getDataWithDefaults(),s=n.getDataWithDefaults(),l.forEach(function(e){e.widgets.includes(o)&&e.widgets.includes(a)&&t.is(e.isComparable,"function")&&e.isComparable(e,i,s)&&(r=e.comparable)})),e.comparable=r,e.elm_module&&e.elm_module.toggleClassName("comparable",r),r},d.getSocialPackComparisonData=function(e,n,o){var l,c,u,h,d,m,f=n.getDataWithDefaults(),v=o.getDataWithDefaults(),w=Math.min(f.limit,v.limit),x=v.altView||v.selectedView;function C(t,e,n){return t&&e?r.parseNativeDate(t)<r.parseNativeDate(e)^n?t:e:""}"where"===f.widgetMode&&(w=12),l=C(f.date_from,v.date_from,!1),c=C(f.date_to,v.date_to,!0),"SocialPack_Compare"===n.getName()&&"SocialPack_Compare"===o.getName()?(d=y(f),m=y(v)):(d=b(f),m=b(v));var S=d.concat(m),E=[],k=[];function T(t,e){return t.map(function(t){return t[e]})}function A(t,e,n){return T(t,e).join(n||",")}function I(t,e){return t.title||A(e,"name",", ")}return S.forEach(function(e,n){var i;for(e.hiddenAggMethods&&k.push(n),i=n+1;i<S.length;i++){var s=S[i];e.color===s.color&&(s.color=a.getRandomColor())}E.some(function(n){return n.analyticsId===e.analyticsId&&n.type===e.type&&t.equals(n.queryRestriction,e.queryRestriction)})||E.push(e)}),h=_("Comparing {0}, {1}").format(I(f,d),I(v,m)),u={moduleName:e,analytics:n.getAnalytics().concat(o.getAnalytics()),title:h,data:{analyticsIds:A(E,"analyticsId"),tokens:A(E,"token"),colors:A(E,"color"),types:A(E,"type"),names:A(E,"name"),sampling:A(E,"sampling"),sampling_auto:A(E,"samplingAuto"),queryRestriction:JSON.stringify(T(E,"queryRestriction")),blacklistValue:JSON.stringify(t.merge(s.tryJSONParse(f.blacklistValue)||[],s.tryJSONParse(v.blacklistValue)||[])),blacklistCategories:(s.tryJSONParse(f.blacklistCategories)||[]).concat(s.tryJSONParse(v.blacklistCategories)||[]),range:f.range,date_from:l,date_to:c,limit:w,selectedView:x,typeSerie:g(p,f.grouping||f.typeSerie)?"time":"quantitative",hiddenAggMethods:k.join(",")}},i.isIn3DDashboard()&&(u.x3dPlatformId=i.get3DDPlatformId()),u},d.compareWith=function(t,e){var i,s,o=d.isComparableWith(t,e);return o&&o.includes("SocialPack")?function(t,e,n){var i=e.getDataWithDefaults(),s=n.getDataWithDefaults(),o=d.getSocialPackComparisonData(t,e,n);function a(t){return t.searchQuery&&JSON.parse(t.searchQuery).topic}v({newDataObj:o,text:_('Show me a comparison based on "{0}" compared to "{1}" within dashboard {2}').format(a(i)||e.getTitle(),a(s)||n.getTitle(),r.formatDateRangeForDisplay(o.from,o.to)),widgetA:e,widgetB:n})}(o,t,e):"SearchTrends"===o?function(t,e,n){var i,s=e.getDataWithDefaults(),o=n.getDataWithDefaults(),a=e.getTitle().split("-")[1],r=n.getTitle().split("-")[1],l=o.selectedView,c=[],u=[],h=[],d=e.getAnalytics()||[],p=n.getAnalytics()||[];"facebook"===e.getName().toLowerCase()?(w(c,u,s),h.push(a)):x(c,u,h,s),"facebook"===n.getName().toLowerCase()?(w(c,u,o),h.push(r)):x(c,u,h,o),i=_("Comparing {0}").format(h.join(", ")),v({newDataObj:{moduleName:t,analytics:d.concat(p),data:{title:i,trackings:c.toString(),colors:u.toString(),selectedView:l,_connectid:s._connectid||o._connectid}},text:_('Show me the comparison of "{0}"').format(h.join(", ")),widgetA:e,widgetB:n})}(o,t,e):"Library"===o?function(t,e,n){var i=e.getDataWithDefaults(),s=n.getDataWithDefaults(),o=e.getName().toLowerCase(),a=n.getName().toLowerCase();if("library"===o&&"library"===a){var r=new c({libraryId:s.libraryId,token:s.libraryToken});r.launchLibrary().done(function(){new h({allLib:!0,action:"merge",titleAction:_("add"),originalLib:r,originalWidget:n,selectedLibId:i.libraryId,ckeckboxText:_("Remove original app")}).open()})}else new u(f.includes(o)?e.dataObj:n.dataObj,{selectedLibId:"library"===o?i.libraryId:s.libraryId}).open()}(0,t,e):"Analyze"===o&&(i=t,s=e,n.e(0).then(function(){var t=[n(302)];(function(t){var e,n,o,a;t.openEditSource({sources:(e=i.content.sourceList.asArray(),n=s.content.sourceList.asArray(),o=e.map(function(t){var e=n.detect(function(e){return t.getId()===e.getId()});if(!e)return t;var i=e.getFacets().filter(function(e){return!t.getFacets().some(function(t){return e.getName()!==t.getName()})});return t.cloneWith({facets:t.getFacets().concat(i)})}),a=n.filter(function(t){return!e.some(function(e){return t.getId()===e.getId()})}),o.concat(a)),settings:{title:_("Comparing {0} and {1}").format(i.getTitle(),s.getTitle())},addModuleOptions:{before:i.getId()}}).done()}).apply(null,t)}).catch(n.oe)),!!o},d}.apply(e,i))||(t.exports=s)},function(t,e,n){"use strict";var i,s;i=[n(1),n(18),n(398)],void 0===(s=function(t,e,n){return{generateImage:function(t,e,i){var s=new n({type:"screenshot",withSession:!0,screenshotRecover:!1,screenshotModuleId:t,screenshotPageId:e,screenshotFormat:(i=i||{}).format||"png",screenshotHooks:i.hooks});return s.register().then(function(){return s.getURL()})},dowloadImage:function(n,i){t.is(i,"function")&&(i=i()),i=i||_("image");var s=n.slice(n.lastIndexOf(".")+1),o=i.replace(/[^a-z0-9]+/gi,"-").replace(/^-|-$/g,"")+"."+s,a=e.format("{0}?transfer=true&transferName={1}",n,encodeURIComponent(o)),r=document.getElementById("widgetHiddenDownloader");null===r&&(r=t.createElement("iframe",{id:"widgetHiddenDownloader",styles:{display:"none",height:0,width:0}})).inject(document.body),r.src=a+"&rnd="+Math.random()}}}.apply(e,i))||(t.exports=s)},function(t,e,n){"use strict";var i,s;i=[n(9),n(16),n(6)],void 0===(s=function(t,e,n){return t.extend({init:function(t){this.options=t||{},UWA.merge(this.options,{onJobComplete:function(){},type:"",data:{}})},getData:function(){return{type:this.options.type,data:this.options.data,withSession:this.options.withSession,screenshotRecover:this.options.screenshotRecover,screenshotModuleId:this.options.screenshotModuleId,screenshotPageId:this.options.screenshotPageId,screenshotFormat:this.options.screenshotFormat,screenshotHooks:this.options.screenshotHooks}},register:function(){var t=this;return this.jobPromise||(this.jobPromise=new e(function(e,i){n.taskCreate(this.getData()).done(function(n){t.jobId=n.id,t._url=n.url;var s=setInterval(function(){t.getStatus().done(function(t){"ready"===t.status?(clearInterval(s),e(t.status)):("error"===t.status||t.error_message.length)&&(clearInterval(s),i(t.error_message))},function(t){window.console&&window.console.error&&window.console.error(t),i("Unable to retrieve task status")})},3e3)},i)}.bind(this))),this.jobPromise},getURL:function(){return this._url},getStatus:function(){return this.jobId?n.taskStatus({type:this.options.type,id:this.jobId}):e.reject()}})}.apply(e,i))||(t.exports=s)},function(t,e,n){"use strict";var i;void 0===(i=function(){return{ERROR:"error",SUCCESS:"success",WARN:"warn",INFO:"info",show:function(t,e){e&&-1!==["error","success","warn","info"].indexOf(e)||(e="info"),window.require(["DS/UWPClientControls/PlatformNotify"],function(n){n[e](t)})}}}.call(e,n,e,t))||(t.exports=i)},function(t,e,n){var i,s;i=[n(4)],void 0===(s=function(t){"use strict";function e(t,n,i){this.extend(e,google.maps.OverlayView),this.map_=t,this.markers_=[],this.clusters_=[],this.sizes=[53,56,66,78,90],this.styles_=[],this.ready_=!1;var s=i||{};this.gridSize_=s.gridSize||60,this.minClusterSize_=s.minimumClusterSize||2,this.useMarkerValue_=!1,null!=s.useMarkerValue&&(this.useMarkerValue_=s.useMarkerValue),this.maxZoom_=s.maxZoom||null,this.styles_=s.styles||[],this.imagePath_=s.imagePath||this.MARKER_CLUSTER_IMAGE_PATH_,this.imageExtension_=s.imageExtension||this.MARKER_CLUSTER_IMAGE_EXTENSION_,this.zoomOnClick_=!0,null!=s.zoomOnClick&&(this.zoomOnClick_=s.zoomOnClick),this.averageCenter_=!1,null!=s.averageCenter&&(this.averageCenter_=s.averageCenter),this.setupStyles_(),this.setMap(t),this.prevZoom_=this.map_.getZoom();var o=this;google.maps.event.addListener(this.map_,"zoom_changed",function(){var t=o.map_.getZoom();o.prevZoom_!=t&&(o.prevZoom_=t,o.resetViewport())}),google.maps.event.addListener(this.map_,"idle",function(){o.redraw()}),n&&n.length&&this.addMarkers(n,!1)}function n(t){this.markerClusterer_=t,this.map_=t.getMap(),this.gridSize_=t.getGridSize(),this.minClusterSize_=t.getMinClusterSize(),this.averageCenter_=t.isAverageCenter(),this.center_=null,this.markers_=[],this.bounds_=null,this.clusterIcon_=new i(this,t.getStyles(),t.getGridSize())}function i(t,e,n){t.getMarkerClusterer().extend(i,google.maps.OverlayView),this.styles_=e,this.padding_=n||0,this.cluster_=t,this.center_=null,this.map_=t.getMap(),this.div_=null,this.sums_=null,this.visible_=!1,this.setMap(this.map_)}return e.prototype.MARKER_CLUSTER_IMAGE_PATH_="https://google-maps-utility-library-v3.googlecode.com/svn/trunk/markerclusterer/images/m",e.prototype.MARKER_CLUSTER_IMAGE_EXTENSION_="png",e.prototype.extend=function(t,e){return function(t){for(var e in t.prototype)this.prototype[e]=t.prototype[e];return this}.apply(t,[e])},e.prototype.onAdd=function(){this.setReady_(!0)},e.prototype.draw=function(){},e.prototype.setupStyles_=function(){if(!this.styles_.length)for(var t,e=0;t=this.sizes[e];e++)this.styles_.push({url:this.imagePath_+(e+1)+"."+this.imageExtension_,height:t,width:t})},e.prototype.fitMapToMarkers=function(){for(var t,e=this.getMarkers(),n=new google.maps.LatLngBounds,i=0;t=e[i];i++)n.extend(t.getPosition());this.map_.fitBounds(n)},e.prototype.setStyles=function(t){this.styles_=t},e.prototype.getStyles=function(){return this.styles_},e.prototype.isZoomOnClick=function(){return this.zoomOnClick_},e.prototype.useMarkerValue=function(){return this.useMarkerValue_},e.prototype.isAverageCenter=function(){return this.averageCenter_},e.prototype.getMarkers=function(){return this.markers_},e.prototype.getTotalMarkers=function(){return this.markers_.length},e.prototype.setMaxZoom=function(t){this.maxZoom_=t},e.prototype.getMaxZoom=function(){return this.maxZoom_},e.prototype.calculator_=function(e,n,i){var s=0,o=e.length;i&&(o=0,e.forEach(function(t){o+=t.value}));for(var a=o;0!==a;)a=parseInt(a/10,10),s++;return s=Math.min(s,n),{text:t.formatHumanNumber(o),index:s}},e.prototype.setCalculator=function(t){this.calculator_=t},e.prototype.getCalculator=function(){return this.calculator_},e.prototype.addMarkers=function(t,e){for(var n,i=0;n=t[i];i++)this.pushMarkerTo_(n);e||this.redraw()},e.prototype.pushMarkerTo_=function(t){if(t.isAdded=!1,t.draggable){var e=this;google.maps.event.addListener(t,"dragend",function(){t.isAdded=!1,e.repaint()})}this.markers_.push(t)},e.prototype.addMarker=function(t,e){this.pushMarkerTo_(t),e||this.redraw()},e.prototype.removeMarker_=function(t){var e=-1;if(this.markers_.indexOf)e=this.markers_.indexOf(t);else for(var n,i=0;n=this.markers_[i];i++)if(n==t){e=i;break}return-1!=e&&(t.setMap(null),this.markers_.splice(e,1),!0)},e.prototype.removeMarker=function(t,e){var n=this.removeMarker_(t);return!(e||!n)&&(this.resetViewport(),this.redraw(),!0)},e.prototype.removeMarkers=function(t,e){for(var n,i=!1,s=0;n=t[s];s++){var o=this.removeMarker_(n);i=i||o}if(!e&&i)return this.resetViewport(),this.redraw(),!0},e.prototype.setReady_=function(t){this.ready_||(this.ready_=t,this.createClusters_())},e.prototype.getTotalClusters=function(){return this.clusters_.length},e.prototype.getMap=function(){return this.map_},e.prototype.setMap=function(t){this.map_=t},e.prototype.getGridSize=function(){return this.gridSize_},e.prototype.setGridSize=function(t){this.gridSize_=t},e.prototype.getMinClusterSize=function(){return this.minClusterSize_},e.prototype.setMinClusterSize=function(t){this.minClusterSize_=t},e.prototype.getExtendedBounds=function(t){var e=this.getProjection(),n=new google.maps.LatLng(t.getNorthEast().lat(),t.getNorthEast().lng()),i=new google.maps.LatLng(t.getSouthWest().lat(),t.getSouthWest().lng()),s=e.fromLatLngToDivPixel(n);s.x+=this.gridSize_,s.y-=this.gridSize_;var o=e.fromLatLngToDivPixel(i);o.x-=this.gridSize_,o.y+=this.gridSize_;var a=e.fromDivPixelToLatLng(s),r=e.fromDivPixelToLatLng(o);return t.extend(a),t.extend(r),t},e.prototype.isMarkerInBounds_=function(t,e){return e.contains(t.getPosition())},e.prototype.clearMarkers=function(){this.resetViewport(!0),this.markers_=[]},e.prototype.resetViewport=function(t){for(var e,n=0;e=this.clusters_[n];n++)e.remove();var i;for(n=0;i=this.markers_[n];n++)i.isAdded=!1,t&&i.setMap(null);this.clusters_=[]},e.prototype.repaint=function(){var t=this.clusters_.slice();this.clusters_.length=0,this.resetViewport(),this.redraw(),window.setTimeout(function(){for(var e,n=0;e=t[n];n++)e.remove()},0)},e.prototype.redraw=function(){this.createClusters_()},e.prototype.distanceBetweenPoints_=function(t,e){if(!t||!e)return 0;var n=(e.lat()-t.lat())*Math.PI/180,i=(e.lng()-t.lng())*Math.PI/180,s=Math.sin(n/2)*Math.sin(n/2)+Math.cos(t.lat()*Math.PI/180)*Math.cos(e.lat()*Math.PI/180)*Math.sin(i/2)*Math.sin(i/2);return 6371*(2*Math.atan2(Math.sqrt(s),Math.sqrt(1-s)))},e.prototype.addToClosestCluster_=function(t){for(var e,i=4e4,s=null,o=(t.getPosition(),0);e=this.clusters_[o];o++){var a=e.getCenter();if(a){var r=this.distanceBetweenPoints_(a,t.getPosition());r<i&&(i=r,s=e)}}s&&s.isMarkerInClusterBounds(t)?s.addMarker(t):((e=new n(this)).addMarker(t),this.clusters_.push(e))},e.prototype.createClusters_=function(){if(this.ready_)for(var t,e=new google.maps.LatLngBounds(this.map_.getBounds().getSouthWest(),this.map_.getBounds().getNorthEast()),n=this.getExtendedBounds(e),i=0;t=this.markers_[i];i++)!t.isAdded&&this.isMarkerInBounds_(t,n)&&this.addToClosestCluster_(t)},n.prototype.isMarkerAlreadyAdded=function(t){if(this.markers_.indexOf)return-1!=this.markers_.indexOf(t);for(var e,n=0;e=this.markers_[n];n++)if(e==t)return!0;return!1},n.prototype.addMarker=function(t){if(this.isMarkerAlreadyAdded(t))return!1;if(this.center_){if(this.averageCenter_){var e=this.markers_.length+1,n=(this.center_.lat()*(e-1)+t.getPosition().lat())/e,i=(this.center_.lng()*(e-1)+t.getPosition().lng())/e;this.center_=new google.maps.LatLng(n,i),this.calculateBounds_()}}else this.center_=t.getPosition(),this.calculateBounds_();t.isAdded=!0,this.markers_.push(t);var s=this.markers_.length;if(s<this.minClusterSize_&&t.getMap()!=this.map_&&t.setMap(this.map_),s==this.minClusterSize_)for(var o=0;o<s;o++)this.markers_[o].setMap(null);return s>=this.minClusterSize_&&t.setMap(null),this.updateIcon(),!0},n.prototype.getMarkerClusterer=function(){return this.markerClusterer_},n.prototype.getBounds=function(){for(var t,e=new google.maps.LatLngBounds(this.center_,this.center_),n=this.getMarkers(),i=0;t=n[i];i++)e.extend(t.getPosition());return e},n.prototype.remove=function(){this.clusterIcon_.remove(),this.markers_.length=0,delete this.markers_},n.prototype.getSize=function(){return this.markers_.length},n.prototype.getMarkers=function(){return this.markers_},n.prototype.getCenter=function(){return this.center_},n.prototype.calculateBounds_=function(){var t=new google.maps.LatLngBounds(this.center_,this.center_);this.bounds_=this.markerClusterer_.getExtendedBounds(t)},n.prototype.isMarkerInClusterBounds=function(t){return this.bounds_.contains(t.getPosition())},n.prototype.getMap=function(){return this.map_},n.prototype.updateIcon=function(){var t=this.map_.getZoom(),e=this.markerClusterer_.getMaxZoom();if(e&&t>e)for(var n,i=0;n=this.markers_[i];i++)n.setMap(this.map_);else if(this.markers_.length<this.minClusterSize_)this.clusterIcon_.hide();else{var s=this.markerClusterer_.getStyles().length,o=this.markerClusterer_.getCalculator()(this.markers_,s,this.markerClusterer_.useMarkerValue());this.clusterIcon_.setCenter(this.center_),this.clusterIcon_.setSums(o),this.clusterIcon_.show()}},i.prototype.triggerClusterClick=function(t){var e=this.cluster_.getMarkerClusterer();google.maps.event.trigger(e,"clusterclick",this.cluster_,t),e.isZoomOnClick()&&this.map_.fitBounds(this.cluster_.getBounds())},i.prototype.triggerClusterMouseover=function(t){var e=this.cluster_.getMarkerClusterer();google.maps.event.trigger(e,"clustermouseover",this.cluster_,t)},i.prototype.triggerClusterMouseout=function(t){var e=this.cluster_.getMarkerClusterer();google.maps.event.trigger(e,"clustermouseout",this.cluster_,t)},i.prototype.onAdd=function(){if(this.div_=document.createElement("DIV"),this.visible_){var t=this.getPosFromLatLng_(this.center_);this.div_.style.cssText=this.createCss(t),this.div_.innerHTML=this.sums_.text}this.getPanes().overlayMouseTarget.appendChild(this.div_);var e=this;google.maps.event.addDomListener(this.div_,"click",function(t){e.triggerClusterClick(t)}),google.maps.event.addDomListener(this.div_,"mouseover",function(t){e.triggerClusterMouseover(t)}),google.maps.event.addDomListener(this.div_,"mouseout",function(t){e.triggerClusterMouseout(t)})},i.prototype.getPosFromLatLng_=function(t){var e=this.getProjection().fromLatLngToDivPixel(t);return"object"==typeof this.iconAnchor_&&2===this.iconAnchor_.length?(e.x-=this.iconAnchor_[0],e.y-=this.iconAnchor_[1]):(e.x-=parseInt(this.width_/2,10),e.y-=parseInt(this.height_/2,10)),e},i.prototype.draw=function(){if(this.visible_){var t=this.getPosFromLatLng_(this.center_);this.div_.style.top=t.y+"px",this.div_.style.left=t.x+"px"}},i.prototype.hide=function(){this.div_&&(this.div_.style.display="none"),this.visible_=!1},i.prototype.show=function(){if(this.div_){var t=this.getPosFromLatLng_(this.center_);this.div_.style.cssText=this.createCss(t),this.div_.style.display=""}this.visible_=!0},i.prototype.remove=function(){this.setMap(null)},i.prototype.onRemove=function(){this.div_&&this.div_.parentNode&&(this.hide(),this.div_.parentNode.removeChild(this.div_),this.div_=null)},i.prototype.setSums=function(t){this.sums_=t,this.text_=t.text,this.index_=t.index,this.div_&&(this.div_.innerHTML=t.text),this.useStyle()},i.prototype.useStyle=function(){var t=Math.max(0,this.sums_.index-1);t=Math.min(this.styles_.length-1,t);var e=this.styles_[t];this.url_=e.url,this.height_=e.height,this.width_=e.width,this.textColor_=e.textColor,this.anchor_=e.anchor,this.textSize_=e.textSize,this.backgroundPosition_=e.backgroundPosition,this.iconAnchor_=e.iconAnchor,this.path_=e.path},i.prototype.setCenter=function(t){this.center_=t},i.prototype.createCss=function(t){var e=[];e.push("background-image:url("+this.url_+");");var n=this.backgroundPosition_?this.backgroundPosition_:"0 0";e.push("background-position:"+n+";"),"object"==typeof this.anchor_?("number"==typeof this.anchor_[0]&&this.anchor_[0]>0&&this.anchor_[0]<this.height_?e.push("height:"+(this.height_-this.anchor_[0])+"px; padding-top:"+this.anchor_[0]+"px;"):"number"==typeof this.anchor_[0]&&this.anchor_[0]<0&&-this.anchor_[0]<this.height_?e.push("height:"+this.height_+"px; line-height:"+(this.height_+this.anchor_[0])+"px;"):e.push("height:"+this.height_+"px; line-height:"+this.height_+"px;"),"number"==typeof this.anchor_[1]&&this.anchor_[1]>0&&this.anchor_[1]<this.width_?e.push("width:"+(this.width_-this.anchor_[1])+"px; padding-left:"+this.anchor_[1]+"px;"):e.push("width:"+this.width_+"px; text-align:center;")):e.push("height:"+this.height_+"px; line-height:"+this.height_+"px; width:"+this.width_+"px; text-align:center;");var i=this.textColor_?this.textColor_:"black",s=this.textSize_?this.textSize_:11;return e.push("cursor:pointer; top:"+t.y+"px; left:"+t.x+"px; color:"+i+"; position:absolute; font-size:"+s+"px; font-family:Arial,sans-serif; font-weight:bold"),e.join("")},e}.apply(e,i))||(t.exports=s)},function(t,e,n){"use strict";var i,s;i=[n(286)],void 0===(s=function(t){return t.extend({defaultOptions:{addCurves:!1,forecast:!1},name:"nv-stackedhbar",build:function(t){var e=this.isEmotion(),n=this.getDefaultOptions(t),i=UWA.extend(n,{plotOptions:{bar:{stacking:e?"percent":"normal",groupPadding:.2}}},!0);e&&(i.yAxis[0].labels.formatter=function(){return this.value+"%"},i.yAxis[0].labels.x=-5,i.yAxis[0].tickAmount=3),this.options.secondAxis=!1,this.buildChart(i,t)},getTooltipOptions:function(t){this._parent(t),t.tooltip.displayTotal=!0},redrawChart:function(t){t?this.chart.setSize(this.chart.chartWidth,this.chart.chartHeight,!1):this.chart.redraw(!1)}})}.apply(e,i))||(t.exports=s)},function(t,e,n){"use strict";var i,s;i=[n(56),n(225),n(51)],void 0===(s=function(t,e,n){return e.extend({defaultOptions:{addCurves:!1,forecast:!1},name:"nv-stackedline",setHighlite:function(t,e,i){if(this.chart){var s=this.chart.get(t);s&&(s.area.css({color:e?n.brightenColor(i):i}),this.setNoteHighlite(t+"_",e,i),s.points&&s.points.forEach(function(t){t.graphic&&t.graphic.attr({fill:e?n.brightenColor(i):i})}))}},setData:function(t){var e,n;for(this.updatePinDrawingInjection(),e=0,n=t.length;e<n;e++)this.chart.series[e].setData(t[e].data,!1);this.chart.redraw()},getTooltipOptions:function(t){this._parent(t),t.tooltip.crosshairs.color="#666666",t.tooltip.displayTotal=!0},getZoneOptions:function(e,n){return n=t.parse(n).cloneWith({alpha:.5}),[{value:e.length-2},{color:n.toRGBString()}]},build:function(t){var e=this.isEmotion(),n=this.getDefaultOptions(t),i=UWA.extend(n,{chart:{type:"areaspline"},plotOptions:{areaspline:{stacking:e?"percent":"normal",shadow:!1,fillOpacity:1,lineWidth:0},series:{cursor:"pointer",states:{hover:{lineWidth:1}},marker:{enabled:!0,symbol:"circle",radius:1e-4,states:{hover:{lineWidth:2,radius:4}}}}}},!0);e&&(i.yAxis[0].labels.formatter=function(){return this.value+"%"},i.yAxis[0].tickAmount=3),this.options.secondAxis=!1,this.buildChart(i,t)},redrawChart:function(t){t?this.chart.setSize(this.chart.chartWidth,this.chart.chartHeight,!1):this.chart.redraw(!1)}})}.apply(e,i))||(t.exports=s)},function(t,e,n){"use strict";var i,s;i=[n(287)],void 0===(s=function(t){return t.extend({defaultOptions:{addCurves:!1,forecast:!1},name:"nv-stackedvbar",build:function(t){var e=this.isEmotion(),n=this.getDefaultOptions(t),i=UWA.extend(n,{plotOptions:{column:{stacking:e?"percent":"normal",groupPadding:.2}}},!0);e&&(i.yAxis[0].labels.formatter=function(){return this.value+"%"},i.yAxis[0].tickAmount=3),this.options.secondAxis=!1,this.buildChart(i,t)},getTooltipOptions:function(t){this._parent(t),t.tooltip.displayTotal=!0},redrawChart:function(t){t?this.chart.setSize(this.chart.chartWidth,this.chart.chartHeight,!1):this.chart.redraw(!1)}})}.apply(e,i))||(t.exports=s)},function(t,e,n){"use strict";var i,s;i=[n(181)],void 0===(s=function(t){return t.extend({defaultOptions:{addCurves:!1,forecast:!1},name:"nv-vbar3d",getDefaultOptions:function(t){var e=UWA.extend(this._parent(t),{chart:{type:"column",plotBackgroundColor:"#fff",spacing:[5,5,5,5],options3d:{enabled:!0,alpha:15,beta:15,depth:50,viewDistance:100}},plotOptions:{column:{borderWidth:0,groupPadding:.1,pointPadding:0}}},!0);return e.chart=UWA.extend(e.chart,this.getMarginOptions(t),!0),e},getMarginOptions:function(t){var e={},n=t.getDimensions().width,i=Math.round((n-275)/26),s=Math.round((n-1700)/-107);return i>14&&(e={options3d:{beta:s<6?6:s}}),e}})}.apply(e,i))||(t.exports=s)},function(t,e,n){"use strict";n.r(e);var i=n(424),s=n.n(i);window.loadNetvibesWidget=function(t){s.a.run(t)}},function(t,e,n){},function(t,e,n){"use strict";var i,s;i=[n(1),n(195)],void 0===(s=function(t,e){var n={init:function(){var t=document.body.getElement(".announcement-form"),e=t.getElements('[name="targetUser[]"]');function i(){return e.some(function(t){return t.checked&&-1!==["1","6"].indexOf(t.value)})}e.map(function(t){t.addEvent("change",function(t){t.target.checked&&("1"===t.target.value?e.slice(1,e.length).map(function(t){t.checked=!1}):e[0].checked=!1),n.showEmailField(i())})}),n.showEmailField(i()),n.initDatePicker(),n.showPreview(),["title","message","image","primaryText","secondaryText"].map(function(e){t.getElement("[name="+e+"]").addEvent("change",n.showPreview)})},showPreview:function(){var e=document.body.getElement(".announcement-form");function n(t){var n=e.getElement("[name="+t+"]");return n&&n.value||""}var i=document.body.getElement("#announcement-preview");if(i){i.empty();var s={title:n("title"),message:n("message"),image:n("image"),primaryText:n("primaryText"),primaryUrl:n("primaryUrl"),secondaryText:n("secondaryText"),secondaryUrl:n("secondaryUrl")};t.createElement("div",{class:"announcement",html:[t.createElement("div",{class:"announcement-header",html:[t.createElement("div",{class:"announcement-title",text:s.title}),t.createElement("div",{class:"close-button uwa-icon delete"})]}),t.createElement("div",{class:"announcement-content",html:[s.image?t.createElement("div",{class:"announcement-image",html:t.createElement("img",{src:s.image})}):"",t.createElement("p",{html:s.message})]}),t.createElement("div",{class:"announcement-footer",html:[s.secondaryText?t.createElement("span",{text:s.secondaryText}):"",s.primaryText?t.createElement("button",{class:"uwa-button green",text:s.primaryText}):""]})]}).inject(i)}},initDatePicker:function(){var t,n;t=new e({element:document.body.getElement("[name=from]"),limit:{min:new Date},format:"%Y-%m-%d %H:%M",utc:!0,time:!0}),n=new e({element:document.body.getElement("[name=to]"),limit:{min:new Date},format:"%Y-%m-%d %H:%M",utc:!0,time:!0}),t.setLimit({max:n}),n.setLimit({min:t})},showEmailField:function(t){document.body.getElement("#optional-textarea")?document.body.getElement("#optional-textarea").setStyle("display",t?"block":"none"):document.body.getElement("[name=customEmails]").getParent(".form-group.input-group").setStyle("display",t?"table":"none")}};return function(){n.init()}}.apply(e,i))||(t.exports=s)},function(t,e,n){"use strict";var i,s;i=[n(1),n(24),n(10),n(8),n(88),n(110),n(83),n(16),n(13),n(3),n(6),n(61),n(23),n(834),n(835),n(836),n(165)],void 0===(s=function(t,e,n,i,s,o,a,r,l,c,u,h,d,p,m,f,g){var v=h.extend(),b=h.extend();function y(e,n){return new r(function(i,s){var o=new XMLHttpRequest;o.addEventListener("load",function(){if(200===o.status){var t;try{t=JSON.parse(o.responseText)}catch(t){return void s(new v("Failed to parse JSON",t))}t&&t.error?s(new b(t.error.message||t.error)):i(t)}else s(new v("Status "+o.status))}),o.addEventListener("error",function(){s(new v("Request error"))}),o.addEventListener("timeout",function(){s(new v("Timeout error"))}),o.open("POST",e),o.setRequestHeader("X-Requested-With","XMLHttpRequest"),t.is(n,"formdata")||o.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),o.send(n)})}function w(t,e,n){var i=(Array.isArray(e)?e:e?e.split("."):[]).reduce(function(t,e){return t&&t[e]},t);return void 0===i&&console.warn("Unknown key "+e),void 0===i?n:i}var x=n.extend(e,{name:"nv-pushmail-theme-editor",init:function(e){e&&e.element&&(e.configuration||(e.configuration=e.element.getData("theme-configuration")),e.defaultConfiguration||(e.defaultConfiguration=e.element.getData("default-theme-configuration")),void 0===e.managerMode&&(e.managerMode=!0),e.defaultConfiguration||(e.defaultConfiguration=t.clone(e.configuration))),this.isInitialRender=!0,this._parent(e),this._inputs={}},getContent:function(){return this.elements.content||(this._buildContent(),this._refreshPreview()),this.elements.content},_get:function(t,e){return w(this.options.configuration,t,e)},_getDefault:function(t,e){return w(this.options.defaultConfiguration,t,e)},_set:function(e,n,i){var s=e.split("."),o=s.pop(),a=this._get(s);t.equals(a[o],n)||(!1!==i&&this.elements.undoRedo.push({key:e,value:t.clone(a[o])},{key:e,value:t.clone(n)}),a[o]=n,this._inputs[e]&&this._inputs[e].setValue(n),this._refreshPreview())},_onThemeExport:function(){var t,e={themeId:this.options.configuration.id,id:this.options.configuration.npdId};if(this.options.managerMode){t=y("/dashboards/pushmail-themes-download/",l.toQueryString(e))}else t=u.exportNPDPushmailTheme(e);return t.then(function(t){var e=JSON.stringify(t.theme),n=t.theme.name+".json";g(new Blob([e],{type:"application/octet-stream"}),n)})},_buildContent:function(){this.elements.configurationPopup=new s.Pointy({className:"nv-pushmail-theme-editor-configuration-popup dark",events:{onClickOutside:function(){this.hide()}}}),this.elements.configurationPopup.inject(document.body);var e=this.elements.content=t.createElement("div",{class:this.getClassNames(),html:[{tag:"div",class:this.getClassNames("-commands"),html:[this.elements.undoRedo=new m({events:{onApply:function(t){this._set(t.key,t.value,!1)}.bind(this)}}),this.elements.saveStatus=new f({className:"nv-save-status"}),this.elements.exportTheme=new i.Button({className:"dark-grey uwa-icon iconr nv-pushmail-theme-editor-export",attributes:{"data-icon":"Y"},value:_("Export this theme"),events:{onClick:this._onThemeExport.bind(this)}})]},this.elements.scroller=new d({shadows:!0})]});return this.elements.scroller.getInnerElement().addClassName(this.getClassNames("-inner")).setContent(t.createElement("div",{html:[this._buildGlobalConfigurationAccordion(),this._buildPreviewAccordion()]})),this.options.managerMode?this.elements.scroller.getContent().setStyles({height:"550px"}):this.elements.scroller.getContent().setStyles({height:"100%"}),this._resizeFrame(),e},_registerInput:function(t,e){var n=this._get(t);e.setValue(n),this._inputs[t]=e,e.onChange(function(){this._set(t,e.getValue())}.bind(this))},_buildPreviewAccordion:function(){var e=this.elements.frameContainer=t.createElement("div",{class:this.getClassNames("-preview-container"),html:[this.elements.frame=t.createElement("iframe",{class:this.getClassNames("-preview"),scrolling:"no"}),{tag:"div",class:this.getClassNames("-preview-overlay")},p.bubbles.map(this._buildBubble,this)]}),n=new o;return n.addItem("theme",{text:_("Theme"),content:[t.createElement("div",{class:this.getClassNames("-theme"),html:e})]}),n.selectItem("theme",!0),n},_buildGlobalConfigurationAccordion:function(){var e=p.globalConfiguration.reduce(function(t,e){return t[e.key]=e,t},{}),n=[],i=e.name.type({className:"light",attributes:{id:"global-name"}});this._registerInput("name",i),n.push(t.createElement("div",{class:this.getClassNames("-global-configuration-field"),html:[t.createElement("label",{for:"global-name",text:e.name.title}),i]})),delete e.name,n.push(t.createElement("div",{class:this.getClassNames("-global-configuration-field"),html:Object.keys(e).map(function(n){var i=e[n],s="global-"+n.split(".").join("-"),o=i.type({className:"light",attributes:{id:s}});return this._registerInput(i.key,o),t.createElement("div",{class:this.getClassNames("-global-configuration-sub-field"),html:[o,t.createElement("label",{for:s,html:i.title}),t.createElement("span",{class:"uwa-icon tooltip",title:i.description})]})}.bind(this))}));var s=new o;return s.addItem("general",{text:_("Configuration"),content:t.createElement("div",{class:this.getClassNames("-global-configuration"),html:n})}),s.selectItem("general",!0),s},_buildBubble:function(e){var n=t.createElement("div",{class:this.getClassNames("-bubble")});n.addEvent("click",this._displayConfigurationPopup.bind(this,n,e));var i=this.elements.frame;function s(){var t=i&&i.contentDocument&&i.contentDocument.querySelector(e.selector);if(t){var s=t.getBoundingClientRect();n.show().setStyles({top:s.top+s.height/2,left:e.left||s.left+s.width/2})}else n.hide()}return s(),i.addEvents({load:s,resize:s}),n},_displayConfigurationPopup:function(t,e){var n=this.elements.configurationPopup;n.setOption("target",t);var i=new o({className:"dark",events:{onChange:n.updatePosition.bind(n)},data:e.entries.map(function(t){var e=t.key,n=this._get(e);if(n)return{title:t.title,content:{tag:"ul",html:Object.keys(n).map(function(n){return this._buildConfigurationField(n,e+"."+n,t)},this)}};console.log("No values for "+e)},this)});n.getInnerElement().setContent({tag:"div",events:{click:c.stopPropagation},html:i}),n.show()},_buildConfigurationField:function(e,n,s){var o=p.cssPropertiesFields[e];if(o){var a=o({upload:this._upload.bind(this,s.imageSize),imageSize:s.imageSize});this._registerInput(n,a);var r=t.createElement("div",{class:this.getClassNames("-configuration-field-reset"),html:new i.Button({className:"light-border-only",value:_("Reset"),events:{onClick:function(){var t=this._getDefault(n);a.setValue(t),this._set(n,t),l()}.bind(this)}})}),l=function(){r.toggle(this._get(n)!==this._getDefault(n))}.bind(this);return l(),a.onChange(l),{tag:"li",class:this.getClassNames("-configuration-field"),html:[{tag:"div",class:this.getClassNames("-configuration-field-label"),html:[e,r]},{tag:"div",class:this.getClassNames("-configuration-field-value"),html:a}]}}console.log("Unhandled css property: "+e)},_resizeFrame:function(){var t=this.elements.frame;t.contentDocument&&t.contentDocument.body&&t.setStyle("height",t.contentDocument.body.clientHeight),this.setDelayed("frame-resize",this._resizeFrame,100)},_refreshPreview:function(){this._saveAndRender({configuration:JSON.stringify(this.options.configuration)}).done(function(t){var e=this.elements.frame;e.contentDocument.open(),e.contentDocument.write(t.rendered),e.contentDocument.close(),this._resizeFrame()}.bind(this))},_saveAndRender:function(t){var e,n=this._saveRun={},i=function(t){n!==this._saveRun||this.isInitialRender||this.elements.saveStatus.set(t)}.bind(this);(i({text:_("Saving"),className:"saving"}),this.options.managerMode)?e=y("/dashboards/pushmail-themes-save/"+this._get("npdId"),l.toQueryString(t)):e=u.saveNPDPushmailTheme(t);return e.then(i.bind(null,{text:_("Done"),className:"done",duration:3e3}),i.bind(null,{text:_("Error"),className:"error",duration:3e3})).done(function(){this.isInitialRender=!1}.bind(this)),e},_upload:function(t,e){var n;return this.options.managerMode?((n=new FormData).append("file",e.files[0]),t&&(t.width&&n.append("width",t.width),t.height&&n.append("height",t.height)),y("/dashboards/pushmail-themes-upload/"+this._get("npdId"),n)):(n={file:e.files[0]},t&&(t.width&&(n.width=t.width),t.height&&(n.height=t.height)),u.uploadNPDPushmailTheme(n))}});return a.register(x),x}.apply(e,i))||(t.exports=s)},function(t,e,n){"use strict";var i,s;i=[n(1),n(10),n(124),n(8)],void 0===(s=function(t,e,n,i){var s=e.extend({name:"nv-clearable",init:function(t){this._parent(t),this.elements.input=this._buildInput(Object.assign({_root:!1,events:{onChange:this.dispatchEvent.bind(this,"onInnerInputChange")}},t))},_buildInput:function(){},_buildContent:function(){this.elements.clearButton=new i.Button({className:"light-grey icon-only forbidden",_root:!1,events:{onClick:function(){this.setValue(""),this.dispatchEvent("onChange")}.bind(this)}}),this.elements.content=t.createElement("div",{class:this.getClassNames(),html:[{tag:"div",class:this.getClassNames("-input"),html:[this.elements.input,this.elements.clearButton]},this.options.legend&&{tag:"div",class:this.getClassNames("-legend"),html:this.options.legend}]})},getContent:function(){return this.elements.content||this._buildContent(),this.elements.content},getValue:function(){return this.elements.input.getValue()},setValue:function(t){this.elements.input.setValue(t)},onInnerInputChange:function(){this.dispatchEvent("onChange")}}),o=s.extend({name:"nv-clearable-colorpicker",_buildInput:function(t){return new n(t)}}),a=s.extend({name:"nv-clearable-file-input",_buildInput:function(t){return new i.File(Object.assign({buttonOnly:!0},t))},_buildContent:function(){this._parent(),this.elements.content.addContent(this.elements.error=t.createElement("div",{class:this.getClassNames("-error")}))},onInnerInputChange:function(){var t=this._parent.bind(this);if(!this.options.upload)return t();this._clearError(),this.setDisabled(!0),this.options.upload(this.elements.input.getInputElement()).done(function(e){this.setValue(e.url),this.setDisabled(!1),t()}.bind(this),function(t){this.elements.error.setText(t.message),this.setDisabled(!1)}.bind(this))},getValue:function(){return this.options.upload?this._value:this._parent()},setValue:function(t){this._parent(),this._value=t,this._clearError()},_clearError:function(){this.elements.error&&this.elements.error.empty()},setDisabled:function(t){this.elements.input.setDisabled(t),this.elements.clearButton.setDisabled(t)}});function r(t){return function(e){var n=t.input(e),i={};function s(e,s){i[e]=t[e]?t[e].bind(t,n):s}return s("getValue",function(){return n.getValue()}),s("setValue",function(t){n.setValue(t)}),s("onChange",function(t){n.addEvent("onChange",t)}),s("inject",function(t){n.inject(t)}),i}}return{color:r({input:function(t){return new n(t)},getValue:function(t){return"#"+t.getValue()}}),colorTransparent:r({input:function(t){return new o(t)},getValue:function(t){return"#"+t.getValue()}}),checkbox:r({input:function(t){return new i.Checkbox(Object.assign({className:"dark"},t))},getValue:function(t){return t.isChecked()},setValue:function(t,e){t.check(Boolean(e))}}),text:r({input:function(t){var e=new i.Text(t),n=e.getInputElement();return n.addEvent("keydown",function(){clearTimeout(void 0),setTimeout(function(){e.dispatchEvent("onChange",[e.getValue()])},1e3)}),n.addEvent("change",function(){clearTimeout(void 0)}),e}}),select:function(t){return r({input:function(e){return new i.Select(Object.assign({options:t.map(function(t){return{label:t,value:t}})},e))},getValue:function(t){return t.getValue()[0]}})},imageFile:r({input:function(t){var e;return t&&t.imageSize&&(e=t.imageSize.height?_("Size: {0}x{1}px").format(t.imageSize.width,t.imageSize.height):_("Width: {0}px").format(t.imageSize.width)),new a(Object.assign({legend:[_("Supported: png, jpg or gif"),{tag:"br"},e&&[e,{tag:"br"}],_("Max: {0}KB").format(300)]},t))}})}}.apply(e,i))||(t.exports=s)},function(t,e,n){},function(t,e,n){"use strict";var i,s;i=[n(11),n(303)],void 0===(s=function(t,e){return t.Abstract.extend({_mutateValue:function(t,e){return!!this._parent(t,e)||"initialValue"===t},_buildControl:function(t){return new e(t)}})}.apply(e,i))||(t.exports=s)},function(t,e,n){var i,s;i=[n(1)],void 0===(s=function(t){"use strict";var e;return e={"uwa-integer":function(e){var n=Number(e);if(Math.round(n)!==n)throw Error(t.i18n("“{0}” is not an integer.").format(e))},"uwa-number":function(e){var n=Number(e);if(!isFinite(n))throw Error(t.i18n("“{0}” is not a number.").format(e))},"uwa-stringlength":function(e,n){if(!e||e.length<n.min)throw n.min>1?Error(t.i18n("Please enter at least {0} characters.").format(n.min)):Error(t.i18n("Please enter at least {0} character.").format(n.min));if(e.length>n.max)throw n.max>1?Error(t.i18n("Please enter at most {0} characters.").format(n.max)):Error(t.i18n("Please enter at most {0} character.").format(n.max))},"uwa-arraylength":function(e,n){if(!e||e.length<n.min)throw n.min>1?Error(t.i18n("Please select at least {0} options.").format(n.min)):Error(t.i18n("Please select at least {0} option.").format(n.min));if(e.length>n.max)throw n.max>1?Error(t.i18n("Please select at most {0} options.").format(n.max)):Error(t.i18n("Please select at most {0} option.").format(n.max))},"uwa-twitterusername":function(e){if(!/^@\w+$/.test(e))throw Error(t.i18n("“{0}” is not a valid Twitter username.").format(e))}},t.namespace("Controls/SchemaForm/Validators",e,t)}.apply(e,i))||(t.exports=s)},function(t,e,n){"use strict";var i,s;i=[n(59)],void 0===(s=function(t){return{value:[],_formats:{hashtag:{prefix:"#",split:/[,;\s]+/g,regexp:/^#?[\w]+$/,error:_("Please enter a valid hashtag (e.g., #hashtag)")},hashtag_tumblr:{prefix:"#",split:/[,;]+/g,regexp:/^#?[\w ]+$/,error:_("Please enter a valid hashtag (e.g., #hashtag)")},email:{prefix:"",split:/[, ;]+/g,regexp:/^[\w_.+-\\']+@[\w-]+\.[\w-.]+$/,error:_("Please enter a valid email address (e.g., me@domain.com)")},tel:{prefix:"",split:/[,;\s]+/g,regexp:/^(\s*\+\d[\d\s]+[,;]*)+/,error:_("Please enter a valid phone number")},restricted_tel:{prefix:"",split:/[,;\s]+/g,regexp:/^(\s*\+(33|1\s*(201|202|203|205|206|207|208|209|210|212|213|214|215|216|217|218|219|220|224|225|227|228|229|231|234|239|240|248|251|252|253|254|256|260|262|267|269|270|272|274|276|281|283|301|302|303|304|305|307|308|309|310|312|313|314|315|316|317|318|319|320|321|323|325|327|330|331|332|334|336|337|339|346|347|351|352|360|361|364|380|385|386|401|402|404|405|406|407|408|409|410|412|413|414|415|417|419|423|424|425|430|432|434|435|440|442|443|447|458|463|464|469|470|475|478|479|480|484|501|502|503|504|505|507|508|509|510|512|513|515|516|517|518|520|530|531|534|539|540|541|551|559|561|562|563|564|567|570|571|573|574|575|580|585|586|601|602|603|605|606|607|608|609|610|612|614|615|616|617|618|619|620|623|626|628|629|630|631|636|641|646|650|651|657|660|661|662|667|669|678|680|681|682|701|702|703|704|706|707|708|712|713|714|715|716|717|718|719|720|724|725|727|730|731|732|734|737|740|743|747|754|757|760|762|763|765|769|770|772|773|774|775|779|781|785|786|801|802|803|804|805|806|808|810|812|813|814|815|816|817|818|828|830|831|832|843|845|847|848|850|854|856|857|858|859|860|862|863|864|865|870|872|878|901|903|904|906|907|908|909|910|912|913|914|915|916|917|918|919|920|925|928|929|930|931|934|936|937|938|940|941|947|949|951|952|954|956|959|970|971|972|973|975|978|979|980|984|985|986|989)|44|49)[\d\s]+[,;]*)+/,error:_("Please enter a valid phone number")},twitter_account:{prefix:"@",split:/[,;\s]+/g,regexp:/^@?[\w]+$/,error:_("Please enter a valid twitter account (e.g., @account)")},default:{prefix:"",split:/\n/g,regexp:/^[^"]+$/,error:_("Please use only letters")}},isEmpty:function(){var t=this.getValue();return Array.isArray(t)&&0===t.length||!Array.isArray(t)},getRegexp:function(){var t=this.options.format||"default";return this._formats[t]?this._formats[t].regexp:this._formats.default.regexp},getPrefix:function(){var t=this.options.format||"default";return this._formats[t]?this._formats[t].prefix:this._formats.default.prefix},getSplit:function(){var t=this.options.format||"default";return this._formats[t]?this._formats[t].split:this._formats.default.split},getFormatError:function(){var t=this.options.format||"default";return this._formats[t]?this._formats[t].error:this._formats.default.error},getDefault:function(){return[]},setInitialValue:function(t){this.value=t,this.wordsList=t,this.displayValues()},getValue:function(){return this.value},getDisplayValue:function(){return Array.isArray(this.value)?this.value.map(function(t){return'"'+t+'"'}).join(", "):""},displayValues:function(){this.value.forEach(function(t,e){this.createWord(t,e)},this)},setValue:function(t){t&&Array.isArray(t)?(this.value=t,this.wordsList=t):this.value=this.wordsList,this.removeInputError(this.input),this.elements.wordsContainer.empty(),this.displayValues(),0===this.value.length&&(this.value=null),this.dispatchEvent("onChange",[this.getValue()])},createWord:function(e,n){this.elements.wordsContainer.addContent(new t({value:e,className:"green",closable:!0,events:{onClose:function(){this.wordsList.splice(n,1),this.setValue()}.bind(this)}}))},onAddWord:function(){var t,e=[],n=[],i=this.elements.input.getValue();this.elements.input.setValue(""),this.elements.input.getInputElement().blur(),i.split(this.getSplit()).forEach(function(i){(t=this.checkWord(i)).error&&e.push(t.error),t&&""!==t&&n.push(t)},this),e.length>0?this.addInputError(e.join(". ")):(this.removeInputError(this.input),this.wordsList=this.wordsList.concat(n),this.setValue())},checkWord:function(t){var e=this.getRegexp(),n=this.getPrefix();return t.test(e)?(t=t.charAt(0)===n?t:n+t,this.wordsList.indexOf(t)<0?t:{error:_("You've already added the same value")}):{error:this.getFormatError()}}}}.apply(e,i))||(t.exports=s)},function(t,e,n){"use strict";var i,s;i=[n(1),n(8),n(32),n(413)],void 0===(s=function(t,e,n,i){return n.extend(i,{name:"schemaform-multiplestring",getContent:function(){return this.elements.container||(this.elements.container=t.createElement("div",{class:this.getClassNames()}),this.wordsList=[],this.buildWordsSelector()),this.elements.container},onAddWord:function(){var t,e=[],n=[],i=this.elements.input.getValue();this.elements.input.setValue(""),this.elements.input.getInputElement().blur(),i.split(this.getSplit()).forEach(function(i){(t=this.checkWord(i)).error&&e.push(t.error),t&&""!==t&&n.push(t)},this),e.length>0?this.addInputError(e.join(". ")):(this.removeInputError(this.input),this.wordsList=this.wordsList.concat(n),this.setValue(this.wordsList))},buildWordsSelector:function(){this.elements.input=new e.Text,this.elements.input.addEvent("onChange",this.onAddWord.bind(this)),this.elements.input.addEvent("onBlur",this.onAddWord.bind(this)),this.elements.container.addContent(this.elements.input,this.elements.addWordBtn=t.createElement("a",{class:"detail-word-add uwa-icon",title:_("Add"),"data-icon":"3"}),this.elements.wordsContainer=t.createElement("div",{class:"detail-words"}))}})}.apply(e,i))||(t.exports=s)},function(t,e,n){"use strict";var i,s;i=[n(33)],void 0===(s=function(t){return t.extend({device_key:"smoke_co_alarms",endpoint:"https://developer-api.nest.com/",service:"nest",errorLabel:_("No devices found"),isCompliant:function(t){return t.devices&&t.devices[this.device_key]},getFormatedOptions:function(t){var e=[],n=t.structures,i=t.devices[this.device_key];return Object.keys(i).forEach(function(t){var s=i[t];e.push({label:s.name+" - "+n[s.structure_id].name,value:t})},this),e}})}.apply(e,i))||(t.exports=s)},function(t,e,n){"use strict";var i,s;i=[n(1),n(18),n(8),n(71),n(43),n(58)],void 0===(s=function(t,e,n,i,s,o){return{icons:{tabs:"v",feeds:"7",analytics:"ų",apps:"4",deleted:"d"},init:function(t){this._parent(t),this.tabs=[],this.widgets={},this.fetchWidgets().done(this.refreshListDisplay.bind(this))},getCategory:function(t){switch(t.toLowerCase()){case"rssreader":case"smartfilter":case"extendedvibes":case"multiplefeeds":return"feeds";case"searchtrends":case"analyze":case"socialpack_analytics":case"socialpack_compare":return"analytics";default:return"apps"}},getExtraSuggestions:function(){return[]},getAdaptor:function(){var e=this;return s.extend({getSuggestions:function(t){var n=e.getExtraSuggestions();return t=t.toLowerCase(),e.tabs.map(function(i,s){var o={tabs:[],feeds:[],analytics:[],apps:[]};i.label.toLowerCase().includes(t)&&o.tabs.push({id:i.value,fullValue:i.label.unescapeHTML(),category:"tabs",group:s}),i.modules.filter(function(e){return(e.label||e.name).toLowerCase().includes(t)}).map(function(t){return e.widgets[t.value]}).map(function(t){t.group=s,o[t.category].push(t)}),["tabs","feeds","analytics","apps"].map(function(t){n=n.concat(o[t])})}),n},renderSuggestion:function(e){return[t.createElement("span",{text:e.fullValue||e.name}),t.createElement("span",{styles:{color:"darkgray"},text:e.extraLabel||""})]},renderSubCategory:function(e,n){return t.createElement("div",{class:"sub-category uwa-icon "+e,html:n.map(function(e){return t.createElement("div",{class:"suggestion",title:e.fullValue,html:this.renderSuggestion(e)})}.bind(this))})},renderSuggestions:function(n){var i=this,s=(n=n.slice()).splice(0,e.getExtraSuggestions().length),o=n.reduce(function(t,e){return t[e.group]||(t[e.group]={tabs:[],feeds:[],analytics:[],apps:[]}),t[e.group][e.category].push(e),t},[]);return s.map(function(e){return t.createElement("div",{class:"category",html:i.renderSubCategory(e.category,[e])})}).concat(o.filter(function(t){return t}).map(function(e){return t.createElement("div",{class:"category",html:["tabs","feeds","analytics","apps"].filter(function(t){return e[t].length}).map(function(t){return i.renderSubCategory(t,e[t])})})}))}})},getContent:function(){return this.elements.container||(this.elements.container=t.createElement("div",{class:"app-selector",html:[t.createElement("div",{class:"nv-schemaform-field uwa-schemaform-field",html:[t.createElement("div",{class:"uwa-schemaform-field-title",text:_("Add apps")}),t.createElement("div",{class:"nv-schemaform-field-wrapper uwa-schemaform-field-wrapper",html:[this.elements.input=new i({className:"app-selector-autocomplete",inputOptions:{attributes:{placeholder:_("Type to browse")}},adaptor:this.getAdaptor(),events:{onSetSuggestion:this.addApp.bind(this)}})]})]}),t.createElement("div",{class:"nv-schemaform-field uwa-schemaform-field",html:[t.createElement("div",{class:"uwa-schemaform-field-title",text:_("Selected apps")}),this.elements.listContainer=t.createElement("ol",{class:"app-selector-reorderable-list"})]})]}),new o.Move({container:this.elements.listContainer,delegate:"li.app-selector-item .grab",centerHandles:!0,start:function(t){t.target=t.target.getClosest("li.app-selector-item")},handles:function(e){return e.target.addClassName("dragged"),e.placeholder=t.createElement("li",{class:"app-selector-item placeholder"}),e.placeholder.setStyle("height",e.target.getSize().height+"px"),e.target},enter:function(t){return t.placeholder},stop:function(t){t.handles.removeClassName("dragged"),t.handles.setStyles({left:null,top:null}),t.placeholder.isInjected()&&this.handleDrop(t)}.bind(this)})),this.elements.container},addApp:function(t){var e;if(this.elements.input.setValue(""),"tabs"===t.category){var n=this.tabs.filter(function(e){return String(e.value)===String(t.id)})[0];if(!n)return;var i=[{type:"separator",value:n.label}].concat(n.modules.map(function(t){return this.formatValue(t.value)}.bind(this)));e=this.getValue().concat(i)}else e="separator"===t.category?{value:"",type:"separator"}:"contentAccessControl"===t.category?{type:"contentAccessControl",value:{usePassword:!1,password:"",useLeadForm:!0,sendTo:""}}:this.formatValue(t.id);this.setValue(e)},editApp:function(e,n,i){var s=t.clone(this.getValue());s[e][n]=i,this.setValue(s)},removeApp:function(e){var n=t.clone(this.getValue());n.splice(e,1),this.setValue(n)},handleDrop:function(t){t.placeholder.grab(t.handles,"after").destroy();var e=this.getValue(),n=this.elements.listContainer.getElements(".app-selector-item").map(function(t){return e[t.getAttribute("index")]});this.setValue(n)},renderLineItemTitle:function(e,i){var s={class:"app-selector-item-title"};if("separator"===e.type){var o=new n.Text;o.setValue(e.name),o.addEvent("onChange",function(){this.editApp(i,"value",o.getValue())}.bind(this)),s.html=o}else e.extraLabel?s.html=t.createElement("label",{html:[t.createElement("span",{text:e.name}),t.createElement("span",{styles:{color:"darkgray"},text:e.extraLabel})]}):s.text=e.name;return t.createElement("div",s)},renderLineItemIcon:function(e){return"widget"===e.type?t.createElement("div",{class:"uwa-icon","data-icon":this.icons[e.category]}):""},refreshListDisplay:function(){this.elements.listContainer.empty(),this.getValue().length?t.clone(this.getValue()).map(function(t,e){this.renderListItem(t,e).inject(this.elements.listContainer)}.bind(this)):t.createElement("li",{class:"app-selector-item placeholder",html:[t.createElement("div",{class:"app-selector-item-title",text:_("No apps selected")})]}).inject(this.elements.listContainer)},setValue:function(t){this.value||(this.value=[]),Array.isArray(t)?this.value=t:this.value.push(t),this.value.length||(this.value=null),this.initialized&&this.refreshListDisplay(),this.dispatchEvent("onChange",[this.value])},getValue:function(){return this.value||[]}}}.apply(e,i))||(t.exports=s)},function(t,e,n){"use strict";var i,s;i=[n(0),n(5),n(11),n(46),n(34),n(180)],void 0===(s=function(t,e,n,i,s,o){var a=t.h;return e.extend({init:function(t){this._parent(t),this._onPeriodChange=this._onPeriodChange.bind(this),this._onRangeChange=this._onRangeChange.bind(this)},render:function(t){return a(s,{title:_("Period"),className:"date-range-form"},a(s.Item,null,a("div",{style:{fontSize:"14px"}},a(o.PreactComponent,{title:"",enableAny:!1,calendarOptions:{className:"dark"},from:t.source.getFrom(),to:t.source.getTo(),events:{onChangeRange:this._onPeriodChange}}))),a(s.Item,{title:_("Range")},a("div",{style:{fontSize:"14px"}},a(n.Select,{options:i.getRangeValues(),value:t.source.getRange(),events:{onChange:this._onRangeChange}}))))},_onPeriodChange:function(t){this.props.onSourceChange({from:t.from,to:t.to})},_onRangeChange:function(t){var e=t.target.value;e&&e!==this.props.source.getRange()&&this.props.onSourceChange({range:e})}})}.apply(e,i))||(t.exports=s)},function(t,e,n){"use strict";var i,s;i=[n(1),n(9),n(3),n(2),n(0),n(278),n(5),n(162),n(123),n(80),n(227)],void 0===(s=function(t,e,n,i,s,o,a,r,l,c,u){var h=s.h,d=c.SplitNode,p=i.isInScreenshot()?function(t){return t}:o.spring,m=function(t){return h(r,{start:t.onDragStart,style:{flex:1,cursor:t.vertical?"col-resize":"row-resize",display:"flex",flexDirection:t.vertical?"row":"column",justifyContent:"center"}},h("div",{style:Object.assign({backgroundColor:"#b5b5b5"},t.vertical?{width:4}:{height:4})}))},f=e.extend({init:function(t,e,n,i){this._grid=t,this._node=e,this._rect=n,this._startPoint=i,this._rootNode=this._grid.props.rootNode},_computePosition:function(t){var e=this._node.isSplitVertical()?"x":"y",i=n.getPosition(t)[e]-this._startPoint[e];return{rootNode:u.resizeNode(this._rootNode,this._node,this._rect,i)}},snap:function(t){this._grid.setState({resize:this._computePosition(t)})},move:function(t){this._grid.setState({resize:this._computePosition(t)})},stop:function(){this._grid.props.onRootChange(this._grid.state.resize.rootNode)},reset:function(){this._grid.setState({resize:!1})}});return a.extend({init:function(t){this._parent(t),this.state={resize:!1,width:0,height:0}},getBaseRect:function(t){var e=t?this.base.getBoundingClientRect():{top:0,left:0};return this.state.height&&this.state.width&&{top:e.top,left:e.left,height:this.state.height,width:this.state.width,margin:void 0!==this.props.margin?this.props.margin:20}},renderCellConfig:function(t,e,n,i){var s=Object.assign({node:n,rect:i},this.props.renderCellProps),o=this.props.renderCell(s),a=i.top,r=i.left,l=i.width,c=i.height;if(this.props.temporaryRootNode&&e.length){for(var h,d=0;d<e.length&&!(h=u.getPosition(this.props.rootNode,e[d]));d++);e[0].isSplitVertical()?(i.left+i.width===t.left+t.width?r+=i.width:i.left!==t.left&&(r=t.left+t.width*h),l=0):(i.top+i.height===t.top+t.height?a+=i.height:i.top!==t.top&&(a=t.top+t.height*h),c=0)}return{key:n.id,data:{cell:o,willEnter:{opacity:0,top:a,left:r,width:l,height:c},willLeave:{opacity:p(0),width:p(l),height:p(c),top:p(a),left:p(r)}},style:{opacity:p(1),top:p(i.top),left:p(i.left),height:p(i.height),width:p(i.width)}}},renderResizeHandleConfig:function(t,e){var i=t.isSplitVertical(),s=u.getRect(t,0,e),o=e.margin,a={top:e.top+(i?0:s.height+(e.margin-o)/2),left:e.left+(i?s.width+(e.margin-o)/2:0),width:i?o:Math.min(50,e.width),height:i?Math.min(50,e.height):o};return{key:"resize-"+t.id,data:{cell:h(m,{vertical:i,onDragStart:!this.state.resize&&function(e){return new f(this,t,this.getBaseRect(!0),n.getPosition(e))}.bind(this)}),willEnter:Object.assign({opacity:0},a),willLeave:Object.assign({opacity:p(0)},a)},style:{opacity:p(1),width:a.width,height:a.height,top:p(a.top),left:p(a.left)}}},renderConfig:function(t,e,n,i,s){n instanceof d?(this.props.resizable&&s.push(this.renderResizeHandleConfig(n,i)),n.getChildren().forEach(function(o,a){this.renderConfig(t,[n].concat(e),o,u.getRect(n,a,i),s)},this)):s.push(this.renderCellConfig(t,e,n,i))},shouldComponentUpdate:function(e,n){return!t.equals(this.state,n)||!t.equals(this.props,e)},render:function(t,e){var n=[];if(e.height&&e.width){var i=this.getBaseRect();this.renderConfig(i,[],e.resize?e.resize.rootNode:t.temporaryRootNode||t.rootNode,i,n)}return h(o.TransitionMotion,{willLeave:function(t){return t.data.willLeave},willEnter:function(t){return t.data.willEnter},styles:n},function(t){return h(l,{style:{flex:"1",position:"relative",overflow:"hidden"},onResize:this.setState.bind(this)},t.map(function(t){return h("div",{key:t.key,style:Object.assign({position:"absolute",display:"flex"},t.style)},t.data.cell)}))}.bind(this))}})}.apply(e,i))||(t.exports=s)},function(t,e,n){"use strict";var i,s;i=[n(56),n(3),n(0),n(5),n(162),n(14),n(420),n(4)],void 0===(s=function(t,e,n,i,s,o,a,r){var l=n.h,c=o.namespace("FacetsCell").addRules({facetColor:{width:"40px",height:"40px",display:"inline-block",transition:"opacity 0.4s, border-width 0.4s, margin 0.4s, border-color 0.4s",verticalAlign:"top"},iconsRoot:{position:"relative",flex:1,display:"flex",alignItems:"center",justifyContent:"center",backgroundColor:"#828282",overflow:"hidden",whiteSpace:"nowrap",transition:"background-color .4s",cursor:"move"},iconsSetting:{position:"absolute",top:16,right:18,color:"#e0e0e0",cursor:"pointer",":hover":{color:"#fff"}},iconsIcon:{position:"relative",fontFamily:"uwa-icons",lineHeight:1,textAlign:"center",display:"inline-block",transition:"font-size 0.4s, margin-left 0.4s, width 0.4s",verticalAlign:"top"}});function u(e){if(u.cache.hasOwnProperty(e))return u.cache[e];var n=t.parse(e),i=n.cloneWith({l:.9*n.toObject().l}).toHexString();return u.cache[e]=i,i}u.cache={};var h=function(t){var e=t.overFacet===t.facet;return l(s,{start:function(e){return t.onDragStart&&t.onDragStart(t.facet,e)},class:c("facetColor"),style:{backgroundColor:t.facet.getColor(),cursor:t.onDragStart?"move":"",opacity:!t.overFacet||e?1:.4,border:e?"5px solid white":"2px solid "+u(t.facet.getColor()),margin:e?"4px 4px -3px -3px":"7px 7px 0 0"},onMouseEnter:t.onOver&&t.onOver.bind(this,t.facet),onMouseLeave:t.onOver&&t.onOver.bind(this,null)})};return i.extend({init:function(t){this._parent(t),this._onSettingsClick=this._onSettingsClick.bind(this),this._onFacetDragStart=this._onFacetDragStart.bind(this),this._onCellDragStart=this._onCellDragStart.bind(this)},render:function(t){var e=t.node?t.node.getFacets():[],n=Boolean(e.length),i=t.width-14,s=(t.height-14)/2;return l("div",{style:{flex:1,minWidth:0,padding:7,transition:"background-color .4s",backgroundColor:"dropable"===t.dropMode?t.over?n?"#cecece":"#fff":n?"#ced5bd":"#e0e9cb":"not-dropable"===t.dropMode?"#707070":"#898989",display:"flex",flexDirection:"column",cursor:"normal",zIndex:100}},"dropable"===t.dropMode||"not-dropable"===t.dropMode?this.renderDropZone({width:i,height:s,over:t.over,dropMode:t.dropMode,text:t.text}):n&&this.renderIcons(i,s),n&&[!t.dropMode&&l("div",{"data-icon":"ç",class:c("iconsSetting")+" uwa-icon",onClick:this._onSettingsClick}),l(a,{node:t.node,darkBackground:!0}),l("div",{style:{minHeight:51,opacity:"dropable"===t.dropMode||"not-dropable"===t.dropMode?.4:1}},e.map(function(e){return l(h,{key:e.cid,facet:e,onDragStart:this._onFacetDragStart,onOver:t.onFacetOver,overFacet:t.overFacet})},this))])},renderIcons:function(e,n){var i=r.unique(this.props.node.getFacets().map(function(t){return t.getView().icon}));i.sort(function(t,e){return"ų"===e?1:-1});var o=20+15*(i.length-1),a=20+2*(i.length-1),u=Math.min(e/o,n/a);return l(s,{class:c("iconsRoot"),start:this._onCellDragStart},l("div",null,i.map(function(e,n){return l("div",{class:c("iconsIcon"),style:{zIndex:i.length-n,width:20*u,fontSize:20*Math.floor(u)+"px",marginLeft:0===n?0:-10*u,paddingTop:2*n*u,color:t.fromHSL(0,0,80-n/(i.length-1)*43).toRGBString()}},e)})))},renderDropZone:function(t){var e="dropable"===t.dropMode,n=void 0===t.width||void 0===t.height||t.width<200||t.height<200;return l("div",{style:{transition:"background-color 0.4s",backgroundColor:e?t.over?"#fff":"#e0e9cb":"#666666",textAlign:"center",overflow:"hidden",flex:1}},l("div",{style:{fontFamily:"uwa-icons",fontSize:n?"60px":"80px",marginTop:n?0:"18px",color:e?"#85be00":"#999999",lineHeight:n?"72px":"90px",transform:e?"":"rotate(45deg)",margin:e?0:"3px 0 -3px 15px"}},"3"),l("div",{style:{color:e?"#3e3e3e":"#999999",fontSize:n?"12px":"14px",lineHeight:1.4,padding:10}},t.text))},_onFacetDragStart:function(t){return 1===this.props.node.getFacets().length?this._onCellDragStart():this.props.onFacetDragStart(this.props.node.cloneWith({id:null,facets:[t]}))},_onCellDragStart:function(t){return this.props.onFacetDragStart(this.props.node,t&&"ctrl"===e.whichKey(t))},_onSettingsClick:function(){this.props.onSettingsClick(this.props.node)}})}.apply(e,i))||(t.exports=s)},function(t,e,n){"use strict";var i,s;i=[n(0),n(14)],void 0===(s=function(t,e){var n=t.h,i=e.namespace("Analyze_GraphCaption").addRules({root:{textAlign:"right",lineHeight:"22px",borderTop:"1px solid #ececec",margin:"0 10px",padding:"0 4px",cursor:"default",whiteSpace:"nowrap",textOverflow:"ellipsis",overflow:"hidden"},darkBackground:{borderTop:"none",margin:0},link:{color:"inherit"}});return function(t){var e=t.node;return e.getCaption()&&n("div",{class:i("root",t.darkBackground&&"darkBackground")},e.getURL()?n("a",{class:i("link"),href:e.getURL(),target:"_blank"},e.getCaption()):e.getCaption())}}.apply(e,i))||(t.exports=s)},function(t,e,n){"use strict";var i,s;i=[n(1),n(56),n(10),n(164),n(46)],void 0===(s=function(t,e,n,i,s){return n.extend({name:"nv-highchart-graph",options:{size:{width:250,height:250}},init:function(e){this._parent(e),this.elements.container=t.createElement("div",{class:this.getClassNames()}),this.notePins={}},isNotesVisible:function(){return!0},inject:function(){this._parent.apply(this,arguments),this.build()},redraw:function(){this.graph.destroy(),this.build()},resize:function(t){this.options.size=t,this.graph.setSize(t.width,t.height,!1)},build:function(){var t=this.getChartOptions();this.graph=new i.Chart(t)},getChartOptions:function(){return{tooltip:this.getTooltipOptions(),chart:{height:this.options.size.height,width:this.options.size.width,renderTo:this.elements.container,animation:{duration:150},spacing:[5,10,5,10]},plotOptions:{series:{cursor:"pointer",shadow:!1,animation:!1,states:{hover:{brightness:-.3}},dataLabels:{enabled:!1}}},title:{text:""},legend:{enabled:!1},series:this.getSeriesOptions(),colors:this.options.facetsNode.getFacets().map(function(t){return t.getColor()})}},getSeriesOptions:function(){var t=this,e=[];return this.options.facetsNode.getFacets().forEach(function(n){var i=n.getStatsForHighchart({logarithmic:this.options.logarithmic}),s=n.getView(),o={type:s.highchartsOptions&&s.highchartsOptions.type||s.name,data:i,stacking:s.highchartsOptions&&s.highchartsOptions.stacking,name:n.getTitle(),color:n.getColor(),facet:[n],yAxis:"left"===n.getAlignTo()?0:1,connectNulls:n.connectNonNulls(),point:{events:{click:function(){this.stat&&t.dispatchEvent("onPointClick",[this.stat])},mouseOver:function(){this.stat&&t.dispatchEvent("onMouseOverNote",[this.stat.getNote(),!0])},mouseOut:function(){this.stat&&t.dispatchEvent("onMouseOverNote",[this.stat.getNote(),!1])}}}};this.options.temporaryLastValue&&(o.zoneAxis="x",o.zones=this.getZoneOptions(i,n.getColor())),"spline"===n.getView().name&&(o.zIndex=1),e.push(o)}.bind(this)),e},getZoneOptions:function(t,n){return n=e.parse(n).cloneWith({alpha:.5}),[{value:t.length-2},{color:n.toRGBString()}]},getTooltipOptions:function(){return{enable:!1}},setFacetHighlite:function(t,e){var n=e?s.brightenColor(t.getColor()):t.getColor();this.graph&&this.graph.series.forEach(function(i){i.options.facet&&i.options.facet[0]===t&&(i.setState(e?"hover":""),i.graph&&i.graph.attr({stroke:n}),i.points.forEach(function(t){t.graphic&&t.graphic.attr({fill:n})}),this.notePins[t.cid]&&this.notePins[t.cid].map(function(t){this.setNotePinHighlite(t,i.color,e)}.bind(this)))}.bind(this))},setNoteHighlite:function(t,e){this.graph&&this.graph.series.forEach(function(n){if(n.options.facet){var i=n.options.facet[0].cid;this.notePins[i]&&this.notePins[i].forEach(function(i){i.element.id===t.getKey()&&this.setNotePinHighlite(i,n.color,e)}.bind(this))}}.bind(this))},setNotePinHighlite:function(t,e,n){t.css({color:n?s.brightenColor(e):e})}})}.apply(e,i))||(t.exports=s)},function(t,e,n){"use strict";var i,s;i=[n(1),n(13),n(10),n(23),n(82),n(4),n(87),n(46),n(228),n(98)],void 0===(s=function(t,e,n,i,s,o,a,r,l,c){return n.extend({name:"nv-hbar-graph",options:{size:{height:250}},init:function(e){this._parent(e),this.elements.scroller=new i({shadows:!0}),this.elements.container=t.createElement("div",{class:this.getClassNames(),html:this.elements.scroller}),this.elements.innerContainer=this.elements.scroller.getInnerElement(),this.formatStats(),this.buildContent()},inject:function(){this._parent.apply(this,arguments),this.updateSize()},resize:function(t){this.options.size=t,this.updateSize()},updateSize:function(){this.elements.scroller.getContent().setStyle("height",this.options.size.height-8)},redraw:function(){this.elements.innerContainer.empty(),this.buildContent()},isStacked:function(){return!1},isNotesVisible:function(){return!0},formatStats:function(){var t,n=this.options.facetsNode.getFacetsAggregationMethod();this.stats=[],n?t=this.options.facetsNode.getFacets().map(function(t){return c.asStat(n,t)}):(t=[],this.options.facetsNode.getFacets().forEach(function(e){t=t.concat(e.getStats())})),t=r.sort(t,{type:"bymethod",label:"value",order:"desc"}),this.max=t[0].getValue(),t.forEach(function(e){var n=[];t.forEach(function(t){t.added||e.getKey()!==t.getKey()||(n.push(t),n.length>1&&(t.added=!0))}),e.added||(n.length>1||this.isStacked()?this.stats.push(n):1===n.length&&this.stats.push(n[0]))}.bind(this)),this.stats.forEach(function(t){(t=e.splat(t)).forEach(function(t){delete t.added})})},buildContent:function(){this.stats.slice(0,50).forEach(function(e){if(t.is(e,"array")){var n=t.createElement("h3",{html:[this.getBarTitle(e[0])]}).inject(this.elements.innerContainer);e[0].getFavicon()&&this.getFavicon(e[0]).inject(n),e.forEach(function(t,n){var i=this.getBarElement(t,!0).inject(this.elements.innerContainer);n===e.length-1&&i.addClassName("last-grouped-bar")}.bind(this))}else this.getBarElement(e).inject(this.elements.innerContainer)}.bind(this))},getBarTitle:function(t){return t.getLabel()+(t.getKeyType()?" ("+t.getKeyType()+")":"")},getFavicon:function(e){if(e.getFavicon()){this.elements.container.addClassName("with-favicon");var n=t.createElement("img",{src:e.getFavicon()});if(e.getDomain()){var i=t.createElement("a",{href:"http://"+e.getDomain(),target:"_blank",title:_("Open website")});return n.inject(i),i}return n}return""},getBarElement:function(e,n){var i,s=t.createElement("div",{class:"bar"});!n&&e.getFavicon()&&this.getFavicon(e).inject(s),a.set(s,"data",{stat:e});var o=t.createElement("div",{class:"bar-inner",styles:{width:this.getWidth(e),"background-color":e.getColor()},html:[i=this.makeInnerValueContainer(e)]}).inject(s);return t.createElement("span",{class:"bar-value bar-colored-value",text:e.getFormatedValue(),styles:{color:e.getColor()}}).inject(s),n||(t.createElement("h4",{html:this.getBarTitle(e)}).inject(o),t.createElement("h4",{html:this.getBarTitle(e),styles:{width:this.getMaxWidth()+"%"}}).inject(s,"top")),e.getNote()&&!this.options.preview&&(this.elements.container.addClassName("with-notes"),this.getNoteElement(e.getNote(),e,!0).inject(s),this.getNoteElement(e.getNote(),e,!1).inject(i)),this.addTooltip(s,e),this.attachEvents(s,e),s},getNoteElement:function(e,n,i){return t.createElement("span",{class:"uwa-icon note-pin"+(i?" colored-pin":""),"data-icon":"~",styles:{color:i?n.getColor():""}})},makeInnerValueContainer:function(e){return t.createElement("div",{class:"inner-value-container",styles:{width:100/parseFloat(this.getWidth(e))*100+"%"},html:[t.createElement("span",{class:"bar-value",text:e.getFormatedValue()})]})},addTooltip:function(t,e){this.options.tooltipFormatter&&new s(t,this.options.tooltipFormatter(e),{fx:!1,className:"chart-tooltip",root:this.elements.innerContainer})},getMaxWidth:function(){return 100},getWidth:function(t){return t.getValue()*this.getMaxWidth()/this.max+"%"},attachEvents:function(t,e){var n=this.elements.innerContainer.getElement(".chart-tooltip.uwa-tooltip"),i=function(n){this.setStatHighlite(t,e,n);var i=e.getNote();i&&this.dispatchEvent("onMouseOverNote",[i,n])};t.addEvents({click:function(){this.options.facetsNode.getFacetsAggregationMethod()||this.dispatchEvent("onPointClick",[e]),n&&n.hide()}.bind(this),mouseover:i.bind(this,!0),mouseout:i.bind(this,!1)})},setStatHighlite:function(t,e,n){var i=t.hasClassName("bar")?t:t.getParent(".bar"),s=t.hasClassName("bar")?t.getElement(".bar-inner"):t,o=t.getElement(".bar-colored-value"),a=i.getElement(".colored-pin"),l=n?r.brightenColor(e.getColor()):e.getColor();s.setStyle("background-color",l),o&&o.setStyle("color",l),e.getNote()&&a&&a.setStyle("color",l)},setFacetHighlite:function(t,e){this.elements.innerContainer.getElements(".bar").forEach(function(n){var i=a.get(n,"data").stat;i.getFacet()===t&&this.setStatHighlite(n,i,e)}.bind(this))},setNoteHighlite:function(t,e){this.elements.innerContainer.getElements(".bar").forEach(function(n){var i=a.get(n,"data").stat;i.getKey()===t.getKey()&&this.setStatHighlite(n,i,e)}.bind(this))}})}.apply(e,i))||(t.exports=s)},function(t,e,n){"use strict";var i,s;i=[n(198),n(1112)],void 0===(s=function(t,e){return t.extend({name:"nv-condensed-item-list-renderer",renderItem:function(t,n){return new e(t,Object.assign({},this.options.itemOptions,n))}})}.apply(e,i))||(t.exports=s)},function(t,e,n){"use strict";var i,s;i=[n(1),n(16),n(147),n(194),n(2),n(27)],void 0===(s=function(t,e,i,s,o,a){return{run:function(i,r){o.onReady(function(){var l=s.getName(i.getUrl()),c=o.isIn3DDPreview()&&o.isOnReadOnly3DDashboard();if(o.isIn3DDashboard()&&o.getFailureCode()&&!c)!function(e){e.body.empty(),e.body.grab(t.createElement("div",{class:"uwa-message uwa-icon error"}).setContent(_("Failed to load the application:")+" "+a.getErrorMessage(o.getFailureCode())))}(i);else{switch(l){case"SmartFilter":l="RssReader";break;case"YahooMail":case"NumericableMail":case"AolMail":case"MacMail":case"Hotmail":l="PopMail"}(function(t){return new e(function(e){n.e(118).then(function(){var i=[n(1143)("./"+t+"/Main")];(function(t){"function"==typeof t?t(e):e(t)}).apply(null,i)}).catch(n.oe)})})(l).done(function(t){t.run(i,r)})}})}}}.apply(e,i))||(t.exports=s)},function(t,e,n){"use strict";var i,s;i=[n(1),n(10),n(0),n(5)],void 0===(s=function(t,e,n,i){var s=n.h,o=i.extend({name:"nv-analyze-progress-bar",render:function(t){return s("div",{class:this.getClassNames()},t.title&&s("p",{class:this.getClassNames("-title")},s("strong",{},t.progress+"%")," "+t.title),s("div",{class:this.getClassNames("-progress")},s("div",{class:this.getClassNames("-progress-bar"),style:{width:t.progress+"%"}})))}});return e.extend({defaultOptions:{title:"",progress:null},init:function(t){this._parent(t),this._renderView()},setState:function(t){this.options.progress=t,this._renderView()},_renderView:function(){this.container=t.extendElement(n.render(s(o,this.options),!1,this.container))}})}.apply(e,i))||(t.exports=s)},function(t,e,n){"use strict";var i,s;i=[n(1),n(9),n(22),n(2),n(0),n(295),n(296),n(4)],void 0===(s=function(t,e,n,i,s,o,a,r){return e.extend(n,{init:function(t){this.setOptions(t)},verticalResponsive:function(t){if(this.introContainer){var e=[".widget-intro-title",".widget-intro-image",".widget-intro-desc"].map(function(t){return this.introContainer.getElement(t)}.bind(this));r.responsiveHideElement(t,e)}},getContent:function(){var e=t.createElement("div",{class:"nv-module-intro-container"}),n=s.h,r=i.isIn3DDPreview()&&"bootstrap_8001"===i.getFailureCode(),l=i.inSubscribePreview,c=this.getOption("control")||n(a,{value:this.getOption("btnValue")||(r?_("Pin to dashboard"):_("Configure")),className:"light-grey medium primary",onClick:function(){r?this.pinToDashboard():this.getOption("onBtnClick",function(){})()}.bind(this)});return s.render(n(o,{serviceId:this.getOption("serviceId"),serviceName:this.getOption("serviceName"),servicePict:this.getOption("servicePict"),serviceDesc:this.getOption("serviceDesc"),restrictedAccess:this.getOption("restrictedAccess")},!l&&c),e),this.introContainer=e,e},pinToDashboard:function(){parent.document.querySelector(".main .fonticon-publish").click()}})}.apply(e,i))||(t.exports=s)},function(t,e,n){"use strict";var i,s;i=[n(1),n(9),n(22),n(20),n(25),n(2),n(61),n(17),n(4),n(137),n(178),n(0),n(295),n(734),n(735),n(193)],void 0===(s=function(t,e,n,i,s,o,a,r,l,c,u,h,d,p,m,f){function g(t){return t.username||t.screen_name||t.name}var v=e.extend(n,{widget:null,rootContainer:null,connectIdEmptyValue:"plop",cache:null,defaultOptions:{serviceName:"social",serviceId:"global",size:{height:480,width:800},callbacks:{rebuild:function(){},prepareForReauthentication:function(){},validateResponse:function(t){return t},formatUsername:function(t){return t},notify:function(){},log:function(t){this.widget.log(t)},setAccount:function(t,e,n){this.widget.setValue("_connectid",t),this.widget.setValue("_oauthconnectid",e),this.widget.setValue("_screenName",n)},getAccount:function(){return this.widget.getValue("_connectid")}}},init:function(t){this.setOptions(t),this.options.size=f.getPopupSize(this.options.serviceId),t=this.options,this.widget=t.widget,this.rootContainer=t.rootContainer||this.widget&&this.widget.body},_call:function(t){return this.options.callbacks[t].apply(this,[].slice.call(arguments,1))},getLocalCache:function(){return this.cache||(this.cache=new(e.extend({isReady:!0,init:function(){this.db={}},get:function(t){return this.db[t]},set:function(t,e){this.db[t]=e}}))),this.cache},getConnectId:function(t){var e=this._call("getAccount");return!e||t?(this._call("setAccount",this.connectIdEmptyValue,"",""),this.connectIdEmptyValue):e},requestComplete:function(t,e,n,s){var o,a,r=this.getLocalCache();s||(s=i.deferred()),"post"!==t&&"delete"!==t?(n="string"==typeof n&&""!==n?l.tryJSONParse(n):n,n=this._call("validateResponse",n),c.getAuthenticateUrl(this.options.serviceId).done(function(t){if(!n||n.error&&"warning"!==n.error_type){if(this._call("log","request error"),this.isInvalidTokenCode(n.code))return this._call("prepareForReauthentication"),void this.displayAccountsSelector(t);if(r.isReady&&(a=r.get(e)))return this._call("notify",_("Api quota exceeded, using cached data"),10),this._call("log","Api error, returning cached data for "+e),void s.resolve(a);o=n&&n.error?n.error:_("Unknown error. Try reloading the widget."),this._buildWelcome({title:o}),s.reject(new v.ApiError(n.error?n.error.message||n.error:"Unknown error"))}else n.oauth_url&&"warning"!==n.error_type?(n.oauth_url=t,this._call("log","oAuth process"),s.reject(new v.RenewTokenError(n.oauth_url)),this._call("prepareForReauthentication"),this.displayAccountsSelector(n.oauth_url)):this.widget&&this.widget.getValue&&!this.widget.getValue("_screenName")&&n.screen_name?(this._call("log","credentials verified"),this.widget.setValue("_screenName",n.screen_name),s.resolve(n)):(r.isReady&&e&&r.set(e,n),this._call("log","normal request"),s.resolve(n))}.bind(this))):s.resolve(n)},displayAccountsSelector:function(t){var e=!o.User.isRegistered;this.getAvailableAccounts(function(n){var i=this,s=e?_("You must be registered to use this widget, please click the button below:"):n.length>0?_("Please select one of the available account(s) below:"):_("Add an account now:");this._buildWelcome({title:s,accounts:this._formatAccounts(n),selectAccountEvent:function(t,e,n){i.getLocalCache(),i._call("setAccount",t,n,e),setTimeout(function(){i._call("rebuild")},150)},addAccountEvent:function(){i.getLocalCache(),i.createNewAccount(t)}})}.bind(this))},_formatAccounts:function(t){return t.filter(function(t){return!this.isInvalidTokenCode(t.errorCodeStr)},this).map(function(t){var e=g(t.extra)||this._call("formatUsername",e);return{profilePicUrl:t.extra.avatar,userName:e,userId:t.id,oauthId:t.connectId}},this)},_buildWelcome:function(t){if(this.rootContainer){t.title=t.title||_("Please select one of the available account(s) bellow:"),t.serviceName=this.options.serviceName||"",this.rootContainer.empty();var e=h.h;h.render(e(d,{serviceId:this.options.serviceId,serviceName:this.options.serviceName,servicePict:this.options.servicePict},t.accounts?e(p,t):e(m,t)),this.rootContainer)}},openSigninWindow:function(t,e,n){var i=window.open(t,this.options.serviceName,"width="+n.width+",height="+n.height+",menubar=no,status=no,scrollbars=yes,location=no,directories=no"),s=setInterval(function(){i.closed&&(clearInterval(s),e())},300)},getAvailableAccounts:function(t){c.getTokens(this.options.serviceId).done(function(e){t(e.sort(function(t,e){return e.createdAt-t.createdAt}))})},request:function(e,n){var o=this,a=i.deferred();return n||(n={}),void 0!==(n=t.merge(n,{proxy:"oauth",method:"get",cache:0,service:this.options.serviceId,type:"json",connect:this.getConnectId(),wid:this.widget&&r.getFromWidget(this.widget).getId()})).postBody&&(n.headers?n.headers["Content-Type"]="application/json":n.headers={"Content-Type":"application/json"}),n.onComplete=function(t){o.requestComplete(n.method,"get"===n.method?e:null,t,a)},"oauth"===n.proxy?u.request(e,n):s.request(e,n),a.promise},createNewAccount:function(t){this.openSigninWindow(t,this.useFirstAccounAvailable.bind(this),this.options.size)},useFirstAccounAvailable:function(){var t=this;this.getAvailableAccounts(function(e){var n=e[0];n&&(t._call("setAccount",n.id,n.connectId,g(n.extra)),t._call("rebuild"))})},isInvalidTokenCode:function(t){return"ERR_OAUTH_EXPIRED_TOKEN"===t||"ERR_OAUTH_TOKEN_NOT_FOUND"===t}});return v.ApiError=a.extend(),v.RenewTokenError=a.extend({init:function(t){this._parent("Should renew token"),this.oauth_url=t}}),v}.apply(e,i))||(t.exports=s)},function(t,e,n){"use strict";var i,s;i=[n(1),n(138),n(397),n(165),n(17)],void 0===(s=function(t,e,n,i,s){return e.extend({defaultOptions:{showImageButton:!1,showDataButton:!0,showAtomButton:!1,dataType:"csv",dataText:_("CSV")},name:"export",init:function(t,e){this.widget=t,this._parent(e),this.build(),this.addEvent("onClose",function(){this.elements.error.hide()},this)},build:function(){this.setTitle(_("Export"),"download"),this.options.showImageButton&&this.addContent(t.createElement("a",{"data-export":"image",class:"lightbox-section export-button uwa-icon download",text:_("Image")}).addEvent("click",this.exportImage.bind(this))),this.options.showDataButton&&this.addContent(t.createElement("a",{"data-export":"data",class:"lightbox-section export-button uwa-icon download",text:this.options.dataText}).addEvent("click",this.exportData.bind(this))),this.options.showAtomButton&&this.addContent(t.createElement("a",{"data-export":"feed",class:"lightbox-section export-button uwa-icon download disabled",text:_("RSS feed")})),this.addContent(this.elements.error=t.createElement("div",{class:"uwa-message error"}))},setExportDataFunction:function(t){return this._exportDataFunction=t,this},setExportFeedUrl:function(t){var e=this.getExportButton("feed");return e&&(e.set({target:"_blank",href:t}),e.toggleClassName("disabled",!1)),this},toggleExportButton:function(t,e){var n=this.getExportButton(e||"data");n&&n.setStyle("display",t?"":"none")},disableExportButton:function(t,e){var n=this.getExportButton(e||"data");n&&(n.removeAttribute("href"),n.toggleClassName("disabled",t))},getExportButton:function(t){return this.getContent().getElement('[data-export="'+t+'"]')},exportImage:function(){var t=s.getFromWidget(this.widget).getId(),e=this.widget.pageId;this._loadButton("image",n.generateImage(t,e)).done(function(t){n.dowloadImage(t,this.widget.getTitle.bind(this.widget))}.bind(this),function(){this._setErrorMessage(_("Error during image generation, please try again later."))}.bind(this))},exportData:function(){this._loadButton("data",this._exportDataFunction()).done(function(t){var e=this.options.dataType;i(new Blob([t],{type:"csv"===e?"text/csv":"opml"===e?"text/xml":"application/octet-stream"}),"netvibes-"+(new Date).strftime("%Y-%m-%d")+"."+e)}.bind(this),function(){this._setErrorMessage(_("Error during generation, please try again later."))}.bind(this))},_loadButton:function(t,e){this.elements.error.hide();var n=this.getExportButton(t);return n.addClassName("loading"),e.fin(function(){n.removeClassName("loading")})},_setErrorMessage:function(t){this.elements.error.setText(t).show()}})}.apply(e,i))||(t.exports=s)},function(t,e,n){"use strict";var i,s;i=[n(2),n(172),n(784),n(785),n(786),n(789),n(87)],void 0===(s=function(t,e,n,i,s,o,a){var r,l={};return l.refreshWidgetDragCache=function(){r&&r.refreshCache()},e.addCallback(function(){t.Page.inSmartReaderView?(i(),r=n()):t.isAloneEnvironment()||(o(),r=s())}),l.bindCreateWidgetAction=function(t,e){a.set(t,"data",{dataObj:e}),t.addClassName("create-widget")},App.Drag=l,l}.apply(e,i))||(t.exports=s)},function(t,e,n){"use strict";var i,s;i=[n(3),n(10),n(2),n(787)],void 0===(s=function(t,e,n,i){return e.extend({name:"header-selector",views:{vbar:{icon:"ŵ",name:_("Vertical bar")},line:{icon:"ų",name:_("Line")},pie:{icon:"ź",name:_("Pie")},stackedline:{icon:"ŷ",name:_("Stacked line")},table:{icon:"ű",name:_("Table")},hbar:{icon:"ů",name:_("Horizontal bar")},stackedvbar:{icon:"ž",name:_("Stacked vertical bar")},stackedhbar:{icon:"ſ",name:_("Stacked horizontal bar")},textcloud:{icon:"ż",name:_("Text cloud")},time:{icon:"R",name:_("Time")},vbar3d:{icon:"ý",name:_("3D Vertical bar")},map:{icon:"~",name:_("Map")},potionSummary:{icon:"ȇ",name:_("Potion Summary")},potionStatus:{icon:"R",name:_("Potion Status")}},init:function(t){this._parent(t),this.buildSkeleton(),this.attachEvents()},buildSkeleton:function(){this.elements.container?this.elements.container.empty():this.elements.container=UWA.createElement("div",{class:this.getClassNames()}).inject(this.options.container),this.elements.extras=UWA.createElement("div",{class:"nv-extra-controls"}).inject(this.elements.container),n.isIn3DDashboard()&&this.options.exportOptions&&this.buildExportDropdown(),this.buildDragButton(),this.options.selectedType&&this.buildTypeSelector(),this.buildViewSelector()},buildTypeSelector:function(){var t,e,n=this.elements,i=this.options.types,s=Object.keys(i);if(n.typeSelector=UWA.createElement("div",{class:"type-selector"+(1===s.length?" one-type":"")}).inject(n.container),e=UWA.createElement("div",{class:"content-type-selector",html:[UWA.createElement("span",{class:"actual-type",text:i[this.options.selectedType]})]}).inject(n.typeSelector),s.length>1)for(t in UWA.createElement("span",{"data-icon":"D",class:"uwa-icon"}).inject(e),n.typeMenu=UWA.createElement("ul",{class:"type-menu"}).inject(e),i)i.hasOwnProperty(t)&&UWA.createElement("li",{class:(t===s[s.length-1]?"last":"")+(t===this.options.selectedType?" selected-type":""),"data-action":"updateType","data-type":t,html:[UWA.createElement("span",{text:i[t],class:"type "+t}),t===this.options.selectedType?UWA.createElement("span",{"data-icon":"r",class:"uwa-icon"}):""]}).inject(n.typeMenu)},buildViewSelector:function(){var t,e,n=this,i=this.elements,s=this.options.views;for(t in i.viewSelector=UWA.createElement("div",{class:"view-selector",html:[UWA.createElement("div",{class:"view-container",html:[UWA.createElement("span",{"data-icon":this.views[this.options.selectedView].icon,class:"actual-view uwa-icon"}),UWA.createElement("span",{"data-icon":"G",class:"arrow uwa-icon"})]})],events:{mouseover:function(){n.hideDragButtonText(!0)},mouseleave:function(){if(i.compareButton){var t=i.compareButton.getElement(".text-compare-button");t&&t.show()}}}}).inject(i.container),i.viewMenu=UWA.createElement("div",{class:"view-menu"}).inject(i.viewSelector),s)s.hasOwnProperty(t)&&(e=UWA.createElement("span",{class:t+" selector uwa-icon",title:this.views[t].name,"data-icon":this.views[t].icon,"data-action":"updateView","data-view":t}).inject(i.viewMenu),t===this.options.selectedView&&e.addClassName("selected-view"))},buildExportDropdown:function(){new i(this.options.exportOptions).inject(this.elements.extras)},buildDragButton:function(){var t=this,e=this.elements,i=this.options.dragButton;i&&"undefined"!=typeof App&&!n.Page.inSmartReaderView&&(e.compareButton=UWA.createElement("span",{class:"compare-widget",html:[UWA.createElement("span",{class:"text-compare-button",text:_("Drag to compare")}),UWA.createElement("span",{class:"icon-compare-button uwa-icon","data-icon":"V"})]}).setData("widget-data",{dragIcon:i.icon,dragText:i.text}).inject(e.extras,"bottom"),setTimeout(function(){t.hideDragButtonText()},300))},hideDragButton:function(){var t=this.elements;t.compareButton&&t.compareButton.hide()},hideDragButtonText:function(t){if(this.elements.compareButton){var e=this.elements,n=t?e.viewSelector.getDimensions().width:e.viewSelector.getElement(".view-container").getDimensions().width,i=e.typeSelector?e.typeSelector.getDimensions().width:0,s=e.compareButton.getDimensions().width,o=e.container.getDimensions().width,a=e.compareButton.getElement(".text-compare-button");a&&n+s+i>o&&(t?a.hide():a.remove())}},attachEvents:function(){var e=this.elements,n=this;e.container.addEvent("click",function(e){var i,s=t.getElement(e);s.hasClassName("type")&&(s=s.getParent()),(i=s.getAttribute("data-action"))&&void 0!==n[i]&&n[i](e)})},updateType:function(e){var n=t.getElement(e),i=(n.hasClassName("type")?n.getParent():n).getAttribute("data-type");i!==this.options.selectedType&&(this.options.selectedType=i,this.buildSkeleton(),this.options.updateType(i))},updateView:function(e){var n=this.elements,i=t.getElement(e),s=n.viewMenu.getElement(".selected-view"),o=n.viewSelector.getElement(".actual-view"),a=i.getAttribute("data-view");a!==this.options.selectedView&&(s.removeClassName("selected-view"),i.addClassName("selected-view"),o.setAttribute("data-icon",this.views[a].icon),this.options.selectedView=a,this.options.updateView(a))},setViews:function(t,e){this.options.views=t,this.setSelectedView(e)},setSelectedView:function(t){this.options.selectedView=t,this.elements.viewSelector.destroy(),this.buildViewSelector()}})}.apply(e,i))||(t.exports=s)},function(t,e,n){"use strict";var i,s;i=[n(51),n(299),n(107),n(138),n(4),n(2),n(10),n(8),n(110),n(82),n(83),n(13),n(3),n(18)],void 0===(s=function(t,e,n,i,s,o,a,r,l,c,u,h,d,p){function m(t,e){return n.getDateForHighchart(1e3*t,e,1,!0).stripTags()}return a.extend({name:"legend-chart",data:null,parsedControls:{},aggMethod:{avg:{value:"average",displayValue:_("Average"),legend:_("average: {0}")},sum:{value:"total",displayValue:_("Total"),legend:_("total: {0}")},count:{value:"total",displayValue:_("Total"),legend:_("total: {0}")},max:{value:"max",displayValue:_("Maximum"),legend:_("maximum : {0}")},min:{value:"min",displayValue:_("Minimum"),legend:_("minimum : {0}")}},defaultOptions:{displayNotes:!o.isIn3DDashboard(),useLinkOnAutoSave:!o.isIn3DDashboard(),displayUpgrade:!o.isIn3DDashboard()},init:function(t){t.displayNotes||(t.displayNotes=this.defaultOptions.displayNotes),this._parent(t),this.data=this.options.data,this.selectedNav=this.options.widget.getValue("tabLegend"),this.options.obj||(this.options.obj=this.data),this.parsedControls={},this.buildSkeleton()},getTotal:function(t){var e,n,i=this.options.widget.getValue("show"),s=0;for(e=0,n=t.length;e<n;e+=1)0===i.indexOf("unique")&&t[e].id!==Number(i.split("-")[1])||(s+=t[e].count);return s},buildSkeleton:function(){var t,e=this.elements;e.container=this.options.legendContainer,e.container.addClassName(this.getClassNames()),e.legendNav=UWA.createElement("div",{class:"legend-nav"}).inject(e.container),e.legendContent=UWA.createElement("div",{class:"legend-content"+(this.options.preview?" no-edit":"")}),(t=this.initAccordion()).inject(e.container),t.updateContent("legends",e.legendContent),this.buildNav()},getTabList:function(){var t=this.options.nav||{details:_("Details"),guide:_("Insights")};return this.options.nav||this.options.widget.getBool("preview")||!this.options.displayNotes||(t.notes=_("Notes")),t},buildNav:function(){var t=this,e=this.options.widget,n=this.getTabList(),i=Object.keys(n),s=function(){var n=this.getAttribute("data-title");e.setValue("tabLegend",n),t.selectedNav=n,!0===e.getBool("collapsedLegend")&&t.elements.legendAccordion.toggleItem("legends"),t.showTab(n),t.dispatchEvent("onChange")};this.elements.legendNav.empty(),this.elements.legendContent.empty(),i.forEach(function(e){("guide"!==e||"quantitative"!==t.options.serieType&&"emotion"!==t.options.mainView&&"sentiment"!==t.options.mainView)&&(t.selectedNav||(t.selectedNav=e),UWA.createElement("div",{class:"title-nav "+e+(t.selectedNav===e?" selected-nav":""),html:[UWA.createElement("span",{text:n[e]})],"data-title":e,events:{click:s}}).inject(t.elements.legendNav),t.buildTabsContent(e))}),this.showTab(this.selectedNav)},buildTabsContent:function(t){var e=this.getTabList();UWA.createElement("div",{class:t+"-legend panel-legend","data-tab":t,html:[UWA.createElement("h3",{text:e[t]}),UWA.createElement("div",{class:"panel-legend-content",html:this["build"+t.ucfirst()]()})]}).inject(this.elements.legendContent)},showTab:function(t){var e=this.elements.legendContent,n=this.elements.legendNav;e.getElements(".panel-legend").invoke("setStyle","display","none"),e.getElement('.panel-legend[data-tab="'+t+'"]').setStyle("display",""),n.getElements(".title-nav").invoke("removeClassName","selected-nav"),n.getElement(".title-nav."+t).addClassName("selected-nav")},initAccordion:function(){var t=this.options.widget,e={};return this.elements.legendAccordion=new l({className:"legend"}),t.getBool("collapsedLegend")||(e.pinned=!0),this.elements.legendAccordion.addItem("legends",e),this.elements.legendAccordion.addEvent("onChange",function(){t.setValue("collapsedLegend",!t.getBool("collapsedLegend")),this.dispatchEvent("onChange")}.bind(this)),this.elements.legendAccordion},sortData:function(){var t=UWA.clone(this.data),e=this.options.obj;return t.filter(function(t){return!e[t.id].hideSerie}).concat(t.filter(function(t){return e[t.id].hideSerie}))},buildDetails:function(){var t=UWA.createElement("div",{class:"legend-details"});this.options.detailsContent||this.options.compare||this.getSerieDetails(this.data[0]).inject(t);var e=this.options.detailsContent?[this.options.detailsContent]:this.displayDetailsLegend();return e.unshift(t),e},computeItemsPerColumn:function(t){var e=this.elements.container.getDimensions(),n=Math.floor(e.width/300);return n>1?Math.round(t/n):4},displayDetailsLegend:function(){var t,e=this,n=[],i=UWA.createElement("ul"),o="",a=this.options,r=_("Common values"),l="#666666";if((t=this.sortData()).length>0){var u=0;t.forEach(function(r,l){0!==u&&u%this.computeItemsPerColumn(t.length)==0&&(u=0,n.includes(i)||n.push(i),i=UWA.createElement("ul"));var d,p,m=r.aggregationMethod&&"last"!==r.aggregationMethod?r.aggregationMethod:"sum",f=r.totalAvailable?s.formatHumanNumber(r.totalAvailable,this.isMisodata(r)?{abbreviate:!1,numDigitAfterComma:3}:{}):"",g="",v=!a.compare&&("pie"===a.view&&r.stats||r.subSeries),b=a.obj[r.id],y=_("{0} articles"),w="common"===r.type?r.color:b.color,x=b.name||r.name,C=/(socialpack|analytics)/.test(r.type)?Number("auto"!==b.sampling?b.sampling:b.samplingAuto):"";p=r[e.aggMethod[m].value],"max"!==m&&"min"!==m||(p=p.value),y=e.aggMethod[m].legend,UWA.is(p,"number")&&(p=s.formatHumanNumber(p,this.isMisodata(r)?{abbreviate:!1,numDigitAfterComma:3}:{}),g=/(facebook-page|twitter-account)/.test(r.type)?"":"quantitative"===this.options.serieType&&f?y?" - "+y.format(f):"":"pie"===a.view?r.percent?" - "+r.percent+"% ("+y.format(p)+")":" - "+y.format(p):y?" - "+y.format(p):""),"quantitative"!==this.options.serieType&&f&&p!==f&&(g+=" ("+f+" "+_("available")+")"),d=UWA.createElement("li",{class:"legend_"+r.id+(b.hideSerie?" hidden-serie":"")+(v?"":" box-color"),html:{tag:"p",html:(v?"":e.getLegendColor(w))+'<span class="ellipsable">{0}</span>'.format(x)+(b.hideAggMethod?"":"<span>{0}</span>".format(g))+'<span class="edit-legend icon">X</span>'}}).inject(i),C&&100!==C&&!b.hideSerie&&UWA.createElement("p",{class:"sampling-legend",text:_("(Chart based on {0}% sampling)").format(C)}).inject(d),u++,v&&!b.hideSerie&&r.total>0&&e.buildFullLegend(i,r),e.detailsAddLegend(d,r),e.attachDetailsEvents(d,r,l),a.preview||"common"===r.type||h.Client.Features.touchEvents||(o=_("Click to edit"),new c(d,o,{fx:!1,className:"chart-tooltip"}))}.bind(this)),a.common&&UWA.createElement("li",{class:"legend-common",html:"<p>"+this.getLegendColor(l)+"<span> "+r+"</span></p>"}).inject(i),n.includes(i)||n.push(i)}return n},buildNotes:function(){return this.displayNotesLegend()},displayNotesLegend:function(){var t,e,n=this,i=[],s={},o=_("Click to edit"),a=this.options,r=a.widget.notes;function l(t,e){if("time"===n.options.serieType){var i={};e.forEach(function(t){i[t.id]=Number(t.id.match(/\d+$/))}),(e=e.filter(function(e){var n=i[e.id],o=t.fromTo[0]<=n&&n<=t.fromTo[1];return o&&(o=s.from?s.from<=n:o,o=s.to?s.to>=n:o),o})).sort(function(t,e){return i[t.id]-i[e.id]})}return e}if(["from","to"].map(function(t){var e=a.widget.getPreference("date_"+t);e&&(s[t]=new Date(e.value).getTime()/1e3)}),r&&r.getAll().length>0&&this.options.displayNotes){e=UWA.createElement("ul");var u=0;this.data.forEach(function(s,d){0!==u&&u%this.computeItemsPerColumn(this.data.length)==0&&(u=0,i.includes(e)||i.push(e),e=UWA.createElement("ul"));var p,m=!a.compare&&s.subSeries,f=a.obj[s.id],g=f.name||s.name;if(t=r.getBySerie(s.id),(t=l(s,t)).length>0){if(p=UWA.createElement("li",{class:"legend_"+s.id+(f.hideSerie?" hidden-serie":""),html:{tag:"p",class:"title-serie",html:(m?"":n.getLegendColor(f.color))+'<span class="ellipsable"> '+g+" ("+t.length+')</span><span class="edit-legend icon">X</span>'}}).inject(e),u++,m){var v=UWA.createElement("ul",{class:"sub-legend legend_"+s.id}).inject(p);s.subSeries.forEach(function(t){var e,i=r.getBySubSerie(t.id);(i=l(s,i)).length>0&&(e=UWA.createElement("li",{class:"sub-legend-item",html:{tag:"p",html:n.getLegendColor(t.color)+"<span> "+(t.label||t.name)+"</span>"}}).inject(v),n.getNotesElements(i,t).inject(e))})}else n.getNotesElements(t,s).inject(p);a.preview||h.Client.Features.touchEvents||new c(p.getElement(".title-serie"),o,{fx:!1,className:"chart-tooltip"}),n.attachDetailsEvents(p.getElement(".title-serie"),s,d)}}.bind(this))}else e=this.options.displayNotes&&!this.options.preview?this.getMessage(_("To add a note, click on the chart.")):this.getMessage(_("There are no notes for this chart."));return i.includes(e)||i.push(e),i},getNotesElements:function(t,e){var i=this,s=this.options,o=_("Click to edit"),a=UWA.createElement("div");return t.forEach(function(t){var r=UWA.createElement("p",{class:"note","data-idNote":t.id,html:[UWA.createElement("span",{class:"label-note",text:n.formatDateForDisplay(t.label)}),UWA.createElement("span",{class:"text-note",text:t.text}),UWA.createElement("span",{class:"edit-legend icon",text:"X"})]}).inject(a);s.preview||h.Client.Features.touchEvents||new c(r,o,{fx:!1,className:"chart-tooltip"}),i.attachNotesEvents(r,t,e)}),a},buildGuide:function(){return this.displayGuideLegend()},displayGuideLegend:function(){var t=this,e=[],n=UWA.createElement("ul"),i=this.options,o=i.widget.getValue("range"),a=0;return this.data.forEach(function(r,l){0!==a&&a%this.computeItemsPerColumn(this.data.length)==0&&(a=0,e.includes(n)||e.push(n),n=UWA.createElement("ul"));var c,u,h,d=i.obj[r.id],p=d.name||r.name,f=r.min?m(r.min.key,o):"",g=r.max?m(r.max.key,o):"";u=UWA.createElement("li",{class:"legend_"+r.id+(d.hideSerie?" hidden-serie":""),html:{tag:"p",class:"title-serie",html:t.getLegendColor(d.color)+'<span class="ellipsable"> '+p+'</span><span class="edit-legend icon">X</span>'}}).inject(n),a++,t.attachDetailsEvents(u.getElement(".title-serie"),r,l),"analytics"===r.type&&1===r.id||d.hideSerie||(c=m(r.fromTo[1]||d.fromTo[1],o),h=UWA.createElement("div",{html:[g?UWA.createElement("p",{class:"guide-details",html:_("High Point: {0}").format(g)+" ("+s.formatHumanNumber(r.max.value,this.isMisodata(r)?{abbreviate:!1,numDigitAfterComma:3}:{})+")"}):"",f?UWA.createElement("p",{class:"guide-details",html:_("Low Point: {0}").format(f)+" ("+s.formatHumanNumber(r.min.value,this.isMisodata(r)?{abbreviate:!1,numDigitAfterComma:3}:{})+")"}):"",r.trend&&""!==r.trend.value?UWA.createElement("p",{class:"guide-details",html:_("Overall trend:")+" "+(r.trend.value<0?_("Downward")+'<span data-icon="D" class="insight-downward uwa-icon"></span>':0===r.trend.value?_("Equal")+'<span data-icon="G" class="insight-equal uwa-icon"></span>':_("Upward")+'<span data-icon="E" class="insight-upward uwa-icon"></span>')}):"",!i.widget.getValue("preview")&&r.forecasts&&r.forecasts.value?UWA.createElement("p",{class:"guide-details",html:_("Expected value for {0} is {1}").format(c,r.forecasts.value)}):""]}).inject(u),"analytics"!==r.type&&r.intersections&&r.intersections.length>0&&r.intersections.forEach(function(t){var e;this.isHiddenSerie(t.serieName)||(e=t.x<r.fromTo[0]?_("The trend of the series has intersected series {0} on {1}."):t.x>r.fromTo[1]?_("The trend of the series will intersect series {0} on {1}."):_("The trend of the series intersects series {0} on {1}."),UWA.createElement("p",{class:"guide-details",html:e.format(t.serieName,t.category)}).inject(h))},this))}.bind(this)),e.includes(n)||e.push(n),e},isHiddenSerie:function(t){var e=this.options;return this.data.some(function(n){var i=e.obj[n.id],s=i.name||n.name;return t===s&&i.hideSerie})},buildFullLegend:function(t,e){var n=this,i=UWA.createElement("ul",{class:"sub-legend legend_"+e.id}).inject(t);(e.subSeries||e.stats).forEach(function(t,e){var o=UWA.createElement("li",{class:"sub-legend-item",html:{tag:"p",html:n.getLegendColor(t.color)+"<span> "+(t.label||t.name)+" - "+s.round(t.percent,2)+"%</span>"}}).inject(i);n.attachDetailsEvents(o,t,e)})},detailsAddLegend:function(t,e){var n,i=this.options,s=i.obj[e.id],o="common"===e.type?e.color:s.color,a=e.stats?Object.keys(e.stats).length:0,r=i.widget.getValue("range"),l=function(t){if(!isFinite(t))return _("N/A");var e=t.toFixed(2);return t>0&&(e="+"+e),e+"%"};s.period&&UWA.createElement("p",{class:"period-legend",html:[UWA.createElement("span",{class:"icon-legend",text:"R",styles:{color:o}}),UWA.createElement("span",{text:_("Period")}),UWA.createElement("span",{class:"value",text:s.period})]}).inject(t),e.total>0&&a>1&&!s.hideSerie&&s.curves&&("vbar"===i.view||"hbar"===i.view||"line"===i.view)&&(s.curves.smoothed.isDisplayed&&UWA.createElement("p",{class:"smoothed-legend",html:[UWA.createElement("span",{class:"icon-legend",styles:{"border-color":o}}),UWA.createElement("span",{text:_("Smooth curve")}),UWA.createElement("span",{class:"value",text:l(e.smoothed.value)})]}).inject(t),s.curves.trend.isDisplayed&&UWA.createElement("p",{class:"trend-legend",html:[UWA.createElement("span",{class:"icon-legend",styles:{"border-color":o}}),UWA.createElement("span",{text:_("Linear regression")}),UWA.createElement("span",{class:"value",text:l(e.trend.value)})]}).inject(t),a>2&&s.curves.forecast.isDisplayed&&"line"===i.view&&e.forecasts&&(n=m(e.fromTo[1]||s.fromTo[1],r),UWA.createElement("p",{class:"forecast-legend",html:[UWA.createElement("span",{class:"icon-legend",text:"G",styles:{color:o}}),UWA.createElement("span",{text:i.widget.getBool("preview")?_("Forecast"):_("Forecast")+" "+n}),UWA.createElement("span",{class:"value",html:e.forecasts.value})]}).inject(t)))},attachDetailsEvents:function(t,e,n){var i=this,s=this.options;t.addEvent("mouseover",function(){this.hasClassName("highlighted")||this.addClassName("highlighted"),i.dispatchEvent("onMouseOver",[e,n,!0])}),t.addEvent("mouseout",function(){this.removeClassName("highlighted"),i.dispatchEvent("onMouseOver",[e,n,!1])}),s.preview||"common"===e.type||t.hasClassName("sub-legend-item")||t.addEvent("click",function(){this.openActions(e)}.bind(this))},attachNotesEvents:function(t,e,n){var i=this,s=this.options,o=s.widget.notes;t.addEvent("mouseover",function(){this.hasClassName("highlighted")||this.addClassName("highlighted"),i.dispatchEvent("onMouseOverNote",[e,n,!0])}),t.addEvent("mouseout",function(){this.removeClassName("highlighted"),i.dispatchEvent("onMouseOverNote",[e,n,!1])}),!s.preview&&this.options.displayNotes&&t.addEvent("click",function(){var t=i.options.container;t.scrollIntoView(!0),o.openNoteOverlay({currentNote:e,id:e.id,label:e.label,container:t,refresh:function(){i.options.refresh(i.data)}})})},openActions:function(t){this.options.container.scrollIntoView(!0),this._lightbox||(this._lightbox=new i({name:"legend"})),this._lightbox.setContent(this.overlaySkeleton(t)).inject(this.options.container.getParent(".moduleFrame")||this.options.container).open(),this._lightbox.getContent().addEvent("click",function(e){var n=d.getElement(e);(n.hasClassName("delete")||n.hasClassName("done-lightbox")||n.hasClassName("close"))&&(n.hasClassName("done-lightbox")?this.checkUpdates(t):this.closeOverlay())}.bind(this))},closeOverlay:function(){this._lightbox.getContent().removeEvents(),this._lightbox.destroy(),this._lightbox=null},checkUpdates:function(e){var n,i,s,o,a=this,r=this.options,l=r.widget,c=!1,u=t.getPreferenceAsArray(l,"names"),h=t.getPreferenceAsArray(l,"sampling"),d=t.getPreferenceAsArray(l,"hiddenSeries"),p=t.getPreferenceAsArray(l,"hiddenAggMethods"),m=r.obj[e.id],f=this.parsedControls.name,g=this.parsedControls.sampling,v=g?g.getValue()[0]:"",b=this.parsedControls.hideSerie,y=this.parsedControls.displayAggMethod,w=function(t){m.sampling=t,e.sampling=t,h[e.id]=t,l.setValue("sampling",h.toString()),a.options.reset()};for(n in f&&e.name!==f.getValue()&&(e.name=f.getValue().stripTags().replace(/,/g,""),u[e.id]=e.name,l.setValue("names",u.toString()),c=!0),m.curves)m.curves.hasOwnProperty(n)&&(i=!!m.curves[n].isDisplayed,(o=this.parsedControls[n])&&i!==o.isChecked()&&((s=t.getPreferenceAsArray(l,n))[e.id]=Number(o.isChecked()),m.curves[n].isDisplayed=Number(o.isChecked()),l.setValue(n,s.toString()),c=!0));(d=this.updateStreamValues(b,m.hideSerie,e,d,!0))&&(m.hideSerie=b&&b.isChecked(),l.setValue("hiddenSeries",d.toString()),c=!0),(p=this.updateStreamValues(y,m.hideAggMethod,e,p))&&(l.setValue("hiddenAggMethods",p.toString()),c=!0),v&&v!==m.sampling?"auto"!==v&&v!==m.samplingAuto?this.displayConfirmOverlay({text:Number(v)<Number(m.samplingAuto)?_("Representation of the results may not be accurate due to their small number."):_("Loading the results may be slow due to their large number."),value:v,onConfirm:w,onCancel:function(){a.options.refresh(a.data,!0)}}):w(v):c&&this.options.refresh(this.data,!0),this.closeOverlay()},updateStreamValues:function(t,e,n,i,s){if(!t)return!1;var o=s?t.isChecked():!t.isChecked();return e!==o&&(o?i.push(n.id):i=i.filter(function(t){return Number(t)!==Number(n.id)}),i)},overlaySkeleton:function(e){var n,i,s,o,a=this,r=UWA.createElement("div",{class:"content-overlay"}),l=this.options.widget,c=this.options.obj[e.id],h=e.stats?Object.keys(e.stats).length:0;i=UWA.createElement("div",{class:"content-lightbox"}),s='<div class="in-app-overlay-title"><i class="uwa-icon pencil"></i><span>'+_("Edit serie")+"</span></div>",s+='<div class="lightbox-section name-section"><p class="label-section">'+_("Name:")+'</p><form class="changeName content-section">',s+='<p><input uwa-control="uwa-text" uwa-name="name" class="input-name small" type="text" name="name" value="" /></p>',h>1&&0!==e.total&&c.curves&&(!this.options.mainView||this.options.mainView.match(/history/))&&(s+='<label><input uwa-control="uwa-checkbox" uwa-name="smoothed" class="input-ckeckbox light" type="checkbox" name="smoothed" value="0" />'+_("Smooth curve")+'</label><label><input uwa-control="uwa-checkbox" uwa-name="trend" class="input-ckeckbox light" type="checkbox" name="trend" value="0" />'+_("Linear regression")+"</label>",h>2&&(c.curves.forecast.isDisplayed||!l.getValue("date_to")||"now"===l.getValue("date_to"))&&(s+='<label><input uwa-control="uwa-checkbox" uwa-name="forecast" class="input-ckeckbox light" type="checkbox" name="forecast" value="0" />'+_("Forecast")+"</label>"));var d=e.aggregationMethod||"sum";return this.options.compare&&!this.options.trends&&a.aggMethod[d]&&(s+='<label><input uwa-control="uwa-checkbox" uwa-name="displayAggMethod" class="input-ckeckbox light" type="checkbox" name="displayAggMethod" value="0" />{0}</label>'.format(a.aggMethod[d].displayValue)),s+="</form>",/(analytics|socialpack)/.test(e.type)&&(s+='<p class="label-section sampling">'+_("Sampling:")+"</p>",s+='<div class="content-section sampling"><select uwa-control="uwa-select" uwa-name="sampling" class="input-select light small" name="sampling">',s+='<option value="auto">'+_("Auto")+"</option>",s+='<option value="100">'+_("All")+"</option>",s+='<option value="10">'+_("1/10")+"</option>",s+='<option value="1">'+_("1/100")+"</option>",s+='<option value="0.1">'+_("1/1000")+"</option>",s+="</select></div>"),s+="</div>",s+='<div class="lightbox-section color-section"><p class="label-section">'+_("Color:")+'</p><div class="color content-section"><span class="button-color" style="background-color:'+(c.color||e.color)+'"></span></div></div>',this.options.compare&&(s+='<div class="lightbox-section details-section"><p class="label-section">'+_("Details:")+'</p><div class="content-section"></div></div>'),(c.hideSerie||t.getPreferenceAsArray(l,"analyticsIds").length-t.getPreferenceAsArray(l,"hiddenSeries").length>1)&&(s+='<div class="lightbox-section hide-section"><label><input uwa-control="uwa-checkbox" uwa-name="hideSerie" class="input-ckeckbox-hide light" type="checkbox" name="hideSerie" value="0" />'+_("Hide serie")+"</label></div>"),i.setHTML(s),i.inject(r),u.parse(i,{onComplete:function(t){for(var s in this.parsedControls=UWA.extend(a.parsedControls,t),this.parsedControls.name.setValue(c.name||e.name),c.curves)c.curves.hasOwnProperty(s)&&c.curves[s].isDisplayed&&this.parsedControls[s]&&this.parsedControls[s].check(!0);!c.hideAggMethod&&this.parsedControls.displayAggMethod&&this.parsedControls.displayAggMethod.check(!0),c.hideSerie&&this.parsedControls.hideSerie.check(!0),c.sampling&&this.parsedControls.sampling&&this.parsedControls.sampling.setValue([c.sampling]),this.options.compare&&(n=i.getElement(".details-section"),this.getSerieDetails(e).inject(n.getElement(".content-section")),"misodata"===e.type&&"quantitative"===this.options.serieType&&n.hide()),o=i.getElement(".color"),this.addColorPicker(o,e),c.isCopy&&(e.noDelete=!0),this.addButtons(r,e),i.getElement(".changeName").onsubmit=function(){return this.checkUpdates(e),!1}.bind(this)}.bind(this)}),r},getContextLabel:function(t){var e=[],n={tab:{title:_("Tab")},feed:{title:_("Feed")},library:{title:_("Library")}};if(t.query){var i=t.query.context||{};Object.keys(i).forEach(function(t){if(i[t]&&i[t].length){var s="";s+=n[t].title,UWA.is(i[t],"array")?s+=" "+i[t].join(" "+_("or")+" "):s+=i[t],e.push(s)}}),e.length||e.push(_("dashboard"))}return e.join(" "+_("or")+" ")},getRawSerieDetails:function(t){var e={},i=this.options.widget,s=this.getContextLabel(t),a=t.title||t.query&&t.query.topic||t.label;t.type.match(/facebook|twitter|misodata/)||(e.within={title:_("Within:"),text:s}),t.type.match(/facebook|twitter|misodata/)||("*:*"===a&&(a=_("Overall")),e.topic={title:_("Topic:"),text:a});var r=n.formatDateRangeForDisplay(i.getValue("date_from"),i.getValue("date_to"));if(r=r.ucfirst(),e.period={title:_("Period:"),text:r},!this.options.compare&&o.NPD&&o.NPD.retention){var l=Math.floor(new n(1e3*o.NPD.retention).getDaysTo(new Date));e.autosave={title:_("AutoSave")+":",text:_("All articles are saved for {0} days.").format(l>1?l:1),suffix:this.options.displayUpgrade?_("Upgrade."):""},this.options.data.some(function(t){return t.available&&UWA.is(t.available,"object")})&&(e.hasAvailable={title:_("Out of AutoSave coverage:"),text:_("Articles may be unavailable for reading or analysis")})}return e},getSerieDetails:function(t){var e=this,n=this.options.widget,i=UWA.createElement("div"),s=function(t){return p("{0} {1}").format(t.title,t.text)},a=this.getRawSerieDetails(t);if(a.within&&UWA.createElement("p",{text:s(a.within)}).inject(i),a.topic){var r=this.options.legendContainer.getDimensions().width,l=a.topic.text,c=l.truncate(Math.round(r/5),'<span class="ellipsis">...</span>'),u=UWA.createElement("p",{class:"subject "+(n.getBool("collapsedDetails")?"collapsed":"")}).inject(i);if(this.options.compare||this.options.shared)u.setHTML(s(a.topic));else{var h='<span data-icon="X" title="'+_("Edit")+'" class="edit-subject uwa-icon"></span>';l+=h,c+=h,n.getBool("collapsedDetails")?u.setHTML(s({title:a.topic.title,text:c})):u.setHTML(s({title:a.topic.title,text:l})),u.addEvent("click",function(t){if(d.getElement(t).hasClassName("edit-subject")){var i=e.options.widget.getMenu("options/edit");e.options.widget.dispatchEvent("onMenuExecute",[i])}else this.hasClassName("collapsed")?(n.setValue("collapsedDetails",!1),this.removeClassName("collapsed"),this.setHTML(s({title:a.topic.title,text:l}))):(n.setValue("collapsedDetails",!0),this.addClassName("collapsed"),this.setHTML(s({title:a.topic.title,text:c})))})}}if(UWA.createElement("p",{text:s(a.period)}).inject(i),a.autosave){a.autosave.title=this.options.useLinkOnAutoSave?'<a href="'+o.getWelcomeURL("explore/autosave")+'">'+a.autosave.title+"</a>":a.autosave.title;var m=this.options.displayUpgrade?' <a href="'+o.getWelcomeBusinessURL("contact-us")+'">'+a.autosave.suffix+"</a>":"";UWA.createElement("p",{class:"auto-save",html:s(a.autosave)+m}).inject(i),a.hasAvailable&&UWA.createElement("p",{class:"plot-band",html:"<div></div><span>"+s(a.hasAvailable)+"</span>"}).inject(i)}return i},addColorPicker:function(t,n){var i=this,s=this.options.obj[n.id],o=new e({container:t,currentColor:s.color||n.color,onSuccess:function(t){i.changeColor(t,n)}});t.addEvent("mouseover",function(t){d.stop(t),d.getElement(t).hasClassName("color")&&o.showColorPicker()}),t.addEvent("mouseleave",function(t){d.stop(t);var e=d.getElement(t);(e.hasClassName("color")||e.hasClassName("color-picker"))&&o.hideColorPicker()})},addButtons:function(t,e){var n=UWA.createElement("p",{class:"lightbox-button-group moreactions"});this.options.noDelete||e.noDelete||new r.Button({className:"medium dark-grey left-aligned iconl delete",value:_("Delete serie"),events:{onClick:function(){this.deleteStream(e.id)}.bind(this)}}).inject(n),new r.Button({className:"medium dark-grey done-lightbox",value:_("Update")}).inject(n),n.inject(t)},changeColor:function(e,n){var i=this.options.obj[n.id],s=t.getPreferenceAsArray(this.options.widget,"colors");this._lightbox.getContent().getParent().getElement(".color span").setStyles({"background-color":e}),n.color=e,i.color=e,this.data[n.id].color=e,s[n.id]=e,this.options.widget.setValue("colors",s.toString()),this.options.refresh(this.data,!0)},deleteStream:function(e){var n=this.options,i=n.widget,o=[],a=[],r=[],l=[],c=[],u=[],h=[],d=[],p=[],m=[],f=[],g=t.getPreferenceAsArray(i,"analyticsIds"),v=s.tryJSONParse(i.getValue("queryRestriction"))||[],b=t.getPreferenceAsArray(i,"colors"),y=t.getPreferenceAsArray(i,"types"),w=t.getPreferenceAsArray(i,"names"),x=t.getPreferenceAsArray(i,"smoothed"),C=t.getPreferenceAsArray(i,"trend"),_=t.getPreferenceAsArray(i,"forecast"),S=t.getPreferenceAsArray(i,"hiddenSeries"),E=t.getPreferenceAsArray(i,"hiddenAggMethods"),k=t.getPreferenceAsArray(i,"trackings"),T=t.getPreferenceAsArray(i,"sampling"),A=t.getPreferenceAsArray(i,"sampling_auto");this.data=this.data.filter(function(t){return t.id!==e}),(S=this.removeStreamValues(S,e))&&i.setValue("hiddenSeries",S.toString()),(E=this.removeStreamValues(E,e))&&i.setValue("hiddenAggMethods",E.toString()),g.forEach(function(t,n){n!==e&&(o.push(t),r.push(b[n]),w.length&&l.push(w[n]),y.length&&c.push(y[n]),x.length&&(u.push(x[n]),h.push(C[n]),d.push(_[n])),k.length&&p.push(k[n]),T.length&&m.push(T[n]),A.length&&f.push(A[n]),v.length&&a.push(v[n]))}),i.notes.deleteByStream(e),i.setValue("analyticsIds",o.toString()),i.setValue("queryRestriction",JSON.stringify(a)),i.setValue("colors",r.toString()),i.setValue("types",c.toString()),i.setValue("names",l.toString()),x&&(i.setValue("smoothed",u.toString()),i.setValue("trend",h.toString()),i.setValue("forecast",d.toString())),k.length>0&&i.setValue("trackings",p.toString()),T.length>0&&i.setValue("sampling",m.toString()),A.length>0&&i.setValue("sampling_auto",f.toString()),n.reset()},removeStreamValues:function(t,e){var n;if(t.length>0){for(t.includes(String(e))&&(t=t.filter(function(t){return Number(t)!==Number(e)})),n=0;n<t.length;n++)Number(t[n])>Number(e)&&(t[n]=Number(t[n])-1);return t}return!1},isMisodata:function(t){return"misodata"===t.type},getMessage:function(t){var e=t||_("Error. Please try later."),n=UWA.createElement("div",{class:"uwa-message simple"});return e.inject?e.inject(n):n.setHTML(e),n},highlightNote:function(t,e){var n=this.elements.legendContent,i=n.parentNode,s=n.getElements(".notes-legend p[data-idnote]"),o=n.getElement('.notes-legend p[data-idnote="'+t+'"]'),a=n.getElements(".notes-legend .title-serie").map(function(t){return t.parentNode});e?i.style.height||i.setStyle("height",i.getDimensions().innerHeight+"px"):i&&i.setStyle("height",""),a.forEach(function(t){e&&o?t.addClassName("focused-out"):t.removeClassName("focused-out")}),s.forEach(function(t){t.removeClassName("highlighted"),e&&o?t.addClassName("focused-out"):t.removeClassName("focused-out")}),e&&o&&(o.addClassName("highlighted"),o.removeClassName("focused-out"),n.getElements(".notes-legend .legend_"+/\d+/.exec(t)[0]).forEach(function(t){t.removeClassName("focused-out")}))},destroy:function(){for(var t in this._parent(),this.parsedControls)this.parsedControls[t].destroy()},getLegendColor:function(t){return'<span class="chart-legend-color"><span style="background-color:'+t+'"></span></span>'},displayConfirmOverlay:function(t){this.options.container.scrollIntoView(!0),this._confirmOverlay=new i({name:"confirmOverlay"}),this._confirmOverlay.setContent(this.confirmOverlaySkeleton(t)).inject(this.options.container).open()},confirmOverlaySkeleton:function(t){var e=UWA.createElement("div",{class:"content-confirm-lightbox"});return UWA.createElement("p",{class:"message-confirm-lightbox",text:t.text}).inject(e),this.addConfirmButton(e,t),e},addConfirmButton:function(t,e){var n=this,i=UWA.createElement("p",{class:"button-confirm-lightbox"}).inject(t);new r.Button({className:"medium dark-grey undo-confirm-lightbox",value:_("Undo"),events:{onClick:function(){e.onCancel(),n._confirmOverlay.close()}}}).inject(i),new r.Button({className:"medium dark-grey ok-confirm-lightbox",value:_("Ok"),events:{onClick:function(){e.onConfirm(e.value),n._confirmOverlay.close()}}}).inject(i)}})}.apply(e,i))||(t.exports=s)},function(t,e,n){var i,s;i=[n(1),n(24),n(3),n(82),n(15)],void 0===(s=function(t,e,n,i,s){"use strict";var o=i.extend(e,{defaultOptions:{id:"uwa-embedToolTip",className:"uwa-embedToolTip",width:100,overDelay:1e3,margin:5},show:function(){var t,e=this._parent;this._tooltip||this.buildSkeleton(),this.setDelayed("showEmbedToolTip",function(){this._tooltippedSize=s.getSize.call(this._tooltipped),this._originalStyle=s.getStyles.call(this._tooltipped,["z-index","position"]),t=parseInt(this._originalStyle["z-index"],10)+100||1e3,s.setStyles.call(this._tooltipped,{zIndex:String(t),position:"relative"}),s.setStyles.call(this._tooltip,{zIndex:String(t-1),paddingBottom:this._tooltippedSize.height+this.options.margin,width:Math.max(this.options.width,this._tooltippedSize.width)}),e.call(this),this._tooltip.show(),this.setPosition()},this.options.overDelay)},hide:function(){this._parent(),this.clearDelayed("showEmbedToolTip"),this.options.fx||s.setStyles.call(this._tooltipped,this._originalStyle)},setPosition:function(){this._tooltip.setPosition({x:-this.options.margin,y:-this._tooltip.getSize().height+(this._tooltippedSize?this._tooltippedSize.height:this._tooltipped.getSize().height)+this.options.margin},{relative:this._tooltipped})},fxCompleted:function(){this._parent(),this.options.fx&&!this.visible&&s.setStyles.call(this._tooltipped,this._originalStyle)}});return t.namespace("Controls/EmbedToolTip",o,t)}.apply(e,i))||(t.exports=s)},function(t,e,n){"use strict";var i,s;i=[n(4),n(10),n(8),n(138),n(107),n(35)],void 0===(s=function(t,e,n,i,s,o){return e.extend({init:function(t){this.options=t||{},this.cachedNotes=null,this.cachedNotesString=null},getAll:function(){var e=this.options.widget.getValue("notes");return this.cachedNotesString!==e&&(this.cachedNotes=t.tryJSONParse(e)||[],this.cachedNotesString=e),this.cachedNotes},setAll:function(t){var e=JSON.stringify(t);this.options.widget.setValue("notes",e),this.cachedNotes=t,this.cachedNotesString=e},getById:function(t){var e,n=this.getAll();for(e=0;e<n.length;e++)if(n[e].id===t)return n[e];return null},getByLabel:function(t){var e=this.getAll();return e=e.filter(function(e){return e.label===t})},getBySerie:function(t){var e=this.getAll();return e=e.filter(function(e){return Number(e.id.split("_")[0])===Number(t)})},getBySubSerie:function(t){var e=this.getAll();return e=e.filter(function(e){var n=e.id.split("_");return n.splice(0,n.length-1).join("_")===String(t)})},set:function(t,e){var n;this.getById(t)&&this.remove(t),(n=this.getAll()).push({id:t,text:e.text,label:e.label}),this.setAll(n)},remove:function(t){var e=this.getAll();e=e.filter(function(e){return e.id!==t}),this.setAll(e)},deleteByStream:function(t){var e=this.getAll();e=(e=e.filter(function(e){return parseInt(e.id.charAt(0),10)!==t})).map(function(e){var n=parseInt(e.id.charAt(0),10);return n>=t&&(e.id=n-1+e.id.substr(1)),e}),this.setAll(e)},openNoteOverlay:function(t){var e,a,r,l=this,c=t.currentNote,u=s.formatDateForDisplay(t.label);if(void 0!==t.id){this._notesOverlay||(this._notesOverlay=new i({name:"notes"})),this._notesOverlay.setTitle("Notes","pin");var h=UWA.createElement("div"),d=UWA.createElement("div",{class:"lightbox-section-group"}).inject(h),p=UWA.createElement("div",{class:"lightbox-section"}).inject(d),m=UWA.createElement("div",{class:"lightbox-content"}).inject(p);UWA.createElement("p",{class:"lightbox-content-label",text:_("Item:")}).inject(m),UWA.createElement("p",{text:u}).inject(m),r=new n.Text({className:"multiline note-text-input",value:c?c.text:"",multiline:!0}).inject(m);var f=UWA.createElement("p",{class:"lightbox-button-group"}).inject(h);e=new n.Button({className:"medium dark-grey left-aligned"+(c?" iconl delete":""),value:c?_("Delete"):_("Cancel")}).inject(f),a=new n.Button({className:"medium dark-grey",value:c?_("Update"):_("Add")}).inject(f),this._notesOverlay.setContent(h).inject(t.container.getParent(".moduleFrame")||t.container).open(),r.focus(),e.addEvent("onClick",function(){c?(l.remove(t.id),o&&o.log("notes","remove"),t.refresh()):l.dispatchEvent("onOpenPivotsOverlay"),l._notesOverlay.close()}),a.addEvent("onClick",function(){var e=l.getById(t.id);l.set(t.id,{text:r.getValue(),label:u}),o&&!e&&o.log("notes","new"),t.refresh(),l._notesOverlay.close()})}}})}.apply(e,i))||(t.exports=s)},function(t,e,n){"use strict";var i,s;i=[n(9),n(3),n(22),n(51),n(158),n(138),n(103),n(70),n(6),n(21),n(2),n(161),n(107),n(51),n(36),n(459)],void 0===(s=function(t,e,n,i,s,o,a,r,l,c,u,h,d,p,m,f){return t.extend(n,{pivotKeys:["what","where","who","how"],config:{shortMsg:_("Want to know more about '{0}' ?"),what:{title:_("What is said?"),msg:_("Want to know more about '{1}' on {0} ?")},where:{title:_("Where is it happening?"),msg:_("Want to know more about '{1}' on {0} ? ")},who:{title:_("Who is talking?"),msg:_("Want to know more about '{1}' by '{0}' ?")},how:{title:_("How is it perceived?"),msg:_("Want to know more about '{1}' perceived as '{0}' ?")}},emotionLabels:{emotion_positive__pub_date:_("Positive"),emotion_neutral__pub_date:_("Neutral"),emotion_negative__pub_date:_("Negative")},defaultOptions:{displayNote:!0,customTitle:!1},init:function(t){this.setOptions(t),u.isIn3DDashboard()&&(this.options.displayNote=!1),this.openPivots()},openPivots:function(){if(!this.options.stubWidget.readOnly)if(this.options.item.filter&&this.options.item.filter.match(/facebook|twitter|misodata|geoloc/)){if(this.options.notes&&this.options.displayNote){var t,e=this.options.stubWidget,n=this.options.item,i=this.options.notes;if(n.isDate&&!n.graphic)return;var s=n.key||n.originalKey||n.label;t=n.isDate?(t=d.getDateForHighchart(1e3*s,e.range,2)).stripTags():n.label,this._lightbox&&this._lightbox.close(),i.openNoteOverlay({currentNote:i.getById(n.itemId),id:n.itemId,label:t,container:this.options.container,refresh:this.options.refresh})}}else this._lightbox||(this._lightbox=new o({name:"pivots",activeButton:this.options.activeButton})),this._lightbox.setContent(this.lightboxSkeleton()).inject(this.options.container.getParent(".moduleFrame")||this.options.container).open()},lightboxSkeleton:function(){var t,n,o,a,l,c=this.options.item,h=c.itemId?c.itemId.split("_")[0]:"",p=this.options.compare,m=this.options.stubWidget,g=m.widgetMode,v=c.originalGroup||c.grouping,b=c.key||c.originalKey||c.label,y=m.names&&m.names.split(","),w=y&&h&&y[h]?y[h]:i.getSerieName(c),x=c.type,C=[m.date_from,m.date_to],S=this.options.notes,E=S&&S.getById(c.itemId),k=[],T=UWA.createElement("div",{class:"content"}),A=UWA.createElement("div",{class:"pivots"}).inject(T),I=function(t,n,i,o){UWA.createElement("div",{text:n,title:_("This will create a new widget with your selection"),class:"action-button uwa-icon "+t,events:{click:function(n){e.stop(n),this._lightbox.close(),s.getAnalyticsIds({widgetId:this.options.stubWidget.id,mode:t,query:o}).done(function(t){i.data.analyticsIds=t.toString(),m.x3dPlatformId&&(i.x3dPlatformId=m.x3dPlatformId),r.add(i,{beforeModuleId:m.id})})}.bind(this)}}).inject(A)}.bind(this);if(c.isCopy&&(c.fromTo&&(C=[d.formatDateForPreferences(1e3*c.fromTo[0]),d.formatDateForPreferences(1e3*c.fromTo[1])]),!w&&m.names&&h)){var N=m.names.split(",");w=N[h-N.length]}p&&(v.match(/(author|twitter)/)?g="who":v.match(/(domain|media|geoloc)/)?g="where":0===v.indexOf("pub_date")||"term"===v||"pieTerm"===v?g="what":v.match(/(emotion|sentiment)/)&&(g="how")),n=void 0!==this.options.shortTitle?this.config.shortMsg:this.config[g].msg,-1!==["term","tag","pieTerm"].indexOf(v)&&(n=this.config.shortMsg,b="pieTerm"===v?c.query.topic:c.label),c.isDate&&((C=d.getDatesFromRange(new Date(1e3*b),m.range||null))[0]=d.formatDateForPreferences(C[0]),C[1]=d.formatDateForPreferences(C[1]),b=d.getDateForHighchart(1e3*b,m.range,2).stripTags()),l=b,v&&v.match(/emotion/)?(v="emotion",b=c.originalGroup.split("_")[1],a=this.emotionLabels[c.originalGroup]):v&&v.match(/sentiment/)?(v="sentiment",a=c.originalGroup.split("_"),a=(b=a[a.length-1]).ucfirst()):-1!==["term","tag"].indexOf(v)?a=c.label+" AND "+c.query.topic:v&&v.match(/geoloc/)?(a=c.label||c.key,l=a):a="pieTerm"===v?m.title:this.options.customTitle||b,n=n.format('<span class="subject">'+a.truncate(150)+"</span>",'<span class="subject">'+w.truncate(150)+"</span>"),UWA.createElement("div",{class:"title",html:n}).inject(T,"top"),t=UWA.createElement("p",{class:"moreactions"});var D=void 0===c.available||UWA.is(c.available,"object")?"":" "+_("({0} available)").format(c.available);if(UWA.createElement("a",{href:"#",class:"action-button uwa-icon read",text:_("Read articles")+D,events:{click:function(t){e.preventDefault(t),this._lightbox&&this._lightbox.close(),"tagger"===v?this.readSelection({data:c.userId,filter:"userId",period:C,type:x,requestAdd:k,item:c}):this.readSelection({data:b,filter:v,period:C,type:x,requestAdd:k,query:c.query})}.bind(this)}}).inject(t),S&&this.options.displayNote){var O=c.itemId;UWA.createElement("a",{href:"#",class:"action-button uwa-icon pin",text:E?_("Edit note"):_("Add a note"),events:{click:function(t){e.preventDefault(t),this._lightbox&&this._lightbox.close(),S.openNoteOverlay({currentNote:E,id:O,label:l,container:this.options.container,refresh:this.options.refresh}),S.addEvent("onOpenPivotsOverlay",function(){this._lightbox.open()}.bind(this))}.bind(this)}}).inject(t)}u.isAllowed("blacklist")&&this.options.blacklist&&"term"===v&&UWA.createElement("a",{href:"#",class:"action-button uwa-icon delete",text:_('Hide "{0}"').format(c.label),events:{click:function(t){e.preventDefault(t),this.options.blacklist.addBlacklistValue(c.label),this.options.blacklist.openBlacklistOverlay({container:this.options.container}),this.options.blacklist.addEvent("onCloseOverlay",function(){this._lightbox.close()}.bind(this))}.bind(this)}}).inject(t),!v||v.match(/(emotion|sentiment|pub_date)/)||u.isIn3DDashboard()||UWA.createElement("a",{href:"#",class:"action-button uwa-icon cogwheel",text:_("Associate with"),events:{click:function(t){e.preventDefault(t),f.submitEntity("associated","add",{sources:[c.label],facet:"term"===v&&c.authorType?c.authorType:v}).done(function(){this.options.reset(),this._lightbox.close()}.bind(this))}.bind(this)}}).inject(t);var P={period:C,item:c,colors:m.data.colors,names:m.data.names,customTitle:this.options.customTitle},F=UWA.clone(c.query);v&&(!c.isDate&&"pieTerm"!==v||v.match(/(emotion|sentiment)/))&&(F.topic=this.addFilterToTopic(v,b,k,c,F.topic));var M=void 0;for(o in this.config)this.pivotKeys.includes(o)&&(o!==m.data.widgetMode||S||c.type?I(o,this.config[o].title,this.getNewWidgetDataObj(Object.assign({type:o},P)),F):M=o);return A.addContent(this.buildOverallButton(this.getNewWidgetDataObj(Object.assign({type:g},P)),F,M)),t.inject(T),T},buildOverallButton:function(t,n,i){return UWA.createElement("div",{text:_("All apps"),title:_("This will create all apps."),class:"action-button uwa-icon all",events:{click:function(s){e.stop(s),this._lightbox.close(),this.createAnalyse(c.getFocused().dataObj.id,t,n,i)}.bind(this)}})},createAnalyse:function(t,e,n,i){var s={moduleData:Object.assign({date_to:"today",date_from:d.formatDateForPreferences(m.getDefaultFrom()),range:"daily",names:""},e.data),skip:i,tabId:t,query:n};l.myWidgetCreateAnalyze(s).done(function(t){t.map(a.factory).invoke("addToPage")})},getCommonData:function(t){var e={};return t.period&&(t.period[0].match(/^\d{10}$/)&&(t.period[0]=d.ISODateString(new Date(1e3*t.period[0]),!0),t.period[1]=d.ISODateString(new Date(1e3*t.period[1]),!0)),e.date_from=t.period[0],e.date_to=t.period[1]),""===e.date_to&&(e.date_to="now"),e},addFilterToTopic:function(t,e,n,i,s){if(0===n.filter(function(e){return e.filter===t}).length){n.push({value:"geoloc"===t?e:h.escapeQuery(e),filter:"term"===t&&i.authorType?i.authorType:t});var o=n.filter(function(t){return"domain"===t.filter});"author"===t&&0===o.length&&i.domain&&n.push({value:h.escapeQuery(i.domain),filter:"domain"}),"tagger"===t&&(n.pop(),n.push({value:h.escapeQuery(i.userId),filter:"userId"}))}return h.buildQuery({raw:s,and:h.buildQueryPartsFromRequestAdd(n)})},getNewWidgetDataObj:function(t){var e={moduleName:"SocialPack_Analytics",data:this.getCommonData(t)},n=t.item.series?t.item.series.index:t.item.id,i=t.colors?t.colors.split(","):null;return e.data.widgetMode=t.type,e.data.names=t.names||t.customTitle&&t.customTitle.replace(/,/g," ")||"",this.options.compare||UWA.is(n,"number")||!i||2!==i.length||(e.data.colors=t.colors),!this.options.compare&&UWA.is(n,"number")&&i&&(e.data.colors=[i[n],i[n+1]||"#888888"].toString()),this.options.compare&&(e.data.names="",e.data.colors=t.item.color),e},readSelection:function(t){var e,n=this.options.stubWidget,i=this.getCommonData(t),s=t.query.topic;s=h.buildQuery({raw:s,and:h.buildQueryPartsFromRequestAdd(t.requestAdd)}),i.searchQuery=JSON.stringify({topic:s,context:t.query.context}),t.filter&&!t.filter.match(/(pub_date|pieTerm)/)&&t.requestAdd.push({filter:t.filter,value:"geoloc"===t.filter?t.data:h.escapeQuery(t.data)}),e={moduleName:"SmartFilter",data:i},n.x3dPlatformId&&(e.x3dPlatformId=n.x3dPlatformId),r.add(e,{beforeModuleId:n.id})}})}.apply(e,i))||(t.exports=s)},function(t,e,n){"use strict";var i,s;i=[n(299),n(232),n(181),n(428),n(286),n(430),n(431),n(225),n(308),n(433),n(235),n(301),n(453),n(436),n(401),n(402),n(403),n(309),n(287),n(404),n(107),n(398),n(158),n(51)],void 0===(s=function(t,e,n,i,s,o,a,r,l,c,u,h,d,p,m,f,g,v,b,y,w,x,C,_){return{ColorPicker:t,Colors:e,Controls:{BarChart:n,Export:i,HbarChart:s,HeaderSelector:o,Legend:a,LineChart:r,MapChart:l,Notes:c,PieChart:u,SimpleHBar:h,SimpleStackedHBar:d,SimpleTagCloud:p,StackedhbarChart:m,StackedlineChart:f,StackedvbarChart:g,TableChart:v,VbarChart:b,Vbar3dChart:y},Date:Date,Job:x,Streams:C,Notes:c,Utils:_}}.apply(e,i))||(t.exports=s)},function(t,e,n){"use strict";var i,s;i=[n(10),n(82),n(51)],void 0===(s=function(t,e,n){return t.extend({defaultOptions:{maxPercent:100,minPercent:33},name:"nv-simpletagcloud",init:function(t){this._parent(t),this.elements.container=UWA.createElement("div",{class:this.getClassNames()}),this.build()},setHighlite:function(t,e,i){var s,o,a=e?n.brightenColor(i):i,r=this.elements.container.getElements(".cloudword-"+t);if(r)for(s=0,o=r.length;s<o;s+=1)r[s].setStyle("color",a)},build:function(){var t,n,i,s,o,a,r,l=this,c=this.options,u=this.options.data,h=u.values,d=u.max,p=u.min,m=(c.maxPercent-c.minPercent)/(d-p),f=function(t){l.dispatchEvent("onPointClick",[t])};if(m>1&&(m-=1),h.length>0)for(t=0,n=h.length;t<n;t+=1)i=h[t].label||h[t].key,s=h[t].value,o=c.minPercent+(s-p)*m,r=h[t].common?"#FFF":h[t].color,(a=UWA.createElement("a",{styles:{"font-size":o+"%","line-height":"100%",color:r},html:i+" ",class:"cloudword-"+(h[t].common?"common":""!==h[t].id?h[t].id:"")}).inject(this.elements.container)).addEvent("click",f.bind(this,h[t])),this.options.toolTip&&this.options.toolTip.formatter&&new e(a,this.options.toolTip.formatter(h[t]),{width:this.options.toolTip.width||150,fx:!1,className:"chart-tooltip",root:this.elements.container}),this.attachEvents(a,h[t]);else this.elements.container.setHTML('<div class="noresult">'+_("No result.")+"</div>")},attachEvents:function(t,e){t.addEvent("mouseover",function(){t.setStyle("color",n.brightenColor(e.color))}),t.addEvent("mouseout",function(){t.setStyle("color",e.color)})}})}.apply(e,i))||(t.exports=s)},function(t,e){var n={};!function(t,e){t.VERSION="1.0.0",t.COMPILER_REVISION=4,t.REVISION_CHANGES={1:"<= 1.0.rc.2",2:"== 1.0.0-rc.3",3:"== 1.0.0-rc.4",4:">= 1.0.0"},t.helpers={},t.partials={};var n=Object.prototype.toString;t.registerHelper=function(e,i,s){if("[object Object]"===n.call(e)){if(s||i)throw new t.Exception("Arg not supported with multiple helpers");t.Utils.extend(this.helpers,e)}else s&&(i.not=s),this.helpers[e]=i},t.registerPartial=function(e,i){"[object Object]"===n.call(e)?t.Utils.extend(this.partials,e):this.partials[e]=i},t.registerHelper("helperMissing",function(t){if(2===arguments.length)return e;throw new Error("Missing helper: '"+t+"'")}),t.registerHelper("blockHelperMissing",function(e,i){var s=i.inverse||function(){},o=i.fn,a=n.call(e);return"[object Function]"===a&&(e=e.call(this)),!0===e?o(this):!1===e||null==e?s(this):"[object Array]"===a?e.length>0?t.helpers.each(e,i):s(this):o(e)}),t.K=function(){},t.createFrame=Object.create||function(e){t.K.prototype=e;var n=new t.K;return t.K.prototype=null,n},t.logger={DEBUG:0,INFO:1,WARN:2,ERROR:3,level:3,methodMap:{0:"debug",1:"info",2:"warn",3:"error"},log:function(e,n){if(t.logger.level<=e){var i=t.logger.methodMap[e];"undefined"!=typeof console&&console[i]&&console[i].call(console,n)}}},t.log=function(e,n){t.logger.log(e,n)},t.registerHelper("each",function(e,i){var s,o=i.fn,a=i.inverse,r=0,l="";if("[object Function]"===n.call(e)&&(e=e.call(this)),i.data&&(s=t.createFrame(i.data)),e&&"object"==typeof e)if(e instanceof Array)for(var c=e.length;r<c;r++)s&&(s.index=r),l+=o(e[r],{data:s});else for(var u in e)e.hasOwnProperty(u)&&(s&&(s.key=u),l+=o(e[u],{data:s}),r++);return 0===r&&(l=a(this)),l}),t.registerHelper("if",function(e,i){return"[object Function]"===n.call(e)&&(e=e.call(this)),!e||t.Utils.isEmpty(e)?i.inverse(this):i.fn(this)}),t.registerHelper("unless",function(e,n){return t.helpers.if.call(this,e,{fn:n.inverse,inverse:n.fn})}),t.registerHelper("with",function(e,i){if("[object Function]"===n.call(e)&&(e=e.call(this)),!t.Utils.isEmpty(e))return i.fn(e)}),t.registerHelper("log",function(e,n){var i=n.data&&null!=n.data.level?parseInt(n.data.level,10):1;t.log(i,e)});var i=function(){var t={trace:function(){},yy:{},symbols_:{error:2,root:3,program:4,EOF:5,simpleInverse:6,statements:7,statement:8,openInverse:9,closeBlock:10,openBlock:11,mustache:12,partial:13,CONTENT:14,COMMENT:15,OPEN_BLOCK:16,inMustache:17,CLOSE:18,OPEN_INVERSE:19,OPEN_ENDBLOCK:20,path:21,OPEN:22,OPEN_UNESCAPED:23,CLOSE_UNESCAPED:24,OPEN_PARTIAL:25,partialName:26,params:27,hash:28,dataName:29,param:30,STRING:31,INTEGER:32,BOOLEAN:33,hashSegments:34,hashSegment:35,ID:36,EQUALS:37,DATA:38,pathSegments:39,SEP:40,$accept:0,$end:1},terminals_:{2:"error",5:"EOF",14:"CONTENT",15:"COMMENT",16:"OPEN_BLOCK",18:"CLOSE",19:"OPEN_INVERSE",20:"OPEN_ENDBLOCK",22:"OPEN",23:"OPEN_UNESCAPED",24:"CLOSE_UNESCAPED",25:"OPEN_PARTIAL",31:"STRING",32:"INTEGER",33:"BOOLEAN",36:"ID",37:"EQUALS",38:"DATA",40:"SEP"},productions_:[0,[3,2],[4,2],[4,3],[4,2],[4,1],[4,1],[4,0],[7,1],[7,2],[8,3],[8,3],[8,1],[8,1],[8,1],[8,1],[11,3],[9,3],[10,3],[12,3],[12,3],[13,3],[13,4],[6,2],[17,3],[17,2],[17,2],[17,1],[17,1],[27,2],[27,1],[30,1],[30,1],[30,1],[30,1],[30,1],[28,1],[34,2],[34,1],[35,3],[35,3],[35,3],[35,3],[35,3],[26,1],[26,1],[26,1],[29,2],[21,1],[39,3],[39,1]],performAction:function(t,e,n,i,s,o,a){var r=o.length-1;switch(s){case 1:return o[r-1];case 2:this.$=new i.ProgramNode([],o[r]);break;case 3:this.$=new i.ProgramNode(o[r-2],o[r]);break;case 4:this.$=new i.ProgramNode(o[r-1],[]);break;case 5:this.$=new i.ProgramNode(o[r]);break;case 6:this.$=new i.ProgramNode([],[]);break;case 7:this.$=new i.ProgramNode([]);break;case 8:this.$=[o[r]];break;case 9:o[r-1].push(o[r]),this.$=o[r-1];break;case 10:this.$=new i.BlockNode(o[r-2],o[r-1].inverse,o[r-1],o[r]);break;case 11:this.$=new i.BlockNode(o[r-2],o[r-1],o[r-1].inverse,o[r]);break;case 12:case 13:this.$=o[r];break;case 14:this.$=new i.ContentNode(o[r]);break;case 15:this.$=new i.CommentNode(o[r]);break;case 16:case 17:this.$=new i.MustacheNode(o[r-1][0],o[r-1][1]);break;case 18:this.$=o[r-1];break;case 19:this.$=new i.MustacheNode(o[r-1][0],o[r-1][1],"&"===o[r-2][2]);break;case 20:this.$=new i.MustacheNode(o[r-1][0],o[r-1][1],!0);break;case 21:this.$=new i.PartialNode(o[r-1]);break;case 22:this.$=new i.PartialNode(o[r-2],o[r-1]);break;case 23:break;case 24:this.$=[[o[r-2]].concat(o[r-1]),o[r]];break;case 25:this.$=[[o[r-1]].concat(o[r]),null];break;case 26:this.$=[[o[r-1]],o[r]];break;case 27:case 28:this.$=[[o[r]],null];break;case 29:o[r-1].push(o[r]),this.$=o[r-1];break;case 30:this.$=[o[r]];break;case 31:this.$=o[r];break;case 32:this.$=new i.StringNode(o[r]);break;case 33:this.$=new i.IntegerNode(o[r]);break;case 34:this.$=new i.BooleanNode(o[r]);break;case 35:this.$=o[r];break;case 36:this.$=new i.HashNode(o[r]);break;case 37:o[r-1].push(o[r]),this.$=o[r-1];break;case 38:this.$=[o[r]];break;case 39:this.$=[o[r-2],o[r]];break;case 40:this.$=[o[r-2],new i.StringNode(o[r])];break;case 41:this.$=[o[r-2],new i.IntegerNode(o[r])];break;case 42:this.$=[o[r-2],new i.BooleanNode(o[r])];break;case 43:this.$=[o[r-2],o[r]];break;case 44:this.$=new i.PartialNameNode(o[r]);break;case 45:this.$=new i.PartialNameNode(new i.StringNode(o[r]));break;case 46:this.$=new i.PartialNameNode(new i.IntegerNode(o[r]));break;case 47:this.$=new i.DataNode(o[r]);break;case 48:this.$=new i.IdNode(o[r]);break;case 49:o[r-2].push({part:o[r],separator:o[r-1]}),this.$=o[r-2];break;case 50:this.$=[{part:o[r]}]}},table:[{3:1,4:2,5:[2,7],6:3,7:4,8:6,9:7,11:8,12:9,13:10,14:[1,11],15:[1,12],16:[1,13],19:[1,5],22:[1,14],23:[1,15],25:[1,16]},{1:[3]},{5:[1,17]},{5:[2,6],7:18,8:6,9:7,11:8,12:9,13:10,14:[1,11],15:[1,12],16:[1,13],19:[1,19],20:[2,6],22:[1,14],23:[1,15],25:[1,16]},{5:[2,5],6:20,8:21,9:7,11:8,12:9,13:10,14:[1,11],15:[1,12],16:[1,13],19:[1,5],20:[2,5],22:[1,14],23:[1,15],25:[1,16]},{17:23,18:[1,22],21:24,29:25,36:[1,28],38:[1,27],39:26},{5:[2,8],14:[2,8],15:[2,8],16:[2,8],19:[2,8],20:[2,8],22:[2,8],23:[2,8],25:[2,8]},{4:29,6:3,7:4,8:6,9:7,11:8,12:9,13:10,14:[1,11],15:[1,12],16:[1,13],19:[1,5],20:[2,7],22:[1,14],23:[1,15],25:[1,16]},{4:30,6:3,7:4,8:6,9:7,11:8,12:9,13:10,14:[1,11],15:[1,12],16:[1,13],19:[1,5],20:[2,7],22:[1,14],23:[1,15],25:[1,16]},{5:[2,12],14:[2,12],15:[2,12],16:[2,12],19:[2,12],20:[2,12],22:[2,12],23:[2,12],25:[2,12]},{5:[2,13],14:[2,13],15:[2,13],16:[2,13],19:[2,13],20:[2,13],22:[2,13],23:[2,13],25:[2,13]},{5:[2,14],14:[2,14],15:[2,14],16:[2,14],19:[2,14],20:[2,14],22:[2,14],23:[2,14],25:[2,14]},{5:[2,15],14:[2,15],15:[2,15],16:[2,15],19:[2,15],20:[2,15],22:[2,15],23:[2,15],25:[2,15]},{17:31,21:24,29:25,36:[1,28],38:[1,27],39:26},{17:32,21:24,29:25,36:[1,28],38:[1,27],39:26},{17:33,21:24,29:25,36:[1,28],38:[1,27],39:26},{21:35,26:34,31:[1,36],32:[1,37],36:[1,28],39:26},{1:[2,1]},{5:[2,2],8:21,9:7,11:8,12:9,13:10,14:[1,11],15:[1,12],16:[1,13],19:[1,19],20:[2,2],22:[1,14],23:[1,15],25:[1,16]},{17:23,21:24,29:25,36:[1,28],38:[1,27],39:26},{5:[2,4],7:38,8:6,9:7,11:8,12:9,13:10,14:[1,11],15:[1,12],16:[1,13],19:[1,19],20:[2,4],22:[1,14],23:[1,15],25:[1,16]},{5:[2,9],14:[2,9],15:[2,9],16:[2,9],19:[2,9],20:[2,9],22:[2,9],23:[2,9],25:[2,9]},{5:[2,23],14:[2,23],15:[2,23],16:[2,23],19:[2,23],20:[2,23],22:[2,23],23:[2,23],25:[2,23]},{18:[1,39]},{18:[2,27],21:44,24:[2,27],27:40,28:41,29:48,30:42,31:[1,45],32:[1,46],33:[1,47],34:43,35:49,36:[1,50],38:[1,27],39:26},{18:[2,28],24:[2,28]},{18:[2,48],24:[2,48],31:[2,48],32:[2,48],33:[2,48],36:[2,48],38:[2,48],40:[1,51]},{21:52,36:[1,28],39:26},{18:[2,50],24:[2,50],31:[2,50],32:[2,50],33:[2,50],36:[2,50],38:[2,50],40:[2,50]},{10:53,20:[1,54]},{10:55,20:[1,54]},{18:[1,56]},{18:[1,57]},{24:[1,58]},{18:[1,59],21:60,36:[1,28],39:26},{18:[2,44],36:[2,44]},{18:[2,45],36:[2,45]},{18:[2,46],36:[2,46]},{5:[2,3],8:21,9:7,11:8,12:9,13:10,14:[1,11],15:[1,12],16:[1,13],19:[1,19],20:[2,3],22:[1,14],23:[1,15],25:[1,16]},{14:[2,17],15:[2,17],16:[2,17],19:[2,17],20:[2,17],22:[2,17],23:[2,17],25:[2,17]},{18:[2,25],21:44,24:[2,25],28:61,29:48,30:62,31:[1,45],32:[1,46],33:[1,47],34:43,35:49,36:[1,50],38:[1,27],39:26},{18:[2,26],24:[2,26]},{18:[2,30],24:[2,30],31:[2,30],32:[2,30],33:[2,30],36:[2,30],38:[2,30]},{18:[2,36],24:[2,36],35:63,36:[1,64]},{18:[2,31],24:[2,31],31:[2,31],32:[2,31],33:[2,31],36:[2,31],38:[2,31]},{18:[2,32],24:[2,32],31:[2,32],32:[2,32],33:[2,32],36:[2,32],38:[2,32]},{18:[2,33],24:[2,33],31:[2,33],32:[2,33],33:[2,33],36:[2,33],38:[2,33]},{18:[2,34],24:[2,34],31:[2,34],32:[2,34],33:[2,34],36:[2,34],38:[2,34]},{18:[2,35],24:[2,35],31:[2,35],32:[2,35],33:[2,35],36:[2,35],38:[2,35]},{18:[2,38],24:[2,38],36:[2,38]},{18:[2,50],24:[2,50],31:[2,50],32:[2,50],33:[2,50],36:[2,50],37:[1,65],38:[2,50],40:[2,50]},{36:[1,66]},{18:[2,47],24:[2,47],31:[2,47],32:[2,47],33:[2,47],36:[2,47],38:[2,47]},{5:[2,10],14:[2,10],15:[2,10],16:[2,10],19:[2,10],20:[2,10],22:[2,10],23:[2,10],25:[2,10]},{21:67,36:[1,28],39:26},{5:[2,11],14:[2,11],15:[2,11],16:[2,11],19:[2,11],20:[2,11],22:[2,11],23:[2,11],25:[2,11]},{14:[2,16],15:[2,16],16:[2,16],19:[2,16],20:[2,16],22:[2,16],23:[2,16],25:[2,16]},{5:[2,19],14:[2,19],15:[2,19],16:[2,19],19:[2,19],20:[2,19],22:[2,19],23:[2,19],25:[2,19]},{5:[2,20],14:[2,20],15:[2,20],16:[2,20],19:[2,20],20:[2,20],22:[2,20],23:[2,20],25:[2,20]},{5:[2,21],14:[2,21],15:[2,21],16:[2,21],19:[2,21],20:[2,21],22:[2,21],23:[2,21],25:[2,21]},{18:[1,68]},{18:[2,24],24:[2,24]},{18:[2,29],24:[2,29],31:[2,29],32:[2,29],33:[2,29],36:[2,29],38:[2,29]},{18:[2,37],24:[2,37],36:[2,37]},{37:[1,65]},{21:69,29:73,31:[1,70],32:[1,71],33:[1,72],36:[1,28],38:[1,27],39:26},{18:[2,49],24:[2,49],31:[2,49],32:[2,49],33:[2,49],36:[2,49],38:[2,49],40:[2,49]},{18:[1,74]},{5:[2,22],14:[2,22],15:[2,22],16:[2,22],19:[2,22],20:[2,22],22:[2,22],23:[2,22],25:[2,22]},{18:[2,39],24:[2,39],36:[2,39]},{18:[2,40],24:[2,40],36:[2,40]},{18:[2,41],24:[2,41],36:[2,41]},{18:[2,42],24:[2,42],36:[2,42]},{18:[2,43],24:[2,43],36:[2,43]},{5:[2,18],14:[2,18],15:[2,18],16:[2,18],19:[2,18],20:[2,18],22:[2,18],23:[2,18],25:[2,18]}],defaultActions:{17:[2,1]},parseError:function(t,e){throw new Error(t)},parse:function(t){var e=this,n=[0],i=[null],s=[],o=this.table,a="",r=0,l=0,c=0;this.lexer.setInput(t),this.lexer.yy=this.yy,this.yy.lexer=this.lexer,this.yy.parser=this,void 0===this.lexer.yylloc&&(this.lexer.yylloc={});var u=this.lexer.yylloc;s.push(u);var h=this.lexer.options&&this.lexer.options.ranges;"function"==typeof this.yy.parseError&&(this.parseError=this.yy.parseError);for(var d,p,m,f,g,v,b,y,w,x,C={};;){if(m=n[n.length-1],this.defaultActions[m]?f=this.defaultActions[m]:(null==d&&(x=void 0,"number"!=typeof(x=e.lexer.lex()||1)&&(x=e.symbols_[x]||x),d=x),f=o[m]&&o[m][d]),void 0===f||!f.length||!f[0]){var _="";if(!c){for(v in w=[],o[m])this.terminals_[v]&&v>2&&w.push("'"+this.terminals_[v]+"'");_=this.lexer.showPosition?"Parse error on line "+(r+1)+":\n"+this.lexer.showPosition()+"\nExpecting "+w.join(", ")+", got '"+(this.terminals_[d]||d)+"'":"Parse error on line "+(r+1)+": Unexpected "+(1==d?"end of input":"'"+(this.terminals_[d]||d)+"'"),this.parseError(_,{text:this.lexer.match,token:this.terminals_[d]||d,line:this.lexer.yylineno,loc:u,expected:w})}}if(f[0]instanceof Array&&f.length>1)throw new Error("Parse Error: multiple actions possible at state: "+m+", token: "+d);switch(f[0]){case 1:n.push(d),i.push(this.lexer.yytext),s.push(this.lexer.yylloc),n.push(f[1]),d=null,p?(d=p,p=null):(l=this.lexer.yyleng,a=this.lexer.yytext,r=this.lexer.yylineno,u=this.lexer.yylloc,c>0&&c--);break;case 2:if(b=this.productions_[f[1]][1],C.$=i[i.length-b],C._$={first_line:s[s.length-(b||1)].first_line,last_line:s[s.length-1].last_line,first_column:s[s.length-(b||1)].first_column,last_column:s[s.length-1].last_column},h&&(C._$.range=[s[s.length-(b||1)].range[0],s[s.length-1].range[1]]),void 0!==(g=this.performAction.call(C,a,l,r,this.yy,f[1],i,s)))return g;b&&(n=n.slice(0,-1*b*2),i=i.slice(0,-1*b),s=s.slice(0,-1*b)),n.push(this.productions_[f[1]][0]),i.push(C.$),s.push(C._$),y=o[n[n.length-2]][n[n.length-1]],n.push(y);break;case 3:return!0}}return!0}},e=function(){var t={EOF:1,parseError:function(t,e){if(!this.yy.parser)throw new Error(t);this.yy.parser.parseError(t,e)},setInput:function(t){return this._input=t,this._more=this._less=this.done=!1,this.yylineno=this.yyleng=0,this.yytext=this.matched=this.match="",this.conditionStack=["INITIAL"],this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0},this.options.ranges&&(this.yylloc.range=[0,0]),this.offset=0,this},input:function(){var t=this._input[0];return this.yytext+=t,this.yyleng++,this.offset++,this.match+=t,this.matched+=t,t.match(/(?:\r\n?|\n).*/g)?(this.yylineno++,this.yylloc.last_line++):this.yylloc.last_column++,this.options.ranges&&this.yylloc.range[1]++,this._input=this._input.slice(1),t},unput:function(t){var e=t.length,n=t.split(/(?:\r\n?|\n)/g);this._input=t+this._input,this.yytext=this.yytext.substr(0,this.yytext.length-e-1),this.offset-=e;var i=this.match.split(/(?:\r\n?|\n)/g);this.match=this.match.substr(0,this.match.length-1),this.matched=this.matched.substr(0,this.matched.length-1),n.length-1&&(this.yylineno-=n.length-1);var s=this.yylloc.range;return this.yylloc={first_line:this.yylloc.first_line,last_line:this.yylineno+1,first_column:this.yylloc.first_column,last_column:n?(n.length===i.length?this.yylloc.first_column:0)+i[i.length-n.length].length-n[0].length:this.yylloc.first_column-e},this.options.ranges&&(this.yylloc.range=[s[0],s[0]+this.yyleng-e]),this},more:function(){return this._more=!0,this},less:function(t){this.unput(this.match.slice(t))},pastInput:function(){var t=this.matched.substr(0,this.matched.length-this.match.length);return(t.length>20?"...":"")+t.substr(-20).replace(/\n/g,"")},upcomingInput:function(){var t=this.match;return t.length<20&&(t+=this._input.substr(0,20-t.length)),(t.substr(0,20)+(t.length>20?"...":"")).replace(/\n/g,"")},showPosition:function(){var t=this.pastInput(),e=new Array(t.length+1).join("-");return t+this.upcomingInput()+"\n"+e+"^"},next:function(){if(this.done)return this.EOF;var t,e,n,i,s;this._input||(this.done=!0),this._more||(this.yytext="",this.match="");for(var o=this._currentRules(),a=0;a<o.length&&(!(n=this._input.match(this.rules[o[a]]))||e&&!(n[0].length>e[0].length)||(e=n,i=a,this.options.flex));a++);return e?((s=e[0].match(/(?:\r\n?|\n).*/g))&&(this.yylineno+=s.length),this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:s?s[s.length-1].length-s[s.length-1].match(/\r?\n?/)[0].length:this.yylloc.last_column+e[0].length},this.yytext+=e[0],this.match+=e[0],this.matches=e,this.yyleng=this.yytext.length,this.options.ranges&&(this.yylloc.range=[this.offset,this.offset+=this.yyleng]),this._more=!1,this._input=this._input.slice(e[0].length),this.matched+=e[0],t=this.performAction.call(this,this.yy,this,o[i],this.conditionStack[this.conditionStack.length-1]),this.done&&this._input&&(this.done=!1),t||void 0):""===this._input?this.EOF:this.parseError("Lexical error on line "+(this.yylineno+1)+". Unrecognized text.\n"+this.showPosition(),{text:"",token:null,line:this.yylineno})},lex:function(){var t=this.next();return void 0!==t?t:this.lex()},begin:function(t){this.conditionStack.push(t)},popState:function(){return this.conditionStack.pop()},_currentRules:function(){return this.conditions[this.conditionStack[this.conditionStack.length-1]].rules},topState:function(){return this.conditionStack[this.conditionStack.length-2]},pushState:function(t){this.begin(t)},options:{},performAction:function(t,e,n,i){switch(n){case 0:return e.yytext="\\",14;case 1:if("\\"!==e.yytext.slice(-1)&&this.begin("mu"),"\\"===e.yytext.slice(-1)&&(e.yytext=e.yytext.substr(0,e.yyleng-1),this.begin("emu")),e.yytext)return 14;break;case 2:return 14;case 3:return"\\"!==e.yytext.slice(-1)&&this.popState(),"\\"===e.yytext.slice(-1)&&(e.yytext=e.yytext.substr(0,e.yyleng-1)),14;case 4:return e.yytext=e.yytext.substr(0,e.yyleng-4),this.popState(),15;case 5:return 25;case 6:return 16;case 7:return 20;case 8:case 9:return 19;case 10:return 23;case 11:return 22;case 12:this.popState(),this.begin("com");break;case 13:return e.yytext=e.yytext.substr(3,e.yyleng-5),this.popState(),15;case 14:return 22;case 15:return 37;case 16:case 17:return 36;case 18:return 40;case 19:break;case 20:return this.popState(),24;case 21:return this.popState(),18;case 22:return e.yytext=e.yytext.substr(1,e.yyleng-2).replace(/\\"/g,'"'),31;case 23:return e.yytext=e.yytext.substr(1,e.yyleng-2).replace(/\\'/g,"'"),31;case 24:return 38;case 25:case 26:return 33;case 27:return 32;case 28:return 36;case 29:return e.yytext=e.yytext.substr(1,e.yyleng-2),36;case 30:return"INVALID";case 31:return 5}},rules:[/^(?:\\\\(?=(\{\{)))/,/^(?:[^\x00]*?(?=(\{\{)))/,/^(?:[^\x00]+)/,/^(?:[^\x00]{2,}?(?=(\{\{|$)))/,/^(?:[\s\S]*?--\}\})/,/^(?:\{\{>)/,/^(?:\{\{#)/,/^(?:\{\{\/)/,/^(?:\{\{\^)/,/^(?:\{\{\s*else\b)/,/^(?:\{\{\{)/,/^(?:\{\{&)/,/^(?:\{\{!--)/,/^(?:\{\{![\s\S]*?\}\})/,/^(?:\{\{)/,/^(?:=)/,/^(?:\.(?=[}\/ ]))/,/^(?:\.\.)/,/^(?:[\/.])/,/^(?:\s+)/,/^(?:\}\}\})/,/^(?:\}\})/,/^(?:"(\\["]|[^"])*")/,/^(?:'(\\[']|[^'])*')/,/^(?:@)/,/^(?:true(?=[}\s]))/,/^(?:false(?=[}\s]))/,/^(?:-?[0-9]+(?=[}\s]))/,/^(?:[^\s!"#%-,\.\/;->@\[-\^`\{-~]+(?=[=}\s\/.]))/,/^(?:\[[^\]]*\])/,/^(?:.)/,/^(?:$)/],conditions:{mu:{rules:[5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31],inclusive:!1},emu:{rules:[3],inclusive:!1},com:{rules:[4],inclusive:!1},INITIAL:{rules:[0,1,2,31],inclusive:!0}}};return t}();function n(){this.yy={}}return t.lexer=e,n.prototype=t,t.Parser=n,new n}();t.Parser=i,t.parse=function(e){return e.constructor===t.AST.ProgramNode?e:(t.Parser.yy=t.AST,t.Parser.parse(e))},t.AST={},t.AST.ProgramNode=function(e,n){this.type="program",this.statements=e,n&&(this.inverse=new t.AST.ProgramNode(n))},t.AST.MustacheNode=function(t,e,n){this.type="mustache",this.escaped=!n,this.hash=e;var i=this.id=t[0],s=this.params=t.slice(1),o=this.eligibleHelper=i.isSimple;this.isHelper=o&&(s.length||e)},t.AST.PartialNode=function(t,e){this.type="partial",this.partialName=t,this.context=e},t.AST.BlockNode=function(e,n,i,s){!function(e,n){if(e.original!==n.original)throw new t.Exception(e.original+" doesn't match "+n.original)}(e.id,s),this.type="block",this.mustache=e,this.program=n,this.inverse=i,this.inverse&&!this.program&&(this.isInverse=!0)},t.AST.ContentNode=function(t){this.type="content",this.string=t},t.AST.HashNode=function(t){this.type="hash",this.pairs=t},t.AST.IdNode=function(e){this.type="ID";for(var n="",i=[],s=0,o=0,a=e.length;o<a;o++){var r=e[o].part;if(n+=(e[o].separator||"")+r,".."===r||"."===r||"this"===r){if(i.length>0)throw new t.Exception("Invalid path: "+n);".."===r?s++:this.isScoped=!0}else i.push(r)}this.original=n,this.parts=i,this.string=i.join("."),this.depth=s,this.isSimple=1===e.length&&!this.isScoped&&0===s,this.stringModeValue=this.string},t.AST.PartialNameNode=function(t){this.type="PARTIAL_NAME",this.name=t.original},t.AST.DataNode=function(t){this.type="DATA",this.id=t},t.AST.StringNode=function(t){this.type="STRING",this.original=this.string=this.stringModeValue=t},t.AST.IntegerNode=function(t){this.type="INTEGER",this.original=this.integer=t,this.stringModeValue=Number(t)},t.AST.BooleanNode=function(t){this.type="BOOLEAN",this.bool=t,this.stringModeValue="true"===t},t.AST.CommentNode=function(t){this.type="comment",this.comment=t};var s=["description","fileName","lineNumber","message","name","number","stack"];t.Exception=function(t){for(var e=Error.prototype.constructor.apply(this,arguments),n=0;n<s.length;n++)this[s[n]]=e[s[n]]},t.Exception.prototype=new Error,t.SafeString=function(t){this.string=t},t.SafeString.prototype.toString=function(){return this.string.toString()};var o={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},a=/[&<>"'`]/g,r=/[&<>"'`]/,l=function(t){return o[t]||"&amp;"};t.Utils={extend:function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},escapeExpression:function(e){return e instanceof t.SafeString?e.toString():null==e||!1===e?"":(e=e.toString(),r.test(e)?e.replace(a,l):e)},isEmpty:function(t){return!t&&0!==t||"[object Array]"===n.call(t)&&0===t.length}};var c=t.Compiler=function(){},u=t.JavaScriptCompiler=function(){};c.prototype={compiler:c,disassemble:function(){for(var t,e,n,i=this.opcodes,s=[],o=0,a=i.length;o<a;o++)if("DECLARE"===(t=i[o]).opcode)s.push("DECLARE "+t.name+"="+t.value);else{e=[];for(var r=0;r<t.args.length;r++)"string"==typeof(n=t.args[r])&&(n='"'+n.replace("\n","\\n")+'"'),e.push(n);s.push(t.opcode+" "+e.join(" "))}return s.join("\n")},equals:function(t){var e=this.opcodes.length;if(t.opcodes.length!==e)return!1;for(var n=0;n<e;n++){var i=this.opcodes[n],s=t.opcodes[n];if(i.opcode!==s.opcode||i.args.length!==s.args.length)return!1;for(var o=0;o<i.args.length;o++)if(i.args[o]!==s.args[o])return!1}if(e=this.children.length,t.children.length!==e)return!1;for(n=0;n<e;n++)if(!this.children[n].equals(t.children[n]))return!1;return!0},guid:0,compile:function(t,e){this.children=[],this.depths={list:[]},this.options=e;var n=this.options.knownHelpers;if(this.options.knownHelpers={helperMissing:!0,blockHelperMissing:!0,each:!0,if:!0,unless:!0,with:!0,log:!0},n)for(var i in n)this.options.knownHelpers[i]=n[i];return this.program(t)},accept:function(t){return this[t.type](t)},program:function(t){var e,n=t.statements;this.opcodes=[];for(var i=0,s=n.length;i<s;i++)this[(e=n[i]).type](e);return this.isSimple=1===s,this.depths.list=this.depths.list.sort(function(t,e){return t-e}),this},compileProgram:function(t){var e,n=(new this.compiler).compile(t,this.options),i=this.guid++;this.usePartial=this.usePartial||n.usePartial,this.children[i]=n;for(var s=0,o=n.depths.list.length;s<o;s++)(e=n.depths.list[s])<2||this.addDepth(e-1);return i},block:function(t){var e=t.mustache,n=t.program,i=t.inverse;n&&(n=this.compileProgram(n)),i&&(i=this.compileProgram(i));var s=this.classifyMustache(e);"helper"===s?this.helperMustache(e,n,i):"simple"===s?(this.simpleMustache(e),this.opcode("pushProgram",n),this.opcode("pushProgram",i),this.opcode("emptyHash"),this.opcode("blockValue")):(this.ambiguousMustache(e,n,i),this.opcode("pushProgram",n),this.opcode("pushProgram",i),this.opcode("emptyHash"),this.opcode("ambiguousBlockValue")),this.opcode("append")},hash:function(t){var e,n,i=t.pairs;this.opcode("pushHash");for(var s=0,o=i.length;s<o;s++)n=(e=i[s])[1],this.options.stringParams?(n.depth&&this.addDepth(n.depth),this.opcode("getContext",n.depth||0),this.opcode("pushStringParam",n.stringModeValue,n.type)):this.accept(n),this.opcode("assignToHash",e[0]);this.opcode("popHash")},partial:function(t){var e=t.partialName;this.usePartial=!0,t.context?this.ID(t.context):this.opcode("push","depth0"),this.opcode("invokePartial",e.name),this.opcode("append")},content:function(t){this.opcode("appendContent",t.string)},mustache:function(t){var e=this.options,n=this.classifyMustache(t);"simple"===n?this.simpleMustache(t):"helper"===n?this.helperMustache(t):this.ambiguousMustache(t),t.escaped&&!e.noEscape?this.opcode("appendEscaped"):this.opcode("append")},ambiguousMustache:function(t,e,n){var i=t.id,s=i.parts[0],o=null!=e||null!=n;this.opcode("getContext",i.depth),this.opcode("pushProgram",e),this.opcode("pushProgram",n),this.opcode("invokeAmbiguous",s,o)},simpleMustache:function(t){var e=t.id;"DATA"===e.type?this.DATA(e):e.parts.length?this.ID(e):(this.addDepth(e.depth),this.opcode("getContext",e.depth),this.opcode("pushContext")),this.opcode("resolvePossibleLambda")},helperMustache:function(t,e,n){var i=this.setupFullMustacheParams(t,e,n),s=t.id.parts[0];if(this.options.knownHelpers[s])this.opcode("invokeKnownHelper",i.length,s);else{if(this.options.knownHelpersOnly)throw new Error("You specified knownHelpersOnly, but used the unknown helper "+s);this.opcode("invokeHelper",i.length,s)}},ID:function(t){this.addDepth(t.depth),this.opcode("getContext",t.depth),t.parts[0]?this.opcode("lookupOnContext",t.parts[0]):this.opcode("pushContext");for(var e=1,n=t.parts.length;e<n;e++)this.opcode("lookup",t.parts[e])},DATA:function(e){if(this.options.data=!0,e.id.isScoped||e.id.depth)throw new t.Exception("Scoped data references are not supported: "+e.original);this.opcode("lookupData");for(var n=e.id.parts,i=0,s=n.length;i<s;i++)this.opcode("lookup",n[i])},STRING:function(t){this.opcode("pushString",t.string)},INTEGER:function(t){this.opcode("pushLiteral",t.integer)},BOOLEAN:function(t){this.opcode("pushLiteral",t.bool)},comment:function(){},opcode:function(t){this.opcodes.push({opcode:t,args:[].slice.call(arguments,1)})},declare:function(t,e){this.opcodes.push({opcode:"DECLARE",name:t,value:e})},addDepth:function(t){if(isNaN(t))throw new Error("EWOT");0!==t&&(this.depths[t]||(this.depths[t]=!0,this.depths.list.push(t)))},classifyMustache:function(t){var e=t.isHelper,n=t.eligibleHelper,i=this.options;if(n&&!e){var s=t.id.parts[0];i.knownHelpers[s]?e=!0:i.knownHelpersOnly&&(n=!1)}return e?"helper":n?"ambiguous":"simple"},pushParams:function(t){for(var e,n=t.length;n--;)e=t[n],this.options.stringParams?(e.depth&&this.addDepth(e.depth),this.opcode("getContext",e.depth||0),this.opcode("pushStringParam",e.stringModeValue,e.type)):this[e.type](e)},setupMustacheParams:function(t){var e=t.params;return this.pushParams(e),t.hash?this.hash(t.hash):this.opcode("emptyHash"),e},setupFullMustacheParams:function(t,e,n){var i=t.params;return this.pushParams(i),this.opcode("pushProgram",e),this.opcode("pushProgram",n),t.hash?this.hash(t.hash):this.opcode("emptyHash"),i}};var h=function(t){this.value=t};u.prototype={nameLookup:function(t,e){return/^[0-9]+$/.test(e)?t+"["+e+"]":u.isValidJavaScriptVariableName(e)?t+"."+e:t+"['"+e+"']"},appendToBuffer:function(t){return this.environment.isSimple?"return "+t+";":{appendToBuffer:!0,content:t,toString:function(){return"buffer += "+t+";"}}},initializeBuffer:function(){return this.quotedString("")},namespace:"Handlebars",compile:function(e,n,i,s){this.environment=e,this.options=n||{},t.log(t.logger.DEBUG,this.environment.disassemble()+"\n\n"),this.name=this.environment.name,this.isChild=!!i,this.context=i||{programs:[],environments:[],aliases:{}},this.preamble(),this.stackSlot=0,this.stackVars=[],this.registers={list:[]},this.compileStack=[],this.inlineStack=[],this.compileChildren(e,n);var o,a=e.opcodes;for(this.i=0,f=a.length;this.i<f;this.i++)"DECLARE"===(o=a[this.i]).opcode?this[o.name]=o.value:this[o.opcode].apply(this,o.args);return this.createFunctionContext(s)},nextOpcode:function(){return this.environment.opcodes[this.i+1]},eat:function(){this.i=this.i+1},preamble:function(){var t=[];if(this.isChild)t.push("");else{var e=this.namespace,n="helpers = this.merge(helpers, "+e+".helpers);";this.environment.usePartial&&(n=n+" partials = this.merge(partials, "+e+".partials);"),this.options.data&&(n+=" data = data || {};"),t.push(n)}this.environment.isSimple?t.push(""):t.push(", buffer = "+this.initializeBuffer()),this.lastContext=0,this.source=t},createFunctionContext:function(e){var n=this.stackVars.concat(this.registers.list);if(n.length>0&&(this.source[1]=this.source[1]+", "+n.join(", ")),!this.isChild)for(var i in this.context.aliases)this.context.aliases.hasOwnProperty(i)&&(this.source[1]=this.source[1]+", "+i+"="+this.context.aliases[i]);this.source[1]&&(this.source[1]="var "+this.source[1].substring(2)+";"),this.isChild||(this.source[1]+="\n"+this.context.programs.join("\n")+"\n"),this.environment.isSimple||this.source.push("return buffer;");for(var s=this.isChild?["depth0","data"]:["Handlebars","depth0","helpers","partials","data"],o=0,a=this.environment.depths.list.length;o<a;o++)s.push("depth"+this.environment.depths.list[o]);var r=this.mergeSource();if(!this.isChild){var l=t.COMPILER_REVISION;r="this.compilerInfo = ["+l+",'"+t.REVISION_CHANGES[l]+"'];\n"+r}if(e)return s.push(r),Function.apply(this,s);var c="function "+(this.name||"")+"("+s.join(",")+") {\n  "+r+"}";return t.log(t.logger.DEBUG,c+"\n\n"),c},mergeSource:function(){for(var t,n="",i=0,s=this.source.length;i<s;i++){var o=this.source[i];o.appendToBuffer?t=t?t+"\n    + "+o.content:o.content:(t&&(n+="buffer += "+t+";\n  ",t=e),n+=o+"\n  ")}return n},blockValue:function(){this.context.aliases.blockHelperMissing="helpers.blockHelperMissing";var t=["depth0"];this.setupParams(0,t),this.replaceStack(function(e){return t.splice(1,0,e),"blockHelperMissing.call("+t.join(", ")+")"})},ambiguousBlockValue:function(){this.context.aliases.blockHelperMissing="helpers.blockHelperMissing";var t=["depth0"];this.setupParams(0,t);var e=this.topStack();t.splice(1,0,e),t[t.length-1]="options",this.source.push("if (!"+this.lastHelper+") { "+e+" = blockHelperMissing.call("+t.join(", ")+"); }")},appendContent:function(t){this.source.push(this.appendToBuffer(this.quotedString(t)))},append:function(){this.flushInline();var t=this.popStack();this.source.push("if("+t+" || "+t+" === 0) { "+this.appendToBuffer(t)+" }"),this.environment.isSimple&&this.source.push("else { "+this.appendToBuffer("''")+" }")},appendEscaped:function(){this.context.aliases.escapeExpression="this.escapeExpression",this.source.push(this.appendToBuffer("escapeExpression("+this.popStack()+")"))},getContext:function(t){this.lastContext!==t&&(this.lastContext=t)},lookupOnContext:function(t){this.push(this.nameLookup("depth"+this.lastContext,t,"context"))},pushContext:function(){this.pushStackLiteral("depth"+this.lastContext)},resolvePossibleLambda:function(){this.context.aliases.functionType='"function"',this.replaceStack(function(t){return"typeof "+t+" === functionType ? "+t+".apply(depth0) : "+t})},lookup:function(t){this.replaceStack(function(e){return e+" == null || "+e+" === false ? "+e+" : "+this.nameLookup(e,t,"context")})},lookupData:function(t){this.push("data")},pushStringParam:function(t,e){this.pushStackLiteral("depth"+this.lastContext),this.pushString(e),"string"==typeof t?this.pushString(t):this.pushStackLiteral(t)},emptyHash:function(){this.pushStackLiteral("{}"),this.options.stringParams&&(this.register("hashTypes","{}"),this.register("hashContexts","{}"))},pushHash:function(){this.hash={values:[],types:[],contexts:[]}},popHash:function(){var t=this.hash;this.hash=e,this.options.stringParams&&(this.register("hashContexts","{"+t.contexts.join(",")+"}"),this.register("hashTypes","{"+t.types.join(",")+"}")),this.push("{\n    "+t.values.join(",\n    ")+"\n  }")},pushString:function(t){this.pushStackLiteral(this.quotedString(t))},push:function(t){return this.inlineStack.push(t),t},pushLiteral:function(t){this.pushStackLiteral(t)},pushProgram:function(t){null!=t?this.pushStackLiteral(this.programExpression(t)):this.pushStackLiteral(null)},invokeHelper:function(t,e){this.context.aliases.helperMissing="helpers.helperMissing";var n=this.lastHelper=this.setupHelper(t,e,!0),i=this.nameLookup("depth"+this.lastContext,e,"context");this.push(n.name+" || "+i),this.replaceStack(function(t){return t+" ? "+t+".call("+n.callParams+") : helperMissing.call("+n.helperMissingParams+")"})},invokeKnownHelper:function(t,e){var n=this.setupHelper(t,e);this.push(n.name+".call("+n.callParams+")")},invokeAmbiguous:function(t,e){this.context.aliases.functionType='"function"',this.pushStackLiteral("{}");var n=this.setupHelper(0,t,e),i=this.lastHelper=this.nameLookup("helpers",t,"helper"),s=this.nameLookup("depth"+this.lastContext,t,"context"),o=this.nextStack();this.source.push("if ("+o+" = "+i+") { "+o+" = "+o+".call("+n.callParams+"); }"),this.source.push("else { "+o+" = "+s+"; "+o+" = typeof "+o+" === functionType ? "+o+".apply(depth0) : "+o+"; }")},invokePartial:function(t){var e=[this.nameLookup("partials",t,"partial"),"'"+t+"'",this.popStack(),"helpers","partials"];this.options.data&&e.push("data"),this.context.aliases.self="this",this.push("self.invokePartial("+e.join(", ")+")")},assignToHash:function(t){var e,n,i=this.popStack();this.options.stringParams&&(n=this.popStack(),e=this.popStack());var s=this.hash;e&&s.contexts.push("'"+t+"': "+e),n&&s.types.push("'"+t+"': "+n),s.values.push("'"+t+"': ("+i+")")},compiler:u,compileChildren:function(t,e){for(var n,i,s=t.children,o=0,a=s.length;o<a;o++){n=s[o],i=new this.compiler;var r=this.matchExistingProgram(n);null==r?(this.context.programs.push(""),r=this.context.programs.length,n.index=r,n.name="program"+r,this.context.programs[r]=i.compile(n,e,this.context),this.context.environments[r]=n):(n.index=r,n.name="program"+r)}},matchExistingProgram:function(t){for(var e=0,n=this.context.environments.length;e<n;e++){var i=this.context.environments[e];if(i&&i.equals(t))return e}},programExpression:function(t){if(this.context.aliases.self="this",null==t)return"self.noop";for(var e,n=this.environment.children[t],i=n.depths.list,s=[n.index,n.name,"data"],o=0,a=i.length;o<a;o++)1===(e=i[o])?s.push("depth0"):s.push("depth"+(e-1));return(0===i.length?"self.program(":"self.programWithDepth(")+s.join(", ")+")"},register:function(t,e){this.useRegister(t),this.source.push(t+" = "+e+";")},useRegister:function(t){this.registers[t]||(this.registers[t]=!0,this.registers.list.push(t))},pushStackLiteral:function(t){return this.push(new h(t))},pushStack:function(t){this.flushInline();var e=this.incrStack();return t&&this.source.push(e+" = "+t+";"),this.compileStack.push(e),e},replaceStack:function(t){var e,n="",i=this.isInline();if(i){var s=this.popStack(!0);if(s instanceof h)e=s.value;else{var o=this.stackSlot?this.topStackName():this.incrStack();n="("+this.push(o)+" = "+s+"),",e=this.topStack()}}else e=this.topStack();var a=t.call(this,e);return i?((this.inlineStack.length||this.compileStack.length)&&this.popStack(),this.push("("+n+a+")")):(/^stack/.test(e)||(e=this.nextStack()),this.source.push(e+" = ("+n+a+");")),e},nextStack:function(){return this.pushStack()},incrStack:function(){return this.stackSlot++,this.stackSlot>this.stackVars.length&&this.stackVars.push("stack"+this.stackSlot),this.topStackName()},topStackName:function(){return"stack"+this.stackSlot},flushInline:function(){var t=this.inlineStack;if(t.length){this.inlineStack=[];for(var e=0,n=t.length;e<n;e++){var i=t[e];i instanceof h?this.compileStack.push(i):this.pushStack(i)}}},isInline:function(){return this.inlineStack.length},popStack:function(t){var e=this.isInline(),n=(e?this.inlineStack:this.compileStack).pop();return!t&&n instanceof h?n.value:(e||this.stackSlot--,n)},topStack:function(t){var e=this.isInline()?this.inlineStack:this.compileStack,n=e[e.length-1];return!t&&n instanceof h?n.value:n},quotedString:function(t){return'"'+t.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/\u2028/g,"\\u2028").replace(/\u2029/g,"\\u2029")+'"'},setupHelper:function(t,e,n){var i=[];return this.setupParams(t,i,n),{params:i,name:this.nameLookup("helpers",e,"helper"),callParams:["depth0"].concat(i).join(", "),helperMissingParams:n&&["depth0",this.quotedString(e)].concat(i).join(", ")}},setupParams:function(t,e,n){var i,s,o,a=[],r=[],l=[];a.push("hash:"+this.popStack()),s=this.popStack(),((o=this.popStack())||s)&&(o||(this.context.aliases.self="this",o="self.noop"),s||(this.context.aliases.self="this",s="self.noop"),a.push("inverse:"+s),a.push("fn:"+o));for(var c=0;c<t;c++)i=this.popStack(),e.push(i),this.options.stringParams&&(l.push(this.popStack()),r.push(this.popStack()));return this.options.stringParams&&(a.push("contexts:["+r.join(",")+"]"),a.push("types:["+l.join(",")+"]"),a.push("hashContexts:hashContexts"),a.push("hashTypes:hashTypes")),this.options.data&&a.push("data:data"),a="{"+a.join(",")+"}",n?(this.register("options",a),e.push("options")):e.push(a),e.join(", ")}};for(var d="break else new var case finally return void catch for switch while continue function this with default if throw delete in try do instanceof typeof abstract enum int short boolean export interface static byte extends long super char final native synchronized class float package throws const goto private transient debugger implements protected volatile double import public let yield".split(" "),p=u.RESERVED_WORDS={},m=0,f=d.length;m<f;m++)p[d[m]]=!0;u.isValidJavaScriptVariableName=function(t){return!(u.RESERVED_WORDS[t]||!/^[a-zA-Z_$][0-9a-zA-Z_$]+$/.test(t))},t.precompile=function(e,n){if(null==e||"string"!=typeof e&&e.constructor!==t.AST.ProgramNode)throw new t.Exception("You must pass a string or Handlebars AST to Handlebars.precompile. You passed "+e);"data"in(n=n||{})||(n.data=!0);var i=t.parse(e),s=(new c).compile(i,n);return(new u).compile(s,n)},t.compile=function(n,i){if(null==n||"string"!=typeof n&&n.constructor!==t.AST.ProgramNode)throw new t.Exception("You must pass a string or Handlebars AST to Handlebars.compile. You passed "+n);var s;function o(){var s=t.parse(n),o=(new c).compile(s,i),a=(new u).compile(o,i,e,!0);return t.template(a)}return"data"in(i=i||{})||(i.data=!0),function(t,e){return s||(s=o()),s.call(this,t,e)}},t.VM={template:function(e){var n={escapeExpression:t.Utils.escapeExpression,invokePartial:t.VM.invokePartial,programs:[],program:function(e,n,i){var s=this.programs[e];return i?s=t.VM.program(e,n,i):s||(s=this.programs[e]=t.VM.program(e,n)),s},merge:function(e,n){var i=e||n;return e&&n&&(i={},t.Utils.extend(i,n),t.Utils.extend(i,e)),i},programWithDepth:t.VM.programWithDepth,noop:t.VM.noop,compilerInfo:null};return function(i,s){s=s||{};var o=e.call(n,t,i,s.helpers,s.partials,s.data),a=n.compilerInfo||[],r=a[0]||1,l=t.COMPILER_REVISION;if(r!==l){if(r<l)throw"Template was precompiled with an older version of Handlebars than the current runtime. Please update your precompiler to a newer version ("+t.REVISION_CHANGES[l]+") or downgrade your runtime to an older version ("+t.REVISION_CHANGES[r]+").";throw"Template was precompiled with a newer version of Handlebars than the current runtime. Please update your runtime to a newer version ("+a[1]+")."}return o}},programWithDepth:function(t,e,n){var i=Array.prototype.slice.call(arguments,3),s=function(t,s){return s=s||{},e.apply(this,[t,s.data||n].concat(i))};return s.program=t,s.depth=i.length,s},program:function(t,e,n){var i=function(t,i){return e(t,(i=i||{}).data||n)};return i.program=t,i.depth=0,i},noop:function(){return""},invokePartial:function(n,i,s,o,a,r){var l={helpers:o,partials:a,data:r};if(n===e)throw new t.Exception("The partial "+i+" could not be found");if(n instanceof Function)return n(s,l);if(t.compile)return a[i]=t.compile(n,{data:r!==e}),a[i](s,l);throw new t.Exception("The partial "+i+" could not be compiled when running in runtime-only mode")}},t.template=t.VM.template}(n),t.exports=n},function(t,e,n){"use strict";var i,s;i=[n(2),n(458),n(6),n(20),n(95),n(303)],void 0===(s=function(t,e,n,i,s,o){return{_ingredients:[],_triggers:[],_payloads:[],_actions:[],_tempCompounds:{},init:function(){return n.getSchemasAll().then(function(t){this._ingredients=this.formatIngredients(t.ingredients),this._triggers=t.triggers,this._actions=t.actions,this._payloads=t.payloads}.bind(this))},getCompoundList:function(t){return this["_"+t]},getRawCompound:function(t,e){return this["_"+t][e]},getCompound:function(t,e){var n=this["_"+t][e];return this.translateObject(n)},setCompound:function(t,e,n){this["_"+t][e]=n},formatIngredients:function(e){for(var n in e)e.hasOwnProperty(n)&&(t.Config.potion.ingredient_list[n]||s.get("byPassDotBlacklist")||"com.netvibes.analytics.new"===n&&t.isDebug("analyze-wizard"))?(e[n].id=n,e[n]=this.filterBlacklisted(e[n])):delete e[n];return e},filterBlacklisted:function(e){return s.get("byPassDotBlacklist")?e:(["triggers","actions"].forEach(function(n){var i="triggers"===n?"trigger_list":"action_list",s=t.Config.potion[i];for(var o in e[n])e[n].hasOwnProperty(o)&&!s[e[n][o].name]&&delete e[n][o];e[n]&&!Object.keys(e[n]).length&&delete e[n]}),e)},completeCompound:function(t,e){var n="date"===t.ingredient?{}:{general:{}},i=this.getCompound(e,t.name);for(var s in i.properties)i.properties.hasOwnProperty(s)&&(n.general[s]="triggers"===s?[]:"");t.config=UWA.merge(t.config||{},n)},validateCompound:function(t,e,n,s){return"faulty"===t.status||"deleted"===t.name?i.reject():new o({schema:{fields:this["_"+n][t.name].properties,notice:t.notice},initialValue:t.config?t.config.general:{},data:{compound:t,recipe:s,triggers:this._triggers,payloads:this._payloads},submitButton:!1}).isValid()},translateObject:function(t){var n=["title","description","about","result","info","usage","text","shorttext","html"];return Object.keys(t).forEach(function(i){"object"==typeof t[i]?t[i]=this.translateObject(t[i]):n.indexOf(i)>-1&&(t[i]="title"===i?e.translate(t[i]+" -- potion ingredient title"):e.translate(t[i]))},this),t}}}.apply(e,i))||(t.exports=s)},function(t,e,n){"use strict";var i,s;i=[n(9),n(16)],void 0===(s=function(t,e){return t.extend({init:function(t){this._concurrent=t||10,this._active=0,this._pending=[]},_run:function(){if(this._pending.length&&this._active<this._concurrent){var t=this._pending.shift(),e=function(){this._active-=1,this._run()}.bind(this);this._active+=1;var n=t.fn();n.then(e,e).done(),n.then(t.resolve,t.reject).done()}},add:function(t){return new e(function(e,n){this._pending.push({fn:t,resolve:e,reject:n}),this._run()}.bind(this))}})}.apply(e,i))||(t.exports=s)},function(t,e,n){"use strict";var i,s;i=[n(1),n(9)],void 0===(s=function(t,e){return e.extend({getAllItemsFromList:function(t){return t.getItems()},shouldDeduplicateItems:function(){return!1},fetch:function(){throw new Error("To implement")},call:function(t,e){throw new Error("Unsupported action "+e)},areDataStored:function(){return!1}})}.apply(e,i))||(t.exports=s)},function(t,e,n){"use strict";var i,s;i=[n(1),n(25),n(13),n(442),n(3),n(19),n(2),n(188)],void 0===(s=function(t,e,n,i,s,o,a,r){var l=i.extend({name:"netvibes",netvibes:!0,features:{"drag and compare":{version:1},feedreader:{version:1}},defaultOptions:{formOptions:{darkBackground:!0}},init:function(t,e){this.obj=t,this._parent(e)},destroy:function(){this.obj.remove(!0),this.obj=null,this._parent()},setSkeleton:function(t){this.html=t},filterExternalResources:function(t,e){var n;function i(){n=new RegExp("\\b(?:"+[].filter.call(arguments,function(t){return t}).join("|")+")\\b","i")}return"script"===t?i("modules\\/app\\.js"):"style"===t&&i("modules/(\\w+)\\/\\1\\.css"),n?e.filter(function(t){return!n.test(t)}):e},onRegisterWidget:function(){this._parent();var t=this.obj,e=this.widget;t.widget=e,void 0!==t.dataObj.id&&(e.id=t.dataObj.id),e.pageId=a.Page.id||void 0,a.Globalization.userLanguage&&(e.lang=a.Globalization.userLanguage),a.User&&a.User.locale?e.locale=a.User.locale:a.Globalization.userLocale&&(e.locale=a.Globalization.userLocale),a.isRTLLanguage()&&(e.dir="rtl"),e.isNew=t.isNew(),e.readOnly=t.isReadOnly(),e.userId=a.User.id,t.dataObj.extendSearch=0,t.refreshMode=!0},registerMenus:function(){this.widget.setMenu({name:"close",icon:"delete",help:t.i18n("Close"),visible:function(){return!this.obj.isSticky()&&!this.obj.previewMode}.bind(this)}),this.widget.setMenu({name:"unstick",icon:"pin-point",visible:function(){return this.obj.isSticky()}.bind(this)}),this.widget.setMenu({name:"options",icon:"options",help:t.i18n("Edit")}),r.hasSnapshot(this.obj)||this.widget.setMenu({name:"options/preferences",icon:"cogwheel",label:t.i18n("Settings")}),this.widget.setMenu({name:"options/insights",icon:"tooltip",label:t.i18n("Insights"),visible:function(){return this.supportsInsights()}.bind(this)}),this.widget.setMenu({name:"options/display",icon:"single-window",label:t.i18n("Display")}),this.widget.setMenu({name:"options/share",icon:"curvy-next",label:t.i18n("Share"),visible:function(){return this.obj.hasShare()}.bind(this)}),this.widget.setMenu({name:"options/addToLibrary",icon:"book",label:t.i18n("Add To Library"),visible:function(){return this.obj.supportsLibrary()}.bind(this)}),r.hasSnapshot(this.obj)||this.widget.setMenu({name:"options/refresh",icon:"refresh",label:t.i18n("Refresh")}),this.obj.previewMode||this.widget.setMenu({name:"options/clone",icon:"double-window",label:t.i18n("Duplicate"),visible:function(){return this.obj.canDuplicate()}.bind(this)}),this.widget.setMenu({name:"options/relatedSources",icon:"rss",label:t.i18n("Related sources"),visible:function(){return this.obj.supportsRelatedSources()}.bind(this)})},onUpdateMenu:function(t){if(!this.widget.readOnly&&!this.obj.previewMode){var e,n,i=this.html;this._parent(t),i.header&&(n=(e=i.header.getElement(".counter"))&&"none"!==e.getStyle("display",!0),i.header.set("data-menus-items",i.menus.childNodes.length+(n?2:0)))}},onMenuExecute:function(t){if("windowed"!==this.widget.getView()&&this.widget.requestView("windowed"),t.onExecute)this._parent(t);else switch(t.name){case"close":this.obj.close();break;case"unstick":this.obj.unstick();break;case"options/preferences":this.obj.expand(!1),this.obj.toggleEdit();break;case"options/share":this.obj.share();break;case"options/refresh":this.obj.sendContent("onRefresh");break;case"options/insights":this.obj.expand(!1),this.obj.toggleInsights(!0);break;case"options/addToLibrary":this.obj.toggleAddToLibrary(!0);break;case"options/relatedSources":this.obj.displayRelatedSourcesPreview();break;case"options/display":this.obj.expand(!1),this.obj.toggleDisplay(!0);break;case"options/clone":this.obj.clone()}},onUpdateTitle:function(t,e){this.obj.setTitle(t,e),this._parent(t)},onUpdateIcon:function(t){0===t.lastIndexOf(e.proxies.icon,0)&&(t=n.parseQuery(n.parseUrl(t).query).url,n.parseUrl(t).domain!==n.parseUrl(a.Config.urls.storage).domain&&(t=App.Utils.getFaviconUrl(t,!0))),this.widget.icon=t,this.obj.setIcon(t),this._parent(t)},onUpdateCounter:function(t,e){this.obj.setCounter(t,e),this._parent(t,e)},onUpdatePreferences:function(t){this.obj.options.editable=t.some(function(t){return"hidden"!==t.type})},onEdit:function(){this.obj.toggleEdit(!0),this._parent()},onShowEdit:function(){var e=this,n=this.html.edit;if(n){if(this.supportsInsights()){var i=n.getElements(".field")[1];t.createElement("span",{class:"insights-settings-link",html:'<span data-icon="T" class="uwa-icon insights-title-icon"></span> <span class="link-text">'+t.i18n("Show Insights")+"</span>",events:{click:function(){e.obj.toggleInsights(!0)}}}).inject(i)}this._parent()}},endEdit:function(){this.obj.toggleEdit(!1),this._parent()},getAllData:function(){var e={};return t.extend(e,this.obj.getData()),delete e.moduleUrl,e},getData:function(t){return this.obj.getData()[t]},setData:function(t,e){this.obj.getData()[t]=e,this.saveDatas()},deleteData:function(t){var e=this.obj.getData();return e.hasOwnProperty(t)&&(delete e[t],this.saveDatas()),!0},saveDatas:function(){this.obj.save()},isSecure:function(){return this.obj.dataObj.secure},resetUnreadCount:function(){this.widget.setCounter(0,"unread"),this.widget.dispatchEvent("onResetUnreadCount")},addStar:function(t){switch(this.obj.dataObj.moduleName){case"RssReader":t.srcType="feed",t.srcTitle=this.obj.dataObj.title,t.srcUrl=this.obj.dataObj.feedUrl;break;case"UWA":t.srcType="uwa",t.srcTitle=this.obj.dataObj.title,t.srcUrl=this.obj.dataObj.data.moduleUrl;break;case"MultipleFeeds":this.obj.dataObj.data.url?(t.srcType="uwa",t.srcTitle=this.obj.dataObj.title,t.srcUrl=a.Config.urls.base+"/modules/multipleFeeds/multipleFeeds.php?provider=custom&url="+n.encodeUrl(this.obj.dataObj.data.url)):(t.srcType="multiplefeeds",t.srcTitle=this.obj.dataObj.title,t.srcUrl=this.obj.dataObj.data.provider);break;default:t.srcType="uwa",t.srcModule=this.obj.dataObj.moduleName,t.srcTitle=this.obj.dataObj.title}t.moduleId=this.obj.dataObj.id,this.obj.dataObj.widgetId&&(t.widgetId=this.obj.dataObj.widgetId),App.Share.show(t)},mutate:function(t,e){this.obj.mutate(t,e)},supportsInsights:function(){var t=this.obj.getStreams()[0];return Boolean(this.obj.supportsInsights()&&t&&t.hasUpgradeInfo())}});return l.prototype.views.maximized=i.AbstractView.extend({isChromeLess:function(){return!1===this.event.chrome},isNotFullHeight:function(){return!1===this.event.fullHeight},_enter:function(t){var e,n=this,i=this.environment.html.wrapper;function a(){i.toggleClassName("maximized-view",t).toggleClassName("chromeless-view",t&&n.isChromeLess()).toggleClassName("chrome-view",t&&!n.isChromeLess()).toggleClassName("full-height",t&&!n.isNotFullHeight()),n._active=t,clearTimeout(e),e=null,i.removeEvent("transitionEnd",a).setOpacity(1),n.isChromeLess()||i[t?"addEvents":"removeEvents"](n.events),n.dispatchEvent(t?"onEnter":"onLeave")}this.events||(this.events={click:function(t){s.getElement(t)===i&&n.leave()}}),!o.Features.transitionsCSS||t&&!this.event.previous?a():(i.addEvent("transitionEnd",a).setOpacity(0),e=setTimeout(a,400))},enter:function(){document.body.addClassName("nv-module-overflow"),this._enter(!0)},leave:function(){this._enter(!1)},isSingle:function(){return!0},destroy:function(){document.body.removeClassName("nv-module-overflow"),this._parent()}}),l.prototype.views.collapsed=i.AbstractView.extend({_toggle:function(t){this.environment.obj.syncExpand(),this.dispatchEvent(t?"onEnter":"onLeave")},enter:function(){this._toggle(!0)},leave:function(){this._toggle(!1)}}),t.namespace("Environments/Netvibes",l,t)}.apply(e,i))||(t.exports=s)},function(t,e,n){var i,s;i=[n(1),n(18),n(57),n(9),n(24),n(39),n(170),n(22),n(13),n(15),n(3),n(86),n(25),n(348),n(696),n(697),n(698),n(699),n(16),n(19),n(147)],void 0===(s=function(t,e,n,i,s,o,a,r,l,c,u,h,d,p,m,f,g,v,b,y,w){"use strict";function x(e){var n=t.hosts.netvibes+"/subscribe.php",i={module:"UWA",moduleUrl:e.getUrl()};return e.getPreferences().forEach(function(t){i[t.name]=t.value}),n+"?"+l.toQueryString(i)}var C=Object.create(null),_=i.extend(s,o,a,r,{name:null,inited:!1,registered:!1,launched:!1,widget:null,html:null,features:{},views:{},menuClass:g,defaultOptions:{formOptions:{nativeInputs:!1},defaultView:{type:"windowed"},initialView:null},init:function(t){this.setOptions(t),this.html={},this.view={},this.dispatchInit()},dispatchInit:function(){var t=this;t.setPeriodical("init",function(){document.body&&!t.inited&&(t.clearPeriodical("init"),t.dispatchEvent("onInit"),t.inited=!0)},100,!0)},hasFeature:function(e,n){var i,s=t.owns(this.features,e)&&this.features[e];if(!s)return!1;if(n)for(i in n)if(t.owns(n,i)&&(!t.owns(s,i)||n[i]!==s[i]))return!1;return!0},getWidget:function(){var t=this.widget||new m;return this.widget||this.registerWidget(t),t},registerWidget:function(e){var n=this;n.widget=e,n.setPeriodical("register",function(){if(n.inited&&!n.registered){var i,s=n.html;for(i in n.clearPeriodical("register"),e.environment=n,s)s.hasOwnProperty(i)&&s[i]!==window&&(e.elements[i]=t.extendElement(s[i]));e.body=s.body,t.Widgets=t.Widgets||{},t.Widgets.instances=t.Widgets.instances||[],t.Widgets.instances.push(e),n.dispatchEvent("onRegisterWidget"),n.registerMenus(),n.registered=!0}},100,!0)},launchWidget:function(t,e){var n=this;n.setPeriodical("launch",function(){n.isDataReady()&&n.registered&&(n.clearPeriodical("launch"),n.getWidget().launch(t,e))},100,!0)},destroy:function(){var e,n,i=this.html,s=this.widget;for(e in s&&(t.Widgets.instances.splice(t.Widgets.instances.indexOf(s),1),s.destroy(),this.widget=null),this.clearDelayed(),this.clearPeriodical(),i)i.hasOwnProperty(e)&&c.destroy.call(i[e]);for(n in this.view)this.view.hasOwnProperty(n)&&this.view[n]&&this.view[n].destroy();this.removeEvent(),this.registered=!1,this.launched=!1},onInit:function(){},onRegisterWidget:function(){var t=this,e=t.html,n=t.widget;t.data=new p,e.menus&&c.addEvent.call(e.menus,"click",function(e){var n=u.getElement(e),i=t.widget.getMenu(n.getAttribute("data-name"));i&&(t.dispatchEvent("onMenuExecute",[i]),i.items&&(t.popupMenu||(t.popupMenu=new t.menuClass(t).inject(document.body)),t.popupMenu.setTarget(n).setItems(i.items).toggle()))}),e.editAction&&(c.show.call(e.editAction),c.addEvent.call(e.editAction,"click",function(e){u.stop(e),t.dispatchEvent("toggleEdit")})),e.refreshAction&&(c.show.call(e.refreshAction),c.addEvent.call(e.refreshAction,"click",function(e){u.stop(e),t.dispatchEvent("onRefresh")})),e.shareAction&&(e.shareAction.href=x(n),c.addEvent.call(e.shareAction,"click",function(e){u.stop(e),t.dispatchEvent("onOpenURL",x(n))})),e.wrapper&&c.handleExternalLinks.call(e.wrapper,function(e,n){t.dispatchEvent("onOpenURL",[e,n])}),(e.viewport||e.wrapper)&&c.addEvent.call(e.viewport||e.wrapper,"resize",function(){t.dispatchEvent("onResize")}),c.addEvent.call(document,"keydown",function(e){var n=e.which||e.keyCode;t.dispatchEvent("onKeyboardAction",[n,e])}),e.body&&[y.Engine.name,y.Engine.name+y.Engine.version,y.Platform.name,y.Features.touchEvents?"touch":"no-touch",n.readOnly&&"readonly",t.name&&"environment-"+t.name].forEach(function(t){t&&c.addClassName.call(e.body,t)}),t.dispatchEvent("onResize"),t.dispatchEvent("onViewRequest",[t.options.initialView])},registerMenus:function(){var e=this.getWidget();e.setMenu({name:"options",icon:"options"}),e.readOnly||e.setMenu({name:"options/preferences",icon:"cogwheel",label:t.i18n("Settings"),onExecute:"toggleEdit"}),e.setMenu({name:"options/refresh",icon:"refresh",label:t.i18n("Refresh"),onExecute:"onRefresh"})},onUpdateMenu:function(n){var i=this.html;i.menus&&(n||(n=this.widget.menus),i.menus.empty(),n.forEach(function(n){var s;!1!==(t.is(n.visible,"function")?n.visible():!1!==n.visible)&&(s=t.createElement("span",{class:"uwa-widget-menu-button","data-name":n.name}),n.help&&(s.set("title",n.help),s.set("uwa-tooltip",e.escapeHTML(n.help))),n.icon&&s.addClassName("uwa-icon "+n.icon),n.className&&s.addClassName(n.className),s.inject(i.menus),i.header&&i.header.set("data-menus-items",i.menus.childNodes.length))}))},onMenuExecute:function(e){t.is(e.onExecute,"string")&&this.widget.dispatchEvent(e.onExecute,[e])},isDataReady:function(){return!t.Storage||t.Storage.allInstancesReady()},getAllData:function(){return this.data.getAll()},getData:function(t){return this.log("getData:"+t),this.data.get(t)},setData:function(t,e){return this.log("setData:"+t+","+e),this.data.set(t,e)},deleteData:function(t){return this.log("deleteData:"+t),this.data.remove(t)},dispatchEvent:function(t,e,n,i){this.log("environment.event:"+t);var s=this.widget;!i&&s&&this.addEventOnce(t,s.dispatchEvent.bind(s,t,e,n,!0)),this._parent(t,e,n)},loadWidget:function(e,n){return n=t.extend({onFailure:function(t){throw t},onTimeout:function(t){throw t},onComplete:function(){}},n),e=l.buildUrl(window.location.toString(),e),n.embedded?this.loadEmbeddedWidget(e,n):this.loadInlinedWidget(e,n),this},loadInlinedWidget:function(){var e,i={};function s(t,e,s){i[t]&&(n.invoke(i[t],e,s),delete i[t])}return e=function(e,o){var a=o.expositionError||o.error||o.errors;if(!a||t.is(a,"array")&&0===a.length){(o=this.convertSourceToJson(o)).className||(o.checksum||(o.checksum=l.getCRC32(e)),o.className="w-"+o.checksum),o.style&&(l.setCss(o.className,o.style,"."+o.className,e),delete o.style),"string"==typeof o.script&&(o.script=new Function("widget",o.script)),o.styles=this.filterExternalResources("style",o.styles||[]),o.scripts=this.filterExternalResources("script",o.scripts||[]);for(var r=[];o.styles.length;)r.push(w.css(l.buildUrl(e,o.styles.shift())));for(;o.scripts.length;)r.push(w.js(l.buildUrl(e,o.scripts.shift())));b.all(r).done(function(){var s=i[e];i[e]=o,t.is(s,"array")&&n.invoke(s,"onComplete",o)},function(t){s(e,"onFailure",t)})}else s(e,"onFailure",a)},function(n,o){var a=i[n],r=o.fetcher||"XML",l=o.onComplete,c=this;return o.onComplete=function(t){var e=c.getWidget();e.uwaUrl=n,e.setTitle(t.title),e.setIcon(t.icon),e.setMetas(t.metas),e.setPreferences(t.preferences),e.setPlugins(t.plugins),e.setBody(t.body),c.html.wrapper.addClassName(t.className),t.script&&t.script(e),l(e,c)},t.is(a,"object")?o.onComplete(a):(t.is(a,"array")?a.push(o):i[n]=[o],o=t.merge({onComplete:e.bind(this,n),onTimeout:s.bind(this,n,"onTimeout"),onFailure:s.bind(this,n,"onFailure")},o),t.is(r,"function")?r.call(this,n,o):!t.is(r,"string")||r.length>4?o.onComplete(r):"JSON"===(r=r.toUpperCase())?this.fetchJsonWidget(n,o):this.fetchXmlWidget(n,o)),this}}(),loadEmbeddedWidget:function(e,n){var i,s,o=this,a=c.setStyle,r={cache:n.cache,container:o.html.body,displayHeader:!1,displayFooter:!1,displayEdit:!0,autoLaunch:!1};return t.is(n.embedded,"object")&&t.extend(r,n.embedded),i=new v(e,r),a.call(o.html.body,"padding",0),a.call(i.elements.body,"padding",0),o.addEvent("onRegisterWidget",function(){var t={},e={onUpdateValue:!0,onRefresh:!0,onUpdateTitle:!0,onUpdateIcon:!0,onUpdateCounter:!0,onSearch:!0,onResetSearch:!0,onShowEdit:!0,onKeyboardAction:!0,onViewError:!0,onViewChange:!0,onEdit:!0,endEdit:!0,onLoad:function(){i.launch(o.getAllData(),o.getWidget().readOnly)}};Object.keys(e).forEach(function(n){var s=e[n];!0===s&&(s=i.sendRemote.bind(i,n)),t[n]=s}),o.addEvents(t)}),s=o.getWidget(),i.addEvent("onRegisterWidget",function(){var e={},a={onRefresh:!0,onUpdateTitle:!0,onUpdateIcon:!0,onUpdateCounter:!0,onSearch:!0,onResetSearch:!0,onHideEdit:!0,onShowEdit:!0,onOpenURL:!0,onViewRequest:!0,onInitConfig:function(t){t.preferences&&s.setPreferences(t.preferences),t.plugins&&s.setPlugins(t.plugins),t.metas&&s.setMetas(t.metas)},onUpdatePreferences:function(t){s.setPreferences(t)},onUpdateValue:function(t,e){s.setValue(t,e)}};r.displayEdit||t.merge(a,{onEdit:!0,endEdit:!0}),Object.keys(a).forEach(function(t){var n=a[t];!0===n&&(n=function(){s.dispatchEvent(t,arguments)}),e[t]=n}),i.addEvents(e),n.onComplete(s,o)}),o.embedded=i,o},convertSourceToJson:function(){var e=["name","defaultValue","type","label","step","min","max"],n=["label","value"],i=/(java|ecma)script$/i;function s(t,e,n){var i,s,o,a=[].slice.call(t.childNodes);for(i=0,s=a.length;i<s;i++)o=a[i],n&&1!==o.nodeType||e(o,o.nodeValue)}function o(t,e){var n,i,s,o=t.attributes||[];for(n=0,i=o.length;n<i;n++)e((s=o[n]).name,s.value)}var a={"widget:preferences":function(t,i){s(i,function(i){var a,r={};o(i,function(t,n){-1!==e.indexOf(t)&&(r[t]=n)}),r.name&&("list"!==r.type&&"checklist"!==r.type||(a=[],s(i,function(t){var e={};o(t,function(t,i){-1!==n.indexOf(t)&&(e[t]=i)}),e.label&&a.push(e)},!0),r.options=a),t.preferences.push(r))},!0)},"widget:plugins":function(t,e){s(e,function(n){var i={name:e.getAttribute("name"),options:{}};o(n,function(t,e){i[t]=e}),s(n,function(t){var e=t.getAttribute("name"),n=t.getAttribute("value");"widget:options"===t.tagName?(i.options[e]={},s(t,function(t){var n=t.getAttribute("name"),s=t.getAttribute("value");n&&(i.options[e][n]=s)},!0)):e&&(i.options[e]=n)},!0),i.name&&t.plugins.push(i)})},link:function(t,e,n){if(n.href){var i=n.rel;"icon"===i?t.icon=n.href:"stylesheet"!==i||n.href.contains("UWA/assets")||n.href.contains("standalone.css")||n.href.contains("uwa/style.css")||t.styles.push(n.href)}},meta:function(t,e,n){var i=n.content;i="false"!==i&&("true"===i||i),t.metas[n.name]=i},script:function(t,e,n){if(n.src||(n.language||n.type)&&!i.test(n.type)&&!n.language){if(!n.src||n.src.contains("Standalone")||n.src.contains("load.js.php"))return e;t.scripts.push(n.src)}else{var o="";s(e,function(t,e){o+=e}),/UWA(\s+)?=/.test(o)||(t.script+=o)}},title:function(t,e){s(e,function(e,n){t.title+=n})},style:function(t,e){s(e,function(e,n){t.style+=n})},fallback:function(t,e,n,i){var a;return"body"===i?((a=document.createElement("div")).className=e.className,t.body=a):a=document.createElement(i),o(e,function(t,e){a.setAttribute(t,e)}),s(e,function(e,n){switch(e.nodeType){case 1:var i=r(e,t);i&&a.appendChild(i);break;case 4:case 3:a.appendChild(document.createTextNode(n))}}),a}};function r(t,e){9===t.nodeType&&(t=t.childNodes[0]);var n=t.nodeName.toLowerCase(),i={};return o(t,function(t,e){i[t]=e}),a[a.hasOwnProperty(n)?n:"fallback"](e,t,i,n)}return function(e){if(t.is(e,"string"))try{e=l.loadXml(e)}catch(n){t.log("Invalid UWA XHTML source detected, fallback on HTML parsor."),e=l.loadHtml(e)}var n;return t.is(e,"object")?n=e:r(e,n={title:"",icon:"",preferences:[],plugins:[],metas:{},body:[],script:"",scripts:[],style:"",styles:[]}),n}}(),fetchJsonWidget:function(e,n){e in C||(C[e]=new b(function(i,s){var o,a={mode:"full",uwaUrl:e};t.debug&&(a.flush=1,a.mode="full_debug"),o=(n.server||t.hosts.exposition)+"/widget/json",h.request(o,{data:a,onComplete:i,onFailure:s,useJsonpRequest:!0,callback:e})})),C[e].then(n.onComplete,n.onError)},fetchXmlWidget:function(t,e){d.request(t,{cache:e.cache,type:"text",onFailure:e.onFailure,onTimeout:e.onTimeout,onComplete:e.onComplete})},filterExternalResources:function(t,e){return e},onRefresh:function(){var t=this.getWidget();t.data={},t.hasEvent("onRefresh")||t.dispatchEvent("onLoad",void 0,void 0,!0)},onUpdateIcon:function(e){var n=this.html;function i(){n.iconLoader.destroy(),delete n.iconLoader}n.icon&&(n.iconLoader&&i(),n.iconLoader=t.createElement("img",{styles:{display:"none"},events:{load:function(){n.icon.getElement("img").setAttribute("src",e),i()},error:function(){i()}}}).inject(this.html.wrapper),n.iconLoader.setAttribute("src",e))},onUpdateTitle:function(t){var e=this.html.title;e&&e.setHTML(t)},onUpdateCounter:function(t){var e=this.html.counter;e&&e.setText(t?"("+(!0===t?"●":t)+")":"")},onEdit:function(){var e=this,n=e.html,i=e.getWidget(),s=i.metas,o=i.getPreferences();if(n.edit){if(n.edit.empty(),i.hasPreferences()){if(n.preferences){var a=n.preferences.getFormValues();o.forEach(function(e){t.is(a[e.name])&&(e.value=a[e.name])})}o.push({type:"submit",name:"endEdit",value:t.i18n("Done")}),n.preferences&&n.preferences.destroy(),n.preferences=new f({nativeInputs:this.options.formOptions.nativeInputs,darkBackground:this.options.formOptions.darkBackground,fields:o,events:{onChange:function(t,n,s){i.setValue(n,s),e.embedded?e.embedded.sendRemote("dispatchEvent",t,n,s):e.dispatchEvent(t,[n,s])},onSubmit:function(t,n){var s=!1;e.addEventOnce("onUpdateValue",function(){s=!0}),Object.keys(n).forEach(function(t){i.setValue(t,n[t])}),e.dispatchEvent("endEdit"),s&&e.dispatchEvent("onRefresh")}}}).inject(n.edit)}s.author&&n.edit.addContent({tag:"div",class:"moduleInfos",html:[{tag:"p",html:[t.i18n("Widget by")+" ",{tag:"strong",html:s.website?{tag:"a",href:s.website,text:s.author}:{tag:"span",text:s.author}}]}]})}e.dispatchEvent("onShowEdit")},onShowEdit:function(){var t=this.html;t.wrapper&&t.wrapper.addClassName("onEdit")},endEdit:function(){this.dispatchEvent("onHideEdit")},onHideEdit:function(){var t=this.html;t.wrapper&&t.wrapper.removeClassName("onEdit")},onCloseEdit:function(){this.html.preferences.destroy(),this.html.preferences=null},onOpenURL:function(n){if(n=l.parseUrl(n),!window.open(n.source,"_blank"))return window.alert(e.format(t.i18n('Unable to open "{0}", Please turn off your popup blocker and try again.'),e.truncate(n.source,50))),!1},onViewRequest:function(){function e(t,e,n){n&&(e.error=n),t.dispatchEvent(n?"onViewError":"onViewChange",[e])}function n(t,e,n){t[e]&&t[e].destroy(),t[e]=n}return function(i){var s;i||(i=this.options.defaultView),i=t.clone(i),this.view.current&&this.view.current.event&&(i.previous=t.clone(this.view.current.event),delete i.previous.previous),this.view.current&&this.view.current.matchEvent(i)?e(this,i,"This view is already active."):(s=function t(i,s){var o=i.views[s.type],a=o&&new o(i,s);return a&&a.addEvents({onEnter:function(){i.view.next===this&&(n(i.view,"current",this),this.isSingle()&&(_._currentSingleView=this),i.view.next=null,e(i,this.event))},onLeave:function(){i.view.current===this&&(_._currentSingleView===this&&(_._currentSingleView=null),i.view.next||(i.view.next=t(i,i.options.defaultView)),i.view.next.enter())},onError:function(t){i.view.next===this&&(n(i.view,"next"),i.view.current.enter()),e(i,this.event,t)}})}(this,i))?s.isSingle()&&_._currentSingleView&&_._currentSingleView!==this.view.current?(e(this,i,"An environment is already in single view."),s.destroy()):(n(this.view,"next",s),this.view.current?this.view.current.leave():this.view.next.enter()):e(this,i,'No implementation available for the view "'+i.type+'".')}}(),onViewChange:function(t){this.getWidget()._view=t},onViewError:function(t){this.log("View error: "+h.encode(t))}});return _.AbstractView=i.extend(o,{event:null,environment:null,init:function(t,e){this.environment=t,this.event=e},destroy:function(){this.removeEvents(),_._currentSingleView===this&&(_._currentSingleView=null)},enter:function(){this.dispatchEvent("onEnter")},leave:function(){this.dispatchEvent("onLeave")},isSingle:function(){return!1},matchEvent:function(t){return this.event.type===t.type},onEnter:function(){var t=this.environment.html;t.wrapper&&t.body&&n.invoke([t.wrapper,t.body],"addClassName",this.event.type+"-view")},onLeave:function(){var t=this.environment.html;t.wrapper&&t.body&&n.invoke([t.wrapper,t.body],"removeClassName",this.event.type+"-view")}}),_.prototype.views.windowed=_.AbstractView.extend({}),y.Features.fullscreen&&(_.prototype.views.fullscreen=_.AbstractView.extend({enter:function(){var t,e=this,n=e.getTarget();t={fullscreenchange:function(){document.fullscreenElement===n?e.dispatchEvent("onEnter"):(e.dispatchEvent("onLeave"),c.removeEvents.call(document,t))},fullscreenerror:function(){e.dispatchEvent("onError",["Error while trying to set the fullscreen"]),c.removeEvents.call(document,t)}},c.addEvents.call(document,t),n.requestFullscreen()},leave:function(){document.fullscreenElement===this.getTarget()?document.exitFullscreen():this.dispatchEvent("onLeave")},isSingle:function(){return!0},getTarget:function(){var t=this.environment.html;return t.content||t.body}})),t.namespace("Environment",_,t)}.apply(e,i))||(t.exports=s)},function(t,e,n){"use strict";var i,s;i=[n(150),n(444)],void 0===(s=function(t,e){return t.extend({name:"addToLibrary",build:function(){this.setTitle(_("Add to Library"),"book")},buildForm:function(){var t=this.module.getStreamCustomTitles(),n=this.module.getStreamIds().map(function(e,n){return{id:e,title:t[n].title}});return this.form=new e({theme:"overlay",moduleId:this.module.getId(),action:"add",streams:n}),this.form.addEventOnce("onLibraryUpdate",this.close.bind(this)),this.form.addEventOnce("onCancel",this.close.bind(this)),this.form.addEvent("onContentUpdate",this.resize.bind(this)),this.form},toggle:function(t){t&&this.setContent(this.buildForm()),this._parent(t)},onClose:function(){this._parent(),this.form.destroy()}})}.apply(e,i))||(t.exports=s)},function(t,e,n){"use strict";var i,s;i=[n(1),n(18),n(16),n(10),n(8),n(2),n(21),n(17),n(4),n(6),n(41),n(297)],void 0===(s=function(t,e,n,i,s,o,a,r,l,c,u,h){var d=t.createElement;return i.extend({name:"nv-form-library",init:function(t){this._parent(t),this.libraryProcessor=new h(Object.assign({streams:this.getStreamsToProcess()},l.pick(t,"allLib","originalLib","filters"))),this.elements.container||this.buildSkeletton()},buildSkeletton:function(){return this.elements.container=d("div",{class:this.getClassNames()}).addContent(this.elements.controlsContainer=d("div",{class:this.getClassNames("-controls")}).addContent(this.buildSelectLibrary(),"add"===this.options.action||o.isAloneEnvironment()?"":this.buildSelectTab({inputName:"selectTab",inputText:_("Or select tab")})),this.elements.navContainer=d("div",{class:this.getClassNames("-nav-group")}).addContent(this.buildBtnSave())),this.options.moduleId&&!o.isAloneEnvironment()&&this.elements.controlsContainer.addContent(this.buildCheckboxRemoveApp()),this.elements.container.addEvent("update",function(){this.dispatchEvent("onContentUpdate")}.bind(this)),this.elements.container},buildSelectLibrary:function(){var t=[],e=d("div",{class:this.getClassNames("-controls-group")}).addContent(d("label",{text:_("Select library")}),this.elements.select=new s.Select({className:this._getThemedClassName("lib-selector"+(this._hasCreateNew()?" has-create-new":"")),events:{onChange:function(){"new"===this.getSelectedLib()&&this.switchToLibCreation()}.bind(this)}}));return c.getLibraries().done(function(e){e.libraries.length?(t.push({label:_("Choose..."),value:"choose"}),this._hasCreateNew()&&t.push({label:_("Create new..."),value:"new"}),e.libraries.forEach(function(e){(!this.options.originalLib||this.options.originalLib&&this.options.originalLib.getLibraryId()!==e.id)&&t.push({label:e.title,value:e.id})}.bind(this)),this.elements.select.putOptions(t)):this._hasCreateNew()?this.switchToLibCreation():(this.hideFormControls(),this.displaySimpleMessage(_("No libraries were found. Please add at least one Library app to your dashboard.")))}.bind(this),function(){this.displayCriticalError(_("Error loading libraries list"))}.bind(this)),e},buildCheckboxRemoveApp:function(){return d("div",{class:this.getClassNames("-controls-group")}).addContent(d("label",{for:"remove-original",text:_("Remove original app")}),d("div",{}).addContent(this.elements.checkboxRemove=new s.Checkbox({className:"green remove-original",attributes:{id:"remove-original"}})))},buildInputLibName:function(){return d("div",{class:this.getClassNames("-controls-group")}).addContent(d("label",{text:_("New library name")}),this.elements.nameNewLib=new s.Text({className:this._getThemedClassName("new-lib-name")}))},buildSelectTab:function(e){var n=[],i=d("div",{class:this.getClassNames("-controls-group")}).addContent(d("label",{text:e.inputText}),this.elements[e.inputName]=new s.Select({className:this._getThemedClassName("choose-tab-dropdown")}));return"selectTab"===e.inputName&&n.push({label:_("Choose..."),value:"choose",selected:!0}),a.getAll().forEach(function(i){n.push({label:i.dataObj.title,value:i.dataObj.id,selected:!("selectTab"===e.inputName||!t.is(i.isSelected))&&i.isSelected()})}),this.elements[e.inputName].putOptions(n),i},buildBtnSave:function(){var t=d("div",{class:"nav-group"+this.getClassNames("-controls-group")}).addContent(this.elements.saveBtn=new s.Button({value:"move"===this.options.action?_("Move"):"copy"===this.options.action?_("Copy"):_("Add"),className:this._getThemedClassName("save green")}));return this.elements.saveBtn.addEvent("onClick",this.onSaveClick.bind(this)),t},_getThemedClassName:function(t){return"overlay"===this.options.theme&&(t=t.replace("green","light-grey")+" small"),t},_hasCreateNew:function(){return!o.isIn3DDashboard()},displayCriticalError:function(t){this.elements.controlsContainer.empty(),this.elements.navContainer.empty(),d("div",{class:"nav-group"+this.getClassNames("-controls-group")}).addContent(new s.Button({attributes:{type:"submit"},className:"green medium add-button",value:_("Cancel"),events:{onClick:function(){this.dispatchEvent("onCancel")}.bind(this)}})).inject(this.elements.navContainer),this.displayErrorMessage(t)},displayErrorMessage:function(t){this.destroyErrorMessage(),this.errorMessage=d("div",{class:"uwa-message error",text:t}),this.errorMessage.inject(this.elements.container,"top")},destroyErrorMessage:function(){this.errorMessage&&this.errorMessage.destroy()},displaySimpleMessage:function(t){this.simpleMessage&&this.simpleMessage.destroy(),this.simpleMessage=d("div",{class:"uwa-message",text:t}),this.simpleMessage.inject(this.elements.container,"top")},getTitle:function(){var t=this.shouldProcessFullLibrary()?this.options.originalLib.getData().streamCount:this.options.streams.length,n=this.options.action,i={move:{singular:_("Move 1 source"),plural:_("Move {0} sources")},copy:{singular:_("Copy 1 source"),plural:_("Copy {0} sources")}};return t>1?e.format(i[n].plural,t):i[n].singular},getSelectedLib:function(){return this.elements.select.getValue()[0]?"choose"!==this.elements.select.getValue()[0]&&this.elements.select.getValue()[0]:"new"},getSelectedTab:function(){return!!this.elements.selectTab&&("choose"!==this.elements.selectTab.getValue()[0]&&this.elements.selectTab.getValue()[0])},getValues:function(){if(this.getSelectedLib()||this.getSelectedTab()){if("new"===this.getSelectedLib())return{action:"createNewLib",title:this.elements.nameNewLib.getValue()||_("My library"),tabId:this.elements.selectTabNewLib.getValue()[0]};var t={};return this.getSelectedLib()&&(t.libId=this.getSelectedLib()),this.getSelectedTab()&&(t.action="addToTab",t.tabId=this.getSelectedTab()),t}this.displayErrorMessage(_("You have to select a library or a tab."))},shouldProcessFullLibrary:function(){return Boolean(this.options.allLib&&this.options.originalLib)},switchToLibCreation:function(){this.destroyErrorMessage(),this.elements.controlsContainer.setContent(this.buildInputLibName()),o.isAloneEnvironment()||this.elements.controlsContainer.addContent(this.buildSelectTab({inputName:"selectTabNewLib",inputText:_("Add to my tab")})),this.options.moduleId&&!o.isAloneEnvironment()&&this.elements.controlsContainer.addContent(this.buildCheckboxRemoveApp())},getStreamsToProcess:function(){return this.options.streams.map(function(t){return{id:t.getId?t.getId():t.id,title:t.getTitle?t.getTitle():t.title}})},setButtonState:function(t){var e=this.elements,n=e.saveBtn.getContent().getParent();e.saveBtn.setDisabled(!0),n.removeClassName("waiting"),n.removeClassName("success"),"waiting"===t?(n.addClassName("waiting"),e.spinner||(e.spinner=new u({autostart:!0,size:30,color:"#ffffff"}),n.addContent(e.spinner))):"success"===t&&(n.addClassName("success"),e.success||(e.success=d("div",{class:"uwa-icon checked"}),n.addContent(e.success)))},removeOriginalApp:function(){r.getById(this.options.moduleId).remove()},hideFormControls:function(){this.elements.controlsContainer.hide(),this.elements.navContainer.hide()},onSaveClick:function(){var t,e=this.getValues();e&&(this.shouldProcessFullLibrary()||this.options.streams.length?(this.setButtonState("waiting"),e.libId?t=n.resolve(e.libId):e.tabId&&"createNewLib"===e.action?t=this.libraryProcessor.createLibrary(e):e.tabId&&"addToTab"===e.action&&(t=n.resolve()),t.done(function(t){(t?"move"===this.options.action?this.libraryProcessor.moveToLibrary(t):"copy"===this.options.action?this.libraryProcessor.copyToLibrary(t):this.libraryProcessor.addToLibrary(t):"move"===this.options.action?this.libraryProcessor.removeFromLibrary():n.resolve()).then(function(){var e=t&&r.getById(t);e&&e.sendContent("onRefresh")}).then(function(){this.elements.checkboxRemove&&this.elements.checkboxRemove.isChecked()&&this.removeOriginalApp(),e.tabId&&"addToTab"===e.action&&this.libraryProcessor.addStreamToTab({streams:this.options.streams,tabId:e.tabId}),this.setButtonState("success"),this.dispatchEvent("onLibraryUpdate")}.bind(this)).fail(function(t){this.displayErrorMessage(t.message||t||_("Error on library processing"))}.bind(this)).done()}.bind(this))):this.displayErrorMessage(_("You don't have any sources to add.")))}})}.apply(e,i))||(t.exports=s)},function(t,e,n){"use strict";var i,s;i=[n(6),n(27),n(446)],void 0===(s=function(t,e,n){return n.extend({urlRegexp:/^(https?:\/\/)?(?:([^@/:]*)(?::([^/@]*))?@)?(.+)/,errors:{error:_("An error occured. Maybe you entered a bad URL?"),error_201:_("The feed does not have any content (201 No Content)."),error_403:_("We do not have the permission to download this feed (403 Forbidden)."),error_404:_("No feed has been found at this address (404 Not Found)."),error_500:_("The feed you requested returned an unexpected server error (500 Internal Server Error)."),unknown_error:_("An unhandled error has been returned by the server."),bad_response:_("Bad response from the server, try again later."),no_feed:_("No feed was found on this page.")},init:function(t){this._parent(t),this.addEvent("onSubmit",function(){this.launchSearch()}.bind(this))},launchSearch:function(e,n){var i=this.getValue();i&&(this.dispatchEvent("onSearchStart"),t.widgetPreview({query:this.cleanUpURL(i,e,n)}).done(this.requestCallback.bind(this,null),this.requestCallback.bind(this)))},cleanUpURL:function(t,e,n){return e&&n&&(t=t.replace(this.urlRegexp,function(t,i,s,o,a){return(i||"")+encodeURIComponent(e)+":"+encodeURIComponent(n)+"@"+a})),t},requestCallback:function(t,n){this.dispatchEvent("onSearchEnd"),"error_401"!==t?t?this.dispatchEvent("onSearchError",[e.getErrorMessage(t,this.errors)]):n.length>0?this.dispatchEvent("onSearchSuccess",[n]):this.dispatchEvent("onSearchError",[this.errors.no_feed]):this.dispatchEvent("onCredentialsRequired")}})}.apply(e,i))||(t.exports=s)},function(t,e,n){"use strict";var i,s;i=[n(1),n(3),n(10),n(447),n(41)],void 0===(s=function(t,e,n,i,s){var o=t.createElement;return n.extend({name:"nv-search-field",defaultOptions:{large:!1,submitIcon:"U"},init:function(t){this.setOptions(t),this.elements={},this.buildSkeleton()},buildSkeleton:function(){this.elements.container=o("div",{class:this.getClassNames("-container")+(this.getOption("large")?" large":""),html:[o("form",{autocomplete:"off",events:{submit:function(t){t.preventDefault()}},html:[this.elements.feedUrl=new i({name:"new-feed",autocomplete:"off",large:this.getOption("large"),events:{onKeyDown:this.onSearchInputKeyDown.bind(this),onReset:function(){this.dispatchEvent("onReset")}.bind(this)}})]}),o("div",{class:"submit uwa-icon","data-icon":this.getOption("submitIcon"),title:_("Submit"),events:{click:this.onSearchSubmitClick.bind(this)}}),this.elements.spinner=new s({autostart:!1,size:40,color:"#959595"})]})},focus:function(){this.elements.feedUrl.focus()},setValue:function(t){this.elements.feedUrl.setValue(t)},getValue:function(){return this.elements.feedUrl.getValue()},setLoading:function(t){this.elements.container.toggleClassName("loading",t),this.elements.feedUrl.setDisabled(t),this.elements.spinner.toggle(t)},setDisabled:function(t){this.elements.container.toggleClassName("disabled",t),this.elements.feedUrl.setDisabled(t)},onSearchInputKeyDown:function(t){"return"===e.whichKey(t)&&this.dispatchEvent("onSubmit",[this.getValue()])},onSearchSubmitClick:function(){this.dispatchEvent("onSubmit",[this.getValue()])}})}.apply(e,i))||(t.exports=s)},function(t,e,n){"use strict";var i,s;i=[n(1),n(10),n(8)],void 0===(s=function(t,e,n){var i=t.createElement;return e.extend({name:"nv-resettable-input",defaultOptions:{name:"",autocomplete:"",large:!1,resetIcon:","},init:function(t){this.setOptions(t),this.elements={},this.buildSkeleton()},buildSkeleton:function(){this.elements.container=i("div",{class:this.getClassNames("-container")+(this.getOption("large")?" large":""),html:[this.elements.input=new n.Text({attributes:{name:this.getOption("name")?this.getOption("name"):"",autocomplete:this.getOption("autocomplete")?this.getOption("autocomplete"):""},className:"input"+(this.getOption("large")?" large":""),events:{onKeyDown:function(t){this.dispatchEvent("onKeyDown",[t])}.bind(this)}}),this.elements.resetIcon=i("div",{class:"reset uwa-icon",title:_("Delete"),"data-icon":this.getOption("resetIcon"),events:{click:this.onResetClick.bind(this)}})]})},focus:function(){this.elements.input.focus()},setValue:function(t){this.elements.input.setValue(t)},getValue:function(){return this.elements.input.getValue()},setDisabled:function(t){return this.elements.resetIcon.setStyle("visibility",t?"hidden":"visible"),this.elements.input.setDisabled(t)},onResetClick:function(){this.elements.input.setValue(""),this.dispatchEvent("onReset")}})}.apply(e,i))||(t.exports=s)},function(t,e,n){"use strict";var i,s;i=[n(1),n(3),n(10),n(8)],void 0===(s=function(t,e,n,i){var s=t.createElement;return n.extend({name:"nv-feeddiscover-credentials",defaultOptions:{submitIcon:"U"},init:function(t){this.setOptions(t),this.elements={},this.buildSkeleton()},buildSkeleton:function(){this.elements.container=s("div",{class:this.getClassNames("-container")+(this.getOption("large")?" large":""),html:[this.elements.name=new i.Text({className:"name"+(this.getOption("large")?" large":""),attributes:{type:"text","data-type":"text",placeholder:_("User name")},events:{onKeyDown:this.onInputKeyDown.bind(this)}}),this.elements.password=new i.Text({className:"password"+(this.getOption("large")?" large":""),attributes:{type:"password","data-type":"password",placeholder:_("Password")},events:{onKeyDown:this.onInputKeyDown.bind(this)}}),s("div",{class:"submit uwa-icon","data-icon":this.getOption("submitIcon"),events:{click:this.onSubmitClick.bind(this)}})]})},focus:function(){this.elements.name.focus()},getNameValue:function(){return this.elements.name.getValue()},getPasswordValue:function(){return this.elements.password.getValue()},onInputKeyDown:function(t){"return"===e.whichKey(t)&&this.dispatchEvent("onSubmit",[this.getNameValue(),this.getPasswordValue()])},onSubmitClick:function(){this.dispatchEvent("onSubmit",[this.getNameValue(),this.getPasswordValue()])}})}.apply(e,i))||(t.exports=s)},function(t,e,n){"use strict";var i,s;i=[n(1),n(8),n(163),n(180),n(36)],void 0===(s=function(t,e,n,i,s){var o=n.extend({name:"nv-date-range-picker",options:{button:{class:"uwa-icon uwa-icon-only","data-icon":"u"}},buildContent:function(){var t=this;return t.elements.daterange=new i(t.options.dateRangeOptions).addEvent("onChangeRange",function(e){t.setRange(e),t.dispatchEvent("onChange",[t.getValue()])}).setRange(this.getRange()),this.syncInput(),[t.buildClose(),t.elements.daterange,t.buildButtons()]},buildClose:function(){var e=this;return t.createElement("span",{class:"uwa-icon delete small",events:{click:function(){e.close()}}})},buildButtons:function(){var n=this;return t.createElement("div",{class:this.getClassNames("-buttons"),html:new e.Button({className:"green right",value:_("Apply changes"),events:{onClick:function(){n.close()}}})})},syncInput:function(){var t=this.getRange(),e=s.formatDateRangeForDisplay(t.from,t.to);this.elements.value.setText(e),this.elements.daterange&&this.elements.daterange.setRange(t)},setRange:function(e){return t.is(e.from,"date")&&(e.from=e.from.strftime("%Y-%m-%d")),t.is(e.to,"date")&&(e.to=e.to.strftime("%Y-%m-%d")),this.setValue(JSON.stringify(e))},getRange:function(){return JSON.parse(this.getValue()||null)||{}}});return App.Controls||(App.Controls={}),App.Controls.DateRangePicker=o,o}.apply(e,i))||(t.exports=s)},function(t,e,n){"use strict";var i,s;i=[n(1),n(2),n(6),n(270),n(0),n(5),n(11),n(65),n(390),n(759)],void 0===(s=function(t,e,n,i,s,o,a,r,l,c){var u=s.h,h={"en-news-united-states":"news","en-news-australia-new-zealand":"news","en-news-uk":"news","fr-actualite-actualites":"news","en-news-politics":"politics","fr-actualite-politique":"politics","en-news-women-s-blogs-magazines":"women","fr-actualite-presse-feminine":"women","en-news-men-s-blogs-magazines":"men","fr-actualite-presse-masculine":"men","en-news-people":"people","fr-actualite-people":"people","en-business-us-finance-economy":"finance","en-business-uk-finance-marketing":"finance","fr-business-economie-finance":"finance","en-business-us-marketing-advertising":"marketing","fr-business-pub-marketing":"marketing","en-tech-news":"news_tech","fr-tech-actualite":"news_tech","en-tech-apple":"apple","fr-tech-apple":"apple","en-tech-android":"android","fr-tech-android":"android","en-tech-windows":"windows","fr-tech-windows":"windows","en-video-games-video-games":"games","fr-jeux-video-actualite":"games","en-lifestyle-health-wellness":"health","fr-lifestyle-sante-bien-etre":"health","en-lifestyle-food":"food","fr-lifestyle-food":"food","en-lifestyle-tourism":"tourism","fr-lifestyle-tourisme":"tourism","en-lifestyle-fashion-beauty":"fashion","fr-lifestyle-mode-beaute":"fashion","en-lifestyle-luxury":"luxury","fr-lifestyle-luxe":"luxury","en-lifestyle-design":"deco","fr-lifestyle-design":"deco","en-lifestyle-running":"running","fr-lifestyle-running":"running","en-lifestyle-cars-bikes":"auto","fr-lifestyle-auto-moto":"auto","en-lifestyle-gardening":"gardening","fr-lifestyle-jardinage":"gardening","en-art-culture-news":"art","fr-art-culture-actualite":"art","en-art-culture-photography":"photo","fr-art-culture-photographie":"photo","en-art-culture-design":"deco","fr-art-culture-design":"deco","en-art-culture-comics":"comics","fr-art-culture-bande-dessinee":"comics","en-art-culture-cinema":"cinema","fr-art-culture-cinema":"cinema","en-art-culture-tv-series":"shows","fr-art-culture-tv-series":"shows","en-art-culture-music":"music","fr-art-culture-musique":"music","en-sports-news":"sport_news","fr-sport-actu-sports":"sport_news","en-sports-world-soccer":"soccer","fr-sport-football":"soccer","en-sports-tennis":"tennis","fr-sport-tennis":"tennis","en-sports-rugby":"rugby","fr-sport-rugby":"rugby","en-sports-us-sports":"us-sports","fr-sport-sports-us":"us-sports","en-sports-action-sports":"extreme","fr-sport-sports-extremes":"extreme","en-sports-motorsports":"motorsports","fr-sport-sports-mecaniques":"motorsports","en-sports-other-sports":"other-sports","fr-sport-plus-de-sports":"other-sports","en-education-education":"education","fr-education-education":"education"};function d(t){return e.getAssetURL("css/base/components/topic-selector/img/"+h[t]+".png")}var p=function(t){var e=Object.keys(t),n=(e=e.sort(function(t,e){return t<e?-1:t>e?1:0})).indexOf("en");return n>=0&&(e.splice(n,1),e.unshift("en")),e};function m(t){var e={};return t.forEach(function(t){t.segments.forEach(function(t){e[t.id]=!0})}),e}return o.extend({name:"nv-topicselector",init:function(t){this._parent(t),this.state={loaded:!1,selectedLanguages:[],selectedTopics:!t.clickToPick&&t.selectedTopics?m(t.selectedTopics):{}},this.onLanguagesSelected=this.onLanguagesSelected.bind(this),this.toggleTopicsSelection=this.toggleTopicsSelection.bind(this)},componentWillReceiveProps:function(t){t.selectedTopics&&this.setState({selectedTopics:m(t.selectedTopics)})},render:function(t,e){return u("div",{className:this.getClassNames(),style:{display:"flex",justifyContent:"center",width:"100%"}},[e.loaded?this.renderContent():this.renderSpinner()])},componentDidMount:function(){var t;n.getLanguages().then(function(i){return t=function(t){var n=[],i=e.Globalization.userLanguage,s=[i,"fr_FR","en_US"];for(var o in t)t.hasOwnProperty(o)&&(n=n.concat(t[o]));n=n.filter(function(t){var e=s.indexOf(t.code)>=0,n="en"===t.code.substring(0,2)&&"en_US"!==t.code,i="fr"===t.code.substring(0,2)&&"fr_FR"!==t.code;return e&&!n&&!i});var a={};return n.forEach(function(t){var e=t.code.substring(0,2);"en_US"===t.code?a.en={code:e,name:_("English")}:"fr_FR"===t.code?a.fr={code:e,name:_("French")}:t.code===i&&(a.user={code:e,name:t.name})}),a}(i.result),n.wizardryGetAllCorpora(e.isIn3DDashboard()?{type:"industry"}:{type:"individual",generic:!0})}).done(function(n){this.languages=t,this.defaultLanguages=p(n),this.topics=function(t,e){for(var n=p(t).map(function(n){var s=Object.keys(t[n])[0],o=t[n][s];return Object.keys(o).map(function(t){var s=o[t],a=i.sanitize(t).toLowerCase().replace(/[^a-z0-9]+/g,"-");return{thumbnails:Object.keys(s).map(function(t){var e=i.sanitize(t).toLowerCase().replace(/[^a-z0-9]+/g,"-"),o=n+"-"+a+"-"+e;return{name:t,id:o,libraryId:s[t].libraryId,data:s[t],imageURL:d(o)}}),label:{id:n+"-"+a,name:t},lang:n,name:t,id:n+"-"+a,selectable:!e.clickToPick}})}),s=[],o=Math.max.apply(null,n.map(function(t){return t.length})),a=0;a<o;a++)for(var r=0;r<n.length;r+=1)a<n[r].length&&s.push(n[r][a]);return s}(n,this.props);var s=e.Globalization.userLanguage.substring(0,2),o=this.languages.user?[this.languages.user.code,this.languages.en.code]:"fr"===s?[this.languages.fr.code]:[this.languages.en.code];this.setState({loaded:!0,selectedLanguages:o})}.bind(this))},renderSpinner:function(){return u(a.Spinner,{containerStyle:{display:"flex",flexFlow:"column",margin:"70px 0",width:"100%",justifyContent:"center",alignItems:"center"},autostart:!0,size:56,delay:0})},renderContent:function(){var t=this.state.selectedLanguages,e=this.topics.filter(function(e){return t.indexOf(e.lang)>=0}),n=u(l,{toggleThumbnailsSelection:this.toggleTopicsSelection,thumbnails:e,selectedThumbnails:this.state.selectedTopics,clickToPick:this.props.clickToPick,theme:this.props.theme});return u("div",{className:this.getClassNames("-content"),style:{display:"flex",flexFlow:"column",marginTop:"37px",width:"100%"}},[this.defaultLanguages.length>1?u(c,{languages:this.languages,selectedLanguages:t,onLanguagesSelected:this.onLanguagesSelected}):"",u("div",{className:this.getClassNames("-content-topics"),style:{display:"flex",marginTop:this.defaultLanguages.length>1?"50px":0,padding:"0 18px 0",flex:"1 1 auto"}},[this.props.scroller?u(r,{children:n}):n])])},formatSelectedTopics:function(t){var e=[];return this.topics.forEach(function(n){var i=n.thumbnails.filter(function(e){return t[e.id]});i.length>0&&e.push({category:n.name,language:n.lang,segments:i})}),e},onLanguagesSelected:function(t){this.setState({selectedLanguages:t})},toggleTopicsSelection:function(t,e){var n=Object.assign({},this.state.selectedTopics);e.forEach(function(e){t?delete n[e.id]:n[e.id]=!0}),this.setState({selectedTopics:n});var i=this.formatSelectedTopics(n);this.props.onTopicsChange(i)}})}.apply(e,i))||(t.exports=s)},function(t,e,n){var i,s;i=[n(1),n(13),n(18),n(19),n(3),n(15),n(10),n(306)],void 0===(s=function(t,e,n,i,s,o,a,r){"use strict";var l=a.extend({className:"uwa-flashplayer",defaultOptions:{flashVars:"",flashUrl:"",width:"",height:"",wmode:"opaque",aspectRatio:1.3,showToolbar:!0,showFullScreenLink:!0},isFullScreen:!1,init:function(t){this._parent(t),this.buildSkeleton()},buildSkeleton:function(){var e=this.elements;e.container=t.createElement("div",{class:this.className,align:"center"}),e.container.hide()},buildLinks:function(e,i){var o=this.options,a=this.elements;a.links=t.createElement("p",{align:"center"}),o.showFullScreenLink&&(t.createElement("a",{href:"#flashPlayer-FullScreen",text:t.i18n("Full screen"),events:{click:function(t){s.stop(t),this.toogleFullScreenMode(!0)}.bind(this)}}).inject(a.links),a.links.appendText(" | ")),e&&i&&(t.createElement("a",{href:e,rel:"external",html:n.stripTags(i)}).inject(a.links),a.links.appendText(" | ")),t.createElement("a",{href:"#flashPlayer-Close",html:"<strong>"+t.i18n("Close Video")+"</strong>",events:{click:function(t){s.stop(t),this.hide()}.bind(this)}}).inject(a.links),a.links.inject(a.container)},toogleFullScreenMode:function(e){e=!!e;var n=i.getSize(),s=this.elements;e?(this.isFullScreen=!0,window.scrollTo(0,0),o.setStyle.apply(document.body,["overflow","hidden"]),s.fullScreenContainer=t.createElement("div",{align:"center",styles:{backgroundColor:"#000",position:"absolute",top:0,left:0,width:n.width+"px",height:n.height+"px"}}).inject(document.body),s.flashObject.inject(s.fullScreenContainer),this.buildCloseFullScreenButton()):(this.isFullScreen=!1,s.flashObject.inject(s.flashContainer,"top"),s.fullScreenCloseButton.remove(),s.fullScreenContainer.remove(),o.setStyle.apply(document.body,["overflow",""])),this.onResize()},buildCloseFullScreenButton:function(){var e=this.elements;e.fullScreenCloseButton=t.createElement("input",{type:"button",value:t.i18n("Close FullScreen"),styles:{position:"absolute",top:"2px",right:"2px"}}).inject(e.fullScreenContainer),i.Engine.ie&&i.Engine.version>6&&(e.fullScreenCloseButton.style.width=e.fullScreenCloseButton.value.length+"em"),e.fullScreenCloseButton.addEvent("click",function(t){s.stop(t),this.toogleFullScreenMode(!1)}.bind(this))},show:function(n,s,o){o&&this.setOptions(o),o=this.options;var a=this.elements;(n||s)&&(o.flashUrl=n,o.flashVars=s),/\.flv$/.test(o.flashUrl)&&(o.flashVars="flv="+encodeURIComponent(o.flashUrl)+"&showplayer=autohide&autoplay=1&showvolume=1&showtime=1",o.flashUrl=t.hosts.uwa+t.paths.img+"flash/player_flv.swf"),i.Engine.ie&&-1!==o.flashUrl.indexOf("?")&&(o.flashUrl+="&"+e.random(100)),a.container.empty(),a.flashControl=new r({_root:!1,url:o.flashUrl,width:o.width,height:o.height,flashVars:o.flashVars,wmode:o.wmode,styles:{width:o.width,height:o.height}}).inject(a.container),a.flashContainer=a.flashControl.elements.container,a.flashObject=a.flashControl.getFlashContainer(),o.showToolbar&&this.buildLinks(o.mediaLinkUrl,o.mediaLinkText),a.container.show(),this.onResize()},hide:function(){var t=this.elements;t.container&&(t.container.empty(),t.container.hide())},onResize:function(){var t,e,n,s=this.elements,o=this.options,a=i.getSize();this.isFullScreen&&s.fullScreenContainer.setStyles({height:a.height+"px",width:a.width-i.getScrollbarWidth()+"px","z-index":1}),s.flashObject&&(t=s.flashObject.getParent().getDimensions(),n=o.width?o.width:t.innerWidth,e=o.height?o.height:Math.min(a.height,n/o.aspectRatio),s.flashObject.setStyles({height:e+"px",width:n+"px"}),s.flashObject.setAttribute("height",e),s.flashObject.setAttribute("width",n))}});return t.namespace("Controls/FlashPlayer",l,t)}.apply(e,i))||(t.exports=s)},function(t,e,n){var i,s;i=[n(1),n(13),n(10),n(24)],void 0===(s=function(t,e,n,i){"use strict";var s=function(){var t,e,n={};for(t=0,e=arguments.length;t<e;t++)n[arguments[t]]=!0;return n}("www.skateslate.com","www.pravdareport.com","blog.alteroot.org"),o=n.extend(i,{defaultOptions:{url:"about:blank",width:"100%",height:"",className:"uwa-web",scrolling:"auto",border:!1,sandbox:!1,withMessage:!1,unsecureWarningMessage:null},init:function(t){this._parent(t),this._frameOnload=this.dispatchAsEventListener("onLoad"),this.buildSkeleton()},buildSkeleton:function(){var e,n,i=this.elements,s=this.options;n={width:s.width,height:s.height,scrolling:s.scrolling,frameborder:s.border?1:0},s.sandbox&&(n.sandbox="allow-same-origin allow-forms allow-scripts allow-popups"),s.url||(s.url="about:blank"),i.container=t.createElement("div",{class:s.className}),i.iframe=e=t.createElement("iframe",n),e.onerror=this.dispatchAsEventListener("onError"),s.withMessage&&(i.container.addContent(t.createElement("div",{class:"uwa-web-message",html:i.loadingMessage=t.createElement("p",{class:"loading-message"})})),this.addEvent("onLoad",function(){this._shouldClearMessage()?i.loadingMessage.empty():this.setDelayed("websitemessage",function(){i.loadingMessage.setText(t.i18n("This website prevents embedding via iframe."))},1e3)}.bind(this))),i.container.addContent(e),this.setSrc(s.url)},setSrc:function(e){this._isSecureIFrame(e)?(this.elements.iframe.src=e,this.elements.iframe.addEvent("load",this._frameOnload),this.options.withMessage&&("about:blank"===e?this.elements.loadingMessage.empty():this.elements.loadingMessage.setText(t.i18n("Loading…")))):(this.elements.iframe.removeEvent("load",this._frameOnload),this.elements.iframe.src="about:blank",this.elements.loadingMessage.setText(this.options.unsecureWarningMessage||t.i18n("This app is trying to load unsecure content.")))},setIFrameHeight:function(t){this.elements.iframe.setStyle("height",t)},isBlank:function(){return"about:blank"===this.elements.iframe.src},getIFrame:function(){return this.elements.iframe},_isSecureIFrame:function(t){var n=e.parseUrl(window.location.href),i=e.parseUrl(t);return"http"===n.protocol||n&&"https"===n.protocol&&i&&"https"===i.protocol},_shouldClearMessage:function(){var n=this.elements.iframe.src;if(this.isBlank()||/\.(png|jpe?g|gif|txt)$/i.test(n))return!0;var i=e.parseUrl(n).domain;return t.owns(s,i)}});return t.namespace("Controls/Web",o,t)}.apply(e,i))||(t.exports=s)},function(t,e,n){"use strict";var i,s;i=[n(3),n(56),n(82),n(51),n(4),n(301)],void 0===(s=function(t,e,n,i,s,o){return o.extend({name:"stacked-bar",setHighlite:function(t,e,n){var s=e?i.brightenColor(n):n,o=this.elements.container.getElements(".item-"+t);o&&o.invoke("setStyle","background-color",s)},getStackedBarElement:function(t){var e,i,o,a,r,l,c,u,h,d,p,m=this.getMaxWidth(),f=0,g=this.options,v=g.notes;for(o="&nbsp;"+(t.label||t.key),o+=this.getGroup(t),a=UWA.createElement("li",{class:"nv-chartbar-bar stacked-bar",html:[UWA.createElement("h4",{html:o,styles:{width:m+"%"}})]}),this.getImg(t.stats[0],a),c=(p=v.getByLabel(t.label||t.key)).length>1?m-10*(p.length-1):m,r=UWA.createElement("div",{class:"nv-chartbar-inner",styles:{width:this.getWidth(t,c)+"%"}}).inject(a),l=this._makeInnerValueContainer(t,t.value,c).inject(r),e=0,i=t.stats.length;e<i;e+=1)h=t.stats[e],d=v.getById(h.itemId),u=UWA.createElement("div",{class:"inner-stacked-bar item-"+h.id,styles:{width:100*h.value/t.value+"%","background-color":g.color||h.color}}).inject(r),d&&(this.elements.container.addClassName("with-notes"),this.getNoteElm(d,h,!0).inject(a).setStyle("right",10+15*f),this.getNoteElm(d,h,!1).inject(l).setStyle("right",10+15*f),f++,(!this.pinLength||this.pinLength<f)&&(this.pinLength=f)),0===e&&UWA.createElement("h4",{html:o,class:this.getWidth(t)>80?"text-ellipsis":""}).inject(u),UWA.createElement("div",{class:"over-stacked-bar",styles:{width:100*h.value/t.value+"%"}}).inject(u),this.attachEvents(u,t.stats[e]);return UWA.createElement("span",{class:"nv-chartbar-value",text:s.formatHumanNumber(t.value)}).inject(a),this.options.toolTip&&this.options.toolTip.formatter&&new n(a,this.options.toolTip.formatter(t),{width:this.options.toolTip.width,fx:!1,className:"chart-tooltip",root:this.elements.container}),this.attachPinEvents(a,t.stats),a},updatePosition:function(){var t=this.elements.container.getElements(".nv-chartbar-value"),e=this;t.forEach(function(t){var n=20+16*e.pinLength;t.setStyle("right",n)})},attachPinEvents:function(n,s){var o=this,a=function(n,s){var a=t.getElement(n),r=a.getAttribute("data-noteId"),l=e.parse(a.getStyle("color")).toHexString(),c=i.brightenColor(l,s?"":.3);a.setStyle("color",c),o.dispatchEvent("mouseOverPin",[r,s])};n.addEvent("mouseover .note-pin",function(t){a(t,!0)}),n.addEvent("mouseout .note-pin",function(t){a(t,!1)}),n.addEvent("click .note-pin",function(e){var n=t.getElement(e).getAttribute("data-noteId"),i=s.filter(function(t){return t.itemId===n});"img"!==t.getElement(e).tagName.toLowerCase()&&o.dispatchEvent("onPointClick",i)})},buildContent:function(){var t,e,n=this.getData();for(t=0,e=n.length;t<e;t+=1)this.getStackedBarElement(n[t]).inject(this.elements.container);this.options.notes.getAll().length>0&&this.updatePosition()}})}.apply(e,i))||(t.exports=s)},,function(t,e,n){"use strict";var i,s;i=[n(9),n(16),n(25)],void 0===(s=function(t,e,n){return t.singleton({store:{},apiBaseUrl:"https://www.googleapis.com/analytics/v3/",apiResourcesUrls:{accounts:"management/accounts",properties:"management/accounts/~all/webproperties",views:"management/accounts/~all/webproperties/~all/profiles"},getAccounts:function(t){return this._getUserData(t)},getAccountById:function(t,e){return this._getUserData(t).then(function(t){return t.detect(function(t){return parseInt(t.id,10)===e})})},_getUserData:function(t){if(this.store[t])return e.resolve(this.store[t]);var n=[this._requestApiResources(t,"accounts"),this._requestApiResources(t,"properties"),this._requestApiResources(t,"views")];return e.all(n).then(function(e){var n=e[0],i=e[1],s=e[2];return i.forEach(function(t){t.views=s.filter(function(e){return e.webPropertyId===t.id})}),n.forEach(function(t){t.properties=i.filter(function(e){return e.accountId===t.id})}),this.store[t]=n,n}.bind(this))},_requestApiResources:function(t,i){return new e(function(e,s){if(!t||!i||!this.apiResourcesUrls[i])return s("Missing param in _requestApiResources");var o=this.apiBaseUrl+this.apiResourcesUrls[i],a={proxy:"oauth",method:"get",cache:0,service:"google",type:"json",useMergeRequest:!1,connect:t,onComplete:function(t){return"object"==typeof t&&t.items?e(t.items):s(t.error)},onTimeout:s,onFailure:s};n.request(o,a)}.bind(this))}})}.apply(e,i))||(t.exports=s)},function(t,e,n){"use strict";var i,s;i=[n(1),n(122),n(24),n(20),n(10),n(23),n(3),n(231),n(158),n(52),n(17),n(4),n(46),n(36),n(1075),n(1077),n(1078),n(1079),n(1080)],void 0===(s=function(t,e,n,i,s,o,a,r,l,c,u,h,d,p,m,f,g,v,b){var y=t.createElement;function w(t){return{topic:t.topic||"*:*",date_from:t.date_from||null,date_to:t.date_to||null,context:t.context||{},sampling:t.sampling||"auto",range:t.range||"daily"}}return s.extend(n,{name:"nv-socialpack-editor",currentView:null,analyseSelectorValues:{},init:function(t){this._parent(t),this.initShortcuts(),this.elements.container=y("div",{class:this.getClassNames()}),this.views={},r.init(h.getStaticUrl("/template/analyse/analyse.tpl.html"),function(){this.buildEditor()}.bind(this))},setParameters:function(e){if(this.data){var n=w(e);if(t.equals(this.getParameters(),n))return;this.data.set(w(e)),"filtering"===this.currentView.viewName?this.currentView.view.show():(this.cancelView(),this.setView("filtering"))}else this.options.parameters=e},getParameters:function(){return w(this.data?this.data.toJSON():this.options.parameters)},buildEditor:function(){this.elements.container.setContent(r.getTemplate("editor")({showSampling:this.options.showSampling}));var t=this.elements.container.getElement(".analyse-panel.left .parameters");new o({element:t}),t.addEvents({"click .parameter":this.onParametersClick.bind(this)}),this.analyseSelectorValues={within:t.getElement(".parameter.within .analyse-value"),topic:t.getElement(".parameter.topic .analyse-value"),period:t.getElement(".parameter.period .analyse-value")},this.options.showSampling&&(this.analyseSelectorValues.sampling=t.getElement(".parameter.sampling .analyse-value")),this.prepareData(),this.setView("filtering"),this.dispatchEvent("onEditorLoaded")},getData:function(t){var e=t.getPreference("widgetMode");return e?this.getWidgetDataObj(e.value,t):i.resolve(this.getSmartFilterDataObj())},highlightTopic:function(){var t=this.elements.container.getElement(".left .parameter[data-type=topic]"),e=t.getElement(".saved")||y("div",{class:"saved uwa-icon","data-icon":"r",text:_("Metrics have been successfully added to your topic"),styles:{height:0}});t.addContent(e),e.setStyle("height",e.scrollHeight),this.setDelayed("topicHasChanged",function(){e.setStyle("height",0),this.setDelayed("topicHasChanged",function(){e.remove()},200)},3e3)},getCommonData:function(){return{date_from:this.data.getDateString("from"),date_to:this.data.getDateString("to"),range:this.data.get("range")}},getWidgetDataObj:function(t,e){var n={moduleName:"SocialPack_Analytics",data:Object.assign({},e.data,{widgetMode:t},this.getCommonData())};return this.data.get("topic")!==this.options.parameters.topic||this.data.get("context")!==this.options.parameters.context?l.getAnalyticsIds({widgetId:u.getFromWidget(e).getId(),mode:t,grouping:e.getValue("grouping"),query:this.getQuery()}).then(function(t){return n.data.analyticsIds=t.toString(),n}):i.resolve(n)},getSmartFilterDataObj:function(){return{moduleName:"SmartFilter",title:"",data:Object.assign({searchQuery:JSON.stringify(this.getQuery())},this.getCommonData())}},getQuery:function(){return{topic:this.data.get("topic"),context:this.data.get("context")}},getSampling:function(){return this.data.get("sampling")},initShortcuts:function(){c.addShortcuts({"editor-wizard":{}})},prepareData:function(){var t=this.analyseSelectorValues,n=this,i=e.extend({setup:function(){this.addEvents({"onChange:topic":function(e){var n="*:*"===e.get("topic")?_("All"):e.get("topic");t.topic.setText(n)},"onChange:date_from":this.displayDate.bind(this),"onChange:date_to":this.displayDate.bind(this),"onChange:context":this.displayContext.bind(this),"onChange:sampling":function(e){t.sampling&&t.sampling.setText(d.getSamplingFromValue(e.get("sampling")).label)}}),this.initData(),this.addEvent("onChange",function(){Object.keys(this.changedAttributes()).length&&n.dispatchEvent("onDataChange")})},initData:function(){this.set(w(n.options.parameters))},getDateString:function(t){return this.get("date_"+t)||""},displayDate:function(){var e=this.getDateString("from"),n=this.getDateString("to"),i=p.formatDateRangeForDisplay(e,n).ucfirst();t.period.setText(i)},displayContext:function(){var e=this.get("context"),n="",i=0;e.tab&&e.tab.length>0&&e.tab.forEach(function(t){n+=(i>0?" "+_("OR")+" ":"")+_("Tab")+':"'+t+'"',i++}),e.feed&&e.feed.length>0&&e.feed.forEach(function(t){n+=(i>0?" "+_("OR")+" ":"")+_("Feed")+':"'+t+'"',i++}),e.library&&e.library.length>0&&e.library.forEach(function(t){n+=(i>0?" "+_("OR")+" ":"")+_("Library")+':"'+t+'"',i++}),n||(n=_("Dashboard")),t.within.setText(n)}});this.data=new i},setView:function(t,e){if(!this.currentView||t!==this.currentView.viewName){this.currentView||this.initViews(),this.elements.container.getElement(".parameter.selected")&&this.elements.container.getElement(".parameter.selected").removeClassName("selected"),this.elements.container.getElement('.parameter[data-type="'+t+'"]')&&this.elements.container.getElement('.parameter[data-type="'+t+'"]').addClassName("selected"),["filtering","within","topic","period","sampling"].forEach(function(e){this.elements.container.toggleClassName(e+"-view",e===t)}.bind(this));var n="default";"filtering"!==t&&(n="disabled-save"),this.dispatchEvent("onFooterChange",n),this.dispatchEvent("onViewChange",t),this.currentView&&this.currentView.view&&this.currentView.view.hide(),this.views[t].show({footerMode:n,lastAction:e}),this.currentView={viewName:t,view:this.views[t]}}},initViews:function(){var t={container:this.elements.container.getElement(".analyse-panel.right"),data:this.data};this.views.filtering=new m(t),this.views.within=new f(t),this.views.topic=new g(t),this.views.period=new v(t),this.views.filtering.addEvent("onDataChanged",this.onDataChanges.bind(this)),this.views.within.addEvent("onDataChanged",this.onDataChanges.bind(this)),this.views.topic.addEvent("onDataChanged",this.onDataChanges.bind(this)),this.views.period.addEvent("onDataChanged",this.onDataChanges.bind(this)),this.options.showSampling&&(this.views.sampling=new b(t),this.views.sampling.addEvent("onDataChanged",this.onDataChanges.bind(this)))},onDataChanges:function(t){t?this.dispatchEvent("onFooterChange","hidden"):this.dispatchEvent("onFooterChange","disabled-click")},isClickDisabled:function(){return this.elements.container.hasClassName("disable-click")},storeViewData:function(t){this.data.set(this.currentView.view.retrieveData()),!1!==t&&("filtering"!==this.currentView.viewName?this.setView("filtering"):(this.highlightTopic(),this.views.filtering.unselectAll(),this.views.filtering.refreshFilters(),this.dispatchEvent("onFooterChange","default",!0)))},cancelView:function(){this.currentView.view.cancel()},onParametersClick:function(t){var e=a.getElement(t);if(!this.isClickDisabled()){var n=e.getAttribute("data-type");this.setView(n)}}})}.apply(e,i))||(t.exports=s)},function(t,e,n){"use strict";var i,s;i=[n(1),n(3),n(26),n(10),n(110),n(8),n(23),n(236),n(41)],void 0===(s=function(t,e,n,i,s,o,a,r,l){var c=t.createElement;return i.extend({name:"nv-filteringview",defaultOptions:{facetsAccordion:[]},init:function(t){this._parent(t),this.filters={},this.buildSkeleton(),this.addSearchAccordion(),this.addOtherAccordion(),this.attachEvents()},buildSkeleton:function(){this.elements.container=c("div",{class:this.getClassNames(),html:[c("h2",{text:_("Filters")}),this.elements.filtersContainer=c("div",{class:this.getClassNames("-container"),html:[this.elements.filtersAccordion=new s({className:this.getClassNames("-accordion")+" dark",multiSelect:!0})]})]}),this.elements.scroller=new a({element:this.elements.filtersContainer})},addSearchAccordion:function(){var t=c("div",{class:"inner",html:[c("form",{autocomplete:"off",events:{submit:function(t){t.preventDefault()}},html:[this.elements.searchLabel=c("label",{for:"filter-search",class:"filter-search-label",text:_("Filters")}),this.elements.searchText=new o.Text({attributes:{id:"filter-search",name:"filter-search",autocomplete:"off"}}),this.elements.deleteButton=c("div",{class:"delete-button"}).hide(),this.elements.searchButton=c("div",{class:"search-button"})]})]});this.elements.filtersAccordion.addItem("search",{text:_("Search"),content:t}),this.elements.filtersAccordion.selectItem("search")},addOtherAccordion:function(){this.facetsAccordion.forEach(function(t){this.elements.filtersAccordion.addItem(t.id,{text:t.title})}.bind(this))},setLoading:function(t){this.elements.loading||(this.elements.loading=new l({autostart:!0,size:30,color:"#CACACA"}),this.elements.filtersContainer.addContent(this.elements.loading)),t?this.elements.loading.start():this.elements.loading.stop()},updateOtherAccordionContent:function(){this.facetsAccordion.forEach(function(t){var e=c("div",{class:"inner",html:this.getFacetsElm(t.id)});this.elements.filtersAccordion.updateContent(t.id,e,!0),this.elements.filtersAccordion.selectItem(t.id)}.bind(this))},getFacetsElm:function(){},selectFacet:function(t){var e=t.getAttribute("data-id"),n=JSON.parse(t.getAttribute("data-category")),i=JSON.parse(t.getAttribute("data-value"));this.addSelectionAccordion();var s=this.elements.filtersContainer.getElement(".uwa-accordion-item.selection .inner");s.getElement('div[data-id="'+e+'"]')||new r({title:i,value:JSON.stringify(i),id:e,category:JSON.stringify(n),isSelection:!0}).addEvent("onClose",this.onUnselectFacet.bind(this)).inject(s);this.filters[n]||(this.filters[n]=[]),this.filters[n].push(i)},unselectFacet:function(t){var e=t.getAttribute("data-id"),n=JSON.parse(t.getAttribute("data-category")),i=JSON.parse(t.getAttribute("data-value"));this.elements.filtersContainer.getElements('div[data-id="'+e+'"]').forEach(function(t){t.getParent("li.selection")?t.remove():t.removeClassName("facet-selected")});var s=this.elements.filtersContainer.getElement("li.selection .inner");s&&s.getChildren().length<=0&&(this.elements.filtersAccordion.addEvent("onAccordionItemClosed",function(t){"selection"===t.name&&this.elements.filtersAccordion.removeItem("selection")}.bind(this)),this.elements.filtersAccordion.unselectItem("selection")),this.filters[n]=this.filters[n].filter(function(t){return t.replace(/\\"/g,"")!==i.replace(/\\"/g,"")})},unSelectAll:function(){var t=this.elements.filtersContainer.getElement(".uwa-accordion-item.selection");t&&t.getElements(".inner div[data-id]").forEach(function(t){this.unselectFacet(t,!0)}.bind(this)),this.onUpdateFilters()},addSelectionAccordion:function(){this.elements.filtersAccordion.hasItem("selection")||(this.elements.filtersAccordion.addItem("selection",{text:_("You selected"),content:c("div").addContent(c("div",{class:"inner"}),c("div",{class:"clear",text:_("Clear all filters"),events:{click:this.unSelectAll.bind(this)}})),where:"top"}),this.elements.filtersAccordion.selectItem("selection"))},attachEvents:function(){this.elements.searchText.addEvent("onChange",this.onUpdateSearch.bind(this)),this.elements.searchButton.addEvent("click",this.onUpdateSearch.bind(this)),this.elements.deleteButton.addEvent("click",this.onDeleteSearch.bind(this)),this.elements.filtersAccordion.addEvent("onChange",this.onAccordionChange.bind(this))},onUpdateSearch:function(){var t=this.elements.searchText.getValue();t?(this.elements.deleteButton.show(),this.filters.title=t):(this.elements.deleteButton.hide(),delete this.filters.title),this.onUpdateFilters()},onUpdateFilters:function(){this.dispatchEvent("onUpdateListingView",[this.filters])},onDeleteSearch:function(){this.elements.searchText.setValue(""),this.onUpdateSearch()},onSelectFacet:function(t){var n=e.findElement(t,".facet");this.selectFacet(n),this.onUpdateFilters()},onUnselectFacet:function(t){var n=e.findElement(t,".facet");this.unselectFacet(n),this.onUpdateFilters()},onAccordionChange:function(t,e){var i=this.elements.filtersContainer.getElement(".uwa-accordion-item."+t),s=i&&i.getElement(".uwa-accordion-content"),o=s&&s.getSize().height;i&&(e?(s.setStyles({display:"block",height:0}),new n(s,{duration:250,transition:"quadOut",events:{onComplete:function(){s.setStyles({height:"auto"})}}}).start({height:o})):new n(s,{duration:250,transition:"quadOut",events:{onComplete:function(){s.setStyles({display:"none",height:o}),this.elements.filtersAccordion.dispatchEvent("onAccordionItemClosed",{name:t},this)}.bind(this)}}).start({height:0}))}})}.apply(e,i))||(t.exports=s)},function(t,e,n){"use strict";n.r(e),n.d(e,"translate",function(){return h}),n.d(e,"asDOM",function(){return d});var i=n(1),s=n.n(i),o=/\s*--.*/,a=/\{(.*?)\}/g;function r(t,e){for(var n=0;n<e.length;n++)t.appendChild(e[n])}function l(t){return document.createTextNode(t)}function c(t){return function(e){if("function"==typeof t&&(t=t(e)),!t.nodeType&&t.tag){var n=Object.assign({},t);delete n.tag,t=s.a.createElement(t.tag,n)}return e&&r(t,e),t}}function u(t){return function(e,n){var i=(window._?window._(e):e).replace(o,"");return t(i,n)}}var h=u(function(t,e){return e?t.replace(a,function(t,n){return e.hasOwnProperty(n)?e[n]:t}):t}),d={translate:u(function(t,e){var n={$text:l};if(e)for(var i in e){var s=typeof e[i];n[i]="object"===s||"function"===s?c(e[i]):e[i]}var o=document.createDocumentFragment();return r(o,function t(e,n){var i=[];function s(t){i.push(n.$text?n.$text(t):t)}for(var o=0;;){a.lastIndex=o;var r=a.exec(e);if(!r)break;var l=n.hasOwnProperty(r[1])?n[r[1]]:r[0],c=e.slice(o,r.index);if(o=a.lastIndex,"function"==typeof l){s(c);var u=e.indexOf("{/"+r[1]+"}",a.lastIndex);u>=0?(i.push(l(t(e.slice(a.lastIndex,u),n))),o=u+r[1].length+3):i.push(l())}else s(c+l)}return s(e.slice(o)),i}(t,n)),o})}},function(t,e,n){"use strict";var i,s;i=[n(1),n(9),n(16),n(84),n(1114),n(1121),n(1123),n(1125),n(17)],void 0===(s=function(t,e,n,i,s,o,a,r,l){r=r.default;var c=t.createElement,u=e.singleton({elements:{},init:function(){this.modal=new i({className:"wizard nv-corpus-manager",fullscreenable:!0,title:this.getTitle(),fullScreenIcon:"ç",size:{width:"full",height:"full"},displayCloseButton:!0}),this.modal.addEvent("onClose",this.onClose,this,-10),this.steps={blacklist:{add:a,index:s},associated:{add:o,index:s},opinion:{index:r}},this.elements.container=c("div",{class:"nv-corpus-manager-inner"}),this.modal.setContent(this.elements.container),document.body.addContent(this.modal),this.stepEvents={onSubmitEntity:this.onSubmitEntity.bind(this),onRefreshWidget:this.onRefreshWidget.bind(this),onUpdateHeaderTitle:this.updateHeaderTitle.bind(this),onCloseTemporaryStep:this.onCloseTemporaryStep.bind(this),onClose:this.onCloseRequest.bind(this),onCorpusChange:this.onRefreshWidget}},open:function(t,e){u.modal.setTitle(u.getTitle(t)),u.modal.open(),u.displayStep(e,t)},getTitle:function(t){return{associated:_("Curation Manager: Associated Entities"),blacklist:_("Curation Manager: Blocklists"),opinion:_("Curation Manager: Opinions")}[t]||"Curation Manager"},submitEntity:function(t,e,i){return this.modal.open(),this.onSubmitEntity({stepId:t,defaultValues:i}),new n(function(t){this.modal.addEventOnce("onClose",function(){t()})}.bind(this))},displayStep:function(t,e,n){var i=function(t,e){this.openNewStep(t,e,n)}.bind(this);this.step?this.closeCurrentStep(i,t,e,n):i(t,e,n)},openNewStep:function(e,n,i){var s=this.steps[e][n];i||((i={}).stepId=e),this.step=t.is(s,"class")?new s(i):s(),this.step.addEvents(this.stepEvents),this.openStep(e,n)},openStep:function(t,e){var n=!0;this.currentStep||(n=!1),this.step.isCloseableStep()?this.modal.elements.closeBtn.hide():this.modal.elements.closeBtn.show(),this.updateHeaderTitle(t),this.elements.container.setContent(this.step),this.step.open(n,t,e)},closeCurrentStep:function(t,e,n,i){var s=this.step;t&&s.addEvent("afterClosed",function(){t(e,n,i),s.getContent().destroy()}),s.close()},updateHeaderTitle:function(t){this.modal.setTitle(" • "+this.getTitle(t))},onRefreshWidget:function(){l.refreshModules(["CorpusManager","RssReader","SocialPack_Analytics"])},onSubmitEntity:function(t){this.displayStep(t.stepId,"add",t)},onCloseTemporaryStep:function(t){this.displayStep(t,"index")},onCloseRequest:function(){this.modal.close()},onClose:function(){l.refreshModules(["CorpusManager","RssReader","SocialPack_Analytics","SmartFilter"]),this.closeCurrentStep(),this.step=null,this.options={}}});return u}.apply(e,i))||(t.exports=s)},,function(t,e,n){"use strict";n(462),n(605),n(607),n(610),n(612),n(614),n(616),n(618),n(620),n(622),n(624),n(626),n(628),n(632)},function(t,e,n){n(463),n(466),n(467),n(468),n(469),n(470),n(471),n(472),n(473),n(474),n(475),n(476),n(477),n(478),n(479),n(480),n(481),n(482),n(483),n(484),n(485),n(486),n(487),n(488),n(489),n(490),n(491),n(492),n(493),n(494),n(495),n(496),n(497),n(498),n(499),n(500),n(501),n(502),n(503),n(504),n(505),n(506),n(507),n(509),n(510),n(511),n(512),n(513),n(514),n(515),n(516),n(517),n(518),n(519),n(520),n(521),n(522),n(523),n(524),n(525),n(526),n(527),n(528),n(529),n(530),n(531),n(532),n(533),n(534),n(535),n(536),n(537),n(538),n(539),n(540),n(541),n(542),n(544),n(545),n(547),n(548),n(549),n(550),n(551),n(552),n(553),n(555),n(556),n(557),n(558),n(559),n(560),n(561),n(562),n(563),n(564),n(565),n(566),n(567),n(259),n(568),n(333),n(569),n(334),n(570),n(571),n(572),n(573),n(335),n(576),n(577),n(578),n(579),n(580),n(581),n(582),n(583),n(584),n(585),n(586),n(587),n(588),n(589),n(590),n(591),n(592),n(593),n(594),n(595),n(596),n(597),n(598),n(599),n(600),n(601),n(602),n(603),n(604),t.exports=n(47)},function(t,e,n){"use strict";var i=n(28),s=n(72),o=n(48),a=n(7),r=n(67),l=n(113).KEY,c=n(29),u=n(200),h=n(141),d=n(126),p=n(37),m=n(240),f=n(314),g=n(465),v=n(203),b=n(30),y=n(31),w=n(60),x=n(74),C=n(112),_=n(125),S=n(130),E=n(317),k=n(92),T=n(202),A=n(49),I=n(128),N=k.f,D=A.f,O=E.f,P=i.Symbol,F=i.JSON,M=F&&F.stringify,L=p("_hidden"),R=p("toPrimitive"),j={}.propertyIsEnumerable,V=u("symbol-registry"),B=u("symbols"),z=u("op-symbols"),W=Object.prototype,U="function"==typeof P&&!!T.f,H=i.QObject,q=!H||!H.prototype||!H.prototype.findChild,G=o&&c(function(){return 7!=S(D({},"a",{get:function(){return D(this,"a",{value:7}).a}})).a})?function(t,e,n){var i=N(W,e);i&&delete W[e],D(t,e,n),i&&t!==W&&D(W,e,i)}:D,Y=function(t){var e=B[t]=S(P.prototype);return e._k=t,e},X=U&&"symbol"==typeof P.iterator?function(t){return"symbol"==typeof t}:function(t){return t instanceof P},K=function(t,e,n){return t===W&&K(z,e,n),b(t),e=C(e,!0),b(n),s(B,e)?(n.enumerable?(s(t,L)&&t[L][e]&&(t[L][e]=!1),n=S(n,{enumerable:_(0,!1)})):(s(t,L)||D(t,L,_(1,{})),t[L][e]=!0),G(t,e,n)):D(t,e,n)},J=function(t,e){b(t);for(var n,i=g(e=x(e)),s=0,o=i.length;o>s;)K(t,n=i[s++],e[n]);return t},Q=function(t){var e=j.call(this,t=C(t,!0));return!(this===W&&s(B,t)&&!s(z,t))&&(!(e||!s(this,t)||!s(B,t)||s(this,L)&&this[L][t])||e)},$=function(t,e){if(t=x(t),e=C(e,!0),t!==W||!s(B,e)||s(z,e)){var n=N(t,e);return!n||!s(B,e)||s(t,L)&&t[L][e]||(n.enumerable=!0),n}},Z=function(t){for(var e,n=O(x(t)),i=[],o=0;n.length>o;)s(B,e=n[o++])||e==L||e==l||i.push(e);return i},tt=function(t){for(var e,n=t===W,i=O(n?z:x(t)),o=[],a=0;i.length>a;)!s(B,e=i[a++])||n&&!s(W,e)||o.push(B[e]);return o};U||(r((P=function(){if(this instanceof P)throw TypeError("Symbol is not a constructor!");var t=d(arguments.length>0?arguments[0]:void 0),e=function(n){this===W&&e.call(z,n),s(this,L)&&s(this[L],t)&&(this[L][t]=!1),G(this,t,_(1,n))};return o&&q&&G(W,t,{configurable:!0,set:e}),Y(t)}).prototype,"toString",function(){return this._k}),k.f=$,A.f=K,n(131).f=E.f=Z,n(167).f=Q,T.f=tt,o&&!n(127)&&r(W,"propertyIsEnumerable",Q,!0),m.f=function(t){return Y(p(t))}),a(a.G+a.W+a.F*!U,{Symbol:P});for(var et="hasInstance,isConcatSpreadable,iterator,match,replace,search,species,split,toPrimitive,toStringTag,unscopables".split(","),nt=0;et.length>nt;)p(et[nt++]);for(var it=I(p.store),st=0;it.length>st;)f(it[st++]);a(a.S+a.F*!U,"Symbol",{for:function(t){return s(V,t+="")?V[t]:V[t]=P(t)},keyFor:function(t){if(!X(t))throw TypeError(t+" is not a symbol!");for(var e in V)if(V[e]===t)return e},useSetter:function(){q=!0},useSimple:function(){q=!1}}),a(a.S+a.F*!U,"Object",{create:function(t,e){return void 0===e?S(t):J(S(t),e)},defineProperty:K,defineProperties:J,getOwnPropertyDescriptor:$,getOwnPropertyNames:Z,getOwnPropertySymbols:tt});var ot=c(function(){T.f(1)});a(a.S+a.F*ot,"Object",{getOwnPropertySymbols:function(t){return T.f(w(t))}}),F&&a(a.S+a.F*(!U||c(function(){var t=P();return"[null]"!=M([t])||"{}"!=M({a:t})||"{}"!=M(Object(t))})),"JSON",{stringify:function(t){for(var e,n,i=[t],s=1;arguments.length>s;)i.push(arguments[s++]);if(n=e=i[1],(y(e)||void 0!==t)&&!X(t))return v(e)||(e=function(t,e){if("function"==typeof n&&(e=n.call(this,t,e)),!X(e))return e}),i[1]=e,M.apply(F,i)}}),P.prototype[R]||n(73)(P.prototype,R,P.prototype.valueOf),h(P,"Symbol"),h(Math,"Math",!0),h(i.JSON,"JSON",!0)},function(t,e,n){t.exports=n(200)("native-function-to-string",Function.toString)},function(t,e,n){var i=n(128),s=n(202),o=n(167);t.exports=function(t){var e=i(t),n=s.f;if(n)for(var a,r=n(t),l=o.f,c=0;r.length>c;)l.call(t,a=r[c++])&&e.push(a);return e}},function(t,e,n){var i=n(7);i(i.S,"Object",{create:n(130)})},function(t,e,n){var i=n(7);i(i.S+i.F*!n(48),"Object",{defineProperty:n(49).f})},function(t,e,n){var i=n(7);i(i.S+i.F*!n(48),"Object",{defineProperties:n(316)})},function(t,e,n){var i=n(74),s=n(92).f;n(93)("getOwnPropertyDescriptor",function(){return function(t,e){return s(i(t),e)}})},function(t,e,n){var i=n(60),s=n(132);n(93)("getPrototypeOf",function(){return function(t){return s(i(t))}})},function(t,e,n){var i=n(60),s=n(128);n(93)("keys",function(){return function(t){return s(i(t))}})},function(t,e,n){n(93)("getOwnPropertyNames",function(){return n(317).f})},function(t,e,n){var i=n(31),s=n(113).onFreeze;n(93)("freeze",function(t){return function(e){return t&&i(e)?t(s(e)):e}})},function(t,e,n){var i=n(31),s=n(113).onFreeze;n(93)("seal",function(t){return function(e){return t&&i(e)?t(s(e)):e}})},function(t,e,n){var i=n(31),s=n(113).onFreeze;n(93)("preventExtensions",function(t){return function(e){return t&&i(e)?t(s(e)):e}})},function(t,e,n){var i=n(31);n(93)("isFrozen",function(t){return function(e){return!i(e)||!!t&&t(e)}})},function(t,e,n){var i=n(31);n(93)("isSealed",function(t){return function(e){return!i(e)||!!t&&t(e)}})},function(t,e,n){var i=n(31);n(93)("isExtensible",function(t){return function(e){return!!i(e)&&(!t||t(e))}})},function(t,e,n){var i=n(7);i(i.S+i.F,"Object",{assign:n(318)})},function(t,e,n){var i=n(7);i(i.S,"Object",{is:n(319)})},function(t,e,n){var i=n(7);i(i.S,"Object",{setPrototypeOf:n(244).set})},function(t,e,n){"use strict";var i=n(168),s={};s[n(37)("toStringTag")]="z",s+""!="[object z]"&&n(67)(Object.prototype,"toString",function(){return"[object "+i(this)+"]"},!0)},function(t,e,n){var i=n(7);i(i.P,"Function",{bind:n(320)})},function(t,e,n){var i=n(49).f,s=Function.prototype,o=/^\s*function ([^ (]*)/;"name"in s||n(48)&&i(s,"name",{configurable:!0,get:function(){try{return(""+this).match(o)[1]}catch(t){return""}}})},function(t,e,n){"use strict";var i=n(31),s=n(132),o=n(37)("hasInstance"),a=Function.prototype;o in a||n(49).f(a,o,{value:function(t){if("function"!=typeof this||!i(t))return!1;if(!i(this.prototype))return t instanceof this;for(;t=s(t);)if(this.prototype===t)return!0;return!1}})},function(t,e,n){var i=n(7),s=n(322);i(i.G+i.F*(parseInt!=s),{parseInt:s})},function(t,e,n){var i=n(7),s=n(323);i(i.G+i.F*(parseFloat!=s),{parseFloat:s})},function(t,e,n){"use strict";var i=n(28),s=n(72),o=n(100),a=n(246),r=n(112),l=n(29),c=n(131).f,u=n(92).f,h=n(49).f,d=n(142).trim,p=i.Number,m=p,f=p.prototype,g="Number"==o(n(130)(f)),v="trim"in String.prototype,b=function(t){var e=r(t,!1);if("string"==typeof e&&e.length>2){var n,i,s,o=(e=v?e.trim():d(e,3)).charCodeAt(0);if(43===o||45===o){if(88===(n=e.charCodeAt(2))||120===n)return NaN}else if(48===o){switch(e.charCodeAt(1)){case 66:case 98:i=2,s=49;break;case 79:case 111:i=8,s=55;break;default:return+e}for(var a,l=e.slice(2),c=0,u=l.length;c<u;c++)if((a=l.charCodeAt(c))<48||a>s)return NaN;return parseInt(l,i)}}return+e};if(!p(" 0o1")||!p("0b1")||p("+0x1")){p=function(t){var e=arguments.length<1?0:t,n=this;return n instanceof p&&(g?l(function(){f.valueOf.call(n)}):"Number"!=o(n))?a(new m(b(e)),n,p):b(e)};for(var y,w=n(48)?c(m):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger".split(","),x=0;w.length>x;x++)s(m,y=w[x])&&!s(p,y)&&h(p,y,u(m,y));p.prototype=f,f.constructor=p,n(67)(i,"Number",p)}},function(t,e,n){"use strict";var i=n(7),s=n(91),o=n(324),a=n(247),r=1..toFixed,l=Math.floor,c=[0,0,0,0,0,0],u="Number.toFixed: incorrect invocation!",h=function(t,e){for(var n=-1,i=e;++n<6;)i+=t*c[n],c[n]=i%1e7,i=l(i/1e7)},d=function(t){for(var e=6,n=0;--e>=0;)n+=c[e],c[e]=l(n/t),n=n%t*1e7},p=function(){for(var t=6,e="";--t>=0;)if(""!==e||0===t||0!==c[t]){var n=String(c[t]);e=""===e?n:e+a.call("0",7-n.length)+n}return e},m=function(t,e,n){return 0===e?n:e%2==1?m(t,e-1,n*t):m(t*t,e/2,n)};i(i.P+i.F*(!!r&&("0.000"!==8e-5.toFixed(3)||"1"!==.9.toFixed(0)||"1.25"!==1.255.toFixed(2)||"1000000000000000128"!==(0xde0b6b3a7640080).toFixed(0))||!n(29)(function(){r.call({})})),"Number",{toFixed:function(t){var e,n,i,r,l=o(this,u),c=s(t),f="",g="0";if(c<0||c>20)throw RangeError(u);if(l!=l)return"NaN";if(l<=-1e21||l>=1e21)return String(l);if(l<0&&(f="-",l=-l),l>1e-21)if(n=(e=function(t){for(var e=0,n=t;n>=4096;)e+=12,n/=4096;for(;n>=2;)e+=1,n/=2;return e}(l*m(2,69,1))-69)<0?l*m(2,-e,1):l/m(2,e,1),n*=4503599627370496,(e=52-e)>0){for(h(0,n),i=c;i>=7;)h(1e7,0),i-=7;for(h(m(10,i,1),0),i=e-1;i>=23;)d(1<<23),i-=23;d(1<<i),h(1,1),d(2),g=p()}else h(0,n),h(1<<-e,0),g=p()+a.call("0",c);return g=c>0?f+((r=g.length)<=c?"0."+a.call("0",c-r)+g:g.slice(0,r-c)+"."+g.slice(r-c)):f+g}})},function(t,e,n){"use strict";var i=n(7),s=n(29),o=n(324),a=1..toPrecision;i(i.P+i.F*(s(function(){return"1"!==a.call(1,void 0)})||!s(function(){a.call({})})),"Number",{toPrecision:function(t){var e=o(this,"Number#toPrecision: incorrect invocation!");return void 0===t?a.call(e):a.call(e,t)}})},function(t,e,n){var i=n(7);i(i.S,"Number",{EPSILON:Math.pow(2,-52)})},function(t,e,n){var i=n(7),s=n(28).isFinite;i(i.S,"Number",{isFinite:function(t){return"number"==typeof t&&s(t)}})},function(t,e,n){var i=n(7);i(i.S,"Number",{isInteger:n(325)})},function(t,e,n){var i=n(7);i(i.S,"Number",{isNaN:function(t){return t!=t}})},function(t,e,n){var i=n(7),s=n(325),o=Math.abs;i(i.S,"Number",{isSafeInteger:function(t){return s(t)&&o(t)<=9007199254740991}})},function(t,e,n){var i=n(7);i(i.S,"Number",{MAX_SAFE_INTEGER:9007199254740991})},function(t,e,n){var i=n(7);i(i.S,"Number",{MIN_SAFE_INTEGER:-9007199254740991})},function(t,e,n){var i=n(7),s=n(323);i(i.S+i.F*(Number.parseFloat!=s),"Number",{parseFloat:s})},function(t,e,n){var i=n(7),s=n(322);i(i.S+i.F*(Number.parseInt!=s),"Number",{parseInt:s})},function(t,e,n){var i=n(7),s=n(326),o=Math.sqrt,a=Math.acosh;i(i.S+i.F*!(a&&710==Math.floor(a(Number.MAX_VALUE))&&a(1/0)==1/0),"Math",{acosh:function(t){return(t=+t)<1?NaN:t>94906265.62425156?Math.log(t)+Math.LN2:s(t-1+o(t-1)*o(t+1))}})},function(t,e,n){var i=n(7),s=Math.asinh;i(i.S+i.F*!(s&&1/s(0)>0),"Math",{asinh:function t(e){return isFinite(e=+e)&&0!=e?e<0?-t(-e):Math.log(e+Math.sqrt(e*e+1)):e}})},function(t,e,n){var i=n(7),s=Math.atanh;i(i.S+i.F*!(s&&1/s(-0)<0),"Math",{atanh:function(t){return 0==(t=+t)?t:Math.log((1+t)/(1-t))/2}})},function(t,e,n){var i=n(7),s=n(248);i(i.S,"Math",{cbrt:function(t){return s(t=+t)*Math.pow(Math.abs(t),1/3)}})},function(t,e,n){var i=n(7);i(i.S,"Math",{clz32:function(t){return(t>>>=0)?31-Math.floor(Math.log(t+.5)*Math.LOG2E):32}})},function(t,e,n){var i=n(7),s=Math.exp;i(i.S,"Math",{cosh:function(t){return(s(t=+t)+s(-t))/2}})},function(t,e,n){var i=n(7),s=n(249);i(i.S+i.F*(s!=Math.expm1),"Math",{expm1:s})},function(t,e,n){var i=n(7);i(i.S,"Math",{fround:n(508)})},function(t,e,n){var i=n(248),s=Math.pow,o=s(2,-52),a=s(2,-23),r=s(2,127)*(2-a),l=s(2,-126);t.exports=Math.fround||function(t){var e,n,s=Math.abs(t),c=i(t);return s<l?c*(s/l/a+1/o-1/o)*l*a:(n=(e=(1+a/o)*s)-(e-s))>r||n!=n?c*(1/0):c*n}},function(t,e,n){var i=n(7),s=Math.abs;i(i.S,"Math",{hypot:function(t,e){for(var n,i,o=0,a=0,r=arguments.length,l=0;a<r;)l<(n=s(arguments[a++]))?(o=o*(i=l/n)*i+1,l=n):o+=n>0?(i=n/l)*i:n;return l===1/0?1/0:l*Math.sqrt(o)}})},function(t,e,n){var i=n(7),s=Math.imul;i(i.S+i.F*n(29)(function(){return-5!=s(4294967295,5)||2!=s.length}),"Math",{imul:function(t,e){var n=+t,i=+e,s=65535&n,o=65535&i;return 0|s*o+((65535&n>>>16)*o+s*(65535&i>>>16)<<16>>>0)}})},function(t,e,n){var i=n(7);i(i.S,"Math",{log10:function(t){return Math.log(t)*Math.LOG10E}})},function(t,e,n){var i=n(7);i(i.S,"Math",{log1p:n(326)})},function(t,e,n){var i=n(7);i(i.S,"Math",{log2:function(t){return Math.log(t)/Math.LN2}})},function(t,e,n){var i=n(7);i(i.S,"Math",{sign:n(248)})},function(t,e,n){var i=n(7),s=n(249),o=Math.exp;i(i.S+i.F*n(29)(function(){return-2e-17!=!Math.sinh(-2e-17)}),"Math",{sinh:function(t){return Math.abs(t=+t)<1?(s(t)-s(-t))/2:(o(t-1)-o(-t-1))*(Math.E/2)}})},function(t,e,n){var i=n(7),s=n(249),o=Math.exp;i(i.S,"Math",{tanh:function(t){var e=s(t=+t),n=s(-t);return e==1/0?1:n==1/0?-1:(e-n)/(o(t)+o(-t))}})},function(t,e,n){var i=n(7);i(i.S,"Math",{trunc:function(t){return(t>0?Math.floor:Math.ceil)(t)}})},function(t,e,n){var i=n(7),s=n(129),o=String.fromCharCode,a=String.fromCodePoint;i(i.S+i.F*(!!a&&1!=a.length),"String",{fromCodePoint:function(t){for(var e,n=[],i=arguments.length,a=0;i>a;){if(e=+arguments[a++],s(e,1114111)!==e)throw RangeError(e+" is not a valid code point");n.push(e<65536?o(e):o(55296+((e-=65536)>>10),e%1024+56320))}return n.join("")}})},function(t,e,n){var i=n(7),s=n(74),o=n(42);i(i.S,"String",{raw:function(t){for(var e=s(t.raw),n=o(e.length),i=arguments.length,a=[],r=0;n>r;)a.push(String(e[r++])),r<i&&a.push(String(arguments[r]));return a.join("")}})},function(t,e,n){"use strict";n(142)("trim",function(t){return function(){return t(this,3)}})},function(t,e,n){"use strict";var i=n(250)(!0);n(251)(String,"String",function(t){this._t=String(t),this._i=0},function(){var t,e=this._t,n=this._i;return n>=e.length?{value:void 0,done:!0}:(t=i(e,n),this._i+=t.length,{value:t,done:!1})})},function(t,e,n){"use strict";var i=n(7),s=n(250)(!1);i(i.P,"String",{codePointAt:function(t){return s(this,t)}})},function(t,e,n){"use strict";var i=n(7),s=n(42),o=n(252),a="".endsWith;i(i.P+i.F*n(254)("endsWith"),"String",{endsWith:function(t){var e=o(this,t,"endsWith"),n=arguments.length>1?arguments[1]:void 0,i=s(e.length),r=void 0===n?i:Math.min(s(n),i),l=String(t);return a?a.call(e,l,r):e.slice(r-l.length,r)===l}})},function(t,e,n){"use strict";var i=n(7),s=n(252);i(i.P+i.F*n(254)("includes"),"String",{includes:function(t){return!!~s(this,t,"includes").indexOf(t,arguments.length>1?arguments[1]:void 0)}})},function(t,e,n){var i=n(7);i(i.P,"String",{repeat:n(247)})},function(t,e,n){"use strict";var i=n(7),s=n(42),o=n(252),a="".startsWith;i(i.P+i.F*n(254)("startsWith"),"String",{startsWith:function(t){var e=o(this,t,"startsWith"),n=s(Math.min(arguments.length>1?arguments[1]:void 0,e.length)),i=String(t);return a?a.call(e,i,n):e.slice(n,n+i.length)===i}})},function(t,e,n){"use strict";n(68)("anchor",function(t){return function(e){return t(this,"a","name",e)}})},function(t,e,n){"use strict";n(68)("big",function(t){return function(){return t(this,"big","","")}})},function(t,e,n){"use strict";n(68)("blink",function(t){return function(){return t(this,"blink","","")}})},function(t,e,n){"use strict";n(68)("bold",function(t){return function(){return t(this,"b","","")}})},function(t,e,n){"use strict";n(68)("fixed",function(t){return function(){return t(this,"tt","","")}})},function(t,e,n){"use strict";n(68)("fontcolor",function(t){return function(e){return t(this,"font","color",e)}})},function(t,e,n){"use strict";n(68)("fontsize",function(t){return function(e){return t(this,"font","size",e)}})},function(t,e,n){"use strict";n(68)("italics",function(t){return function(){return t(this,"i","","")}})},function(t,e,n){"use strict";n(68)("link",function(t){return function(e){return t(this,"a","href",e)}})},function(t,e,n){"use strict";n(68)("small",function(t){return function(){return t(this,"small","","")}})},function(t,e,n){"use strict";n(68)("strike",function(t){return function(){return t(this,"strike","","")}})},function(t,e,n){"use strict";n(68)("sub",function(t){return function(){return t(this,"sub","","")}})},function(t,e,n){"use strict";n(68)("sup",function(t){return function(){return t(this,"sup","","")}})},function(t,e,n){var i=n(7);i(i.S,"Date",{now:function(){return(new Date).getTime()}})},function(t,e,n){"use strict";var i=n(7),s=n(60),o=n(112);i(i.P+i.F*n(29)(function(){return null!==new Date(NaN).toJSON()||1!==Date.prototype.toJSON.call({toISOString:function(){return 1}})}),"Date",{toJSON:function(t){var e=s(this),n=o(e);return"number"!=typeof n||isFinite(n)?e.toISOString():null}})},function(t,e,n){var i=n(7),s=n(543);i(i.P+i.F*(Date.prototype.toISOString!==s),"Date",{toISOString:s})},function(t,e,n){"use strict";var i=n(29),s=Date.prototype.getTime,o=Date.prototype.toISOString,a=function(t){return t>9?t:"0"+t};t.exports=i(function(){return"0385-07-25T07:06:39.999Z"!=o.call(new Date(-5e13-1))})||!i(function(){o.call(new Date(NaN))})?function(){if(!isFinite(s.call(this)))throw RangeError("Invalid time value");var t=this,e=t.getUTCFullYear(),n=t.getUTCMilliseconds(),i=e<0?"-":e>9999?"+":"";return i+("00000"+Math.abs(e)).slice(i?-6:-4)+"-"+a(t.getUTCMonth()+1)+"-"+a(t.getUTCDate())+"T"+a(t.getUTCHours())+":"+a(t.getUTCMinutes())+":"+a(t.getUTCSeconds())+"."+(n>99?n:"0"+a(n))+"Z"}:o},function(t,e,n){var i=Date.prototype,s=i.toString,o=i.getTime;new Date(NaN)+""!="Invalid Date"&&n(67)(i,"toString",function(){var t=o.call(this);return t==t?s.call(this):"Invalid Date"})},function(t,e,n){var i=n(37)("toPrimitive"),s=Date.prototype;i in s||n(73)(s,i,n(546))},function(t,e,n){"use strict";var i=n(30),s=n(112);t.exports=function(t){if("string"!==t&&"number"!==t&&"default"!==t)throw TypeError("Incorrect hint");return s(i(this),"number"!=t)}},function(t,e,n){var i=n(7);i(i.S,"Array",{isArray:n(203)})},function(t,e,n){"use strict";var i=n(89),s=n(7),o=n(60),a=n(328),r=n(255),l=n(42),c=n(256),u=n(257);s(s.S+s.F*!n(204)(function(t){Array.from(t)}),"Array",{from:function(t){var e,n,s,h,d=o(t),p="function"==typeof this?this:Array,m=arguments.length,f=m>1?arguments[1]:void 0,g=void 0!==f,v=0,b=u(d);if(g&&(f=i(f,m>2?arguments[2]:void 0,2)),null==b||p==Array&&r(b))for(n=new p(e=l(d.length));e>v;v++)c(n,v,g?f(d[v],v):d[v]);else for(h=b.call(d),n=new p;!(s=h.next()).done;v++)c(n,v,g?a(h,f,[s.value,v],!0):s.value);return n.length=v,n}})},function(t,e,n){"use strict";var i=n(7),s=n(256);i(i.S+i.F*n(29)(function(){function t(){}return!(Array.of.call(t)instanceof t)}),"Array",{of:function(){for(var t=0,e=arguments.length,n=new("function"==typeof this?this:Array)(e);e>t;)s(n,t,arguments[t++]);return n.length=e,n}})},function(t,e,n){"use strict";var i=n(7),s=n(74),o=[].join;i(i.P+i.F*(n(166)!=Object||!n(85)(o)),"Array",{join:function(t){return o.call(s(this),void 0===t?",":t)}})},function(t,e,n){"use strict";var i=n(7),s=n(243),o=n(100),a=n(129),r=n(42),l=[].slice;i(i.P+i.F*n(29)(function(){s&&l.call(s)}),"Array",{slice:function(t,e){var n=r(this.length),i=o(this);if(e=void 0===e?n:e,"Array"==i)return l.call(this,t,e);for(var s=a(t,n),c=a(e,n),u=r(c-s),h=new Array(u),d=0;d<u;d++)h[d]="String"==i?this.charAt(s+d):this[s+d];return h}})},function(t,e,n){"use strict";var i=n(7),s=n(90),o=n(60),a=n(29),r=[].sort,l=[1,2,3];i(i.P+i.F*(a(function(){l.sort(void 0)})||!a(function(){l.sort(null)})||!n(85)(r)),"Array",{sort:function(t){return void 0===t?r.call(o(this)):r.call(o(this),s(t))}})},function(t,e,n){"use strict";var i=n(7),s=n(94)(0),o=n(85)([].forEach,!0);i(i.P+i.F*!o,"Array",{forEach:function(t){return s(this,t,arguments[1])}})},function(t,e,n){var i=n(31),s=n(203),o=n(37)("species");t.exports=function(t){var e;return s(t)&&("function"!=typeof(e=t.constructor)||e!==Array&&!s(e.prototype)||(e=void 0),i(e)&&null===(e=e[o])&&(e=void 0)),void 0===e?Array:e}},function(t,e,n){"use strict";var i=n(7),s=n(94)(1);i(i.P+i.F*!n(85)([].map,!0),"Array",{map:function(t){return s(this,t,arguments[1])}})},function(t,e,n){"use strict";var i=n(7),s=n(94)(2);i(i.P+i.F*!n(85)([].filter,!0),"Array",{filter:function(t){return s(this,t,arguments[1])}})},function(t,e,n){"use strict";var i=n(7),s=n(94)(3);i(i.P+i.F*!n(85)([].some,!0),"Array",{some:function(t){return s(this,t,arguments[1])}})},function(t,e,n){"use strict";var i=n(7),s=n(94)(4);i(i.P+i.F*!n(85)([].every,!0),"Array",{every:function(t){return s(this,t,arguments[1])}})},function(t,e,n){"use strict";var i=n(7),s=n(330);i(i.P+i.F*!n(85)([].reduce,!0),"Array",{reduce:function(t){return s(this,t,arguments.length,arguments[1],!1)}})},function(t,e,n){"use strict";var i=n(7),s=n(330);i(i.P+i.F*!n(85)([].reduceRight,!0),"Array",{reduceRight:function(t){return s(this,t,arguments.length,arguments[1],!0)}})},function(t,e,n){"use strict";var i=n(7),s=n(201)(!1),o=[].indexOf,a=!!o&&1/[1].indexOf(1,-0)<0;i(i.P+i.F*(a||!n(85)(o)),"Array",{indexOf:function(t){return a?o.apply(this,arguments)||0:s(this,t,arguments[1])}})},function(t,e,n){"use strict";var i=n(7),s=n(74),o=n(91),a=n(42),r=[].lastIndexOf,l=!!r&&1/[1].lastIndexOf(1,-0)<0;i(i.P+i.F*(l||!n(85)(r)),"Array",{lastIndexOf:function(t){if(l)return r.apply(this,arguments)||0;var e=s(this),n=a(e.length),i=n-1;for(arguments.length>1&&(i=Math.min(i,o(arguments[1]))),i<0&&(i=n+i);i>=0;i--)if(i in e&&e[i]===t)return i||0;return-1}})},function(t,e,n){var i=n(7);i(i.P,"Array",{copyWithin:n(331)}),n(133)("copyWithin")},function(t,e,n){var i=n(7);i(i.P,"Array",{fill:n(258)}),n(133)("fill")},function(t,e,n){"use strict";var i=n(7),s=n(94)(5),o=!0;"find"in[]&&Array(1).find(function(){o=!1}),i(i.P+i.F*o,"Array",{find:function(t){return s(this,t,arguments.length>1?arguments[1]:void 0)}}),n(133)("find")},function(t,e,n){"use strict";var i=n(7),s=n(94)(6),o="findIndex",a=!0;o in[]&&Array(1)[o](function(){a=!1}),i(i.P+i.F*a,"Array",{findIndex:function(t){return s(this,t,arguments.length>1?arguments[1]:void 0)}}),n(133)(o)},function(t,e,n){n(144)("Array")},function(t,e,n){var i=n(28),s=n(246),o=n(49).f,a=n(131).f,r=n(253),l=n(205),c=i.RegExp,u=c,h=c.prototype,d=/a/g,p=/a/g,m=new c(d)!==d;if(n(48)&&(!m||n(29)(function(){return p[n(37)("match")]=!1,c(d)!=d||c(p)==p||"/a/i"!=c(d,"i")}))){c=function(t,e){var n=this instanceof c,i=r(t),o=void 0===e;return!n&&i&&t.constructor===c&&o?t:s(m?new u(i&&!o?t.source:t,e):u((i=t instanceof c)?t.source:t,i&&o?l.call(t):e),n?this:h,c)};for(var f=function(t){t in c||o(c,t,{configurable:!0,get:function(){return u[t]},set:function(e){u[t]=e}})},g=a(u),v=0;g.length>v;)f(g[v++]);h.constructor=c,c.prototype=h,n(67)(i,"RegExp",c)}n(144)("RegExp")},function(t,e,n){"use strict";n(334);var i=n(30),s=n(205),o=n(48),a=/./.toString,r=function(t){n(67)(RegExp.prototype,"toString",t,!0)};n(29)(function(){return"/a/b"!=a.call({source:"a",flags:"b"})})?r(function(){var t=i(this);return"/".concat(t.source,"/","flags"in t?t.flags:!o&&t instanceof RegExp?s.call(t):void 0)}):"toString"!=a.name&&r(function(){return a.call(this)})},function(t,e,n){"use strict";var i=n(30),s=n(42),o=n(261),a=n(206);n(207)("match",1,function(t,e,n,r){return[function(n){var i=t(this),s=null==n?void 0:n[e];return void 0!==s?s.call(n,i):new RegExp(n)[e](String(i))},function(t){var e=r(n,t,this);if(e.done)return e.value;var l=i(t),c=String(this);if(!l.global)return a(l,c);var u=l.unicode;l.lastIndex=0;for(var h,d=[],p=0;null!==(h=a(l,c));){var m=String(h[0]);d[p]=m,""===m&&(l.lastIndex=o(c,s(l.lastIndex),u)),p++}return 0===p?null:d}]})},function(t,e,n){"use strict";var i=n(30),s=n(60),o=n(42),a=n(91),r=n(261),l=n(206),c=Math.max,u=Math.min,h=Math.floor,d=/\$([$&`']|\d\d?|<[^>]*>)/g,p=/\$([$&`']|\d\d?)/g;n(207)("replace",2,function(t,e,n,m){return[function(i,s){var o=t(this),a=null==i?void 0:i[e];return void 0!==a?a.call(i,o,s):n.call(String(o),i,s)},function(t,e){var s=m(n,t,this,e);if(s.done)return s.value;var h=i(t),d=String(this),p="function"==typeof e;p||(e=String(e));var g=h.global;if(g){var v=h.unicode;h.lastIndex=0}for(var b=[];;){var y=l(h,d);if(null===y)break;if(b.push(y),!g)break;""===String(y[0])&&(h.lastIndex=r(d,o(h.lastIndex),v))}for(var w,x="",C=0,_=0;_<b.length;_++){y=b[_];for(var S=String(y[0]),E=c(u(a(y.index),d.length),0),k=[],T=1;T<y.length;T++)k.push(void 0===(w=y[T])?w:String(w));var A=y.groups;if(p){var I=[S].concat(k,E,d);void 0!==A&&I.push(A);var N=String(e.apply(void 0,I))}else N=f(S,d,E,k,A,e);E>=C&&(x+=d.slice(C,E)+N,C=E+S.length)}return x+d.slice(C)}];function f(t,e,i,o,a,r){var l=i+t.length,c=o.length,u=p;return void 0!==a&&(a=s(a),u=d),n.call(r,u,function(n,s){var r;switch(s.charAt(0)){case"$":return"$";case"&":return t;case"`":return e.slice(0,i);case"'":return e.slice(l);case"<":r=a[s.slice(1,-1)];break;default:var u=+s;if(0===u)return n;if(u>c){var d=h(u/10);return 0===d?n:d<=c?void 0===o[d-1]?s.charAt(1):o[d-1]+s.charAt(1):n}r=o[u-1]}return void 0===r?"":r})}})},function(t,e,n){"use strict";var i=n(30),s=n(319),o=n(206);n(207)("search",1,function(t,e,n,a){return[function(n){var i=t(this),s=null==n?void 0:n[e];return void 0!==s?s.call(n,i):new RegExp(n)[e](String(i))},function(t){var e=a(n,t,this);if(e.done)return e.value;var r=i(t),l=String(this),c=r.lastIndex;s(c,0)||(r.lastIndex=0);var u=o(r,l);return s(r.lastIndex,c)||(r.lastIndex=c),null===u?-1:u.index}]})},function(t,e,n){"use strict";var i=n(253),s=n(30),o=n(169),a=n(261),r=n(42),l=n(206),c=n(260),u=n(29),h=Math.min,d=[].push,p=!u(function(){RegExp(4294967295,"y")});n(207)("split",2,function(t,e,n,u){var m;return m="c"=="abbc".split(/(b)*/)[1]||4!="test".split(/(?:)/,-1).length||2!="ab".split(/(?:ab)*/).length||4!=".".split(/(.?)(.?)/).length||".".split(/()()/).length>1||"".split(/.?/).length?function(t,e){var s=String(this);if(void 0===t&&0===e)return[];if(!i(t))return n.call(s,t,e);for(var o,a,r,l=[],u=(t.ignoreCase?"i":"")+(t.multiline?"m":"")+(t.unicode?"u":"")+(t.sticky?"y":""),h=0,p=void 0===e?4294967295:e>>>0,m=new RegExp(t.source,u+"g");(o=c.call(m,s))&&!((a=m.lastIndex)>h&&(l.push(s.slice(h,o.index)),o.length>1&&o.index<s.length&&d.apply(l,o.slice(1)),r=o[0].length,h=a,l.length>=p));)m.lastIndex===o.index&&m.lastIndex++;return h===s.length?!r&&m.test("")||l.push(""):l.push(s.slice(h)),l.length>p?l.slice(0,p):l}:"0".split(void 0,0).length?function(t,e){return void 0===t&&0===e?[]:n.call(this,t,e)}:n,[function(n,i){var s=t(this),o=null==n?void 0:n[e];return void 0!==o?o.call(n,s,i):m.call(String(s),n,i)},function(t,e){var i=u(m,t,this,e,m!==n);if(i.done)return i.value;var c=s(t),d=String(this),f=o(c,RegExp),g=c.unicode,v=(c.ignoreCase?"i":"")+(c.multiline?"m":"")+(c.unicode?"u":"")+(p?"y":"g"),b=new f(p?c:"^(?:"+c.source+")",v),y=void 0===e?4294967295:e>>>0;if(0===y)return[];if(0===d.length)return null===l(b,d)?[d]:[];for(var w=0,x=0,C=[];x<d.length;){b.lastIndex=p?x:0;var _,S=l(b,p?d:d.slice(x));if(null===S||(_=h(r(b.lastIndex+(p?0:x)),d.length))===w)x=a(d,x,g);else{if(C.push(d.slice(w,x)),C.length===y)return C;for(var E=1;E<=S.length-1;E++)if(C.push(S[E]),C.length===y)return C;x=w=_}}return C.push(d.slice(w)),C}]})},function(t,e,n){var i=n(28),s=n(262).set,o=i.MutationObserver||i.WebKitMutationObserver,a=i.process,r=i.Promise,l="process"==n(100)(a);t.exports=function(){var t,e,n,c=function(){var i,s;for(l&&(i=a.domain)&&i.exit();t;){s=t.fn,t=t.next;try{s()}catch(i){throw t?n():e=void 0,i}}e=void 0,i&&i.enter()};if(l)n=function(){a.nextTick(c)};else if(!o||i.navigator&&i.navigator.standalone)if(r&&r.resolve){var u=r.resolve(void 0);n=function(){u.then(c)}}else n=function(){s.call(i,c)};else{var h=!0,d=document.createTextNode("");new o(c).observe(d,{characterData:!0}),n=function(){d.data=h=!h}}return function(i){var s={fn:i,next:void 0};e&&(e.next=s),t||(t=s,n()),e=s}}},function(t,e){t.exports=function(t){try{return{e:!1,v:t()}}catch(t){return{e:!0,v:t}}}},function(t,e,n){"use strict";var i=n(338),s=n(134);t.exports=n(210)("Map",function(t){return function(){return t(this,arguments.length>0?arguments[0]:void 0)}},{get:function(t){var e=i.getEntry(s(this,"Map"),t);return e&&e.v},set:function(t,e){return i.def(s(this,"Map"),0===t?0:t,e)}},i,!0)},function(t,e,n){"use strict";var i=n(338),s=n(134);t.exports=n(210)("Set",function(t){return function(){return t(this,arguments.length>0?arguments[0]:void 0)}},{add:function(t){return i.def(s(this,"Set"),t=0===t?0:t,t)}},i)},function(t,e,n){"use strict";var i,s=n(28),o=n(94)(0),a=n(67),r=n(113),l=n(318),c=n(339),u=n(31),h=n(134),d=n(134),p=!s.ActiveXObject&&"ActiveXObject"in s,m=r.getWeak,f=Object.isExtensible,g=c.ufstore,v=function(t){return function(){return t(this,arguments.length>0?arguments[0]:void 0)}},b={get:function(t){if(u(t)){var e=m(t);return!0===e?g(h(this,"WeakMap")).get(t):e?e[this._i]:void 0}},set:function(t,e){return c.def(h(this,"WeakMap"),t,e)}},y=t.exports=n(210)("WeakMap",v,b,c,!0,!0);d&&p&&(l((i=c.getConstructor(v,"WeakMap")).prototype,b),r.NEED=!0,o(["delete","has","get","set"],function(t){var e=y.prototype,n=e[t];a(e,t,function(e,s){if(u(e)&&!f(e)){this._f||(this._f=new i);var o=this._f[t](e,s);return"set"==t?this:o}return n.call(this,e,s)})}))},function(t,e,n){"use strict";var i=n(339),s=n(134);n(210)("WeakSet",function(t){return function(){return t(this,arguments.length>0?arguments[0]:void 0)}},{add:function(t){return i.def(s(this,"WeakSet"),t,!0)}},i,!1,!0)},function(t,e,n){"use strict";var i=n(7),s=n(211),o=n(263),a=n(30),r=n(129),l=n(42),c=n(31),u=n(28).ArrayBuffer,h=n(169),d=o.ArrayBuffer,p=o.DataView,m=s.ABV&&u.isView,f=d.prototype.slice,g=s.VIEW;i(i.G+i.W+i.F*(u!==d),{ArrayBuffer:d}),i(i.S+i.F*!s.CONSTR,"ArrayBuffer",{isView:function(t){return m&&m(t)||c(t)&&g in t}}),i(i.P+i.U+i.F*n(29)(function(){return!new d(2).slice(1,void 0).byteLength}),"ArrayBuffer",{slice:function(t,e){if(void 0!==f&&void 0===e)return f.call(a(this),t);for(var n=a(this).byteLength,i=r(t,n),s=r(void 0===e?n:e,n),o=new(h(this,d))(l(s-i)),c=new p(this),u=new p(o),m=0;i<s;)u.setUint8(m++,c.getUint8(i++));return o}}),n(144)("ArrayBuffer")},function(t,e,n){var i=n(7);i(i.G+i.W+i.F*!n(211).ABV,{DataView:n(263).DataView})},function(t,e,n){n(102)("Int8",1,function(t){return function(e,n,i){return t(this,e,n,i)}})},function(t,e,n){n(102)("Uint8",1,function(t){return function(e,n,i){return t(this,e,n,i)}})},function(t,e,n){n(102)("Uint8",1,function(t){return function(e,n,i){return t(this,e,n,i)}},!0)},function(t,e,n){n(102)("Int16",2,function(t){return function(e,n,i){return t(this,e,n,i)}})},function(t,e,n){n(102)("Uint16",2,function(t){return function(e,n,i){return t(this,e,n,i)}})},function(t,e,n){n(102)("Int32",4,function(t){return function(e,n,i){return t(this,e,n,i)}})},function(t,e,n){n(102)("Uint32",4,function(t){return function(e,n,i){return t(this,e,n,i)}})},function(t,e,n){n(102)("Float32",4,function(t){return function(e,n,i){return t(this,e,n,i)}})},function(t,e,n){n(102)("Float64",8,function(t){return function(e,n,i){return t(this,e,n,i)}})},function(t,e,n){var i=n(7),s=n(90),o=n(30),a=(n(28).Reflect||{}).apply,r=Function.apply;i(i.S+i.F*!n(29)(function(){a(function(){})}),"Reflect",{apply:function(t,e,n){var i=s(t),l=o(n);return a?a(i,e,l):r.call(i,e,l)}})},function(t,e,n){var i=n(7),s=n(130),o=n(90),a=n(30),r=n(31),l=n(29),c=n(320),u=(n(28).Reflect||{}).construct,h=l(function(){function t(){}return!(u(function(){},[],t)instanceof t)}),d=!l(function(){u(function(){})});i(i.S+i.F*(h||d),"Reflect",{construct:function(t,e){o(t),a(e);var n=arguments.length<3?t:o(arguments[2]);if(d&&!h)return u(t,e,n);if(t==n){switch(e.length){case 0:return new t;case 1:return new t(e[0]);case 2:return new t(e[0],e[1]);case 3:return new t(e[0],e[1],e[2]);case 4:return new t(e[0],e[1],e[2],e[3])}var i=[null];return i.push.apply(i,e),new(c.apply(t,i))}var l=n.prototype,p=s(r(l)?l:Object.prototype),m=Function.apply.call(t,p,e);return r(m)?m:p}})},function(t,e,n){var i=n(49),s=n(7),o=n(30),a=n(112);s(s.S+s.F*n(29)(function(){Reflect.defineProperty(i.f({},1,{value:1}),1,{value:2})}),"Reflect",{defineProperty:function(t,e,n){o(t),e=a(e,!0),o(n);try{return i.f(t,e,n),!0}catch(t){return!1}}})},function(t,e,n){var i=n(7),s=n(92).f,o=n(30);i(i.S,"Reflect",{deleteProperty:function(t,e){var n=s(o(t),e);return!(n&&!n.configurable)&&delete t[e]}})},function(t,e,n){"use strict";var i=n(7),s=n(30),o=function(t){this._t=s(t),this._i=0;var e,n=this._k=[];for(e in t)n.push(e)};n(327)(o,"Object",function(){var t,e=this._k;do{if(this._i>=e.length)return{value:void 0,done:!0}}while(!((t=e[this._i++])in this._t));return{value:t,done:!1}}),i(i.S,"Reflect",{enumerate:function(t){return new o(t)}})},function(t,e,n){var i=n(92),s=n(132),o=n(72),a=n(7),r=n(31),l=n(30);a(a.S,"Reflect",{get:function t(e,n){var a,c,u=arguments.length<3?e:arguments[2];return l(e)===u?e[n]:(a=i.f(e,n))?o(a,"value")?a.value:void 0!==a.get?a.get.call(u):void 0:r(c=s(e))?t(c,n,u):void 0}})},function(t,e,n){var i=n(92),s=n(7),o=n(30);s(s.S,"Reflect",{getOwnPropertyDescriptor:function(t,e){return i.f(o(t),e)}})},function(t,e,n){var i=n(7),s=n(132),o=n(30);i(i.S,"Reflect",{getPrototypeOf:function(t){return s(o(t))}})},function(t,e,n){var i=n(7);i(i.S,"Reflect",{has:function(t,e){return e in t}})},function(t,e,n){var i=n(7),s=n(30),o=Object.isExtensible;i(i.S,"Reflect",{isExtensible:function(t){return s(t),!o||o(t)}})},function(t,e,n){var i=n(7);i(i.S,"Reflect",{ownKeys:n(341)})},function(t,e,n){var i=n(7),s=n(30),o=Object.preventExtensions;i(i.S,"Reflect",{preventExtensions:function(t){s(t);try{return o&&o(t),!0}catch(t){return!1}}})},function(t,e,n){var i=n(49),s=n(92),o=n(132),a=n(72),r=n(7),l=n(125),c=n(30),u=n(31);r(r.S,"Reflect",{set:function t(e,n,r){var h,d,p=arguments.length<4?e:arguments[3],m=s.f(c(e),n);if(!m){if(u(d=o(e)))return t(d,n,r,p);m=l(0)}if(a(m,"value")){if(!1===m.writable||!u(p))return!1;if(h=s.f(p,n)){if(h.get||h.set||!1===h.writable)return!1;h.value=r,i.f(p,n,h)}else i.f(p,n,l(0,r));return!0}return void 0!==m.set&&(m.set.call(p,r),!0)}})},function(t,e,n){var i=n(7),s=n(244);s&&i(i.S,"Reflect",{setPrototypeOf:function(t,e){s.check(t,e);try{return s.set(t,e),!0}catch(t){return!1}}})},function(t,e,n){n(606),t.exports=n(47).Array.includes},function(t,e,n){"use strict";var i=n(7),s=n(201)(!0);i(i.P,"Array",{includes:function(t){return s(this,t,arguments.length>1?arguments[1]:void 0)}}),n(133)("includes")},function(t,e,n){n(608),t.exports=n(47).Array.flatMap},function(t,e,n){"use strict";var i=n(7),s=n(609),o=n(60),a=n(42),r=n(90),l=n(329);i(i.P,"Array",{flatMap:function(t){var e,n,i=o(this);return r(t),e=a(i.length),n=l(i,0),s(n,i,i,e,0,1,t,arguments[1]),n}}),n(133)("flatMap")},function(t,e,n){"use strict";var i=n(203),s=n(31),o=n(42),a=n(89),r=n(37)("isConcatSpreadable");t.exports=function t(e,n,l,c,u,h,d,p){for(var m,f,g=u,v=0,b=!!d&&a(d,p,3);v<c;){if(v in l){if(m=b?b(l[v],v,n):l[v],f=!1,s(m)&&(f=void 0!==(f=m[r])?!!f:i(m)),f&&h>0)g=t(e,n,m,o(m.length),g,h-1)-1;else{if(g>=9007199254740991)throw TypeError();e[g]=m}g++}v++}return g}},function(t,e,n){n(611),t.exports=n(47).String.padStart},function(t,e,n){"use strict";var i=n(7),s=n(342),o=n(209),a=/Version\/10\.\d+(\.\d+)?( Mobile\/\w+)? Safari\//.test(o);i(i.P+i.F*a,"String",{padStart:function(t){return s(this,t,arguments.length>1?arguments[1]:void 0,!0)}})},function(t,e,n){n(613),t.exports=n(47).String.padEnd},function(t,e,n){"use strict";var i=n(7),s=n(342),o=n(209),a=/Version\/10\.\d+(\.\d+)?( Mobile\/\w+)? Safari\//.test(o);i(i.P+i.F*a,"String",{padEnd:function(t){return s(this,t,arguments.length>1?arguments[1]:void 0,!1)}})},function(t,e,n){n(615),t.exports=n(47).String.trimLeft},function(t,e,n){"use strict";n(142)("trimLeft",function(t){return function(){return t(this,1)}},"trimStart")},function(t,e,n){n(617),t.exports=n(47).String.trimRight},function(t,e,n){"use strict";n(142)("trimRight",function(t){return function(){return t(this,2)}},"trimEnd")},function(t,e,n){n(619),t.exports=n(240).f("asyncIterator")},function(t,e,n){n(314)("asyncIterator")},function(t,e,n){n(621),t.exports=n(47).Object.getOwnPropertyDescriptors},function(t,e,n){var i=n(7),s=n(341),o=n(74),a=n(92),r=n(256);i(i.S,"Object",{getOwnPropertyDescriptors:function(t){for(var e,n,i=o(t),l=a.f,c=s(i),u={},h=0;c.length>h;)void 0!==(n=l(i,e=c[h++]))&&r(u,e,n);return u}})},function(t,e,n){n(623),t.exports=n(47).Object.values},function(t,e,n){var i=n(7),s=n(343)(!1);i(i.S,"Object",{values:function(t){return s(t)}})},function(t,e,n){n(625),t.exports=n(47).Object.entries},function(t,e,n){var i=n(7),s=n(343)(!0);i(i.S,"Object",{entries:function(t){return s(t)}})},function(t,e,n){"use strict";n(335),n(627),t.exports=n(47).Promise.finally},function(t,e,n){"use strict";var i=n(7),s=n(47),o=n(28),a=n(169),r=n(337);i(i.P+i.R,"Promise",{finally:function(t){var e=a(this,s.Promise||o.Promise),n="function"==typeof t;return this.then(n?function(n){return r(e,t()).then(function(){return n})}:t,n?function(n){return r(e,t()).then(function(){throw n})}:t)}})},function(t,e,n){n(629),n(630),n(631),t.exports=n(47)},function(t,e,n){var i=n(28),s=n(7),o=n(209),a=[].slice,r=/MSIE .\./.test(o),l=function(t){return function(e,n){var i=arguments.length>2,s=!!i&&a.call(arguments,2);return t(i?function(){("function"==typeof e?e:Function(e)).apply(this,s)}:e,n)}};s(s.G+s.B+s.F*r,{setTimeout:l(i.setTimeout),setInterval:l(i.setInterval)})},function(t,e,n){var i=n(7),s=n(262);i(i.G+i.B,{setImmediate:s.set,clearImmediate:s.clear})},function(t,e,n){for(var i=n(259),s=n(128),o=n(67),a=n(28),r=n(73),l=n(143),c=n(37),u=c("iterator"),h=c("toStringTag"),d=l.Array,p={CSSRuleList:!0,CSSStyleDeclaration:!1,CSSValueList:!1,ClientRectList:!1,DOMRectList:!1,DOMStringList:!1,DOMTokenList:!0,DataTransferItemList:!1,FileList:!1,HTMLAllCollection:!1,HTMLCollection:!1,HTMLFormElement:!1,HTMLSelectElement:!1,MediaList:!0,MimeTypeArray:!1,NamedNodeMap:!1,NodeList:!0,PaintRequestList:!1,Plugin:!1,PluginArray:!1,SVGLengthList:!1,SVGNumberList:!1,SVGPathSegList:!1,SVGPointList:!1,SVGStringList:!1,SVGTransformList:!1,SourceBufferList:!1,StyleSheetList:!0,TextTrackCueList:!1,TextTrackList:!1,TouchList:!1},m=s(p),f=0;f<m.length;f++){var g,v=m[f],b=p[v],y=a[v],w=y&&y.prototype;if(w&&(w[u]||r(w,u,d),w[h]||r(w,h,v),l[v]=d,b))for(g in i)w[g]||o(w,g,i[g],!0)}},function(t,e,n){var i=function(t){"use strict";var e,n=Object.prototype,i=n.hasOwnProperty,s="function"==typeof Symbol?Symbol:{},o=s.iterator||"@@iterator",a=s.asyncIterator||"@@asyncIterator",r=s.toStringTag||"@@toStringTag";function l(t,e,n,i){var s=e&&e.prototype instanceof f?e:f,o=Object.create(s.prototype),a=new T(i||[]);return o._invoke=function(t,e,n){var i=u;return function(s,o){if(i===d)throw new Error("Generator is already running");if(i===p){if("throw"===s)throw o;return I()}for(n.method=s,n.arg=o;;){var a=n.delegate;if(a){var r=S(a,n);if(r){if(r===m)continue;return r}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(i===u)throw i=p,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);i=d;var l=c(t,e,n);if("normal"===l.type){if(i=n.done?p:h,l.arg===m)continue;return{value:l.arg,done:n.done}}"throw"===l.type&&(i=p,n.method="throw",n.arg=l.arg)}}}(t,n,a),o}function c(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(t){return{type:"throw",arg:t}}}t.wrap=l;var u="suspendedStart",h="suspendedYield",d="executing",p="completed",m={};function f(){}function g(){}function v(){}var b={};b[o]=function(){return this};var y=Object.getPrototypeOf,w=y&&y(y(A([])));w&&w!==n&&i.call(w,o)&&(b=w);var x=v.prototype=f.prototype=Object.create(b);function C(t){["next","throw","return"].forEach(function(e){t[e]=function(t){return this._invoke(e,t)}})}function _(t){var e;this._invoke=function(n,s){function o(){return new Promise(function(e,o){!function e(n,s,o,a){var r=c(t[n],t,s);if("throw"!==r.type){var l=r.arg,u=l.value;return u&&"object"==typeof u&&i.call(u,"__await")?Promise.resolve(u.__await).then(function(t){e("next",t,o,a)},function(t){e("throw",t,o,a)}):Promise.resolve(u).then(function(t){l.value=t,o(l)},function(t){return e("throw",t,o,a)})}a(r.arg)}(n,s,e,o)})}return e=e?e.then(o,o):o()}}function S(t,n){var i=t.iterator[n.method];if(i===e){if(n.delegate=null,"throw"===n.method){if(t.iterator.return&&(n.method="return",n.arg=e,S(t,n),"throw"===n.method))return m;n.method="throw",n.arg=new TypeError("The iterator does not provide a 'throw' method")}return m}var s=c(i,t.iterator,n.arg);if("throw"===s.type)return n.method="throw",n.arg=s.arg,n.delegate=null,m;var o=s.arg;return o?o.done?(n[t.resultName]=o.value,n.next=t.nextLoc,"return"!==n.method&&(n.method="next",n.arg=e),n.delegate=null,m):o:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,m)}function E(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function k(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function T(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(E,this),this.reset(!0)}function A(t){if(t){var n=t[o];if(n)return n.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var s=-1,a=function n(){for(;++s<t.length;)if(i.call(t,s))return n.value=t[s],n.done=!1,n;return n.value=e,n.done=!0,n};return a.next=a}}return{next:I}}function I(){return{value:e,done:!0}}return g.prototype=x.constructor=v,v.constructor=g,v[r]=g.displayName="GeneratorFunction",t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===g||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,v):(t.__proto__=v,r in t||(t[r]="GeneratorFunction")),t.prototype=Object.create(x),t},t.awrap=function(t){return{__await:t}},C(_.prototype),_.prototype[a]=function(){return this},t.AsyncIterator=_,t.async=function(e,n,i,s){var o=new _(l(e,n,i,s));return t.isGeneratorFunction(n)?o:o.next().then(function(t){return t.done?t.value:o.next()})},C(x),x[r]="Generator",x[o]=function(){return this},x.toString=function(){return"[object Generator]"},t.keys=function(t){var e=[];for(var n in t)e.push(n);return e.reverse(),function n(){for(;e.length;){var i=e.pop();if(i in t)return n.value=i,n.done=!1,n}return n.done=!0,n}},t.values=A,T.prototype={constructor:T,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(k),!t)for(var n in this)"t"===n.charAt(0)&&i.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=e)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var n=this;function s(i,s){return r.type="throw",r.arg=t,n.next=i,s&&(n.method="next",n.arg=e),!!s}for(var o=this.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],r=a.completion;if("root"===a.tryLoc)return s("end");if(a.tryLoc<=this.prev){var l=i.call(a,"catchLoc"),c=i.call(a,"finallyLoc");if(l&&c){if(this.prev<a.catchLoc)return s(a.catchLoc,!0);if(this.prev<a.finallyLoc)return s(a.finallyLoc)}else if(l){if(this.prev<a.catchLoc)return s(a.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return s(a.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var s=this.tryEntries[n];if(s.tryLoc<=this.prev&&i.call(s,"finallyLoc")&&this.prev<s.finallyLoc){var o=s;break}}o&&("break"===t||"continue"===t)&&o.tryLoc<=e&&e<=o.finallyLoc&&(o=null);var a=o?o.completion:{};return a.type=t,a.arg=e,o?(this.method="next",this.next=o.finallyLoc,m):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),m},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),k(n),m}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var i=n.completion;if("throw"===i.type){var s=i.arg;k(n)}return s}}throw new Error("illegal catch attempt")},delegateYield:function(t,n,i){return this.delegate={iterator:A(t),resultName:n,nextLoc:i},"next"===this.method&&(this.arg=e),m}},t}(t.exports);try{regeneratorRuntime=i}catch(t){Function("r","regeneratorRuntime = r")(i)}},function(t,e,n){n(634),t.exports=n(344).global},function(t,e,n){var i=n(635);i(i.G,{global:n(264)})},function(t,e,n){var i=n(264),s=n(344),o=n(636),a=n(638),r=n(645),l=function(t,e,n){var c,u,h,d=t&l.F,p=t&l.G,m=t&l.S,f=t&l.P,g=t&l.B,v=t&l.W,b=p?s:s[e]||(s[e]={}),y=b.prototype,w=p?i:m?i[e]:(i[e]||{}).prototype;for(c in p&&(n=e),n)(u=!d&&w&&void 0!==w[c])&&r(b,c)||(h=u?w[c]:n[c],b[c]=p&&"function"!=typeof w[c]?n[c]:g&&u?o(h,i):v&&w[c]==h?function(t){var e=function(e,n,i){if(this instanceof t){switch(arguments.length){case 0:return new t;case 1:return new t(e);case 2:return new t(e,n)}return new t(e,n,i)}return t.apply(this,arguments)};return e.prototype=t.prototype,e}(h):f&&"function"==typeof h?o(Function.call,h):h,f&&((b.virtual||(b.virtual={}))[c]=h,t&l.R&&y&&!y[c]&&a(y,c,h)))};l.F=1,l.G=2,l.S=4,l.P=8,l.B=16,l.W=32,l.U=64,l.R=128,t.exports=l},function(t,e,n){var i=n(637);t.exports=function(t,e,n){if(i(t),void 0===e)return t;switch(n){case 1:return function(n){return t.call(e,n)};case 2:return function(n,i){return t.call(e,n,i)};case 3:return function(n,i,s){return t.call(e,n,i,s)}}return function(){return t.apply(e,arguments)}}},function(t,e){t.exports=function(t){if("function"!=typeof t)throw TypeError(t+" is not a function!");return t}},function(t,e,n){var i=n(639),s=n(644);t.exports=n(266)?function(t,e,n){return i.f(t,e,s(1,n))}:function(t,e,n){return t[e]=n,t}},function(t,e,n){var i=n(640),s=n(641),o=n(643),a=Object.defineProperty;e.f=n(266)?Object.defineProperty:function(t,e,n){if(i(t),e=o(e,!0),i(n),s)try{return a(t,e,n)}catch(t){}if("get"in n||"set"in n)throw TypeError("Accessors not supported!");return"value"in n&&(t[e]=n.value),t}},function(t,e,n){var i=n(265);t.exports=function(t){if(!i(t))throw TypeError(t+" is not an object!");return t}},function(t,e,n){t.exports=!n(266)&&!n(345)(function(){return 7!=Object.defineProperty(n(642)("div"),"a",{get:function(){return 7}}).a})},function(t,e,n){var i=n(265),s=n(264).document,o=i(s)&&i(s.createElement);t.exports=function(t){return o?s.createElement(t):{}}},function(t,e,n){var i=n(265);t.exports=function(t,e){if(!i(t))return t;var n,s;if(e&&"function"==typeof(n=t.toString)&&!i(s=n.call(t)))return s;if("function"==typeof(n=t.valueOf)&&!i(s=n.call(t)))return s;if(!e&&"function"==typeof(n=t.toString)&&!i(s=n.call(t)))return s;throw TypeError("Can't convert object to primitive value")}},function(t,e){t.exports=function(t,e){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:e}}},function(t,e){var n={}.hasOwnProperty;t.exports=function(t,e){return n.call(t,e)}},function(t,e,n){(function(n){var i;void 0===(i=function(){"use strict";Function("return this")();return void 0}.apply(e,[]))||(t.exports=i)}).call(this,n(114))},function(t,e,n){(function(i){var s,o;s=[n(346)],void 0===(o=function(t){"use strict";new Function("return this")();return void 0}.apply(e,s))||(t.exports=o)}).call(this,n(114))},function(t,e){(function(e){t.exports=e}).call(this,{})},function(t,e,n){var i,s;i=[n(1),n(9),n(22),n(69)],void 0===(s=function(t,e,n){"use strict";var i=e.extend(n,{type:"Abstract",limit:-1,init:function(t,e){this.storage=t||{},this.database=null,this.data={},this.includes=[],this.storage.isReady=!1,this.setOptions(e)},isAvailable:function(){return!1},interruptAccess:function(){if(!this.storage.isReady)throw new Error("Storage Adapter "+this.type+" is not ready.");return!0},get:function(t){return this.interruptAccess(),this.data[t]||null},set:function(t,e){return this.interruptAccess(),this.data[t]=e,e},rem:function(t){this.interruptAccess();var e=this.data[t];return this.data[t]=null,e}});return t.namespace("Storage/Adapter/Abstract",i,t)}.apply(e,i))||(t.exports=s)},,function(t,e,n){"use strict";var i,s;i=[n(1),n(25),n(13),n(16),n(189)],void 0===(s=function(t,e,n,i,s){window.App||(window.App={});var o,a={app:window.App,threeDDashboardContext:!1,x3dPlatformId:null,failureCode:null},r=!1;try{parent.foobar,o=!0}catch(t){o=!1}if(o&&parent.define&&parent.define.amd&&parent.define.amd.ds){try{r=parent.require("DS/Dashboard/PublicAPI")}catch(t){}}function l(){return new i(function(t,e){if(!r)return e(new Error("Not in 3DD"));parent.require("DS/i3DXCompassServices/i3DXCompassServices",function(n){n.getPlatformServices({onComplete:function(e){var n=e.map(function(t){return t.platformId});t({dashboardId:r._getActiveDashboardContext().modelId,owner:r._getActiveDashboardContext().owner,tenants:n})},onFailure:function(){e(new Error("Can't fetch tenants"))}})})}).then(function(t){a.threeDDashboardContext=t}).fail(function(){a.threeDDashboardContext=null})}function c(c){return l().then(function(){var l,h,d=a.threeDDashboardContext,p=!1;return o&&c&&(l=(h=s(c).getBootstrap()).promise,p=h.dashboardId!==r._getActiveDashboardContext().modelId),l&&!p||(l=new i(function(i,s){var o=a.app.Config.urls.startpage+"/api/dashboards/bootstrap",r={type:"json",method:"POST",timeout:!1,headers:{"Content-Type":"application/x-www-form-urlencoded"},onComplete:function(e){t.is(e)&&e.bootstrap?(a.failureCode=null,i(e.bootstrap)):s(e&&e.error)},onFailure:function(t,e){return s(e&&e.error||t)},onTimeout:s,onCancel:s},l={};e.proxies&&e.proxies.passport&&d?(r.proxy="passport",c&&(l.dashboardId=d.dashboardId||"",l.tenant=c)):n.matchUrl(o,window.location)||(r.proxy="ajax"),!l.pageId&&window.screenshotTask&&(l.pageId=window.screenshotTask.module.pageId),o+="?"+n.toQueryString(l),e.request(o,r)}),o&&c&&(l=l.then(u),h.dashboardId=r._getActiveDashboardContext().modelId,h.promise=l)),l})}function u(t){return new i(function(e,n){parent.require(["DS/i3DXCompassPlatformServices/i3DXCompassPlatformServices"],function(i){i.getPlatformServices({onComplete:function(i){return i?(t.platformServices=i,e(t)):n(new Error("Unable to retrive platform services"))},onFailure:n})})})}function h(){var e,n=a.app.Config&&a.app.Config.urls&&a.app.Config.urls.startpage,s=window.widget&&window.widget.preferences||window.widgetReadyCallbacks;return n?e=r&&s?new i(function(e,n){if("NETFEOP_AP"===widget.getValue("appId"))return a.x3dPlatformId=widget.getValue("x3dPlatformId")||"ON_PREMISE",n();var s=a.app.Config;parent.App||(parent.App={Config:s}),parent.require(s.assets_entry_points["3dd_parent/3dd_parent"].js,function(){parent.require(["App/3DD/Widget/Parent"],function(s){l().then(function(){return new i(function(t){widget.addEventOnce("onLoad",t)})}).then(function(){return widget.getValue("x3dPlatformId")||widget.setValue("x3dPlatformId",function(){if(a.threeDDashboardContext)return a.threeDDashboardContext.tenants[0]}()),a.x3dPlatformId=widget.getValue("x3dPlatformId"),s.requestBootstrap(a.x3dPlatformId)}).then(function(e){return Object.assign(a.app,e.App),a.platformServices=e.platformServices,widget.pageId=a.app.Page.id,s.init(widget).fail(function(e){if(!t.is(e,"string"))return i.reject(e);a.failureCode=e})}).then(e,n)})})}):r?c().then(function(e){var n=t.clone(e);delete n.App.NPD,delete n.App.Page,delete n.App.Permission,Object.assign(a.app,n.App),a.platformServices=n.platformServices}):s?c().then(function(t){Object.assign(a.app,t.App)}):i.resolve():window.Drupal||document.body&&document.body.hasAttribute("data-load-bootstrap")?(a.app.Config||(a.app.Config={}),a.app.Config.urls||(a.app.Config.urls={}),a.app.Config.urls.startpage=window.location.protocol+"//"+window.location.hostname,e=c().then(function(t){Object.assign(a.app,t.App)})):e=i.resolve(),e.fail(function(t){var e;t&&(e=t.name&&"SyntaxError"===t.name||401===t.code&&"Unauthorized"===t.status?1337:t.code?t.code:1,a.failureCode="bootstrap_"+e),window.console&&window.console.error("Bootstrap loading error:",t)})}return{load:function(){return h().then(function(){return a})},requestBootstrap:c}}.apply(e,i))||(t.exports=s)},function(t,e,n){"use strict";var i,s;i=[n(1),n(26),n(3),n(10),n(95),n(2),n(6),n(4),n(193),n(354),n(654),n(655),n(656),n(657),n(658),n(659),n(660),n(661)],void 0===(s=function(t,e,n,i,s,o,a,r,l,c,u,h,d,p,m,f,g,v){var b=t.createElement;return i.extend({name:"nv-auth",init:function(t){(t=t||{}).view=t.view||"signin",this._parent(t),this.views={},this.heights={},this.elements.container=b("div",{class:this.getClassNames()+" "+this.options.view})},getCurrentView:function(){return this.currentView},open:function(){this.elements.body||(this.buildSkeleton(),this.views[this.options.view].getContent().setStyle("display","block")),this.options.urlParams.email&&s.set("signin-mail",this.options.urlParams.email),this.morphToView(this.options.view,!0),this.inputs.focus()},buildSkeleton:function(){var t=[this.views.signin=new h,this.views.signup=new d,this.views.forgotpassword=new p,this.views.recoverpassword=new m,this.views.confirmation=new f,this.views.success=new g,this.views.confirmconnect=new v];t.invoke("addEvents",{changeView:this.morphToView.bind(this),socialConnectClick:this.socialConnect.bind(this)}),this.elements.container.addContent(b("div",{class:this.getClassNames("-head")}).addContent(b("div",{class:this.getClassNames("-head-logo")})),this.elements.body=b("form",{class:this.getClassNames("-body"),events:{submit:function(t){n.stop(t),this.onSubmitForm()}.bind(this)}}).addContent(this.elements.message=b("div",{class:this.getClassNames("-body-message")}),this.inputs=new u,this.elements.morph=b("div",{class:this.getClassNames("-morph")}).addContent(t)))},morphToView:function(t,e){this.dispatchEvent("componentResize");var n=window.setInterval(function(){this.dispatchEvent("componentResize")}.bind(this),10),i=function(){window.clearInterval(n)};this.hideMessages();var o="signin"===t||"signup"===t;"forgotpassword"!==t&&"confirmation"!==t&&"success"!==t||this.views[t].setEmailValue(this.inputs.getEmail()||s.get("signin-mail"));var a=function(){this.fadeIn(e,t,i)}.bind(this),r=function(){(o||e)&&this.inputs.toggle(e,o),this.grow(e,t,a)}.bind(this),l=function(){o||this.inputs.toggle(e,!1),this.fadeOut(e,this.currentView,r)}.bind(this);this.currentView?l():r(),this.currentView=t,this.dispatchEvent("changedView",t)},fadeOut:function(t,n,i){var s=this.views[n].getContent();new e(s,{duration:t?0:200,transition:"quartOut",events:{onComplete:function(){i&&(s.setStyle("display",""),i())}}}).start({opacity:0})},fadeIn:function(t,n,i){var s=this.views[n].getContent();s.setStyle("display","block"),new e(s,{duration:t?0:200,transition:"quartOut",events:{onComplete:function(){i&&i()}}}).start({opacity:1})},grow:function(t,n,i){var s=this.elements.morph,o=this.views[n].getContent();s.setStyle("display","block"),o.setStyle({display:"block",opacity:0});var a=o.getSize().height;new e(s,{duration:t?0:200,transition:"quartOut",events:{onComplete:function(){i&&i()}}}).start({height:a})},startLoading:function(){this.isLoading||(this.hideMessages(),this.loadingTimeout=window.setTimeout(function(){this.views[this.currentView].startLoading()}.bind(this),200))},stopLoading:function(){this.currentView&&(window.clearTimeout(this.loadingTimeout),this.views[this.currentView].stopLoading())},onSubmitForm:function(){switch(this.startLoading(),this.currentView){case"signin":this.signin();break;case"signup":this.signup();break;case"forgotpassword":this.forgotPassword();break;case"recoverpassword":this.recoverPassword();break;case"confirmation":this.confirmationEmail();break;case"confirmconnect":this.confirmConnect()}},signin:function(){var t={email:this.inputs.getEmail(),password:this.inputs.getPassword()};this.views.signin.getRememberMeValue()||(t.session_only=1),a.signin(t).done(function(){s.set("signin-mail",this.inputs.getEmail()),this.goToCallbackUrl()}.bind(this),function(t){this.displayMessage({type:"error",view:"signin",name:t})}.bind(this))},signup:function(){if(this.views.signup.getCguValue()){var t={email:this.inputs.getEmail(),password:this.inputs.getPassword(),newsletter:this.views.signup.getNewsletterValue()?1:0};this.options.wizardry&&(t.wizardry=this.options.wizardry),this.views.signup.isCaptchaEnabled()&&(t["g-recaptcha-response"]=this.views.signup.getCaptcha()),a.signup(t).done(function(t){s.set("signin-mail",this.inputs.getEmail()),t.skipMailConfirmation?this.goToCallbackUrl():this.morphToView("success")}.bind(this),function(t){this.displayMessage({type:"error",view:"signup",name:t})}.bind(this))}else this.displayMessage({type:"error",view:"legal",name:"empty"})},goToCallbackUrl:function(){"refresh-on-signin"===this.options.callbackUrl?"signin"===this.currentView?window.location.reload():window.location.href="/dashboard":window.location.href=this.options.callbackUrl+window.location.hash},forgotPassword:function(){a.sendLostPassword({email:this.views.forgotpassword.getEmailValue()}).done(function(){this.displayMessage({type:"success",view:"retrievePassword",name:"success"})}.bind(this),function(t){this.displayMessage({type:"error",view:"retrievePassword",name:t})}.bind(this))},recoverPassword:function(){this.views.recoverpassword.isMatch()?a.recoverPassword({email:this.options.urlParams.email,lostKey:this.options.urlParams.lostkey,lostTime:this.options.urlParams.losttime,password:this.views.recoverpassword.getPasswordValue()}).done(function(){this.stopLoading(),this.displayMessage({type:"success",view:"recoverPwd",name:"success"})}.bind(this),function(t){this.displayMessage({type:"error",view:"recoverPwd",name:t})}.bind(this)):this.displayMessage({type:"error",view:"recoverPwd",name:"nomatch"})},confirmationEmail:function(){a.sendActication({email:s.get("signin-mail"),callbackUrl:o.Config.urls.base}).done(function(){this.displayMessage({type:"success",view:"sendActivation",name:"success"})}.bind(this),function(t){this.displayMessage({type:"error",view:"sendActivation",name:t})}.bind(this))},confirmConnect:function(){if(this.views.confirmconnect.getCguValue()){var t=r.getInputsValue(this.views.confirmconnect.elements.container);a.createOAuthAccount(t).done(function(){this.goToCallbackUrl()}.bind(this),function(e){if("email exists"===e){this.stopLoading();var n=_("A Netvibes account already exists with this e-mail. To associate it with your {0} account, {1}login to your account{2}.").format(t.type,"{}","{}").split("{}");this.elements.message.addContent(b("div",{class:"uwa-message error",html:[n[0],{tag:"a",href:"#",events:{click:function(){this.options.callbackUrl="/account/services/"+t.type,this.morphToView("signin")}.bind(this)},text:n[1]},n[2]]}))}else this.displayMessage({type:"error",view:"confirmConnect",name:e})}.bind(this))}else this.displayMessage({type:"error",view:"legal",name:"empty"})},socialConnect:function(t){a.getUrl({callbackUrl:"/connect/"+t,service:t}).done(function(t){l.connect(t.url)})},hideMessages:function(){this.inputs.emptyErrors(),this.views.forgotpassword.emptyError(),this.elements.message.empty()},displayMessage:function(t){if(this.stopLoading(),this.hideMessages(),t){var e=c.getMessage(t.view,t.name),n=e.message||e;e.input?"retrievePassword"===t.view?this.views.forgotpassword.displayError(n):this.inputs.displayError(n,e.input):this.elements.message.addContent(b("div",{class:"uwa-message "+t.type,text:n})),"signup"===this.currentView&&this.views.signup.elements.reCaptcha.reset(),this.dispatchEvent("componentResize")}}})}.apply(e,i))||(t.exports=s)},function(t,e,n){"use strict";var i,s;i=[n(9),n(15),n(16),n(61)],void 0===(s=function(t,e,n,i){var s=i.extend();return t.extend({openPopup:function(t,i,s){var o=function(t,n){var i=void 0!==window.screenLeft?window.screenLeft:window.screenX,s=void 0!==window.screenTop?window.screenTop:window.screenY,o={top:0,left:0},a=e.getSize.call(document);return o.left=a.width/2-t/2+i,o.top=a.height/2-n/2+s,o}(s.width,s.height),a=window.open(t,i,"width="+s.width+",height="+s.height+",top="+o.top+",left="+o.left+",menubar=no,status=no,scrollbars=yes,location=no,directories=no");return new n(function(t){var e=setInterval(function(){a.closed&&(clearInterval(e),t())},1e3)})},getPopupSize:function(t){var e={google:{height:700,width:800},gmail:{height:700,width:800},googledrive:{height:700,width:800}};return e[t]?e[t]:{height:480,width:800}},bindTo:function(t,n,i,s,o){if(!t)return!1;var a=this.getPopupSize(o);e.addEvent.call(t,"click",function(){this.openPopup(n,i,a).done(s)}.bind(this))},connect:function(t){window.location.href=t},authenticateIfNeeded:function(t){return this.getTokens(t).then(function(e){return e.length?e[0]:this.authenticate(t)}.bind(this))},authenticate:function(t){return this.getAuthenticateUrl(t).then(function(e){return this.openPopup(e,t+"-connect",this.getPopupSize(t))}.bind(this)).then(function(){return this.getTokens(t)}.bind(this)).then(function(t){if(!t.length)throw new s("authentication error");return t[0]})}})}.apply(e,i))||(t.exports=s)},function(t,e,n){"use strict";var i,s;i=[n(1),n(26),n(10),n(213)],void 0===(s=function(t,e,n,i){var s=t.createElement;return n.extend({name:"nv-auth-inputs",init:function(t){this._parent(t),this.elements.container=s("div",{class:this.getClassNames()}).addContent(s("div",{class:this.getClassNames("-in")}).addContent(this.elements.emailInput=new i({type:"email",name:"email",text:_("Email")}),this.elements.passwordInput=new i({type:"password",name:"password",text:_("Password")})))},toggle:function(t,n){var i=t?0:200,s=this.elements.container,o=s.getSize().height;if(n&&"none"===s.getStyle("display")){s.setStyles({display:"block",height:0});var a=new e(s,{duration:i,transition:"quartOut"});new e(s,{duration:i,transition:"quartOut",events:{onComplete:function(){a.start({opacity:1}),s.setStyle("height","")}}}).start({height:o})}else if(!n){var r=new e(s,{duration:i,transition:"quartOut",events:{onComplete:function(){s.setStyles({display:"none",height:""})}}});new e(s,{duration:i,transition:"quartOut",events:{onComplete:function(){r.start({height:0})}}}).start({opacity:0})}},focus:function(){this.elements.emailInput.focus()},getEmail:function(){return this.elements.emailInput.getValue()},getPassword:function(){return this.elements.passwordInput.getValue()},setEmail:function(t){this.emailInput.setValue(t)},displayError:function(t,e){e&&this.elements[e+"Input"].setError(t)},emptyErrors:function(){this.elements.emailInput.setError(),this.elements.passwordInput.setError()}})}.apply(e,i))||(t.exports=s)},function(t,e,n){"use strict";var i,s;i=[n(1),n(8),n(2),n(135)],void 0===(s=function(t,e,n,i){var s=t.createElement;return i.extend({init:function(t){this._parent(t),this.elements.container=s("div",{class:this.getClassNames("-signin")}).addContent(s("div",{class:this.getClassNames("-checkbox")}).addContent(this.elements.rememberInput=new e.Checkbox({className:"green",attributes:{id:"remember"}}),s("label",{for:"remember",text:_("Remember me")})),s("div",{class:this.getClassNames("-button")}).addContent(this.elements.signinButton=new e.Button({className:"large green",value:_("Log in"),attributes:{type:"submit"}}),this.elements.password=s("div",{class:this.getClassNames("-button-password"),text:_("Forgot Password?"),events:{click:function(){this.dispatchEvent("changeView","forgotpassword")}.bind(this)}}),this.elements.alternate=s("div",{class:this.getClassNames("-alternate")}).addContent(n.Config.social_connect?s("div",{class:this.getClassNames("-alternate-title"),text:_("Or log in with")}):"",this.buildSocialConnect("signin"),s("div",{class:this.getClassNames("-alternate-text")}).addContent(_("By connecting to Twitter, you agree to comply at all time with Twitter’s Terms of Service and with Section VII.A User Protection of the Twitter Developer Agreement published at {0}https://developer.twitter.com/en/developer-terms/agreement{1}").format("<a href='https://developer.twitter.com/en/developer-terms/agreement'>","</a>")),s("div",{class:this.getClassNames("-alternate-text")}).addContent(_("Don't have an account?")," ",s("span",{class:"green",text:_("Sign Up"),events:{click:function(){this.dispatchEvent("changeView","signup")}.bind(this)}})),s("div",{class:this.getClassNames("-terms-service")}).addContent([s("a",{href:n.getURL("tos"),text:_("Terms of service"),target:"_blank"}),s("span",{class:"separator"}),s("a",{href:n.getURL("privacy"),text:_("Privacy Policy"),target:"_blank"})])),this.buildSpinner()))},getRememberMeValue:function(){return this.elements.rememberInput.isChecked()}})}.apply(e,i))||(t.exports=s)},function(t,e,n){"use strict";var i,s;i=[n(1),n(8),n(2),n(355),n(135)],void 0===(s=function(t,e,n,i,s){var o=t.createElement;return s.extend({init:function(t){this._parent(t),this.elements.container=o("div",{class:this.getClassNames("-signup")}).addContent(this.isCaptchaEnabled()?o("div",{class:this.getClassNames("-captcha")}).addContent(o("div",{class:this.getClassNames("-captcha-title"),text:_("Are you a real person?")}),this.elements.captcha=o("div",{id:"reCaptcha",class:this.getClassNames("-captcha-box"),html:this.elements.reCaptcha=new i})):"",this.buildCGUNewsletter(),o("div",{class:this.getClassNames("-button")}).addContent(new e.Button({className:"large green",value:_("Sign Up"),attributes:{type:"submit"}}),o("div",{class:this.getClassNames("-alternate")}).addContent(n.Config.social_connect?o("div",{class:this.getClassNames("-alternate-title"),text:_("Or sign in with")}):"",this.buildSocialConnect("signup"),o("div",{class:this.getClassNames("-alternate-text")}).addContent(_("By connecting to Twitter, you agree to comply at all time with Twitter’s Terms of Service and with Section VII.A User Protection of the Twitter Developer Agreement published at {0}https://developer.twitter.com/en/developer-terms/agreement{1}").format("<a href='https://developer.twitter.com/en/developer-terms/agreement'>","</a>")),o("div",{class:this.getClassNames("-alternate-text")}).addContent(_("Already have an account?")," ",o("span",{class:"green",text:_("Log In"),events:{click:function(){this.dispatchEvent("changeView","signin")}.bind(this)}}))),this.buildSpinner()))},getCaptcha:function(){return this.elements.reCaptcha.getValue()},isCaptchaEnabled:function(){return i.isEnabled()}})}.apply(e,i))||(t.exports=s)},function(t,e,n){"use strict";var i,s;i=[n(1),n(8),n(135),n(213)],void 0===(s=function(t,e,n,i){var s=t.createElement;return n.extend({init:function(t){this._parent(t),this.elements.container=s("div",{class:this.getClassNames("-forgotpassword")}).addContent(s("div",{class:this.getClassNames("-title"),text:_("Enter your email address to recover your password")}),this.elements.recoveryInput=new i({name:_("Email")}),s("div",{class:this.getClassNames("-button")}).addContent(new e.Button({className:"large green",value:_("Send"),attributes:{type:"submit"}}),s("div",{class:this.getClassNames("-button-password"),events:{click:function(){this.dispatchEvent("changeView","signin")}.bind(this)}}).addContent(_("Or ")," ",s("span",{class:"green",text:_("Back")})),this.buildSpinner()))},getEmailValue:function(){return this.elements.recoveryInput.getValue()},setEmailValue:function(t){this.elements.recoveryInput.setValue(t)},displayError:function(t){this.elements.recoveryInput.setError(t)},emptyError:function(){this.elements.recoveryInput.setError()}})}.apply(e,i))||(t.exports=s)},function(t,e,n){"use strict";var i,s;i=[n(1),n(8),n(95),n(135),n(213)],void 0===(s=function(t,e,n,i,s){var o=t.createElement;return i.extend({init:function(t){this._parent(t);var i=n.get("signin-mail");this.elements.container=o("div",{class:this.getClassNames("-recoverpassword")}).addContent(o("div",{class:this.getClassNames("-title"),text:_("Change your password :")}),o("div",{class:this.getClassNames("-recover-email"),text:i}),o("div",{class:this.getClassNames("-recover-input")}).addContent(o("div",{class:this.getClassNames("-recover-input-text"),text:_("New password: ")}),this.elements.newPasswordInput=new s({type:"password",name:_("New password")})),o("div",{class:this.getClassNames("-recover-input")}).addContent(o("div",{class:this.getClassNames("-recover-input-text"),text:_("Confirm your new password: ")}),this.elements.confirmPasswordInput=new s({type:"password",name:_("Confirm")})),o("div",{class:this.getClassNames("-button")}).addContent(new e.Button({className:"large green",value:_("Send"),attributes:{type:"submit"}}),this.buildSpinner()))},getPasswordValue:function(){return this.elements.newPasswordInput.getValue()},isMatch:function(){return this.getPasswordValue()===this.elements.confirmPasswordInput.getValue()}})}.apply(e,i))||(t.exports=s)},function(t,e,n){"use strict";var i,s;i=[n(1),n(8),n(135)],void 0===(s=function(t,e,n){var i=t.createElement;return n.extend({init:function(t){this._parent(t),this.elements.container=i("div",{class:this.getClassNames("-confirmation")}).addContent(i("div",{class:this.getClassNames("-title"),text:_("Send a confirmation e-mail again to:")}),this.elements.email=i("div",{class:this.getClassNames("-confirmation-email")}),i("div",{class:this.getClassNames("-button")}).addContent(new e.Button({className:"large green",value:_("Send"),attributes:{type:"submit"}}),i("div",{class:this.getClassNames("-button-password"),events:{click:function(){this.dispatchEvent("changeView","signin")}.bind(this)}}).addContent(_("Or ")," ",i("span",{class:"green",text:_("Back")})),this.buildSpinner()))},setEmailValue:function(t){this.elements.email.setText(t)}})}.apply(e,i))||(t.exports=s)},function(t,e,n){"use strict";var i,s;i=[n(1),n(8),n(95),n(135)],void 0===(s=function(t,e,n,i){var s=t.createElement;return i.extend({init:function(){this._parent(),this.elements.container=s("div",{class:this.getClassNames("-success")}).addContent(s("div",{class:this.getClassNames("-success-title"),text:_("Thanks for signing up!")}),s("div",{class:this.getClassNames("-success-text"),text:_("We just sent you a confirmation e-mail to: ")}),this.elements.email=s("div",{class:this.getClassNames("-success-email")}),s("div",{class:this.getClassNames("-success-text"),html:_("{0}Click on the activation link{1} to complete your sign up.").format("<strong>","</strong>")}),this.elements.inboxButton=s("div",{class:this.getClassNames("-button")}).addContent(new e.Button({className:"large green",value:_("Check your inbox!"),events:{onClick:this.onInboxClick.bind(this)}})))},setEmailValue:function(t){this.elements.email.setText(t)},open:function(){var t=this.getEmailData(n.get("signin-mail"));this.elements.inboxButton.setStyle("display",t)},getEmailData:function(t){return{gmail:"https://mail.google.com",googlemail:"https://mail.google.com",yahoo:"http://mail.yahoo.com",live:"http://mail.live.com",outlook:"http://mail.live.com",hotmail:"http://mail.live.com",aol:"http://mail.aol.com",gmx:"https://www.gmx.net/mail",laposte:"http://www.laposte.net/"}[t.substring(t.lastIndexOf("@")+1,t.lastIndexOf("."))]},onInboxClick:function(){var t=this.getEmailData(n.get("signin-mail"));window.location.href=t}})}.apply(e,i))||(t.exports=s)},function(t,e,n){"use strict";var i,s;i=[n(1),n(8),n(2),n(135),n(213)],void 0===(s=function(t,e,n,i,s){var o=t.createElement;return i.extend({init:function(t){this._parent(t);var i=window.nvSigninDataSocialConnectData||{};this.elements.container=o("div",{class:this.getClassNames("-confirm-connect")}).addContent(o("p",{text:_("Finalize your sign up on {0} via your social account.").format(n.NPD.brand||n.Config.application)}),i.avatar&&o("p",{class:this.getClassNames("-user-avatar"),html:{tag:"img",src:i.avatar}}),o("p",{html:new s({type:"email",name:"email",text:_("Email address"),value:i.email})}),this.buildCGUNewsletter(),o("div",{class:this.getClassNames("-button")}).addContent(new e.Button({className:"large green",value:_("Next"),attributes:{type:"submit"}}),this.buildSpinner()),o("input",{type:"hidden",name:"type",value:i.type}))}})}.apply(e,i))||(t.exports=s)},,,,,,,,,function(t,e,n){var i,s;i=[n(1),n(9)],void 0===(s=function(t,e){"use strict";var n,i;function s(e){return function(i,s,o,a){var r,l,c,u=i[e];if("object"===(r=t.typeOf(s))&&(l=s),!u||!(l||"string"===r&&t.is(o,"function")))throw new Error("invalid input args");for(c in t.is(this._listeningTo)||(this._listeningTo={}),t.is(i._observableId)||(i._observableId="o"+ ++n),this._listeningTo[i._observableId]=i,l||((l={})[s]=o),l)l.hasOwnProperty(c)&&u.call(i,c,l[c],this,a);return this}}return n=0,i=e.extend({listenTo:s("addEvent"),listenToOnce:s("addEventOnce"),stopListening:function(e,n,i){var s,o,a,r,l=this._listeningTo;if(o="removeEvent",l)for(r in a=t.typeOf(n),i||(!1===a?s=!0:"object"===a&&(o="removeEvents",i=this)),e&&((l={})[e._observableId]=e),l)(e=l[r])[o](n,i,this),!s&&e.hasEvent()||delete this._listeningTo[r];return this}}),t.namespace("Listener",i,e)}.apply(e,i))||(t.exports=s)},function(t,e,n){"use strict";var i,s;i=[n(1),n(9),n(39),n(22),n(15),n(2)],void 0===(s=function(t,e,n,i,s,o){var a=e.singleton(n,i,{options:{events:["mousemove","keydown","mousewheel","mousedown","touchstart"]},init:function(t){this.setOptions(t);var e,n=this.options.events,i=this,a=function(){i._idled&&i.toggleIdle(!1),clearTimeout(i._timeout),i._timeout=setTimeout(i.toggleIdle.bind(i,!0),1e3*o.Config.front_timers.idle)};if(!o.NPD&&!o.User.isVip){for(e=0;e<n.length;e+=1)s.addEvent.call(document,n[e],a);a()}},toggleIdle:function(t){t!==this._idled&&(void 0===t&&(t=!this._idled),clearTimeout(this._timeout),this._idled=t,this.dispatchEvent(t?"idle":"active"))},isIdle:function(){return!!this._idled},setInterval:function(t,e,n){var i,s,o,a=this;function r(e,n){var i,s,r,l,c={};if("number"==typeof e)i=1,s=1/0;else{if("object"!=typeof e||!e||!e.init)return function(){};i=e.factor||1,s=e.max||1/0,e=e.init}function u(){n!==a.isIdle()&&(o=+new Date,t(),e=(e*i).min(s),l=setTimeout(u,e))}return r=e,c[n?"active":"idle"]=function(){e=r,clearTimeout(l),l=setTimeout(u,e-(+new Date-o))},c[n?"idle":"active"]=function(){clearTimeout(l)},a.addEvents(c),l=setTimeout(u,e),function(){a.removeEvents(c),clearTimeout(l)}}return i=r(e,!0),s=r(n,!1),function(){i(),s()}}});return o.onReady(function(){o.isDebug()&&s.addEvent.call(window,"load",function(){var t=s.getElement.call(document.body,"#top");t&&a.addEvents({idle:t.setStyle.bind(t,"background","red"),active:t.setStyle.bind(t,"background","")})})}),t.namespace("Core/Idle",a,App)}.apply(e,i))||(t.exports=s)},function(t,e,n){"use strict";var i,s;i=[n(9),n(4),n(46),n(361),n(228)],void 0===(s=function(t,e,n,i,s){function o(t,e){return function(){return void 0===this._data[t]?e:this._data[t]}}var a={name:"areaspline",title:_("Stacked line"),icon:"ŷ",combineWith:"vertical",highchartsOptions:{stacking:"normal"}},r={name:"bar",title:_("Horizontal bar"),icon:"ů",combineWith:"horizontal",facetsAggregateAs:"hbar"},l={name:"column",title:_("Vertical bar"),icon:"ŵ",combineWith:"vertical"},c={name:"column3d",title:_("3D vertical bar"),icon:"ý"},u={name:"hbar",title:_("Horizontal bar"),icon:"ů",facetsAggregateAs:"hbar"},h={name:"map",title:_("Map"),icon:"~"},d={name:"pie",title:_("Pie"),icon:"ź",facetsAggregateAs:"pie"},p={name:"spline",title:_("Line"),icon:"ų",combineWith:"vertical"},m={name:"stackedbar",title:_("Horizontal stacked bar"),icon:"ſ",combineWith:"horizontal",facetsAggregateAs:"stackedhbar",highchartsOptions:{type:"bar",stacking:"normal"}},f={name:"stackedcolumn",title:_("Vertical stacked bar"),icon:"ž",combineWith:"vertical",highchartsOptions:{type:"column",stacking:"normal"}},g={name:"stackedhbar",title:_("Horizontal stacked bar"),icon:"ſ",facetsAggregateAs:"stackedhbar"},v={name:"table",title:_("Table"),icon:"ű",facetsAggregateAs:"table"},b={TimeSeries:[p,a,l,f,c,r,m,d,v],TimeLessSeries:[u,g,d,{name:"textcloud",title:_("Text cloud"),icon:"ż"},v,h]},y={TimeSeries:["visibleSmoothedLine","visibleTrendLine","visibleForecastLine","connectNonNulls","alignTo"],TimeLessSeries:[],common:["title","color","view","aggMethod","sampling"]};function w(t,e){return Array.isArray(e)?e.map(function(e){return e.getFacet()!==t?e.cloneWith({facet:t}):t}):Object.keys(e||{}).map(function(n){return new s({key:n,value:e[n],facet:t})})}var x=t.extend({init:function(t,n){var s=Object.assign({},n);if("TimeSeries"!==s.strategy&&"TimeLessSeries"!==s.strategy)throw new Error("Invalid facet strategy");this.cid=e.uniqueID(),this._data=s,s.notes=(s.notes||[]).map(function(t){return t instanceof i?t:new i(t)}),s.stats=w(this,s.stats),s.smoothCurve=w(this,s.smoothCurve),s.linearRegression=w(this,s.linearRegression),this._source=t},cloneWith:function(t){return new x(t.source||this._source,Object.assign({},this._data,t,{source:void 0}))},getName:o("name",""),getDisplayName:o("displayName",""),getSource:function(){return this._source},getIndex:o("index",-1),getStrategy:o("strategy"),isTimeData:function(){return"TimeSeries"===this.getStrategy()},isQuantitativeData:function(){return"TimeLessSeries"===this.getStrategy()},getView:function(){var t=this.getAvailableViews(),e=this._data.view;return t.detect(function(t){return t.name===e})||t[0]},getColor:o("color",""),getTitle:function(){if(this._data.title)return this._data.title;var t=this.getSource().getDisplayableQuery();return(t?t+" - ":"")+this.getDisplayName()},isSmoothedLineVisible:o("visibleSmoothedLine",!1),isTrendLineVisible:o("visibleTrendLine",!1),isForecastLineVisible:o("visibleForecastLine",!1),getSmoothed:function(){var t=this._data.smoothCurve;return t&&{stats:t,value:this._data.smoothCurveRateChange}},getTrend:function(){var t=this._data.linearRegression;return t&&{stats:t,value:this._data.linearRegressionRateChange}},getForecast:o("forecast"),getAggregationMethod:function(){var t=this._data.aggMethod;return void 0===t?"sum":t&&"none"!==t?t:null},getNotes:o("notes",[]),getNote:function(t){return this.getNotes().filter(function(e){return e.getKey()===t})[0]},connectNonNulls:o("connectNonNulls",!0),getAlignTo:o("alignTo","left"),getAvailable:o("available"),getCount:o("count"),getStats:o("stats"),hasStats:function(){return this.getStats().length>0},getTotal:o("total"),getTotalAvailable:o("totalAvailable"),getAverage:function(){return this.getTotal()/this.getStats().length},getMax:function(){var t=this.getStats().slice();return(t=n.sort(t,{type:"bymethod",label:"value",order:"desc"}))[0]},getMin:function(){var t=this.getStats().slice();return(t=n.sort(t,{type:"bymethod",label:"value",order:"asc"}))[0]},getStatus:function(){return this.getSource().getStatus()},getLastStat:function(){var t=this.getStats();return t[t.length-1]},getAvailableViews:function(){return b[this.getStrategy()]},getAvailableOptions:function(){return y[this.getStrategy()].concat(y.common)},getStatsForHighchart:function(t){if(!this.hasStats())return[];t=t||{};var e=this._data.stats;this.isTimeData()&&(t.nbDays=n.getNbDays(e[0].getLabel(),e[e.length-1].getLabel()),t.previousDate=new Date),t.sort&&(e=n.sort(e,t.sort));var i=[],s=n.brightenColor(this.getColor(),1.3),o=0,a=0;return e.forEach(function(e,r){t.usePanelColor&&(t.color=0===r?s:n.brightenColor(s,1.3-r/10));var l=e.formatStatForHighchart(t);this.isTimeData()&&(t.previousDate=l.date),t.limit&&r>t.limit?(o+=l.y,a+=l.percent):i.push(l)}.bind(this)),t.limit&&i.push({y:o,key:"other",label:_("Others"),facet:this,percent:Math.round(100*a)/100,color:t.usePanelColor?n.brightenColor(s,1.3-t.limit/10):this.getColor()}),i},toJson:function(){return{name:this.getName(),title:this.getTitle(),index:this.getIndex(),color:this.getColor(),view:this.getView().name,connectNonNulls:this.connectNonNulls(),visibleSmoothedLine:this.isSmoothedLineVisible(),visibleTrendLine:this.isTrendLineVisible(),visibleForecastLine:this.isForecastLineVisible(),aggMethod:this.getAggregationMethod(),alignTo:this.getAlignTo(),notes:this.getNotes().map(function(t){return{key:t.getKey(),label:t.getLabel(),text:t.getText()}})}}});return x}.apply(e,i))||(t.exports=s)},function(t,e,n){"use strict";var i,s;i=[n(40),n(272)],void 0===(s=function(t,e){return t.extend(e.default,{defaults:{title:_("Social Analytics"),icon:"analytics",visible:!0,query:{topic:"*:*",context:{}},sampling:"auto"},getDisplayableQuery:function(){return this.getQuery().topic},getDisplayableSuggestion:function(){return this.getQuery().topic}})}.apply(e,i))||(t.exports=s)},function(t,e,n){"use strict";var i,s;i=[n(40),n(272)],void 0===(s=function(t,e){return t.extend(e.default,{defaults:{title:_("Twitter"),icon:"twitter",visible:!0},getDisplayableSuggestion:function(){return this.getQuery().screenName}})}.apply(e,i))||(t.exports=s)},function(t,e,n){"use strict";var i,s;i=[n(40),n(272)],void 0===(s=function(t,e){return t.extend(e.default,{defaults:{title:_("Facebook Page"),icon:"facebookpages",visible:!0}})}.apply(e,i))||(t.exports=s)},function(t,e,n){"use strict";var i,s;i=[n(40)],void 0===(s=function(t){return t.extend({defaults:{title:_("LinkedIn Company Page"),icon:"linkedin"}})}.apply(e,i))||(t.exports=s)},function(t,e,n){"use strict";var i,s;i=[n(40)],void 0===(s=function(t){return t.extend({defaults:{title:_("Youtube Channel"),icon:"youtube"}})}.apply(e,i))||(t.exports=s)},function(t,e,n){"use strict";var i,s;i=[n(40)],void 0===(s=function(t){return t.extend({defaults:{title:_("Instagram"),icon:"instagram"}})}.apply(e,i))||(t.exports=s)},function(t,e,n){"use strict";var i,s;i=[n(40)],void 0===(s=function(t){return t.extend({defaults:{title:_("Google Analytics"),icon:"googleanalytics",visible:!0}})}.apply(e,i))||(t.exports=s)},function(t,e,n){"use strict";var i,s;i=[n(40)],void 0===(s=function(t){return t.extend({defaults:{title:_("Youtube Analytics"),icon:"youtubeanalytics"}})}.apply(e,i))||(t.exports=s)},function(t,e,n){"use strict";var i,s;i=[n(40)],void 0===(s=function(t){return t.extend({defaults:{title:_("Google Adwords"),icon:"googleadwords"}})}.apply(e,i))||(t.exports=s)},function(t,e,n){"use strict";var i,s;i=[n(40)],void 0===(s=function(t){return t.extend({defaults:{title:_("Twitter Ads"),icon:"twitter"}})}.apply(e,i))||(t.exports=s)},function(t,e,n){"use strict";var i,s;i=[n(40)],void 0===(s=function(t){return t.extend({defaults:{title:_("Facebook Insights"),icon:"facebook"}})}.apply(e,i))||(t.exports=s)},function(t,e,n){"use strict";var i,s;i=[n(40)],void 0===(s=function(t){return t.extend({defaults:{title:_("LinkedIn Ads"),icon:"linkedin"}})}.apply(e,i))||(t.exports=s)},function(t,e,n){"use strict";var i,s;i=[n(40)],void 0===(s=function(t){return t.extend({defaults:{title:_("Google Spreadsheet"),icon:"googlesheets"}})}.apply(e,i))||(t.exports=s)},function(t,e,n){"use strict";var i,s;i=[n(40)],void 0===(s=function(t){return t.extend({defaults:{title:_("Dropbox Spreadsheet"),icon:"dropbox"}})}.apply(e,i))||(t.exports=s)},function(t,e,n){"use strict";var i,s;i=[n(40)],void 0===(s=function(t){return t.extend({defaults:{title:_("Weather"),icon:"weather"}})}.apply(e,i))||(t.exports=s)},function(t,e,n){"use strict";var i,s;i=[n(40)],void 0===(s=function(t){return t.extend({defaults:{title:_("Yahoo Finance"),icon:"yahoo"}})}.apply(e,i))||(t.exports=s)},function(t,e,n){"use strict";var i,s;i=[n(40)],void 0===(s=function(t){return t.extend({defaults:{title:_("Potion"),icon:"potion"}})}.apply(e,i))||(t.exports=s)},function(t,e,n){"use strict";var i,s;i=[n(40)],void 0===(s=function(t){return t.extend({defaults:{title:_("Shared Library"),icon:"library"}})}.apply(e,i))||(t.exports=s)},function(t,e,n){"use strict";var i,s;i=[n(40)],void 0===(s=function(t){return t.extend({defaults:{title:_("Vimeo"),icon:"vimeo"}})}.apply(e,i))||(t.exports=s)},function(t,e,n){"use strict";var i,s;i=[n(40)],void 0===(s=function(t){return t.extend({defaults:{title:_("Adobe Analytics"),icon:"adobeanalytics"}})}.apply(e,i))||(t.exports=s)},function(t,e,n){"use strict";var i,s;i=[n(40)],void 0===(s=function(t){return t.extend({defaults:{title:_("Facebook Ads"),icon:"facebook"}})}.apply(e,i))||(t.exports=s)},function(t,e,n){"use strict";var i,s;i=[n(40)],void 0===(s=function(t){return t.extend({defaults:{title:_("OneDrive Spreadsheet"),icon:"onedrive"}})}.apply(e,i))||(t.exports=s)},function(t,e,n){"use strict";var i,s;i=[n(17)],void 0===(s=function(t){var e,n=window.localStorage,i="netvibes_mh",s=!1;function o(){if(!s){if(n)try{var t=n.getItem(i);s=t&&JSON.parse(t)}catch(t){}s||(s={})}return s}function a(){var e=o(),s={};t.getAll().forEach(function(t){var n=t.getId();e[n]&&(s[n]=e[n])});try{n.setItem(i,JSON.stringify(s))}catch(t){}}return{store:function(t,n){o()[t]=n,clearTimeout(e),e=setTimeout(a,1e3)},retrieve:function(t){return o()[t]}}}.apply(e,i))||(t.exports=s)},function(t,e,n){var i,s;i=[n(1),n(18),n(57),n(9),n(22),n(24),n(39),n(170),n(13),n(19),n(25),n(15)],void 0===(s=function(t,e,n,i,s,o,a,r,l,c,u,h){"use strict";function d(t){if(!Array.isArray(t))throw new Error(t+" should be an array");t.forEach(function(t){if("string"!=typeof t)throw new Error(t+" should be a string")})}function p(t,e){if(t){if(t.multiple||"checklist"===t.type)try{e=function(t){if(!t)return[];var e;if(Array.isArray(t))e=t;else try{e=JSON.parse(t)}catch(e){throw new Error("While parsing JSON value `"+t+"`: "+e)}return d(e),e}(e)}catch(e){throw new Error("While decoding value for preference "+t.name+": "+e)}"boolean"===t.type&&"boolean"!=typeof e&&void 0!==e&&(e="false"!==e&&Boolean(e))}return e}var m,f=i.extend(s,o,a,r,{init:function(){var t=c.Locale;this.id=null,this.environment=null,this.launched=!1,this.title=null,this.icon=null,this.counter=0,this.counterType=null,this.metas={},this.preferences=[],this.defaultData=Object.create(null),this.data={},this.plugins=[],this.events={},this.menus=[],this.elements={},this.body=null,this.lang=t.lang,this.locale=t.locale,this.dir=t.dir,this.readOnly=!1,this.isEdit=!1},launch:function(t,e){var n=this;return n.launched=!1,void 0!==e&&(n.readOnly=Boolean(e)),n.initPreferences(),n.initPlugins(),n.setValues(t),n.dispatchEvent("onInitConfig",{metas:n.metas,plugins:n.plugins,preferences:n.getPreferences()}),n.dispatchEvent("beforeLoad"),n.addEventOnce("onLoad",function(){n.launched=!0},n,1),n.dispatchEvent("onLoad"),n.launched&&n.dispatchEvent("afterLoad"),n.launched},destroy:function(){var t,e=this.elements;for(t in this.clearDelayed(),this.clearPeriodical(),e)e.hasOwnProperty(t)&&e[t].destroy();this.removeEvent(),this.launched=!1},setOptions:function(n){var i,s;for(i in n)s="set"+e.capitalize(i),t.is(this[s],"function")&&this[s](n[i]);return this._parent(n)},setAutoRefresh:function(t){(t=parseInt(t,10))&&t>0?this.setPeriodical("autoRefresh",this.dispatchEvent.bind(this,"onRefresh"),1e3*t*60):this.clearPeriodical("autoRefresh"),this.metas.autoRefresh=t},setCounter:function(e,n){(this.counter!==e||t.is(n)&&this.counterType!==n)&&(this.counter=e,this.counterType=n,this.dispatchEvent("onUpdateCounter",[e,n]))},getTitle:function(){return t.is(this.title,"string")?e.stripTags(this.title):""},setTitle:function(e,n){return(t.is(e,"string")&&this.title!==e||n&&this._titleUrl!==n)&&(this.title=e,this._titleUrl=n,this.dispatchEvent("onUpdateTitle",[e,n])),this.title},setIcon:function(e,n){return e&&t.is(e,"string")&&(n&&(e=u.proxifyUrl(e,{proxy:"icon"})),this.icon!==e&&(this.icon=e,this.dispatchEvent("onUpdateIcon",[e]))),this.icon},setMenu:function(e){var n,i,s,o=this.environment,a=e.name.split("/"),r=a[0];if(a.length>2)throw new Error("Adding more than one submenu level is not supported by setMenu");(s=this.getMenu(e.name))?t.extend(s,e):(a.length>1?((n=this.getMenu(r))||(n={label:r},this.menus.push(n)),n.items||(n.items=[]),i=n.items):i=this.menus,i.push(e)),this.setDelayed("onUpdateMenu",function(){o.dispatchEvent("onUpdateMenu",[this.menus])},20)},getMenu:function(e){var i,s;return t.is(e,"string")&&(s=e.split("/"),(i=n.detect(this.menus,function(t){return t.name===s[0]}))&&s.length>1&&(i=i.items&&n.detect(i.items,function(t){return t.name===e}))),i},removeMenu:function(t){var e,n,i,s;for(s=function(e){return e.name!==t},e=0,n=this.menus.length;e<n;e++){if((i=this.menus[e]).name===t){this.menus.remove(i);break}i.items&&(i.items=i.items.filter(s))}},setDir:function(t){var e=this.dir,n=this.elements.wrapper;return t="rtl"===t?"rtl":"ltr",n&&e!==t&&(n.setAttribute("dir",t),n.addClassName(t),n.removeClassName(e)),this.dir=t,t},setMetas:function(e){return t.merge(this.metas,e),t.is(e.debugMode)&&(this.setDebugMode(e.debugMode),this.environment&&this.environment.setDebugMode(e.debugMode)),t.is(e.autoRefresh)&&this.setAutoRefresh(e.autoRefresh),this.metas},setBody:function(t){if(!this.body)throw new Error("Widget.body is not yet available");this.body.setContent(t)},addBody:function(t){this.body.addContent(t)},getElements:function(t){return this.body.getElements(t)},getElement:function(t){return this.body.getElement(t)},createElement:function(e,n){return t.createElement(e,n)},setStyle:function(t){var e=this.id?"#m_"+this.id:".moduleWrapper";this.id&&this.elements.wrapper.setAttribute("id","m_"+this.id),l.setCss(!1,t,e,this.getUrl())},mutate:function(t,e){var n=this.environment;if(!t)throw new Error("Missing or empty first param on widget.mutate");if(!n||!n.mutate)throw new Error("Current Environment do not support widget.mutate");n.mutate(t,e)},getUrl:function(){var t=window.location.href;return this.uwaUrl?this.uwaUrl:l.getQueryString(t,"uwaUrl",t)},addStar:function(t){var e=this.environment;e&&e.addStar&&e.addStar(t)},getViewportDimensions:function(){var t,e,n=this.elements,i=n.body,s=h.getDimensions,o=h.isInjected,a=h.getComputedSize,r=c.getSize(),l=s.call(n.wrapper),u=s.call(i),d=r.height,p=l.width;["header","footer"].forEach(function(e){(t=n[e])&&o.call(t)&&(d-=s.call(t).outerHeight)}),t=i,e=n.wrapper.parentNode;do{t!==n.wrapper?p-=a.call(t,"innerWidth","outerWidth"):p-=a.call(t,"innerWidth"),d-=a.call(t,"innerHeight","outerHeight"),t=t.parentNode}while(t&&t!==e);return u.maxHeight>0&&d>u.maxHeight?d=u.maxHeight:u.minHeight>0&&d<u.minHeight&&(d=u.minHeight),{height:d<0?240+d:d,width:p<0?320+p:p}},setPlugins:function(t){this.plugins=t},initPlugins:function(){var e,n,i,s=t.clone(this.plugins);for(e=0,n=s.length;e<n;e++)i=s[e],t.Plugins[i.name]&&(i.instance=new t.Plugins[i.name](this,i.options))},initPreferences:function(){this.setPreferences(this.preferences)},hasPreferences:function(){var t=this.preferences;return!this.readOnly&&t.length>0&&t.some(function(t){return"hidden"!==t.type})},_getRawPreference:function(t){return n.detect(this.preferences,function(e){return e.name===t})},getPreference:function(e){var n=this._getRawPreference(e);return n&&((n=t.clone(n)).value=this.getValue(e)),n},hasPreference:function(t){return this.preferences.some(function(e){return e.name===t})},addPreference:function(){var e=["hidden","text","list","checklist","range","password","boolean"];return function(n){var i,s=-1,o=this.preferences;(function(t){return t.name&&t.type&&-1!==e.indexOf(t.type)})(n)&&(i=void 0!==(n=t.clone(n)).defaultValue,n.multiple&&"boolean"!=typeof n.multiple&&(n.multiple="true"===n.multiple),i&&(n.defaultValue=p(n,n.defaultValue)),o.forEach(function(t,e){n.name===t.name&&(s=e)}),n.label||(n.label=n.name),-1!==s?o[s]=n:o.push(n),this.defaultData[n.name]=n.defaultValue,this.launched&&this.dispatchEvent("onUpdatePreferences",[this.getPreferences()]))}}(),setPreferences:function(t){var e,n;for(this.preferences=[],this.defaultData={},e=0,n=t.length;e<n;e++)this.addPreference(t[e])},mergePreferences:function(t){var e,n;for(e=0,n=t.length;e<n;e++)this.hasPreference(t[e].name)||this.addPreference(t[e])},getPreferences:function(){var e,n,i,s,o,a,r=t.clone(this.preferences);for(e=0,n=r.length;e<n;e++)if((o=r[e]).value=this.getValue(o.name),o.label=t.i18n(o.label),t.is(o.options,"array"))for(i=0,s=o.options.length;i<s;i++)(a=o.options[i]).label=t.i18n(a.label);return r},getValue:function(e){var n=this.environment,i=this.data[e];return!t.is(i)&&n&&n.getData&&(i=p(this._getRawPreference(e),n.getData(e))),t.is(i)||(i=this.defaultData[e]),t.is(i)?this.data[e]=i:(i=void 0,delete this.data[e]),i},getInt:function(t){var e=this.getValue(t);return e="true"===e||!0===e?1:parseInt(e,10),isNaN(e)?0:e},getBool:(m=[1,"1","true",!0],function(t){return-1!==m.indexOf(this.getValue(t))}),setValue:function(e,n){var i=this.environment,s=this._getRawPreference(e),o=!0;return n=p(s,n),t.equals(this.data[e],n)||(t.is(n)?(n=t.clone(n),this.data[e]=n,i&&i.setData&&i.setData(e,function(t,e){return t&&(t.multiple||"checklist"===t.type)&&(d(e),e=JSON.stringify(e)),e}(s,n),!!s&&t.equals(s.defaultValue,n))):(this.data.hasOwnProperty(e)?delete this.data[e]:o=!1,i&&i.deleteData?i.deleteData(e):i&&i.setData&&i.setData(e,void 0)),o&&this.dispatchEvent("onUpdateValue",[e,n])),n},setValues:function(t){var e;for(e in t)t.hasOwnProperty(e)&&this.setValue(e,t[e])},deleteValue:function(t){return this.setValue(t)},toggleEdit:function(){this.dispatchEvent(this.isEdit?"endEdit":"onEdit")},dispatchEvent:function(t,e,n,i){var s=this.environment,o=!i&&s||"onLoad"===t||this.launched;return!i&&s?s.dispatchEvent(t,e,n):o&&this._parent(t,e,n),this},addEvent:function(t,e,n,i){var s=this,o="onLoad"===t&&s.launched;return s._parent(t,e,n,i),o&&(s.addEventOnce("_onLoadImmediate",e,n,i),this.setImmediate("_onLoadImmediate",function(){s.dispatchEvent("_onLoadImmediate")})),s},addEventOnce:function(t,e,n,i){var s=this;return"onLoad"===t&&s.launched?(s.addEventOnce("_onLoadImmediate",e,n,i),this.setImmediate("_onLoadImmediate",function(){s.dispatchEvent("_onLoadImmediate")})):s._parent(t,e,n,i),s},requestView:function(e){return t.is(e,"string")&&(e={type:e}),this.dispatchEvent("onViewRequest",[e]),this},getView:function(){return this._view||{type:"windowed"}},getAvailableViews:function(){var t=this.metas.availableViews||"";return n.invoke(t.split(";"),"trim").filter(function(t){return t}).map(function(t){var e,n=t.match(/\S*/)[0],i=t.slice(n.length).trim();if(i)try{e=JSON.parse(i)}catch(t){this.log("Failed to parse availableViews options")}return e||(e={}),e.type=n,e},this)},onEdit:function(){this.isEdit=!0},endEdit:function(){this.isEdit=!1}});return t.namespace("Widget",f,t)}.apply(e,i))||(t.exports=s)},function(t,e,n){var i,s;i=[n(1),n(18),n(13),n(3),n(86),n(10),n(8)],void 0===(s=function(t,e,n,i,s,o,a){"use strict";var r=o.extend({id:null,defaultOptions:{className:"uwa-form",fields:[],labelPreffix:":",nativeInputs:!1,darkBackground:!1},init:function(t){this._parent(t),this.id=n.random(10),this.buildSkeleton()},buildSkeleton:function(){var e,n,s,o=this.options,a=this.options.fields,r=this.fields,l=[],c=t.createElement("form",{class:o.className,id:this.id,events:{submit:function(t){i.stop(t),this.dispatchEvent("onSubmit",[t,this.getFormValues()])}.bind(this)}});for(o.nativeInputs||c.addClassName("uwa-form-uikit"),e=0,n=a.length;e<n;e++)"hidden"!==(s=a[e]).type&&(void 0===r[s.type]&&(s.type="text"),s.id="m_"+this.id+"_"+s.name,l.push(r[s.type](s,o,this)));t.createElement("fieldset",{html:l}).inject(c),this.elements.container=c},getFields:function(){var t=this.elements.container,e=n.toArray(t.getElementsByTagName("textarea")),i=n.toArray(t.getElementsByTagName("input")),s=n.toArray(t.getElementsByTagName("select"));return i.concat(s).concat(e)},getField:function(t){var e,n,i,s=this.getFields();for(e=0,n=s.length;e<n;e++)if((i=s[e]).name===t)return i},getFormValues:function(){var t,e,n={},i=this.getFields();function s(t){return t.getElements("option").filter(function(t){return t.selected}).map(function(t){return t.value})}for(t=0,e=i.length;t<e;t++){var o=i[t];switch(o.type){case"button":case"submit":break;case"password":""!==o.value&&(n[o.name]=o.value);break;case"checkbox":n[o.name]=Boolean(o.checked),"string"==typeof o.value&&(n[o.name]=String(n[o.name]));break;case"radio":o.checked&&(n[o.name]=o.value);break;default:"select"===o.getTagName()&&o.multiple?n[o.name]=s(o):n[o.name]=o.value}}return n},getFormValue:function(t){return this.getFormValues()[t]},setFormValues:function(t){var e,n,i,s,o=this.getFields();for(e=0,n=o.length;e<n;e++)if(i=o[e],t.hasOwnProperty(i.name))switch(s=t[i.name],i.type){case"password":case"button":case"submit":break;case"checkbox":i.checked=Boolean(s);break;case"radio":i.checked&&String(i.value)===s&&(i.checked=Boolean(s));break;default:i.value=s}},setFormValue:function(t,e){var n={};n[t]=e,this.setFormValues(n)},fields:{text:function(n,i,s){var o=t.createElement("input",{type:"text",id:n.id,class:n.type+" small",name:n.name,value:n.value||"",autocomplete:"off",autocorrect:"off",autocapitalize:"off"});return n.onchange&&o.addEvent("keyup",function(){this.dispatchEvent("onChange",[n.onchange,n.name,o.value])}.bind(s)),t.createElement("div",{class:"field field"+e.ucfirst(n.type),html:[{tag:"label",for:n.id,text:t.i18n((n.label||n.name)+i.labelPreffix)},{tag:"span",content:i.nativeInputs?o:new a.Text({_root:!1,element:o,className:"small"})}]})},password:function(n,i,s){var o=t.createElement("input",{type:"password",id:n.id,class:n.type,name:n.name,value:n.value||""});return n.onchange&&o.addEvent("keyup",function(){this.dispatchEvent("onChange",[n.onchange,n.name,o.value])}.bind(s)),t.createElement("div",{class:"field field"+e.ucfirst(n.type),html:[{tag:"label",for:n.id,text:t.i18n((n.label||n.name)+i.labelPreffix)},{tag:"span",content:i.nativeInputs?o:new a.Text({_root:!1,element:o,className:"small"})}]})},submit:function(n,i){var s=t.createElement("input",{id:n.id,class:n.type,type:"submit",name:n.name,value:n.value||t.i18n("Done")});return t.createElement("div",{class:"field field"+e.ucfirst(n.type),html:{tag:"span",content:i.nativeInputs?s:new a.Button({_root:!1,element:s,className:"light-grey small"})}})},button:function(n,i){var s=t.createElement("button",{id:n.id,class:n.type,name:n.name,text:n.value||t.i18n("Done")});return t.createElement("div",{class:"field field"+e.ucfirst(n.type),html:{tag:"span",content:i.nativeInputs?s:new a.Button({_root:!1,element:s,className:"light-grey small"})}})},reset:function(n,i){var s=t.createElement("button",{id:n.id,type:"reset",class:n.type,name:n.name,value:n.value||t.i18n("Done")});return t.createElement("div",{class:"field field"+e.ucfirst(n.type),html:{tag:"span",content:i.nativeInputs?s:new a.Button({_root:!1,element:s,className:"light-grey small"})}})},boolean:function(n,i,s){var o,r=n.id,l=t.createElement("div",{class:"field field"+e.ucfirst(n.type)}),c="string"!=typeof n.value||"true",u=n.value&&(!0===n.value||"true"===n.value);return t.createElement("label",{for:r,text:t.i18n(n.label||n.name)}).inject(l),o=t.createElement("input",{id:r,value:c,type:"checkbox",class:n.type+" "+(u?"checked":"unchecked"),name:n.name}),u&&(o.setAttribute("checked","checked"),o.defaultChecked=!0),o.addEvent("change",function(){var t=o.checked;o.addClassName(t?"checked":"unchecked"),o.removeClassName(t?"unchecked":"checked"),n.onchange&&this.dispatchEvent("onChange",[n.onchange,n.name,t?"true":"false"])}.bind(s)),t.createElement("span",{html:i.nativeInputs?o:new a.Checkbox({_root:!1,element:o,className:i.darkBackground?"green":""})}).inject(l),l},textarea:function(n,i,s){var o=t.createElement("textarea",{id:n.id,class:n.type+" small",name:n.name,text:n.value||""});return n.onchange&&o.addEvent("keyup",function(){this.dispatchEvent("onChange",[n.onchange,n.name,o.value])}.bind(s)),t.createElement("div",{class:"field field"+e.ucfirst(n.type),html:[{tag:"label",for:n.id,text:t.i18n((n.label||n.name)+i.labelPreffix)},i.nativeInputs?o:new a.Text({_root:!1,element:o})]})},range:function(n,i,s){var o,r,l,c,u=n.id,h=t.createElement("div",{class:"field field"+e.ucfirst(n.type)});if(t.createElement("label",{for:u,text:t.i18n((n.label||n.name)+i.labelPreffix)}).inject(h),l=t.createElement("span").inject(h),c=t.createElement("select",{id:"m_"+s.id+"_"+n.name,class:"range",name:n.name}).inject(l),n.step=parseInt(n.step,10),n.max=parseInt(n.max,10),n.min=parseInt(n.min,10),n.step>0)for(o=n.min;o<=n.max;o+=n.step)r=t.createElement("option",{value:o,text:String(o)}),n.value&&parseInt(n.value,10)===o&&(r.setAttribute("selected","selected"),r.selected=!0),c.appendChild(r);return n.onchange&&c.addEvent("change",function(){this.dispatchEvent("onChange",[n.onchange,n.name,c.value])}.bind(s)),i.nativeInputs||new a.Select({_root:!1,element:c,className:"small"}),h},list:function(i,s,o){var r,l,c,u,h,d,p="m_"+o.id+"_"+i.name,m=t.createElement("div",{class:"field field"+e.ucfirst(i.type)});if(t.createElement("label",{for:p,text:t.i18n((i.label||i.name)+s.labelPreffix)}).inject(m),h=t.createElement("span").inject(m),d=t.createElement("select",{id:"m_"+o.id+"_"+i.name,class:"list",name:i.name,multiple:Boolean(i.multiple)}).inject(h),t.is(i.options,"array")&&i.options.length>0){var f=n.splat(i.value).map(function(t){return String(t)});for(r=0,l=i.options.length;r<l;r++)(c=i.options[r]).label=c.label||c.value,u=t.createElement("option",{text:t.i18n(c.label),value:c.value}).inject(d),f.indexOf(String(c.value))>=0&&(u.setAttribute("selected","selected"),u.selected=!0);i.onchange&&d.addEvent("change",function(){this.dispatchEvent("onChange",[i.onchange,i.name,d.value])}.bind(o))}else m.hide();return s.nativeInputs||new a.Select({_root:!1,element:d,className:"small"}),m},checklist:function(i,o,r){var l,c,u,h,d,p=[],m="m_"+r.id+"_"+i.name,f=t.createElement("div",{class:"field field"+e.ucfirst(i.type)});if(t.createElement("label",{for:m,text:t.i18n((i.label||i.name)+o.labelPreffix)}).inject(f),h=t.createElement("span",{class:i.type}).inject(f),d=t.createElement("input",{id:"m_"+r.id+"_"+i.name,name:i.name,type:"hidden",value:t.is(i.value,"array")?s.encode(i.value):i.value}).inject(h),t.is(i.options,"array")&&i.options.length>0){var g=t.is(i.value,"array")?i.value:s.decode(i.value),v=n.splat(g).map(function(t){return String(t)});for(l=0,c=i.options.length;l<c;l++){(u=i.options[l]).label=u.label||u.value;var b=v.indexOf(String(u.value))>=0,y=t.createElement("p").inject(h),w=t.createElement("input",{value:u.value,type:"checkbox",name:u.value,checked:b});p.push(w),w.addEvent("change",function(){var t=[];p.forEach(function(e){e.checked&&t.push(e.value)}),d.value=s.encode(t),i.onchange&&this.dispatchEvent("onChange",[i.onchange,i.name,d.value])}.bind(r)),t.createElement("span",{html:o.nativeInputs?w:new a.Checkbox({_root:!1,className:o.darkBackground?"green":"",element:w})}).inject(y),t.createElement("label",{text:t.i18n(u.label)}).inject(y)}}else f.hide();return f},html:function(n){return t.createElement("div",{class:"field field"+e.ucfirst(n.type),html:{tag:"div",html:n.html}})},img:function(n){var i=t.i18n(n.label||n.name)||"";return t.createElement("div",{class:"field field"+e.ucfirst(n.type),html:{tag:"img",src:n.src,height:n.height||"auto",width:n.width||"100%",alt:i,title:i}})}}});return t.namespace("Controls/Form",r,t)}.apply(e,i))||(t.exports=s)},function(t,e,n){var i,s;i=[n(1),n(15),n(3),n(13),n(88)],void 0===(s=function(t,e,n,i,s){"use strict";var o=s.extend({name:"uwa-widget-popup-menu",init:function(t){this._parent(),this.env=t,this.items=null},setTarget:function(t){return this.target=t,this},onClick:function(t){this._parent(t);var e=n.findElement(t,"li"),i=this.env.widget.getMenu(e.getAttribute("data-name"));i&&this.env.dispatchEvent("onMenuExecute",[i])},onClickOutside:function(t){n.getElement(t)!==this.target&&this.hide()},setPosition:function(){var t,n=this.env.html.moduleFrame||this.env.html.wrapper,i=e.getOffsets.call(n),s=e.getSize.call(n),o=e.getOffsets.call(this.target),a=e.getSize.call(this.target);return{x:o.x,y:o.y+a.height},t={boundary:{x:0,y:o.y+a.height,width:i.x+s.width,height:1/0}},this._parent(o,t)},getInnerElement:function(){return this.getContent(),this.elements.inner},getContent:function(){var e=this.elements;return e.inner||this._parent().setContent(e.inner=t.createElement("menu",{type:"popup"})),e.container},setItems:function(t){return this.items=t,this},toggle:function(){this.getInnerElement().empty(),this.items.forEach(this.addItem,this),this.setPosition(),this._parent()},onShow:function(){this.target.addClassName("active"),this._parent()},onHide:function(){this.target.removeClassName("active"),this._parent()},addItem:function(e){var n,s;if(!1!==(t.is(e.visible,"function")?e.visible():!1!==e.visible))return n=t.createElement("li",{class:this.getClassNames("-item"),"data-name":e.name}),e.icon&&(s=t.createElement("span",{class:"uwa-icon uwa-icon-only"}),1===this._getUtf8StringLength(e.icon)?(s.set("data-icon",e.icon),s.addClassName("uwa-icon-unicode")):i.isAbsoluteUrl(e.icon)?s.adopt(t.createElement("img",{src:e.icon,width:16,height:16})):s.addClassName(e.icon),s.inject(n)),e.label&&t.createElement("span",{text:e.label}).inject(n),(t.is(e.disabled,"function")?e.disabled():!!e.disabled)&&n.addClassName("disabled"),n.inject(this.getInnerElement())},_getUtf8StringLength:function(t){var e=encodeURIComponent(t).match(/%[89ABab]/g);return t.length+(e?e.length:0)}});return t.namespace("Controls/WidgetPopupMenu",o,t)}.apply(e,i))||(t.exports=s)},function(t,e,n){var i,s;i=[n(1),n(18),n(9),n(22),n(170),n(39),n(13),n(700)],void 0===(s=function(t,e,n,i,s,o,a,r){"use strict";function l(t,e){var n;for(n in e)e.hasOwnProperty(n)&&(t.style[n]=e[n])}function c(t,e){var n,i;for(i in e)e.hasOwnProperty(i)&&(n=e[i],"styles"===i?l(t,n):"html"===i?t.innerHTML=n:"text"===i?(t.innerHTML="",t.appendChild(document.createTextNode(n))):t.setAttribute(i,n))}function u(t,e,n){var i=document.createElement(t);return e&&c(i,e),n&&n.appendChild(i),i}function h(t){var e;if("object"!=typeof t)return!1;for(e in t)if(t.hasOwnProperty(e))return!1;return!0}function d(t){return"boolean"==typeof t?!1===t?"0":"1":a.encodeUrl(t)}var p=n.extend(i,s,o,{url:"",id:null,data:null,version:t.version,elements:null,preferences:null,disableRemote:!0,defaultOptions:{container:null,className:"module",title:null,themeUrl:null,color:"white",height:"auto",width:"100%",maxHeight:!1,bookmarklet:!1,lang:null,id:null,readOnly:!1,data:{},buildHeader:!1,displayHeader:!0,displayFooter:!0,displayScroller:!1,displayEdit:!0,cache:null,useAsyncFrame:!1,useAppCache:!1,offlineMode:!1,autoLaunch:!0,subDomain:!1,subDomainPattern:"{id}.widget.",remoteName:"uwa.embedded",sandbox:!1,exposition:t.hosts.exposition,uwa:t.hosts.uwa},socket:null,init:function(t,e){this.url=t,this.data={},this.elements={},this.preferences=[],this._remoteQueue=[],this.startTime=(new Date).getTime(),this.setOptions(e);var n,i,s,o=typeof(e=this.options).container;if("string"===o?this.container=document.getElementById(e.container):"object"===o&&null!==this.options.container?this.container=e.container:(s=document.getElementById("UWA_ASYNC"),this.container=u("div",{id:this.id,class:e.className}),s?s.parentNode.insertBefore(this.container,s.nextSibling):(i=(n=document.getElementsByTagName("script"))[n.length-1]).parentNode.insertBefore(this.container,i)),p.Instances[this.id]=this,!this.container)throw new Error("UWA.Embedded is unable to get container element with container "+this.container+".");if("string"!=typeof this.url)throw new Error("UWA.Embedded expect url defined has first param");this.log('Init new instance with container id "'+this.id+'" and widget url "'+this.url+'"'),this.render()},destroy:function(){},setOptions:function(t){return this._parent(t),(t=this.options).title&&(t.buildHeader=!0),t.buildHeader&&(t.displayHeader=!1),this.data=t.data||{},!t.id&&this.id||(this.id=t.id||this.generateId()),this},generateId:function(){var t;do{t="uwa-"+a.getCheckSum(this.url)+"-"+a.random(1,1e5)}while(document.getElementById(t)&&null!==p.Instances[t]);return t},render:function(){var e,n={},i=this.options,s=this.container,o=navigator.userAgent.toLowerCase().match(/ip(?:ad|od|hone)/);n.wrapper=u("div",{class:"moduleWrapper"}),i.buildHeader&&(n.header=u("div",{class:"moduleHeader",styles:{position:"relative",overflow:"hidden",height:"23px",padding:"5px 5px 0 5px"}},n.wrapper),n.iconContainer=u("span",{styles:{padding:"0 5px 0 0"}},n.header),n.icon=u("img",{src:i.uwa+t.paths.img+"icon.png",class:"moduleIcon",height:16,width:16,styles:{border:"none",height:16,width:16}},n.iconContainer),n.title=u("span",{text:i.title||"Loading...",class:"moduleTitle",styles:{font:'bold 11px/20px "Lucida Grande",Tahoma,Helvetica,Arial,sans-serif',verticalAlign:"top"}},n.header)),n.body=u("div",{class:"moduleContent"},n.wrapper),e={id:"frame-"+this.id,frameBorder:0,width:"100%",scrolling:i.maxHeight||"auto"!==i.height?"auto":"no"},i.sandbox&&(e.sandbox="allow-same-origin allow-forms allow-scripts allow-popups"),n.iframe=u("iframe",e,n.body),l(n.iframe,{display:"block"}),i.bookmarklet&&(i.displayScroller=!0,i.height="100%",i.width="320px",l(n.wrapper,{position:"fixed",top:0,right:0,height:i.height,width:i.width,"z-index":99999998})),"auto"!==i.height&&(n.iframe.height=i.height),o&&i.displayScroller&&(n.iframe.scrolling="no"),this.elements=n,s.innerHTML="",s.appendChild(n.wrapper),i.useAsyncFrame?this.renderIframeAsync():this.renderIframe(),this.setChromeColor(i.color),this.initRemote()},renderIframe:function(){var t=this.elements.iframe,e=this.getIframeUrl();t.previousIframeUrl&&t.previousIframeUrl===e||(t.previousIframeUrl=e,t.src=e)},renderIframeAsync:function(){var e,n=JSON.stringify,i=this.options,s=this.elements.iframe.contentWindow.document,o=i.exposition+"/widget/amd/js?uwaUrl="+d(this.url),a={id:this.id,widgetDomain:window.location.toString().replace(/#.*$/,"")};i.cache&&(o+="&cache="+d(i.cache)),e=["<!DOCTYPE html>","<html>","<head>",'<meta charset="UTF-8" />','<script type="text/javascript">',"   var UWA = {hosts:"+n(t.hosts)+"},",'       curl = {apiName: "require"};',"<\/script>",'<script type="text/javascript" src="'+i.uwa+"/lib/vendors/curl.js?v="+this.version+'"><\/script>','<script type="text/javascript" src="'+o+"&v="+this.version+'"><\/script>',"</head>","<body>",'<script type="text/javascript">','   define("'+this.id+'", ["'+this.url+'"], function (widget) {',"       UWA.extend(widget, "+n(a)+");","   });","<\/script>","</body>","</html>"],s.open(),s.write(e.join("\n")),s.close()},getIframeUrl:function(){var t,e,n=[],i=this.options,s=this.data,o={uwaUrl:this.url,id:this.id,cache:i.cache,header:i.displayHeader,footer:i.displayFooter,scroller:i.displayScroller,displayEdit:i.displayEdit,autoLaunch:i.autoLaunch&&!i.offlineMode,useAppCache:i.useAppCache,offlineMode:i.offlineMode,chromeColor:i.color,widgetDomain:window.location.toString().replace(/#.*$/,""),themeUrl:i.themeUrl,lang:i.lang};if(!i.offlineMode)for(t in o.readOnly=i.readOnly,s)s.hasOwnProperty(t)&&!o.hasOwnProperty(t)&&(o[t]=s[t]);for(t in o)o.hasOwnProperty(t)&&null!==o[t]&&n.push(t+"="+d(o[t]));if((e=this.getIframeDomain()+"?"+n.join("&")).length>2048)throw new Error("UWA.Embedded iframe url is more than 2048 characters please implement UWA.Embedded using offlineMode=true.");return e},getIframeDomain:function(){var t,e=this.options,n=e.exposition;return e.subDomain&&(t=a.getCheckSum(this.url),n=n.replace("://","://"+e.subDomainPattern.replace("{id}",t))),n+="/widget/frame"},initRemote:function(){var t,e=this,n=e.options;e.socket||(p.Servers[n.remoteName]||(p.Servers[n.remoteName]=new r.Server(n.remoteName)),(t=new r.Socket(e.id+"-master")).subscribeServer(n.remoteName,window,window.location.toString()),t.addListener("widgetMessage",function(t){var n=t.args,i=n.shift();e.disableRemote=i,e.dispatchEvent(i,n),e.disableRemote=!1}),e.socket=t,e._runRemoteQueue())},_runRemoteQueue:function(){var t,e;this.socket&&0!==this._remoteQueue.length&&(e=this._remoteQueue.shift(),!0===this.disableRemote||this.disableRemote===e[0]?this.log("sendRemote message ignored: "+e):(t={id:this.id,args:e},this.log("sendRemote message: "+e),this.socket.dispatchEvent("environmentMessage",t,[t.id+"-slave"])),this._runRemoteQueue())},sendRemote:function(){this._remoteQueue.push(a.toArray(arguments)),this._runRemoteQueue()},launch:function(t,e){void 0!==e&&(this.options.readOnly=e),void 0!==t&&(this.data=t),this.disableRemote=!1,this.sendRemote("launchWidget",this.data,this.options.readOnly)},setChromeColor:function(t){this.dispatchEvent("onColorize",[t]),this.sendRemote("onColorize",t)},setTitle:function(t){this.dispatchEvent("onUpdateTitle",[t]),this.sendRemote("onUpdateTitle",t)},setIcon:function(t,e){this.dispatchEvent("onUpdateIcon",[t,e]),this.sendRemote("onUpdateIcon",t,e)},setValue:function(t,e){this.dispatchEvent("onUpdateValue",[t,e]),this.sendRemote("onUpdateValue",t,e)},setValues:function(t){var e;for(e in t)t.hasOwnProperty(e)&&this.setValue(e,t[e])},resizeHeight:function(t,e){this.dispatchEvent("onResizeHeight",[t,e]),this.sendRemote("onResize")},resizeWidth:function(t,e){this.dispatchEvent("onResizeWidth",[t,e]),this.sendRemote("onResize")},onRegisterWidget:function(){var t=this.options;this.loadTime=(new Date).getTime(),this.disableRemote=!1,t.autoLaunch&&(t.offlineMode||t.useAsyncFrame)&&this.launch()},onUpdateTitle:function(t){this.title!==t&&(this.title=t,this.elements.title&&this.options.buildHeader&&null===this.options.title&&c(this.elements.title,{text:e.stripTags(t)}))},onUpdateIcon:function(t){if(this.icon!==t&&(this.icon=t,this.options.buildHeader)){var e=this.elements.icon,n=u("img",{src:t,onload:function(){e.src=t}});n.complete&&n.width>0&&(e.src=t)}},onUpdatePreferences:function(t){this.preferences=t},onUpdateValue:function(t,e){this.data[t]!==e&&(this.data[t]=e)},onResizeHeight:function(t,e){var n=this.options,i=n.maxHeight,s=i&&t>i;this.elements.iframe&&(e||"auto"===n.height)&&(this.elements.iframe.height=s?i:t)},onResizeWidth:function(t,e){var n=this.options;this.elements.iframe&&(e||"auto"===n.width)&&(this.elements.iframe.width=t)},onColorize:function(e){var n=this.options,i=this.elements;n.color=e,n.buildHeader&&(l(i.header,"transparent"!==e?{background:'url("'+n.uwa+t.paths.css+"themes/blueberry/img/moduleheader"+("white"!==e?"_"+e:"")+".png?v="+this.version+'") repeat-x scroll center top transparent'}:{background:null}),l(i.title,{color:"transparent"!==e?"white":"black"}))},onViewRequest:function(t){t||(t={}),t.error="No view implementation in Embedded mode",this.sendRemote("onViewError",t)},getCode:function(t){var e,n,i,s,o=this.url,a=JSON.stringify,r=this.options,l={},c=["/lib/c/UWA/js/UWA_Embedded.js"],u={uwa:r.uwa,exposition:r.exposition};for(i in r)r.hasOwnProperty(i)&&"container"!==i&&null!==r[i]&&this.defaultOptions[i]!==r[i]&&(h(r[i])||(l[i]=r[i]));if(t&&1===c.length)s=['<script type="text/javascript">',"var UWA = {hosts:"+a(u)+"}, UWA_ASYNC = UWA_ASYNC || [];",'    UWA_ASYNC.push({url: "'+o+'",options:'+a(l)+"});","(function () {",'    var a = document.getElementsByTagName("script"), b = a[a.length - 1] || document.body.lastChild,','        c = b.parentNode, d = document.createElement("script"), e = document.createElement("div");','    e.id = "UWA_ASYNC"; d.type = "text/javascript"; d.async = true;','    d.src = ("https:" == document.location.protocol ? "https://" : "http://") + UWA.hosts.uwa.split("://")[1] + "'+c[0]+"?v="+this.version+'";',"    c.insertBefore(d, b); c.insertBefore(e, b)","})();","<\/script>"];else{for((s=[]).push('<script type="text/javascript"> var UWA = {hosts:'+a(u)+"}; <\/script>"),e=0,n=c.length;e<n;e++)s.push('<script type="text/javascript" src="'+r.uwa+c[e]+"?v="+this.version+'"><\/script>');s.push('<script type="text/javascript">'),s.push('var MyWidget = new UWA.Embedded("'+o+'"'+(h(l)?"":","+a(l))+");"),s.push("<\/script>")}return s.join("\n")}});return p.Instances={},p.Servers={},function(){var e,n,i;if(window.UWA_ASYNC)for(i=window.UWA_ASYNC,t.Widgets=t.Widgets||[],e=0,n=i.length;e<n;e++)t.Widgets[e]=new p(i[e].url,i[e].options||{})}(),t.namespace("Embedded",p,t)}.apply(e,i))||(t.exports=s)},function(t,e,n){(function(i){var s,o;s=[n(1),n(13),n(9),n(171),n(39),n(22),n(24),n(170),n(86)],void 0===(o=function(t,e,n,i,s,o,a,r,l){"use strict";function c(t,e){var n,i,s,o;for(n=0,i=t.length;n<i;n++)for(s=0,o=e.length;s<o;s++)if(e[s]===t[n])return!0;return!1}function u(t){return Boolean(t.UWA&&t.UWA.Utils&&t.UWA.Utils.InterCom)&&!t.UWA.Utils.InterCom._listener&&(t.UWA.Utils.InterCom._listener=new s),t.UWA.Utils.InterCom._listener}var h,d=t.getGlobal();return(h={getAdapter:function(t){var n,i,s,o=h.Adapters,a=t?e.splat(t):Object.keys(o);for(n=0,i=a.length;n<i&&!s;n++){if(t=a[n],!o.hasOwnProperty(t))throw new Error('Unable to get InterCom Adapter with name "'+t+'"');if(o[t].isAvailable(s)){s=o[t];break}}if(!s)throw new Error("Unable to get InterCom Adapter");return s}}).Adapters={PostMessage:function(){var t,n="uwa-intercom";function s(e){var i;try{i="string"==typeof e.data&&"{"===e.data[0]&&JSON.parse(e.data)}catch(t){}i&&i.type===n&&t.dispatch([i.payload,{origin:e.origin,source:e.source}])}return{isAvailable:function(){return d.postMessage&&d.location&&d.location.protocol&&d.location.protocol.contains("http")},removeListener:function(e){t&&(t.remove(e),0===t.getNumListeners()&&(t.dispose(),t=void 0,d.addEventListener?d.removeEventListener("message",s,!1):d.attachEvent&&d.detachEvent("onmessage",s)))},addListener:function(e){t||(t=t||new i,d.addEventListener?d.addEventListener("message",s,!1):d.attachEvent&&d.attachEvent("onmessage",s)),t.add(e)},dispatchEvent:function(t,i,s){var o;if(i||(i=(o=d.parent).postMessage?o:o.document.postMessage?o.document:void 0),s=s&&"*"!==s?e.buildUrl(d.location,s):"*",i&&i.postMessage){var a={type:n,payload:t};i.postMessage(JSON.stringify(a),s)}}}}(),FrameCallback:function(){var t,n=0,i=[],s=!0,o=d.document;function a(){s&&o.body&&i.length>0&&o.body.appendChild(i.shift()),i.length>0&&setTimeout(a,10)}return{isAvailable:function(){return t=u(d),Boolean(t)},removeListener:function(e){t.removeEvent("message",e)},addListener:function(e){t.addEvent("message",e)},dispatchEvent:function(t,r,c){!function(t){try{return t===d||t.location.host===d.location.host&&t.location.protocol===d.location.protocol}catch(t){}}(r)?function(t,r,c){var u,h,p=d.location.toString(),m=e.parseUrl(c),f=m.protocol+"://"+m.domain+"/intercom.html",g={info:t,origin:p};u="#"+Date.now()+n+++"&"+l.encode(g),(h=o.createElement("iframe")).setAttribute("src",f+u),h.style.position="absolute",h.style.top="-2000px",h.style.left="0px",h.onload=function(){s=!0,h.parentNode.removeChild(h)},i.push(h),setTimeout(a,10)}(t,0,c):function(t,e){var n=u(e);setTimeout(function(){n.dispatchEvent("message",[t,{origin:d.location.toString(),source:d}])})}(t,r)}}}()},h.Server=n.extend(o,r,{id:null,uuid:null,sockets:null,listeners:null,defaultOptions:{adapter:null,autoconnect:!0},init:function(t,e){this.setServerId(t),this.sockets={},this.listeners=new s,this.setOptions(e),this.options.autoconnect&&this.connect()},setServerId:function(t){var n=h.Server.Instances=h.Server.Instances||{};return this.uuid=this.uuid||e.getUUID(),n[t=t||this.uuid]&&(n[t].disconnect(),delete n[t]),this.id=t,n[t]=this,this},connect:function(){return this.handleEvent=this.handleEvent.bind(this),this.adapter=h.getAdapter(this.options.adapter),this.adapter.addListener(this.handleEvent),this},disconnect:function(){var t=this;return t.adapter&&(Object.keys(t.sockets).forEach(function(e){t.unsubscribeSocket(e)}),t.adapter.removeListener(t.handleEvent)),t},handleEvent:function(t,e){var n,i,s,o=this.id,a=this.sockets,r=Object.keys(a);i=(n=e&&e.source&&e.origin&&t.event&&t.target&&t.origin&&t.target.servers&&Array.isArray(t.target.servers)&&t.target.sockets&&Array.isArray(t.target.sockets))&&a[t.origin.socket]&&a[t.origin.socket].uuid===t.uuid,s=n&&0===t.target.sockets.length&&-1!==t.target.servers.indexOf(o),n?s?(this.log('SERVER: server "'+o+'" accept message for event "'+t.event+'"'),"subscribe"===t.event?i||this.subscribeSocket(t.origin.socket,e.source,e.origin,t.uuid):i&&("unSubscribe"===t.event?this.unsubscribeSocket(t.origin.socket):this.dispatchEvent(t.event,t.data,t.origin.socket,t.target.sockets))):i&&c(t.target.sockets,r)&&c([t.origin.socket],r)?(this.log('SERVER PREDISPATCH: server "'+o+'" dispatch event "'+t.event+'" from "'+t.origin.socket+'"'),this.dispatchEvent(t.event,t.data,t.origin.socket,t.target.sockets)):this.log('SERVER: server "'+o+'" refuse message for event "'+t.event+'"'):this.log('SERVER: server "'+o+'" refuse invalid message for event "'+t.event+'"')},subscribeSocket:function(t,e,n,i){var s=this.id;return this.log('SERVER: server "'+s+'" register new socket "'+t+'"'),this.sockets[t]={source:e,origin:n,uuid:i},this.dispatchEvent("subscribe",{},void 0,t),this},unsubscribeSocket:function(t){var e=this.id;return this.sockets[t]&&(this.log('SERVER: server "'+e+'" unregister socket "'+t+'"'),this.dispatchEvent("unSubscribe",{},void 0,t),delete this.sockets[t]),this},addListener:function(t,e){return this.listeners.addEvent(t,e),this},removeListener:function(t,e){return this.listeners.removeEvent(t,e),this},dispatchEvent:function(t,n,i,s){var o=this,a=o.id,r=o.sockets,l=o.adapter,c={event:t,data:n,target:{sockets:s},origin:{socket:i,server:a},uuid:o.uuid};return s&&s.length?s=e.splat(s):-1!==(s=Object.keys(o.sockets)).indexOf(i)&&s.splice(s.indexOf(i),1),l||(o.connect(),l=o.adapter),0===s.length?o.log('SERVER: server "'+a+'" has no target socket for dispatchEvent "'+t+'"'):s.forEach(function(e){var s=r[e],c={event:t,data:n,target:{sockets:[e]},origin:{socket:i,server:a},uuid:o.uuid};o.log('SERVER: server "'+a+'" dispatchEvent "'+c.event+'" to "'+e+'"');try{l.dispatchEvent(c,s.source,s.origin)}catch(t){d.console&&d.console.error('InterCom server "'+a+'": error while dispatching to socket '+e+": "+t+"\nDeleting socket"),delete r[e]}}),o.listeners.dispatchEvent(t,[n,c]),o}}),h.Socket=n.extend(o,r,{id:null,uuid:null,servers:null,listeners:null,defaultOptions:{adapter:null,autoconnect:!1},init:function(t,e){this.setSocketId(t),this.servers={},this.listeners=new s,this.setOptions(e)},setSocketId:function(t){var n=h.Socket.Instances=h.Socket.Instances||{};return this.uuid=this.uuid||e.getUUID(),n[t=t||this.uuid]&&(n[t].disconnect(),delete n[t]),this.id=t,n[t]=this,this},connect:function(){return this.handleEvent=this.handleEvent.bind(this),this.adapter=h.getAdapter(this.options.adapter),this.adapter.addListener(this.handleEvent),this},disconnect:function(){var t=this;return t.adapter&&(Object.keys(t.servers).forEach(function(e){t.unsubscribeServer(e)}),t.adapter.removeListener(t.handleEvent)),t},handleEvent:function(t,e){var n,i,s,o,a=this,r=a.id,l=a.servers;i=(s=e&&e.source&&e.origin&&t&&t.event&&t.target&&t.origin&&t.origin.server&&l[t.origin.server]&&t.target.sockets&&Array.isArray(t.target.sockets))&&l[t.origin.server]&&l[t.origin.server].uuid===t.uuid,o=s&&0!==t.target.sockets.length&&-1!==t.target.sockets.indexOf(r),s?o?(n=a.servers[t.origin.server],a.log('SOCKET: socket "'+r+'" accept message for event "'+t.event+'"'),"subscribe"===t.event?(i||(n.waiting=!1,n.uuid=t.uuid,n.queue.length&&(n.queue.forEach(function(t){a.adapter.dispatchEvent(t,n.source,n.origin)}),a.log('SOCKET: socket dispatch "'+n.queue.length+'" events in the queue for serverId "'+t.origin.server+'".'),n.queue=[])),a.listeners.dispatchEvent(t.event,[t.data,t])):i?"unSubscribe"===t.event?delete a.servers[t.origin.server]:a.listeners.dispatchEvent(t.event,[t.data,t]):a.log('SOCKET: socket "'+r+'" refuse invalid uuid for event "'+t.event+'"')):a.log('SOCKET: socket "'+r+'" refuse message for event "'+t.event+'"'):a.log('SOCKET: socket "'+r+'" refuse invalid message for event "'+t.event+'"')},subscribeServer:function(t,e,n){return e=e||d.parent,n=n||d.location.toString(),this.servers[t]={waiting:!0,queue:[],source:e,origin:n},this.dispatchEvent("subscribe",void 0,void 0,t),this},unsubscribeServer:function(t){var e=this.id;return this.servers[t]&&(this.log('SOCKET: socket "'+e+'" unregister server "'+t+'"'),this.dispatchEvent("unSubscribe",{},void 0,t),delete this.servers[t]),this},addListener:function(t,e){return this.listeners.addEvent(t,e),this},removeListener:function(t,e){return this.listeners.removeEvent(t,e),this},dispatchEvent:function(t,n,i,s){var o=this,a=o.id,r=o.servers,c=o.adapter;return s=s&&s.length?e.splat(s):Object.keys(o.servers),i=e.splat(i),c||(o.connect(),c=o.adapter),n=l.prune(n),s.forEach(function(e){var s=r[e],l={event:t,data:n,target:{servers:[e],sockets:i},origin:{socket:a},uuid:o.uuid};0===s.queue.length&&!s.waiting||"subscribe"===t||"unSubscribe"===t?(o.log('SOCKET: socket "'+a+'" dispatch event "'+t+'"'),c.dispatchEvent(l,s.source,s.origin)):(o.log('SOCKET: socket "'+a+'" queue event "'+t+'" for serverId "'+e+'"'),s.queue.push(l))}),o}}),t.namespace("Utils/InterCom",h,t)}.apply(e,s))||(t.exports=o)}).call(this,n(114))},function(t,e,n){"use strict";var i,s;i=[n(1),n(8),n(6),n(150)],void 0===(s=function(t,e,i,s){return s.extend({name:"confirmRemove",modules:null,init:function(t,e){this._parent(t,e),i.getModulesDependents({moduleIds:[t.getId()]}).then(function(t){this.modules=t.modules,this.buildNotices()}.bind(this)).done(),this._keyboardShortcuts.return=this.module.remove.bind(this.module)},focusWidget:function(t){this.close(),n.e(0).then(function(){var e=[n(217)];(function(e){e.focus(t)}).apply(null,e)}).catch(n.oe)},buildNotices:function(){this.modules&&(this.elements.noticeContainer.setStyle("display","block"),Object.keys(this.modules).map(function(e){var n=this.modules[e].dependents.map(function(e){return t.createElement("div",{class:"dependent-widget",text:e.title.unescapeHTML(),events:{click:this.focusWidget.bind(this,e)}})}.bind(this)),i=this.modules[e].title.unescapeHTML();this.elements.noticeContainer.addContent(t.createElement("div",{class:"notice",html:[t.createElement("div",{text:i}),t.createElement("div",{text:_("is currently used by the following app(s)")}),n]})),this.elements.confirm.addContent(t.createElement("div",{text:_("Deleting {0} will prevent those apps from working properly.").format(i)}))}.bind(this))),this.elements.confirm.addContent(_("Delete app?")),this.elements.confirm.addContent(new e.Button({value:_("Yes"),className:"medium-grey medium",events:{onClick:function(){this.module.remove(this.module),this.close()}.bind(this)}}))},build:function(){this.elements.noticeContainer=t.createElement("div",{class:"notice-container"}),this.elements.confirm=t.createElement("div",{class:"confirm-container"}),this.addContent(this.elements.noticeContainer),this.addContent(this.elements.confirm),this.elements.noticeContainer.setStyle("display","none")},onClose:function(){this._parent(),this.module.toggleEdit(!1),this.module.removeOverlay("ConfirmRemove")}})}.apply(e,i))||(t.exports=s)},function(t,e,n){"use strict";var i,s;i=[n(1),n(3),n(8),n(2),n(150),n(363)],void 0===(s=function(t,e,n,i,s,o){return s.extend({name:"display",build:function(){this.setTitle(_("Display"),"single-window"),this.buildColorOptions(),this.setActiveColor(this.module.getData().color),this.elements.container.addEvents({"click [data-color]":function(t){var n=e.getElement(t).getAttribute("data-color");this.module.colorize(n),this.setActiveColor(n)}.bind(this),"click [data-move]":function(t){var n=e.getElement(t).getAttribute("data-move");o.canMovePosition(this.module,n)&&(o.movePosition(this.module,n),this.enableMoveOptions())}.bind(this),"change input.hide-app-header":function(t){this.module.hideHeader(e.getElement(t).checked)}.bind(this)}),this.activeButton=this.module.elm_moduleHeader.getElement('menu [data-name="options"]')},toggle:function(t){return this._parent(t),t&&this.createOrRemoveMoveOptions(),this},buildColorOptions:function(){this.addContent({tag:"div",class:"content-box",html:[{tag:"div",class:"content-line",html:[{tag:"div",class:"label",text:_("App color:")},{tag:"div",html:{tag:"div",class:"color-options postItcolorSelection",html:["red","orange","yellow","green","blue","white","unpaint","borderless"].map(function(t){return{tag:"div",class:"color-option uwa-icon "+t,"data-color":t,"data-icon":"borderless"===t?"O":"unpaint"===t?",":"",title:"unpaint"===t?_("Default color"):""}})}}]},{tag:"div",class:"content-line",html:[{tag:"div",class:"label",text:_("App header")},{tag:"div",html:[new n.Checkbox({className:"green hide-app-header"}).check(this.module.isHeaderHidden()),_("hide")]}]}]})},buildMoveOptions:function(){this.addContent(['<div class="content-box content-line js-move-options">',"<div>",_("App move:"),"</div>","<div>",'<ul class="move-options">','<li class="move-option uwa-icon top" data-icon="K" data-move="top">',_("Move to top"),"</li>",'<li class="move-option uwa-icon up" data-icon="K" data-move="up">',_("Move up"),"</li>",'<li class="move-option uwa-icon right" data-icon="M" data-move="right">',_("Move right"),"</li>",'<li class="move-option uwa-icon left" data-icon="L" data-move="left">',_("Move left"),"</li>",'<li class="move-option uwa-icon down" data-icon="J" data-move="down">',_("Move down"),"</li>",'<li class="move-option uwa-icon bottom" data-icon="J" data-move="bottom">',_("Move to bottom"),"</li>","</ul>","</div>","</div>"].join("\n"))},setActiveColor:function(e){var n=this.getContent(),i=n.getElement(".color-options .selected");if(i&&i.removeClassName("selected"),t.is(e,"string")&&"unpaint"!==e&&"borderless"!==e){var s=n.getElement('[data-color="'+e+'"]');s&&s.addClassName("selected")}},hasMoveOptions:function(){return!i.Page.inSmartReaderView&&["top","up","right","left","down","bottom"].some(function(t){return o.canMovePosition(this.module,t)},this)},createOrRemoveMoveOptions:function(){var t=this.getContent().getElement(".js-move-options");this.hasMoveOptions()?(t||this.buildMoveOptions(),this.enableMoveOptions()):t&&t.remove()},enableMoveOptions:function(){this.getContent().getElements("[data-move]").forEach(function(t){var e=o.canMovePosition(this.module,t.getAttribute("data-move"));t.toggleClassName("disabled",!e)},this),this.resize()}})}.apply(e,i))||(t.exports=s)},function(t,e,n){"use strict";var i,s;i=[n(150),n(364)],void 0===(s=function(t,e){return t.extend({name:"insights",build:function(){this.setTitle(_("Insights"),"tooltip"),this.addContent(new e({view:"widget",stream:this.module.getStreams()[0]}))}})}.apply(e,i))||(t.exports=s)},function(t,e,n){"use strict";var i,s;i=[n(150)],void 0===(s=function(t){return t.extend({name:"preferences",build:function(){this.setTitle(_("Settings"),"cogwheel"),this.activeButton=this.module.elm_moduleHeader.getElement('menu [data-name="options"]')},onClose:function(){this._parent(),this.module.environment.dispatchEvent("endEdit")}})}.apply(e,i))||(t.exports=s)},function(t,e,n){"use strict";var i,s;i=[n(1),n(8),n(2),n(150)],void 0===(s=function(t,e,n,i){var s=t.createElement;return i.extend({name:"premium",build:function(){this.addContent(['<div class="title">',_("Want to analyze this feed?"),"</div>",'<div class="upgrade-box">','<div class="description">',_("Analyze what's happening and act immediately with our Premium offer."),"</div>",'<div class="banner"></div>',"</div>"].join("\n")),this.getContent().getElement(".banner").addContent(s("a",{text:_("Go Premium!"),href:n.getWelcomeURL("premium")})),this.activeButton=this.module.elm_moduleHeader.getElement('menu [data-name="analyze"]')}})}.apply(e,i))||(t.exports=s)},function(t,e,n){"use strict";var i,s;i=[n(1),n(10),n(2),n(188),n(35)],void 0===(s=function(t,e,n,i,s){return e.extend({name:"nv-module-footer",init:function(t){this._parent(),this._module=t;var e,s=this._module.getUpsellIncentive();s&&(e=i.hasSnapshot(this._module)?s.availableForVIP&&n.getProduct({type:"TYPE_VIP",expired:!0})||n.getProduct({type:"TYPE_INDIVIDUAL",expired:!0}):s.availableForVIP&&n.getActiveProduct({type:"TYPE_VIP",trial:!0})||n.getActiveProduct({type:"TYPE_INDIVIDUAL",trial:!0})),this._product=e},getContent:function(){if(this._isNeeded())return this.elements.content||(this.elements.content=this._build()),this.elements.content},_isNeeded:function(){return Boolean(this._product)&&!this._product.expired},_build:function(){var e="TYPE_VIP"===this._product.type?"VIP":"Premium",n=(this._product.expired?"Go back to {0}":"{0} trial").escapeHTML().format("<strong>"+e.escapeHTML()+"</strong>"),i=this._product.expired?_("Subscribe to our {0} offer").format(e):_("{0} are available during your trial").format(this._module.getUpsellIncentive().topic);return t.createElement("a",{class:this.getClassNames()+" moduleContent"+(this._product.expired?" expired-trial":""),href:this._getLink(),target:"_blank",html:[{tag:"span",html:{tag:"span",html:n}},{tag:"span",html:{tag:"span",html:i}}],events:{resize:function(){var t=this.getSize().width;t>0&&this.toggleClassName("small",t<300)},click:function(){s.log("app",this._module.getName().toLowerCase()+"-upsell")}.bind(this)}})},_getLink:function(){return n.getWelcomeURL("TYPE_VIP"===this._product.type?"vip":"premium")}})}.apply(e,i))||(t.exports=s)},function(t,e,n){"use strict";var i,s;i=[n(9),n(3),n(140),n(0),n(5),n(162)],void 0===(s=function(t,e,n,i,s,o){var a=i.h,r=t.extend({init:function(t){this._view=t,this._scroller=new n(document.body,{events:{onChange:function(t,e){var n=this.element;n.scrollTop!==e&&n.scrollTo(0,e)}}})},move:function(t){var n=this._view.props.module,i=e.getPosition(t,{relativeTo:"client"}),s=n.elm_module.getBoundingClientRect(),o=Math.max(120,40*Math.round((s.height+i.y-s.bottom)/40));n.sendContent("onResizeHeight",{absolute:o,delta:o-s.height}),document.body.setStyles({minHeight:document.body.getBoundingClientRect().height})},start:function(){this._view.setState({dragging:!0}),this._scroller.attach()},reset:function(){this._view.setState({dragging:!1}),this._scroller.detach(),document.body.setStyles({minHeight:void 0})}});return s.extend({init:function(t){this._parent(t),this.state={dragging:!1}},render:function(t,e){if(t.module.isResizable())return document.body.toggleClassName("is-resizing-module",e.dragging),a(o,{class:"nv-module-resizer "+(e.dragging?"dragging":""),start:function(){return new r(this)}.bind(this)},a("div",{class:"resizer-line"}))}})}.apply(e,i))||(t.exports=s)},function(t,e,n){t.exports=function(){"use strict";var t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};function e(e){if(!e||"object"!==(void 0===e?"undefined":t(e)))return!1;var n=Object.getPrototypeOf(e);return!n||n===Object.prototype}var n=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i=function(){var t=document.createElement("style");return document.head.appendChild(t),function(e){t.appendChild(document.createTextNode(e))}};function s(i,o,a){return"object"===(void 0===o?"undefined":t(o))&&o?(Object.keys(o).forEach(function(t){var r=o[t];null==r?delete i[t]:!0!==a&&e(r)?(n(i,t)&&e(i[t])||(i[t]={}),s(i[t],r)):i[t]=r}),i):i}var o=JSON.stringify,a=function(t,i,a){var r={};return function t(i,a,r,l){var c=void 0;for(c in a){var u=a[c];if(c in i){var h=i[c],d="function"==typeof h,p=c+":"+o(d?u:Boolean(u));if(!n(r,p)){r[p]=s({},d?h(u):u&&h);var m={};t(i,r[p],r,m),r[p]=m}s(l,r[p])}else e(u)?(n(l,c)&&e(l[c])||(l[c]={}),t(i,u,r,l[c])):l[c]=u}return l}(t,i,a,r),r};function r(t){if(!/^[a-z](?:[a-z0-9_-]*[a-z0-9])?$/i.test(t))throw new Error("Invalid identifier: "+t)}function l(){var t=[];return function t(e,n,i){for(var s=e.length-1;s>=0;s--){var o=e[s];o&&("number"==typeof o.length?t(o,n,i):i[o.id]||(n.unshift(o),i[o.id]=!0,o.parents&&t(o.parents,n,i)))}}(arguments,t,{}),t}function c(t){return t.replace(/([A-Z])/g,"-$1")}var u=/^(|Webkit|ms|Moz|O)(borderImage(Outset|Slice|Width)|box(Flex|(Flex|Ordinal)Group)|(animationIteration|column)Count|flex(|Grow|Positive|Shrink|Negative|Order)|grid(Row|Column)(|End|Span|Start)|fontWeight|line(Clamp|Height)|opacity|or(der|phans)|tabSize|widows|zIndex|zoom|(fill|flood|stop|stroke)Opacity|stroke(Dash(array|offset)|Miterlimit|Width))$/,h=function(t){return u.test(t)},d=Object.create(null);function p(t,e){return r(t),Array.isArray(e)?e.map(function(e){return p(t,e)}).reverse().join("\n"):("content"===t?e=JSON.stringify(e):"number"!=typeof e||h(t)||(e+="px"),t in d||(d[t]=c(t)),d[t]+":"+e+";")}function m(t){var n=0,i=Object.create(null);return function(s){var o=void 0;return{toString:function(){if(!o){var a=-1;o=l(s).map(function(s){for(var o=-1,r=i[s.id]||(i[s.id]=[]),l=0;l<r.length;l++)if(r[l]>a){o=r[l];break}return o<0&&(function t(n,i,s,o){var a="",r=[];for(var l in i){var u=i[l];e(u)?r.push(l):a+=p(l,u)}a&&(a=n+"{"+a+"}",o&&(a=o+"{"+a+"}"),s(a));for(var h=0;h<r.length;h++){var d=r[h],m=i[d];if("@"===d[0])t(n,m,s,d);else{var f="$"===d[0]?"::"+d.slice(1):":"!==d[0]?":"+d:d;t(""+n+c(f),m,s,o)}}}("."+s.class+"__"+n,s.declarations,t),r.push(n),o=n,n+=1),a=o,s.class+"__"+o}).join(" ")}return o},_rules:s}}}var f=0;function g(){var s=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},o=s.name,l=void 0===o?"":o,c=s.backend,u=void 0===c?null:c,h=s._renderer,d=void 0===h?null:h,p=s._styles,v=void 0===p?null:p,b=s._transforms,y=void 0===b?null:b;if("string"!=typeof l)throw new Error("The 'name' option should be a string");if(null!==u&&"function"!=typeof u)throw new Error("The 'backend' option should be a function");var w=d||m(u||i()),x=Object.create(null),C=Object.create(null),_=Object.create(y),S=Object.create(v);function E(){return w(T(arguments))}function k(e){return function(n){if(!n||"object"!==(void 0===n?"undefined":t(n)))throw new Error("The 'set' argument should be an object");for(var i in n)e(i,n[i]);return E}}function T(){return function e(n,i){var s=void 0,o=void 0;for(s=0,o=n.length;s<o;s++){var a=n[s];if(a){var r=void 0===a?"undefined":t(a);if("object"===r&&a)a._rules?e(a._rules,i):a.length?e(a,i):i.push(a);else{if("string"!==r)throw new Error('Style "'+a+'" has wrong type');if(!(a in S))throw new Error('Unknown style "'+a+'"');i.push(S[a])}}}return i}(arguments,[])}function A(e,i){if("string"!=typeof e)throw new Error("The 'name' argument should be a string");if(!i||"object"!==(void 0===i?"undefined":t(i))&&"function"!=typeof i)throw new Error("The 'definition' argument should be an object or a function");if(n(_,e))throw new Error("The transform "+e+" already exists");return _[e]=i,E}function I(t,i){if("string"!=typeof t)throw new Error("The 'name' argument should be a string");if(r(t),!e(i))throw new Error("The 'declaration' argument should be a plain object");if(n(S,t))throw new Error('A "'+t+'" style already exists');var s=i.inherit?Array.isArray(i.inherit)?i.inherit:[i.inherit]:[];return S[t]={id:f,class:l+"__"+t,parents:T(s),declarations:a(_,i,x)},f+=1,E}return E.namespace=function(t){if(r(t),"string"!=typeof t)throw new Error("The 'name' argument should be a string");return t in C||(C[t]=g({name:l?l+"_"+t:t,_renderer:w,_transforms:_,_styles:S})),C[t]},E.addTransform=A,E.addTransforms=k(A),E.addRule=I,E.addRules=k(I),E}return function(){var s=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},o=s.name,l=void 0===o?"":o,c=s.backend,u=void 0===c?null:c,h=s._renderer,d=void 0===h?null:h,p=s._styles,v=void 0===p?null:p,b=s._transforms,y=void 0===b?null:b;if("string"!=typeof l)throw new Error("The 'name' option should be a string");if(null!==u&&"function"!=typeof u)throw new Error("The 'backend' option should be a function");var w=d||m(u||i()),x=Object.create(null),C=Object.create(null),_=Object.create(y),S=Object.create(v);function E(){return w(T(arguments))}function k(e){return function(n){if(!n||"object"!==(void 0===n?"undefined":t(n)))throw new Error("The 'set' argument should be an object");for(var i in n)e(i,n[i]);return E}}function T(){return function e(n,i){var s=void 0,o=void 0;for(s=0,o=n.length;s<o;s++){var a=n[s];if(a){var r=void 0===a?"undefined":t(a);if("object"===r&&a)a._rules?e(a._rules,i):a.length?e(a,i):i.push(a);else{if("string"!==r)throw new Error('Style "'+a+'" has wrong type');if(!(a in S))throw new Error('Unknown style "'+a+'"');i.push(S[a])}}}return i}(arguments,[])}function A(e,i){if("string"!=typeof e)throw new Error("The 'name' argument should be a string");if(!i||"object"!==(void 0===i?"undefined":t(i))&&"function"!=typeof i)throw new Error("The 'definition' argument should be an object or a function");if(n(_,e))throw new Error("The transform "+e+" already exists");return _[e]=i,E}function I(t,i){if("string"!=typeof t)throw new Error("The 'name' argument should be a string");if(r(t),!e(i))throw new Error("The 'declaration' argument should be a plain object");if(n(S,t))throw new Error('A "'+t+'" style already exists');var s=i.inherit?Array.isArray(i.inherit)?i.inherit:[i.inherit]:[];return S[t]={id:f,class:l+"__"+t,parents:T(s),declarations:a(_,i,x)},f+=1,E}return E.namespace=function(t){if(r(t),"string"!=typeof t)throw new Error("The 'name' argument should be a string");return t in C||(C[t]=g({name:l?l+"_"+t:t,_renderer:w,_transforms:_,_styles:S})),C[t]},E.addTransform=A,E.addTransforms=k(A),E.addRule=I,E.addRules=k(I),E}}()},,,function(t,e,n){"use strict";var i,s;i=[n(0),n(5),n(11),n(123),n(14),n(2),n(35),n(187),n(367),n(713)],void 0===(s=function(t,e,i,s,o,a,r,l,c,u){var h,d=t.h;function p(t,e){"Analyze"===t?n.e(0).then(function(){var t=[n(302)];(function(t){t.open()}).apply(null,t)}).catch(n.oe):l.launchWizardFromScratch(t,e),Promise.resolve().then(function(){var t=[n(104)];(function(t){t.close()}).apply(null,t)}).catch(n.oe)}a.onReady(function(){h=o.namespace("AddContent_TabNew").addRules({root:{height:"100%",width:"100%",display:"flex",flexDirection:"column",fontSize:"14px",lineHeight:"1.4",backgroundColor:"#333",alignItems:"center"},tiles:{flex:1,display:"flex",flexWrap:"wrap",width:"100%"},tile:{display:"flex",flex:"1",WebkitFlexBasis:"50%",flexDirection:"column",boxSizing:"border-box",minWidth:"40%",border:"0 solid #222222",borderBottomWidth:4,":nth-child(2n + 1)":{borderRightWidth:4},":nth-last-child(2):nth-child(2n + 1)":{borderBottomWidth:0},":nth-last-child(1)":{borderBottomWidth:0,borderRightWidth:0},color:"inherit",overflow:"hidden",cursor:"pointer"},tileSpacer:{flex:.4},tileHeader:{display:"flex",alignItems:"center",marginBottom:12},tileTitle:{fontSize:"24px",marginTop:8},tileUpgradeFlag:{display:"inline-block",backgroundColor:"#717171",color:"#fff",marginLeft:"-19px",padding:"0 15px 0 19px",lineHeight:"30px",":after":{content:"",position:"absolute",height:0,marginRight:"-15px",border:"solid transparent",borderColor:"rgba(136, 183, 213, 0)",borderTopColor:"#717171",borderBottomColor:"#717171",borderWidth:"15px"}},tileIcon:{width:100,height:100,flexShrink:0,marginRight:19,backgroundImage:"url("+a.getAssetURL("css/base/img/panel/sprite_add.png")+") ",backgroundSize:"120px 650px","@retina":{backgroundImage:"url("+a.getAssetURL("css/base/img/panel/sprite_add@2x.png")+") "}},tileText:{flex:1},tilePlusButton:{lineHeight:"30px",transition:"color .4s",textAlign:"center",":before":{fontSize:"60px"}},tilePlusButtonActive:{color:"#fff"},tileUpgradeButton:{textAlign:"center"},analyzeTile:{position:"relative",cursor:"pointer",maxWidth:"650px",width:"100%"},analyzeTileHeader:{position:"relative",display:"flex",textAlign:"center",alignItems:"center",marginTop:10,marginBottom:-10},analyzeTileIcon:{inherit:"tileIcon",backgroundPosition:"10px -505px",width:120,height:120,marginRight:0},analyzeTileText:{alignSelf:"flex-start",margin:"-10px 10px 15px"},analyzeTileBackground:{position:"absolute",left:30,top:0,bottom:9,right:30},fakeTileBorder:{borderRight:"4px solid #222222",height:20}})});var m=e.extend({init:function(t){this._parent(t),this.state={over:!1}},render:function(t,e){if(t.active)return d(t.active?"div":"a",{class:h("tile"),onMouseEnter:function(){this.setState({over:!0})}.bind(this),onMouseLeave:function(){this.setState({over:!1})}.bind(this),onClick:t.active&&function(){t.onClick(t.name)},href:!t.active&&t.url,target:!t.active&&"_blank",style:{padding:t.tight?"0 30px":"0 74px"}},d("div",{class:h("tileSpacer")}),d("div",{class:h("tileHeader")},d("div",{class:h("tileIcon"),style:{backgroundPosition:t.icon.position,width:t.icon.width}}),d("div",null,d("div",{class:h("tileTitle")},t.title),!t.active&&t.subtitle&&d("div",{class:h("tileUpgradeFlag")},t.subtitle))),!t.short&&d("div",{class:h("tileText")},t.text),t.active?d("div",{class:h("tilePlusButton",e.over&&"tilePlusButtonActive")+" uwa-icon","data-icon":"3"}):d("div",{class:h("tileUpgradeButton")},d(i.Button,{className:"green",value:t.upgrade_text})),d("div",{class:h("tileSpacer")}))}}),f=e.extend({render:function(t){return d("div",{class:h("analyzeTile"),onClick:function(){t.onClick("analyze")}},d("div",{class:h("analyzeTileBackground")},d("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 100 100",preserveAspectRatio:"none",width:"100%",height:"100%"},d("path",{d:"M 0 0 L 92.5 0 L 100 100 L 7.5 100 z",fill:"#444"}))),d("div",{class:h("analyzeTileHeader")},d("div",{class:h("analyzeTileIcon")}),d("div",{class:h("tileText","analyzeTileText")},d("div",null,d("div",{class:h("tileTitle")},_("All Analytics-in-one app"))),_("Unique: Multiple Data Staging and Universal Correlation (Social, internal, external data, web services...) in one single app. Ready for your Dashboard and Pushmail.")),d("img",{src:a.getAssetURL("css/base/img/panel/BETA_bleu.png"),srcset:a.getAssetURL("css/base/img/panel/BETA_bleu@2x.png")+" 2x"})),d("div",{class:h("tileUpgradeButton")},d(i.Button,{className:"medium-grey",value:_("Try now")})))}}),g=e.extend({init:function(t){this._parent(t),this.state={showFeedSelector:!1}},render:function(t,e){if(e.showFeedSelector)return d(u);var n=a.isDebug("analyze-wizard")&&a.isAllowed("socialpack"),i=[{name:"rss",title:_("Reading app"),text:_("Bring together all your favorite Internet content. Add a website, an RSS feed, or import an OPML."),subtitle:"",upgrade_text:"",active:!0,url:null,icon:{position:"-8px 2px",width:"84px"}},{name:"potion",title:_("Potion app"),text:_("Be a wizard of the Internet of Things. Program automatic actions between anything on your dashboard."),subtitle:!1,upgrade_text:a.isAllowed("account_signup")?_("Register"):_("Learn more"),active:!1,url:a.isAllowed("account_signup")?a.Config.urls.startpage+"/signup":a.getWelcomeBusinessURL("explore/automate/dashboard-things"),icon:{position:"-10px -361px",width:"68px"}},{name:"analytics",title:_("Analytics app"),text:_("Analyze the content on your dashboard: Who is talking? What is said? How is it perceived?"),subtitle:_("Premium"),upgrade_text:_("Learn more"),active:a.isAllowed("socialpack"),url:a.getWelcomeURL("premium"),icon:{position:"-7px -116px",width:"84px"}},{name:"misodata",title:_("MisoData app"),text:_("Import any data files (.xls or .csv) to chart and analyze on your dashboard."),subtitle:_("Premium"),upgrade_text:_("Learn more"),active:a.isAllowed("misodata"),url:a.getWelcomeURL("explore/misodata"),icon:{position:"-15px -237px",width:"60px"}}].filter(function(t){return t.active||!a.Config.white_labeling});return d(s,{class:h("root")},function(t){return[d("div",{class:h("tiles")},i.map(function(e){return d(m,Object.assign({onClick:this._onClick.bind(this),short:t.height<630&&i.length>2,tight:t.width<800},e))},this)),n&&d(f,{onClick:this._onClick.bind(this)}),n&&i.length%2==0&&d("div",{class:h("fakeTileBorder")})]}.bind(this))},_onClick:function(t){switch(t){case"potion":r.log("topBar","OpenPotions"),p("PotionWizard","Potion");break;case"misodata":r.log("topBar","OpenMisoData"),p("SocialPack_Compare","Misodata");break;case"analytics":r.log("topBar","OpenAnalytics"),p("SocialPack_Analytics","SocialPack");break;case"analyze":r.log("topBar","OpenAnalyze"),p("Analyze");break;case"rss":r.log("topBar","OpenReading"),this.setState({showFeedSelector:!0})}}});return c.extend({show:function(){this._parent(),t.render(d(g),this.elements.tab,this.elements.tab.firstChild)},hide:function(){this._parent(),t.render(null,this.elements.tab,this.elements.tab.firstChild)}})}.apply(e,i))||(t.exports=s)},function(t,e,n){var i,s;i=[n(1),n(43),n(86),n(25),n(18),n(16)],void 0===(s=function(t,e,n,i,s,o){"use strict";var a;return a=e.extend({options:{url:null,dataParser:null,format:"{name}",minLength:1},dataCache:null,init:function(t){this._parent(t),this.dataCache={}},getSuggestions:function(t){var e,n=this,s=n.dataCache;return new o(function(o,a){t.length>=n.options.minLength?s[t]?o(s[t]):n.options.url&&(e=n.options.url.replace("{text}",t),i.request(e,{method:"GET",type:"text",onComplete:function(e){(e=n.dataParse(e)).length>0&&(s[t]=e),o(e)},onFailure:a,onTimeout:a})):o([])})},renderSuggestion:function(t){var e=t.fullValue;return this.options.format.replace(/\{(\w+)\}/g,function(n,i){return s.escapeHTML(t[i]||e)})},dataParse:function(e){var i,s,o,a=this.options.dataParser;if(t.is(a,"function"))e=a(e);else{if(n.isJson(e))e=n.decode(e),o=!0;else for(i in e=n.xmlToJson(e))if(e.hasOwnProperty(i)){e=e[i];break}for(i in e)if(e.hasOwnProperty(i)&&(s||(s=i),Array.isArray(e[i]))){e=e[i],o=!0;break}!o&&s&&(e=[e[s]])}return Array.isArray(e)?e:[]}}),t.namespace("Controls/AutocompleteAdaptors/Data",a,t)}.apply(e,i))||(t.exports=s)},function(t,e,n){"use strict";var i,s;i=[n(1),n(9),n(3),n(23),n(26),n(13),n(19),n(2),n(0),n(5),n(445),n(448),n(368),n(369),n(41),n(62),n(4)],void 0===(s=function(t,e,n,i,s,o,a,r,l,c,u,h,d,p,m,f,g){var v=t.createElement,b=e.extend({init:function(t){this.spinners={},this.elements={container:t},t.addContent(this.elements.innerElement=v("div",{class:"view",html:this.buildRssView()})),this.elements.feedUrl.focus(),window.addEventListener("resize",this.onResizeEvent.bind(this))},destroy:function(){this.elements.innerElement.destroy()},buildRssView:function(){this.elements.modulesScroller=v("div",{class:"panel-tab-content"}).addContent(this.elements.modulesContainer=v("div",{class:"panel-tab-content-modules"}));var t=v("div",{class:"panel-tab-table"}).addContent([this.elements.head=v("div",{class:"panel-tab-header"}).addContent(v("div",{class:"panel-tab-title"}).addContent(v("div",{class:"panel-tab-icon uwa-icon","data-icon":"7"}),_("Netvibes Reading • New"))),this.elements.search=v("div",{class:"new-rss-inputs"}).addContent(v("div",{class:"new-rss-search"}).addContent(this.elements.searchContent=v("div",{class:"new-rss-inner"}).addContent(this.elements.searchFeed=v("div",{class:"new-rss-feed"}).addContent(v("div",{class:"new-feed-title",text:_("Add new feeds")}),v("div",{class:"new-feed-subtitle",text:_("Enter a feed address or website URL for autodetection")}),this.elements.feedUrl=new u({className:"new-feed-search",submitIcon:"3"})),this.elements.searchOPML=v("div",{class:"new-rss-opml"}).addContent(v("div",{class:"new-feed-title",text:_("Or import OPML")}),this.elements.opmlButton=v("label",{for:"userfile",class:"big-btn uwa-icon","data-icon":"3"}),this.elements.opmlResult=v("div",{class:"result"}),this.elements.opmlForm=v("form",{id:"addFeedImportForm",target:"target_upload",enctype:"multipart/form-data",encoding:"multipart/form-data",method:"post"}).addContent(this.elements.opmlFile=v("input",{type:"file",name:"userfile"}),this.elements.opmlMaxSize=v("input",{type:"hidden",name:"MAX_FILE_SIZE",value:"500000"}),this.elements.uploadFrame=v("iframe",{id:"target_upload",name:"target_upload"})).hide()),this.elements.searchPass=v("div",{class:"new-rss-password"}).addContent(v("div",{class:"new-feed-title",text:_("This feed is protected by password")}),this.elements.feedCredentials=new h({className:"new-password",submitIcon:"3"}))))),this.elements.modules=v("div",{class:"new-rss-module"}).addContent(v("div",{class:"panel-tab-scroller"}).addContent(this.elements.scroller=new i({element:this.elements.modulesScroller,shadows:!0}))),this.elements.infos=v("div",{class:"new-rss-text"}).addContent(v("p",{class:"uwa-icon","data-icon":"I"}).addContent([_("Locate the feed address on the website. It is usually represented with one of the following icons:")+" ",v("img",{src:g.getStaticUrl("/img/rss-icons.png"),class:"rss-icons"}),v("br"),_("Copy and paste this address above.")+" ",_("If you don't see the feed address, you can try to enter the website address instead.")+" ",v("br"),_("We will try to autodiscover it.")+" ",r.Config.urls.faq&&r.isStartpage?v("a",{href:r.Config.urls.faq,text:_("Get more information about feeds.")}):""]))]);return this.buildSpinners(),this.buildErrors(),this.attachEvents(),t},buildErrors:function(){this.elements.modulesScroller.addContent(this.elements.modulesError=new d({closable:!0})),this.elements.opmlResult.addContent(this.elements.opmlError=new d({closable:!0,hideDelay:5e3}))},buildSpinners:function(){this.spinners.opml=new m({autostart:!1,size:56,delay:500}),this.elements.opmlResult.addContent(this.elements.opmlSpinner=this.spinners.opml.toElement()),this.spinners.feeds=new m({autostart:!1,size:30,delay:500}),this.elements.modulesScroller.addContent(this.elements.modulesSpinner=this.spinners.feeds.toElement())},attachEvents:function(){var t=this.elements;this.elements.feedUrl.addEvents({onCredentialsRequired:this.onCredentialsRequired,onSearchError:this.onSearchError,onSearchStart:this.onSearchStart,onSearchSuccess:this.onSearchSuccess,onSearchEnd:this.onSearchEnd},this),t.opmlFile.addEvent("change",this.onOPMLChange.bind(this)),t.opmlButton.addEvent("click",function(){t.opmlFile.click()}),t.opmlError.addEvent("onHide",function(){t.opmlButton.show()}),this.elements.feedCredentials.addEvents({onSubmit:this.onPasswordSubmit},this)},launchOpml:function(){var t=function(t){var e=g.uniqueID("opmlCallback");function n(n){if(window[e]){delete window[e];var i=n&&n.error,s=n&&n.result;t(i,s)}}return window[e]=n,{func:n,name:"parent."+e}}(this.onOPMLLoaded.bind(this));this.elements.opmlForm.set("action",r.Config.mount_points.api+"/my/account/import?"+o.toQueryString({pageId:r.Page.id,format:"jsonp",callbackMode:"html",callback:t.name})),this.elements.uploadFrame[a.Engine.ie?"onreadystatechange":"onload"]=function(){this.readyState&&"complete"!==this.readyState||t.func({error:"unknown"})},this.elements.opmlButton.hide(),this.spinners.opml.start(),this.elements.opmlForm.submit()},onOPMLLoaded:function(t,e){if(this.spinners.opml.stop(),this.elements.opmlFile.value="",!t&&e){var n=v("span",{class:"success uwa-icon","data-icon":"r"});this.elements.opmlResult.addContent(n);var i=new f({className:"opml-success",discard:!1,confirm:!1,cancelText:_("OK"),titleText:_("Successful"),message:_("{0} feed(s) have been successfully imported.").format(e)});i.addEvent("onClose",function(){window.location.reload()}),i.show()}else this.elements.opmlError.show({content:t&&t.message?t.message:_("There is no feed to import"),className:"error"})},buildModules:function(t){var e=t.map(function(t){return t.title||(t.title=""),p.getRenderer("feed",t)});this.elements.modulesContainer.addContent(e)},resizemodulesContainer:function(){var t=p.size.h,e=document.body.getElement("#nv-panel-content").getSize().height-this.elements.head.getSize().height-this.elements.search.getSize().height-this.elements.infos.getElement("> p").getSize().height;e=e<t?t:e,this.elements.modules.setStyle("height",e)},showPasswordAsking:function(){var t=this,e=t.elements;new s(e.searchFeed,{duration:150,events:{onStart:function(){new s(e.searchOPML,{duration:150}).start({opacity:[1,0]})},onComplete:function(){e.searchFeed.setStyles({display:"none",opacity:"1"}),e.searchOPML.setStyles({display:"none",opacity:"1"}),e.searchPass.setStyles({display:"block",opacity:"0"}),new s(e.searchPass,{duration:150}).start({opacity:[0,1]}),t.elements.feedCredentials.focus()}}}).start({opacity:[1,0]})},hidePasswordAsking:function(){var t=this.elements;new s(t.searchPass,{duration:150,events:{onComplete:function(){t.searchFeed.setStyles({display:"inline-block",opacity:"0"}),t.searchOPML.setStyles({display:"inline-block",opacity:"0"}),t.searchPass.setStyles({display:"none",opacity:"1"}),new s(t.searchFeed,{duration:150}).start({opacity:[0,1]}),new s(t.searchOPML,{duration:150}).start({opacity:[0,1]})}}}).start({opacity:[1,0]})},onResizeEvent:function(){this.elements.modules&&this.elements.modules.getSize().height>0&&this.resizemodulesContainer()},onOPMLChange:function(){var t;r.User.isRegistered?this.launchOpml():(r.isAllowed("account_signup")?(t=new f({message:_("You must have a valid Netvibes account to import an OPML file. Please sign up first."),cancelText:null,confirm:{text:_("I would like to register")},discard:{text:_("Not now")}})).addEvent("onConfirm",function(){window.location="/signup"}):t=new f({message:_("You must have a valid Netvibes account to import an OPML file."),cancelText:null,confirm:{text:_("OK")},discard:null}),t.show())},onKeyDown:function(t,e){var i=t.callback;"return"===n.whichKey(e)&&i()},onPasswordSubmit:function(t,e){this.elements.feedUrl.launchSearch(t,e),this.hidePasswordAsking()},onSearchStart:function(){this.elements.modulesContainer.empty(!0),this.elements.modulesError.hide(),this.spinners.feeds.start(),this.resizemodulesContainer()},onSearchEnd:function(){this.spinners.feeds.stop()},onSearchError:function(t){this.elements.modulesError.show({content:t,className:"error"})},onSearchSuccess:function(t){this.buildModules(t)},onCredentialsRequired:function(){this.showPasswordAsking()}});return c.extend({render:function(){return l.h("div")},componentDidMount:function(){this._control=new b(t.extendElement(this.base))},componentWillUnmount:function(){this._control.destroy()}})}.apply(e,i))||(t.exports=s)},function(t,e,n){"use strict";var i,s;i=[n(1),n(3),n(23),n(8),n(2),n(41),n(715),n(367),n(369),n(368),n(96)],void 0===(s=function(t,e,n,i,s,o,a,r,l,c,u){var h=t.createElement;return r.extend({essentialsModules:[{title:"Alexa",description:_("Follow websites traffic with this Alexa widget"),link:"Alexa"},{title:"AolMail",description:_("Read and get notification of the new emails in your inbox with the Aolmail widget"),link:"AolMail"},{title:"Bing News Search",thumbnail:"extendedvibes-bingnews",description:_("Bing News Search"),link:"ExtendedVibes",data:{searchType:"news",streamTypes:"bing-news",lockedTab:"true",mySearch:"netvibes"}},{title:"Blog Search",thumbnail:"extendedvibes-blog",description:_("Allows you to search through multiple blog search engines at once."),link:"ExtendedVibes",data:{searchType:"blog",streamTypes:"tumblr-tag",mySearch:"netvibes"}},{title:"Bookmarks",description:_("Bookmarks widget help you to easily save and bookmark your favorites sites."),link:"Bookmarks"},{title:"Calculator",description:_("Calculator widget with the most common features implemented. Plus key bindings for almost everything."),link:"Calc"},{title:"Calendar",description:_("iCal widget displays upcoming events from multiple iCal calendars in a pretty, resizable widget for your private page or dashboard."),link:"Ical"},{title:"CraigsList",description:_("Craigslist widget let you to retreive all content from the popular online communities service, featuring free classified advertisements (with jobs, internships, housing, personals, erotic services, for sale/barter/wanted, services, community, gigs, resume, and pets categories) and forums on various topics."),link:"CraigsList"},{title:"Curation Manager",description:_("Named entities are typed information that can be extracted from your corpus or sources. You can merge similar entities to get rid of redundant informations."),link:"CorpusManager"},{title:"Dailymotion Search",thumbnail:"extendedvibes-dailymotion",description:_("Dailymotion Search let you search and play Dailymotion videos"),link:"ExtendedVibes",data:{searchType:"video",streamTypes:"dailymotion",lockedTab:"true",mySearch:"netvibes"}},{title:"Dashboard Stats",description:_("Dashboard Stats"),link:"dashboardStats"},{title:"Delicious",description:_("A social bookmarks manager widget. Retreive & browse your delicious bookmarks on your private page"),link:"Bookmarks",data:{typeBookmark:"delicious"}},{title:"E-mail",description:_("Read and get notification of the new emails in your inbox with the Popmail widget"),link:"PopMail"},{title:"Facebook Search and Compare",thumbnail:"searchtrends-facebook",description:_("Want to monitor how your Facebook Fan Page is doing? Want to compare different search trends over time? Now you can with our new Facebook Search & Compare app"),link:"SearchTrends"},{title:"Flash",description:_("Watch the animation of your choice, on your Dashboard with this Flash widget"),link:"Flash"},{title:"Flickr",description:_("Look at your favourite pics by adding the tag of your choice, with this Flickr widget "),link:"Flickr"},{title:"Flickr Search",thumbnail:"extendedvibes-flickr",description:_("Image Search let your search and preview images coming from Flickr "),link:"ExtendedVibes",data:{searchType:"image",streamTypes:"flickr",lockedTab:"true",mySearch:"netvibes"}},{title:"Fortune Wheel",description:_("You may realize your true desires as the wheel is spinning\r\nRelieve stress that decision making puts on the brain"),link:"wheel"},{title:"Forums Search",thumbnail:"extendedvibes-forums",description:_("Search engine for Forums and Boards based on boardreader.com"),link:"ExtendedVibes",data:{streamTypes:"boardreader",lockedTab:"true",mySearch:"netvibes"}},{title:"Gmail",description:_("Read and get notification of the new emails in your inbox with the Gmail widget"),link:"Gmail"},{title:"Google Analytics",description:_("Google Analytics widget allows you to track your blog or site traffic and visitor metrics – right from your Netvibes dashboard. You can modify and compare date ranges to customize your reports"),link:"GoogleAnalytics"},{title:"Google News Search",thumbnail:"extendedvibes-googlenews",description:_("Google News Search"),link:"ExtendedVibes",data:{searchType:"news",streamTypes:"google-news",lockedTab:"true",mySearch:"netvibes"}},{title:"HTML editor",description:_("Use advanced HTML code with this compact WYSIWYG HTML editor."),link:"HtmlEditor"},{title:"Hotmail",description:_("Read and get notification of the new emails in your inbox with the Hotmail widget"),link:"Hotmail",data:{protocol:"/pop3",secure:"true",server:"pop3.live.com",port:"995",webmail:"mail.live.com"}},{title:"Image widget",description:_("Add the image of your choice to your Dashboard."),link:"ImageModule"},{title:"Images Search",thumbnail:"extendedvibes-images",description:_("Allows you to search through multiple image & photo search engines at once."),link:"ExtendedVibes",data:{searchType:"image",streamTypes:"flickr",mySearch:"netvibes"}},{title:"Library",description:_("Simply select the sources you want to include in your Library. These Libraries can then be shared with and used by all Netvibes users--including Basic and VIP users."),link:"Library"},{title:"Link module",description:_("Link widget create a badge from your favorite website with thumbnail."),link:"LinkModule"},{title:"MacMail",description:_("Read and get notification of the new emails in your inbox with the Macmail widget"),link:"MacMail"},{title:"Mail Wizard",description:_("Use this wizard to create your e-mail widget (available with most of internet e-mail providers) and be notified of new e-mail easily."),link:"MailWizard"},{title:"News Search",thumbnail:"extendedvibes-news",description:_("Allows you to search through multiple search engines at once."),link:"ExtendedVibes",data:{searchType:"news",streamTypes:"google-news,bing-news",mySearch:"netvibes"}},{title:"Reddit",description:_("Widget from User-generated news links service"),link:"Reddit"},{title:"Saved articles",thumbnail:"saved",description:"",link:"RssReader",data:{savedStream:"true",title:"Saved"}},{title:"Social Network",description:_("This assistant will help you create a Facebook or MySpace widget for your Dashboard."),link:"SocialWizard"},{title:"Social Search",thumbnail:"extendedvibes-social",description:_("Allows to search for several social networks at once"),link:"ExtendedVibes",data:{searchType:"social",streamTypes:"twitter-search,boardreader",mySearch:"netvibes"}},{title:"Text Editor",description:_(" Compose your text using the WYSIWYG text editor"),link:"TextEditor"},{title:"To Do List",description:_("The to-do list widget that lets you dynamically add and remove items. Drag items up or down to organize your list."),link:"TodoList"},{title:"Tumblr search",thumbnail:"extendedvibes-tumblr",description:_("Tumblr search let you search for Tumblr posts based on tags"),link:"ExtendedVibes",data:{searchType:"blog",streamTypes:"tumblr-tag",mySearch:"netvibes"}},{title:"Twitter",description:_("A full Twitter client inside your Dashboard! Follow your friends updates, read and send messages to your contacts and followers. Supports functions like Re-tweet, direct messages..."),link:"Twitter"},{title:"Twitter Search",thumbnail:"extendedvibes-twitter",description:_("Search Twitter in realtime"),link:"ExtendedVibes",data:{searchType:"social",streamTypes:"twitter-search",lockedTab:"true",mySearch:"netvibes"}},{title:"Twitter Search and Compare",thumbnail:"searchtrends-twitter",description:_("Want to monitor twitter accounts activities (teweets, followers, following)? Want to compare different trends over time? Now you can with our new Twitter Search & Compare app"),link:"SearchTrends",data:{type:"twitter",grouping:"tweets"}},{title:"UWA Module",description:_("Configure this UWA module widget by editing and filling the Url of a UWA 1.0 module"),link:"UWA"},{title:"Video",description:_("Embed a video in your dashboard"),link:"VideoModule"},{title:"Video Search",thumbnail:"extendedvibes-video",description:_("Allows you to search through multiple video sharing services at once."),link:"ExtendedVibes",data:{searchType:"video",streamTypes:"youtube,dailymotion,vimeo",mySearch:"netvibes"}},{title:"Vimeo Search",thumbnail:"extendedvibes-vimeo",description:_("Vimeo Search let you search and play Vimeo videos"),link:"ExtendedVibes",data:{searchType:"video",streamTypes:"vimeo",lockedTab:"true",mySearch:"netvibes"}},{title:"Weather",description:_("Display up-to-date weather forecasts  for any city of your choice."),link:"Weather"},{title:"Web Page",description:_("The Webpage widget enables you to enter any webpage Url and keep it on your Dashboard."),link:"WebPage"},{title:"Webnote",description:_("Stick your notes easily."),link:"Webnote"},{title:"Wikipedia",description:_("Wikipedia widget for browsing the free, user-created encyclopedia, Wikipedia. Search for articles, view and edit right from the Dashboard"),link:"Wikipedia"},{title:"YahooMail",description:_("Read and get notification of the new emails in your inbox with the Yahoomail widget"),link:"YahooMail"},{title:"YouTube",thumbnail:"youtube",description:_("YouTube let you search and play Youtube videos"),link:"ExtendedVibes",data:{searchType:"video",streamTypes:"youtube",lockedTab:"true",mySearch:"netvibes"}}],elements:{},searchQuery:"",init:function(t){this._parent(t),this.essentialsModules=this.essentialsModules.map(function(t){return t.thumbnail=u.getThumbnail(t.thumbnail||t.link),t.typeString="native",t.hasOwnProperty("data")||(t.data=[]),t})},build:function(){this._parent(),this.buildSkeleton()},show:function(t){this._parent(),this.buildSearch(),this.updateTitle(t),this.updateContent()},buildSkeleton:function(){this.spinner=new o({autostart:!1,size:56,delay:500}),this.elements.tabContent=h("div",{class:"panel-tab-content"}).addContent(this.elements.search=h("div",{class:"panel-tab-search"}),this.elements.searchError=new c({closable:!0}),this.elements.modules=h("div",{class:"panel-tab-content-modules"}),this.elements.spinner=this.spinner.toElement()),this.elements.tab.addContent(h("div",{class:"panel-tab-table "}).addContent(h("div",{class:"panel-tab-header"}).addContent(this.elements.tabTitle=h("div",{class:"panel-tab-title"})),h("div",{class:"panel-tab-row"}).addContent(h("div",{class:"panel-tab-scroller"}).addContent(this.elements.scroller=new n({element:this.elements.tabContent,shadows:!0})))))},buildSearch:function(){this.elements.search.empty(!0),this.elements.search.addContent(h("div",{class:"nv-search-input"}).addContent(this.elements.inputSearch=new i.Text,this.elements.closeSearch=h("div",{class:"nv-search-close uwa-icon","data-icon":","}))),this.searchQuery&&this.elements.inputSearch.setValue(this.searchQuery),this.elements.inputSearch.addEvent("onKeyDown",this.onSearchKeydown.bind(this)),this.elements.closeSearch.addEvent("click",function(){this.elements.inputSearch.setValue(""),this.searchQuery="",this.updateContent()}.bind(this))},updateTitle:function(t){this.elements.tabTitle.empty(!0),this.elements.tabTitle.addContent(h("span",{class:"panel-tab-icon uwa-icon","data-icon":t.icon}),t.text)},updateContent:function(){this.elements.modules.empty(!0),this.elements.searchError.hide(),this.searchQuery=this.getSearchQuery(),this.spinner.start(),this.elements.search.show(),this.elements.search.addClassName("panel-essentials"),this.buildTabContent(this.essentialsModules),this.essentialSearch(),this.elements.inputSearch.focus()},essentialSearch:function(){var t=this.searchQuery||"",e=[];this.essentialsModules.map(function(n){var i=l.getModuleTitle(n);i=a.replaceAccents(i.toLowerCase()),t=a.replaceAccents(t.toLowerCase()),-1!==i.indexOf(t)&&this.moduleIsAuthorize(n)&&e.push(n)}.bind(this)),this.elements.modules.empty(!0),this.elements.inputSearch.focus(),this.buildTabContent(e)},moduleIsAuthorize:function(t){return!("library"===t.link.toLowerCase()&&!s.isAllowed("library"))&&!("corpusmanager"===t.link.toLowerCase()&&!s.isAllowed("merge_entity"))},buildTabContent:function(t){if(0!==t.length){var e=t.map(function(t){return l.getRenderer("eco",t)},this);this.spinner.stop(),this.elements.modules.addContent(e)}else this.elements.searchError.show({content:_("There are no apps for this search."),className:"error"})},getSearchQuery:function(){return this.elements.inputSearch.getInputElement().value},onSearchKeydown:function(t){"return"===e.whichKey(t)&&this.updateContent()}})}.apply(e,i))||(t.exports=s)},function(t,e,n){"use strict";var i;void 0===(i=function(){return{replaceAccents:function(t){return t.replace(/é|è|ê|ë|ê/gi,"e").replace(/à|â|ä/gi,"a").replace(/î|ï/gi,"i").replace(/ù|ü|û/gi,"u").replace(/ô|ö/gi,"o").toLowerCase()}}}.apply(e,[]))||(t.exports=i)},,function(t,e,n){"use strict";var i,s;i=[n(1),n(3),n(15),n(293),n(20),n(2),n(21),n(117),n(96),n(17),n(173),n(4),n(6),n(197),n(159)],void 0===(s=function(t,e,n,i,s,o,a,r,l,c,u,h,d,p,m){var f=i.Tab.extend({init:function(t,e){this._parent({id:e.id,text:e.title,icon:e.icon,content:e.content}),this._tabView=t,this.dataObj=e,this.loaded=!1,this.totalUnread=0,a.register(this),o.Page.inSmartReaderView||(this.itemListEvent={onProducerChange:function(t){t.hasChanged("flags")&&App.updateWidgetViewUnreadCounters()},onReset:function(){App.updateWidgetViewUnreadCounters()}},a.getItemList("streams",this.getId()).addEvents(this.itemListEvent))},remove:function(){this.itemListEvent&&a.getItemList("streams",this.getId()).destroy(),this._parent(),a.unregister(this)},destroy:function(){a.unregister(this),this._parent()},setIcon:function(e,n){var i,s=this;n=void 0===n||n,t.is(e,"object")?(this.dataObj.icon="",this.dataObj.iconConfig=e):(this.dataObj.icon=e,this.dataObj.iconConfig=""),n&&d.tabUpdate({tabId:this.dataObj.id,icon:this.dataObj.icon,options:{iconConfig:this.dataObj.iconConfig}}).done(),i=s.tabElement().getElement(".icon:first-child"),e?(i||(i=t.createElement("img",{class:"icon",height:"16",width:"16"}).inject(s.tabElement().firstChild.firstChild,"before")),r.setIconSrc(i,e)):i&&i.destroy(),this._tabView.resize()},titleElement:function(){return this.tabElement().getElement(".title")},unreadElement:function(){return this.tabElement().getElement(".unread")},getType:function(){return this.dataObj.type},isLocked:function(){return"locked"===this.getType()},isPrivate:function(){return"private"===this.getType()},isReadOnly:function(){return a.isReadOnly(this)},isMovable:function(){return!(o.Page.isPublic&&o.Page.userId!==o.User.id||this.isReadOnly())},isSelectable:function(){return!["search","private"].includes(this.getType())&&this.isMovable()},tabElement:function(){if(!this.elements.container){var t=document.body.getElement(".tab[data-tabid='{0}']".format(this.getId()));this.elements.container=t||this._createTabElement(),this.options.name&&this.elements.container.addClassName(this.options.name),this.options.className&&this.elements.container.addClassName(this.options.className),this.options.icon&&this.setIcon(this.options.icon,!1)}return this.elements.container},_createTabElement:function(){var e,n,i;return e=t.createElement("li",{class:"tab","data-tabId":this.getId()}),n=t.createElement("span",{class:"innerTab"}).inject(e),this.getIcon()&&(i=t.createElement("img",{class:"icon",height:16,width:16}).inject(n),r.setIconSrc(i,this.getIcon())),t.createElement("span",{class:"title",text:this.getTitle()}).inject(n),t.createElement("span",{class:"unread text-badge title"}).inject(n),a.updateLabelTabElement(this,e),(this.isLocked()||this.isPrivate())&&this.refreshType(e),e},loadModules:function(){var t,e,n=this.getModules();if(!this.loaded){for(n=l.sortModulesByRow(n),t=0;t<n.length;t+=1)(e=n[t]).dataObj.tab!==this.dataObj.tab&&e.hide(),e.load(!1),this.checkModuleContainer(e);this.loaded=!0}return n},getModules:function(){return c.getByTab(this.getId())},hasModules:function(){return this.getModules().length>0},getColumnCount:function(){return+this.dataObj.cols},showModules:function(){var t,e,n;for(this.dataObj.layout&&"undefined"!==this.dataObj.layout||(this.dataObj.layout=u.getModelName()),App.Columns.set({columnSizes:this.dataObj.columnSizes,numCols:this.dataObj.cols,layout:this.dataObj.layout}).updateLayout(),(n=this.loaded?this.getModules():this.loadModules())||(n=this.getModules()),t=0,e=n.length;t<e;t+=1)n[t].show(!0);this.updateHashURL()},hideModules:function(){var t,e,n,i;for(n=0,i=(t=this.getModules()).length;n<i;n+=1)(e=t[n]).elm_module&&e.isVisible()&&e.elm_module.isDragging||e.hide()},closeTabOptions:function(){App.UI.Options.closeActive()},setUnread:function(t){var e=this.unreadElement(),n=document.body.getElement('#menuTabs li[data-tabId="'+this.getId()+'"] .unread');if(e.removeClassName("result"),this.totalUnread!==t){if(this.totalUnread=t,t>0&&(!o.Page.isPublic||o.Page.userId===o.User.id)){var i=this.canMarkAllAsRead();e.title=i?_("Read All"):"",e.toggleClassName("clickable",i),this.setUnreadElement(e,t),this.setUnreadElement(n,t)}else this.setUnreadElement(e,""),this.setUnreadElement(n,"");this._tabView.resize()}},setUnreadElement:function(t,e){t&&(t.setAttribute("data-badge-label",h.formatCounterNumber(e)),t.toggleClassName("hidden",!e))},getUnread:function(){return this.totalUnread},markAllAsRead:function(){a.getItemList("streams",this.getId()).setFlags("unread",!1)},canMarkAllAsRead:function(){var t=a.getItemList("streams",this.getId());return!!t.getTotalFlagCount("unread")&&!this.isReadOnly()&&t.canFlag("unread")},setSelected:function(e){return this._parent(e),e?this.elements.showOptions||this.isReadOnly()||(this.elements.showOptions=t.createElement("img",{class:"actions-tab-options",src:h.BLANK_IMAGE_URL,width:16,height:16}).inject(this.elements.container.firstChild)):(App.UI.Options.closeActive(),m.close(),this.elements.showOptions&&(this.elements.showOptions.destroy(),this.elements.showOptions=null),this.endRename()),this},rename:function(){if(!this.isReadOnly()){var t=this.titleElement().getSize().width+this.unreadElement().getSize().width+16;this.tabElement().addClassName("editing"),p.register(this.titleElement(),{className:"",maxLength:50,autoEdit:!1,emptyText:!1,events:{onComplete:this.setTitle.bind(this)}}).setOptions({maxWidth:t}).edit()}},endRename:function(){this.tabElement().hasClassName("editing")&&p.register(this.titleElement()).endEdit(!0)},getTitle:function(){return this.dataObj.title.unescapeHTML()},getIcon:function(){return this.dataObj.iconConfig||this.options.icon},setTitle:function(t){var e;(t=t.trim().escapeHTML())!==this.dataObj.title&&(this.dataObj.title=t,d.tabUpdate({tabId:this.getId(),title:t}).done(),this.updateHashURL(),(e=document.body.getElement('#menuTabs li[data-tabId="'+this.getId()+'"] .title'))&&e.set("html",t)),this.titleElement().title=this.getTitle(),this.titleElement().set("text",this.getTitle()),this.tabElement().removeClassName("editing"),this._tabView.resize(),this.onRename&&this.onRename()},updateHashURL:function(){""===this.dataObj.title?document.location.hash=this.dataObj.id:document.location.hash=encodeURIComponent(String.toAnchor(this.dataObj.title)),n.addContent.call(document.head,document.body.getElements("link[rel*=icon]"))},updateColNums:function(t){var e=parseInt(t,10),n=parseInt(this.dataObj.cols,10),i=function(){this.dataObj.cols=t,App.Columns.set({numCols:this.dataObj.cols,columnSizes:this.dataObj.columnSizes}),u.update(),App.Columns.resetLayout()};if(e===n)return!1;if(e<n){var o=c.getByTab(this.dataObj.id).filter(function(t){return e<t.getColumnIndex()});if(o.length){if(window.confirm(_("You have content on a column that would be removed. Should we move it for you?"))){var a=c.getByColumn(e,this.dataObj.id),r=a.length?a[a.length-1].getRowIndex()+1e3:1e3;return s.all(o.map(function(e){return App.Columns.getColumn(t).appendChild(e.elm_module),e.dataObj.col=t,e.dataObj.row=r,r+=1e3,l.savePosition(e).done()})).done(i.bind(this)),!0}return!1}}return i.apply(this),!0},share:function(t,n){var i=n||a.getFocused();a.share(i.dataObj.id),t&&e.stop(t)},refreshType:function(e){e||(e=this.tabElement());var n=this.getType();e.getElements(".tab-type").invoke("destroy"),e.removeClassName("locked"),e.removeClassName("private"),n&&(t.createElement("span",{"data-icon":"locked"===n?"Á":"₦",class:"tab-type uwa-icon uwa-icon-only {0}".format(n)}).inject(e.getElement(".unread"),"after"),e.addClassName(n))},checkModuleContainer:function(t){t.dataObj.col>this.dataObj.cols&&(t.dataObj.col=this.dataObj.cols,l.savePosition(t).done(),t.addToPage())},unload:function(){},setAnalyticsRange:function(t,e){return this.dataObj.lastAnalyticsFrom=t,this.dataObj.lastAnalyticsTo=e,d.tabUpdate({tabId:this.getId(),options:{lastAnalyticsFrom:this.dataObj.lastAnalyticsFrom,lastAnalyticsTo:this.dataObj.lastAnalyticsTo}})}});return App.UI||(App.UI={}),App.UI.DashboardTab=f,f}.apply(e,i))||(t.exports=s)},,,,,,,,,,,function(t,e,n){"use strict";var i,s;i=[n(1),n(276),n(356)],void 0===(s=function(t,e,n){var i=t.createElement;return e.extend({open:function(t){this._parent(t)},buildStep:function(){this.elements.container=i("div",{class:"nv-agency-step nv-agency-step--index"+(this.options.reset?" nv-agency-step--reset":"")}).addContent(i("div",{class:"nv-agency-step-content wrapper"}).addContent(this.buildTitle(),new n({reset:this.options.reset,events:{onClick:this.onWizardClicked.bind(this)}})))},onWizardClicked:function(t){this.dispatchEvent("onWizardrySelected",t)}})}.apply(e,i))||(t.exports=s)},function(t,e,n){"use strict";var i,s;i=[n(220)],void 0===(s=function(t){return t.extend({currentSubject:null,dataFields:["primary","secondaries","influencers","secondary","influencer"],init:function(t){this.subjects={},this._parent(t)},buildSubjectsSelectors:function(){this.elements.subjects.empty(!0);var t=this.options.subjectType;t&&"secondary"===t?this.buildSubjectSelector(t,_("Competitor")):t&&"influencer"===t?this.buildSubjectSelector(t,_("Influencer")):(this.buildSubjectSelector("primary",_("Primary Brand")),this.buildSubjectSelector("secondaries",_("Competitors"),!1,!0),this.buildSubjectSelector("influencers",_("Influencers"),!1,!0)),t=t||"primary",this.getData()[t]?this.subjects[t].selector.selectSubject(0):this.displaySubjectDetails(t,0)},displayGob:function(t){var e={primary:{title:_("Enter the Primary Brand"),text:_("Choose the brand (e.g., your company name) that you want the dashboard to track."),note:_("Note: Once selected, the Primary Brand cannot be changed unless you reset the dashboard.")},secondary:{title:_("Add a Competitor"),text:_("Enter the name of a competing company that you want to track. Your dashboard will compare these competitors to the Primary Brand."),note:_("Note: You may also add Competitors to your dashboard later.")},influencer:{title:_("Add an Influencer"),text:_("Enter the name of an Influencer in your industry (e.g., thought leaders, journalists, industry analysts, etc.). Your dashboard will track what these Influencers are saying. "),note:_("Note: You may also add Influencers to your dashboard later.")}};this._parent(t,e)}})}.apply(e,i))||(t.exports=s)},function(t,e,n){"use strict";var i,s;i=[n(1),n(10),n(3),n(110),n(8),n(197)],void 0===(s=function(t,e,n,i,s,o){return e.extend({name:"nv-subjects",init:function(t){this._parent(t),this.data=t.data||[]},getContent:function(){return this.elements.container||(this.elements.container=t.createElement("div",{class:this.getClassNames()+(this.options.multiple?"is-multiple":"")})),this._buildSubjects(),this.elements.container},_buildSubjects:function(){this.elements.container.empty(),this.elements.container.setContent(this.elements.subjects=t.createElement("div",{class:this.getClassNames("-subjects"),html:[this.elements.subjectsList=t.createElement("div",{class:this.getClassNames("-list")}),this.elements.addButton=t.createElement("div",{class:this.getClassNames("-add-button")})]})),this.options.multiple?this._buildAccordion():t.createElement("div",{class:this.getClassNames("-title"),text:this.options.title}).inject(this.elements.subjects,"top"),this.options.multiple||!this.data.length?this._buildAddButton():this.elements.addButton.hide(),this.data.length&&this._populateSubjects()},_buildAccordion:function(){this.elements.subjectsAccordion=new i({className:this.getClassNames("-accordion")}),this.elements.subjectsAccordion.addItem("subjectsAccordion",{text:this.options.title,pinned:!0}),this.elements.subjectsAccordion.inject(this.elements.container),this.elements.subjectsAccordion.updateContent("subjectsAccordion",this.elements.subjects)},_buildAddButton:function(){this.options.noInput||(this.elements.addInput=new s.Text({attributes:{placeholder:_("Enter name"),events:{blur:function(){this.createSubjectFromInput(),this.blurAddButton()}.bind(this)}},events:{onKeyDown:function(t){"return"===n.whichKey(t)&&this.createSubjectFromInput()}.bind(this)}}).inject(this.elements.addButton).hide()),t.createElement("div",{"data-icon":"3",class:"add-button uwa-icon",events:{click:function(){this.isAdding()?this.createSubjectFromInput():this.focusAddButton()}.bind(this)}}).inject(this.elements.addButton)},_populateSubjects:function(){this.data.forEach(function(e,n){var i,s=t.createElement("div",{class:this.getClassNames("-item"),"data-subject-id":n,html:[t.createElement("div",{class:"item-image",html:[e.image?{tag:"img",src:e.image}:{tag:"div"}]}),t.createElement("div",{class:"item-title",html:[i=t.createElement("span",{text:e.title})]})],events:{click:function(){this.selectSubject(n)}.bind(this)}}).inject(this.elements.subjectsList);o.register(i,{emptyText:"",maxLength:130,maxWidth:130,events:{onComplete:function(t){this.setTitle(t,n)}.bind(this)},noEdit:function(){return!s.hasClassName("selected")}})},this)},setTitle:function(t,e){this.data[e].title=t,this.dispatchEvent("onTitleChange",[e])},getTitle:function(t){return this.data[t].title},setImageURL:function(t,e){this.data[e]&&(this.data[e].image=t,this.getSubjectElementById(e).getElement(".item-image").setContent(t?{tag:"img",src:t}:{tag:"div"}))},createSubjectFromInput:function(){var t=this.elements.addInput.getValue();t&&(this.elements.addInput.setValue(""),this.blurAddButton(),this.createNewSubject({title:t}))},focusAddButton:function(){var t=this.elements.addButton&&this.elements.addButton.getElement(".add-button");t&&(this.options.noInput||(t.addClassName("adding"),this.elements.addInput.show().focus()),this.dispatchEvent("onAdding"))},blurAddButton:function(){var t=this.elements.addButton&&this.elements.addButton.getElement(".add-button");t&&(t.removeClassName("adding"),this.elements.addInput.hide())},isEmpty:function(){return 0===this.data.length},isAdding:function(){var t=this.elements.addButton&&this.elements.addButton.getElement(".add-button");return!!t&&t.hasClassName("adding")},createNewSubject:function(t){if("object"!=typeof t)throw new Error("subject is not an object");if(!t.title)throw new Error("subject has no title");this.options.noInput&&!this.isEmpty()&&this.deleteSubject(0),this.data.push(t),this._buildSubjects(),this.selectSubject(this.data.length-1)},selectSubject:function(t){var e=this.getSubjectElementById(t),n=e.getElement(".item-title input");n&&n.hasClassName("edit-in-place")||(this.unselectSubjects(),e.addClassName("selected"),this.dispatchEvent("onSelected",[Object.assign(this.data[t],{id:t})]))},unselectSubjects:function(){this.elements.subjectsList.getElements(".selected").invoke("removeClassName","selected")},deleteSubject:function(t){void 0===t&&(t=this.getSelectedId()),void 0!==t&&(this.unselectSubjects(),this.data.splice(t,1),this._buildSubjects())},getSelectedId:function(){var t=this.elements.subjectsList.getElement(".selected[data-subject-id]");return t?t.getAttribute("data-subject-id"):void 0},getSubjectElementById:function(t){return this.elements.subjectsList.getElement('[data-subject-id="'+t+'"]')},getData:function(){return this.data},getDataById:function(t){return this.data[t]}})}.apply(e,i))||(t.exports=s)},function(t,e,n){"use strict";var i,s;i=[n(1),n(10),n(8),n(732),n(378),n(274)],void 0===(s=function(t,e,n,i,s,o){var a=t.createElement;return e.extend({init:function(t){t&&!t.components&&(t.components={corpus:!1,social:!0,keywords:!0,profile:!0,event:!1}),this._parent(t),this.buildSkeletton(),t&&t.data?this.populate():this.setDisabled()},setData:function(t){this.options.data=t,this.populate()},getData:function(){if(this.options.data){var e={name:this.options.data.name};return this.options.components.corpus&&t.merge(e,{corpus:this.elements.corpusSelector.getData()}),this.options.components.social&&t.merge(e,this.elements.socialAccountSelector.getData()),this.options.components.keywords&&t.merge(e,{keywords:this.elements.keywordsSelector.getData()}),this.options.components.profile&&t.merge(e,{url:this.elements.urlInput.getValue(),wikipedia:this.elements.wikipediaInput.getValue()}),this.options.components.event&&t.merge(e,{url:this.elements.urlInput.getValue(),name:this.elements.nameInput.getValue(),description:this.elements.descriptionInput.getValue(),where:this.elements.whereInput.getValue(),video:this.elements.videoInput.getValue()}),t.merge(e,{image:this.elements.imageInput.getValue()}),this.options.data=e,this.options.data}},setDisabled:function(){this.elements.container.addClassName("disabled"),this.options.components.keywords&&this.elements.keywordsSelector.setDisabled(),this.options.components.profile&&(this.elements.urlInput.setDisabled(),this.elements.wikipediaInput.setDisabled()),this.elements.imageInput.setDisabled()},isDisabled:function(){return this.elements.container.hasClassName("disabled")},buildSkeletton:function(){var t={events:{onChange:function(){this.dispatchEvent("onChange",[this.getData()])}.bind(this)}};this.elements.container=a("div",{class:"nv-subjectdetails"}).addContent(this.buildCorpusComponent(t),this.buildSocialComponent(t),this.buildKeywordsComponent(t),this.buildProfileComponent(t),this.buildEventComponent(t),this.elements.deleteBtn=new n.Button({className:"dark-grey uwa-icon iconl icon-separated delete",value:_("Delete")}),a("div",{class:"nv-subjectdetails-overlay"})),this.attachEvents()},buildCorpusComponent:function(t){if(!this.options.components.corpus)return null;return[this.elements.corpusText=a("p").addContent(_("Select the corpus of sources you want to use")),this.elements.corpusSelector=new s(t,!0)]},buildSocialComponent:function(t){var e=[this.elements.socialText=a("p").addContent(_("Select the brand social media accounts you want to track for {0}your {1}{2}").format('<span class="brand-name">',this.options.title,"</span>")),this.elements.socialAccountSelector=new i(t)];if(this.options.components.social)return e},buildKeywordsComponent:function(t){var e=a("div",{class:"nv-subjectdetails-keywords"}).addContent(this.elements.keywordsText=a("p").addContent(_("Enter the keywords which defines {0}your {1}{2}").format('<span class="brand-name">',this.options.title,"</span>")),this.elements.keywordsSelector=new o(t));if(this.options.components.keywords)return e},buildProfileComponent:function(t){var e=a("div",{class:"nv-subjectdetails-profile"}).addContent(this.elements.ProfileText=a("p").addContent(_("{0}{1}{2} profile").format('<span class="brand-name">',this.options.title,"</span>")),this.buildUrlInput("url",_("Website url"),t),this.buildUrlInput("wikipedia",_("Wikipedia page url"),t));if(this.options.components.profile)return e},buildEventComponent:function(t){return this.options.components.event?a("div",{class:"nv-subjectdetails-event"}).addContent(this.buildUrlInput("name",_("Name"),t),this.buildTextarea("description",_("Description"),"",t),this.buildUrlInput("where",_("Where"),t),this.buildUrlInput("image",_("Add an image or logo url"),t),this.buildUrlInput("url",_("Website"),t),this.buildTextarea("video",_("Homepage Video"),_("Please type here the YouTube URL of your video"),t)):this.buildUrlInput("image",_("Add a logo url"),t)},buildUrlInput:function(t,e,i){var s=a("div",{class:"nv-subjectdetails-profile-url"}).addContent(a("span",{text:e}),a("div",{class:"nv-subjectdetails-profile-url-field"}).addContent(this.elements[t+"Input"]=new n.Text(i),a("div",{class:"uwa-icon delete",events:{click:this.onEmptyUrlClick.bind(this,t)}})));return s.setData("id",t),s},buildTextarea:function(e,i,s,o){var r=a("div",{class:"nv-subjectdetails-event-textarea"}).addContent(a("span",{text:i}),a("div",{class:"nv-subjectdetails-event-textarea-field"}).addContent(this.elements[e+"Input"]=new n.Text(t.merge(t.clone(o),{multiline:!0,attributes:{placeholder:s}}))));return r.setData("id",e),r},attachEvents:function(){this.elements.socialAccountSelector&&this.elements.socialAccountSelector.addEvent("onSetSuggestion",function(t){this.elements.imageInput.getValue()||(this.elements.imageInput.setValue(t.picture),this.dispatchEvent("onImageChange",t.picture))}.bind(this)),this.elements.imageInput&&this.elements.imageInput.addEvent("onChange",function(){var t=this.elements.imageInput.getValue();this.dispatchEvent("onImageChange",t)}.bind(this)),this.elements.deleteBtn.addEvent("onClick",function(){this.dispatchEvent("onClickDelete")}.bind(this))},populate:function(){if(this.options&&this.options.data){var t=this.options.data;this.elements.container.getElements(".brand-name").invoke("setText",t.name),this.elements.deleteBtn.getInputElement().setText(_("Delete {0}").format(t.name)),this.options.components.corpus&&this.elements.corpusSelector.setData(t.corpus),this.options.components.social&&(this.elements.socialAccountSelector.setValue(t.name),this.elements.socialAccountSelector.setData({facebook:t.facebook||[],instagram:t.instagram||[],twitter:t.twitter||[]})),this.options.components.keywords&&this.elements.keywordsSelector.setData(t.keywords||[]),this.options.components.profile&&(this.elements.urlInput.setValue(t.url||""),this.elements.wikipediaInput.setValue(t.wikipedia||"")),this.options.components.event&&(this.elements.nameInput.setValue(t.name||""),this.elements.descriptionInput.setValue(t.description||""),this.elements.whereInput.setValue(t.where||""),this.elements.urlInput.setValue(t.url||""),this.elements.videoInput.setValue(t.video||"")),this.elements.imageInput.setValue(t.image||"")}},isDataValid:function(){return!this.options.components.corpus||this.elements.corpusSelector.isDataValid()},onEmptyUrlClick:function(t){this.elements[t+"Input"].setValue(""),"image"===t&&this.dispatchEvent("onImageChange","")}})}.apply(e,i))||(t.exports=s)},function(t,e,n){"use strict";var i,s;i=[n(1),n(10),n(71),n(43),n(59),n(2),n(427),n(116)],void 0===(s=function(t,e,n,i,s,o,a,r){var l={facebook:{apiURL:"https://graph.facebook.com/v2.12/",verifyRoute:"me",searchRoute:"search?q={0}&type=page&fields=picture,category,name",title:"Facebook",normalizeResults:function(t){return t.data},normalizeAccountInfos:function(t){return{displayValue:t.name,picture:t.picture.data.url,details:t.category,selection:{name:t.name,id:t.id}}},labelFromName:function(t){return t}},twitter:{apiURL:"https://api.twitter.com/1.1/",verifyRoute:"account/verify_credentials.json",searchRoute:"users/search.json?q={0}",title:"Twitter",normalizeResults:function(t){return t},normalizeAccountInfos:function(t){return{displayValue:"@"+t.screen_name,picture:t.profile_image_url,details:t.name,selection:{name:t.screen_name,id:t.id_str}}},labelFromName:function(t){return"@"+t}}},c=i.extend({getSuggestions:function(t){if(!(t.length<3)){if(this._cache.hasOwnProperty(t))return this._cache[t];var e=l[this._oauth.getOption("serviceId")];return this._oauth.request(e.apiURL+e.searchRoute.format(encodeURIComponent(t))).then(function(n){var i=e.normalizeResults(n).map(function(n){return Object.assign({fullValue:t},e.normalizeAccountInfos(n))});return this._cache[t]=i,i}.bind(this))}},renderSuggestion:function(t){return[{tag:"img",src:t.picture},{tag:"div",class:"suggestion-infos",html:[{tag:"div",text:t.displayValue},t.details?{tag:"div",class:"details",text:t.details}:""]}]},setOAuth:function(t){this._cache={},this._oauth=t}});return e.extend({name:"nv-social-account-selector",init:function(t){for(var e in this._parent(t),this._oauthIds={},this.data={},l)l.hasOwnProperty(e)&&(this.data[e]=[]);t.data&&this.setData(t.data)},getContent:function(){if(!this.elements.container){this.elements.container=t.createElement("div",{class:this.getClassNames(),html:[{tag:"div",class:this.getClassNames("-tabs"),html:[this._buildTab("facebook"),this._buildTab("twitter")]},this.elements.selection=t.createElement("div",{class:this.getClassNames("-selection")})]});var e=this.elements.autocomplete=new n({adaptor:c,events:{onSetSuggestion:this._onSetSuggestion.bind(this)}});e.getInputElement().addEvent("focus",function(){setTimeout(function(){e.updateSuggestions({typeDelay:0})},1)}),this._showTab("facebook")}return this.elements.container},_buildTab:function(t){var e=o.getAssetURL("/img/third-parties/"+t+".svg");return{tag:"div",class:this.getClassNames("-tab"),styles:{"background-image":"url("+e+")"},title:l[t].title,text:l[t].title,"data-tab-id":t,events:{click:r(this._showTab,this,t)}}},_showTab:function(t,e){var n=this._getTab(t),i=this._getActiveTab();(i!==n||e)&&(i&&i.removeClassName("active"),n.addClassName("active"),this.elements.selection.empty(),this._populateTab(t))},_getActiveTab:function(){return this.elements.container.getElement("[data-tab-id].active")},_getActiveTabId:function(){return this.elements.container.getElement("[data-tab-id].active").getAttribute("data-tab-id")},_getTab:function(t){return this.elements.container.getElement("[data-tab-id="+t+"]")},_populateTab:function(t){var e=new a({serviceId:t,serviceName:l[t].title,callbacks:{log:function(){},rebuild:function(){this._showTab(t,!0)}.bind(this),getAccount:function(){return this._oauthIds[t]}.bind(this),setAccount:function(e){this._oauthIds[t]=e}.bind(this)}}),n=function(){this._currentTabRun===i&&this._populateTabWithAccount(t,e)}.bind(this),i=this._currentTabRun={};this.elements.autocomplete.getAdaptor().setOAuth(e),this._oauthIds[t]&&"plop"!==this._oauthIds[t]?n():e.getAvailableAccounts(function(s){s.length&&(this._oauthIds[t]=s[0].id),e.request(l[t].apiURL+l[t].verifyRoute).done(function(){n()},function(n){this._currentTabRun===i&&(n instanceof a.RenewTokenError?this._populateTabWithoutAccount(t,e,n.oauth_url):this._displayError(n))}.bind(this))}.bind(this))},_populateTabWithoutAccount:function(t,e,n){this.elements.selection.setContent({tag:"div",class:this.getClassNames("-add-account-button"),html:[{tag:"div","data-icon":"3",class:"uwa-icon"},{tag:"div",text:_("Add a {0} account now to make a {0} search").format(l[t].title)}],events:{click:r(e.createNewAccount,e,n)}})},_populateTabWithAccount:function(e){this.elements.selection.setContent(t.createElement("div",{class:this.getClassNames("-autocomplete-container"),html:[{tag:"div",class:this.getClassNames("-title"),text:_("Search accounts on {0}").format(l[e].title)},this.elements.autocomplete]}),this.elements.tags=t.createElement("div",{class:this.getClassNames("-tags-container")})),this._buildTags(e),""!==this.elements.autocomplete.getInputControl().getValue()&&0===this.data[e].length&&this.elements.autocomplete.getInputControl().focus()},_buildTags:function(e){var n;this.elements.tags.empty(),this.data[e].length&&(this.elements.tags.addContent(t.createElement("div",{class:this.getClassNames("-title"),text:_("Selected accounts")}),n=t.createElement("div",{class:this.getClassNames("-tags")})),this.data[e].forEach(function(t,i){this._getTagElement(e,t,i).inject(n)},this))},_getTagElement:function(t,e,n){return new s({value:l[t].labelFromName(e.name),className:"green",closable:!0,events:{onClose:function(){this.data[t].splice(n,1),this._buildTags(t),this.dispatchEvent("onChange",[this.data])}.bind(this)}})},_onSetSuggestion:function(t){this.elements.autocomplete.getInputElement().blur(),this._registerTag(t.selection),this.dispatchEvent("onSetSuggestion",t)},_registerTag:function(t){var e=this._getActiveTabId();this.data[this._getActiveTabId()].filter(function(e){return e.id===t.id}).length>0||(this.data[e].push(t),this._buildTags(e),this.dispatchEvent("onChange",[this.data]))},_displayError:function(){this.elements.selection.setContent({tag:"div",class:"uwa-message error",text:_("An error occured!")})},getData:function(){return this.data},setData:function(t){if("object"!=typeof t)throw new Error("data is not an object");var e;for(e in t)if(!Array.isArray(t[e]))throw new Error("data "+e+" is not an array");Object.assign(this.data,t),(e=this._getActiveTabId())&&this.elements.tags&&this._buildTags(e)},setValue:function(t){this.elements.autocomplete.getInputControl().setValue(t)}})}.apply(e,i))||(t.exports=s)},function(t,e,n){"use strict";var i;void 0===(i=function(){var t={facebook:"fb",gmail:"gplus",google:"gplus",dropbox:"dropbox",twitter:"twitter",googledrive:"gplus",googlecalendar:"gplus",linkedin:"linkedin"};return{get3ddService:function(e){if(!t[e])throw new Error('No match defined for "'+e+'" service');return t[e]}}}.call(e,n,e,t))||(t.exports=i)},function(t,e,n){"use strict";var i,s;i=[n(2),n(0),n(5)],void 0===(s=function(t,e,n){var i=e.h,s=n.extend({render:function(t){return i("div",{className:"widget-intro-auth-accounts-add uwa-icon","data-icon":"3","data-id":t.text,onClick:function(){t.onClick()}})}}),o=n.extend({render:function(t){var e=t.account;return i("div",{className:"widget-intro-auth-accounts-item",onClick:function(){t.onClick(e.userId,e.userName,e.oauthId)}},[i("img",{src:e.profilePicUrl}),i("span",{},e.userName)])}});return n.extend({render:function(e){return i("div",{className:"widget-intro-auth"},[i("div",{className:"widget-intro-auth-title"},e.title),i("div",{className:"widget-intro-auth-accounts"},[this.renderAuthAccounts(e.accounts,e.selectAccountEvent),i(s,{text:t.User.isRegistered?_("Add"):_("Create an account"),onClick:e.addAccountEvent}),this.renderAuthAccountsAgreement(e.serviceName)])])},renderAuthAccounts:function(t){return t.map(function(t){return i(o,{onClick:this.props.selectAccountEvent,account:t})},this)},renderAuthAccountsAgreement:function(t){var e=_("By connecting to Twitter, you agree to comply at all time with Twitter’s Terms of Service and with Section VII.A User Protection of the Twitter Developer Agreement published at"),n=i("a",{class:"twitter-agreement-link",href:"https://developer.twitter.com/en/developer-terms/agreement"},"https://developer.twitter.com/en/developer-terms/agreement");if("Twitter"===t)return i("div",{className:"widget-intro-auth-accounts-agreement"},[e," ",n])}})}.apply(e,i))||(t.exports=s)},function(t,e,n){"use strict";var i,s;i=[n(0),n(5)],void 0===(s=function(t,e){var n=t.h;return e.extend({render:function(t){return n("div",{className:"widget-intro-auth"},[n("div",{className:"widget-intro-auth-title"},t.title)])}})}.apply(e,i))||(t.exports=s)},function(t,e,n){"use strict";var i,s;i=[n(220)],void 0===(s=function(t){return t.extend({currentSubject:null,dataFields:["primary","secondaries","influencers"],init:function(t){this.subjects={},this._parent(t)},buildSubjectsSelectors:function(){this.elements.subjects.empty(!0);var t=this.options.subjectType;t&&"secondary"===t?this.buildSubjectSelector(t,_("Comparative Topic")):t&&"influencer"===t?this.buildSubjectSelector(t,_("Influencer")):(this.buildSubjectSelector("primary",_("Primary Topic"),{keywords:!0}),this.buildSubjectSelector("secondaries",_("Comparative Topics"),{keywords:!0},!0),this.buildSubjectSelector("influencers",_("Influencers"),!1,!0)),t=t||"primary",this.getData()[t]?this.subjects[t].selector.selectSubject(0):this.displaySubjectDetails(t,0)},displayGob:function(t){var e={primary:{title:_("Enter the Primary Topic"),text:_("Choose the topic (e.g., your company name) that you want the dashboard to track."),note:_("Note: Once selected, the Primary Topic cannot be changed unless you reset the dashboard.")},secondary:{title:_("Add a Comparative Topic"),text:_("Enter the name of a comparative topic that you want to track. Your dashboard will compare these topics to the Primary Topic."),note:_("Note: You may also add Competitors to your dashboard later.")},influencer:{title:_("Add an Influencer"),text:_("Select the Influencers for Primary Topic"),note:_("Note: Influencers can be people, brands, publications, or events.")}};this._parent(t,e)}})}.apply(e,i))||(t.exports=s)},function(t,e,n){"use strict";var i,s;i=[n(1),n(220)],void 0===(s=function(t,e){return e.extend({currentSubject:null,dataFields:["primary","languages","corpus","topics","secondaries","influencers","secondary","influencer"],init:function(t){this.subjects={},this._parent(t),this.defaultData={languages:[],corpus:{industry:[],generic:[]},topics:[]}},setData:function(t){t&&t.primary&&t.primary.corpus&&(Object.assign(t,t.primary.corpus),delete t.primary.corpus),this._parent(t)},buildSubjectsSelectors:function(){this.elements.subjects.empty(!0);var t=this.options.subjectType;t&&"secondary"===t?this.buildSubjectSelector(t,_("Brand")):t&&"influencer"===t?this.buildSubjectSelector(t,_("Influencer")):(this.buildSubjectSelector("primary",_("Corpus"),{corpus:!0},!1,!0),this.buildSubjectSelector("secondaries",_("Brands"),!1,!0),this.buildSubjectSelector("influencers",_("Influencers"),!1,!0)),t=t||"primary",this.getData()[t]?this.subjects[t].selector.selectSubject(0):this.displaySubjectDetails(t,0)},displayGob:function(t){var e={primary:{title:_("Enter the Primary Brand"),text:_("Choose the brand (e.g., your company name) that you want the dashboard to track."),note:_("Note: Once selected, the Primary Brand cannot be changed unless you reset the dashboard.")},secondary:{title:_("Add a Competitor"),text:_("Enter the name of a competing company that you want to track. Your dashboard will compare these competitors to the Primary Brand."),note:_("Note: You may also add Competitors to your dashboard later.")},influencer:{title:_("Add an Influencer"),text:_("Enter the name of an Influencer in your industry (e.g., thought leaders, journalists, industry analysts, etc.). Your dashboard will track what these Influencers are saying. "),note:_("Note: You may also add Influencers to your dashboard later.")}};this._parent(t,e)},validateData:function(){if(this.elements.subjectDetails){var t=this.elements.subjectDetails.isDataValid();this.disableNext(!t)}},setCurrentSubjectData:function(){if(this._parent(),"primary"===this.currentSubject){var t=this.getData();if(t.corpus&&t.corpus.industry.length>0){var e=t.corpus.industry[0].name;this.options.title=e,this.subjects.primary.selector.createNewSubject({title:e}),t.primary.image&&this.subjects.primary.selector.setImageURL(t.primary.image,0)}}},getCurrentSubjectData:function(){var e=this.getData();return"primary"===this.currentSubject&&e.primary?t.merge(e.primary,{corpus:{corpus:e.corpus,languages:e.languages,topics:e.topics}}):this._parent()},displaySubjectDetails:function(e,n,i){if("primary"===e&&i){var s=this.getData();s.corpus&&s.languages&&s.topics&&(i=t.merge(i,{corpus:{corpus:s.corpus,languages:s.languages,topics:s.topics}}))}this._parent(e,n,i)},onSubjectSelected:function(t,e){"primary"===t&&t===this.currentSubstep||(this.currentSubstep=t,this.displaySubjectDetails(t,e.id,{name:e.title}),this.setCurrentSubjectData())},onCorpusItemSelected:function(t){"industry"===t.id&&t.value[0]&&(this.options.title=t.value[0],this.subjects.primary.selector.createNewSubject({title:t.value[0]}))}})}.apply(e,i))||(t.exports=s)},function(t,e,n){"use strict";var i,s;i=[n(220)],void 0===(s=function(t){return t.extend({currentSubject:null,dataFields:["primary","secondaries","influencers","thirdly","secondary","influencer"],init:function(t){this.subjects={},this._parent(t)},buildSubjectsSelectors:function(){this.elements.subjects.empty(!0);var t=this.options.subjectType;t&&"secondary"===t?this.buildSubjectSelector(t,_("Organizer")):t&&"influencer"===t?this.buildSubjectSelector(t,_("Speaker")):t&&"thirdly"===t?this.buildSubjectSelector(t,_("Exhibitor")):(this.buildSubjectSelector("primary",_("Event"),{event:!0}),this.buildSubjectSelector("secondaries",_("Organizer"),!1,!0),this.buildSubjectSelector("thirdly",_("Exhibitors"),!1,!0),this.buildSubjectSelector("influencers",_("Speakers"),!1,!0)),t=t||"primary",this.getData()[t]?this.subjects[t].selector.selectSubject(0):this.displaySubjectDetails(t,0)},displayGob:function(t){var e=this.getData(),n={primary:{title:_("Enter the Event Name"),text:_("Choose the Event that you want the dashboard to track."),note:_("Note: Once selected, the Event cannot be changed unless you reset the dashboard.")},secondary:{title:_("Add an Organizer"),text:_("Enter the name of an event Organizer that you want to track. Organizers can be people or brands associated with the Event."),note:_("Note: You may also add Organizers to your dashboard later.")},thirdly:{title:_("Add an Exhibitor"),text:_("Enter the name of an Exhibitor that you want to track. Your dashboard will compare mentions of these Exhibitors."),note:_("Note: You may also add Exhibitors to your dashboard later."),margin:this.subjects[t].isMultiple?(e.secondaries?60*e.secondaries.length+300:300)+"px 0 0 130px":"30px 0 0 130px"},influencer:{title:_("Add a Speaker"),text:_("Enter the name of a Speaker at your event. Your dashboard will track what these Speakers are saying."),note:_("Note: You may also add Speakers to your dashboard later."),margin:this.subjects[t].isMultiple?(e.secondaries?60*e.secondaries.length+300:300)+(e.influencers?60*e.influencers.length+130:130)+"px 0 0 130px":"30px 0 0 130px"}};this._parent(t,n)}})}.apply(e,i))||(t.exports=s)},function(t,e,n){"use strict";var i,s;i=[n(1),n(378),n(276),n(23)],void 0===(s=function(t,e,n,i){var s=t.createElement;return n.extend({dataFields:["languages","corpus","topics"],init:function(t){this.subjects={},this._parent(t),this.defaultData={languages:[],corpus:{industry:[],generic:[]},topics:[]}},open:function(t){this.corpusSelector.setData(this.getData()),this._parent(t)},buildStep:function(){this.elements.corpus=s("div",{class:"nv-agency-step--corpus-container"}).addContent(this.corpusSelector=new e({className:"nv-agency-step--corpus",events:{onChange:this.onCorpusChange.bind(this)}})),this.elements.container=s("div",{class:"nv-agency-step nv-agency-step--corpus"}).addContent(s("div",{class:"nv-agency-step-content wrapper"}).addContent(this.buildTitle(),new i({element:this.elements.corpus,shadows:!0}),this.buildNavigation()))},validateData:function(){if(this.corpusSelector){var t=this.corpusSelector.isDataValid();this.disableNext(!t)}},onCorpusChange:function(){var t=this.corpusSelector.getData();this.setData(t)}})}.apply(e,i))||(t.exports=s)},,,,function(t,e,n){"use strict";var i,s;i=[n(1),n(8),n(3),n(2),n(222),n(6)],void 0===(s=function(t,e,n,i,s,o){return s.extend({getSubject:function(){return("article"===this._item.type?_("{0}... [via {1}]"):_("Look at this... [via {1}]")).format(this._item.title,i.Config.application)},build:function(){var n,s=_("By email"),o=_("Or by email"),a=_("From:"),r=_("To:"),l=_("Separate multiple e-mail addresses with comas"),c=_("Subject:"),u=_("Message:"),h=this.getSubject(),d=_("Share");this._name="ByEmail",i.User.share.services.indexOf("mail")<=-1||(n=i.User.isRegistered?[{tag:"label",text:a},{tag:"input",type:"hidden",name:"myMail",value:i.User.email},{tag:"p",class:"input usermail",text:i.User.email}]:[{tag:"label",text:a},{tag:"input",type:"mail",name:"myMail"}],this._els.tab=t.createElement("div",{class:"mail-tab tab",html:[{tag:"div",class:"title",html:[{tag:"span",class:"logo",text:"("},"article"===this._item.type?{text:o}:{text:s}]},{tag:"div",class:"expand",html:[{tag:"form",name:"sendToSocialNetwork",method:"post",html:[{tag:"a",href:"#",class:"close",text:"p",events:{click:this.onCloseExpandClick.bind(this)}},{tag:"div",class:"writer",html:[{tag:"div",class:"errors"},{tag:"div",class:"field from",html:n},{tag:"div",class:"field to",html:[{tag:"label",text:r},{tag:"input",name:"friendEmail",class:"input friendmail",title:l,type:"mail"}]},{tag:"div",class:"field subject",html:[{tag:"label",text:c},{tag:"input",type:"hidden",name:"subject",value:h},{tag:"p",class:"input subject",text:h}]},{tag:"div",class:"field message",html:[{tag:"label",text:u},{tag:"textarea",name:"mailText",class:"input usermessage"}]}]},{tag:"div",class:"submitter buttons"}]}]}],events:{click:this.toggleTab.bind(this)}}).inject(this._container),this._els.errors=this._els.tab.getElement(".errors"),new e.Button({className:"green share",value:d,events:{onClick:this.onFormClick.bind(this)}}).inject(this._els.tab.getElement(".submitter")),this.attachEvents())},update:function(){},onFormClick:function(t){n.stop(t),this.sendForm()},validate:function(t){return!!("mail"!==t.myMail.type||t.myMail.value&&this.isValidEmail(t.myMail.value))&&!(!t.friendEmail.value||!this.isValidEmail(t.myMail.value))},isValidEmail:function(t){return!!t.match(/^([a-zA-Z0-9_.+-])+@(([a-zA-Z0-9-])+\.)+([a-zA-Z0-9]{2,4})+$/)},sendForm:function(){var e=this._els.tab.getElement("form");this.validate(e)?(this.dispatchEvent("onRequest"),this.createShareURL("mail").then(function(n){var i={myMail:e.myMail.value,friendEmail:e.friendEmail.value,subject:e.subject.value,mailText:e.mailText.value,item:Object.assign({},this._item),url:n};return t.is(i.item.date,"date")&&(i.item.date=i.item.date.getTime()/1e3),o.shareMail(i)}.bind(this)).done(function(t){if(t.emailClient){var n=JSON.parse(t.emailClient),i="mailto:";i+=e.friendEmail.value,i+="?subject="+n.subject,i+="&body="+n.textTemplate,window.location.replace(i)}this.dispatchEvent("onSuccess")}.bind(this),this.onFailure.bind(this))):this.onFailure("email_fields_empty")}})}.apply(e,i))||(t.exports=s)},function(t,e,n){"use strict";var i,s;i=[n(1),n(8),n(3),n(2),n(96),n(222),n(6),n(221)],void 0===(s=function(t,e,n,i,s,o,a,r){return o.extend({build:function(){var n=_("Publish on your page"),s=_("Copy");this._name="ToPage",0!==i.User.listOfPages.length&&(1!==i.User.listOfPages.length||i.User.hasActivePublicPage)&&(this._els.tab=t.createElement("div",{class:"toPage tab",html:[{tag:"div",class:"title",html:[{tag:"span",class:"logo",text:"2"},{text:n}]},{tag:"div",class:"expand",html:[{tag:"form",name:"toPage",method:"post",html:[{tag:"a",href:"#",class:"close",text:"p",events:{click:this.onCloseExpandClick.bind(this)}},{tag:"div",class:"errors left"},{tag:"p",class:"itemCopyText"},{tag:"span",class:"pageSelector"},{tag:"div",class:"buttons"}]}]}],events:{click:this.toggleTab.bind(this)}}).inject(this._container),new e.Button({className:"green share",value:s,events:{onClick:this.onFormClick.bind(this)}}).inject(this._els.tab.getElement(".buttons")),this._els.errors=this._els.tab.getElement(".errors"),this.itemCopyText=this._els.tab.getElement(".itemCopyText"))},onFormClick:function(t){n.stop(t);var e=this._item;this.dispatchEvent("onRequest"),a.shareToPage(Object.assign({pid:this._els.tab.getElement("[name=pid]").value},r.getParameters({type:e.type,id:e.id||e.itemId,ownerId:e.ownerId}))).done(this.dispatchEvent.bind(this,"onSuccess"),this.onFailure.bind(this))},_getPageSelector:function(){var t=[],e="",n=s.isPublic(this._item.name);return!n||i.Page.isPublic&&i.Page.userId===i.User.id||!i.User.hasActivePublicPage||t.push({pid:i.User.publicPage.id,value:i.Config.urls.base+"/"+i.User.username+" ("+_("public")+")"}),i.User.listOfPages.forEach(function(e){e.pageId!==i.Page.id&&t.push({pid:e.pageId,value:e.title+" ("+_("private")+")"})}),e+=function(t){if(!i.User||!i.User.id)return"";var e='<select id="pageSelector" name="pid">',n='<optgroup label="'+_("Private Dashboards")+'">',s="";switch(i.User.listOfPages.forEach(function(t){var e="www"!==t.brand?"&#9658;":"";n+=t.pageId===i.Page.id?"":'<option value="'+t.pageId+'">'+t.title+" "+e+"</option>"}),n+="</optgroup>",i.User.hasActivePublicPage&&!i.User.publicPage.isMaster&&(s+='<optgroup label="'+_("Public page")+'">',s+='<option value="'+i.User.publicPage.id+'">'+i.Config.urls.base+"/"+i.User.username+"</option>",s+="</optgroup>"),t){case"top":e+=s+n;break;case"hidden":e+=n;break;default:e+=n+s}return e+="</select>"}(n&&i.Page.isPublic&&i.Page.userId===i.User.id?"hidden":"top"),n&&i.Page.isPublic&&(e+='<input type="hidden" name="visit" value="'+i.Page.owner.username+'" />'),e},_getCopyText:function(t){var e="";switch(t){case"widget":e=_("Copy the widget to:");break;case"locked":case"private":case"tab":e=_("Copy the tab to:")}return e},update:function(t){this._parent(t),this._updateMessage(t.type),this.itemCopyText.set("text",this._getCopyText(t.type)),this._els.tab.getElement("span.pageSelector").setHTML(this._getPageSelector())}})}.apply(e,i))||(t.exports=s)},function(t,e,n){"use strict";var i,s;i=[n(1),n(222)],void 0===(s=function(t,e){return e.extend({build:function(){var e=_("Grab a link"),n=_("Grab it");this._name="GrabLink",this._els.tab=t.createElement("div",{class:"grab-tab tab",html:[{tag:"div",class:"title",html:[{tag:"span",class:"logo",text:"1"},{text:e}]},{tag:"div",class:"expand",html:[{tag:"form",name:"grabLink",method:"post",action:"",html:[{tag:"a",href:"#",class:"close",text:"p",events:{click:this.onCloseExpandClick.bind(this)}},{tag:"div",class:"errors left"},{tag:"p",class:"itemGrabText"},{tag:"input",name:"preconfigUrl",type:"text",class:"emails text sharelink"},{tag:"div",class:"share-loader"},{tag:"buttons",html:[{tag:"input",type:"submit",class:"nv-button nv-primary-button share hidden",value:n}]}]}]}],events:{click:this.toggleTab.bind(this)}}).inject(this._container),this._els.errors=this._els.tab.getElement(".errors"),this.itemGrabText=this._els.tab.getElement(".itemGrabText"),this.shareLink=this._els.tab.getElement(".sharelink"),this.attachEvents()},_getGrabText:function(t){var e="";switch(t){case"widget":e=_("Grab a share link for this widget:");break;case"locked":case"private":case"tab":e=_("Grab a share link for this tab:")}return e},update:function(t){this._parent(t),this.itemGrabText.set("text",this._getGrabText(t.type)),this.shareLink.set("value","");var e=this._els.tab.getElement(".share-loader");this.createShareURL("link").fin(function(){e&&e.remove()}).done(function(t){this.shareLink.set("value",t),this.shareLink.select()}.bind(this),this.onFailure.bind(this))}})}.apply(e,i))||(t.exports=s)},function(t,e,n){"use strict";var i,s;i=[n(1),n(219),n(97)],void 0===(s=function(t,e,n){return e.extend({init:function(){this._parent("tagging",_("Opinion edit"),"tagEdit-icon"),this.toElement().addContent(t.createElement("div",{class:"nv-tagpanel-nothing",text:_("No item selected")}),this.body=t.createElement("div",{class:"nv-tagpanel"})),this.resizeApp()},displayItem:function(t){var e=n.getItem();this.toElement().toggleClassName("editing",!!e),this.resizeApp(),t&&n[e?"open":"close"]()},buildSection:function(e,n,i){var s;return t.createElement("div",{class:"nv-tagpanel-tags active"}).addContent(e?t.createElement("div",{class:"nv-tagpanel-tags-header autoclear"}).addContent(e):"",s=t.createElement("div",{class:"nv-tagpanel-tags-content"})).inject(n,i),s}})}.apply(e,i))||(t.exports=s)},function(t,e,n){"use strict";var i,s;i=[n(1),n(9),n(26),n(110),n(71),n(43),n(2),n(4),n(116),n(6),n(97),n(748),n(383)],void 0===(s=function(t,e,n,i,s,o,a,r,l,c,u,h,d){var p=e.extend({isExpandable:!1,init:function(){this.isOpen=!0,this.build(),u.addEvent("itemLoaded",this.onItemLoad.bind(this))},build:function(){this.content=t.createElement("div",{class:"nv-tagpanel-content",text:_("Loading...")}),this.isExpandable?(this.container=new i({className:"nv-tagpanel-section",multiSelect:!0}),this.container.addEvent("onChange",this.onAccordionChange.bind(this)),this.container.addItem(this.id,{text:this.displayName,content:this.content}),this.container.selectItem(this.id,!0)):this.container=t.createElement("div",{class:"nv-tagpanel-section"}).addContent(this.title=t.createElement("div",{class:"nv-tagpanel-title",text:this.displayName}),this.content)},show:function(){this.container.removeClassName("hide"),this.isOpen=!0},hide:function(){this.container.addClassName("hide"),this.isOpen=!1},onAccordionChange:function(t,e){var i=this.container.getContent().getElement(".uwa-accordion-item."+t).getElement(".uwa-accordion-content"),s=i.getSize().height;e?(i.setStyles({display:"block",height:0}),new n(i,{duration:250,transition:"quadOut",events:{onComplete:function(){i.setStyles({height:"auto",overflow:"visible"})}}}).start({height:s})):(i.setStyles({height:"auto",overflow:"hidden"}),new n(i,{duration:250,transition:"quadOut",events:{onComplete:function(){i.setStyles({display:"none",height:s})}}}).start({height:0}))},onItemLoad:function(){}}),m={};m.RecentTags=p.extend({maxTag:10,id:"recentTags",isExpandable:!0,displayName:_("Recent"),init:function(){this._parent(),this.labels=[],this.content.empty();var e=function(){t.createElement("p",{class:"empty",text:_("No recent opinions")}).inject(this.content)}.bind(this);u.getRecentTags().done(function(t){this.labels=t.map(function(t){return t.name}),this.labels.length<=0?e():this.labels.forEach(function(t){setTimeout(function(){new h({name:t},{mode:"pool"}).inject(this.content)}.bind(this))},this)}.bind(this),e),u.addEvent("tagAdded",this.populateTags.bind(this))},populateTags:function(t){t&&(this.labels.includes(t.name)||(this.labels.unshift(t.name),this.labels=this.labels.slice(0,this.maxTag)),this.content.empty(),this.labels&&this.labels.length>0?this.labels.forEach(function(t){setTimeout(function(){new h({name:t},{mode:"pool"}).inject(this.content)}.bind(this))},this):this.hide())}}),m.CurrentTags=p.extend({init:function(){this.id="currentTags",this.displayName=_("Existing"),this._parent(),u.addEvent("onItemTagsChange",this.refresh.bind(this))},refresh:function(){var e,n,i,s,o,r=u.getTagsByUserId();this.content.empty(),this.myTags=[];var l=u.getItem().getUserTags();if(0!==l.length||0!==Object.keys(r).length){Object.keys(r).length>0&&l.length>0&&(e=this.buildHeader(a.User.id,_("You"))),this.myContent=u.getView().buildSection(e||"",this.content),l.forEach(function(t){var e=new h(t,{mode:"own"}).inject(this.myContent);this.myTags.push(e)},this);var c=function(t){new h(t,{mode:"foreign"}).inject(o)},d=u.getTagsByUserId();for(n in d)d.hasOwnProperty(n)&&(s=(i=d[n])[0].user.display_name,e=this.buildHeader(n,s),o=u.getView().buildSection(e,this.content),i.forEach(c,this))}else this.content.addContent(t.createElement("p",{class:"empty",text:_("No opinion for this article")}))},onItemLoad:function(){this.refresh()},buildHeader:function(e,n){return[t.createElement("img",{src:a.Config.urls.storage+"/"+e+"/16"}),t.createElement("span",{text:n})]}}),m.NewTag=p.extend({init:function(){this.id="newTag",this.displayName=_("Add"),this.sentimentFocus=!1,this._parent(),u.addEvent("onItemTagsChange",function(){this.autocomplete.getInputElement()!==document.activeElement&&this.autocomplete.setValue("")}.bind(this)),this.buildContent()},buildContent:function(){this.content.setStyle("position","relative").empty().addContent(this.autocomplete=new s({adaptor:f,adaptorOptions:{module:this},events:{onSetSuggestion:this.submitHandler.bind(this),onSubmit:this.submitHandler.bind(this)}}),this.submit=t.createElement("span",{class:"nv-tagpanel-submit",text:"A",events:{click:l(this.submitHandler,this)}}))},openSentimentsDropdown:function(e){if(t.is(e,"string")){if(this.value=e||this.autocomplete.getValue().trim(),this.dropdown){if(this.isSentimentsDropdownOpen())return}else{var n={forceOpening:!0,keyboardNavigation:!0,dropdown:{target:this.autocomplete.getContent(),margin:6}};this.dropdown=new d(n)}this.dropdown.options.tagName=this.value,u.getSentiments().done(function(t){t.sentiments.length<=1?(this.dropdown.selectSentiment(t.sentiments[0]),this.autocomplete.setValue("")):(this.autocomplete.hideSuggestions(),this.dropdown.open())}.bind(this))}},isSentimentsDropdownOpen:function(){return!(!this.dropdown||!this.dropdown.isOpen())},onItemLoad:function(){this.autocomplete.setValue("")},selectionCallback:function(){this.submit.show(),this.sentimentFocus=!1},submitHandler:function(){this.isSentimentsDropdownOpen()||this.autocomplete.areSuggestionsDisplayed()||this.openSentimentsDropdown(this.autocomplete.getValue())}}),m.SuggestedTags=p.extend({init:function(){this.id="suggestedTags",this.displayName=_("Suggested"),this._parent()},onItemLoad:function(){var t=u.getItem().getSuggestedTags();this.content.empty(),0===t.length?this.hide():(this.show(),t.forEach(function(t){new h({name:t.name},{mode:"pool"}).inject(this.content)},this))}});var f=o.extend({getSuggestions:function(t,e){var n=t.slice(0,e);return c.getTagsList({prefix:n}).then(function(t){if(!this.options.module.isSentimentsDropdownOpen())return t.map(function(t){return{fullValue:t.name,prefix:n}})}.bind(this))},renderSuggestion:function(t){if(t.fullValue.startsWith(t.prefix.toLowerCase())){var e=t.prefix.length;return[{tag:"strong",text:t.fullValue.slice(0,e)},t.fullValue.slice(e).escapeHTML()]}return this._parent(t)}});return m}.apply(e,i))||(t.exports=s)},function(t,e,n){"use strict";var i,s;i=[n(1),n(3),n(9),n(22),n(116),n(383),n(97)],void 0===(s=function(t,e,n,i,s,o,a){var r=t.createElement;return n.extend(i,{options:{mode:"pool",type:"mandatory"},init:function(e,n){return this.setOptions(n),this.tagObj=t.clone(e),"foreign"!==this.options.mode&&"display"!==this.options.mode&&a.addEvents({currentTagsWasReinit:function(){"own"!==this.options.mode&&(this.setSentiment(null),this.elm.removeClassName("tag-only"))}.bind(this),tagChanged:this._changeSentiment.bind(this),tagAdded:this._changeSentiment.bind(this),itemLoaded:function(){a.getItem().getTags().forEach(function(t){this._changeSentiment(t)},this)}.bind(this),tagDeleted:function(t){if(this._changeSentiment(t),t.id===this.tagObj.id)if("own"===this.options.mode)this.elm.destroy();else if("pool"===this.options.mode){var e=null;a.getItem().getTags().forEach(function(n){t.id===n.id&&(e=n.sentiment)},this),this.setSentiment(e),this.elm.setStyles({background:"","border-color":"",color:""}),this.elm.removeClassName("tag-only")}}.bind(this)}),this},openSentimentDropdown:function(){this.dropdown||this.createDropdown(),this.dropdown.open()},inject:function(t){switch("display"===this.options.mode?this.elm=r("div"):this.elm=r("a",{href:"#_"}).addEvent("click",e.stop),this.elm.set({class:"nv-tagpanel-tag",html:{tag:"span",class:"text-wrapper",text:this.tagObj.name}}),this.tagObj.id&&this.elm.addClassName("tagging-"+this.tagObj.id),this.options.mode){case"foreign":this.setSentiment(this.tagObj.sentiment);break;case"display":return this.setSentiment(this.tagObj.sentiment),this.elm.addClassName("tag-inactive"),this.elm.inject(t),this;case"own":this.elm.addClassName("tagging-own"),this.setSentiment(this.tagObj.sentiment),this.elm.addContent(this.deleteBT=r("div",{class:"nv-tagpanel-delete",text:","}).addEvent("click",s(function(){a.deleteTag(this.tagObj)},this)))}return this.elm.inject(t),"display"!==this.options.mode&&this.createDropdown(),"pool"===this.options.mode&&a.getItem()&&a.checkSentimentForTagId(this.tagObj.id),this._changeSentiment(this.tagObj),this},_changeSentiment:function(t){t.id===this.tagObj.id&&this.setSentiment(t.sentiment),t.name===this.tagObj.name&&a.getSentiments().done(function(t){var e=a.getItem();if(e){var n=t.sentiments,i=e.getUserTags(),s=n.every(function(t){return i.some(function(e){return e.sentiment.id===t.id&&e.name===this.tagObj.name},this)},this);this.elm.toggleClassName("inactive",s)}}.bind(this))},setSentiment:function(t){"pool"!==this.options.mode&&(t&&-1!=+t.id?(this.tagObj.sentiment=t,this.elm.removeClassName("tag-only").set("title","none"===t.name?_("none"):t.name),this.elm.setStyles({backgroundColor:"#"+this.tagObj.sentiment.color,borderColor:"#"+this.tagObj.sentiment.color,color:"#FFF"})):(delete this.tagObj.sentiment,this.elm.addClassName("tag-only"),this.elm.set("style","")))},createDropdown:function(){var t={tagObj:this.tagObj,dropdown:{target:this.elm,margin:-2}};this.dropdown=new o(t)}})}.apply(e,i))||(t.exports=s)},,,,,,,function(t,e){var n,i,s=t.exports={};function o(){throw new Error("setTimeout has not been defined")}function a(){throw new Error("clearTimeout has not been defined")}function r(t){if(n===setTimeout)return setTimeout(t,0);if((n===o||!n)&&setTimeout)return n=setTimeout,setTimeout(t,0);try{return n(t,0)}catch(e){try{return n.call(null,t,0)}catch(e){return n.call(this,t,0)}}}!function(){try{n="function"==typeof setTimeout?setTimeout:o}catch(t){n=o}try{i="function"==typeof clearTimeout?clearTimeout:a}catch(t){i=a}}();var l,c=[],u=!1,h=-1;function d(){u&&l&&(u=!1,l.length?c=l.concat(c):h=-1,c.length&&p())}function p(){if(!u){var t=r(d);u=!0;for(var e=c.length;e;){for(l=c,c=[];++h<e;)l&&l[h].run();h=-1,e=c.length}l=null,u=!1,function(t){if(i===clearTimeout)return clearTimeout(t);if((i===a||!i)&&clearTimeout)return i=clearTimeout,clearTimeout(t);try{i(t)}catch(e){try{return i.call(null,t)}catch(e){return i.call(this,t)}}}(t)}}function m(t,e){this.fun=t,this.array=e}function f(){}s.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)e[n-1]=arguments[n];c.push(new m(t,e)),1!==c.length||u||r(p)},m.prototype.run=function(){this.fun.apply(null,this.array)},s.title="browser",s.browser=!0,s.env={},s.argv=[],s.version="",s.versions={},s.on=f,s.addListener=f,s.once=f,s.off=f,s.removeListener=f,s.removeAllListeners=f,s.emit=f,s.prependListener=f,s.prependOnceListener=f,s.listeners=function(t){return[]},s.binding=function(t){throw new Error("process.binding is not supported")},s.cwd=function(){return"/"},s.chdir=function(t){throw new Error("process.chdir is not supported")},s.umask=function(){return 0}},,,function(t,e,n){"use strict";var i,s;i=[n(0),n(5),n(14)],void 0===(s=function(t,e,n){var i=t.h,s=n.namespace("ThumbnailsListLabel").addRules({root:{display:"flex",flexFlow:"column",alignItems:"flex-start",minHeight:"90px",height:"90px",padding:"10px",boxSizing:"border-box",backgroundColor:"#3A3A3A",color:"#ffffff",fontSize:"16px"},rootDsCatalog:{backgroundColor:"#fff",fontSize:"15px",padding:"0 15px",lineHeight:"1.2em",color:"#fff",textTransform:"uppercase",fontFamily:"'3dsregular'"},nameOnly:{fontSize:"21px",justifyContent:"center",padding:"0 0 0 97px"},clickable:{transition:"background .2s ease-out",cursor:"pointer",hover:{backgroundColor:"#4B4B4B"}},selected:{backgroundColor:"#ffffff",color:"#3A3A3A",hover:{backgroundColor:"#ffffff"}},name:{},text:{marginTop:"10px",lineHeight:"1.2em",fontSize:"14px",opacity:".6"}});return e.extend({name:"nv-thumbslist-label",init:function(t){this._parent(t),this.onClick=this.onClick.bind(this)},render:function(t){var e=t.selectable&&t.onClick;return i("div",{className:"nv-thumbslist-label "+s("root",e&&"clickable",!t.text&&"nameOnly",t.style,t.selected&&"selected","dsCatalog"===t.theme&&"rootDsCatalog"),onClick:e&&this.onClick},[i("div",{class:s("name")},t.name),t.text&&i("div",{class:s("text")},t.text)])},onClick:function(){var t=this.props;this.props.onClick(t.selected,t.id)}})}.apply(e,i))||(t.exports=s)},function(t,e,n){"use strict";var i,s;i=[n(3),n(0),n(5),n(11)],void 0===(s=function(t,e,n,i){var s=e.h;return n.extend({name:"nv-languagesselector",init:function(t){this._parent(t),this.onLanguageClick=this.onLanguageClick.bind(this)},render:function(t){var e=t.languages,n=e.user;return s("div",{className:this.getClassNames(),style:{display:"flex",flexFlow:"row",justifyContent:"center"}},[n?this.renderLanguage(e.user):"",this.renderLanguage(e.en),this.renderLanguage(e.fr)])},renderLanguage:function(t){var e=t.code,n=t.name,o=this.props.selectedLanguages.indexOf(t.code)>=0;return s("div",{className:this.getClassNames("-checkbox"),style:{display:"flex",flexFlow:"row",alignItems:"center",margin:"0 22px"}},[s(i.Checkbox,{className:"light",attributes:{value:e,id:e,checked:o},events:{onChange:this.onLanguageClick}}),s("label",{className:this.getClassNames("-checkbox-label"),for:e,style:{fontSize:"20px"}},n)])},onLanguageClick:function(e){var n=t.getElement(e).value,i=this.props.selectedLanguages.slice(),s=i.indexOf(n),o=s>=0;1===i.length&&o?i=[n]:o?i.splice(s,1):i.push(n),this.props.onLanguagesSelected(i)}})}.apply(e,i))||(t.exports=s)},,,,,,,,function(t,e,n){"use strict";var i,s;i=[n(1),n(23),n(2),n(4),n(96),n(21),n(45),n(116),n(179),n(392)],void 0===(s=function(t,e,n,i,s,o,a,r,l,c){return c.extend({viewName:"widgets",initializeStickyWidgets:function(){var e,n,i,s,o,r,l=t.clone(a.get("sticky"));for(e=0,n=l.length;e<n;e+=1)s="widget-"+(i=l[e]),o=document.body.getElement("#"+s),(r=this.datasource.getWidget(i))?(this.injectWidget(r),r.setCollapsable(!0),r.show(),r.load(),o.addClassName("sticky")):(l.erase(i),a.set("sticky",l),a.save());var c=this.getQuickSidebar();l.length&&("widgets"===a.get("showSidebarRight")?c.open():c.switchTab())},buildMain:function(){var t=this._parent();return this.mainInner=new e({element:t,shadows:!0}).getInnerElement(),t},buildHeaderLeft:function(){return t.createElement("div",{class:"smartreader-header-top left "+this.viewName,html:[{tag:"span",id:"smartreader-sidebar-handler",class:"nv-sidebar-handler left uwa-icon",events:{click:function(){c.toggleSidebar("left")}}},{tag:"span",class:"smartreader-section-icon",html:{tag:"img"}},{tag:"span",id:"smartreader-{0}-headerTitle".format(this.viewName),class:"smartreader-header-title"}]})},buildHeaderRight:function(){var e=this;return t.createElement("div",{class:"smartreader-header-top right "+this.viewName,html:[{tag:"div",id:"smartreader-{0}-header-refresh".format(this.viewName),class:"smartreader-header-action refresh uwa-icon","data-icon":"Q",title:_("Refresh"),events:{click:function(){e.datasource.getWidget().refresh()}}},{tag:"div",class:"smartreader-header-action prev-next previous uwa-icon",events:{click:e.displayPrevWidget.bind(e)}},{tag:"div",class:"smartreader-header-action prev-next next uwa-icon",events:{click:e.displayNextWidget.bind(e)}},{tag:"span",id:"smartreader-sidebar-handler",class:"nv-sidebar-handler right uwa-icon",events:{click:function(){c.toggleSidebar("right")}}}]})},getQuickSidebar:function(){return this._quickSidebar||(this._quickSidebar=new App.SidebarRight("widgets",_("Livebar"),"sticky-icon"),t.createElement("div",{id:"sticky-empty",text:_("empty")}).inject(this._quickSidebar.toElement())),this._quickSidebar},addWidgetRow:function(e){var n=t.createElement("li",{class:"nv-treeview-widget",html:'<div class="nv-treeview-row" uwa-tooltip="'+e.dataObj.title+'" data-action="display:widget:'+e.getId()+'" data-widget-id="'+e.getId()+'"><a href="#" class="sticker uwa-icon" data-action="toggle-sticky-widget:'+e.getId()+'"></a><span class="icon nv-treeview-rowIcon"></span><span class="nv-treeview-label">'+e.getTitle().sanitizeHTML()+'</span><span class="nv-treeview-unread"></span></div>'});return e.isSticky()&&n.getChildren()[0].addClassName("sticky"),this.datasource.injectRow(n,e),e.addEvent("unreadWasSetted",this.updateUnread.bind(this,e)).addEvent("titleWasChanged",this.updateTitle.bind(this,e)).addEvent("updateFavicon",this.updateIcon.bind(this,e)),e.getIcon()&&this.updateIcon(e),n},displayPrevNextWidget:function(t){var e=[],n=this.datasource;o.getAll().forEach(function(t){e.push.apply(e,n.getSection(t.dataObj.id).widgets)});var s=i.getNext(e,n.getWidget(),{reverse:t,condition:function(t){return!t.isSticky()&&!t.isStream()}});return s&&this.datasource.display("widget",s.getId()),!!s},displayNextWidget:function(){return this.displayPrevNextWidget(!1)},displayPrevWidget:function(){return this.displayPrevNextWidget(!0)},injectWidget:function(e){var n,i,s="widget-"+e.getId();if(!(n=e.isSticky()?this.getQuickSidebar().toElement():this.mainInner).getElement("#container-"+s))return i=document.body.getElement("#container-"+s)||t.createElement("div",{id:"container-"+s,class:"container-widget"}),e.isSticky()||i.setStyle("display","none"),i.inject(n,"top"),e.isSticky()?this._quickSidebar.toElement().addClassName("notEmpty"):this._quickSidebar&&!a.get("sticky").length&&this._quickSidebar.toElement().removeClassName("notEmpty"),e.inject(i),e.setCollapsable(!1),e.load(),"WebPage"===e.getName()&&i.addClassName("full-height"),i},updateUnread:function(){this.datasource.refreshCounters()},updateTitle:function(t){var e=t.getId();(document.body.getElements("#widget-"+e+" .nv-treeview-label, #smartreader-widgets-headerTitle").forEach(function(e){e.setContent(t.getTitle())}),t.loaded&&"LinkModule"===t.getName())&&document.body.getElements("#smartreader-widgets-headerTitle")[0].setContent({tag:"a",href:t.getData().url,text:t.getTitle(),target:"_blank"});t===this.datasource.getWidget()&&this.updateHeaderTitleExtra()},updateHeaderTitleExtra:function(){var e=this,n=document.body.getElement("#smartreader-widgets-header > .left"),i=e.datasource.getWidget();n.getElements(".smartreader-header-title-extra").invoke("destroy");var o=t.createElement("div",{class:"smartreader-header-title-extra",html:[!i.isReadOnly()&&{tag:"span",class:"uwa-icon cogwheel",events:{click:r(i.toggleEdit,i)}},{tag:"span",class:"uwa-icon pin-point",events:{click:function(){var t=e.datasource.getWidget();e.stickWidget(t),this.datasource.display("widget",t.getId())}.bind(this)}},i.hasShare()&&{tag:"span",class:"uwa-icon curvy-next",events:{click:function(){l.show({id:i.getId(),title:i.getTitle(),picture:s.getThumbnail(i.getName()),name:i.getName(),type:"widget"})}}},!i.isReadOnly()&&{tag:"span",class:"uwa-icon delete",events:{click:i.confirmRemove.bind(i)}}]});n.addContent(o),n.setStyle("padding-right",o.clientWidth+10+"px")},updateIcon:function(t){var e=t.getId(),n=t.getIcon();document.body.getElements("#widget-"+e+" .nv-treeview-rowIcon").invoke("setStyle","background-image","url("+n+")"),document.body.getElements("#smartreader-widgets-header .smartreader-section-icon img").invoke("set","src",n)},_display:function(){var t,e=this.datasource.getWidget(),n=this.datasource.getSection();return this.mainInner.empty(),this.injectWidget(e),e.isSticky()?(this.getQuickSidebar().open(),e.scrollTo({margin:10}),this.datasource.display("all"),!0):(this._displayView(),this.datasource.toggleSection(n.id,!0),this.datasource.refreshSidebarFocus(),"none"===(t=document.body.getElement("#container-widget-"+e.getId())).style.display&&(e.isSticky()||this.mainInner.getElements(".container-widget").invoke("setStyle","display","none"),t.setStyle("display","block")),e.setCollapsable(!1),e.load(),this.updateHeader(),this.updateIcon(e),!0)},toggleStickyWidget:function(t){this[t.isSticky()?"unstickWidget":"stickWidget"](t),this.datasource.display("widget",t.getId())},stickWidget:function(t){var e=a.get("sticky");e.push(t.getId()),a.set("sticky",e),a.save(),t.setCollapsable(!0),this.datasource.getWidgetRow(t.getId()).addClassName("sticky"),t.sendContent("onUpdateMenu")},unstickWidget:function(t){var e=this.datasource.getWidgetRow(t.getId()),n=a.get("sticky");n.erase(t.getId()),a.set("sticky",n),a.save(),t.setCollapsable(!1),e.removeClassName("sticky")},updateHeader:function(){document.body.getElement("#smartreader-widgets-header")&&this.updateTitle(this.datasource.getWidget())}})}.apply(e,i))||(t.exports=s)},function(t,e,n){"use strict";var i,s;i=[n(1),n(18),n(3),n(53),n(82),n(2),n(4),n(44),n(21),n(45),n(35),n(117),n(27),n(6),n(218),n(379),n(769),n(392),n(283),n(62)],void 0===(s=function(t,e,n,i,s,o,a,r,l,c,u,h,d,p,m,f,g,v,b,y){var w={all:{text:_("All feeds"),icon:"rss",tooltip:_("This section will display articles from all your feeds.")},slow:{text:_("Slow"),icon:"whirlwind",tooltip:_("This section will display articles from less frequently updated feeds.")},saved:{text:_("Saved"),icon:"star",tooltip:_("This section will display articles that you have saved.")},recentlyread:{text:_("Recently read"),icon:"circle-crossed",tooltip:_("This section will display your recently read articles.")}};return v.extend({viewName:"feeds",init:function(t){this._parent(t),this.timeoutTotalCounter=null,this.timeoutSectionsCounter={},this.timeoutMultiCounter={};var e=this,n=a.debounce(e.updateHeader,500,e);this._itemListEvents={onMoreItems:function(t){e.addItemsInCurrentView(t,!1)},onNewItems:function(t){e.addItemsInCurrentView(t,!0)},onNoMoreItem:function(){e.currentView&&e.currentView.addItems([])},onProducerChange:function(t){t.hasChanged("flags")&&n()},onReset:function(){var t=e.currentView;t&&(t.empty(),this.loadMore(t.options.loadCountHint))},onLoading:function(t){t||n(),e.currentView&&e.currentView.setMessage(t?_("Loading..."):"")}}},buildMain:function(){var t=this._parent().set("html",'<div id="smartreader-feeds-inner"><p>'+_("Initializing your feeds...")+"</p></div>");return c.get("smartreader.onlyUnread")&&t.addClassName("showOnlyUnread"),t},buildHeaderLeft:function(){return t.createElement("div",{class:"smartreader-header-top left "+this.viewName,html:[{tag:"span",id:"smartreader-sidebar-handler",class:"nv-sidebar-handler left uwa-icon",events:{click:function(){v.toggleSidebar("left")}}},{tag:"span",class:"smartreader-section-icon"},{tag:"span",id:"smartreader-{0}-headerTitle".format(this.viewName),class:"smartreader-header-title"},{tag:"span",class:"smartreader-header-title-extra"}]})},buildHeaderRight:function(){var e=this,i=t.createElement("div",{class:"smartreader-header-top right "+this.viewName,html:[{tag:"div",class:"smartreader-header-action prev-next previous uwa-icon",events:{click:e.putFocusOnPrevEntry.bind(e)}},{tag:"div",class:"smartreader-header-action prev-next next uwa-icon",events:{click:e.putFocusOnNextEntry.bind(e)}},{tag:"div",id:"smartreader-{0}-action-switcher".format(this.viewName),class:"smartreader-header-action view-switcher uwa-icon"},{tag:"div",id:"smartreader-{0}-mark-switcher".format(this.viewName),class:"smartreader-header-action star uwa-icon"},{tag:"div",id:"smartreader-{0}-selection-actions".format(this.viewName),class:"smartreader-header-action view-switcher uwa-icon"},{tag:"div",id:"smartreader-{0}-header-refresh".format(this.viewName),class:"smartreader-header-action refresh uwa-icon",title:_("Refresh"),events:{click:function(t){t.stopPropagation(),this.refreshCurrentView()}.bind(this)}},{tag:"span",id:"smartreader-sidebar-handler",class:"nv-sidebar-handler right uwa-icon",events:{click:function(){v.toggleSidebar("right")}}}]}),s=function(t,e){var n,i=t.className+" header-dropdown";return t.set("title",e),t.set("class",i),(n=new m(t,{className:"grey"})).toElement().addClassName("content"),n},a=function(e){var n=e&&e.class||"";return n&&delete e.class,t.createElement("div",{class:"item "+n}).set(e)},r=function(t){return i.getElement("[id="+t+"]")};return s(r("smartreader-feeds-action-switcher"),_("Change display")).toElement().toggleClassName("views-enabled",o.isAllowed("feed_reader")).addContent(o.isAllowed("feed_reader")&&[a({text:_("List"),class:"uwa-icon switch-to-list list"}),a({text:_("Expanded"),class:"uwa-icon switch-to-expanded-list expanded-list"}),a({text:_("Mosaic"),class:"uwa-icon switch-to-mosaic mosaic"})],a({text:c.get("smartreader.onlyUnread")?_("Show all items"):_("Show only unread items"),id:"smartreader-feeds-showFilter"})).addEvent("click",function(t){var i=n.getElement(t).className.match(/switch-to-(list|expanded|mosaic)/);i?e.switchView(i[1]):"smartreader-feeds-showFilter"===n.getElement(t).id&&e.toggleFilter()}),s(r("smartreader-feeds-mark-switcher"),_("Mark options...")).toElement().addContent(o.isAllowed("feed_reader")&&[a({text:_("Mark all as unsaved"),class:"mark-all-as-unsaved"})]).addEvent("click",function(t){var i=n.getElement(t);if(!i.hasClassName("disabled")){var s=i.className.match(/mark-all-as-unsaved/);if(s){switch(s[0]){case"mark-all-as-unsaved":u.log("reader","MarkAllAsUnsaved")}e.applyActionOnSelection(s[0])}}}),s(r("smartreader-feeds-selection-actions"),_("Actions...")).toElement().addContent(a({text:_("Mark all as read"),class:"mark-all-read"}),a({text:_("- Older than 1 day"),class:"mark-read-older-one-day"}),a({text:_("- Older than 2 days"),class:"mark-read-older-two-days"}),a({text:_("Mark all as unread"),class:"mark-all-unread"})).addEvent("click",function(t){var i=n.getElement(t);if(!i.hasClassName("disabled")){var s=i.className.match(/mark-all-read|mark-all-unread|mark-read-older-one-day|mark-read-older-two-days/);if(s){switch(s[0]){case"mark-all-read":u.log("reader","MarkAsRead");break;case"mark-read-older-one-day":u.log("reader","MarkAsReadOlderOneDay");break;case"mark-read-older-two-days":u.log("reader","MarkAsReadOlderTwoDays");break;case"mark-all-unread":u.log("reader","MarkAllAsUnread")}e.applyActionOnSelection(s[0])}}}),i},setTitle:function(e,n){var i=document.body.getElement("#smartreader-feeds-headerTitle");e.trim()||(e=" "),n?i.empty().addContent(t.createElement("a",{href:n,html:e.sanitizeHTML(),target:"_blank"})):i.setHTML(e)},updateHeaderTitle:function(){var t,e=this.datasource.getCurrentType(),n=this.datasource.getWidget(),i=this.datasource.getSection(),s=this.datasource.getProducer();if(["all","slow","saved","recentlyread"].includes(e))t=w[e].text;else if(n&&n.isMultiStream())t=s?s.getTitle():n.getMultiStreamTitle().sanitizeHTML();else if(s)t=n.getTitle().sanitizeHTML()||s.getTitle()||_("untitled");else{if(!i)throw new Error("Undefined context");var o=this.datasource.getGroup(),a=o&&this.datasource.getSectionGroupsInfos();t=i.title,o&&a.groupCount>1&&(t+=" - {0}".format(o.label.toUpperCase()))}this.setTitle(t,s&&s.isStream()&&s.getLink()),this.updateHeaderIcon(),this.updateHeaderTitleExtra()},updateHeaderIcon:function(){var e,n=this.datasource.getCurrentType(),i=this.datasource.getSection(),s=this.datasource.getWidget(),o=document.body.getElement("#smartreader-{0}-header .smartreader-section-icon".format(this.viewName));if(o){for(e in o.empty().removeClassName("uwa-icon"),w)w.hasOwnProperty(e)&&o.removeClassName(w[e].icon);var a;if(["all","slow","saved","recentlyread"].includes(n))o.addClassName("uwa-icon "+w[n].icon);else if(s?s.isMultiStream()?o.addClassName("uwa-icon").set("data-icon","7"):a=s.getProducers()[0].getFaviconURL():i&&(a=(i=this.datasource.getSection()).iconConfig||i.icon),a){var r=t.createElement("img");t.is(a,"object")?h.setIconSrc(r,a):r.setAttributes({src:a,alt:""}),o.setContent(r)}}},updateHeaderTitleExtra:function(){function e(t,e,n){var i=e.getTotalItemCount(),s=a.formatHumanNumber(i),o="";return e.getProducers().every(function(t){return t.isStream()})?o=i>0&&s:n&&(i>0&&(o+=_("{0} results").format(s)),n.isCached()&&(o+=" ({0})".format(r.formatRelativeTime(new Date(1e3*n.getComputedAtTimestamp()))))),o&&{tag:"span",class:"items-count",text:o}}return function(){var n=document.body.getElement("#smartreader-feeds-header .smartreader-header-title-extra"),i=this.datasource.getCurrentType(),o=this.datasource.getSection(),a=this.datasource.getWidget(),r=this.datasource.getProducer(),c=this.datasource.getItemList();if(!(a&&a.isMultiStream()&&r)){var u=[];if(o&&l.isReadOnly(o)||a&&a.isReadOnly())u.push(e(0,c,r));else{a||u.push(function(t){if(t&&("locked"===t.type||"private"===t.type))return{tag:"span",class:"uwa-icon type "+t.type,"data-icon":"private"===t.type?"₦":"Á"}}(o)),u.push(e(0,c,r)),u.push(function(e){if(e){var n=t.createElement("span",{class:"uwa-icon tooltip"});return new s(n,e,{root:document.body}),n}}(t.owns(w,i)&&w[i].tooltip));var h=null;a?h=a.isMultiStream()?"MultipleFeed":"Feed":o&&(h="ReaderView"),u.push(function(t){return t&&{tag:"span",class:"uwa-icon cogwheel",events:{click:function(){var e=document.body.getElement("#smartreader-feeds-container #tabOptions");if(!f.closeActive(e)){if(void 0===f[t])return;var n=new f[t];e.setContent(n.getContent()),n.open()}}}}}(h))}n.setContent(u),n.getParent().setStyle("padding-right",n.getSize().width)}}}(),updateHeader:function(){if(document.body.getElement("#smartreader-feeds-header")){var e=o.isAllowed("feed_reader")?document.body.getElement("#smartreader-feeds-showFilter"):document.body.getElement("#smartreader-feeds-action-switcher"),n=document.body.getElement("#smartreader-feeds-selection-actions"),i=document.body.getElement("#smartreader-feeds-mark-switcher"),s=t.is(this.datasource.viewForcedReadState()),a=this.datasource.getItemList(),r=a.canFlag("unread"),l=a.canFilter("unread"),c=this.datasource.getCurrentType();n.toggle(r&&!s),e.toggle(!s&&l),i.toggle("saved"===c),this.updateHeaderTitle()}},toggleFilter:function(t){var e=c.get("smartreader.onlyUnread");void 0!==t&&t===e||(document.body.getElement("#smartreader-feeds-showFilter").setText(e?_("Show only unread items"):_("Show all items")),this.datasource.UI.Feeds.main.toggleClassName("showOnlyUnread"),c.set("smartreader.onlyUnread",!e),c.save(),this.datasource.reinitItemLists())},applyActionOnSelection:function(t){var e,n=t.includes("-unread"),i=this.datasource,s=!1;!1===n&&"mark-all-as-unsaved"===t?(n="saved",this.showResetSavedConfirm()):!1===n?n="unread":(n="unread",s=!0),e="mark-read-older-one-day"===t?1:"mark-read-older-two-days"===t?2:void 0,i.flagCurrentView(n,s,e),c.get("smartreader.onlyUnread")&&this.refreshCurrentView()},showResetSavedConfirm:function(){new y({titleText:_("Confirmation"),message:_("Mark all articles as unsaved?"),confirm:{text:_("Confirm")},events:{onConfirm:this.resetSavedArticles.bind(this)}}).show()},resetSavedArticles:function(){var t=o.Page.id;p.streamsResetSaved({pageId:t}).done(this.buildView.bind(this,this.getViewForContext()))},getRenderer:function(t){return this.currentView&&this.currentView.getRenderer(t)},addFeedRow:function(e){var n=e.getProducers()[0].getId(),i=t.createElement("li",{class:"nv-treeview-feed",html:{tag:"div",class:"nv-treeview-row feed-"+n,"data-action":"display:widget:"+e.getId(),"data-widget-id":e.getId(),"data-producer-id":n,"uwa-tooltip":e.getTitle().sanitizeHTML(),html:[{tag:"span",class:"icon nv-treeview-rowIcon"},{tag:"span",class:"nv-treeview-label",html:e.getTitle().sanitizeHTML()},{tag:"span",class:"nv-treeview-unread"}]}});return this.datasource.injectRow(i,e),i},addMultiplefeedsRow:function(e){var n=t.createElement("li",{class:"nv-treeview-multiplefeeds",html:'<div class="nv-treeview-row" uwa-tooltip="'+e.getMultiStreamTitle().sanitizeHTML()+'" data-action="display:widget:'+e.getId()+'" data-widget-id="'+e.getId()+'"><span class="nv-treeview-multiplefeedsToggle uwa-icon" data-action="toggle-multistream:'+e.getId()+'"></span><span class="nv-treeview-label uwa-icon">'+e.getMultiStreamTitle().sanitizeHTML()+'</span><span class="nv-treeview-unread"></span></div><ul class="nv-treeview-multiplefeedsList"></ul>'});return this.datasource.injectRow(n,e),n},addSectionRow:function(e){var n,i="section-"+e.id,s=e.type?" uwa-icon nv-treeview-section-"+e.type:"";if(!document.getElementById(i)){var a=e.ownerId&&e.ownerId!==o.User.id?" read-only":"",r=+e.state?" active":"";n=t.createElement("li",{class:"empty nv-treeview-section"+r+s+a,id:i||"",html:[{tag:"div",class:"nv-treeview-row","data-section-id":e.id,"data-action":"display:section:"+e.id,"uwa-tooltip":e.title||"",html:[{tag:"span",class:"nv-treeview-rowToggle uwa-icon","data-action":"toggle-section:"+e.id},{tag:"span",class:"icon nv-treeview-rowIcon"},{tag:"span",class:"nv-treeview-label",html:e.title||"&nbsp;"},{tag:"span",class:"nv-treeview-unread"}]},{tag:"div",class:"nv-treeview-content",html:this.datasource.groups.map(function(t){return n=t.name,i=t.label,{tag:"div",class:"nv-treeview-group empty nv-treeview-group-"+n,html:[{tag:"div",class:"nv-treeview-group-header uwa-icon nv-treeview-row","data-group":n,html:[{tag:"span",class:"nv-treeview-label",text:i},{tag:"span",class:"nv-treeview-unread"}],"data-action":"display:section-"+n+":"+e.id,"data-section-id":e.id},{tag:"ul",class:"nv-treeview-group-content nv-treeview-"+n}]};var n,i})}]}),this.datasource.UI.mainTreeView.getElement(".nv-treeview-container").grab(n),this.updateSectionIcon(e.id)}},updateSectionIcon:function(e){var n=this.datasource.getSection(e),i=this.datasource.UI.mainTreeView.getElement("#section-"+n.id+" .nv-treeview-rowIcon"),s=n.iconConfig||n.icon;t.is(s,"object")?(h.setIconSrc(i,s),i.toggleClassName("no-icon",!1)):(i.setStyle("background-image","url("+(s||a.BLANK_IMAGE_URL)+")"),i.toggleClassName("no-icon",!s))},setNewItemsCounter:function(t){t&&this.datasource.showNotify({content:_("{0} new items").format(t),class:"simple"})},displayAllFeeds:function(){this.datasource.display("all")},_display:function(){var t=this.datasource.getWidget();return t&&this.datasource.toggleSection(t.getTabId(),!0),this.datasource.UI.sidebar.toggleClassName("type-all","all"===this.datasource.getCurrentType()),this.prepareContent(),this.buildView(this.getViewForContext()),!0},_displayMessage:function(t){return this.prepareContent(),this.datasource.UI.Feeds.container.empty().addContent({tag:"div",class:"nv-renderer-message nv-smallmessage",html:{tag:"p",text:t}}),!0},_setTreeRowFocus:function(){var t=this.datasource.getWidget(),e=this.datasource.getProducer();this.datasource.refreshSidebarFocus();var n=this.datasource.getCurrentTreeRow(),i=n&&n.getClosest(".nv-treeview-multiplefeeds");i&&t&&e&&t.isMultiStream()&&i.addClassName("multiplefeeds-active")},displayLoadingError:function(){this.datasource.showNotify({class:"error",content:_("Loading error")})},getViewForContext:function(){var t=this.datasource.getWidget(),e=this.datasource.getSection();return(t?t.getData().smview:e?e.view:c.get("smartreader."+this.datasource.getCurrentType()+"View"))||c.get("smartreader.view")||"list"},setViewForContext:function(t){var e=this.datasource.getWidget(),n=this.datasource.getSection(),i=this.datasource.getCurrentType();e?(e.getData().smview=t,e.save()):n?(n.view=t,p.tabUpdate({tabId:n.id,options:{view:t}}).done()):(["recentlyread","saved","slow","all"].includes(i)?c.set("smartreader."+i+"View",t):c.set("smartreader.view",t),c.save())},prepareContent:function(){this._setTreeRowFocus(),this._displayView(),this.updateHeader(),this.currentView&&(this.currentView.destroy(),this.currentView=null),this.currentItemList&&(this.currentItemList.stopUpdate(),this.currentItemList.removeEvents(this._itemListEvents))},buildView:function(t){var e=this;document.body.getElement("#smartreader-main").set("class",t+"View");var n=g[t],i=this.currentItemList,s=this.currentItemList=this.datasource.getItemList();i===s&&s.empty(),s.startUpdate(),s.addEvents(this._itemListEvents),this.currentViewLoadingError=!1;var o=this.currentView=new n({loadMore:function(t){if(s.hasMore()&&s.getProducers().length&&!e.currentViewLoadingError)return s.loadMore(t).catch(function(t){e.currentViewLoadingError=t||!0})},noItemMessage:function(){var t=s.getProducers(),n=1===t.length&&t[0].getError();if(n)return d.getErrorMessage("stream_"+n.code);var i={saved:_("No saved items."),recentlyread:_("No read items.")}[e.datasource.getCurrentType()];return 1!==t.length||t[0].isStatusFinish()||(i=_("Generating feed...")),i||(i=c.get("smartreader.onlyUnread")?_("No unread items."):_("There are no news in this feed.")),i},events:{onItemRendererToggleContent:function(t,e){e?b.open(t.getItem(),{rendererOptions:t.options,onClose:function(){this.currentView===o&&t.setFocus(!1)}.bind(this)}):b.close()}.bind(this)}});["saved","recentlyread"].includes(this.datasource.getCurrentType())&&s.empty();var a=s.getItems().slice(0,o.options.loadCountHint);a.length?this.addItemsInCurrentView(a,!1):s.loadMore(o.options.loadCountHint).done(function(){this.datasource.getProducer()&&s.loadItemCount().done(function(){this.updateHeader()}.bind(this))}.bind(this)),o.inject(this.datasource.UI.Feeds.container.empty())},addItemsInCurrentView:function(t,e){if(this.currentView){var n=this.datasource.getProducer(),i={};if(!n||!n.isStream()){var s=function(t){i[t]=this.getId()};this.datasource.getWidgets().forEach(function(t){t.getStreamIds().forEach(s,t)})}var o=function(t){var e=i[t.getStreamId()];return e&&function(){this.datasource.display("widget",e,t.getStreamId())}.bind(this)}.bind(this),a=this.datasource.viewForcedReadState(),r=!this.datasource.getProducer()||this.datasource.getProducer().isMultiSources();this.currentView.addItems(t.map(function(t){return{item:t,options:{forceReadState:a,showSource:r,itemList:this.currentItemList,openSingleView:o(t)}}},this),e)}},refreshCurrentView:function(){this.currentItemList&&this.currentItemList.empty()},closeActive:function(){var t=this.getRenderer();t&&t.setFocus(!1)},putFocusOnNextEntry:function(t){this.putFocusOnEntry("next",t)},putFocusOnPrevEntry:function(t){this.putFocusOnEntry("previous",t)},putFocusOnEntry:function(t,n){u.log("reader",e.capitalize(t));var s=this.getRenderer(t),o=t.includes("next");if(s)o?s.setFocus().scrollTo({smooth:n}):s.scrollTo({smooth:n}).setFocus();else if(o&&this.currentView){var a=this.currentView.getInnerElement(),r=a.scrollHeight-a.offsetHeight;n?i.smoothScroll(a,{top:r}):a.scrollTop=r}},switchView:function(t){t!==this.getViewForContext()&&(this.setViewForContext(t),this.buildView(t),u.log("reader","view"+t))},getRelativeTime:function(t){var e=Math.floor(+new Date/1e3)-t;return e<0?_("Doc, are you telling me you built a time machine?"):e<60?_("now"):e<3600?_("{0} min ago").format(Math.floor(e/60)):e<5400?_("about an hour ago"):e<86400?_("about {0} hours ago").format(Math.round(e/3600)):e<172800?_("yesterday"):_("{0} days ago").format(Math.round(e/86400))}})}.apply(e,i))||(t.exports=s)},function(t,e,n){"use strict";var i,s;i=[n(279),n(779),n(284)],void 0===(s=function(t,e,n){return{mosaic:n,list:t,expanded:e}}.apply(e,i))||(t.exports=s)},function(t,e,n){"use strict";var i,s;i=[n(0),n(5),n(14),n(771),n(773)],void 0===(s=function(t,e,n,i,s){var o=n.namespace("OpinionUI").addRules({close:{position:"absolute",top:"5px",right:"5px",cursor:"pointer",color:"#999",opacity:"0.5",transition:"opacity 0.3s",hover:{opacity:"1"}}}),a=t.h;return e.extend({init:function(t){this._parent(t),this.state={editor:t.editor},this.onViewerClick=this.onViewerClick.bind(this),this.onCloseClick=this.onCloseClick.bind(this)},componentWillReceiveProps:function(t){t.editor&&!0!==this.state.editor?this.setState({editor:!0}):t.toggle&&this.setState({editor:!this.state.editor})},render:function(t,e){var n,r=t.item.hasTags()||t.item.hasSuggestedTags();return e.editor?n=[a(s,{item:t.item},a("span",{class:"uwa-icon delete "+o("close"),title:_("Close"),onClick:this.onCloseClick}))]:r&&(n=a(i,{item:t.item,onClick:this.onViewerClick})),a("div",{},n)},onViewerClick:function(){this.setState({editor:!0})},onCloseClick:function(){this.setState({editor:!1})}})}.apply(e,i))||(t.exports=s)},function(t,e,n){"use strict";var i,s;i=[n(1),n(15),n(13),n(0),n(5),n(280),n(14)],void 0===(s=function(t,e,n,i,s,o,a){var r=a.namespace("OpinionViewer").addRules({root:{position:"relative",cursor:"pointer"},icon:{position:"absolute",top:"4px",left:0,cursor:"pointer",color:"#999"},labels:{display:"flex",marginLeft:"35px",overflow:"hidden"},label:{marginRight:"10px"},moar:{cursor:"pointer",lineHeight:"24px",whiteSpace:"nowrap"}}),l=i.h;return s.extend({init:function(t){var e;this._parent(t),this.onViewerClick=this.onViewerClick.bind(this),e=t.item.getTags().length?t.item.getTags():t.item.getSuggestedTags(),this.state={tags:e,visibleTags:e.length}},componentDidMount:function(){this._timeoutId=setTimeout(this._handleHasMore.bind(this),0)},componentWillUnmount:function(){clearTimeout(this._timeoutId)},componentDidUpdate:function(t,e){e.tags.length!==this.state.tags.length&&this._handleHasMore()},render:function(t,e){return l("div",{class:r("root"),onClick:this.onViewerClick},l("span",{class:"uwa-icon "+r("icon"),"data-icon":"4"}),l("div",{class:r("labels"),ref:function(t){this._labels=t}.bind(this)},e.tags.slice(0,e.visibleTags).map(function(t){return l(o,{style:r("label"),size:"small",readOnly:!0,key:t.id,name:t.name,sentiment:t.sentiment})}),l("a",{class:r("moar"),ref:function(t){this._more=t}.bind(this),style:{visibility:e.visibleTags===e.tags.length?"hidden":"visible"}},_("See more"))))},onViewerClick:function(){this.props.onClick()},_handleHasMore:function(){var i=t.extendElement(this._labels),s=t.extendElement(this._more),o=i.getSize().width-s.getSize().width,a=0;n.toArray(i.children).slice(0,-1).some(function(t,n){if((a+=e.getSize.call(t).width)>o)return this.state.visibleTags!==n&&this.setState({visibleTags:n}),!0},this)}})}.apply(e,i))||(t.exports=s)},function(t,e,n){"use strict";var i,s;i=[n(1),n(15),n(3),n(0),n(5),n(14)],void 0===(s=function(t,e,n,i,s,o){var a=o.namespace("DropDown").addRules({root:{position:"absolute",left:0,zIndex:1,after:{bottom:"100%",left:"35%",border:"solid transparent",content:" ",height:0,width:0,position:"absolute",pointerEvents:"none",borderColor:"rgba(236, 236, 236, 0)",borderBottomColor:"#d4d4d4",borderWidth:"6px",marginLeft:"-6px"}},inner:{backgroundColor:"#ececec"},rounded:{borderRadius:"5px"},global:{zIndex:1e5}}),r=i.h;return s.extend({init:function(t){this._parent(t),this.onClickOutsideEvent=this.onClickOutsideEvent.bind(this)},componentDidMount:function(){var n=t.extendElement(this.props.target);this._container.setStyle("top",n.getSize().height+6),e.addEvent.call(document,"click",this.onClickOutsideEvent,null,0,!0)},componentWillUnmount:function(){e.removeEvent.call(document,"click",this.onClickOutsideEvent,!0)},render:function(e){return r("div",{class:a("root",e.roundedCorners&&"rounded"),ref:function(e){this._container=t.extendElement(e)}.bind(this)},r("div",{class:a("inner",e.roundedCorners&&"rounded"),style:{"max-height":e.maxHeight,"overflow-y":e.maxHeight&&"auto"}},e.children))},onClickOutsideEvent:function(t){var e=(t&&n.getElement(t)).isInjected(this.base);this.props.onClickOutside&&!e&&this.props.onClickOutside()}})}.apply(e,i))||(t.exports=s)},function(t,e,n){"use strict";var i,s;i=[n(2),n(0),n(27),n(5),n(14),n(774),n(775),n(776),n(280),n(777)],void 0===(s=function(t,e,n,i,s,o,a,r,l,c){var u=s.namespace("OpinionEditor").addRules({root:{position:"relative",minWidth:"295px",backgroundColor:"#F4F2F2"},rowSeparator:{borderTop:"3px solid #fff"},rowContent:{display:"table-cell"},rowAdd:{paddingRight:"25px"},rowContentTop:{verticalAlign:"top"},rowOpinions:{paddingBottom:"5px"},opinions:{display:"flex",flexWrap:"wrap"},add:{display:"inline-block"},opinion:{marginRight:"10px",marginBottom:"10px"},suggestion:{backgroundColor:"#fff",border:"1px solid #ececec"},rowError:{position:"relative",backgroundColor:"#A12E2B",padding:"8px 25px 8px 40px",color:"#fff"},error:{fontSize:"12px"},closeError:{position:"absolute",top:"5px",right:"5px",opacity:"0.5",cursor:"pointer",transition:"opacity 0.3s",hover:{opacity:"1"}}}),h=e.h;return i.extend({init:function(t){this._parent(t),this.state={tags:t.item.getTags()},this.onChangeTags=this.onChangeTags.bind(this),this.onError=this.onError.bind(this),this.onCloseErrorClick=this.onCloseErrorClick.bind(this)},componentDidMount:function(){this.props.item.addEvent("onChange:tags",this.onChangeTags)},componentWillUnmount:function(){this.props.item.removeEvent("onChange:tags",this.onChangeTags)},render:function(e,i){var s=this.getTagsByUsers(),d=this.getFilteredSuggestedTags();return h("div",{class:u("root")},h(o,{style:u("rowAdd")},h(a,{icon:"4",label:_("Add")}),h("div",{class:u("rowContent")},h(c,{style:u("add"),item:e.item,onError:this.onError}))),i.error&&h("div",{class:u("rowError")},h("span",{class:u("error")},n.getErrorMessage(i.error)),h("span",{class:"uwa-icon delete "+u("closeError"),onClick:this.onCloseErrorClick})),i.tags.length>0&&h(o,{style:u("rowSeparator","rowOpinions")},h(a,{label:_("Existing")}),h("div",{class:u("rowContent","rowContentTop")},Object.keys(s).map(function(n,i,o){var a=s[n],l=String(n)!==String(t.User.id)||o.length>1;return h(r,{item:e.item,displayHeader:l,user:a.user,tags:a.tags,key:n,onError:this.onError})},this))),d.length>0&&h(o,{style:u("rowSeparator","rowOpinions")},h(a,{label:_("Suggested")}),h("div",{class:u("rowContent")},h("div",{class:u("opinions")},d.map(function(t){return h(l,{style:u("opinion","suggestion"),item:e.item,size:"medium",name:t.name,key:t.id,onError:this.onError})},this)))),e.children)},getTagsByUsers:function(){var t={};return this.state.tags.forEach(function(e){var n=String(e.user.id);t[n]||(t[n]={user:e.user,tags:[]}),t[n].tags.push(e)}),t},getFilteredSuggestedTags:function(){var t=this.props.item.getSuggestedTags();if(t.length){var e=this.state.tags.map(function(t){return t.name});t=t.filter(function(t){return e.indexOf(t.name)<0})}return t},onChangeTags:function(){this.setState({tags:this.props.item.getTags()})},onCloseErrorClick:function(){this.setState({error:null})},onError:function(t){this.setState({error:t})}})}.apply(e,i))||(t.exports=s)},function(t,e,n){"use strict";var i,s;i=[n(0),n(5),n(14)],void 0===(s=function(t,e,n){var i=n.namespace("OpinionEditorRow").addRules({root:{backgroundColor:"#F4F2F2",position:"relative",minHeight:"32px",padding:"15px 0"}}),s=t.h;return e.extend({render:function(t){return s("div",{class:"nv-opinion-row "+i("root",t.style)},t.children)}})}.apply(e,i))||(t.exports=s)},function(t,e,n){"use strict";var i,s;i=[n(0),n(5),n(14)],void 0===(s=function(t,e,n){var i=n.namespace("OpinionEditorRowLabel").addRules({root:{position:"relative",display:"table-cell",minWidth:"120px",lineHeight:"32px",verticalAlign:"top"},label:{marginLeft:"40px",fontSize:"12px"},icon:{position:"absolute",top:"0",left:"10px",color:"#999"}}),s=t.h;return e.extend({render:function(t){return s("div",{class:"nv-opinion-row-label "+i("root",t.style)},t.icon&&s("span",{class:"uwa-icon "+i("icon"),"data-icon":t.icon}),s("span",{class:i("label")},t.label))}})}.apply(e,i))||(t.exports=s)},function(t,e,n){"use strict";var i,s;i=[n(18),n(2),n(0),n(5),n(280),n(14)],void 0===(s=function(t,e,n,i,s,o){var a=o.namespace("OpinionEditorExisting").addRules({header:{display:"flex",alignItems:"center",lineHeight:"32px",paddingBottom:"5px"},userImg:{width:"24px",borderRadius:e.isIn3DDashboard()?"12px":"0"},userName:{fontSize:"12px",paddingLeft:"10px"},opinions:{display:"flex",flexWrap:"wrap"},opinion:{marginRight:"10px",marginBottom:"10px"}}),r=n.h;return i.extend({render:function(n){var i;return i=e.isIn3DDashboard()?t.format("{0}/api/user/getpicture/login/{1}/format/normal",e.get3DDService("3DSwym",e.get3DDPlatformId()),n.user.user_name||"_none_"):e.Config.urls.storage+"/"+n.user.id+"/32",r("div",{},n.displayHeader&&r("div",{class:a("header")},r("img",{class:a("userImg"),src:i}),r("span",{class:a("userName")},String(n.user.id)===String(e.User.id)?_("You"):n.user.display_name)),r("div",{class:a("opinions")},n.tags.map(function(t){return r(s,{style:a("opinion"),item:n.item,size:"medium",key:t.id,id:t.id,name:t.name,sentiment:t.sentiment,userId:t.user.id,onError:n.onError})})))}})}.apply(e,i))||(t.exports=s)},function(t,e,n){"use strict";var i,s;i=[n(16),n(43),n(6),n(0),n(5),n(11),n(14),n(395)],void 0===(s=function(t,e,n,i,s,o,a,r){var l=a.namespace("OpinionAdd").addRules({root:{},autocomplete:{position:"relative",display:"inline-block",marginRight:"10px"},icon:{position:"relative",top:"9px",cursor:"pointer",color:"#999",transition:"color 0.3s",hover:{color:"#777"},before:{fontSize:"40px"}},loading:{position:"absolute",display:"inline",right:"6px",top:"10px"}}),c=i.h;return s.extend({init:function(t){this._parent(t),this.state={chooseSentiment:!1},this.onSubmit=this.onSubmit.bind(this),this.onClickOutside=this.onClickOutside.bind(this),this.onSentimentSelected=this.onSentimentSelected.bind(this)},render:function(t,e){return c("div",{class:l("root",t.style)},c("div",{class:"nv-opinion-add "+l("autocomplete")},c(o.Autocomplete,{ref:function(t){this._autocomplete=t}.bind(this),adaptor:this.getAdaptor(),inputOptions:{attributes:{placeholder:_("Opinion")}},events:{onSetSuggestion:this.onSubmit,onSubmit:this.onSubmit}}),e.loading&&c(o.Spinner,{containerClass:l("loading"),delay:0,size:12,color:"#666"}),e.chooseSentiment&&c(r,{target:this._autocomplete.getControl().getContent(),onClickOutside:this.onClickOutside,selectSentiment:this.onSentimentSelected})),c("span",{class:"uwa-icon "+l("icon"),"data-icon":"3",title:_("Add"),onClick:this.onSubmit}))},getAdaptor:function(){var i=this;return this._adaptor||(this._adaptor=e.extend({_formatResult:function(t,e,n){return t.map(function(t){return{isRecent:n,fullValue:t.name,prefix:e}})},_getSuggestionsCategory:function(t,e){return{tag:"div",class:"category uwa-icon "+e,html:t.map(function(t){return{tag:"div",class:"suggestion",html:this.renderSuggestion(t)}},this)}},getSuggestions:function(e,s){var o=e.slice(0,s);return i.setState({loading:!0}),t.all([n.getRecentTagsList({prefix:o}),n.getTagsList({prefix:o})]).then(function(t){if(!i.isSentimentsDropdownOpen())return this._formatResult(t[0].slice(0,3),o,!0).concat(this._formatResult(t[1],o,!1))}.bind(this)).fin(function(){i.setState({loading:!1})}).fail(function(t){i.props.onError(t||"Fail to fetch suggestions")}).done()},renderSuggestions:function(t){var e=[],n=[];t.forEach(function(t){t.isRecent?n.push(t):e.push(t)});var i=[];return n.length&&i.push(this._getSuggestionsCategory(n,"recent")),e.length&&i.push(this._getSuggestionsCategory(e,"opinion")),i},renderSuggestion:function(t){if(t.fullValue.startsWith(t.prefix.toLowerCase())){var e=t.prefix.length;return[{tag:"strong",text:t.fullValue.slice(0,e)},t.fullValue.slice(e).escapeHTML()]}return this._parent(t)}})),this._adaptor},isSentimentsDropdownOpen:function(){return this.state.chooseSentiment},onSubmit:function(){var t=this._autocomplete.getControl();this.isSentimentsDropdownOpen()||!t.areSuggestionsDisplayed()&&t.getValue()&&this.setState({chooseSentiment:!0})},onClickOutside:function(){this.setState({chooseSentiment:!1})},onSentimentSelected:function(t){this.setState({chooseSentiment:!1,loading:!0}),this.props.item.addTag({name:this._autocomplete.getControl().getValue(),sentiment:t}).fin(function(){this.setState({loading:!1})}.bind(this)).done(function(){this._autocomplete.getControl().setValue("")}.bind(this),this.props.onError)}})}.apply(e,i))||(t.exports=s)},function(t,e,n){"use strict";var i,s;i=[n(6),n(0),n(5),n(14),n(99),n(11),n(70),n(149),n(191)],void 0===(s=function(t,e,n,i,s,o,a,r,l){var c=e.h,u=i.namespace("ItemRenderer").addRules({root:{backgroundColor:"#F4F2F2",fontSize:"12px",marginTop:10,padding:"10px 70px 2px 70px"},label:{float:"left",marginLeft:-115,padding:"2px 0",textTransform:"uppercase",width:115},section:{padding:"0 10px 8px 125px"},tag:{display:"inline-block",padding:"2px 5px",textDecoration:"none",hover:{color:"#333!important"}},btnMore:{textDecoration:"underline!important"},spinnerContainer:{margin:"0 auto",padding:"7px 115px 15px 0",width:16},noResult:{margin:"0 auto",padding:"7px 115px 15px 0",textAlign:"center"}});return n.extend({init:function(t){this._parent(t),this.setState({facets:null,loadingStatus:0}),this.facets=["organization","people","location","event"],this.loadMore=this.loadMore.bind(this),this.renderFacets=this.renderFacets.bind(this),this.renderSpinner=this.renderSpinner.bind(this)},loadMore:function(){var e=this;e.setState({loadingStatus:1}),t.itemFacets({itemId:e.props.itemId,facets:e.facets}).done(function(t){e.setState({facets:t,loadingStatus:2})},function(){e.setState({loadingStatus:0})})},onClickTag:function(t,e){var n={title:"",searchQuery:JSON.stringify({topic:l.buildQuery({value:e,type:t})})},i=r.process({moduleName:"SmartFilter",title:"",data:n});a.add(i,{showPreview:!0}).done()},renderSection:function(t,e,n){if(0===e.length)return null;var i=e.map(function(e){return c("a",{class:u("tag"),href:"#",onClick:this.onClickTag.bind(this,t,e)},e)},this);return n&&null===this.state.facets&&i.push(c("a",{class:u("tag","btnMore"),href:"#",onClick:this.loadMore},_("See more metrics"))),c("div",{class:u("section")},c("div",{class:u("label")},s.getFacetTitle(t)),c("div",null,i))},renderFacets:function(){var t=this,e=[];return this.facets.forEach(function(n){var i=t.state.facets&&t.state.facets[n]&&t.renderSection(n,t.state.facets[n]);i&&e.push(c("div",null,i))}),0===e.length&&2===this.state.loadingStatus?c("div",{class:u("noResult")},_("No more metrics found")):e},renderSpinner:function(){return c("div",{class:u("spinnerContainer")},c(o.Spinner,{autostart:!0,color:"#000000",size:20}))},render:function(t){var e=this.renderSection("theme",t.themes,!0),n=1===this.state.loadingStatus?this.renderSpinner():this.renderFacets();return e?c("div",{class:u("root")},c("div",{class:"nv-item-renderer-content-wrapper"},e,n)):null}})}.apply(e,i))||(t.exports=s)},function(t,e,n){"use strict";var i,s;i=[n(198),n(307)],void 0===(s=function(t,e){return t.extend({options:{loadCountHint:15},renderItem:function(t,n){return n.forceExpand=!0,new e(t,n)},addItems:function(t,e){var n=this._parent(t,e);if(!this.getRenderer()){var i=this.getRenderer("first");i&&i.setFocus(!0)}return n},updateLastRenderer:function(){var t=this.getRenderer("last");if(t){var e=t.getContent();this.previousLastElement&&this.previousLastElement!==e&&this.previousLastElement.setStyle("margin-bottom","");var n=0;e.nextSibling||(n=this.getContent().clientHeight-e.clientHeight),e.setStyle("margin-bottom",Math.max(0,n)),this.previousLastElement=e}},injectRenderers:function(t){this._parent(t),this.updateLastRenderer()},setMessage:function(t){this._parent(t),this.updateLastRenderer()}})}.apply(e,i))||(t.exports=s)},function(t,e,n){"use strict";var i,s;i=[n(1),n(3),n(0),n(5),n(2),n(44),n(153),n(234),n(281)],void 0===(s=function(t,e,n,i,s,o,a,r,l){var c=n.h,u=["#E8E8E6","#ECE9E1","#DEDCD6","#DADACB","#D8DFDF","#E3E1E9","#EEE4D8","#E4DBDD"];var h=a.extend({init:function(t,e){var n;this._parent(t,e),this._sizes={},this._onClick=this._onClick.bind(this),this._hasFocus=this.hasFocus.bind(this),this._storeComponent=this._storeComponent.bind(this),this._color=(n=u)[Math.floor(Math.random()*n.length)]},getSizes:function(){return this._sizes},getContainer:function(){return t.extendElement(this._component&&this._component.base)},updateDOM:function(){this._component&&this._component.forceUpdate()},render:function(t){return c(d,Object.assign({},t,{ref:this._storeComponent,key:this.getItem().getId(),item:this.getItem(),color:this._color,hasFocus:this._hasFocus,onClick:this._onClick,showFocusBar:this.options.showFocusBar}))},onFocusChange:function(t){this._parent(t),this.dispatchEvent("onToggleContent",t),t&&this.toggleReadFlag(!0),this.updateDOM()},_onClick:function(t){if(!(this.options.openOutside||!s.isAllowed("feed_reader")||!t))return this.setFocus(!this.hasFocus()),!1;this.toggleReadFlag(!0)},_storeComponent:function(t){this._component=t}}),d=i.extend({init:function(t){this._parent(t),this._onClick=this._onClick.bind(this),this._onMouseEnter=this._onMouseEnter.bind(this),this._onMouseLeave=this._onMouseLeave.bind(this)},componentWillMount:function(){this.state.image||(this.setState({imageStatus:1}),r.getThumbnail(this.props.item,this.props.tileSizes.width,this.props.tileSizes.height).done(function(t){this.setState({imageStatus:3,image:t})}.bind(this),function(){this.setState({imageStatus:2})}.bind(this)))},render:function(t,e){var n,i=t.item,o=e.image,a=e.hover||t.hasFocus(),r={display:"block",height:"100%",position:"relative",backgroundColor:t.color,transition:"opacity 0.2s",opacity:i.hasFlag("unread")||a?1:.6};return 3===e.imageStatus&&Object.assign(r,{backgroundImage:"url("+JSON.stringify(o.link)+")",backgroundSize:"cover",backgroundPosition:"center center"}),2===e.imageStatus?n=this._renderItemContent(!0,!1):3===e.imageStatus&&(n=this._renderItemContent(a,!0)),c("div",{style:Object.assign({position:"absolute",padding:this.props.margin,boxSizing:"border-box"},t.style)},c("a",{href:i.getLink(),style:r,onClick:this._onClick,onMouseEnter:this._onMouseEnter,onMouseLeave:this._onMouseLeave},c("div",{style:{position:"absolute",display:"block",width:"100%",height:"100%",boxShadow:"inset 0 0 30px rgba(0, 0, 0, .2)",pointerEvents:"none"}}),t.hasFocus()&&t.showFocusBar&&c("div",{style:{position:"absolute",top:0,left:-12,bottom:0,width:4,backgroundColor:s.isIn3DDashboard()?"#368EC4":"#81c147"}}),this._renderFlags(2===e.imageStatus||!a),n))},componentDidMount:function(){this._truncateContent()},componentDidUpdate:function(){this._truncateContent()},_renderItemContent:function(t,e){var n=this.props.item,i=n.getPublishDate(),a=!t||!e,r=this._renderFlags(a),l=s.isIn3DDashboard(),u=a&&r?30:0;return[r,c("div",{style:{position:"absolute",bottom:0,left:0,right:0,top:t?u:"calc(100% - 30px)",transition:e?"top 0.6s":"",color:e?"#fff":"#000",backgroundColor:e?"rgba(17, 17, 17, 0.8)":"",lineHeight:"1.3",padding:l?"6px 10px":"8px 10px",overflow:"hidden"}},c("div",{style:{overflow:"hidden",height:this.props.style.height-2*this.props.margin-16-u},ref:function(t){this._truncator=t}.bind(this)},c("div",{style:{whiteSpace:t?"normal":"nowrap",textOverflow:"ellipsis",overflow:"hidden",fontSize:l?"16px":"14px",fontWeight:l?"bold":"",fontFamily:l?"'3dsregular', Arial, Helvetica, sans-serif":""}},c("span",{dangerouslySetInnerHTML:{__html:n.getTitle().sanitizeHTML()}})),t&&c("div",{style:{margin:"5px 0",fontSize:"11px"}},c("span",{},o.formatLocalizedDate(i,"date")+" ● "+o.formatLocalizedDate(i,"time"))),t&&c("div",{style:{margin:"5px 0",fontSize:"13px"}},c("span",{dangerouslySetInnerHTML:{__html:n.getContent().sanitizeHTML()}}))))]},_renderFlags:function(t){var e=this.props.item,n={display:"inline-block",backgroundColor:"#FFF",textAlign:"center",height:"30px",width:"30px",lineHeight:"30px",marginLeft:"3px"};function i(t,e){return c("div",{style:Object.assign({color:t},n),class:"uwa-icon","data-icon":e})}var o,a,r=[];return e.hasFlag("saved")&&r.push(i("#8AC500","8")),s.isAllowed("tag")&&(e.hasTags()?r.push(i(s.isIn3DDashboard()?"#2f8cc4":"#84bd00","4")):e.hasSuggestedTags()&&r.push((o="#999999",a="bookmark_outline",c(l,{style:Object.assign({color:o,fill:o},n),svgStyle:{verticalAlign:"middle",width:"21px"},icon:a})))),e.getEnclosuresByType("audio").length>0&&r.push(i("#999999","M")),r.length>0&&c("div",{style:{position:"absolute",top:"0",right:"0",transition:"opacity 0.2s",opacity:t?1:0}},r)},_onClick:function(t){var n=e.whichButton(t)<=0,i=!!e.whichKey(t);!1===this.props.onClick(n&&!i)&&e.stop(t)},_onMouseEnter:function(){this.setState({hover:!0})},_onMouseLeave:function(){this.setState({hover:!1})},_truncateContent:function(){if(this._truncator)for(var t=this._truncator.getBoundingClientRect(),e=this._truncator.querySelectorAll("span"),n=0;n<e.length;n+=1)for(var i=e[n].getClientRects(),s=0;s<i.length;s+=1)if(i[s].bottom>t.bottom)return void(this._truncator.style.height=i[s].top-t.top+"px")}});return h}.apply(e,i))||(t.exports=s)},,,,function(t,e,n){"use strict";var i,s;i=[n(1),n(53),n(58),n(103),n(96),n(70),n(285),n(118),n(104),n(140)],void 0===(s=function(t,e,n,i,s,o,a,r,l,c){var u=".nv-treeview-section:not(.read-only)";return function(){var h,d=document.body.getElement("#smartreader-mainTreeView .nv-treeview-container"),p=0,m=new c(document.body),f={centerHandles:!0,handles:function(n){if(l.toggleDropdownState(!0),n.widgetData&&!t.is(n.target,"boolean")&&n.target.getClosest(".panel-tab-module").addClassName("dragndrop"),!h){var s=e.getParentScrollable(d);h=new c(s,{events:{onChange:function(t,e){var n=this.element;n.offsetTop!==e&&(n.scrollTo(0,e),p=Date.now())}}})}var o=n.widgetData;if(o)switch(o.type){case"search":case"stream":n.type=o.type;break;default:switch((o.moduleName||o.name||"").toLowerCase()){case"smartfilter":n.type="search";break;case"rssreader":case"extendedvibes":case"multiplefeeds":n.type="stream";break;default:n.type="widget"}}else{var r=i.fromElement(n.target);n.module=r,n.type=r.isSearch()?"search":r.isStream()?"stream":"widget"}return n.placeholder=t.createElement("li",{id:"dropIndicator"}),n.options.zones=u+","+u+" "+g(n),a.readerClassNames(n),a.createHandles(n)},enter:function(e){var n=t.extendElement(e.zone);if(n.hasClassName("nv-treeview-streams")||n.hasClassName("nv-treeview-searches"))return e.placeholder;if(n.hasClassName("nv-treeview-section")){n.hasClassName("active")||(e.sectionTimeout=setTimeout(function(){n.addClassName("active"),e.refreshCache()},500));var i=n.getElement(g(e)),s=i&&i.getChildren()[0];!i||s&&e.target.isInjected(s)||i.grab(e.placeholder,"top")}else if(n.hasClassName("nv-treeview-widgets"))return e.placeholder},leave:function(t){clearTimeout(t.sectionTimeout)},move:function(t){h.getCoords(t.currentEvent),p&&p<Date.now()-100&&(t.refreshCache(),p=!1),t.widgetData&&m.getCoords(t.currentEvent)},drop:function(t){if(l.toggleDropdownState(!1),t.placeholder.getParent()){var e={before:t.placeholder};t.module?s.changePosition(t.module,e):o.add(t.widgetData,e).done()}},stop:function(e){l.toggleDropdownState(!1),e.widgetData&&!t.is(e.target,"boolean")&&e.target.getClosest(".panel-tab-module").removeClassName("dragndrop"),a.readerClassNames(e,!0),h.stop(),m.stop(),e.handles.destroy(),e.placeholder.destroy(),r.refreshEmptyStatuses()}};function g(t){return"stream"===t.type?".nv-treeview-streams":"search"===t.type?".nv-treeview-searches":".nv-treeview-widgets"}return new n.Move(Object.assign({},f,{root:null,delegate:u+" .nv-treeview-streams *,"+u+" .nv-treeview-searches *,"+u+" .nv-treeview-widgets *"})),new n.Move(Object.assign({},f,{delegate:".create-widget,.create-widget *",start:function(e){var n=t.extendElement(e.target).getClosest(".create-widget");return e.widgetData=a.getWidgetData(n),!!e.widgetData}}))}}.apply(e,i))||(t.exports=s)},function(t,e,n){"use strict";var i,s;i=[n(1),n(53),n(58),n(140),n(285),n(118),n(21)],void 0===(s=function(t,e,n,i,s,o,a){var r=".nv-treeview-section:not(.read-only)";return function(){var o,l=document.body.getElement("#smartreader-mainTreeView .nv-treeview-container");new n.Move({root:l,delegate:r+">.nv-treeview-row,"+r+">.nv-treeview-row *",zones:r,handles:function(n){if(!o){var a=e.getParentScrollable(l);o=new i(a)}n.type="tab",n.target=t.extendElement(n.target).getClosest(".nv-treeview-section"),s.readerClassNames(n),n.previous=n.target.previousSibling},enter:function(t){var e=t.zones.indexOf(t.zone),n=t.zones.indexOf(t.target);e!==n&&(t.zone.grab(t.target,e<n?"before":"after"),t.refreshCache())},move:function(t){o.getCoords(t.currentEvent)},stop:function(t){s.readerClassNames(t,!0),o.stop(),a.move(t.target.id.slice(8),t.zones.indexOf(t.target))}})}}.apply(e,i))||(t.exports=s)},function(t,e,n){"use strict";var i,s;i=[n(1),n(15),n(58),n(108),n(19),n(2),n(96),n(17),n(70),n(21),n(215),n(396),n(285),n(104),n(176),n(140)],void 0===(s=function(t,e,n,i,s,o,a,r,l,c,u,h,d,p,m,f){return function(){var g=t.extendElement(document.body),v=g.getElement("#main-container"),b=new f(document.body,{events:{onChange:function(t,e){var n=this.element;n.offsetTop!==e&&n.scrollTo(0,e)}}});function y(e){var n=t.extendElement(e).getClosest(".module");return r.getById(n.id.slice(2))}function w(t,e){var n,i=t.zone;if(i&&t.custom&&i.matchesSelector(t.custom.droppables))return n=y(i).content,i.toggleClassName("nv-droppable-custom-enter","dropEnter"===e),n[e]&&n[e](i,t.handles,t.custom.data),!0}function x(){var t=u.getColumnsByRows();t.forEach(function(e,n){var i=n===t.length-1,o=function(t,e){var n=0;return t.forEach(function(t){var i=t.getAttribute("colnum");if(e||u.hasColumnBelow(i)){var s=t.getSize().height;n<s&&(n=s)}}),n}(e,i);e.forEach(function(t){var e,n,a,r,l=t.getAttribute("colnum"),c=t.getSize().height,h=u.getDeltaColumn(l),d=(e=v.getSize().height,n=s.getSize().height,a=g.getStyle("padding-bottom"),n-e-(a=parseInt(a.slice(0,-2),10))),p=d<0;!i&&u.hasColumnBelow(l)?r=o:(r=c+h,p||(r+=d)),t.setStyle("min-height",r)})})}function C(t){return!(w(t,"drop")||!t.placeholder.getParent()&&!t.overTab)}var S={centerHandles:!0,overlay:!0,container:document.body,start:function(e){e.options.zones=function(){var n=[],i=t.extendElement(document.body);return n=(n=(n=(n=(n=(n=n.concat(i.getElement("#dragOpenMenuTabs"))).concat(i.getElements("#divTabs.with-scroller > .nv-tabs-right, #divTabs.with-scroller > .nv-tabs-left"))).concat(i.getElements("#menuTabsScrollPrev, #menuTabsScrollNext"))).concat(i.getElements("#divTabs ul > li"))).concat(i.getElements("#columns > .column"))).concat(i.getElements("#columns > .column > .module")),e.custom&&e.custom.droppables&&(n=n.concat(i.getElements(String(e.custom.droppables)))),n}},handles:function(e){return p.toggleDropdownState(!0),document.body.getElement("#modulesArea").addClassName("editMode"),e.lightbox=new i({fxOptions:{duration:0}}),r.getAll().forEach(function(t){h.isComparableWith(t,e.module)}),x(),e.placeholder=t.createElement("div",{id:"moduleGhost",styles:{height:e.module?e.module.elm_module.getSize().height:200}}),d.createHandles(e)},move:function(t){b.getCoords(t.currentEvent)},stop:function(e){p.toggleDropdownState(!1),b.stop(),document.body.getElement("#modulesArea").removeClassName("editMode"),document.body.getElement("#modulesArea").removeClassName("compareMode"),e.zone&&e.zone.removeClassName("drop-widget-target"),e.placeholder.destroy(),e.handles.destroy(),e.lightbox.destroy(),clearTimeout(e.tabTimeout),m.hideAllTabsPopup(),t.extendElement(document.body).getElements("#columns > .column").forEach(function(t){t.setStyle("min-height","")})},drop:function(){p.toggleDropdownState(!1)},cancel:function(t){p.toggleDropdownState(!1),w(t,"dropCancel")},enter:function(t){var e=t.zone.getAttribute("data-tabId"),n=e?c.getById(e):c.getFocused();if(t.zone.addClassName("drop-widget-target"),!w(t,"dropEnter"))if(t.lightbox.close(),t.zone.match(".nv-tabs-right"))m.getScroller().autoScrollNext();else if(t.zone.match(".nv-tabs-left"))m.getScroller().autoScrollPrevious();else if("menuTabsScrollNext"===t.zone.id)m.getAllTabsPopupScroller()&&m.getAllTabsPopupScroller().autoScrollNext();else if("menuTabsScrollPrev"===t.zone.id)m.getAllTabsPopupScroller()&&m.getAllTabsPopupScroller().autoScrollPrevious();else if("dragOpenMenuTabs"===t.zone.id)m.showAllTabsPopup();else if(t.module&&t.zone.match(".module")&&t.zone!==t.target&&t.zone.match(".comparable")){t.overModule=!0;var i=t.module.getTitle(),s=y(t.zone).getTitle();"Library"!==y(t.zone).dataObj.moduleName&&(i=y(t.zone).getTitle(),s=t.module.getTitle());var o=_("Dropping this here will add '{0}' in '{1}'.").format(i,s);document.body.getElement("#modulesArea").removeClassName("editMode"),t.lightbox.getContent().toggleClassName("nv-compare-allowed",!0),t.lightbox.setContent({tag:"div",text:o}).inject(t.zone.getElement(".moduleContent")).open(),t.zone.addClassName("highlight")}else{if(t.zone.match(".column"))return t.placeholder;n&&!n.isReadOnly()&&(t.overTab=e,t.tabTimeout=setTimeout(function(){c.focusTab(e),t.selectedTabChanged=!0,t.overTab=!1;var n=document.body.getElement("#columns .column");n.getElement(".module:not(.hidden)")!==t.target&&t.placeholder.inject(n,"top"),t.refreshCache()},1e3))}},leave:function(t){var e,n;t.zone.removeClassName("drop-widget-target"),w(t,"dropLeave"),t.overTab=!1,t.placeholder.remove(),t.lightbox.close(),clearTimeout(t.tabTimeout),t.zone.match(".column")?t.selectedTabChanged&&(m.hideAllTabsPopup(),t.selectedTabChanged=!1):("dragOpenMenuTabs"===t.zone.id&&t.refreshCache(),e=m.getScroller().stopScroll(),n=m.getAllTabsPopupScroller()&&m.getAllTabsPopupScroller().stopScroll(),(e||n)&&t.refreshCache())}},E=t.extend(t.extend({},S),{delegate:".moduleHeaderContainer *",start:function(t){var e,n;return S.start(t),t.module=y(t.target),(e=!!t.module&&t.module.elm_module)&&(e=!!(n=t.module.getTab())&&!n.isReadOnly()),t.target=t.target.getClosest(".module").addClassName("highlight"),e},drop:function(t){if(S.drop(t),C(t)){var e=t.overTab?{tab:t.overTab}:{before:t.placeholder};a.changePosition(t.module,e)}if(t.overModule){var n=y(t.zone);return!(!n||!h.compareWith(n,t.module))}},leave:function(t){t.overModule=!1,t.zone!==t.target&&t.zone.removeClassName("highlight"),S.leave(t)}}),k=t.extend(t.extend({},S),{delegate:".create-widget,.create-widget *",allowBesidePlaceholder:!0,start:function(e){var n=t.extendElement(e.target).getClosest(".create-widget");return S.start(e),e.widgetData=d.getWidgetData(n),e.widgetData&&Array.isArray(e.widgetData)&&(e.tabWidgetData=e.widgetData,e.widgetData=e.widgetData[0]),e.widgetData?e.widgetData.custom&&(e.custom=e.widgetData.custom,e.options.zones+=","+e.custom.droppables):n=!1,e.target=n,n},handles:function(e){if(e.widgetData&&!t.is(e.target,"boolean")){var n=e.target.getClosest(".panel-tab-module");n&&n.addClassName("dragndrop")}return e.custom&&e.root.getElements(e.custom.droppables).invoke("addClassName","nv-droppable-custom"),S.handles(e)},stop:function(e){if(e.widgetData&&!t.is(e.target,"boolean")){var n=e.target.getClosest(".panel-tab-module");n&&n.removeClassName("dragndrop")}e.custom&&e.root.getElements(e.custom.droppables).invoke("removeClassName","nv-droppable-custom"),S.stop(e)},drop:function(t){if(S.drop(t),C(t)){var e=t.overTab?{tab:t.overTab}:{before:t.placeholder};t.tabWidgetData?t.tabWidgetData.forEach(function(t){l.add(t,e).done()}):l.add(t.widgetData,e).done()}}}),T=new n.Move(E),A=new n.Move(k);return new n.Move({centerHandles:!0,overlay:!0,delegate:".compare-widget,.compare-widget *",root:document.body.getElement("#application"),zones:"#columns > .column > .module, #divTabs ul > li, #divTabs.with-scroller > .nv-tabs-right, #divTabs.with-scroller > .nv-tabs-left",start:function(n){var i=t.extendElement(n.target).getClosest(".compare-widget");return n.widgetData=e.getData.call(i,"widget-data")||!1,!!n.widgetData},handles:function(t){return document.body.getElement("#modulesArea").addClassName("compareMode"),t.target=t.target.getClosest(".module").addClassName("highlight"),t.lightbox=new i({fxOptions:{duration:0}}),t.selfLightbox=new i({className:"nv-compare-self",fxOptions:{duration:0}}).setContent({tag:"div",text:_("Select the chart to be dragged, drag to the desire chart to be compared then release.")}).inject(t.target.getElement(".moduleContent")).open(),t.module=y(t.target),r.getAll().forEach(function(e){h.isComparableWith(e,t.module)}),d.createHandles(t)},move:function(t){b.getCoords(t.currentEvent)},enter:function(t){var e,n=t.zone.getAttribute("data-tabId"),i=t.zone.match(".comparable");t.zone.match(".module")?t.zone!==t.target&&(e="SearchTrends"===y(t.zone).dataObj.moduleName?_("Dropping this here will add the selected Facebook Page to the current trends list. If that's not what you intended, simply drag the app outside and release to cancel."):_('Dropping this here will generate a new app comparing "{0}" to "{1}". If that\'s not what you intended, simply drag the app outside and release to cancel.').format(t.module.getTitle(),y(t.zone).getTitle()),t.lightbox.close(),t.lightbox.getContent().toggleClassName("nv-compare-allowed",i).toggleClassName("nv-compare-forbidden",!i),t.lightbox.setContent({tag:"div",text:i?e:_("Sorry {0}, I'm afraid I can't do that").format(o.User.displayName||_("Anonymous"))}).inject(t.zone.getElement(".moduleContent")).open(),t.zone.addClassName("highlight")):t.zone.match(".nv-tabs-right")?m.getScroller().autoScrollNext():t.zone.match(".nv-tabs-left")?m.getScroller().autoScrollPrevious():c.getById(n).isReadOnly()||(t.overTab=n,t.tabTimeout=setTimeout(function(){c.focusTab(n),t.overTab=!1,t.refreshCache()},1e3))},leave:function(t){t.overTab=!1,t.zone!==t.target&&t.zone.removeClassName("highlight"),t.lightbox.close(),clearTimeout(t.tabTimeout),t.zone.match(".column")||m.getScroller().stopScroll()&&t.refreshCache()},drop:function(t){var e=y(t.zone);return!(!e||!h.compareWith(e,t.module))},cancel:function(t){w(t,"dropCancel")},stop:function(t){t.selfLightbox.destroy(),t.lightbox.destroy(),b.stop(),document.body.getElement("#modulesArea").removeClassName("compareMode"),t.handles.destroy(),clearTimeout(t.tabTimeout)}}),{refreshCache:function(){T.refreshCache(),A.refreshCache()}}}}.apply(e,i))||(t.exports=s)},function(t,e,n){"use strict";var i,s;i=[n(1),n(3),n(10),n(88),n(2),n(165),n(397),n(788),n(399)],void 0===(s=function(t,e,n,i,s,o,a,r,l){var c=t.createElement;return n.extend({name:"nv-export",init:function(t){this._parent(t),this.build()},build:function(){this.elements.container=c("div",{class:this.getClassNames(),html:[c("span",{class:"uwa-icon","data-icon":"b"}),c("span",{class:"uwa-icon","data-icon":"D"})]}),this.elements.container.addEvent("mouseenter",this.showDropdown.bind(this)),this.elements.container.addEvent("mouseleave",this.hideDropdown.bind(this))},showDropdown:function(){if(!this.dropdown){this.dropdown=new i({position:this.elements.container.getPosition(null,{x:"left",y:"bottom"})}).inject(this.elements.container);var e=[t.createElement("li",{"data-export":"csv",text:_("Export as a CSV")})];s.isIn3DDashboard()&&s.isIn3DDPreview()||e.unshift(t.createElement("li",{"data-export":"image",text:_("Export as an image")})),s.isIn3DDashboard()&&!s.isIn3DDPreview()&&e.push(t.createElement("li",{"data-export":"swym",text:_("Publish to 3DSwym")})),this.dropdown.getInnerElement().setContent(t.createElement("ul",{html:e})),this.dropdown.addEvent("onClick",this.onDropdownClick,this)}this.dropdown.show()},hideDropdown:function(){this.dropdown.hide()},exportImage:function(){this.dispatchEvent("onExportStart"),a.generateImage(this.options.widgetId,this.options.pageId).fin(function(){this.dispatchEvent("onExportEnd")}.bind(this)).done(function(t){a.dowloadImage(t,this.options.fileName)}.bind(this),function(){l.show(_("Error during image generation, please try again later."),l.ERROR)})},exportToSwym:function(){this._exportLoading(a.generateImage(this.options.widgetId,this.options.pageId,{format:"jpeg",hooks:["swym"]})).done(function(e){new r({widgetId:this.options.widgetId,thumbnail:e,title:t.result(this.options,"swymTitle",""),description:t.result(this.options,"swymDesc","")}).show()}.bind(this),function(){l.show(_("Error during image generation, please try again later."),l.ERROR)})},exportCsv:function(){this._exportLoading(this.options.csvExportFunction()).done(function(t){o(new Blob([t],{type:"text/csv"}),"netvibes-"+(new Date).strftime("%Y-%m-%d")+".csv")},function(){l.show(_("Error during csv generation, please try again later."),l.ERROR)})},_exportLoading:function(t){return this.dispatchEvent("onExportStart"),t.fin(function(){this.dispatchEvent("onExportEnd")}.bind(this))},onDropdownClick:function(t){switch(e.getElement(t).getAttribute("data-export")){case"image":this.exportImage();break;case"csv":this.exportCsv();break;case"swym":this.exportToSwym()}}})}.apply(e,i))||(t.exports=s)},function(t,e,n){"use strict";var i,s;i=[n(9),n(22),n(16),n(1),n(25),n(13),n(17),n(2),n(399)],void 0===(s=function(t,e,n,i,s,o,a,r,l){return t.extend(e,{init:function(t){this.setOptions(t)},show:function(){this._buildForm().done(function(t){t.render(this._getOverlay())}.bind(this))},onStartUpload:function(t){var e,n=JSON.parse(t);this._searchEnclosure().then(function(t){return e=t,this._retrieveEnclosure(e)}.bind(this)).then(function(t){return this._addMedia(t,n,e).then(function(t){this._createContent(t)}.bind(this))}.bind(this)).fail(function(t){return window.console&&window.console.error("Fail to upload media : ",t),this._addDefaultMedia(n).then(function(t){this._createContent(t)}.bind(this))}.bind(this)).done(null,function(t){window.console&&window.console.error("Fail to upload default media : ",t),l.show(_("An error occured during media upload."),l.ERROR),this._removeOverlay()}.bind(this))},_searchEnclosure:function(){return n.resolve(this.options.thumbnail).then(function(t){return t||this._getDefaultEnclosureUrl()}.bind(this)).fail(function(){return this._getDefaultEnclosureUrl()}.bind(this))},onCancelShare:function(){this._removeOverlay()},onContentCreated:function(t){JSON.parse(t).success?l.show(_("Successfully published."),l.SUCCESS):l.show(_("An error occured during content creation."),l.ERROR),this._removeOverlay()},_getOverlay:function(){if(!this._overlay){var t=a.getById(this.options.widgetId),e=t?t.getWidget():widget;this._overlay=i.createElement("div",{class:"nv-share-overlay nv-swym-share-overlay",html:[i.createElement("div",{class:"nv-swym-share-title",html:[i.createElement("i",{class:"uwa-icon","data-icon":"q"}),i.createElement("span",{text:_("Publish to Swym")})]}),i.createElement("div",{class:"nv-swym-share-form"})]}),this._overlay.inject(e.body)}return this._overlay.getElement(".nv-swym-share-form")},_removeOverlay:function(){this._overlay.destroy()},_buildForm:function(){var t=this;return new n(function(e){parent.require(["DS/SwymPublishForm/script/publish-form-view"],function(n){var i=a.getById(t.options.widgetId),s=new n({platformId:i&&i.getPlatformId()||r.get3DDPlatformId(),mode:"jsevent",content_title:t.options.title.unescapeHTML(),content_description:t.options.description.unescapeHTML()});s.addEvents({CancelShare:t.onCancelShare.bind(t),StartUpload:t.onStartUpload.bind(t),ContentCreated:t.onContentCreated.bind(t)}),t._form=s,e(t._form)})})},_retrieveEnclosure:function(t){return new n(function(e,n){t=t.replace(/ /g,"%20"),s.request(t,{type:"blob",onComplete:function(t){e(t)},onCancel:n,onFailure:n,onTimeout:n})})},_addMedia:function(t,e,i){var s,a=this,r=e.platform_instance+"/api/media/add",l=new FormData,c=o.getUUID()+"."+(function(t){var e={"image/png":"png","image/x-png":"png","image/jpeg":"jpg","image/pjpeg":"jpg","image/gif":"gif","image/bmp":"bmp","image/tiff":"tiff","image/vnd.microsoft.icon":"ico","image/x-icon":"ico","mage/svg+xml":"svg"};if(t.type&&e[t.type])return e[t.type];var n=o.parseUrl(t.url);if(n.fileName){var i=n.fileName.match(/.*\.(.*)/);if(i)return i[1]}return!1}({url:i,type:t.type})||"jpg");for(var u in s=new Blob([t],{type:t.type}),l.append("userFile",s,c),l.append("published",1),"media"!==e.content_type&&l.append("is_illustration","true"),e)e.hasOwnProperty(u)&&l.append(u,e[u]);return a._uploadMedia(r,l).fail(function(t){return"ERROR_FILE_FORMAT_UNAUTHORIZED"===t.errorcode&&i!==a._getDefaultEnclosureUrl()?a._addDefaultMedia(e):n.reject(t)})},_addDefaultMedia:function(t){var e=this._getDefaultEnclosureUrl();return this._retrieveEnclosure(e).then(function(n){return this._addMedia(n,t,e)}.bind(this))},_uploadMedia:function(t,e){return new n(function(n,i){window.require(["DS/WAFData/WAFData"],function(s){s.authenticatedRequest(t,{method:"POST",data:e,type:"json",onComplete:function(t){if(t.errorcode)return i(t);n(t.result.id)},onFailure:i,onCancel:i,onTimeout:i})})})},_createContent:function(t){var e=this._form,n=e.getControl("descriptionInput").getValue();e.setContentDescription(this._wrapContent(n)),e.createContent(t)},_wrapContent:function(t){return this.options.descWrapper?this.options.descWrapper(t):t},_getDefaultEnclosureUrl:function(){return r.Config.urls.startpage+"/img/3dd/nophoto.jpg"}})}.apply(e,i))||(t.exports=s)},function(t,e,n){"use strict";var i,s;i=[n(1),n(58),n(21),n(176)],void 0===(s=function(t,e,n,i){return function(){new e.Move({mouseSnap:30,touchSnap:30,container:document.body.getElement("#divTabs .uwa-scroller"),root:document.body.getElement("#divTabs ul"),delegate:"> li :not(input),> li",fixed:function(e,i){var s=t.extendElement(i).getClosest("li"),o=n.getById(s.getAttribute("data-tabId"));return!o||!o.isMovable()},handles:function(e){e.target=t.extendElement(e.target).getClosest("li"),e.placeholder=t.createElement("li",{class:"placeholder",html:"&nbsp;",styles:{width:e.target.getSize().width}}).inject(e.target,"after");var n=e.target.getPosition(e.target.getOffsetParent());return e.target.setStyles({left:n.x+"px",top:n.y+"px"}).addClassName("dragged")},move:function(t){t.limited.left?i.getScroller().autoScrollPrevious():t.limited.right?i.getScroller().autoScrollNext():i.getScroller().stopScroll()},enter:function(t){return t.placeholder},drop:function(t){var e=t.zone.getElements("li:not(.dragged)").indexOf(t.placeholder);n.move(t.target.getAttribute("data-tabId"),e)},stop:function(t){t.placeholder.destroy(),i.getScroller().stopScroll(),t.target.removeClassName("dragged").setStyles({top:null,left:null})}})}}.apply(e,i))||(t.exports=s)},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(t,e,n){"use strict";var i,s;i=[n(409)],void 0===(s=function(t){var e=[{title:_("Name"),type:t.text,description:_("This theme's name"),key:"name"},{title:_("Display Banner"),type:t.checkbox,description:_("Whether to display the header image at the top of the PushMail"),key:"config.display.banner"},{title:_("Display Subject"),type:t.checkbox,description:_("Whether to display the subject text at the top of the PushMail"),key:"config.display.subject"},{title:_("Display Social sharing"),type:t.checkbox,description:_("Whether to display the social sharing links below each article"),key:"config.display.social_sharing"},{title:_("Display View Online link"),type:t.checkbox,description:_("Whether to display a link to open the PushMail in a web browser at the top of the PushMail"),key:"config.display.mirror_links"},{title:_("Display Enclosures"),type:t.checkbox,description:_("Whether to display display articles' images"),key:"config.display.enclosures"},{title:_("Keep Webnote Style"),type:t.checkbox,description:_("Keep Webnote Style"),key:"config.display.webnote_style"}],n=[{selector:".nv-banner",entries:[{title:_("Banner background"),key:"config.clientBanner"},{title:_("Banner image"),key:"config.bannerImg",imageSize:{width:550}},{title:_("Subject"),key:"config.clientSubject"},{title:_("Text"),key:"config.bannerDescription"}]},{selector:".nv-tab-title",entries:[{title:_("Title"),key:"config.tabTitle"},{title:_("Background"),key:"config.tabTitleBackground"},{title:_("Image"),key:"config.tabImg",imageSize:{width:130,height:40}}]},{selector:".nv-html-module-title",entries:[{title:_("Title"),key:"config.essentialTitle"},{title:_("Title background"),key:"config.essentialTitleRow"},{title:_("Title image"),key:"config.essentialImg",imageSize:{width:130,height:40}},{title:_("Separator"),key:"config.essentialTitleNet"},{title:_("Border"),key:"config.essentialTable"},{title:_("Background"),key:"config.essentialContentRow"},{title:_("Text"),key:"config.essentialContent"}]},{selector:".nv-items-module-title",entries:[{title:_("Title"),key:"config.streamTitle"},{title:_("Title background"),key:"config.streamTitleBg"},{title:_("Title image"),key:"config.streamImg",imageSize:{width:130,height:40}},{title:_("Separator"),key:"config.streamTitleSeparator"},{title:_("Border"),key:"config.streamModuleTable"},{title:_("Background"),key:"config.streamContentBg"},{title:_("Article title"),key:"config.streamModuleContentLink"},{title:_("Date"),key:"config.streamModuleDate"},{title:_("Source"),key:"config.streamModuleFromLink"},{title:_("Text"),key:"config.streamModuleText"},{title:_("Item separator"),key:"config.streamItemSeparator"},{title:_("Read more"),key:"config.streamModuleTextInnerLink"},{title:_("Author"),key:"config.streamModuleAuthor"}]},{selector:".nv-screenshot-module-title",entries:[{title:_("Title"),key:"config.screenshotText"},{title:_("Title background"),key:"config.screenshotTextRow"},{title:_("Title image"),key:"config.screenshotTitleImg",imageSize:{width:130,height:40}},{title:_("Border"),key:"config.screenshotTextContainer"},{title:_("Separator"),key:"config.screenshotTextNet"}]},{selector:".body",left:30,entries:[{title:_("Global background"),key:"config.globalBackground"},{title:_("Central background"),key:"config.tableBg"},{title:_("Central borders"),key:"config.tableBorder"}]},{selector:".nv-footer",entries:[{title:_("Footer copyright"),key:"config.pushmail-footer"},{title:_("Footer text"),key:"config.footerDescription"},{title:_("Footer image"),key:"config.footerImg",imageSize:{width:550}}]}];return{cssPropertiesFields:{color:t.color,background:t.text,"background-color":t.colorTransparent,image:t.imageFile,side:t.select(["left","right"]),"border-style":t.select(["none","solid","dashed","dotted"]),"border-color":t.color,"font-weight":t.select(["normal","bold"]),"font-family":t.select(["Arial","Arial Black","Tahoma","Trebuchet MS","Verdana","Courier","Courier New","Georgia","Times","Times New Roman","Courier","Courier New"]),"font-size":t.select(["small","normal","high","huge"]),"text-transform":t.select(["none","capitalize","uppercase","lowercase"]),"text-decoration":t.select(["none","underline","overline","line-through"]),"text-align":t.select(["left","center","right","justify"]),display:t.select(["none","block"])},globalConfiguration:e,bubbles:n}}.apply(e,i))||(t.exports=s)},function(t,e,n){"use strict";var i,s;i=[n(1),n(10),n(8)],void 0===(s=function(t,e,n){return e.extend({name:"nv-pushmail-theme-editor-undo-redo",init:function(t){this._parent(t),this._undoActions=[],this._redoActions=[]},getContent:function(){return this.elements.content||(this._buildContent(),this._refresh()),this.elements.content},_buildContent:function(){this.elements.content=t.createElement("div",{class:this.getClassNames(),html:[this.elements.undo=new n.Button({value:_("Undo"),className:"dark-grey",events:{onClick:this._undo.bind(this)}}),this.elements.redo=new n.Button({value:_("Redo"),className:"dark-grey",events:{onClick:this._redo.bind(this)}})]})},_undo:function(){var t=this._undoActions.pop();t&&(this.dispatchEvent("onApply",[t[0]]),this._redoActions.push(t),this._refresh())},_redo:function(){var t=this._redoActions.pop();t&&(this.dispatchEvent("onApply",[t[1]]),this._undoActions.push(t),this._refresh())},_refresh:function(){this.elements.undo.setDisabled(0===this._undoActions.length),this.elements.redo.setDisabled(0===this._redoActions.length)},push:function(t,e){this._redoActions.length=0,this._undoActions.push([t,e]),this._refresh()}})}.apply(e,i))||(t.exports=s)},function(t,e,n){"use strict";var i,s;i=[n(1),n(24),n(10),n(26)],void 0===(s=function(t,e,n,i){return n.extend(e,{name:"nv-status",getContent:function(){return this.elements.content||this._buildContent(),this.elements.content},getCurrentStatus:function(){return this._currentStatus},set:function(e){this.clearDelayed("clear"),this._currentStatus&&!t.equals(this._currentStatus,e)?(this._nextStatus=e,this._fx.start({opacity:0})):this._applyStatus(e)},clear:function(){this.clearDelayed("clear"),this._currentStatus&&(this._nextStatus=!1,this._fx.start({opacity:0}))},_buildContent:function(){this.elements.content=t.createElement("div",{class:this.getClassNames()}),this._fx=new i(this.elements.content,{duration:100,events:{onComplete:function(){0===Number(this.elements.content.getStyle("opacity"))&&this._applyStatus(this._nextStatus)}.bind(this)}})},_applyStatus:function(t){var e=this.elements.content;t?(e.setText(t.text||""),e.className=this.getClassNames()+(t.className?" "+t.className:""),t.duration&&this.setDelayed("clear",this.clear,t.duration),this._fx.start({opacity:1})):e.empty(),this._currentStatus=t,this._nextStatus=!1}})}.apply(e,i))||(t.exports=s)},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(t,e,n){"use strict";var i,s;i=[n(0),n(174),n(390),n(66)],void 0===(s=function(t,e,n,i){var s=t.h,o=[{name:_("Netvibes' advanced apps"),desc:_("Boost your Dashboard, analyze your content, automate actions and curate large numbers of sources"),ingredients:["Corpus","Potion","Sharedlibrary"]},{name:_("Social Media monitoring"),desc:_("Connect to social networks to spot social media trends, key influencers and public conversation that impacts your business"),ingredients:["Twitter_Trends","Facebook_Page_Trends","Linkedinpage","Youtubechannel","Vimeo","Instagram"]},{name:_("Advertising and Analytics"),desc:_("Connect easily cloud-based data from your online marketing tools"),ingredients:["Youtubeanalytics","Googleadwords","Google_Analytics","Twitterads","Facebookinsights","Facebookads","Adobeanalytics","Linkedinads"]},{name:_("Spreadsheets"),desc:_("Pick any Excel data spreadsheet or CSV report from any enterprise system or database"),ingredients:["Spreadsheet","Googlespreadsheet","Dropboxspreadsheet","Onedrivespreadsheet"]},{name:_("Others"),desc:_("Exogenous data such as weather conditions, UV Index or stock markets"),ingredients:["Weather","Yahoofinance"]}];return function(t){return s(i,{title:_("Select an ingredient"),extraClass:"index dark-background",scroller:!0},s(n,{thumbnails:o.map(function(t,n){return{id:n,label:{name:t.name,text:t.desc},selectable:!1,thumbnails:t.ingredients.map(function(t){var n=e.factory({type:t});return{id:t,name:n.getTitle(),image:n.getIcon(),disabled:!n.isVisible()}})}}),toggleThumbnailsSelection:function(e,n){t.events.onSelectIngredient(n[0].id)}}))}}.apply(e,i))||(t.exports=s)},function(t,e,n){"use strict";var i,s;i=[n(0),n(941),n(1124),n(1069),n(1073),n(1074)],void 0===(s=function(t,e,n,i,s,o){var a={Google_Analytics:e,Spreadsheet:n.default,Twitter_Trends:i.default,Facebook_Page_Trends:s.default,Corpus:o};return function(e){var n=a[e.source.getType()];if(n)return t.h(n,e)}}.apply(e,i))||(t.exports=s)},function(t,e,n){"use strict";var i,s;i=[n(1),n(0),n(5),n(11),n(411),n(455),n(183),n(55),n(34),n(417),n(1068)],void 0===(s=function(t,e,n,i,s,o,a,r,l,c,u){var h=e.h,d={fields:{ucid:{title:_("Google account"),input:{id:"google_account"}},accountId:{title:_("Analytics account"),input:{id:"google_analytics_account",computedOptions:{ucid:{sourceFieldName:"ucid"}}}}}};return n.extend({init:function(t){this._parent(t),this.onFormChange=this.onFormChange.bind(this),this.onNextStep=this.onNextStep.bind(this),this.state={account:!1,selectedViewId:null,loadingInitialValues:!1}},render:function(t,e){return h(a,{source:t.source,events:t.events,loading:!this.getViewId()||t.loading,scroller:!0,rightNavigation:[t.hasPreviousStep&&h(r.Text,{label:_("Previous"),onClick:t.events.onPreviousStep}),h(u,{disabled:!e.selectedViewId,loading:t.loading,onClick:this.onNextStep})]},!e.loadingInitialValues&&h(l,{className:"social-account-form",title:_("Account")},h(s,{schema:d,submitButton:!1,initialValue:{ucid:e.userConnectId,accountId:e.account&&e.account.id},events:{onChange:this.onFormChange}})),e.account&&h(l,{title:e.account.name},e.account.properties.map(function(t){var n=t.views.map(function(t){return h(i.Tag,{value:t.name,className:"light-border-only"+(t.id===e.selectedViewId?" selected":""),containerStyle:{display:"inline-block"},events:{onClick:this.onToggleTag.bind(this,t.id)}})},this);return h(l.Item,{className:"property",title:t.name},n)},this)),h(c,{source:t.source,onSourceChange:function(t){this.setState(function(e){return{sourceChanges:Object.assign({},e.sourceChanges,t)}})}.bind(this)}))},componentWillMount:function(){this._loadValues(this.props)},componentWillReceiveProps:function(t){this._loadValues(t)},_loadValues:function(e){var n=e.source.getQuery();n.viewId&&n.userConnectId&&!t.equals(this._getQueryFromState(),n)&&(this.setState({loadingInitialValues:!0,selectedViewId:n.viewId}),o.getAccounts(n.userConnectId).done(function(t){var e=t.detect(function(t){return t.properties.some(function(t){return t.views.some(function(t){return t.id===n.viewId})})});this.setState({loadingInitialValues:!1,account:e,userConnectId:n.userConnectId})}.bind(this)))},getViewId:function(){if(this.state.account&&this.state.selectedViewId)return this.state.account.properties.some(function(t){return t.views.some(function(t){return t.id===this.state.selectedViewId},this)},this)?this.state.selectedViewId:void 0},_getQueryFromState:function(){return{userConnectId:this.state.userConnectId,viewId:this.getViewId()}},onToggleTag:function(t){this.setState(function(e){return{selectedViewId:e.selectedViewId!==t&&t}})},onNextStep:function(){this.getViewId()&&this.props.events.onPopulateSource(Object.assign({query:this._getQueryFromState(),displayableQuery:this.state.account.name},this.state.sourceChanges)).done(function(){this.props.events.onDisplayStep("editIngredient",{source:this.props.source})}.bind(this))},onFormChange:function(t){if(t.value&&t.value.ucid&&t.value.accountId){var e=parseInt(t.value.ucid,10),n=parseInt(t.value.accountId,10);o.getAccountById(e,n).done(function(e){this.setState({account:e,userConnectId:Number(t.value.ucid)})}.bind(this))}}})}.apply(e,i))||(t.exports=s)},function(t,e,n){var i,s;i=[n(1),n(57),n(9),n(16),n(10),n(82),n(943),n(944),n(412),n(8)],void 0===(s=function(t,e,n,i,s,o,a,r,l,c){"use strict";var u,h;return u=s.extend({name:"uwa-schemaform",fields:null,onChangePaused:!1,isPropagatingChanges:!1,options:{schema:null,initialValue:{},inputs:a,sanitizers:r,validators:l,submitButton:!0,clearButton:!1,data:null,baseInputOptions:{}},init:function(t){this._parent(t),this._initFields()},_initFields:function(){this.fields={},Object.keys(this.options.schema.fields).forEach(function(t){var e=this.options.initialValue&&this.options.initialValue[t];this.fields[t]=new h(this,t,this.options.schema.fields[t],e)},this)},getContent:function(){return this.elements.container||this._buildContent(),this.elements.container},buildNotice:function(e,n,i){n=n||"tooltip",this.notices[i]?this.notices[i].setAttribute("uwa-tooltip",e):this.notices[i]=t.createElement("div",{class:this.getClassNames("-notice uwa-icon "+n),"uwa-tooltip":e,"uwa-tooltip-delay":"10"}),this.notices[i].inject(i?this.fields[i].getContent():this.elements.container)},_buildContent:function(){var e=this;return this.elements.container=t.createElement("div",{class:this.getClassNames()}),this.notices={},this.options.schema.notice&&this.buildNotice(this.options.schema.notice.text,this.options.schema.notice.icon),Object.keys(this.fields).forEach(function(t){this.elements.container.addContent(this.fields[t].getContent()),this.fields[t].schema.input.options&&this.fields[t].schema.input.options.hidden&&this.fields[t].getContent().hide()},this),(this.options.submitButton||this.options.clearButton)&&(this.elements.buttonContainer=t.createElement("div",{class:this.getClassNames("-buttons")}).inject(this.elements.container),this.options.clearButton&&(this.elements.clearButton=new c.Button(t.merge({_root:!1,value:"Clear",events:{onClick:function(){e.clearValue()}}},this.options.baseInputOptions)).inject(this.elements.buttonContainer)),this.options.submitButton&&(this.elements.submitButton=new c.Button(t.merge({_root:!1,value:"Submit",events:{onClick:function(){e.isValid().then(function(){e.dispatchEvent("onSubmit",[{value:e.getValue()}])})}}},this.options.baseInputOptions)).inject(this.elements.buttonContainer))),this.elements.container},getValue:function(){var e={};return Object.keys(this.fields).forEach(function(n){var i=this.fields[n].getValue();i||t.is(i,"boolean")||(i=null),e[n]=i},this),e},getDisplayValue:function(){var t={};return Object.keys(this.fields).forEach(function(e){t[e]=this.fields[e].getDisplayValue()},this),t},getFieldValue:function(t){var e=this.fields[t];return e?e.getValue():null},getAllFieldsName:function(){return Object.keys(this.fields)},setFieldValue:function(t,e){this.fields[t]&&(this.fields[t].setValue(e),this._onFieldChanged(t))},setFieldTitle:function(t,e){this.fields[t]&&this.fields[t].setTitle(e)},getValidatedValue:function(){var t=this.getValue();return this.isValid().then(function(){return t})},getValidatedFieldValue:function(t){var e=this.fields[t];return e.isValid().then(function(){return e.getValue()})},setValue:function(t){this.onChangePaused=!0,t=t||{},Object.keys(this.fields).forEach(function(e){t.hasOwnProperty(e)&&this.fields[e].setValue(t[e])},this),this.updateValidityMessages(),this.onChangePaused=!1},clearValue:function(){this.onChangePaused=!0,Object.keys(this.fields).forEach(function(t){this.fields[t].setValue(null)},this),this.updateValidityMessages(),this.onChangePaused=!1},isValid:function(){return i.allSettled(Object.keys(this.fields).map(function(t){return this.fields[t].isValid().fail(function(e){return i.reject(Object.assign(e,{fieldName:t}))})},this)).then(function(t){var e={};if(t.forEach(function(t){"rejected"===t.state&&(e[t.reason.fieldName]=t.reason)}),0!==Object.keys(e).length)throw Object.assign(new Error("There is an error within a field"),{fieldErrors:e})})},updateValidityMessages:function(){Object.keys(this.fields).forEach(function(t){this.fields[t].updateValidityMessage({forceValidation:!0})},this)},getSchemaformData:function(){return this.options.data},_createContextForField:function(){return{getFieldValue:this.getFieldValue.bind(this),setFieldValue:this.setFieldValue.bind(this),getAllFieldsName:this.getAllFieldsName.bind(this),getValidatedFieldValue:this.getValidatedFieldValue.bind(this),getSchemaformData:this.getSchemaformData.bind(this),hideField:this.hideField.bind(this),showField:this.showField.bind(this),buildNotice:this.buildNotice.bind(this),addValidityMessage:this.addValidityMessage.bind(this),hideValidityMessage:this.hideValidityMessage.bind(this),setFieldTitle:this.setFieldTitle.bind(this)}},addValidityMessage:function(t,e){this.fields[t]&&this.fields[t].addValidityMessage(e)},hideValidityMessage:function(t){this.fields[t]&&this.fields[t].hideValidityMessage()},hideField:function(t){this.fields[t]&&this.fields[t].getContent().hide()},showField:function(t){this.fields[t]&&this.fields[t].getContent().show()},_executeSanitizers:function(t,e,n){var i=this,s=n;return this._getSanitizersFor(t).forEach(function(t){var n=i._evaluateOptions(t,e),o=i.options.sanitizers[t.id];s=o(s,n)}),s},_executeValidators:function(t,e,n){var s=this,o=this._getValidatorsFor(t);return i.all(o.map(function(o){var a=s._evaluateOptions(o,e),r=s.options.validators[o.id].bind(null,n,a,t);return i.resolve().then(r)}))},_getSanitizersFor:function(t){return t.sanitizers?t.sanitizers:t.sanitizer?[t.sanitizer]:[]},_getValidatorsFor:function(t){return t.validators?t.validators:t.validator?[t.validator]:[]},_evaluateOptions:function(e,n){var i;if(e.computedOptions){i={};var s=e.computedOptions;for(var o in s)if(s.hasOwnProperty(o)){var a=s[o],r=a.sourceFieldName,l=this.getFieldValue(r);l=this._executeSanitizers(a,n,l),i[o]=l}e.options&&(i=t.merge(i,e.options))}else i=e.options?e.options:{};return i=t.merge(i,{context:n})},_findDependencies:function(t){if(!t)return[];var e=[];if(t.computedOptions){var n=t.computedOptions;for(var i in n)if(n.hasOwnProperty(i)){var s=n[i],o=this._getSanitizersFor(s);if("string"==typeof s.sourceFieldName&&""!==s.sourceFieldName&&e.push(s.sourceFieldName),o)for(var a=0;a<o.length;a++){var r=o[a],l=this._findDependencies(r);e=e.concat(l)}}}return e},_onFieldChanged:function(t){this.isPropagatingChanges||(this._propagateChanges([t]),this.onChangePaused||this.dispatchEvent("onChange",[{value:this.getValue()}]))},_propagateChanges:function(t){this.isPropagatingChanges=!0;for(var e=0;t.length;){for(var n=[],i=0;i<Object.keys(this.fields).length;i++){var s=Object.keys(this.fields)[i];this.fields[s].onFieldsChanged(t)&&n.push(s)}if(t=n,++e>500)throw new Error("I reckon there might be some good old cyclical references in your computedOptions, partner.")}this.isPropagatingChanges=!1},destroy:function(){Object.keys(this.fields).forEach(function(t){this.fields[t].destroy()},this),this._parent()}}),h=n.extend({host:null,schema:null,elements:null,fallbackValue:void 0,context:null,dependencies:null,validationCacheIsFor:null,cachedValidationPromise:null,init:function(t,e,n,i){var s=this;function o(t){var e=[];return t.forEach(function(t){e=e.concat(s.host._findDependencies(t))}),e}this.host=t,this.schema=n,this.name=e,this.elements={},this.fallbackValue=i,this.context=t._createContextForField(this),this.dependencies={input:this.host._findDependencies(this.schema.input),sanitizer:o(this.host._getSanitizersFor(this.schema)),validator:o(this.host._getValidatorsFor(this.schema))}},getContent:function(){return this.elements.container||this._buildContent(),this.elements.container},_buildContent:function(){this.elements.container=t.createElement("div",{class:this.host.getClassNames("-field")+" input-"+this.schema.input.id}),this.elements.validityMessage=t.createElement("div",{class:this.host.getClassNames("-field-validity-message")}).inject(this.elements.container),this.elements.title=t.createElement("div",{class:this.host.getClassNames("-field-title"),text:this.schema.title}).inject(this.elements.container),this.elements.inputWrapper=t.createElement("div",{class:this.host.getClassNames("-field-wrapper")}).inject(this.elements.container),this._buildInput(),this.schema.notice&&this.context.buildNotice(this.schema.notice.text,this.schema.notice.icon,this.name)},setTitle:function(t){this.elements.title&&this.elements.title.setText(t)},_buildInput:function(){this.elements.control&&(this.elements.control.destroy(),this.elements.inputWrapper.empty());var e=this.host.options.inputs[this.schema.input.id],n=t.clone(this.host._evaluateOptions(this.schema.input,this.context));n=Object.assign({},this.host.options.baseInputOptions,n,{_root:!1,context:this.context,schema:this.schema,name:this.name}),this.fallbackValue&&Object.assign(n,{value:this.fallbackValue}),this.elements.control=new e(n).inject(this.elements.inputWrapper),this.elements.control.addEvent&&this.elements.control.addEvent("onChange",function(){this.fallbackValue=this.elements.control.getValue(),this.updateValidityMessage(),this.host._onFieldChanged(this.name)},this)},_isValidationCacheUpToDate:function(){return this.cachedValidationPromise&&this.validationCacheIsFor===this._getRawValue()},getValue:function(){return this._sanitize(this._getRawValue())},getDisplayValue:function(){return this.elements.control&&this.elements.control.getDisplayValue?this.elements.control.getDisplayValue():this._getRawValue()},_getRawValue:function(){return this.elements.control?this.elements.control.getValue():this.fallbackValue},_sanitize:function(t){return this.host._executeSanitizers(this.schema,this.context,t)},setValue:function(t){this.elements.control?this.elements.control.setValue(t):this.fallbackValue=t},isEmpty:function(){return!this.elements.control||this.elements.control.isEmpty()},isValid:function(){var t=this.host._getValidatorsFor(this.schema).filter(function(t){return"one-of"===t.id}).length;return this._isValidationCacheUpToDate()&&!t||(this.validationCacheIsFor=this._getRawValue(),this.cachedValidationPromise=this.host._executeValidators(this.schema,this.context,this.getValue())),this.cachedValidationPromise},updateValidityMessage:function(t){var e=this;(void 0!==this.fallbackValue||t&&t.forceValidation)&&this.isValid().then(function(){e.hideValidityMessage()},function(t){e.addValidityMessage(t)})},addValidityMessage:function(t){this.elements.validityMessage&&(this.elements.validityMessage.textContent=t.message,this.elements.container.addClassName("invalid"))},hideValidityMessage:function(){this.elements.validityMessage&&(this.elements.validityMessage.textContent="",this.elements.container.removeClassName("invalid"))},onFieldsChanged:function(t){var e=this,n=!1;function i(n){var i=e.dependencies[n];return t.some(function(t){return i.indexOf(t)>-1})}return i("input")&&this.elements.container&&(n=!0,this._buildInput()),i("sanitizer")&&(n=!0),i("validator")&&(this.validationCacheIsFor=null,this.updateValidityMessage()),n},destroy:function(){this.elements.container&&(this.elements.container.destroy(),this.elements.control.destroy&&this.elements.control.destroy())}}),t.namespace("Controls/SchemaForm",u,t,"replace")}.apply(e,i))||(t.exports=s)},function(t,e,n){var i,s;i=[n(1),n(13),n(10),n(8),n(124)],void 0===(s=function(t,e,n,i,s){"use strict";var o;return o={"uwa-text":i.Text,"uwa-select":i.Select,"uwa-colorpicker":s,"uwa-radiogroup":n.extend({name:"uwa-schemaform-radiogroup",init:function(t){this._parent(t),this.options.value&&this.setValue(this.options.value),this.radioGroupName="schema-form-"+e.getUniqueId()},getContent:function(){var e=this;return this.elements.container||(this.elements.container=t.createElement("div",{class:this.getClassNames()}),this._radios=[],this.options.options.forEach(function(n,s){var o=new i.Radio({className:this.options.className,attributes:{name:e.radioGroupName,value:s}});o.addEvent("onChange",function(){e.dispatchEvent("onChange",e)});var a=t.createElement("span",{class:e.getClassNames("-label"),text:n.label});t.createElement("label",{html:[o,a]}).inject(e.elements.container),e._radios.push(o)},this)),this.elements.container},getValue:function(){var t=this.elements.container.getElement(":checked");return t?this.options.options[t.value].value:null},setValue:function(e){this.getContent(),this.options.options.forEach(function(n,i){t.equals(e,n.value)&&this._radios[i].check(!0)},this)},destroy:function(){this._parent(),this._radios.forEach(function(t){t.destroy()})}}),"uwa-checkbox":i.Checkbox.extend({getValue:function(){return this.isChecked()},setValue:function(t){this.check(Boolean(t))}}),"uwa-checkboxgroup":n.extend({name:"uwa-schemaform-checkboxgroup",init:function(t){this._parent(t),this.options.value&&this.setValue(this.options.value)},getContent:function(){var e=this;return this.elements.container||(this.elements.container=t.createElement("div",{class:this.getClassNames()}),this.elements.checkboxes=[],this.options.options.forEach(function(n){var s=new i.Checkbox,o=t.createElement("span",{class:e.getClassNames("-label"),text:n.label});t.createElement("label",{html:[s,o]}).inject(e.elements.container),e.elements.checkboxes.push(s)})),this.elements.container},getValue:function(){var t=[];return this.elements.checkboxes.forEach(function(e,n){if(e.isChecked()){var i=this.options.options[n].value;-1===t.indexOf(i)&&t.push(i)}},this),t},setValue:function(t){this.getContent(),this.elements.checkboxes.forEach(function(t){t.check(!1)}),t&&t.forEach&&t.forEach(function(t){this.elements.checkboxes.forEach(function(e,n){this.options.options[n].value===t&&e.check(!0)},this)},this)}})},t.namespace("Controls/SchemaForm/Inputs",o,t)}.apply(e,i))||(t.exports=s)},function(t,e,n){var i,s;i=[n(1)],void 0===(s=function(t){"use strict";var e;return e={"uwa-trim":function(t){return(t||"").trim()},"uwa-normalize-number":function(t){return"string"==typeof t?""===t?void 0:Number(t.replace(",",".").replace(" ","")):Number(t)},"uwa-first":function(t){return Array.isArray(t)?t[0]:t}},t.namespace("Controls/SchemaForm/Sanitizers",e,t)}.apply(e,i))||(t.exports=s)},function(t,e,n){"use strict";var i,s;i=[n(288),n(946),n(947),n(948),n(949),n(950),n(951),n(952),n(953),n(954),n(955),n(956),n(957),n(958),n(959),n(960),n(961),n(962),n(963),n(964),n(965),n(966),n(967),n(968),n(969),n(970),n(971),n(972),n(973),n(974),n(975),n(976),n(977),n(978),n(979),n(980),n(981),n(982),n(983),n(984),n(985),n(986),n(987),n(988),n(989),n(990),n(414),n(105),n(991),n(992),n(993),n(415),n(994),n(995),n(996),n(997),n(998),n(999),n(1e3),n(1001),n(1002),n(1003),n(1004),n(1005),n(1006),n(1007),n(1008),n(1009),n(1010),n(1011),n(1012),n(1013),n(1014),n(1015),n(1016),n(1017),n(1018),n(1019),n(1020),n(50),n(1021),n(1022),n(1023),n(1024),n(1025),n(1026),n(1027),n(1028),n(1029),n(1030),n(1031),n(1032),n(1033),n(1035),n(1036),n(1037),n(1038),n(1039),n(81),n(1040),n(1041),n(1042),n(1043),n(1044),n(1045),n(1046),n(1047),n(1048),n(1049),n(1050),n(1051),n(1052),n(1053),n(1054),n(1055),n(1056),n(1057),n(1058),n(1059),n(1060),n(1061),n(1062),n(1063),n(1064),n(1065),n(1066)],void 0===(s=function(t,e,n,i,s,o,a,r,l,c,u,h,d,p,m,f,g,v,b,y,w,x,C,_,S,E,k,T,A,I,N,D,O,P,F,M,L,R,j,V,B,z,W,U,H,q,G,Y,X,K,J,Q,$,Z,tt,et,nt,it,st,ot,at,rt,lt,ct,ut,ht,dt,pt,mt,ft,gt,vt,bt,yt,wt,xt,Ct,_t,St,Et,kt,Tt,At,It,Nt,Dt,Ot,Pt,Ft,Mt,Lt,Rt,jt,Vt,Bt,zt,Wt,Ut,Ht,qt,Gt,Yt,Xt,Kt,Jt,Qt,$t,Zt,te,ee,ne,ie,se,oe,ae,re,le,ce,ue,he,de,pe,me,fe,ge,ve){return{boolean:t,checkbox:e,color:n,compare:i,current_dashboard:s,current_ds_tenant:o,current_npd:a,current_potion:r,current_user:l,dashboard:c,datetime:u,dropbox_account:h,ds_drive_url:d,duration:p,entity:m,evernote_account:f,evernote_notebook:g,evernote_note:v,facebook_account:b,facebook_page:y,facebook_photo_album:w,facet_analytics:x,facet_analyze:C,fake_dynamic_list:_,forecast_boolean:S,foursquare_account:E,gmail_folders:T,gmail_account:k,google_account:A,google_analytics_account:I,google_analytics_property:N,google_analytics_view:D,google_calendar_account:O,google_calendar:P,google_drive_account:F,google_drive_folder:M,google_spreadsheet:L,google_worksheet:R,home_camera:j,home_person:V,instagram_account:B,label_autocomplete:z,linkedin_account:W,medium_account:U,medium_account_feed:H,medium_publication:q,multiple_string:G,multiple_string_autocomplete:Y,multiple_subreddit:X,nest_account:K,nest_home:J,nest_protect:Q,nest_thermostat:$,netatmo_account:Z,netatmo_module:tt,netatmo_station:et,netatmo_thermostat:nt,netatmo_welcome:it,netatmowelcome_account:st,netvibes_mail:ot,password:at,period:rt,pocket_account:lt,potion_twitter_account:ct,pushbullet_account:ut,pushbullet_device:ht,pushmail_content:dt,pushmail_article_link_type:pt,pushmail_recipient_boolean:mt,pushmail_test:ft,pushmail_theme:gt,pushweb_content:vt,pushweb_title:bt,pushweb_url:yt,radio:wt,random_id:xt,reddit_account:Ct,reddit_username:_t,search_context:St,select:Et,sentiment:kt,sentiment_autocomplete:Tt,slack_account:At,slack_channel:It,slack_dm_channel:Nt,slack_team:Dt,stock:Ot,stream:Pt,stream_twitter:Ft,stream_analytics:Mt,subreddit:Lt,subreddit_range:Rt,swym_community:jt,swym_url:Vt,tab:Bt,tag:zt,team_member:Wt,template:Ut,text:Ht,time_days:qt,time_range:Gt,todo_task:Yt,tracked_topic:Xt,trigger:Kt,tumblr_account:Jt,tumblr_blog:Qt,twitter_account:$t,twitter_account_connect_id:Zt,twitter_users:te,twitter_list:ee,uuid_analytics:ne,uuid_analyze:ie,variation:se,weather_city:oe,widget:ae,widget_analytics:re,widget_analyze:le,widget_library:ce,widget_potion:ue,widget_todo:he,widget_webnote:de,wordpress_account:pe,wordpress_categories:me,wordpress_site:fe,youtube_account:ge,youtube_channel:ve}}.apply(e,i))||(t.exports=s)},function(t,e,n){"use strict";var i,s;i=[n(1),n(8),n(32)],void 0===(s=function(t,e,n){return n.extend({getContent:function(){if(!this.elements.container){this.elements.container=t.createElement("div",{class:this.getClassNames()}),this.elements.input=new e.Checkbox(this.getInputOptions(this.options));var n=t.createElement("label",{html:this.elements.input});n.appendText(this.options.label),n.inject(this.elements.container)}return this.elements.container},setValue:function(t){this.elements.input.check(!!t)},getValue:function(){return!!this.elements.input.isChecked()}})}.apply(e,i))||(t.exports=s)},function(t,e,n){"use strict";var i,s;i=[n(1),n(124),n(32)],void 0===(s=function(t,e,n){return n.extend({getContent:function(){return this.elements.container||(this.elements.container=t.createElement("div",{class:this.getClassNames(),html:[this.elements.colorPicker=new e({value:this.options.value||"000000",valueInput:!1,events:{onChange:function(){this.setValue(this.elements.colorPicker.getValue())}.bind(this)}})]})),this.elements.container},getValue:function(){return this.value},setValue:function(t){this.value=t}})}.apply(e,i))||(t.exports=s)},function(t,e,n){"use strict";var i,s;i=[n(3),n(1),n(8),n(32)],void 0===(s=function(t,e,n,i){var s=[{value:"",label:_("Choose one")},{value:"is greater than",label:_("is greater than")},{value:"is less than",label:_("is less than")},{value:"is",label:_("is equal to")}];return i.extend({numberOfLines:0,uniqueId:0,getContent:function(){return this.elements.container||(this.elements.container=e.createElement("div",{class:this.getClassNames()}),this.linesContainer=e.createElement("div",{class:"compare-lines-container"}).inject(this.elements.container),this.plusIcon=e.createElement("a",{class:"add-account uwa-icon compare-more","data-icon":"3",text:_("Add another comparison"),events:{click:this.createLine.bind(this)}}).inject(this.elements.container),this.options.value||this.createLine(),this.togglePlusIcon()),this.elements.container},createLine:function(t,i){if(this.numberOfLines!==s.length-1){var o=e.createElement("div",{class:"compare-line-container"}),a=new n.Select({className:"compare-label",options:s,attributes:{name:"compareType"+this.uniqueId},events:{onChange:this.togglePlusIcon.bind(this)}}).inject(o);t&&a.setValue(t);var r=new n.Text({className:"compare-value",attributes:{name:"compareValue"+this.uniqueId},events:{onChange:this.checkNumber.bind(this)}}).inject(o);i&&r.setValue(i);var l=this;e.createElement("span",{class:"uwa-icon nv-close-icon","data-icon":"Ź",title:_("Delete line"),events:{click:function(t){l.deteleLine(t)}}}).inject(o),o.inject(this.linesContainer),this.numberOfLines++,this.uniqueId++,this.togglePlusIcon()}},deteleLine:function(e){t.getElement(e).getClosest(".compare-line-container").remove(),this.numberOfLines--,0===this.numberOfLines&&this.createLine(),this.togglePlusIcon()},checkNumber:function(){var t=this.getValue();Object.keys(t).some(function(e){return!Number(t[e])&&0!==Number(t[e])})?this.addInputError(_("Please use only numbers")):this.removeInputError(),this.togglePlusIcon()},togglePlusIcon:function(){if(1===this.numberOfLines){var t=App.Utils.getInputsValue(this.elements.container),e=Object.keys(t).every(function(e){return""!==t[e]});this.plusIcon.toggle(e)}else this.numberOfLines===s.length-1?this.plusIcon.toggle(!1):this.plusIcon.toggle(!0)},getValue:function(){var t,e={},n=App.Utils.getInputsValue(this.elements.container);return Object.keys(n).forEach(function(i){t=i.substring(i.length-1),i.indexOf("compareType")>-1&&n.hasOwnProperty("compareValue"+t)&&""!==n[i]&&""!==n["compareValue"+t]&&(e[n[i]]=n["compareValue"+t])}),e},setValue:function(t){var e=this;0===Object.keys(t).length?this.createLine():Object.keys(t).forEach(function(n){e.createLine(n,t[n])})}})}.apply(e,i))||(t.exports=s)},function(t,e,n){"use strict";var i,s;i=[n(2),n(81)],void 0===(s=function(t,e){return e.extend({init:function(e){this._parent(e),this.options.context.hideField(this.options.name),this.setValue(t.Page.id)}})}.apply(e,i))||(t.exports=s)},function(t,e,n){"use strict";var i,s;i=[n(2),n(81)],void 0===(s=function(t,e){return e.extend({init:function(e){this._parent(e),this.setValue(t.get3DDPlatformId())}})}.apply(e,i))||(t.exports=s)},function(t,e,n){"use strict";var i,s;i=[n(2),n(81)],void 0===(s=function(t,e){return e.extend({init:function(e){this._parent(e),this.options.context.hideField(this.options.name),this.setValue(t.NPD.id)}})}.apply(e,i))||(t.exports=s)},function(t,e,n){"use strict";var i,s;i=[n(1),n(2),n(81)],void 0===(s=function(t,e,n){return n.extend({name:"schemaform-currentpotion",init:function(n){this._parent(n),t.createElement("div",{class:"uwa-schemaform-message",html:_("Visit {0} to talk to your potion").format('<a target="_blank" href="'+e.Config.urls.base+'/talk">'+e.Config.urls.base+"/talk</a>")}).inject(this.elements.container)},getValue:function(){return"{"+this.options.name+"}"}})}.apply(e,i))||(t.exports=s)},function(t,e,n){"use strict";var i,s;i=[n(2),n(81)],void 0===(s=function(t,e){return e.extend({init:function(e){this._parent(e),this.setValue(t.User.id)}})}.apply(e,i))||(t.exports=s)},function(t,e,n){"use strict";var i,s;i=[n(2),n(50)],void 0===(s=function(t,e){return e.extend({fillOptions:function(){var e=[];t.User.listOfPages.forEach(function(t){e.push({value:t.pageId,label:t.title})}),this.elements.input.putOptions(e,!0)}})}.apply(e,i))||(t.exports=s)},function(t,e,n){"use strict";var i,s;i=[n(1),n(8),n(196),n(163),n(32)],void 0===(s=function(t,e,n,i,s){return s.extend({init:function(t){if(this._parent(t),!this.getValue()){var e=new Date;e.setHours(e.getHours()+(t.hourOffset||0),0,0),this.setValue(e.getTime()/1e3)}},buildCalendarPicker:function(){var t=this,e=i.extend({options:{className:"dark",button:{class:"uwa-icon uwa-icon-only","data-icon":"u"},valueInput:"text"},buildContent:function(){return t.calendar=new n({className:"dark",events:{onDateSelect:function(e){e=e.strftime("%Y-%m-%d"),t.calendarPicker.setValue(e),t.calendarPicker.dispatchEvent("onChange",[e]),t.calendarPicker.toggle(!1)}}}),t.calendar}});this.calendarPicker=new e,this.calendarPicker.addEvent("onOpen",function(){t.calendar.setDate(new Date(t.calendarPicker.getValue()))}),this.calendarPicker.addEvent("onChange",function(){t.setValueFromInputs()})},buildTimePicker:function(){var n=function(t){for(var e=[],n=0;n<t;n++)e.push({value:n,label:n<10?"0"+n:n});return e};this.timePicker=t.createElement("div",{class:"time-range",html:[this.hours=new e.Select({className:"hour time-input",attributes:{name:"hours"},events:{onChange:this.setValueFromInputs.bind(this)},options:n(24)}),_("hour"),this.minutes=new e.Select({className:"minute time-input",attributes:{name:"minutes"},events:{onChange:this.setValueFromInputs.bind(this)},options:n(60)}),_("minutes")]})},getContent:function(){return this.elements.container||(this.elements.container=t.createElement("div",{class:"time-range-content"+this.getClassNames()}),this.buildCalendarPicker(),this.elements.container.addContent(this.calendarPicker),this.buildTimePicker(),this.elements.container.addContent(this.timePicker)),this.elements.container},setValueFromInputs:function(){if(!this.pending){var t=this.calendarPicker.getValue().split("-"),e=new Date(t[0],t[1]-1,t[2],this.hours.getValue(),this.minutes.getValue(),0);this.setValue(e.getTime()/1e3)}},getValue:function(){return this.value},setValue:function(t){this.pending=!0,this.value=Math.floor(t),this.options.minValue&&this.value<this.options.minValue&&(this.value=this.options.minValue+3600);var e=new Date(1e3*this.value);this.calendarPicker.setValue(e.strftime("%Y-%m-%d")),this.hours.setValue(String(e.getHours())),this.minutes.setValue(String(e.getMinutes())),this.pending=!1,this.dispatchOnChange()}})}.apply(e,i))||(t.exports=s)},function(t,e,n){"use strict";var i,s;i=[n(38)],void 0===(s=function(t){return t.extend({service:"dropbox"})}.apply(e,i))||(t.exports=s)},function(t,e,n){"use strict";var i,s;i=[n(2),n(20),n(81)],void 0===(s=function(t,e,n){return n.extend({init:function(e){this._parent(e);var n=this.options.tenant;n&&(this.setValue(t.get3DDService("3DDrive",n)),this.dispatchOnChange())}})}.apply(e,i))||(t.exports=s)},function(t,e,n){"use strict";var i,s;i=[n(1),n(8),n(32),n(4)],void 0===(s=function(t,e,n,i){return n.extend({factors:{minutes:1,hours:60,days:1440,weeks:10080},getContent:function(){return this.elements.container||(this.elements.container=t.createElement("div",{class:this.getClassNames()}),this.options.value?this.selected="duration":this.value=0,this.buildDurationSelector()),this.elements.container},parseDuration:function(){var t=Number(this.getValue());if(!t||!isFinite(t))return{type:"minutes",value:t||0};var e=["weeks","days","hours"].filter(function(e){if(t%this.factors[e]==0)return!0}.bind(this))[0]||"minutes";return{type:e,value:t/this.factors[e]}},onRangeChange:function(){var t=i.getInputsValue(this.elements.container);this.removeInputError(),this.selected=t.type,this.setValue("duration"!==t.type?0:this.durationToMinutes(t.duration)),this.checkNumber(this.getValue())},checkNumber:function(t){isFinite(Number(t))?this.removeInputError():this.addInputError(_("{0} is not a number").format('"'+t+'"'))},buildDurationSelector:function(){this.elements.container.empty(),this.radios=[],this.options.schema.enum.forEach(function(n,i){var s;t.createElement("div",{class:"duration-content"}).addContent(s=t.createElement("div",{class:"detail-label detail-label-time-"+n.value}).addContent(this.radios[i]=new e.Radio({className:"light",attributes:{name:"type",id:n.value},value:n.value,events:{onChange:this.onRangeChange.bind(this)}}),t.createElement("label",{text:n.display||"",for:n.value}))).inject(this.elements.container),!this.selected&&n.checked&&(this.selected=n.value);var o=!(!this.selected||this.selected!==n.value);if(this.radios[i].check(o),"duration"===n.value){var a=this.parseDuration();t.createElement("p",{class:"duration-content",html:[new e.Text({className:"duration-input duration-value",attributes:{name:"duration[value]",disabled:!o,value:a.value},events:{onChange:this.onRangeChange.bind(this)}}),this.elements.durationType=new e.Select({className:"duration-input duration-type",attributes:{name:"duration[type]",disabled:!o},options:[{label:_("minutes"),value:"minutes"},{label:_("hours"),value:"hours"},{label:_("days"),value:"days"},{label:_("weeks"),value:"weeks"}]}),_("before")]}).inject(s),this.elements.durationType.setValue(a.type),this.elements.durationType.addEvent("onChange",this.onRangeChange.bind(this))}}.bind(this))},durationToMinutes:function(t){if(!t)return 0;if(!isFinite(Number(t.value)))return t.value;var e=Math.floor((t.value||0)*this.factors[t.type]);return this.options.max&&e>this.options.max&&(e=this.options.max),e},getValue:function(){return String(this.value)},setValue:function(t){this.value=t,this.buildDurationSelector()}})}.apply(e,i))||(t.exports=s)},function(t,e,n){"use strict";var i,s;i=[n(1),n(8),n(32)],void 0===(s=function(t,e,n){return n.extend({name:"schemaform-entity",entitiesByTrigger:[],absoluteIndex:0,isEmpty:function(){return!this.getValue().some(function(t){return t&&Object.keys(t).some(function(e){return t[e]})})},getContent:function(){if(!this.elements.container){this.elements.container=t.createElement("div",{class:this.getClassNames()}),this.backlogs=[];var e=this.options.context.getSchemaformData();this.payloadsSchemas=e.payloads,this.triggersSchemas=e.triggers,this.triggers=e.recipe.triggers,this.entitiesByTriggers=[],this.triggers.forEach(function(t,e){var n=this.payloadsSchemas[this.triggersSchemas[t.name].payload].entities;for(var i in this.entitiesByTriggers.push([]),n)n.hasOwnProperty(i)&&this.options.schema.input.options.entityType.indexOf(n[i].type)>-1&&this.entitiesByTriggers[e].push(i)},this),this.buildCheckboxes()}return this.elements.container},buildCheckboxes:function(){if(this.checkboxes=[],this.maxValues=[],this.entitiesByTriggers.some(function(t){return t.length>0})){var t=[];this.entitiesByTriggers.map(function(e,n){var i=[],s=this.triggers[n],o=!(this.options.schema.hasOwnProperty("multiple")&&!this.options.schema.multiple);e.forEach(function(t){i.push(this.buildCheckbox(n,s,t,o))},this),t.push(i)},this),this.elements.container.addContent(t)}else if(this.options.schema.validator&&"not-empty"===this.options.schema.validator.id){var e=this.options.entityType,n=Array.isArray(e)?e.join(" "+_("or")+" "):e;this.addInputError(_("Please select a trigger that provide at least one {0}").format(n))}else this.options.context.hideField(this.options.name)},buildCheckbox:function(n,i,s,o){var a,r=this.triggersSchemas[i.name].result,l=this.payloadsSchemas[this.triggersSchemas[i.name].payload].entities[s].description||s,c={className:"green",attributes:{"data-index":n,"data-entity":s,"data-trigger":i.reference,name:this.options.name,value:this.options.name+this.absoluteIndex}},u=t.createElement("div",{class:this.getClassNames("-wrapper")}),h=t.createElement("label",{class:this.getClassNames("-label"),text:r+": "+l}).inject(u);a=new e[o?"Checkbox":"Radio"](this.getInputOptions(c)).inject(h,"top"),this.checkboxes.push(a),this.buildMaxValuesDropdown().inject(u),this.backlogs.push(i.config.backlog);var d=!!o||0===this.absoluteIndex;return a.check(d),this.absoluteIndex++,[u]},buildMaxValuesDropdown:function(){var n=new e.Select({options:[{value:!0,label:_("All")},{value:1,label:_("Max: {0}").format("1")},{value:2,label:_("Max: {0}").format("2")},{value:3,label:_("Max: {0}").format("3")},{value:4,label:_("Max: {0}").format("4")},{value:5,label:_("Max: {0}").format("5")}]});return this.maxValues.push(n),t.createElement("div",{class:this.getClassNames("-maxvalue"),html:[n]})},getValue:function(){var t=[];return this.entitiesByTriggers.forEach(function(){t.push(null)},this),this.checkboxes.forEach(function(e,n){var i,s=e.options.attributes;t[s["data-index"]]||(t[s["data-index"]]={}),e.isChecked()?"true"===(i=this.maxValues[n].getValue()[0])&&(i=!0):i=!1,t[s["data-index"]][s["data-entity"]]=i},this),t},setValue:function(t){this.checkboxes.forEach(function(e,n){var i=e.options.attributes,s=t[i["data-index"]]&&t[i["data-index"]][i["data-entity"]];e.check(!!s),s&&!0!==s&&(this.maxValues[n].setValue(t[i["data-index"]][i["data-entity"]]),this.maxValues[n].elements.container.setStyle("visibility","visible"))},this)}})}.apply(e,i))||(t.exports=s)},function(t,e,n){"use strict";var i,s;i=[n(38)],void 0===(s=function(t){return t.extend({service:"evernote"})}.apply(e,i))||(t.exports=s)},function(t,e,n){"use strict";var i,s;i=[n(33),n(6)],void 0===(s=function(t,e){return t.extend({endpoint:"",label:"name",value:"id",errorLabel:_("No notebooks found"),getDisplayValue:function(){return'"'+this.elements.input._getSelectedOptions()[0].getText()+'"'},requestOptions:function(t){e.proxyEvernote({connectId:t,ressource:"notebooks"}).done(function(t){this.onListLoaded(t)}.bind(this))}})}.apply(e,i))||(t.exports=s)},function(t,e,n){"use strict";var i,s;i=[n(33),n(6)],void 0===(s=function(t,e){return t.extend({endpoint:"",label:"name",value:"id",errorLabel:_("No notes found"),getDisplayValue:function(){return'"'+this.elements.input._getSelectedOptions()[0].getText()+'"'},requestOptions:function(t){this.options.notebook&&"*"!==this.options.notebook?e.proxyEvernote({connectId:t,ressource:"notes",notebookId:this.options.notebook}).done(function(t){this.onListLoaded(t)}.bind(this)):this.options.context.hideField(this.options.name)}})}.apply(e,i))||(t.exports=s)},function(t,e,n){"use strict";var i,s;i=[n(38)],void 0===(s=function(t){return t.extend({service:"facebook"})}.apply(e,i))||(t.exports=s)},function(t,e,n){"use strict";var i,s;i=[n(33)],void 0===(s=function(t){return t.extend({endpoint:"https://graph.facebook.com/v2.12/me/accounts",service:"facebook",label:"name",value:"id",errorLabel:_("No pages found"),getDisplayValue:function(){return'"'+this.elements.input._getSelectedOptions()[0].getText()+'"'},getData:function(t){return t.data}})}.apply(e,i))||(t.exports=s)},function(t,e,n){"use strict";var i,s;i=[n(33)],void 0===(s=function(t){return t.extend({endpoint:"https://graph.facebook.com/v2.12/me/albums?fields=can_upload,name",service:"facebook",label:"name",value:"id",errorLabel:_("No albums found"),getData:function(t){var e=[];return t.data.forEach(function(t){t.can_upload&&e.push(t)}),e}})}.apply(e,i))||(t.exports=s)},function(t,e,n){"use strict";var i,s;i=[n(81)],void 0===(s=function(t){return t.extend({init:function(t){this._parent(t),this.options.serie&&this.setValue(this.options.serie.split(".")[1])}})}.apply(e,i))||(t.exports=s)},function(t,e,n){"use strict";var i,s;i=[n(33),n(17),n(46),n(119)],void 0===(s=function(t,e,n,i){return t.extend({label:"label",value:"value",errorLabel:_("No Series found"),fillOptions:function(){this.options.uuid&&this.options.wid?(this.options.context.showField(this.options.name),this._parent()):this.options.context.hideField(this.options.name)},requestOptions:function(){var t=this.options.quantitative?"TimeLessSeries":"TimeSeries",s=e.getById(this.options.wid),o=n.parseSourcesPreference(s.getData().sources);o=o.filter(function(t){return t.id===this.options.uuid}.bind(this)),i.requestSourcesWithoutStats(o).done(function(e){var n=o[0].facets.reduce(function(t,e){return t[e.name]=e.title,t},{}),i=e._sources[0].getAvailableFacets().filter(function(e){return n[e.getName()]&&e.getStrategy()===t}).map(function(t){return{label:n[t.getName()],value:t.getName()}});this.onListLoaded(i)}.bind(this))},getDisplayValue:function(){return'"'+this.elements.input._getSelectedOptions()[0].getText()+'"'}})}.apply(e,i))||(t.exports=s)},function(t,e,n){"use strict";var i,s;i=[n(50)],void 0===(s=function(t){return t.extend({fillOptions:function(){this.options.ucid?(this.options.context.showField(this.options.name),this.elements.input.hide(),this.addSpinner(),this.spinner.start(),window.setTimeout(this.onListLoaded.bind(this),500)):this.options.context.hideField(this.options.name)},onListLoaded:function(){this.spinner.stop(),this.elements.input.show();var t=this.options.options;this.elements.input.putOptions(t),1===t.length&&this.elements.input.setValue(t[0].value),this.options.value&&this.elements.input.setValue(this.options.value)}})}.apply(e,i))||(t.exports=s)},function(t,e,n){"use strict";var i,s;i=[n(1),n(288)],void 0===(s=function(t,e){return e.extend({init:function(t){this._parent(t),this.options.serie?this.options.context.showField(this.options.name):this.options.context.hideField(this.options.name)}})}.apply(e,i))||(t.exports=s)},function(t,e,n){"use strict";var i,s;i=[n(38)],void 0===(s=function(t){return t.extend({service:"foursquare"})}.apply(e,i))||(t.exports=s)},function(t,e,n){"use strict";var i,s;i=[n(38)],void 0===(s=function(t){return t.extend({service:"gmail",display_extra_key:"email"})}.apply(e,i))||(t.exports=s)},function(t,e,n){"use strict";var i,s;i=[n(105),n(20),n(25)],void 0===(s=function(t,e,n){return t.extend({_fetchSuggestions:function(){var t,i=this.options.context.getSchemaformData(),s=i.properties;for(var o in s)s.hasOwnProperty(o)&&s[o].input&&"gmail_account"===s[o].input.id&&(t=i.ingredientConfig[o]);return new e(function(e,i){n.request("https://www.googleapis.com/gmail/v1/users/me/labels",{proxy:"oauth",method:"get",cache:0,service:"gmail",type:"json",connect:t,onComplete:function(t){t&&!t.error||i(new Error("Unable to fetch folder label list"));var n=t.labels||[];n=n.filter(function(t){return-1===["SENT","DRAFT","TRASH","SPAM"].indexOf(t.id)}).sort(function(t,e){return t.name.toLowerCase()>e.name.toLowerCase()?1:t.name.toLowerCase()<e.name.toLowerCase()?-1:0}),e(n)}})}).then(function(t){return t.map(function(t){return{fullValue:t.name}})})}})}.apply(e,i))||(t.exports=s)},function(t,e,n){"use strict";var i,s;i=[n(38)],void 0===(s=function(t){return t.extend({service:"google"})}.apply(e,i))||(t.exports=s)},function(t,e,n){"use strict";var i,s;i=[n(33)],void 0===(s=function(t){return t.extend({endpoint:"https://www.googleapis.com/analytics/v3/management/accounts",service:"google",label:"name",value:"id",errorLabel:_("No account found"),getData:function(t){return t.items},getFormatedOptions:function(t){return t.map(function(t){return{label:t[this.label],value:t[this.value]}},this)}})}.apply(e,i))||(t.exports=s)},function(t,e,n){"use strict";var i,s;i=[n(33)],void 0===(s=function(t){return t.extend({service:"google",label:"name",value:"id",errorLabel:_("No property found"),getData:function(t){return t.items},getEndpoint:function(){return"https://www.googleapis.com/analytics/v3/management/accounts/"+this.options.accountId+"/webproperties/"},getFormatedOptions:function(t){return t.map(function(t){return{label:t[this.label],value:t[this.value]}},this)}})}.apply(e,i))||(t.exports=s)},function(t,e,n){"use strict";var i,s;i=[n(33)],void 0===(s=function(t){return t.extend({service:"google",label:"name",value:"id",errorLabel:_("No view found"),getData:function(t){return t.items},getEndpoint:function(){return"https://www.googleapis.com/analytics/v3/management/accounts/"+this.options.accountId+"/webproperties/"+this.options.propertyId+"/profiles"},getFormatedOptions:function(t){return t.map(function(t){return{label:t[this.label],value:t[this.value]}},this)}})}.apply(e,i))||(t.exports=s)},function(t,e,n){"use strict";var i,s;i=[n(38)],void 0===(s=function(t){return t.extend({service:"googlecalendar"})}.apply(e,i))||(t.exports=s)},function(t,e,n){"use strict";var i,s;i=[n(33)],void 0===(s=function(t){return t.extend({endpoint:"https://www.googleapis.com/calendar/v3/users/me/calendarList",service:"googlecalendar",label:"summary",value:"id",errorLabel:_("No calendars found"),fillOptions:function(){this.options.ucid?(this.options.context.showField(this.options.name),this._parent()):this.options.context.hideField(this.options.name)},getDisplayValue:function(){return'"'+this.elements.input._getSelectedOptions()[0].getText()+'"'},getData:function(t){return t.items.filter(function(t){return!(this.options.owner&&"owner"!==t.accessRole)}.bind(this))}})}.apply(e,i))||(t.exports=s)},function(t,e,n){"use strict";var i,s;i=[n(38)],void 0===(s=function(t){return t.extend({service:"googledrive"})}.apply(e,i))||(t.exports=s)},function(t,e,n){"use strict";var i,s;i=[n(33)],void 0===(s=function(t){return t.extend({endpoint:"https://www.googleapis.com/drive/v3/files?fields=files&q=trashed=false and mimeType='application/vnd.google-apps.folder'",service:"googledrive",errorLabel:_("No folders found"),fillOptions:function(){this.options.ucid&&this._parent()},getFormatedOptions:function(t){var e=this,n=t.reduce(function(t,e){return t[e.id]=e,t},{}),i=function t(e){var i=n[e],s="";return i&&(i.parents&&i.parents.length&&(s+=t(i.parents[0])),s+="/"+i.name),s};return t.filter(function(t){return!e.options.onlyPublicFolders||t.permissions.some(function(t){return"anyone"===t.type})}).map(function(t){return{label:i(t.id),value:t.id}})},getData:function(t){return t.files}})}.apply(e,i))||(t.exports=s)},function(t,e,n){"use strict";var i,s;i=[n(33)],void 0===(s=function(t){return t.extend({endpoint:"https://www.googleapis.com/drive/v3/files?q=%27me%27+in+writers+andmimeType%3d%27application%2fvnd.google-apps.spreadsheet%27+and+trashed+%3d+false",service:"googledrive",label:"name",value:"id",errorLabel:_("No spreadsheets found"),fillOptions:function(){this.options.ucid?(this.options.context.showField(this.options.name),this._parent()):this.options.context.hideField(this.options.name)},getDisplayValue:function(){return'"'+this.elements.input._getSelectedOptions()[0].getText()+'"'},getData:function(t){return t.files}})}.apply(e,i))||(t.exports=s)},function(t,e,n){"use strict";var i,s;i=[n(33)],void 0===(s=function(t){return t.extend({endpoint:"",service:"googledrive",label:"id",value:"id",errorLabel:_("No worksheets found"),fillOptions:function(){this.options.ucid=this.options.context.getFieldValue("connect_id"),this.options.spreadsheetId&&this.options.ucid?(this.options.context.showField(this.options.name),this.endpoint="https://sheets.googleapis.com/v4/spreadsheets/{0}?includeGridData=false".format(this.options.spreadsheetId),this._parent()):this.options.context.hideField(this.options.name)},getDisplayValue:function(){return'"'+this.elements.input._getSelectedOptions()[0].getText()+'"'},getData:function(t){return t.sheets.map(function(t){return{id:t.properties.title}})}})}.apply(e,i))||(t.exports=s)},function(t,e,n){"use strict";var i,s;i=[n(33)],void 0===(s=function(t){return t.extend({endpoint:"https://api.netatmo.com/api/gethomedata",service:"netatmowelcome",errorLabel:_("No cameras found"),value:"name",label:"name",requestOptions:function(){var t=this.options.context.getSchemaformData();if(t.ingredientConfig.ucid&&t.ingredientConfig.homeid){this.homeid=t.ingredientConfig.homeid;var e={method:"get",cache:0,service:this.service,type:this.type,connect:t.ingredientConfig.ucid,onComplete:this.onListLoaded.bind(this)};this.doOauthRequest(this.getEndpoint(),e)}},getEndpoint:function(){return this.endpoint+"?home_id="+this.homeid},getData:function(t){return t.body.homes[0].cameras},isCompliant:function(t){return t.status&&"ok"===t.status&&t.body&&t.body.homes}})}.apply(e,i))||(t.exports=s)},function(t,e,n){"use strict";var i,s;i=[n(105),n(20),n(25)],void 0===(s=function(t,e,n){return t.extend({_fetchSuggestions:function(){var t,i,s=this.options.context.getSchemaformData(),o=s.properties;for(var a in o)o.hasOwnProperty(a)&&(o[a].input&&"netatmowelcome_account"===o[a].input.id?t=s.ingredientConfig[a]:o[a].input&&"netatmo_welcome"===o[a].input.id&&(i=s.ingredientConfig[a]));return new e(function(e,s){n.request("https://api.netatmo.com/api/gethomedata?home_id={0}".format(i),{proxy:"oauth",method:"get",cache:0,service:"netatmowelcome",type:"json",connect:t,onComplete:function(t){t&&!t.error||s(new Error("Unable to fetch person list"));var n=t.body.homes[0].persons||[];n=(n=n.filter(function(t){return t.hasOwnProperty("pseudo")})).sort(function(t,e){return t.pseudo.toLowerCase()>e.pseudo.toLowerCase()?1:t.pseudo.toLowerCase()<e.pseudo.toLowerCase()?-1:0}),e(n)}})}).then(function(t){return t.map(function(t){return{fullValue:t.pseudo}})})}})}.apply(e,i))||(t.exports=s)},function(t,e,n){"use strict";var i,s;i=[n(38)],void 0===(s=function(t){return t.extend({service:"instagram",display_extra_key:"username"})}.apply(e,i))||(t.exports=s)},function(t,e,n){"use strict";var i,s;i=[n(105),n(6)],void 0===(s=function(t,e){return t.extend({_fetchSuggestions:function(){return e.getTagsList().then(function(t){var e=[];return t.map(function(t){e.push({fullValue:t.name})}),e})}})}.apply(e,i))||(t.exports=s)},function(t,e,n){"use strict";var i,s;i=[n(38)],void 0===(s=function(t){return t.extend({service:"linkedin"})}.apply(e,i))||(t.exports=s)},function(t,e,n){"use strict";var i,s;i=[n(38)],void 0===(s=function(t){return t.extend({service:"medium"})}.apply(e,i))||(t.exports=s)},function(t,e,n){"use strict";var i,s;i=[n(38)],void 0===(s=function(t){return t.extend({service:"medium",formatOptionValue:function(t){return"https://medium.com/feed/@"+t.extra.username}})}.apply(e,i))||(t.exports=s)},function(t,e,n){"use strict";var i,s;i=[n(33),n(6)],void 0===(s=function(t,e){return t.extend({endpoint:"https://api.medium.com/v1/users/{userid}/publications",service:"medium",errorLabel:_("No publications found"),type:"json",requestOptions:function(t){var n=this,i={method:"get",cache:0,service:n.service,type:n.type,connect:t,onComplete:n.onListLoaded.bind(n)};e.getUserAccounts({type:"medium"}).done(function(t){t=t.filter(function(t){return t.id===+i.connect}),n.doOauthRequest(n.endpoint.replace("{userid}",t[0]&&t[0].connectId||""),i)})},getData:function(t){return t.data},isCompliant:function(t){var e=this.getData(t);return Array.isArray(e)},getFormatedOptions:function(t){var e=[{value:"",label:_("Your stories")}];return t.forEach(function(t){e.push({label:t.name,value:t.id})},this),e}})}.apply(e,i))||(t.exports=s)},function(t,e,n){"use strict";var i,s;i=[n(105),n(20),n(25)],void 0===(s=function(t,e,n){return t.extend({reloadSuggestions:!0,_fetchSuggestions:function(t){return new e(function(e,i){t||e([]),n.getJson("http://www.reddit.com/subreddits/search.json?q={0}".format(t),function(t){t.data&&t.data.children?e(t.data.children):i(new Error("Unable to fetch Subreddit list"))})}).then(function(t){return t.map(function(t){return{fullValue:t.data.url.match(/^\/r\/(.+)\//)[1]}})})}})}.apply(e,i))||(t.exports=s)},function(t,e,n){"use strict";var i,s;i=[n(38)],void 0===(s=function(t){return t.extend({service:"nest",fillOptions:function(t){this._parent(t,this.hideOnAccountSelected.bind(this))},hideOnAccountSelected:function(){this.elements.input._getOptions().length>1&&this.options.context.hideField(this.options.name)}})}.apply(e,i))||(t.exports=s)},function(t,e,n){"use strict";var i,s;i=[n(33)],void 0===(s=function(t){return t.extend({endpoint:"https://developer-api.nest.com/structures/",service:"nest",value:"structure_id",label:"name",errorLabel:_("No devices found"),getData:function(t){return Object.keys(t).map(function(e){return t[e]})}})}.apply(e,i))||(t.exports=s)},function(t,e,n){"use strict";var i,s;i=[n(415)],void 0===(s=function(t){return t.extend({device_key:"thermostats",devicesData:{},getFormatedOptions:function(t){var e=[],n=t.structures,i=t.devices[this.device_key];return Object.keys(i).forEach(function(t){var s=i[t];this.devicesData[t]={scale:s.temperature_scale.toLowerCase(),canHeatCool:s.can_heat&&s.can_cool},e.push({label:s.name+" - "+n[s.structure_id].name,value:t})},this),e},fillOptions:function(){this._parent(),this.options.context.hideField("temperatureHCMin"),this.options.context.hideField("temperatureHCMax"),this.options.context.hideField("temperature"),this.elements.input.addEvent("onChange",function(){this.devicesData[this.getValue()]?(this.options.context.setFieldValue("temperatureScale",this.devicesData[this.getValue()].scale),this.options.context.setFieldValue("canHeatCool",this.devicesData[this.getValue()].canHeatCool),this.options.context.showField("temperature"),this.devicesData[this.getValue()].canHeatCool?(this.options.context.showField("temperatureHCMin"),this.options.context.showField("temperatureHCMax")):(this.options.context.hideField("temperatureHCMin"),this.options.context.hideField("temperatureHCMax"))):(this.options.context.hideField("temperatureHCMin"),this.options.context.hideField("temperatureHCMax"),this.options.context.hideField("temperature"))}.bind(this))}})}.apply(e,i))||(t.exports=s)},function(t,e,n){"use strict";var i,s;i=[n(38)],void 0===(s=function(t){return t.extend({service:"netatmo"})}.apply(e,i))||(t.exports=s)},function(t,e,n){"use strict";var i,s;i=[n(33)],void 0===(s=function(t){return t.extend({endpoint:"https://api.netatmo.com/api/getthermostatsdata",service:"netatmo",value:"_id",label:"module_name",errorLabel:_("No modules found"),isCompliant:function(t){return t.status&&"ok"===t.status},getFormatedOptions:function(t){var e=t.body.devices.filter(function(t){return t._id===this.options.device_id}.bind(this))[0];return(e?e.modules:[]).map(function(t){return{value:t._id,label:t.module_name}})}})}.apply(e,i))||(t.exports=s)},function(t,e,n){"use strict";var i,s;i=[n(33)],void 0===(s=function(t){return t.extend({endpoint:"https://api.netatmo.com/api/getstationsdata",service:"netatmo",value:"_id",label:"module_name",errorLabel:_("No modules found"),isCompliant:function(t){return t.status&&"ok"===t.status},getFormatedOptions:function(t){var e=this.options.schema.input.options&&this.options.schema.input.options.filter||!1,n=[];return t.body.devices.forEach(function(t){e&&!t.data_type.includes(e)||n.push({value:t._id,label:t.station_name+" - "+t.module_name}),t.modules.map(function(i){e&&!i.data_type.includes(e)||n.push({value:t._id+"#"+i._id,label:t.station_name+" - "+i.module_name})})}),n}})}.apply(e,i))||(t.exports=s)},function(t,e,n){"use strict";var i,s;i=[n(33)],void 0===(s=function(t){return t.extend({endpoint:"https://api.netatmo.com/api/getthermostatsdata",service:"netatmo",value:"_id",label:"station_name",errorLabel:_("No thermostats found"),isCompliant:function(t){return t.status&&"ok"===t.status&&t.body&&t.body.devices},getDisplayValue:function(){return'"'+this.elements.input._getSelectedOptions()[0].getText()+'"'},getData:function(t){return t.body.devices}})}.apply(e,i))||(t.exports=s)},function(t,e,n){"use strict";var i,s;i=[n(33)],void 0===(s=function(t){return t.extend({endpoint:"https://api.netatmo.net/api/gethomedata",service:"netatmowelcome",value:"id",label:"name",errorLabel:_("No homes found"),isCompliant:function(t){return t.status&&"ok"===t.status&&t.body&&t.body.homes},getFormatedOptions:function(t){var e=[];return t.body.homes.forEach(function(t){e.push({value:t.id,label:t.name})}),e}})}.apply(e,i))||(t.exports=s)},function(t,e,n){"use strict";var i,s;i=[n(38)],void 0===(s=function(t){return t.extend({service:"netatmowelcome"})}.apply(e,i))||(t.exports=s)},function(t,e,n){"use strict";var i,s;i=[n(1),n(414),n(2)],void 0===(s=function(t,e,n){return e.extend({init:function(t){this._parent(t);var e=this.options.schema.input.computedOptions||{};Object.keys(e).filter(function(t){return!this.options[t]}.bind(this)).length?this.options.context.hideField(this.options.name):(this.options.context.showField(this.options.name),this.addEvent("onPostInject",this.initValue.bind(this)))},initValue:function(){var t=this.options.context.getFieldValue("bcc");if(!(this.options.value||this.options.blank||t&&t.length)){var e=n.NPD.productThreshold>1&&(n.Page.isMaster||n.Page.isDraft)?[]:[n.User.email];this.setValue(e)}}})}.apply(e,i))||(t.exports=s)},function(t,e,n){"use strict";var i,s;i=[n(1),n(8),n(32)],void 0===(s=function(t,e,n){return n.extend({getContent:function(){return this.elements.container||(this.elements.container=t.createElement("div",{class:this.getClassNames()}),this.elements.input=new e.Password(this.getInputOptions(this.options)),this.elements.input.inject(this.elements.container)),this.elements.container},setValue:function(t){this.elements.input.setValue(t)},getValue:function(){return this.elements.input.getValue()}})}.apply(e,i))||(t.exports=s)},function(t,e,n){"use strict";var i,s;i=[n(1),n(180),n(32)],void 0===(s=function(t,e,n){return n.extend({init:function(t){this._parent(t);var e="after_specific_date"===this.options.selectedStrategy?"showField":"hideField";this.options.context[e](this.options.name)},getContent:function(){return this.elements.container||(this.elements.container=t.createElement("div",{class:this.getClassNames(),html:this.elements.input=new e({title:"",calendarOptions:{className:"dark"},from:this.options.value?this.options.value.from:null,to:this.options.value?this.options.value.to:null,events:{onChangeRange:this.updateValue.bind(this)},enableAny:!("enableAny"in this.options)||this.options.enableAny,enableTo:!("enableTo"in this.options)||this.options.enableTo})})),this.elements.container},updateValue:function(t){this.elements.input.elements.periodAny.isChecked()?this.setValue({from:null,to:null}):this.setValue(t)},getValue:function(){return this.value},setValue:function(t){this.value=t,this.dispatchOnChange()}})}.apply(e,i))||(t.exports=s)},function(t,e,n){"use strict";var i,s;i=[n(38)],void 0===(s=function(t){return t.extend({service:"pocket"})}.apply(e,i))||(t.exports=s)},function(t,e,n){"use strict";var i,s;i=[n(1),n(2),n(32)],void 0===(s=function(t,e,n){return n.extend({getContent:function(){var n=_("You must mention @{0} in your tweet to fire this trigger.").format(e.Config.potion.twitter_account);return t.createElement("div",{class:this.getClassNames(),html:t.createElement("div",{class:"uwa-schemaform-message",text:n})})},setValue:function(){},getValue:function(){}})}.apply(e,i))||(t.exports=s)},function(t,e,n){"use strict";var i,s;i=[n(38)],void 0===(s=function(t){return t.extend({service:"pushbullet"})}.apply(e,i))||(t.exports=s)},function(t,e,n){"use strict";var i,s;i=[n(33)],void 0===(s=function(t){return t.extend({endpoint:"https://api.pushbullet.com/v2/devices",service:"pushbullet",label:"nickname",value:"iden",errorLabel:_("No devices found"),getData:function(t){return t.devices}})}.apply(e,i))||(t.exports=s)},function(t,e,n){"use strict";var i,s;i=[n(1),n(8),n(71),n(58),n(32),n(416),n(2),n(6)],void 0===(s=function(t,e,n,i,s,o,a,r){return s.extend(o,{name:"pushmail-content",fetchWidgets:function(){return r.myPushMailWidgets({pageId:a.Page.id}).then(function(t){var e=t.map(function(t){return t.modules}).reduce(function(t,e){return e.map(function(e){t[e.value]={id:e.value,fullValue:e.label&&/\S/.test(e.label)?e.label.unescapeHTML():e.name,extraLabel:e.extra_label?e.extra_label.unescapeHTML():"",maxCount:e.maxCount,category:this.getCategory(e.name)}}.bind(this)),t}.bind(this),{});this.tabs=t,this.widgets=e}.bind(this))},formatValue:function(t){var e=this.widgets[t],n={value:t,type:"widget"};return e.maxCount>1&&(n.count=String(Math.min(e.maxCount,5))),n},getExtraSuggestions:function(){return[{id:"separator",fullValue:_("Add separator"),category:"separator"}]},getArticlesOptions:function(t){for(var e=[],n=1,i=1;i<=t;i+=n)i>=20&&(n=i<50?10:50),e.push({value:i,label:i});return e},renderLineItemSelect:function(n,i){var s="";return n.count&&"deleted"!==n.category&&((s=new e.Select({options:this.getArticlesOptions(n.maxCount)})).setValue(n.count),s.addEvent("onChange",function(){var t=s.getValue()[0];this.editApp(i,"count",t)}.bind(this))),t.createElement("div",{class:"app-selector-item-select",html:s})},renderListItem:function(e,n){var i=this.widgets[e.value];return"separator"===e.type?(e.name=e.value,e.category=e.type):i?(e.name=i.fullValue||"",e.maxCount=i.maxCount,e.category=i.category,e.extraLabel=i.extraLabel):(e.name=_("this app has been deleted."),e.category="deleted"),t.createElement("li",{class:"app-selector-item "+(e.category||""),index:n,html:[t.createElement("div",{class:"app-selector-item-left",html:[this.renderLineItemIcon(e),this.renderLineItemTitle(e,n)]}),t.createElement("div",{class:"app-selector-item-right",html:[this.renderLineItemSelect(e,n),t.createElement("div",{class:"uwa-icon","data-icon":"p",title:_("Remove"),events:{click:this.removeApp.bind(this,n)}}),t.createElement("div",{class:"grab uwa-icon","data-icon":"$",title:_("Drag to reorder")})]})]})},getContent:function(){return this.elements.container||(this.elements.container=t.createElement("div",{class:"app-selector",html:[t.createElement("div",{class:"nv-schemaform-field uwa-schemaform-field",html:[t.createElement("div",{class:"uwa-schemaform-field-title",text:_("Add apps")}),t.createElement("div",{class:"nv-schemaform-field-wrapper uwa-schemaform-field-wrapper",html:[this.elements.input=new n({className:"app-selector-autocomplete",inputOptions:{attributes:{placeholder:_("Type to browse")}},adaptor:this.getAdaptor(),events:{onSetSuggestion:this.addApp.bind(this)}})]})]}),t.createElement("div",{class:"nv-schemaform-field uwa-schemaform-field",html:[this.elements.listContainer=t.createElement("ol",{class:"app-selector-reorderable-list"})]})]}),new i.Move({container:this.elements.listContainer,delegate:"li.app-selector-item .grab",centerHandles:!0,start:function(t){t.target=t.target.getClosest("li.app-selector-item")},handles:function(e){return e.target.addClassName("dragged"),e.placeholder=t.createElement("li",{class:"app-selector-item placeholder"}),e.target},enter:function(t){return t.placeholder},stop:function(t){t.handles.removeClassName("dragged"),t.handles.setStyles({left:null,top:null}),t.placeholder.isInjected()&&this.handleDrop(t)}.bind(this)})),this.elements.container},refreshListDisplay:function(){this.elements.listContainer.empty();var e=this.elements.container.getChildren()[1];this.getValue().length?(e.setStyles({display:"block","padding-top":"0px"}),t.clone(this.getValue()).map(function(t,e){this.renderListItem(t,e).inject(this.elements.listContainer)}.bind(this))):e.setStyle("display","none")}})}.apply(e,i))||(t.exports=s)},function(t,e,n){"use strict";var i,s;i=[n(2),n(50)],void 0===(s=function(t,e){return e.extend({init:function(e){this._parent(e),t.isIn3DDashboard()&&this.options.context.hideField(this.options.name)},getValue:function(){return this.elements.input.getValue()[0]}})}.apply(e,i))||(t.exports=s)},function(t,e,n){"use strict";var i,s;i=[n(1),n(2),n(288)],void 0===(s=function(t,e,n){return n.extend({init:function(t){this._parent(t),e.isIn3DDashboard()&&(this.options.context.hideField(this.options.name),this.setValue(!0))},getContent:function(){return this.elements.container||(this.elements.container=t.createElement("div",{class:this.getClassNames(),html:[t.createElement("div",{class:"uwa-schemaform-field-title",text:"To"})]}),this.labels={true:this.options.labels&&this.options.labels.true?this.options.labels.true:_("Yes"),false:this.options.labels&&this.options.labels.false?this.options.labels.false:_("No")},this.radioContainers=this.getRadioInputs(),Object.keys(this.radioContainers).forEach(function(t){this.radioContainers[t].inject(this.elements.container)},this),this.setValue()),this.elements.container}})}.apply(e,i))||(t.exports=s)},function(t,e,n){"use strict";var i,s;i=[n(1),n(8),n(32),n(6)],void 0===(s=function(t,e,n,i){return n.extend({name:"pushmail-test",init:function(t){this._parent(t),this.timeout=null,this.elements.message.setContent(_("Enter your test email and click send"))},getContent:function(){return this.elements.container||(this.elements.container=t.createElement("div",{class:this.getClassNames(),html:[t.createElement("div",{class:"uwa-schemaform-field-title",text:"Send a test email"}),t.createElement("div",{class:"uwa-schemaform-field-wrapper",html:[this.elements.input=new e.Text,new e.Button({className:"green",value:_("Send"),events:{onClick:this.sendPushmail.bind(this)}}),this.elements.message=t.createElement("div",{class:"uwa-schemaform-message"})]})]})),this.elements.container},isValidPushmail:function(t){var e={subject:_("subject"),sender_name:_("sender name"),reply_to:_("reply to"),content:_("content")},n=[];return Object.keys(e).map(function(i){t[i]&&t[i].length||n.push(_("{0} cannot be empty").format(e[i]))}),!n.length||(this.addInputError(n.join(", ")),!1)},sendPushmail:function(){var t=this.options.context;this.removeInputError();var e=this.elements.input.getValue()||"";if(e&&e.test("^[\\w_.+-]+@[\\w-]+\\.[\\w-.]+$")){var n={pushmail:{},forceRecipient:e};t.getAllFieldsName().map(function(e){n.pushmail[e]=t.getFieldValue(e)});var s=t.getSchemaformData().compound;s.id&&(n.actionId=s.id),this.isValidPushmail(n.pushmail)&&(clearTimeout(this.timeout),this.elements.message.setContent(_("Sending pushMail ...")),i.sendPushmail(n).then(function(){this.elements.message.setContent(_("PushMail has been sent!"))}.bind(this),function(){this.elements.message.setContent(_("Error when sending pushMail"))}.bind(this)).done(function(){this.timeout=setTimeout(function(){this.elements.message.setContent(_("Enter your test email and click send"))}.bind(this),5e3)}.bind(this)))}else this.addInputError(_("Please enter a valid email address (e.g., me@domain.com)"))},setValue:function(){},getValue:function(){return""}})}.apply(e,i))||(t.exports=s)},function(t,e,n){"use strict";var i,s;i=[n(1),n(8),n(23),n(2),n(32),n(6),n(84),n(408),n(409)],void 0===(s=function(t,e,n,i,s,o,a,r){return s.extend({name:"pushmail-theme",getDefaultValue:function(){return String(i.Config.pushmails.default_themes.selected)},init:function(t){this._parent(t),this.defaultThemes={},this.themes={},o.getNPDPushmailThemes().then(function(t){this.defaultThemes=t.defaultThemes,this.themes=t.themes;var e=this.getValue();e&&(this.themes[e]||this.defaultThemes[e])||this.setValue(this.getDefaultValue()),this.renderThemes()}.bind(this)).done()},renderThemes:function(){this.elements.themesContainer.empty();var t=Object.keys(this.themes).map(function(t){return this.themes[t]}.bind(this)).sort(function(t,e){return t.name===e.name?0:t.name>e.name?1:-1}),e=this.getDefaultValue();[e].concat(Object.keys(this.defaultThemes).filter(function(t){return t!==e})).map(function(t){this.buildThemeLine(String(t),"",this.defaultThemes[t].ucfirst()).inject(this.elements.themesContainer)}.bind(this)),this.buildThemeLine("","",_("Default")).inject(this.elements.themesContainer),t.map(function(t){this.buildThemeLine(t.id,t.userId,t.name).inject(this.elements.themesContainer)}.bind(this)),this.elements.themeScroller.getContent().setStyle("height",Math.min(this.elements.themesContainer.getSize().height,150))},buildThemeLine:function(n,s,o){var a=this.getValue()||"",r=[new e.Radio({className:"green",attributes:{name:"theme",value:n,checked:String(n)===a},events:{onChange:this.setValue.bind(this,n)}}),t.createElement("div",{class:"theme-title",text:o}),!i.isIn3DDashboard()&&t.createElement("a",{class:"uwa-icon",title:_("Preview theme"),"data-icon":"฿",events:{click:this.previewTheme.bind(this,n)}}),!i.isIn3DDashboard()&&t.createElement("a",{class:"double-window uwa-icon",title:_("Duplicate theme"),events:{click:this.createTheme.bind(this,n)}})];return n&&s===parseInt(i.User.id)&&!i.isIn3DDashboard()&&(r=r.concat([t.createElement("a",{class:"edit uwa-icon",title:_("Edit theme"),events:{click:this.editTheme.bind(this,n)}}),t.createElement("a",{class:"uwa-icon",title:_("Delete theme"),"data-icon":"Ź",events:{click:this.deleteTheme.bind(this,n)}})])),t.createElement("div",{class:"theme",html:r})},getContent:function(){return this.elements.container||(this.elements.container=t.createElement("div",{class:this.getClassNames()}),this.elements.themeHeader=t.createElement("div",{class:"uwa-schemaform-field-title",text:"PushMail Theme"}),this.elements.themeHeader.inject(this.elements.container),this.elements.buttonContainer=t.createElement("div",{class:this.getClassNames("-button-container")}).inject(this.elements.themeHeader),i.isIn3DDashboard()||(this.elements.importTheme=new e.File({className:"dark-grey",events:{onChange:this._importTheme.bind(this)},buttonOnly:!0,button:[{tag:"span",text:"Import a theme"},{tag:"span",class:"uwa-icon download"}]}),this.elements.importTheme.inject(this.elements.buttonContainer)),this.elements.themesWrapper=t.createElement("div",{class:this.getClassNames("-themes-wrapper")}).addContent(this.elements.themeScroller=new n({shadows:!0})),this.elements.themesWrapper.inject(this.elements.container),this.elements.themesContainer=t.createElement("div",{class:this.getClassNames("-themes-container")}),this.elements.themeScroller.getInnerElement().addClassName(this.getClassNames("-inner")).setContent(this.elements.themesContainer),i.isIn3DDashboard()||(this.elements.addTheme=t.createElement("a",{class:"add-theme uwa-icon","data-icon":"3",text:_("Create a new theme"),events:{click:this.createTheme.bind(this,null)}}),this.elements.addTheme.inject(this.elements.container))),this.elements.container},createTheme:function(t){(t>0?o.duplicateNPDPushmailTheme({pId:t}):o.createNPDPushmailTheme({defaultThemeId:t})).then(function(t){var e=t.theme;this.themes[e.id]=e,this.editTheme(e.id),this.setValue(e.id)}.bind(this)).done()},_importTheme:function(t){o.importNPDPushmailTheme({file:t.target.files[0]}).then(function(t){this.themes[t.theme.id]=t.theme,this.setValue(t.theme.id),this.renderThemes(),this.editTheme(t.theme.id)}.bind(this)).done()},previewTheme:function(e){var n=e>0?this.themes[e].name:this.defaultThemes[e];o.previewNPDPushmailTheme({themeId:e}).done(function(e){var i=new a({title:_("{0} preview").format(n),className:"pushmail-theme-modal",size:{width:800,height:window.innerHeight-40,top:40},closeable:!1}),s=t.createElement("iframe",{class:this.getClassNames("-preview")});i.inject(document.body),i.setContent(s),i.addEvent("onClose",function(){i.destroy()}),s.contentDocument.open(),s.contentDocument.write(e.rendered),s.contentDocument.close(),s.setStyle("border","none"),i.open()}.bind(this))},editTheme:function(t){var e=this.themes[t];if(e){var n=new r({managerMode:!1,configuration:e,defaultConfiguration:e.default}),i=new a({title:_("PushMail theme edition"),className:"pushmail-theme-modal",size:{width:800,height:window.innerHeight-40,top:40},closeable:!1});i.inject(document.body),i.setContent(n),i.addEvent("onClose",function(){this.themes[t]=n.getOption("configuration"),i.destroy(),this.renderThemes()}.bind(this)),i.open()}},deleteTheme:function(t){t&&(this.getValue()===String(t)&&this.setValue(this.getDefaultValue()),o.deleteNPDPushmailTheme({pId:t}).then(function(){delete this.themes[t],this.renderThemes()}.bind(this)).done())},setValue:function(t){this.value=String(t),this.dispatchOnChange()},getValue:function(){return this.value}})}.apply(e,i))||(t.exports=s)},function(t,e,n){"use strict";var i,s;i=[n(1),n(8),n(32),n(416),n(2),n(6)],void 0===(s=function(t,e,n,i,s,o){return n.extend(i,{name:"pushweb-content",fetchWidgets:function(){return o.myPushWebWidgets({pageId:s.Page.id}).then(function(t){var e=t.map(function(t){return t.modules}).reduce(function(t,e){return e.map(function(e){t[e.value]={id:e.value,fullValue:/\S/.test(e.label)?e.label.unescapeHTML():e.name,extraLabel:e.extra_label?e.extra_label.unescapeHTML():"",type:e.name.toLowerCase(),category:this.getCategory(e.name)}}.bind(this)),t}.bind(this),{});this.tabs=t,this.widgets=e,this.displayOptions={contentAccessControl:!0}}.bind(this))},formatValue:function(t){return{type:"widget",value:t,fullWidth:!1,extra:{filters:!1,articles:!1}}},getExtraSuggestions:function(){var t=[{id:"separator",fullValue:_("Add separator"),category:"separator"}];return this.getValue().every(function(t){return"contentAccessControl"!==t.type})&&t.push({id:"contentAccessControl",fullValue:_("Add Content access control"),category:"contentAccessControl"}),t},renderLineItemWidth:function(e,n){if("widget"===e.type)return t.createElement("span",{class:"uwa-icon width-selector"+(e.fullWidth?" active":""),title:_("Force full width"),"data-icon":"ŏ",events:{click:this.editApp.bind(this,n,"fullWidth",!e.fullWidth)}})},toggleDropdownOption:function(t){this.displayOptions[t]=!this.displayOptions[t],this.refreshListDisplay()},shouldDisplayExtraOptions:function(t){return"contentAccessControl"===t.category||-1!==["socialpack_analytics","smartfilter"].indexOf(t.subType)},renderContentAccessControlExtraOptions:function(n,i,s){return"usePassword"===n?new e.Text({attributes:{value:i.value.password||"",disabled:!i.value.usePassword},events:{onChange:function(t){var e=i.value;e.password=t.target.value,this.editApp(s,"value",e)}.bind(this)}}):"useLeadForm"===n?[t.createElement("div",{html:t.createElement("span",{text:_("Send to")})}),t.createElement("div",{html:[new e.Text({attributes:{value:i.value.sendTo||"",disabled:!i.value.useLeadForm},events:{onChange:function(e){var n=t.clone(i.value);n.sendTo=e.target.value,this.editApp(s,"value",n)}.bind(this)}})]})]:""},renderContentAccessControlExtra:function(n,i){var s={usePassword:_("Protect with password"),useLeadForm:_("Require contact information (Name, Email, Phone, Organization, Location)")};return t.createElement("div",{class:"app-selector-item-extra-info",html:[["usePassword","useLeadForm"].map(function(o){return[t.createElement("div",{html:[new e.Checkbox({className:"green",attributes:{checked:n.value[o]},events:{onChange:function(){var e=t.clone(n.value);e[o]=!n.value[o],this.editApp(i,"value",e)}.bind(this)}}),s[o],t.createElement("div",{class:"app-selector-item-extra-info-options",html:this.renderContentAccessControlExtraOptions(o,n,i)})]})]}.bind(this))]})},renderLineItemExtraOptions:function(n,i){return this.shouldDisplayExtraOptions(n)?"contentAccessControl"===n.type&&this.displayOptions.contentAccessControl?this.renderContentAccessControlExtra(n,i):this.displayOptions[n.value]?t.createElement("div",{class:"app-selector-item-extra-info",html:[t.createElement("div",{html:[new e.Checkbox({className:"green",attributes:{checked:n.extra.filters},events:{onChange:function(){var e=t.clone(n.extra);e.filters=!e.filters,this.editApp(i,"extra",e)}.bind(this)}}),_("Show content filters")]}),"smartfilter"!==n.subType?t.createElement("div",{html:[new e.Checkbox({className:"green",attributes:{checked:n.extra.articles},events:{onChange:function(){var e=t.clone(n.extra);e.articles=!e.articles,this.editApp(i,"extra",e)}.bind(this)}}),_("Show relative articles")]}):""]}):void 0:""},renderListItem:function(e,n){var i=this.widgets[e.value],s="";"separator"===e.type?(e.name=e.value,e.category=e.type):"contentAccessControl"===e.type?(e.name=_("Content Access Control"),e.extraLabel=_("Content below this point will be restricted"),e.category=e.type):i?(e.name=i.fullValue||"",e.subType=i.type,e.extraLabel=i.extraLabel,e.category=i.category):(e.name=_("this app has been deleted."),e.category="deleted");var o="contentAccessControl"===e.type?e.type:e.value;return this.shouldDisplayExtraOptions(e)&&(s=this.displayOptions[o]?"j":"l"),t.createElement("li",{class:"app-selector-item "+(e.category||""),index:n,html:[t.createElement("div",{class:"app-selector-item-left",html:[this.renderLineItemIcon(e),this.renderLineItemTitle(e,n)]}),t.createElement("div",{class:"app-selector-item-right",html:[this.renderLineItemWidth(e,n),t.createElement("div",{class:"uwa-icon","data-icon":"p",title:_("Remove"),events:{click:this.removeApp.bind(this,n)}}),t.createElement("div",{class:"grab uwa-icon","data-icon":"$",title:_("Drag to reorder")}),t.createElement("div",{class:"uwa-icon",title:_("Extra options"),"data-icon":s,events:{click:this.toggleDropdownOption.bind(this,o)}})]}),this.renderLineItemExtraOptions(e,n)]})}})}.apply(e,i))||(t.exports=s)},function(t,e,n){"use strict";var i,s;i=[n(1),n(8),n(124),n(32)],void 0===(s=function(t,e,n,i){return i.extend({getContent:function(){var i=this.options.value||{};return this.elements.container||(this.elements.container=t.createElement("div",{class:"nv-schemaform-field uwa-schemaform-field",html:[t.createElement("div",{class:"uwa-schemaform-field-title",text:_("Title")}),t.createElement("div",{class:"nv-schemaform-field-wrapper uwa-schemaform-field-wrapper",html:[this.elements.input=new e.Text({value:i.title||"",events:{onChange:this.setValueFromInputs.bind(this)}}),this.elements.colorPicker=new n({value:i.color||"000000",valueInput:!1,events:{onChange:this.setValueFromInputs.bind(this)}}),t.createElement("div",{class:"last-update",html:[this.elements.checkbox=new e.Checkbox({className:"green",attributes:{checked:i.displayLastUpdate},events:{onChange:this.setValueFromInputs.bind(this)}}),t.createElement("label",{text:_("Display last update")})]})]})]})),this.elements.container},setValueFromInputs:function(){this.setValue({title:this.elements.input.getValue(),color:this.elements.colorPicker.getValue(),displayLastUpdate:this.elements.checkbox.isChecked()})},getDisplayValue:function(){return'"'+this.elements.input.getValue()+'"'},getValue:function(){return this.value},setValue:function(t){this.value=t,this.dispatchOnChange()}})}.apply(e,i))||(t.exports=s)},function(t,e,n){"use strict";var i,s;i=[n(1),n(8),n(2),n(32)],void 0===(s=function(t,e,n,i){return i.extend({init:function(t){this._parent(t),this.options.titleOptions&&this.options.titleOptions.title?(this.options.context.showField(this.options.name),this.options.value||this.setValueFromTitle()):this.options.context.hideField(this.options.name)},setValueFromTitle:function(){this.options.titleOptions.title&&this.setValue(this.options.titleOptions.title)},getContent:function(){return this.elements.container||(this.elements.container=t.createElement("div",{class:this.getClassNames()}),this.elements.input=new e.Text,this.elements.input.setValue(this.value||""),this.elements.input.addEvent("onChange",function(){this.setValue(this.elements.input.getValue())}.bind(this)),this.elements.input.inject(this.elements.container),t.createElement("div",{class:"refresh-button uwa-icon refresh",title:_("Generate URL from title"),events:{click:this.setValueFromTitle.bind(this)}}).inject(this.elements.container),this.elements.message=t.createElement("div",{class:"uwa-schemaform-message"}).inject(this.elements.container)),this.elements.container},sanitizeValue:function(t){return t.toLowerCase().trim().replace(/\s+/g,"-").replace(/[^\w-]+/g,"").replace(/--+/g,"-").replace(/^-+/,"").replace(/-+$/,"")},setValue:function(t){this.removeInputError(),t=this.sanitizeValue(t),this.elements.input.setValue(t),this.value=t;var e=this.getDisplayValue(t);this.elements.message.setContent(_("PushWeb will be available at {0}").format('<a href="'+e+'">'+e+"</a>")),this.dispatchOnChange()},getValue:function(){return this.value},getDisplayValue:function(){return encodeURI(n.Config.urls.base+"/pushweb/"+this.getValue())}})}.apply(e,i))||(t.exports=s)},function(t,e,n){"use strict";var i,s;i=[n(1),n(8),n(32)],void 0===(s=function(t,e,n){return n.extend({getContent:function(){if(!this.elements.container){this.elements.container=t.createElement("div",{class:this.getClassNames()});var e=new Map(this.options.values);this.radioContainers=this.getRadioInputs(e);var n=this.radioContainers.values(),i=Array.isArray(n),s=0;for(n=i?n:n[Symbol.iterator]();;){var o;if(i){if(s>=n.length)break;o=n[s++]}else{if((s=n.next()).done)break;o=s.value}o.inject(this.elements.container)}this.setValue()}return this.elements.container},getRadioInputs:function(n){var i=this,s=new Map;return this.radioInputs=new Map,n.forEach(function(n,o){var a=t.createElement("label",{class:i.getClassNames("-label"),text:_(n)}),r=new e.Radio(i.getInputOptions({className:"green",attributes:{name:i.options.name,value:o}})).inject(a,"top");i.radioInputs.set(o,r),s.set(o,a)}),s},setValue:function(t){this.radioInputs.forEach(function(t){t.check(!1)}),t?this.radioInputs.get(t).check(!0):this.radioInputs.values().next().value.check(!0)},getValue:function(){var t;return this.radioInputs.forEach(function(e,n){e.isChecked()&&(t=n)}),t}})}.apply(e,i))||(t.exports=s)},function(t,e,n){"use strict";var i,s;i=[n(1),n(8),n(2),n(32)],void 0===(s=function(t,e,n,i){return i.extend({init:function(t){this._parent(t),this.options.value||this.createRandomValue()},getContent:function(){return this.elements.container||(this.elements.container=t.createElement("div",{class:this.getClassNames()}),this.elements.input=new e.Text(this.getInputOptions(this.options)),this.elements.input.inject(this.elements.container),this.elements.input.getInputElement().addEvent("keyup",function(){this.setValue(this.getValue())}.bind(this)),t.createElement("div",{class:"refresh-button uwa-icon refresh",events:{click:this.createRandomValue.bind(this)}}).inject(this.elements.container),this.elements.message=t.createElement("div",{class:"uwa-schemaform-message"}).inject(this.elements.container)),this.elements.container},createRandomValue:function(){this.setValue(this.getRandomId()),this.dispatchEvent("onChange",[this.getValue()])},getFormat:function(){if(this.options.schema.input.hasOwnProperty("options")&&this.options.schema.input.options.hasOwnProperty("format"))return this.options.schema.input.options.format},getRandomId:function(){var t=Math.floor(100*Math.random()),e=(new Date).getTime(),n=t.toString()+e.toString();return n=parseInt(n,10).toString(36)},getNotice:function(t){var e=this.getFormat();return"mail"===e?_("Send your emails to {0}").format(t):"url"===e?_("Make your call to {0}").format(t):void 0},formatDisplayValue:function(t){var e=this.getFormat();return"mail"===e?t+"@potion."+n.Config.root_domain:"url"===e?n.Config.urls.api+"/events/trigger/"+t:void 0},setValue:function(t){this.elements.input.setValue(t.toLowerCase());var e=this.getNotice(this.formatDisplayValue(t.toLowerCase()));this.elements.message.setContent(e)},getValue:function(){return this.elements.input.getValue().toLowerCase()},getDisplayValue:function(){var t=this.elements.input.getValue();return this.formatDisplayValue(t)}})}.apply(e,i))||(t.exports=s)},function(t,e,n){"use strict";var i,s;i=[n(38)],void 0===(s=function(t){return t.extend({service:"reddit"})}.apply(e,i))||(t.exports=s)},function(t,e,n){"use strict";var i,s;i=[n(81)],void 0===(s=function(t){return t.extend({getValue:function(){return this._parent().replace(/\/u\//,"")},getDisplayValue:function(){return"/user/"+this._parent()}})}.apply(e,i))||(t.exports=s)},function(t,e,n){"use strict";var i,s;i=[n(1),n(16),n(8),n(59),n(71),n(43),n(32),n(6),n(21),n(117),n(4),n(109)],void 0===(s=function(t,e,n,i,s,o,a,r,l,c,u,h){return a.extend({name:"search-context",init:function(t){this._parent(t),this.options.value||this.setValue({type:"dashboard"})},getContent:function(){return this.elements.container||(this.inputs={radio:{}},this.elements.container=t.createElement("div",{class:this.getClassNames(),html:[t.createElement("div",{html:[this.inputs.radio.dashboard=new n.Radio({className:"green",attributes:{name:"within",value:"dashboard",id:"within-dashboard"},events:{onChange:this.switchContextType.bind(this)}}),t.createElement("label",{for:"within-dashboard",text:_("Dashboard")})]}),t.createElement("div",{html:[this.inputs.radio.context=new n.Radio({className:"green",attributes:{name:"within",value:"context",id:"within-context"},events:{onChange:this.switchContextType.bind(this)}}),t.createElement("label",{for:"within-context",text:_("Tab, library or feed")})]}),t.createElement("div",{class:this.getClassNames("-context-selector"),html:[this.inputs.autocomplete=new s({className:"search-context-autocomplete",inputOptions:{attributes:{placeholder:_("Type to browse")}},adaptor:this.getAdaptor(),events:{onSetSuggestion:this.addContext.bind(this)}})]}),this.elements.selectedItems=t.createElement("div",{class:this.getClassNames("-selected-items")})]})),this.elements.container},switchContextType:function(t){this.setValue({type:t.target.value,context:[]})},addContext:function(t){var e=this.inputs.autocomplete.getInputControl();e.focus(!1),e.setValue("");var n=Object.assign({},this.getValue());n.context||(n.context=[]),n.context.push({type:t.type,value:t.fullValue}),this.setValue(n)},removeContext:function(t){var e=Object.assign({},this.getValue());e.context.splice(t,1),this.setValue(e)},getAdaptor:function(){return o.extend({init:function(t){this._parent(t),this.cache={}},retrieveTabsAndFeeds:function(t){return r.getSearchData({prefix:["library","tab","feed"],start:t})},getSuggestions:function(t){return t=t.toLowerCase(),this.cache[t]?e.resolve(this.cache[t]):this.retrieveTabsAndFeeds(t).then(function(n){return this.cache[t]=Object.keys(n).map(function(t){return n[t].map(function(e){return{fullValue:e.label,title:e.label,type:t,data:"feed"===t?h.factory(e):"tab"===t?l.getById(e.id).dataObj:e}})}).reduce(function(t,e){return t.concat(e)}),e.resolve(this.cache[t])}.bind(this))},renderSuggestions:function(e){var n={},i={tab:"double-window",feed:"rss",library:"book"},s={tab:function(t,e){c.setIconSrc(e,t.iconConfig||t.icon)},feed:function(t,e){t.getFaviconURL?e.src=t.getFaviconURL(""):t.getLink()?e.src=u.getFaviconUrl(t.getLink()):(e.src=u.BLANK_IMAGE_URL,e.addClassName("empty-icon"))}};return e.map(function(t){n[t.type]||(n[t.type]=[]),n[t.type].push(t)}),Object.keys(n).map(function(e){return{tag:"div",class:"category uwa-icon "+(i[e]||"magnifying-glass"),html:n[e].map(function(n){var i;return s[e]&&(i=t.createElement("img",{class:"icon"}),s[e](n.data,i)),{tag:"div",class:"suggestion"+(n.data.isLibrary&&n.data.isLibrary()?" is-lib":""),html:[i,n.fullValue.escapeHTML()]}},this)}})}})},updateSelectedItems:function(){this.elements.selectedItems.empty();var t=this.getValue();t&&"context"===t.type&&t.context.map(function(t,e){new i({value:t.value,title:t.value,className:"selected "+t.type,closable:!0,events:{onClose:this.removeContext.bind(this,e)}}).inject(this.elements.selectedItems)}.bind(this))},setValue:function(t){this.removeInputError(),this.value=t,this.inputs.radio[t.type].check(),this.inputs.autocomplete.getInputControl().setDisabled("dashboard"===t.type),this.updateSelectedItems(),this.dispatchOnChange()},getValue:function(){return this.value}})}.apply(e,i))||(t.exports=s)},function(t,e,n){"use strict";var i,s;i=[n(50),n(97)],void 0===(s=function(t,e){return t.extend({fillOptions:function(){var t=[];e.getSentiments().done(function(e){e.sentiments.forEach(function(e){t.push({label:e.name,value:e.name})}),this.elements.input.putOptions(t),this.options.value&&this.elements.input.setValue(this.options.value)}.bind(this))}})}.apply(e,i))||(t.exports=s)},function(t,e,n){"use strict";var i,s;i=[n(105),n(6)],void 0===(s=function(t,e){return t.extend({_fetchSuggestions:function(){return e.getCurationSentiments().then(function(t){var e=[];return t.sentiments.map(function(t){e.push({fullValue:t.name})}),e})}})}.apply(e,i))||(t.exports=s)},function(t,e,n){"use strict";var i,s;i=[n(38)],void 0===(s=function(t){return t.extend({service:"slack"})}.apply(e,i))||(t.exports=s)},function(t,e,n){"use strict";var i,s;i=[n(33)],void 0===(s=function(t){return t.extend({endpoint:"https://slack.com/api/channels.list",service:"slack",label:"name",value:"id",errorLabel:_("No channels found"),fillOptions:function(){this.options.ucid?(this.options.context.showField(this.options.name),this._parent()):this.options.context.hideField(this.options.name)},getDisplayValue:function(){return'"'+this.elements.input._getSelectedOptions()[0].getText()+'"'},getData:function(t){return t.channels.filter(function(t){return!t.is_archived})}})}.apply(e,i))||(t.exports=s)},function(t,e,n){"use strict";var i,s;i=[n(20),n(43),n(120),n(25)],void 0===(s=function(t,e,n,i){return n.extend({userToIm:{},init:function(t){this._parent(t),this.options.ucid?(this.options.context.showField(this.options.name),Object.keys(this.userToIm).length||this.fetchImIds()):this.options.context.hideField(this.options.name)},setInitialValue:function(t){this.fetchImIds().done(this._parent.bind(this,t))},getDisplayValue:function(){return'"'+this._parent()+'"'},queryApi:function(e){return this.spinner.start(),new t(function(t,n){i.request(e,{proxy:"oauth",method:"get",cache:0,service:"slack",type:"json",connect:this.options.ucid,onComplete:function(e){this.spinner.stop(),e.ok?t(e):e.error&&n(e.error)}.bind(this)})}.bind(this))},fetchImIds:function(){return this.queryApi("https://slack.com/api/im.list").then(function(t){this.userToIm=t.ims.reduce(function(t,e){return t[e.user]=e,t},{})}.bind(this))},getAdaptor:function(){var n=this;return e.extend({cache:null,getSuggestions:function(){return this.cache?t.resolve(this.cache):n.options.ucid?n.queryApi("https://slack.com/api/users.list").then(function(t){return this.cache=t.members.map(function(t){var e=n.userToIm[t.id];return{fullValue:t.name,id:e.id}}),this.cache}.bind(this)):t.resolve([])},getDisplayValue:function(e){var i=Object.keys(n.userToIm).reduce(function(t,i){return n.userToIm[i].id===e?i:t},0);if(!n.options.ucid||!i)return t.resolve("");var s="https://slack.com/api/users.info?user="+i;return n.queryApi(s).then(function(t){return t.user.name})},renderSuggestions:function(t){return t.map(function(t){return{tag:"div",class:"suggestion notab",html:[t.fullValue.escapeHTML()]}})}})}})}.apply(e,i))||(t.exports=s)},function(t,e,n){"use strict";var i,s;i=[n(81)],void 0===(s=function(t){return t.extend({init:function(t){this._parent(t),this.options.ucid?(this.options.context.showField(this.options.name),this.elements.input.setDisabled(!0),this.elements.input.hide(),this.doOauthRequest("https://slack.com/api/team.info",{method:"get",cache:0,service:"slack",type:"json",connect:this.options.ucid,onComplete:this.handleRequest.bind(this)})):this.options.context.hideField(this.options.name)},handleRequest:function(t){this.elements.input.show(),t&&t.team?(this.setValue(t.team.id),this.elements.input.setValue(t.team.name)):(this.setValue(""),this.elements.input.setValue(_("Team not found"))),this.dispatchOnChange()},getDisplayValue:function(){return'"'+this.elements.input.getValue()+'"'},setValue:function(t){this.value=t},getValue:function(){return this.value}})}.apply(e,i))||(t.exports=s)},function(t,e,n){"use strict";var i,s;i=[n(57),n(43),n(6),n(2),n(120)],void 0===(s=function(t,e,n,i,s){var o=function(t){return n.proxyStock({value:encodeURIComponent(t),userLanguage:i.Globalization.userLanguage.replace("_","-"),userLocale:i.Globalization.userLocale})};return s.extend({getAdaptor:function(){var n=this;return e.extend({_queryCache:{},getDisplayValue:function(e){return o(e).done(function(n){if(n){var i=t.detect(n.ResultSet.Result,function(t){return t.symbol.toLowerCase()===e.toLowerCase()});if(i)return i.name;throw new Error("no match found")}throw new Error("no response")})},getSuggestions:function(t){return""===t?null:(n.spinner.start(),this.queryStocksData(t).then(function(t){return n.spinner.stop(),t.map(function(t){return{fullValue:t.symbol+" - "+t.name+" - "+t.exchDisp,id:t.symbol,tab:t.exchDisp}},this)}))},queryStocksData:function(t){return this._queryCache.hasOwnProperty(t)||(this._queryCache[t]=o(t).done(function(t){if(t)return t.ResultSet.Result;throw new Error("no response")})),this._queryCache[t]}})}})}.apply(e,i))||(t.exports=s)},function(t,e,n){"use strict";var i,s;i=[n(1),n(13),n(20),n(43),n(120),n(17),n(156),n(117),n(6)],void 0===(s=function(t,e,n,i,s,o,a,r,l){return s.extend({typeDelay:500,init:function(t){this._parent(t),this.options.context.getFieldValue("feed")||this.options.context.setFieldValue("feed",this.value)},setValue:function(t){this._parent(t),this.options.context.setFieldValue("feed",this.displayValue)},getAdaptor:function(){var s=this;return i.extend({suggestionFeeds:[],init:function(){this._parent()},getDisplayValue:function(t){if("*"===t)return n.resolve(_("Any feed"));if(e.isAbsoluteUrl(t)&&e.isValidUrl(t)&&t.match(/^https?:\/\//i))return n.resolve(t);var i=a.factory({id:t}).getTitle();return i||(i=s.options.context.getFieldValue("feed")),n.resolve(i)},getSuggestions:function(t){t=t.trim();var i=this;return this.suggestionFeeds.length&&t===this.searchValue?n.resolve(this.suggestionFeeds):(this.searchValue=t,this.suggestionFeeds=[],e.isAbsoluteUrl(t)&&e.isValidUrl(t)&&t.match(/^https?:\/\//i)?(this.suggestionFeeds.push({fullValue:t,id:"",icon:App.Utils.BLANK_IMAGE_URL}),n.resolve(this.suggestionFeeds)):(this.suggestionFeeds.push({fullValue:_("Any feed"),id:"*",icon:App.Utils.BLANK_IMAGE_URL}),l.getSearchData({prefix:["feed"],start:t}).done(function(t){for(var e in t)t.hasOwnProperty(e)&&t[e].forEach(function(t){t.title=t.label;var e=a.factory(t),n=o.getByStreamId(e.getId()),s=n[0]&&n[0].getTitle()&&!n[1]?n[0].getTitle():e.getTitle();s&&i.suggestionFeeds.push({fullValue:s,icon:e.getFaviconURL(""),id:e.getId(),data:e})});return i.suggestionFeeds})))},renderSuggestions:function(e){return e.map(function(e){var n=t.createElement("img",{src:e.icon,class:"icon"});return{tag:"div",class:"suggestion flex"+(e.data&&e.data.isLibrary()?" is-lib":""),html:[n,{tag:"span",class:"stream-title",text:e.fullValue}]}})}})}})}.apply(e,i))||(t.exports=s)},function(t,e,n){"use strict";var i,s;i=[n(50),n(17)],void 0===(s=function(t,e){return t.extend({fillOptions:function(){var t=[];e.getAll().forEach(function(e){"ExtendedVibes"===e.getName()&&"twitter-search"===e.getData().streamTypes&&t.push({label:e.getTitle(),value:e.getData().streamIds})},this),this.elements.input.putOptions(t)}})}.apply(e,i))||(t.exports=s)},function(t,e,n){"use strict";var i,s;i=[n(50),n(17),n(97)],void 0===(s=function(t,e,n){return t.extend({fillOptions:function(){var t,i,s=[],o=function(e){var n;t.analyticsIds.split(",").forEach(function(o,a){if(o){var r=i.detect(function(t){return t.id===o}),l=(t.names?t.names.split(","):[])[a]||r&&r.title;e?e.forEach(function(t){(n=o+"."+t.id)!==this.options.unavailable&&s.push({value:n,label:l+" - "+t.name})},this):(n=o+"."+(t.grouping?t.grouping:t.types.split(",")[a]))!==this.options.unavailable&&s.push({value:n,label:l})}},this),this.elements.input.putOptions(s,!0)}.bind(this);if(this.options.wid){this.options.context.showField(this.options.name);var a=e.getById(this.options.wid);t=a.getData(),i=a.getAnalytics();var r=t.grouping,l=[];if(r&&r.match(/sentiment/))n.getSentiments().done(function(t){t.sentiments.forEach(function(t){l.push({name:t.name,id:r+"_"+t.id})}),o(l)});else if(r&&r.match(/emotion/)){var c={emotion_positive__pub_date:_("Positive"),emotion_neutral__pub_date:_("Neutral"),emotion_negative__pub_date:_("Negative")};r.split(",").forEach(function(t){l.push({name:c[t],id:t})}),o(l)}else o()}else this.options.context.hideField(this.options.name)}})}.apply(e,i))||(t.exports=s)},function(t,e,n){"use strict";var i,s;i=[n(20),n(43),n(120),n(25)],void 0===(s=function(t,e,n,i){return n.extend({setInitialValue:function(t){this.displayValue=t,this.value=t,this.elements.input.setValue(t)},getAdaptor:function(){return e.extend({getSuggestions:function(e){if(e)return new t(function(t,n){i.getJson("http://www.reddit.com/subreddits/search.json?q={0}".format(e),function(e){e.data&&e.data.children?t(e.data.children):n(new Error("Unable to fetch Subreddit list"))})}).then(function(t){return t.map(function(t){return{fullValue:t.data.url.match(/^\/r\/(.+)\//)[1]}})})},renderSuggestions:function(t){return t.map(function(t){return{tag:"div",class:"suggestion notab",html:[t.fullValue.escapeHTML()]}})}})}})}.apply(e,i))||(t.exports=s)},function(t,e,n){"use strict";var i,s;i=[n(50)],void 0===(s=function(t){return t.extend({fillOptions:function(){this.options.section&&"top"===this.options.section?(this.options.context.showField(this.options.name),this.elements.input.putOptions(this.options.options)):this.options.context.hideField(this.options.name)}})}.apply(e,i))||(t.exports=s)},function(t,e,n){"use strict";var i,s;i=[n(18),n(20),n(33),n(1034)],void 0===(s=function(t,e,n,i){return n.extend({endpoint:"",label:"title",value:"id",errorLabel:_("No communities found"),getDisplayValue:function(){return'"'+this.elements.input._getSelectedOptions()[0].getText()+'"'},requestOptions:function(){new e(function(t){window.require(["DS/PlatformAPI/PlatformAPI"],function(e){t(e.getApplicationConfiguration("app.urls.passport.cas"))})}).done(function(e){var n={base:this.options.swymUrl,cas:e},s=t.format("/api/community/listmycommunities/limit/{0}/creation_granted_for/{1}",9999,this.options.filter);return i.authenticatedRequest(n,s).done(function(t){this.onListLoaded(t.result)}.bind(this))}.bind(this))}})}.apply(e,i))||(t.exports=s)},function(t,e,n){"use strict";var i,s;i=[n(20)],void 0===(s=function(t){return{request:function(e,n){return new t(function(t,i){var s=new XMLHttpRequest;s.withCredentials=!0,s.onreadystatechange=function(){if(4===this.readyState){var e=s.responseText?JSON.parse(s.responseText):null;this.status<400?t(e):i()}},s.open("GET",e,!0),n&&s.setRequestHeader("X-DS-SWYM-CSRFTOKEN",n),s.send()})},authenticate:function(t,e){return this.request(t+"/login?gateway=true&requestedwith=xmlhttprequest&service="+e)},getCSRFToken:function(t){return this.request(t+"/api/index/tk").done(function(t){return t.result.ServerToken})},authenticatedRequest:function(t,e){return this.getCSRFToken(t.base).fail(function(){return this.authenticate(t.cas,t.base+"/api/index/options").done(function(){return this.getCSRFToken(t.base)}.bind(this))}.bind(this)).done(function(n){return this.request(t.base+e,n)}.bind(this))}}}.apply(e,i))||(t.exports=s)},function(t,e,n){"use strict";var i,s;i=[n(2),n(20),n(81)],void 0===(s=function(t,e,n){return n.extend({init:function(e){this._parent(e),this.setValue(t.get3DDService("3DSwym",t.get3DDPlatformId())),this.dispatchOnChange()}})}.apply(e,i))||(t.exports=s)},function(t,e,n){"use strict";var i,s;i=[n(50),n(21)],void 0===(s=function(t,e){return t.extend({fillOptions:function(){var t=[];e.getAll().forEach(function(e){t.push({value:e.dataObj.id,label:e.dataObj.title})}),this.elements.input.putOptions(t)}})}.apply(e,i))||(t.exports=s)},function(t,e,n){"use strict";var i,s;i=[n(1),n(2),n(43),n(120),n(59),n(6),n(88),n(23)],void 0===(s=function(t,e,n,i,s,o,a,r){return i.extend({labels:[],sentiments:[],canCreateTags:null,isEmpty:function(){var t=this.getValue();return Array.isArray(t)&&0===t.length||!Array.isArray(t)},dispatchOnChange:function(){this.elements.input.getValue()||this._parent()},init:function(n){this._parent(n),this.value||(this.value=[]),t.createElement("a",{class:"detail-word-add uwa-icon","data-icon":"3"}).inject(this.elements.container),this.elements.tagContainer=t.createElement("div",{class:"tag-container"}),this.elements.tagContainer.inject(this.elements.container),this.canCreateTags=e.Permission[e.Page.id].tag_create,this.canCreateTags||this.addNotice(_("Your permissions allow you to only use pre-existing labels")),o.getTagsList().done(function(t){this.labels=t.map(function(t){return t.name})}.bind(this)),o.getCurationSentiments().done(function(t){this.sentiments=t.sentiments,this.displayTags()}.bind(this))},setInitialValue:function(t){this.value=t||[]},displayTags:function(){var t=this.elements.tagContainer;t.empty(),this.getValue().forEach(function(e,n){var i=this.sentiments.filter(function(t){return t.name===e.sentiment})[0];new s({value:e.label,closable:!0,events:{onClose:this.removeTag.bind(this,n)}}).elements.content.setStyle("background-color","#"+i.color).inject(t)},this)},populateSentiments:function(e){if(this.elements.sentimentScroller){var n=this.elements.sentimentScroller.getInnerElement(),i=t.createElement("ul");n.empty(),t.is(e,"array")&&(e.forEach(function(e){t.createElement("li",{html:[t.createElement("div",{class:"nv-sentiment",html:[t.createElement("span",{class:"tagging-color",styles:{"background-color":"#"+e.color}}),t.createElement("span",{text:"none"===e.name?_("none"):e.name})],events:{click:this.addTag.bind(this,e.name,null,1)}})]}).inject(i)},this),n.setContent(i))}},openSentimentDropdown:function(){this.elements.sentimentDropdown||(this.elements.sentimentDropdown=new a.Pointy({autoPosition:["below-center","above-center"],target:this.elements.input.getContent(),margin:6,className:"sentiment-dropdown"}),this.elements.sentimentScroller=new r({shadows:!0}),this.elements.sentimentDropdown.getInnerElement().setContent(this.elements.sentimentScroller),this.elements.sentimentDropdown.inject(this.elements.container),this.populateSentiments(this.sentiments)),this.elements.sentimentDropdown.show()},addTag:function(e){var n=this.elements.input.getValue();if(this.value.filter(function(t){return t.label===n&&t.sentiment===e}).length)return this.elements.input.setValue(""),void this.addInputError(_("You've already added the same value"));if(n){var i=t.clone(this.value);i.push({label:n,sentiment:e}),this.setValue(i)}},removeTag:function(e){var n=t.clone(this.value);n.splice(e,1),this.setValue(n)},onAutocompleteChange:function(){this.value.length&&this.removeInputError(this.elements.input);var t=this.elements.input.getValue();t&&(this.canCreateTags||-1!==this.labels.indexOf(t))?this.openSentimentDropdown():this.elements.input.setValue("")},onInputFocus:function(){this.elements.sentimentDropdown&&this.elements.sentimentDropdown.hide()},onInputBlur:function(){this.elements.sentimentDropdown&&this.elements.input.getValue()&&this.elements.sentimentDropdown.show()},setValue:function(t){this.elements.input.setValue(""),this.elements.input.getInputElement().blur(),this.value=t,this.displayTags(),this.dispatchEvent("onChange",[this.getValue()])},getAdaptor:function(){var t=this;return n.extend({getSuggestions:function(e){return t.labels.filter(function(t){return t.indexOf(e)>=0})},renderSuggestions:function(t){return t.map(function(t){return{tag:"div",class:"suggestion notab",html:[t.fullValue.escapeHTML()]}})}})}})}.apply(e,i))||(t.exports=s)},function(t,e,n){"use strict";var i,s;i=[n(105),n(6)],void 0===(s=function(t,e){return t.extend({_fetchSuggestions:function(){return e.getNPDTeamMembers().then(function(t){return t.users.map(function(t){return{fullValue:t.name}})})}})}.apply(e,i))||(t.exports=s)},function(t,e,n){"use strict";var i,s;i=[n(1),n(8),n(32)],void 0===(s=function(t,e,n){return n.extend({name:"schemaform-template",isEmpty:function(){var t=this.getValue(),e=!t.template||t.template.some(function(t){return t});return!t.custom&&!e},getContent:function(){if(!this.elements.container){this.elements.container=t.createElement("div",{class:this.getClassNames()}),this.checkboxes=[],this.backlogs=[];var n,i=this.options.context.getSchemaformData(),s=!this.options.schema.multiple||this.options.schema.multiple?"Checkbox":"Radio";i.recipe.triggers.forEach(function(o,a){var r=i.triggers[o.name],l=i.payloads[r.payload];t.createElement("div",{class:"template-input-wrapper",html:[t.createElement("label",{html:[n=new e[s](this.getInputOptions({className:"green",attributes:{value:a,checked:"date"!==o.ingredient}})),t.createElement("span",{class:this.getClassNames("-label"),text:r.result+": "+l.templates[this.options.schema.input.options.templateType].title})]})]}).inject(this.elements.container),this.checkboxes.push(n),this.backlogs.push(o.config.backlog)},this),t.createElement("div",{html:[n=new e[s](this.getInputOptions({className:"green",attributes:{value:"custom"}})),this.elements.customText=new e.Text(this.getInputOptions({multiline:this.options.schema.input.options.multiline,className:this.getClassNames("-input"),attributes:{placeholder:_("Write your own {0}").format(this.options.schema.title.toLowerCase())}}))]}).inject(this.elements.container),this.elements.customText.getInputElement().addEvent("keyup",function(){n.check(!!this.elements.customText.getValue())}.bind(this)),this.checkboxes.push(n)}return this.elements.container},getValue:function(){var t={template:[],custom:""};return this.checkboxes.forEach(function(e,n){n!==this.checkboxes.length-1?t.template.push(e.isChecked()):t.custom=e.isChecked()?this.elements.customText.getValue():""},this),t},setValue:function(t){this.checkboxes.forEach(function(e,n){n!==this.checkboxes.length-1?e.check(t.template[n]):(e.check(!!t.custom),this.elements.customText.setValue(t.custom))},this)}})}.apply(e,i))||(t.exports=s)},function(t,e,n){"use strict";var i,s;i=[n(1),n(8),n(196),n(163),n(32),n(4)],void 0===(s=function(t,e,n,i,s,o){return s.extend({getContent:function(){if(!this.elements.container){this.elements.inputs={},this.elements.container=t.createElement("div",{class:this.getClassNames()});var n,i,s,o=this;this.radios={},this.daysData={},this.options.schema.enum.forEach(function(a){this.elements.container.addContent(n=t.createElement("div",{class:"time-range-content"}).addContent(t.createElement("div",{class:"detail-label detail-label-time-"+a.value}).addContent(i=new e.Radio({className:"green",attributes:{name:"timeDays",id:a.value},value:a.value,events:{onChange:o.highlightType.bind(o,a.value)}}),t.createElement("label",{text:a.display||"",for:a.value})))),"allDays"!==a.value&&(s=t.createElement("div",{class:"detail-content detail-content-"+a.value}).inject(n)).addContent(a.enum?this.buildCheckboxes(a.enum):"date"===a.value?this.buildDateSelector():this.buildMonthSelector(a.value));var r=this.value?this.value.timeDays:"";!r&&a.checked&&(r=a.value);var l=!(!r||r!==a.value);i.check(l),this.radios[a.value]=i,!l&&s&&s.addClassName("disabled")},this)}return this.options.value?this.highlightType(this.options.value.timeDays):this.highlightType(),this.elements.container},buildDateSelector:function(){var t=this,e=i.extend({options:{className:"dark",button:{class:"uwa-icon uwa-icon-only","data-icon":"u"},valueInput:"text"},buildContent:function(){return t.calendar=new n({className:"dark",events:{onDateSelect:function(e){e=e.strftime("%Y-%m-%d"),t.calendarPicker.setValue(e),t.calendarPicker.dispatchEvent("onChange",[e]),t.calendarPicker.toggle(!1)}}}),t.calendar}});return this.calendarPicker=new e,this.calendarPicker.setValue(this.options.value&&this.options.value.date?this.options.value.date:(new Date).strftime("%Y-%m-%d")),this.calendarPicker.addEvent("onOpen",function(){t.calendar.setDate(new Date(t.calendarPicker.getValue()))}),this.elements.inputs.date=[],this.elements.inputs.date[0]=this.calendarPicker,this.calendarPicker},buildMonthSelector:function(n){var i,s,o,a=this.options.value,r=function(t,e){for(var i=[],r=t;r<=e;r++)s={label:r,value:r},a&&(o=a[n],"everyYear"===n&&o&&(o=o.day)),a&&a.timeDays===n&&o===String(s.value)&&(s.selected=!0),i.push(s);return i};return this.elements.inputs[n]=[],"everyYear"===n?i=t.createElement("div",{html:[this.elements.inputs[n][0]=new e.Select({className:n,attributes:{name:n+"[day]"}}).putOptions(r(1,31)),t.createElement("span",{text:_("of")}),this.elements.inputs[n][1]=new e.Select({className:n,attributes:{name:n+"[month]"}}).putOptions(function(){for(var t=[],e=1;e<=12;e++){var i=new Date("2015-"+e+"-01").strftime("%B");s={label:i,value:i},a&&a.timeDays===n&&a[n].month===String(s.value)&&(s.selected=!0),t.push(s)}return t}())]}):(this.elements.inputs[n][0]=new e.Select({className:n,attributes:{name:n}}).putOptions(r(1,31)),i=this.elements.inputs[n][0]),i},buildCheckboxes:function(n){var i,s=this;return i=t.createElement("div"),this.elements.inputs.days=[],n.forEach(function(n,o){i.addContent(t.createElement("p",{class:"day-checkbox",html:[s.elements.inputs.days[o]=new e.Checkbox({className:"green",attributes:{name:"days["+n.value+"]",id:n.value}}),t.createElement("label",{for:n.value,text:n.display})]}));var a=s.options.value,r=!(!a||"days"!==a.timeDays||!a.days||"on"!==a.days[n.value]);s.elements.inputs.days[o].check(r)}),i},highlightType:function(t){var e=this.elements.container.getElements(".detail-content"),n=this.elements.container.getElement(".detail-content-"+t),i=function(t){t.setDisabled()};if(e.length){for(var s in this.elements.inputs)this.elements.inputs.hasOwnProperty(s)&&this.elements.inputs[s].forEach(i);e.invoke("addClassName","disabled")}n&&(this.elements.inputs[t].forEach(function(t){t.setDisabled(!1)}),n.removeClassName("disabled"))},updateContent:function(t){for(var e in this.highlightType(t.timeDays),this.radios)this.radios.hasOwnProperty(e)&&(e===t.timeDays?this.radios[e].check(!0):this.radios[e].check(!1))},getValue:function(){var t=o.getInputsValue(this.elements.container);return"date"===t.timeDays&&(t.date=this.calendarPicker.getValue()),t},setValue:function(t){this.value=t,this.updateContent(t)}})}.apply(e,i))||(t.exports=s)},function(t,e,n){"use strict";var i,s;i=[n(1),n(8),n(32),n(4)],void 0===(s=function(t,e,n,i){return n.extend({getContent:function(){return this.elements.container||(this.elements.container=t.createElement("div",{class:this.getClassNames()}),this.buildTimeRange()),this.elements.container},getOptions:function(t,e,n,i,s,o,a){var r,l=[],c=this.getValue(),u=function(a){for(var l=[],u=t;u<=e;u+=n)r={label:""+(0===u&&"minute"===s?"00":u)+a,value:""+(0===u&&"minute"===s?"00":u)+a},!(!c||c&&!c[o.value]||c&&c[o.value]&&!c[o.value][i])||"to"!==i||"hour"!==s||1!==u||a&&"am"!==a||(r.selected=!0),c&&c[o.value]&&c[o.value][i]&&c[o.value][i][s]===String(r.value)&&(r.selected=!0),a&&12===u?l.unshift(r):l.push(r);return l};if(a)for(var h=0;h<2;h++)l=l.concat(u(0===h?"am":"pm"));else l=l.concat(u(""));return l},buildSelect:function(n,i,s){var o="us"===this.options.context.getSchemaformData().locale,a=o?1:0,r=o?12:23,l=this.getValue(),c=!l||l.periodType&&l.periodType!==s.value||l.periodType&&l[l.periodType]&&"recurrenceAll"===l[l.periodType].recurrenceType||!l.periodType&&/(period|fixedTime|recurrence)/.test(s.value);return!l&&s.checked&&(c=!1),t.createElement("p",{class:"time-range time-range-"+n,html:[i?t.createElement("label",{text:i}):"",new e.Select({className:"hour time-input",attributes:{name:s.value+"["+n+"][hour]",disabled:c},events:{onChange:this.onRangeChange.bind(this)}}).putOptions(this.getOptions(a,r,1,n,"hour",s,o)),_("hour"),new e.Select({className:"minute time-input",attributes:{name:s.value+"["+n+"][minute]",disabled:c},events:{onChange:this.onRangeChange.bind(this)}}).putOptions(this.getOptions(0,45,15,n,"minute",s)),_("minutes")]})},buildTimeRange:function(){var n,s,o,a=this;this.elements.container.empty(),this.options.schema.enum.forEach(function(i){a.elements.container.addContent(o=t.createElement("div",{class:"time-range-content"}).addContent(t.createElement("div",{class:"detail-label detail-label-time-"+i.value}).addContent(s=new e.Radio({className:"green",attributes:{name:"periodType",id:i.value},value:i.value,events:{onChange:a.onRangeChange.bind(a)}}),t.createElement("label",{text:i.display||"",for:i.value})))),i.enum&&(n=t.createElement("div",{class:"detail-content detail-content-"+i.value}).inject(o),i.enum.forEach(function(t){"time_range"===t.type?n.addContent(a.buildSelect(t.value,t.display,i)):"select_every"===t.type?n.addContent(a.buildSelectEvery(i,t)):"radio"===t.type&&n.addContent(a.buildRadio(i,t))}));var r=a.getValue()?a.getValue().periodType:"";!r&&i.checked&&(r=i.value);var l=!(!r||r!==i.value);s.check(l),!l&&n&&n.addClassName("disabled")}),this.value=this.rangeData=i.getInputsValue(this.elements.container)},buildSelectEvery:function(n,i){var s=this.getValue(),o=!(s&&s.periodType&&s.periodType===n.value),a=[],r="15";s&&s[n.value]&&s[n.value][i.value]&&(r=s[n.value][i.value]);for(var l=1;l<=60;l++)a.push({label:l<60?l+" min":_("hour"),value:String(l),selected:r===String(l)});return t.createElement("div",{class:"select-every",html:[new e.Select({className:"time-input "+i.value,attributes:{name:n.value+"["+i.value+"]",disabled:o},options:a,events:{onChange:this.onRangeChange.bind(this)}})]})},buildRadio:function(n,i){var s,o=this,a=t.createElement("div",{class:"sub-detail-content",html:[s=new e.Radio({className:"green",attributes:{name:n.value+"[recurrenceType]",id:i.value},value:i.value,events:{onChange:this.onRangeChange.bind(this)}}),t.createElement("label",{text:i.display,for:i.value})]});i.enum&&i.enum.forEach(function(t){"time_range"===t.type&&a.addContent(o.buildSelect(t.value,t.display,n))});var r=o.getValue()&&o.getValue()[n.value]?o.getValue()[n.value].recurrenceType:"";!r&&i.checked&&(r=i.value);var l=!(!r||r!==i.value);return s.check(l),l||a.addClassName("disabled"),a},computeDate:function(t){var e=new Date;return e.setHours(this.decodeAmPm(t.hour)),e.setMinutes(t.minute),e},decodeAmPm:function(t){if(!String(t).test(/am|pm/))return t;var e=t.includes("pm")?"pm":"am",n=Number(t.replace(/am|pm/,""));return"am"===e&&12===n?n=0:"pm"===e&&(n+=12),n},encodeAmPm:function(t){if(String(t).test(/am|pm/))return t;var e=Number(t),n=t<12?"am":"pm";return 0===e?e=12:"pm"===n&&e>12&&(e-=12),e+n},onRangeChange:function(){this.rangeData=i.getInputsValue(this.elements.container),["period","recurrence"].map(function(t){if(this.rangeData[t]&&this.rangeData[t].from){var e=this.rangeData[t],n=this.computeDate(e.from);n>=this.computeDate(e.to)&&(e.to={hour:String(this.encodeAmPm(Math.min(n.getHours()+1,23))),minute:String(23===e.from||"11pm"===e.from?59:Math.min(Number(e.from.minute),59))})}}.bind(this)),this.setValue()},getValue:function(){return this.value},setValue:function(t){this.value=t||this.rangeData,this.buildTimeRange()}})}.apply(e,i))||(t.exports=s)},function(t,e,n){"use strict";var i,s;i=[n(33),n(20),n(17)],void 0===(s=function(t,e,n){return t.extend({value:"id",label:"title",requestOptions:function(){var t=[],e=n.getById(this.options.todolist);if(e&&e.dataObj.data.todos){var i=e.dataObj.data.todos;t=Object.keys(i).map(function(t){return{title:i[t].title,id:i[t].id}})}this.onListLoaded(t)}})}.apply(e,i))||(t.exports=s)},function(t,e,n){"use strict";var i,s;i=[n(50),n(139),n(17),n(21)],void 0===(s=function(t,e,n,i){return t.extend({options:[],fillOptions:function(){var t,e,s=[],o={};n.getAll().forEach(function(n){"SmartFilter"===n.getName()&&n.getSearches().forEach(function(a){e=a.getId(),o[e]||(o[e]=!0,t=i.getById(n.dataObj.tab),s.push({label:n.getTitle().unescapeHTML()||a.getQuery().topic,value:a.getId(),group:t.dataObj.title}),this.options.push(a.getId()))},this)},this),s.length<10&&s.forEach(function(t){delete t.group}),this.elements.input.putOptions(s)},setInitialValue:function(t){-1===this.options.indexOf(t)?e.fetch({id:t}).done(function(t){var e=t.getProducers()[0];this.elements.input.putOptions({label:e.getTitle()||e.getQuery().topic,value:e.getId()}),this.setValue(e.getId())}.bind(this)):this.setValue(t)}})}.apply(e,i))||(t.exports=s)},function(t,e,n){"use strict";var i,s;i=[n(1),n(8),n(32)],void 0===(s=function(t,e,n){return n.extend({name:"schemaform-trigger",isEmpty:function(){var t=this.getValue();return!t.length||t.indexOf(!0)<0},getContent:function(){var e=this.options.context.getSchemaformData();return this.elements.container||(this.elements.container=t.createElement("div",{class:this.getClassNames()}),this.triggers=e.recipe.triggers.map(function(t,n){return{value:n,label:e.triggers[t.name].result}}),this.buildCheckboxes()),this.elements.container},buildCheckboxes:function(){if(this.checkboxes=[],this.triggers.length){var t=this.triggers.map(function(t){return this.buildCheckbox(t)},this);this.elements.container.addContent(t)}else this.addInputError(_("Please select at least one trigger"))},buildCheckbox:function(n){var i={className:"green",attributes:{value:n.value}},s=t.createElement("label",{class:this.getClassNames("-label"),text:n.label}),o=new e.Checkbox(this.getInputOptions(i)).inject(s,"top");return this.checkboxes.push(o),o.check(!0),[s]},getValue:function(){var t=[];return this.checkboxes.forEach(function(e){t.push(e.isChecked())}),t},setValue:function(t){this.checkboxes.forEach(function(e,n){e.check(t[n])})}})}.apply(e,i))||(t.exports=s)},function(t,e,n){"use strict";var i,s;i=[n(38)],void 0===(s=function(t){return t.extend({service:"tumblr"})}.apply(e,i))||(t.exports=s)},function(t,e,n){"use strict";var i,s;i=[n(13),n(33)],void 0===(s=function(t,e){return e.extend({endpoint:"http://api.tumblr.com/v2/user/info",service:"tumblr",label:"url",value:"id",errorLabel:_("No blogs found"),getData:function(t){return t.response.user.blogs},getFormatedOptions:function(e){return e.map(function(e){return{label:e[this.label],value:t.parseUrl(e[this.label]).domain}},this)}})}.apply(e,i))||(t.exports=s)},function(t,e,n){"use strict";var i,s;i=[n(38)],void 0===(s=function(t){return t.extend({service:"twitter"})}.apply(e,i))||(t.exports=s)},function(t,e,n){"use strict";var i,s;i=[n(38)],void 0===(s=function(t){return t.extend({service:"twitter",value_key:"connectId"})}.apply(e,i))||(t.exports=s)},function(t,e,n){"use strict";var i,s;i=[n(105),n(25),n(43),n(16)],void 0===(s=function(t,e,n,i){return t.extend({typeDelay:2e3,reloadSuggestions:!0,_fetchSuggestions:function(t){return new i(function(n,i){(!t||t.length<3)&&n([]);var s,o=this.options.context.getSchemaformData(),a=o.properties;for(var r in a)a.hasOwnProperty(r)&&a[r].input&&"twitter_account"===a[r].input.id&&(s=o.ingredientConfig[r]);e.request("https://api.twitter.com/1.1/users/search.json?q={0}".format(t),{proxy:"oauth",method:"get",cache:0,service:"twitter",type:"json",connect:s,onComplete:function(t){t&&t.length?n(t):i(new Error("Unable to fetch user list"))}})}.bind(this)).then(function(t){return t.map(function(t){return{fullValue:"@"+t.screen_name}})})}})}.apply(e,i))||(t.exports=s)},function(t,e,n){"use strict";var i,s;i=[n(33)],void 0===(s=function(t){return t.extend({endpoint:"https://api.twitter.com/1.1/lists/ownerships.json?count=100",service:"twitter",label:"name",value:"id_str",errorLabel:_("No lists found"),init:function(t){this._parent(t),this.options.allLists&&(this.endpoint="https://api.twitter.com/1.1/lists/list.json?count=100")},getDisplayValue:function(){return'"'+this.elements.input._getSelectedOptions()[0].getText()+'"'},getData:function(t){return t.lists}})}.apply(e,i))||(t.exports=s)},function(t,e,n){"use strict";var i,s;i=[n(81)],void 0===(s=function(t){return t.extend({init:function(t){this._parent(t),this.options.serie&&this.setValue(this.options.serie.split(".")[0])}})}.apply(e,i))||(t.exports=s)},function(t,e,n){"use strict";var i,s;i=[n(33),n(17),n(46),n(119)],void 0===(s=function(t,e,n,i){return t.extend({label:"label",value:"value",errorLabel:_("No Ingredients found"),fillOptions:function(){this.options.wid?(this.options.context.showField(this.options.name),this._parent()):this.options.context.hideField(this.options.name)},requestOptions:function(){var t=e.getById(this.options.wid),s=n.parseSourcesPreference(t.getData().sources);i.requestSourcesWithoutStats(s).done(function(t){var e=t._sources.map(function(t){return{label:t.getTitle(),value:t.getId(),group:t.getType()}});e.length<10&&e.forEach(function(t){delete t.group}),this.onListLoaded(e)}.bind(this))},getDisplayValue:function(){return'"'+this.elements.input._getSelectedOptions()[0].getText()+'"'}})}.apply(e,i))||(t.exports=s)},function(t,e,n){"use strict";var i,s;i=[n(1),n(8),n(32)],void 0===(s=function(t,e,n){var i=[{value:"",label:_("Choose one")},{value:"is greater than",label:_("is greater than")},{value:"is less than",label:_("is less than")},{value:"is",label:_("is equal to")}];return n.extend({getContent:function(){if(!this.elements.container){this.elements.container=t.createElement("div",{class:this.getClassNames()}),this.elements.compare=new e.Select({className:"compare-label",attributes:{name:"compare"},options:i}).inject(this.elements.container);for(var n=[{value:"",label:_("Choose one")}],s=1;s<=100;s++)n.push({value:s,label:s+"%"});this.elements.value=new e.Select({className:"variation-value",attributes:{name:"value"},options:n}).inject(this.elements.container),this.elements.direction=new e.Select({className:"compare-value",attributes:{name:"direction"},options:[{value:"",label:_("Any direction")},{value:"increase",label:_("Increase")},{value:"decrease",label:_("Decrease")}]}).inject(this.elements.container)}return this.elements.container},getValue:function(){return App.Utils.getInputsValue(this.elements.container)},setValue:function(t){this.elements.compare.setValue(t.compare),this.elements.value.setValue(t.value),this.elements.direction.setValue(t.direction)}})}.apply(e,i))||(t.exports=s)},function(t,e,n){"use strict";var i,s;i=[n(43),n(120),n(6)],void 0===(s=function(t,e,n){return e.extend({typeDelay:1e3,getAdaptor:function(){var e=this;return t.extend({_queryCache:{},_getCities:function(t){return this._query(t).then(function(e){var n=new RegExp(t.replace(/-/g," ").escapeRegExp(),"i");return e.map(function(t){var e=t.name.split(",");return{name:e[0],extra:e.slice(1).join(","),id:t.geocode}}).filter(function(t){return n.test(t.name.replace(/-/g," "))})})},getDisplayValue:function(t){return n.proxyWeather({ressource:"weather",town:t}).then(function(t){return t.informations?t.informations.name.split(",")[0]:""})},_query:function(t){return this._queryCache.hasOwnProperty(t)||(this._queryCache[t]=n.proxyWeather({ressource:"city",city:t})),this._queryCache[t]},getSuggestions:function(t,n){var i=t.slice(0,n);if(i.length<=1)return[];var s=new RegExp("(.*?)("+i.replace(/-/g," ").escapeRegExp()+")(.*)","i");return e.spinner.start(),this._getCities(i).then(function(t){return e.spinner.stop(),t.map(function(t){return{fullValue:t.name,extra:t.extra,re:s,id:t.id}})})},renderSuggestion:function(t){var e=[];return t.fullValue.replace(/-/g," ").replace(t.re,function(t,n,i,s){i?e.push({tag:"span",text:n},{tag:"strong",text:i},{tag:"span",text:s}):e.push({tag:"span",text:t})}),t.extra&&e.push({tag:"span",class:"country",text:t.extra}),e}})}})}.apply(e,i))||(t.exports=s)},function(t,e,n){"use strict";var i,s;i=[n(50),n(17)],void 0===(s=function(t,e){return t.extend({fillOptions:function(){var t=[];e.getAll().forEach(function(e){var n=e.getTab();t.push({label:e.getTitle().unescapeHTML(),value:e.getId(),group:n.dataObj.title})},this),t.length<10&&t.forEach(function(t){delete t.group}),this.elements.input.putOptions(t)}})}.apply(e,i))||(t.exports=s)},function(t,e,n){"use strict";var i,s;i=[n(1),n(50),n(17),n(21)],void 0===(s=function(t,e,n,i){return e.extend({getContent:function(){return this.elements.container||(this._parent(),this.elements.input.addEvent("onChange",this.addRangeNotice.bind(this))),this.elements.container},getInputOptions:function(t){return this._parent(Object.assign({singleLine:!0},t))},addRangeNotice:function(){var t,e;(e=this.getValue())&&(t=n.getById(e).getData().range)&&this.addNotice(_("This chart is updated on a {0} basis").format(t))},fillOptions:function(){var t=[];n.getAll().forEach(function(e){var n=e.getData(),s=i.getById(e.dataObj.tab);n.analyticsIds&&this.isMatchingWidget(n)&&t.push({label:e.getTitle(),value:e.getId(),group:s.dataObj.title})},this),t.length<10&&t.forEach(function(t){delete t.group}),this.elements.input.putOptions(t)},isMatchingWidget:function(t){return this.options.quantitative?this.isQuantitative(t.typeSerie||t.grouping||t.types):!this.isQuantitative(t.typeSerie||t.grouping||t.types)},isQuantitative:function(t){return["author","domain","media","geoloc","term","quantitative"].some(function(e){return 0===t.indexOf(e)})},getDisplayValue:function(){return'"'+this._parent()+'"'}})}.apply(e,i))||(t.exports=s)},function(t,e,n){"use strict";var i,s;i=[n(50),n(17)],void 0===(s=function(t,e){return t.extend({fillOptions:function(){var t=e.getAll().filter(function(t){return"Analyze"===t.getName()}).map(function(t){return{label:t.getTitle().unescapeHTML(),value:t.getId(),group:t.getTab().getTitle()}});t.length<10&&t.forEach(function(t){delete t.group}),this.elements.input.putOptions(t)},getDisplayValue:function(){return'"'+this._parent()+'"'}})}.apply(e,i))||(t.exports=s)},function(t,e,n){"use strict";var i,s;i=[n(50),n(21),n(17)],void 0===(s=function(t,e,n){return t.extend({fillOptions:function(){var t=[];n.getAll().forEach(function(n){if("Library"===n.getName()){var i=e.getById(n.dataObj.tab);t.push({label:n.getTitle().unescapeHTML(),value:n.getData().libraryId,group:i.dataObj.title})}},this),t.length<10&&t.forEach(function(t){delete t.group}),this.elements.input.putOptions(t)}})}.apply(e,i))||(t.exports=s)},function(t,e,n){"use strict";var i,s;i=[n(50),n(17),n(21)],void 0===(s=function(t,e,n){return t.extend({fillOptions:function(){var t=[];if(this.options.include_self){var i=this.options.value||this.options.name;t.push({label:_("Self"),value:i})}e.getAll().forEach(function(e){if("PotionWizard"===e.getName()){if(e.content&&e.content.getView){var i=e.content.getView();if(i&&"maximized"===i.type)return}if(!e.getData().potionId)return;var s=n.getById(e.dataObj.tab);t.push({label:e.getTitle().unescapeHTML(),value:e.getData().potionId,group:s.dataObj.title})}},this),t.length<10&&t.forEach(function(t){delete t.group}),this.elements.input.putOptions(t)}})}.apply(e,i))||(t.exports=s)},function(t,e,n){"use strict";var i,s;i=[n(50),n(17)],void 0===(s=function(t,e){return t.extend({getDisplayValue:function(){return'"'+this.elements.input._getSelectedOptions()[0].getText()+'"'},fillOptions:function(){var t=[];e.getAll().forEach(function(e){if("TodoList"===e.getName()){var n=e.getTab(),i=/\S/.test(e.getTitle())?e.getTitle().unescapeHTML():e.getName();t.push({label:i,value:e.getId(),group:n.dataObj.title})}},this),t.length<10&&t.forEach(function(t){delete t.group}),this.elements.input.putOptions(t)}})}.apply(e,i))||(t.exports=s)},function(t,e,n){"use strict";var i,s;i=[n(50),n(17)],void 0===(s=function(t,e){return t.extend({fillOptions:function(){var t=[];e.getAll().forEach(function(e){if("Webnote"===e.getName()){var n=e.getTab(),i=/\S/.test(e.getTitle())?e.getTitle().unescapeHTML():e.getName();t.push({label:i,value:e.getId(),group:n.dataObj.title})}},this),t.length<10&&t.forEach(function(t){delete t.group}),this.elements.input.putOptions(t)}})}.apply(e,i))||(t.exports=s)},function(t,e,n){"use strict";var i,s;i=[n(38)],void 0===(s=function(t){return t.extend({service:"wordpress"})}.apply(e,i))||(t.exports=s)},function(t,e,n){"use strict";var i,s;i=[n(105),n(25),n(20)],void 0===(s=function(t,e,n){return t.extend({_fetchSuggestions:function(){if(!this.options.site)return n.resolve([]);var t="https://public-api.wordpress.com/rest/v1.1/sites/"+this.options.site+"/categories";return new n(function(n,i){e.request(t,{type:"json",onComplete:function(t){t&&t.categories&&t.categories.length?n(t.categories):i(new Error("Unable to fetch categories list"))}})}).then(function(t){return t.map(function(t){return{fullValue:t.name}}).filter(function(t){return"Uncategorized"!==t.fullValue})})}})}.apply(e,i))||(t.exports=s)},function(t,e,n){"use strict";var i,s;i=[n(33)],void 0===(s=function(t){return t.extend({endpoint:"https://public-api.wordpress.com/rest/v1.1/me/sites",service:"wordpress",errorLabel:_("No sites found"),getFormatedOptions:function(t){return t.map(function(t){return{label:t.URL,value:this.options.returnUrls?t.URL:t.ID.toString()}}.bind(this))},getData:function(t){return t.sites}})}.apply(e,i))||(t.exports=s)},function(t,e,n){"use strict";var i,s;i=[n(38)],void 0===(s=function(t){return t.extend({service:"youtube"})}.apply(e,i))||(t.exports=s)},function(t,e,n){"use strict";var i,s;i=[n(20),n(43),n(120),n(25)],void 0===(s=function(t,e,n,i){return n.extend({typeDelay:1e3,setInitialValue:function(t){this.options.ucid&&(this.value=t,this.requestDisplayValue(t).done(function(e){this.displayValue=e,this.suggestion={fullValue:this.displayValue,id:t},this.elements.input.setValue(this.displayValue)}.bind(this)))},request:function(e){return new t(function(t,n){i.request(e,{proxy:"oauth",method:"get",cache:0,service:"youtube",type:"json",connect:this.options.ucid,onComplete:function(e){e&&!e.error?t(e.items):n(new Error("Unable to request information from youtube"))}})}.bind(this))},requestDisplayValue:function(t){return this.request("https://content.googleapis.com/youtube/v3/channels?part=snippet&id={0}&fields=items%2Fsnippet%2Ftitle".format(t)).then(function(t){return t.length?t[0].snippet.title:""})},getDisplayValue:function(){return'"'+this._parent()+'"'},getAdaptor:function(){var n=this;return e.extend({getSuggestions:function(e){return e?n.request("https://content.googleapis.com/youtube/v3/search?part=snippet&maxResults=50&order=title&q={0}&type=channel&fields=items(snippet(channelId%2CchannelTitle))".format(e)).then(function(t){return t.map(function(t){return{id:t.snippet.channelId,fullValue:t.snippet.channelTitle}})}):t.resolve([])},renderSuggestions:function(t){return t.map(function(t){return{tag:"div",class:"suggestion notab",html:[t.fullValue.escapeHTML()]}})}})}})}.apply(e,i))||(t.exports=s)},function(t,e,n){"use strict";var i,s;i=[n(13),n(18),n(412),n(6)],void 0===(s=function(t,e,n,i){var s;function o(){throw new Error(e.format.apply(null,arguments))}return s={"not-empty":function(t,e,n){var i;switch(n.input.id){case"entity":i=t.some(function(t){return t&&Object.keys(t).length>0});var s=t.some(function(t){return t&&Object.keys(t).some(function(e){return t[e]})});if(i)s||o(_("You must select at least one {0}").format(n.title));else{var a=n.input.options.entityType,r=Array.isArray(a)?a.join(" "+_("or")+" "):a;o(_("Please select a trigger that provide at least one {0}").format(r))}break;case"template":i=!t.template||t.template.some(function(t){return t}),t.custom||i||o(e.message?e.message:_("Please choose at least one option"));break;case"trigger":t.length?t.indexOf(!0)<0&&o(_("You must select at least one trigger")):o(_("Please select at least one trigger"));break;case"pushweb_content":Array.isArray(t)&&t.length||o(e.message?e.message:_("Please fill in this field"));var l=null;if(t.map(function(t){"contentAccessControl"===t.type&&(l=t)}),l&&(l.value.usePassword||l.value.useLeadForm||o(_("Please select at least one option for content access control")),l.value.usePassword&&!l.value.password&&o(_("Please enter a password for content access control")),l.value.useLeadForm)){var c=l.value.sendTo;c&&c.test(/^[\w_.+-]+@[\w-]+\.[\w-.]+$/i)||o(_("Please enter a valid email address for content access control"))}break;case"search_context":t&&("context"!==t.type||t.context.length)||o(e.message?e.message:_("Please fill in this field"));break;case"tag":case"pushmail_content":case"netvibes_mail":case"multiple_string":case"payload":(Array.isArray(t)&&0===t.length||!Array.isArray(t))&&o(e.message?e.message:_("Please fill in this field"));break;case"pushweb_title":t&&t.title||o(e.message?e.message:_("Please fill in this field"));break;default:t||o(e.message?e.message:_("Please select a value for {0}").format(n.title))}},"one-of":function(t,e){var n=_("Please specify at least one of: {0}").format(e.inputs.join(", ")),i=e.inputs.filter(function(t){var n=e.context.getFieldValue(t);return n&&n.length}).length;e.inputs.map(function(s){i||t&&t.length?e.context.hideValidityMessage(s):e.context.addValidityMessage(s,{message:n})}),t&&t.length||i||o(n)},url:function(e){e&&(t.isAbsoluteUrl(e)&&t.isValidUrl(e)&&e.match(/^https?:\/\//)||o(_("Please enter a valid url")))},"pushweb-url":function(t,e){var n=e.context.getSchemaformData().compound;if(t)return i.isAllowedPushwebUrl({actionId:n?n.id:null,url:t}).fail(function(t){throw new Error(t)});o(_("PushWeb URL cannot be empty"))},nest_temperature:function(t,e){var n=e.scale;if(t){if(t=Number(t),n){var i="c"===n?32:90,s="c"===n?9:50;t<s&&o(_("The target temperature can't be lower than {0}").format(s)),t>i&&o(_("The target temperature can't be higher than {0}").format(i)),"c"===n?Math.floor(2*t)!==2*t&&o(_("Celsius temperatures should be integer format in 0.5 degree increments (e.g. 21.5)")):Math.floor(t)!==t&&o(_("Fahrenheit temperatures should be whole integers (e.g. 72)"))}e.min&&t<e.min&&o(_("The temperature can't be lower than the low value of the range")),e.max&&t>e.max&&o(_("The temperature can't be higher than the high value of the range"))}},nest_temperature_range:function(t,e,n){var i="c"===e.scale?1.5:3,s=e.min||e.max;t=Number(t),e.canHeatCool&&(t||o(_("Please select a value for {0}").format(n.title)),Math.abs(t-s)<i&&o(_("There must be at least {0} degrees range between the high and the low").format(i)),e.min&&t<=e.min?o(_("High temperature can't be below low temperature")):e.max&&t>=e.max&&o(_("Low temperature can't be higher high temperature")))},private_key:function(t){t&&t.test(/-{5}BEGIN[\w ]+KEY-{5}([^]+)-{5}END[\w ]+KEY-{5}/)||o(_("Please enter a valid private key"))},regexp:function(t,e){t&&!t.test(e.regexp)&&o(e.message||_("Input value does not match desired pattern"))},twitter_account:function(t,e){var n,i=e.context.getSchemaformData(),s=i.type;t&&i.recipe[s]&&(i.recipe[s].forEach(function(t){/com.twitter/.test("com.twitter.tweet")&&(n=t.config.general.connect_id)}),n&&n!==t&&o(_("Due to recent changes to Twitter’s policies, you can no longer select multiple Twitter accounts in the Actions of the Potion.")))}},Object.assign(s,n),s}.apply(e,i))||(t.exports=s)},function(t,e,n){"use strict";var i,s;i=[n(0),n(278),n(14),n(5)],void 0===(s=function(t,e,n,i){var s=t.h,o=n.namespace("LoaderButton").addRules({root:{position:"relative",display:"flex",overflow:"hidden",justifyContent:"center",alignItems:"center",borderRadius:"4px",padding:"0 23px",height:"32px",backgroundColor:"#7CB020",color:"#ffffff",fontSize:"14px",cursor:"default",transition:"background-color .2s ease-out"},enabled:{hover:{cursor:"pointer",backgroundColor:"#9ECB3F"},active:{cursor:"pointer",backgroundColor:"#74A112"}},disabled:{opacity:.4}}),a=i.extend({style:{none:{position:"absolute",display:"block",top:0,left:0,backgroundColor:"#577A16",height:"100%",width:0},loading:{width:40},loaded:{width:100}},init:function(t){this._parent(t),this.previousStyle=this.style.none,this.onTransitionDone=this.onTransitionDone.bind(this)},render:function(t){var n=Object.assign({},this.style.none,this.style[t.state]);return s(e.Motion,{defaultStyle:{width:0},style:{width:e.spring(n.width,{stiffness:60,damping:13,precision:.1})},onRest:this.onTransitionDone},function(t){return this.previousStyle=Object.assign({},this.previousStyle,{width:t.width+"%"}),s("div",{style:this.previousStyle})}.bind(this))},onTransitionDone:function(){"loaded"===this.props.state&&this.props.onTransitionDone()}});return i.extend({init:function(t){this._parent(t),this.state={step:"none"},this.onClick=this.onClick.bind(this),this.onTransitionDone=this.onTransitionDone.bind(this)},componentWillReceiveProps:function(t){var e=this.state.step;"loading"!==e||t.loading?"checked"===e&&this.setState({step:"none"}):this.setState({step:"loaded"})},render:function(t,e){return s("div",{class:o("root","none"===e.step&&(t.disabled?"disabled":"enabled")),onClick:!t.disabled&&"none"===e.step&&this.onClick},["checked"!==e.step?s(a,{state:"checked"===e.step?"none":e.step,onTransitionDone:this.onTransitionDone}):"",s("div",{style:{position:"relative",zIndex:"1",opacity:"checked"!==e.step?1:0}},_("Done")),s("div",{className:"uwa-icon checked",style:{position:"absolute",display:"flex",justifyContent:"center",alignItems:"center",marginTop:"-2px",width:"100%",height:"100%",transform:"scale(1.3)",opacity:"checked"===e.step?1:0}})])},onClick:function(){this.props.onClick(),this.setState({step:"loading"})},onTransitionDone:function(){this.setState({step:"checked"}),window.setTimeout(function(){this.props.onLoadingTransitionDone?this.props.onLoadingTransitionDone():this.setState({step:"none"})}.bind(this),3e3)}})}.apply(e,i))||(t.exports=s)},function(t,e,n){"use strict";n.r(e);var i=n(0),s=n.n(i),o=n(230),a=n.n(o);function r(){return(r=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t}).apply(this,arguments)}e.default=function(t){return s.a.h(a.a,r({service:"twitter",oauthService:"twitter",initialInput:function(t){return t.getQuery().screenName},formatQuery:function(t){return{screenName:t.screenName}}},t))}},function(t,e,n){"use strict";var i,s;i=[n(2),n(0),n(178),n(27),n(14),n(4),n(137),n(5),n(1071)],void 0===(s=function(t,e,n,i,s,o,a,r,l){var c=e.h,u=s.namespace("PublicProfileSelector").addRules({root:{display:"flex",flexDirection:"column",flex:1,fontSize:"14px",":not(:first-child)":{marginLeft:20}},listHeader:{backgroundColor:"#444444",marginBottom:4,backgroundRepeat:"no-repeat",backgroundPosition:"7px 7px",lineHeight:"60px",fontSize:"24px",paddingLeft:"108px"},connectContainer:{flex:1,display:"flex",alignItems:"center",justifyContent:"center",backgroundColor:"#333"},connectButton:{color:"#fff",cursor:"pointer",fontSize:"14px",":before":{color:"#666",fontSize:"60px",transition:"color .4s",verticalAlign:"-11px",marginRight:"20px"},":hover:before":{color:"#fff"}},listItem:{display:"flex",alignItems:"center",padding:"8px 25px"},listItemImage:{width:"44px",marginRight:"20px"}}),h={facebookPage:{icon:"facebook",title:"Facebook",accountTitle:_("Pages"),oauthService:"facebook",oauthRequest:function(t,e){return function i(s,o){return n.request(s,{method:"GET",type:"json",service:"facebook",connect:t,data:o}).then(function(n){return{results:n.data.map(function(n){return{key:n.id,name:n.name,matchesQuery:n.name.toLowerCase()===e.toLowerCase(),subname:n.category,count:n.fan_count,image:n.picture.data.url,token:t}}),fetchNext:n.paging&&n.paging.next&&i.bind(null,n.paging.next)}})}("https://graph.facebook.com/v2.12/search",{q:e,type:"page",fields:"fan_count,talking_about_count,name,category,picture"})}},twitter:{icon:"twitter",title:"Twitter",accountTitle:_("Accounts"),oauthService:"twitter",oauthRequest:function(t,e){return function i(s){return n.request("https://api.twitter.com/1.1/users/search.json",{method:"GET",type:"json",service:"twitter",connect:t,data:{q:e,page:s,count:20}}).then(function(n){return{results:n.map(function(n){return{key:n.id_str,name:n.name,subname:"@"+n.screen_name,screenName:n.screen_name,matchesQuery:n.screen_name.toLowerCase()===e.toLowerCase(),count:n.followers_count,image:n.profile_image_url,token:t}}),fetchNext:n.length>=20&&i.bind(null,s+1)}})}(1)}}};return r.extend({init:function(t){this._parent(t),this.onClickConnect=this.onClickConnect.bind(this),this.onLoadMore=this.onLoadMore.bind(this),this.state={token:this.props.oauthToken}},_getServiceInfos:function(){return h[this.props.service]},componentWillMount:function(){this.state.token?this._fetchResults(this.state.token):(this.setState({loading:!0}),a.getTokens(this._getServiceInfos().oauthService).done(function(t){if(t[0]){var e=t[0].id;this._fetchResults(e),this.setState({token:e})}else this.setState({loading:!1,token:!1})}.bind(this),function(t){this.setState({loading:!1,error:t})}.bind(this)))},componentWillReceiveProps:function(t){t.oauthToken&&this.setState({token:t.oauthToken});var e=t.oauthToken||this.state.token;t.query!==this.props.query&&e&&this._fetchResults(e,t.query)},render:function(e,n){var s=this._getServiceInfos();return c("div",{class:u("root")},!1!==e.showHeader&&c("div",{class:u("listHeader"),style:{backgroundImage:"url("+t.getAssetURL("img/third-parties/"+s.icon+".svg")}},s.title),n.token||n.error?c(l,{title:s.accountTitle,errorMessage:n.error&&i.getErrorMessage(n.error),singleSelection:e.singleSelection,items:n.results,loading:n.loading,selectedItems:e.selectedProfiles,getItemKey:function(t){return t.key},renderItem:function(t){return c("div",{class:u("listItem")},c("img",{class:u("listItemImage"),src:t.image}),c("div",null,c("div",null,t.name),c("div",null,t.subname),c("div",null,o.formatHumanNumber(t.count))))},onLoadMore:n.fetchNext&&this.onLoadMore,onSelectionChange:e.onSelectionChange}):!n.loading&&c("div",{class:u("connectContainer")},c("div",{class:u("connectButton")+" uwa-icon","data-icon":"3",onClick:this.onClickConnect},_("Add a {0} account").format(s.title))))},onClickConnect:function(){a.authenticate(this._getServiceInfos().oauthService).done(function(t){this.setState({token:t.id}),this._fetchResults(t.id)}.bind(this))},onLoadMore:function(){this.setState({loading:!0}),this.state.fetchNext().done(function(t){this.setState({loading:!1,results:this.state.results.concat(t.results),fetchNext:t.fetchNext})}.bind(this),function(t){this.setState({loading:!1,error:t})}.bind(this))},_fetchResults:function(t,e){void 0===e&&(e=this.props.query),e?(this.setState({loading:!0,results:[]}),this._getServiceInfos().oauthRequest(t,e).done(function(t){var e=t.results.filter(function(t){return t.matchesQuery});e.length&&(this.props.singleSelection&&(e=e.slice(0,1)),this.props.onSelectionChange(e)),this.setState({loading:!1,results:t.results,fetchNext:t.fetchNext})}.bind(this),function(t){this.setState({loading:!1,error:t})}.bind(this))):this.setState({loading:!1,results:[]})}})}.apply(e,i))||(t.exports=s)},function(t,e,n){"use strict";var i,s;i=[n(3),n(0),n(11),n(65),n(186)],void 0===(s=function(t,e,n,i,s){var o=s.default,a=s.style,r=s.DataRow;return a.addRules({title:{display:"flex",flex:"1",alignItems:"center",padding:"0 35px",fontSize:"18px"},checked:{backgroundColor:"#ededed",borderBottomColor:"#ddd"},nextIsChecked:{borderBottomColor:"#ddd"},itemCheckbox:{display:"flex",alignItems:"center",marginRight:"50px"},errorMsg:{margin:"10px"}}),o.extend({init:function(t){this._parent(t),this.onItemClick=this.onItemClick.bind(this)},renderBody:function(){var t=this.props;return e.h("div",{className:a("body")},e.h(i,{ref:function(t){this._scroller=t}.bind(this),style:{flex:1}},t.items.map(function(n,i){var s=t.selectedItems.includes(n),o=i+1<t.items.length&&t.selectedItems.includes(t.items[i+1]);return e.h(r,{key:t.getItemKey(n),className:a(s&&"checked",o&&"nextIsChecked"),onClick:this.onItemClick,"data-item-index":i,item:n,renderItem:function(n){return e.h("div",null,e.h("div",{className:a("itemContent")},t.renderItem(n)))}})},this)))},onItemClick:function(e){var n=t.findElement(e,"[data-item-index]").getAttribute("data-item-index"),i=this.props.items[n],s=this.props.selectedItems;s=this.props.singleSelection?[i]:s.includes(i)?s.filter(function(t){return t!==i}):s.concat(i),this.props.onSelectionChange(s)}})}.apply(e,i))||(t.exports=s)},function(t,e,n){"use strict";var i,s;i=[n(3),n(0),n(14),n(5),n(11)],void 0===(s=function(t,e,n,i,s){var o=e.h,a=n.namespace("SearchInput").addRules({root:{position:"relative"},cross:{display:"inline-block",position:"relative",verticalAlign:"middle",marginLeft:"-56px",marginRight:"40px",top:"-1px",color:"#CFCFCF",transition:"color .2s ease-out",cursor:"pointer",":hover":{color:"#666666"}},largeCross:{marginLeft:"-43px",marginRight:"11px",top:"1px",":before":{fontSize:"40px"}},glass:{position:"relative",verticalAlign:"middle",cursor:"pointer",display:"inline-flex",alignItems:"center",justifyContent:"center",backgroundColor:"#dadada",borderRadius:"0 4px 4px 0",height:"30px",width:"31px",marginLeft:"-32px",":hover":{backgroundColor:"#e3e3e3"},":active":{backgroundColor:"#cacaca"}},searching:{cursor:"default",backgroundColor:"#dadada !important"},largeGlass:{top:"-1px",marginLeft:"24px",backgroundColor:"transparent !important"},glassButton:{color:"#444",":before":{lineHeight:"13px"}},largeGlassButton:{color:"#969696",transition:"color .2s ease-out",":hover":{color:"#ffffff"},":before":{fontSize:"60px",lineHeight:"26px"}},spinner:{marginLeft:"10px"}});return i.extend({init:function(t){this._parent(t),this.setState({tempValue:t.initialValue||""}),this.onChange=this.onChange.bind(this),this.onCloseClick=this.onCloseClick.bind(this),this.onValidateSearch=this.onValidateSearch.bind(this)},componentWillReceiveProps:function(t){t.initialValue&&this.props.initialValue!==t.initialValue&&this.setState({tempValue:t.initialValue})},getValue:function(){return this.state.tempValue},render:function(t){return o("div",{class:a("root")},o(s.Text,{attributes:{events:{change:this.onChange,keyup:this.onChange},styles:{margin:"0",width:t.large&&"500px",paddingRight:t.large?"52px":"62px"}},className:t.large&&"large",value:this.state.tempValue,ref:function(t){this._input=t}.bind(this)}),o("div",{className:"uwa-icon "+a("cross",t.large&&"largeCross"),"data-icon":",",onClick:this.onCloseClick}),t.showGlass&&this.renderGlass())},renderGlass:function(){var t=this.props;return o("div",{class:a("glass",t.searching&&"searching",t.large&&"largeGlass"),onClick:!t.searching&&this.onValidateSearch},!t.inactive&&(t.searching?o(s.Spinner,{autostart:!0,size:t.large?40:20,delay:0,color:t.large?"#F5F5F5":"#444"}):o("div",{className:"uwa-icon "+a("glassButton",t.large&&"largeGlassButton"),"data-icon":"U"})))},componentDidUpdate:function(){this._maybeFocus()},componentDidMount:function(){this._maybeFocus()},_maybeFocus:function(){this.props.focus&&setTimeout(function(){this._input&&this._input.getControl().focus(!0)}.bind(this),0)},onChange:function(e){var n=t.whichKey(e),i=t.getElement(e);this.setState({tempValue:i.value}),this.props.onValueChange&&this.props.onValueChange(i.value),"return"===n&&i.value&&this.onValidateSearch()},onCloseClick:function(){this.setState({tempValue:""}),this.props.onEmptySearch&&this.props.onEmptySearch()},onValidateSearch:function(){this.props.onValidateSearch&&this.props.onValidateSearch(this.state.tempValue)}})}.apply(e,i))||(t.exports=s)},function(t,e,n){"use strict";n.r(e);var i=n(0),s=n.n(i),o=n(230),a=n.n(o),r=n(178),l=n.n(r),c=n(137),u=n.n(c);function h(){return(h=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t}).apply(this,arguments)}function d(t,e,n,i,s,o,a){try{var r=t[o](a),l=r.value}catch(t){return void n(t)}r.done?e(l):Promise.resolve(l).then(i,s)}function p(){var t;return t=regeneratorRuntime.mark(function t(e){var n,i;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,u.a.getTokens("facebook");case 2:if(!(n=t.sent).length){t.next=8;break}return t.next=6,l.a.request("https://graph.facebook.com/v2.12/"+e,{method:"GET",type:"json",service:"facebook",connect:n[0]});case 6:return i=t.sent,t.abrupt("return",i.name);case 8:case"end":return t.stop()}},t)}),(p=function(){var e=this,n=arguments;return new Promise(function(i,s){var o=t.apply(e,n);function a(t){d(o,i,s,a,r,"next",t)}function r(t){d(o,i,s,a,r,"throw",t)}a(void 0)})}).apply(this,arguments)}var m=new Map;function f(t){if(t)return m.has(t)||m.set(t,function(t){return p.apply(this,arguments)}(t)),m.get(t)}e.default=function(t){return s.a.h(a.a,h({service:"facebookPage",oauthService:"facebook",initialInput:function(t){return f(t.getQuery().facebookPageId)},formatQuery:function(t){return{facebookPageId:t.key}}},t))}},function(t,e,n){"use strict";var i,s;i=[n(0),n(5),n(11),n(183),n(55),n(456)],void 0===(s=function(t,e,n,i,s,o){var a=t.h;function r(t){var e=t.getQuery();return{topic:e.topic,context:e.context,date_from:t.getFrom(),date_to:t.getTo(),range:t.getRange(),sampling:t.getSampling()}}var l=n.Abstract.extend({_renderProps:{style:{height:"100%"}},_mutateValue:function(t,e){if(this._parent(t,e))return!0;switch(t){case"source":return this._control.setParameters(r(e)),!0}return!1},_buildControl:function(t){return new o({className:"",parameters:r(t.source),showSampling:!0,showRange:!0,events:{onFooterChange:t.onFooterChange}})}});return e.extend({init:function(t){this._parent(t),this.state={footerMode:"default"},this._onNextStep=this._onNextStep.bind(this),this._onFooterChange=this._onFooterChange.bind(this)},render:function(t,e){var n=e.footerMode,o="disabled-click"===n||"disabled-save"===n;return a(i,{source:t.source,events:t.events,loading:t.loading,rightNavigation:o&&[a(s.Text,{label:_("Cancel"),onClick:function(){this.editor.getControl().cancelView(),this.editor.getControl().setView("filtering")}.bind(this)}),a(s.Main,{label:_("Apply"),onClick:function(){this.editor.getControl().storeViewData()}.bind(this)})],hasPreviousStep:t.hasPreviousStep,onNextStep:this._onNextStep},a("div",{class:this.getClassNames(),style:{height:"100%"}},a(l,{ref:function(t){this.editor=t}.bind(this),onFooterChange:this._onFooterChange,source:t.source})))},_onFooterChange:function(t){this.setState({footerMode:t})},_onNextStep:function(){var t=this.editor.getControl().getParameters();this.props.events.onPopulateSource({query:{topic:t.topic,context:t.context},from:t.date_from,to:t.date_to,sampling:t.sampling,range:t.range}).done(function(){this.props.events.onDisplayStep("editIngredient",{source:this.props.source})}.bind(this))}})}.apply(e,i))||(t.exports=s)},function(t,e,n){"use strict";var i,s;i=[n(1),n(3),n(26),n(23),n(110),n(4),n(27),n(44),n(161),n(36),n(99),n(236),n(1076),n(41),n(139),n(182)],void 0===(s=function(t,e,n,i,s,o,a,r,l,c,u,h,d,p,m,f){var g=t.createElement,v={"twitter.type":"twitter","twitter.retweeter":"twitter","twitter.in_reply_to":"twitter","twitter.author":"twitter"};return f.extend({name:"filtering",isLoading:!1,tempTopic:null,init:function(t){this._parent(t),this.treesList={}},show:function(){this._parent(),this.tempTopic=this.data.get("topic"),this.savedTopic=this.data.get("topic"),this.zorch(!0)},destroy:function(){this._parent(),this.itemList&&this.itemList.destroy()},retrieveData:function(){var t=this.computeTopic();return this.savedTopic=t,{topic:t}},changeData:function(t){this.dispatchEvent("onDataChanged",t)},cancel:function(){var t=this.elements.facets.getElement("li.selection .inner");t&&(this.tempTopic=this.data.get("topic"),this.savedTopic=this.data.get("topic"),t.getChildren().forEach(function(t){this.unselectFacet(t,!0)}.bind(this)),this.zorch(!0))},build:function(){this._parent(),this.buildSkeletton()},buildSkeletton:function(){this.elements.itemsContainer=g("div",{class:"analyse-results-content "}).addContent(this.elements.items=g("div",{class:"analyse-results-items"})),this.elements.filtersContainer=g("div",{class:"analyse-filters-content"}).addContent(this.elements.facets=g("div",{class:"analyse-results-facets"}),this.elements.spinnerFilters=g("span",{class:"spinner"})),this.elements.view.addContent(g("div",{class:"analyse-filtering"}).addContent(g("div",{class:"analyse-results"}).addContent(g("div",{class:"analyse-results-header"}).addContent(g("h2",{text:_("Articles: ")}).addContent(this.elements.numResults=g("span",{class:"results"}),this.elements.spinnerArticles=g("span",{class:"spinner"})),this.elements.incompleteWarning=g("div",{class:"incomplete-warning uwa-message warning",text:_("For inactive or newly created dashboards, there might be a delay before you can get new results.")})),this.elements.scroller=new i({element:this.elements.itemsContainer,shadows:!0})),this.elements.filters=g("div",{class:"analyse-filters"}).addContent(g("div",{class:"analyse-filters-header"}).addContent(g("h2",{text:_("Metrics")})),new i({element:this.elements.filtersContainer,shadows:!0})))),this.elements.scroller.getInnerElement().addEvent("scroll",o.debounce(this.onScrollEvent,100,this)),this.buildSpinners()},buildSpinners:function(){this.spinners={articles:new p({autostart:!1,size:18,color:"#666666"}),filters:new p({autostart:!1,size:30,color:"#ffffff"})},this.elements.spinnerArticles.addContent(this.spinners.articles),this.elements.spinnerFilters.addContent(this.spinners.filters)},zorch:function(t){this.elements.items.empty(!0),this.elements.numResults.empty(),this.spinners.articles.stop(),t&&this.elements.facets.empty(!0),this.loadItems(!1,t)},loadItems:function(t,e){var n;if(!this.isLoading){!this.itemList||t||e||this.changeData();var i=this.getNumAppsToLoad();if(this.itemList&&t){if(!this.itemList.hasMore())return;n=this.itemList.loadMore(i)}else this.itemList&&this.itemList.destroy(),this._listEvents={onProducerChange:function(t){t.hasChanged("facets")&&(this.buildFilters(t),this.buildSampling(this.itemList.getSampling()))}.bind(this)},this.tempTopic=this.computeTopic(),n=m.fetch({query:{topic:this.tempTopic,context:this.data.get("context")}},Object.assign({limit:i,type:"preview"},c.formatDateRangeForAPI(this.data.get("date_from"),this.data.get("date_to")))).then(function(t){return this.itemList=t,t.addEvents(this._listEvents),e&&this.refreshFilters(),t.loadItemCount().done(function(){this.buildCounter(t)}.bind(this)),t.getItems()}.bind(this)).fail(function(t){this.displayError(t)}.bind(this));this.isLoading=!0,this.spinners.articles.start(),e&&this.spinners.filters.start(),n.done(function(t){t&&this.onItemsLoadingDone(this.itemList,t)}.bind(this),function(t){this.onItemsLoadingFailed(t||"unknown_error")}.bind(this))}},displayError:function(t){var e=t&&t.message||_("Error loading articles");if(t&&t.originalResponse){var n=t.originalResponse.error.code;e=a.getErrorMessage("stream_"+n)}this.onItemsLoadingFailed("unknown_error"),this.spinners.articles.stop(),this.spinners.filters.stop(),this.elements.items.empty().addContent(g("div",{class:"uwa-message simple",text:e})),this.changeData(!0)},computeTopic:function(){var t=this.savedTopic||this.tempTopic,e=this.elements.facets,n=e&&e.getElement(".uwa-accordion-item.selection");if(!n)return t;var i=[];n.getElement(".uwa-accordion-content .inner").getChildren().forEach(function(t){t.getAttribute("data-id")&&i.push({value:JSON.parse(t.getAttribute("data-value")),category:t.getAttribute("data-category")})});var s={raw:t,and:[]},o={};i.forEach(function(t){"expressions"!==t.category?(o.hasOwnProperty(t.category)||(o[t.category]=[]),o[t.category].push(t.value)):s.and.push({value:t.value})});var a=Object.keys(o).map(function(t){return{or:o[t].map(function(e){return"saved"===e?{type:"saved",value:"true"}:"opinion_added"===e?{type:"opinion_added",value:"true"}:{type:t,value:e}})}});return s.and.push({and:a}),l.buildQuery(s)},buildItems:function(t){var e=t.map(function(t){return this.buildItem(t)},this);this.elements.items.addContent(e)},buildItem:function(t){var e=t.getContent().length>0,n=t.getSourceTitle(),i=t.getSourceLink(),s=t.getTitle()||_("No title"),o=t.getFullLink()||t.getLink(),a=g("div",{class:"analyse-item-time"});return r.bindRelativeTime(a,t.getPublishDate(),"abbr"),g("div",{class:"analyse-item"}).addContent(g("div",{class:"analyse-item-fav"}).addContent(i?g("img",{src:t.getFaviconURL()}):""),g("div",{class:"analyse-item-source"}).addContent(i?g("a",{text:n,href:i,target:"_blank"}):g("span",{text:n})),g("div",{class:"analyse-item-title"}).addContent(g("a",{text:s,href:o,target:"_blank"}),e?g("span",{class:"analyse-item-content",html:" - "+t.getContent().sanitizeHTML()}):null),a)},refreshFilters:function(){this.itemList.getProducers().length&&(this.spinners.filters.start(),this.elements.facets.empty(!0),this.itemList.loadFacets().done(function(){this.buildFilters(this.itemList.getProducers()[0]),this.buildSampling(this.itemList.getSampling())}.bind(this)))},buildFilters:function(t){if(!t.getFacets()||this.elements.facets.getChildren().length>0)this.spinners.filters.stop();else{this.elements.facets.addContent(this.elements.filtersAccordion=new s({className:"filters-accordion dark",multiSelect:!0})),this.elements.filtersAccordion.addEvent("onChange",this.onAccordionChange.bind(this)),this.spinners.filters.stop();var e=this.facets={};o.forEachProperty(t.getFacets(),function(t,n){var i=v[n];if(i){var s=e[i];s||(s=e[i]={categories:[],count:0,isGroup:!0}),t.categoryName=n,s.categories.push(t),s.count+=t.count}else e[n]=t}),this.weakMap=new WeakMap,o.forEachProperty(e,function(t,e){var n=u.getFacetTitle(e,!0);if(t.count){var i=g("div",{class:"inner"});i.setData("facet",e),this.elements.filtersAccordion.addItem(e,{text:n,content:i})}},this)}},buildSampling:function(t){if(t&&!(t>=100)){var e=this.elements.filters.getElement(".analyse-filters-header h2"),n=e.getElement(".analyse-filters-header-sampling");n&&n.remove(),e.addContent(g("span",{class:"analyse-filters-header-sampling",text:_("(Sampled results {0}%)").format(t)}))}},buildCounter:function(e){var n=e.getTotalItemCount();if(t.is(n)){var i=n<=1?_("result"):_("results");this.elements.numResults.setText(" "+o.formatHumanNumber(n)+" "+i)}},onAccordionChange:function(t,e){var i=this.elements.facets.getElement(".uwa-accordion-item."+t),s=i.getElement(".uwa-accordion-content"),o=i.getElement(".inner"),a=s.getSize().height;if(e){if("selection"!==t){o.getChildren().length>0&&o.empty(!0);var r=o.getData("facet");o.addContent(this.buildAccordionFacet(r))}s.setStyles({display:"block",height:0}),new n(s,{duration:250,transition:"quadOut",events:{onComplete:function(){s.setStyles({height:"auto"})}}}).start({height:a})}else new n(s,{duration:250,transition:"quadOut",events:{onComplete:function(){s.setStyles({display:"none",height:a}),this.elements.filtersAccordion.dispatchEvent("onAccordionItemClosed",{name:t},this),o.empty(!0)}.bind(this)}}).start({height:0})},buildAccordionFacet:function(t){var e,n,i=[],s=this.facets[t];if(!(s.count<=0)){for(e in s.categories){var o;if(s.categories.hasOwnProperty(e))if(n=s.categories[e],o=s.isGroup?this.createGroupFacet(n):this.createFacet(n,t),n.hasOwnProperty("categories")){var a=this.buildFacetsTree(o,n.categories,{isSubTree:!1,parentIsSelectable:!s.isGroup});i.push(a)}else i.push(o)}return i}},buildFacetsTree:function(t,e,n){var i=new d({parent:t.getContent(),parentIsSelectable:n.parentIsSelectable,isSubTree:n.isSubTree,facets:e}).addEvent("clickExpand",this.onFacetsTreeClick.bind(this));return(t=t.getContent()).addClassName("app-tree-parent-item"),t.setAttribute("data-is-parent","true"),this.treesList[t.getAttribute("data-id")]=i,this.weakMap.set(t,e),i},toggleOpenCloseTree:function(t,e){var n,i,s=t.elements.items.parent,o=this.weakMap.get(s),a=s.getAttribute("data-category");e?t.closeTree():(o.forEach(function(e){n=this.createFacet(e,a),e.hasOwnProperty("categories")?(i=this.buildFacetsTree(n,e.categories,{isSubTree:!0,parentIsSelectable:!0}),t.addItem("",{content:i})):t.addItem("",{content:n})},this),t.openTree())},onFacetsTreeClick:function(t){var e=t.target,n=t.isExpanded;e&&this.toggleOpenCloseTree(e,n)},createFacet:function(t,e){var n=/\/([\w\W]+)/.exec(t.id),i=n?n[1]:t.id,s=t.title;return new h({title:s,value:s,numArticles:t.count,id:i,category:e}).addEvents({onSelect:this.onSelectFacet.bind(this),onUnselect:this.onUnselectFacet.bind(this)})},createGroupFacet:function(t){return new h({title:u.getFacetTitle(t.categoryName,!0),numArticles:t.count,isSelectable:!1,category:t.categoryName})},selectFacet:function(e){var n,i,s=e.getAttribute("data-id"),o=this.elements.filtersAccordion,a=o.hasItem("selection"),r=g("div").addContent(g("div",{class:"inner"}),g("div",{class:"clear",text:_("Clear all metrics"),events:{click:this.cancel.bind(this)}})),l=e.getAttribute("data-category"),c=r.getElement(".inner"),u=this.getParentName(e),d=JSON.parse(e.getAttribute("data-value"));if(u?l.match(/(opinion_sentiment|sentiment_opinion)/)?(l=l.split("_"),d=[u,d]):d=u+"/"+d:l.match(/(opinion_sentiment|sentiment_opinion)/)&&(l=l.split("_")[0]),i=new h({title:t.is(d,"array")?d.join(","):d,value:d,id:s,category:l,isSelection:!0}).addEvent("onClose",this.onUnselectFacet.bind(this)),a?(c=this.elements.facets.getElement(".uwa-accordion-item.selection .inner")).getElement('div[data-id="'+s+'"]')||i.inject(c):(i.inject(c),o.addItem("selection",{text:_("You selected"),content:r,where:"top"}),o.selectItem("selection")),"true"===e.getAttribute("data-is-parent")){var p=this.treesList[s].isSelected();this.toggleOpenCloseTree(this.treesList[s],p),e.getElements("+ .app-tree-expandable .facet").forEach(function(t){t.addClassName("facet-selected"),(n=c.getElement('div[data-id="'+t.getAttribute("data-id")+'"]'))&&n.remove()})}},unselectFacet:function(t,e){var n,i=t.getAttribute("data-id");this.elements.facets.getElements('div[data-id="'+i+'"]').forEach(function(t){t.getParent("li.selection")?t.remove():t.removeClassName("facet-selected")}),(t=this.elements.facets.getElement('div[data-id="'+i+'"]'))&&(e&&"true"===t.getAttribute("data-is-parent")&&t.getElements("+ .app-tree-expandable .facet").forEach(function(t){this.unselectFacet(t,!0)}.bind(this)),(n=this.elements.facets.getElement("li.selection .inner"))&&n.getChildren()<=0&&(this.elements.filtersAccordion.addEvent("onAccordionItemClosed",function(t){"selection"===t.name&&this.elements.filtersAccordion.removeItem("selection")}.bind(this)),this.elements.filtersAccordion.unselectItem("selection")))},unselectParent:function(t){var e,n=t.getParent(".app-tree-expandable");n&&(e=n.getParent(".app-tree").getElement(".app-tree-parent-item"),this.unselectFacet(e),t.getParent(".app-tree-list").getElements("> .app-tree-item").forEach(function(t){(t=t.getElement(".facet")).hasClassName("facet-selected")&&this.selectFacet(t)}.bind(this)),this.unselectParent(e))},unselectAll:function(){var t=this.elements.facets.getElement(".uwa-accordion-item.selection"),e=this.elements.filtersAccordion;t&&(t.getElements(".inner div[data-id]").map(function(t){this.unselectFacet(t,!0)}.bind(this)),e.unselectItems())},getNumAppsToLoad:function(){var t=this.getItemsContainerHeight();return Math.ceil(t/30+3)},getItemsContainerHeight:function(){var t=this.elements.itemsContainer.getSize().height;return"hidden"!==this.footerMode?t-100:t},getParentName:function(t){return t.getParents(".app-tree-expandable").map(function(t){return JSON.parse(t.previousElementSibling.getAttribute("data-value"))}).reverse().join("/")},checkEnoughItemsLoaded:function(){if(this.itemList){var t=this.getNumAppsToLoad(),e=this.itemList.getItems().length;this.itemList.hasMore()&&e&&t>e&&this.loadItems(!0)}},onItemsLoadingDone:function(t,e){this.isLoading=!1,this.spinners.articles.stop(),this.buildCounter(t),this.buildSampling(t.getSampling()),this.elements.view.toggleClassName("show-incomplete-warning",this.itemList.isIncomplete()),this.buildItems(e),this.checkEnoughItemsLoaded()},onItemsLoadingFailed:function(){this.isLoading=!1},onScrollEvent:function(t){var e=t.target,n=this.getItemsContainerHeight();e.scrollTop+e.getSize().height>e.scrollHeight-n&&this.loadItems(!0)},onSelectFacet:function(t){var n=e.findElement(t,".facet");this.selectFacet(n),this.zorch()},onUnselectFacet:function(t){var n=e.findElement(t,".facet");this.unselectParent(n),this.unselectFacet(n,!0),this.zorch()},onResize:function(){this.checkEnoughItemsLoaded()}})}.apply(e,i))||(t.exports=s)},function(t,e,n){"use strict";var i,s;i=[n(1),n(3),n(26),n(365)],void 0===(s=function(t,e,n,i){var s=i.extend({name:"app-tree",defaultOptions:{className:"",parent:null,parentIsSelectable:!0,isAnimated:!0,numItemsToShow:3,isSubTree:!1,multiSelect:!0},numVisibleItems:0,init:function(t){this._parent(t),this.facets=t.facets,this.elements.facets={}},buildSkeleton:function(){var e=this.elements,n=e.items.parent=this.options.parent;e.container=t.createElement("div",{class:(this.name+" "+this.options.className).trim()}).addContent(n.addContent(e.arrow=t.createElement("div",{class:"parent-arrow uwa-icon"})),e.expandable=t.createElement("div",{class:this.name+"-expandable"}).addContent(t.createElement("span",{class:"app-tree-head-separator"}),e.itemContainer=t.createElement("ul",{class:this.name+"-list"}),e.moreItems=new t.createElement("div",{class:this.name+"-more",html:[{tag:"span",text:"h"},{text:_("See more")}],events:{click:this.showMoreItems.bind(this,!0)}}))),(this.options.parentIsSelectable?e.arrow:n).addEvent("click",this.onClickExpand.bind(this))},updateItemClassNames:function(){var t=this.elements.items;this._parent(),t.hasOwnProperty("parent")&&(t.parent.removeClassName(this.name+"-item"),t.parent.removeClassName("uwa-segmented-item"),t.parent.removeClassName(this.name+"-item-first"),t.parent.removeClassName("uwa-segmented-item-first"),t.parent.addClassName(this.name+"-parent-item"))},createItem:function(e,n){var i=this.elements.items,s=this.elements.facets,o=t.createElement("li").addContent(t.createElement("div",{class:this.name+"-branch"}),n.content.getContent());return i[e]=o,s[e]=n.content,o},isSelected:function(){return this.elements.container.hasClassName("extended")},showItem:function(t,e){t.setStyles({display:"block",opacity:"0"}),new n(t,{duration:e}).start({opacity:1})},addItem:function(t,e){this._parent(t,e)},openTree:function(){this.isSelected("parent")||this.toggleItem("parent")},closeTree:function(){this.isSelected("parent")&&this.toggleItem("parent")},onClickExpand:function(t){e.stop(t),this.dispatchEvent("clickExpand",{target:this,isExpanded:this.isSelected("parent")})},onChange:function(t,e){var n=this.options.isAnimated?150:0;e?this.showItems(!1,n,t):this.hideItems(n,t)},hideItems:function(t){var e=this.elements.expandable;new n(e,{duration:t,events:{onComplete:this.onItemsHidden.bind(this)}}).start({height:0})},onItemsHidden:function(){var t=this.elements.itemContainer,e=this.elements.container,n=e.getElements("."+this.name+"-expandable"),i=e.getElements("."+this.name+"-list"),s=e.getElements("."+this.name),o=t.getElements(".facet.selected");e.removeClassName("extended"),n.invoke("setStyles",{display:"none",height:"0"}),i.invoke("setStyles",{display:"",height:""}),s.invoke("removeClassName","extended"),o.invoke("removeClassName","selected"),e.getElement("."+this.name+"-list").empty(!0)},showItems:function(t,e){var i,s,o=this.elements.expandable,a=this.elements.itemContainer,r=a.getElements("."+this.name+"-expandable"),l=this.elements.moreItems,c=!1,u=this.options.numItemsToShow;if(!this.elements.container.hasClassName("extended")){var h=a.getChildren(),d=h.length;if(0!==d){r.invoke("setStyle","display","none"),o.setStyles({display:"block",height:"0"}),a.setStyle("display","block"),s=a.getSize().height,t||!t&&0===u?u=d:(u+2>=d?u=d:c=!0,i=(s=h[0].getSize().height*u)+(c?l.getSize().height:0)),o.setStyle("height","0"),a.setStyle("height",s),l.setStyle("display",c?"block":"none"),this.elements.container.addClassName("extended"),new n(o,{duration:e,events:{onComplete:function(){o.setStyle("height","auto")}}}).start({height:i});for(var p=u;p<d;p++)h[p].setStyle("display","none");if(this.options.isSubTree)o.getParent("."+this.name+"-list").setStyle("height","auto")}}},showMoreItems:function(){var t=this.options.isAnimated?150:0,e=this.elements.expandable,i=this.elements.itemContainer,s=e.getSize().height,o=i.getChildren();this.elements.moreItems.setStyle("display","none"),e.setStyle("height",s),o.invoke("setStyle","display",""),i.setStyle("height","auto");var a=i.getSize().height;new n(e,{duration:t,events:{onComplete:function(){e.setStyle("height","auto")}}}).start({height:a})}});return App.Controls=App.Controls||{},App.Controls.Tree=s,s}.apply(e,i))||(t.exports=s)},function(t,e,n){"use strict";var i,s;i=[n(1),n(59),n(71),n(43),n(83),n(20),n(21),n(117),n(4),n(6),n(109),n(231),n(182)],void 0===(s=function(t,e,n,i,s,o,a,r,l,c,u,h,d){var p={feed:[],tab:[],library:[]},m=i.extend({init:function(t){this._parent(t),this.suggestions=[]},retrieveTabsAndFeeds:function(t){return c.getSearchData({prefix:["library","tab","feed"],start:t})},getSuggestions:function(t){var e=this;return this.suggestions.length&&t===this.searchValue?o.resolve(this.suggestions):(this.searchValue=t,this.suggestions=[],this.retrieveTabsAndFeeds(t).done(function(t){function n(t,n){n.forEach(function(n){n.label&&e.suggestions.push({fullValue:n.label,title:n.label,type:t,data:"feed"===t?u.factory(n):"tab"===t?a.getById(n.id).dataObj:n})})}for(var i in t)t.hasOwnProperty(i)&&n(i,t[i]);return e.suggestions}))},renderSuggestions:function(e){var n={},i={tab:"double-window",feed:"rss",library:"book"},s={tab:function(t,e){r.setIconSrc(e,t.iconConfig||t.icon)},feed:function(t,e){t.getFaviconURL?e.src=t.getFaviconURL(""):t.getLink()?e.src=l.getFaviconUrl(t.getLink()):(e.src=l.BLANK_IMAGE_URL,e.addClassName("empty-icon"))}};return e.forEach(function(t){n[t.type]||(n[t.type]=[]),n[t.type].push(t)}),Object.keys(n).map(function(e){return{tag:"div",class:"category uwa-icon "+(i[e]||"magnifying-glass"),html:n[e].map(function(n){var i;return s[e]&&(i=t.createElement("img",{class:"icon"}),s[e](n.data,i)),{tag:"div",class:"suggestion"+(n.data.isLibrary&&n.data.isLibrary()?" is-lib":""),html:[i,n.fullValue.escapeHTML()]}},this)}})}});return d.extend({name:"within",dashboardMode:!0,completer:null,build:function(){var e,i,o=this;this._parent(),e=h.getTemplate("within-panel")(),i=this.elements.view.addContent(e),this.completer=new n({adaptor:m,floatingSuggestions:!1,inputOptions:{attributes:{placeholder:_("Type to browse")}}}).inject(this.elements.view.getElement(".within-tabfeed-info"),"top"),this.completer.addEvent("onSetSuggestion",this.onSetSuggestion.bind(this)),this.completer.getInputElement().addEvent("focus",this.completer.updateSuggestions.bind(this.completer,{typeDelay:0})),s.parse(i,{onComplete:function(e){o.elements=t.extend(o.elements,e),o.setup()}})},retrieveData:function(){return{context:this.getContext()}},changeData:function(){this.dispatchEvent("onDataChanged")},cancel:function(){this.setup()},setup:function(){var t=this.data.get("context");this.dashboardMode=!t.feed&&!t.tab&&!t.library,this.elements.withinDashboard.check(this.dashboardMode),this.elements.withinTabfeed.check(!this.dashboardMode),this.toggleDisplayMode(),this.elements.withinDashboard.addEvent("onChange",this.toggleMode.bind(this)),this.elements.withinTabfeed.addEvent("onChange",this.toggleMode.bind(this)),this.completer.setValue(""),p={feed:[],tab:[],library:[]},this.dashboardMode||this.getSuggestions()},toggleMode:function(){this.dashboardMode=this.elements.withinDashboard.isChecked(),this.changeData(),this.toggleDisplayMode()},toggleDisplayMode:function(){this.dashboardMode||this.elements.view.getElement(".within-tabfeed-info").show()},getContext:function(){var e={};return this.dashboardMode||(e=t.clone(p,!0)),e},onSetSuggestion:function(t){this.completer.getInputControl().focus(!1),this.completer.setValue(""),this.elements.withinDashboard.check(!1),this.elements.withinTabfeed.check(!0),this.toggleMode(),p[t.type].push(t.title),this.displaySelected(t.title,t.type)},displaySelected:function(t,n){this.elements.view.getElement(".within-tabfeed-info h3").setStyle("display","block");var i=new e({value:t,className:"selected "+n,closable:!0});i.getContent().setData("tabOrFeed",t),i.addEvent("onClose",function(){this.deleteSelected(i)},this),this.elements.view.getElement(".within-tabfeed-selected").addContent(i)},deleteSelected:function(t){var e=t.getContent(),n=e.getData("tabOrFeed"),i=Object.keys(p),s=null;if(i.forEach(function(t){p[t].indexOf(n)>-1&&(s=t)}),s){this.changeData();var o=p[s].indexOf(n);o>-1&&(p[s].splice(o,1),e.remove())}0===p.feed.length&&0===p.tab.length&&0===p.library.length&&this.elements.view.getElement(".within-tabfeed-info h3").setStyle("display","none")},getSuggestions:function(){var t=this.data.get("context");for(var e in t)if(t.hasOwnProperty(e)&&"lib"!==e)for(var n in t[e])t[e].hasOwnProperty(n)&&(p[e].push(t[e][n]),this.displaySelected(t[e][n],e));return p}})}.apply(e,i))||(t.exports=s)},function(t,e,n){"use strict";var i,s;i=[n(1),n(3),n(13),n(18),n(83),n(8),n(59),n(20),n(231),n(97),n(71),n(43),n(182),n(6),n(2),n(191)],void 0===(s=function(t,e,n,i,s,o,a,r,l,c,u,h,d,p,m,f){var g={"enclosure:":[!0,!1],"audio:":["true","false"],"video:":[!0,!1],"image:":[!0,!1],"media:":[],"feed:":[],"tab:":[],"author:":[],"library:":[],"opinion:":[],"sentiment:":[],"user:":[],"twitter.reach_count:":[],"twitter.followers_ratio:":[],"twitter.followers_count:":[],"twitter.followings_count:":[],"twitter.type:":[],"twitter.in_reply_to:":[],"twitter.retweeter:":[],"twitter.author:":[]};m.isIn3DDashboard()&&delete g["user:"];var v={},b={autocompleteAdaptor:h.extend({makeRegexp:function(t){for(var e="",n="",i=0;i<t.length;i++){var s=t.charAt(i);e+="({0}{1}".format(i>0?"$|":"",s=" "===s?"\\s":s),n+=")"}return new RegExp("\\b"+e+n+"$")},getSuggestions:function(e,i){var s=e.slice(0,i);-1!==e.indexOf('"')&&e.indexOf('"')!==e.length-1&&(i-=1,s=e.replace(/"/g,"").slice(0,i));var o=/\b([.\w\d]+:[\w\d]*)$/.exec(s),a=b.logicalWords.map(n.memoize(this.makeRegexp)),r=Object.keys(b.metaOperators).map(n.memoize(this.makeRegexp));if(o){var l=o[0].split(":"),c=l[0],u=l[1];if(b.metaOperators[c+":"])return p.getSearchData({prefix:c,search:u.replace(/"/g,"")}).done(function(t){t[c]=t[c].filter(function(t){return Boolean(t.label)});var e=t[c].map(function(t){return c+":"+t.label});return b.findMatches(e,c+":"+u,i)})}var h,d=[];for(h=0;h<a.length;h++){var m=a[h].exec(s);if(m)b.findMatches(b.logicalWords,m[0],i).forEach(function(e){d.some(function(n){return t.equals(e,n)})||d.push(e)})}for(h=0;h<r.length;h++){var f=r[h].exec(s);if(f){var g=b.findMatches(Object.keys(b.metaOperators),f[0],i);(g=g.filter(function(e){return!d.some(function(n){return t.equals(e,n)})})).length>0&&(d=d.concat(g))}}if(d.length>0)return d},renderSuggestion:function(t){return[{tag:"strong",text:t.displayValue.slice(0,t.lastWord.length)},{tag:"span",text:t.displayValue.slice(t.lastWord.length)}]}}),logicalWords:["AND","OR"],metaOperators:g,getQuotes:function(t){var e,n=[],i=/\\*"/g;do{(e=i.exec(t))&&e[0].length%2&&n.push(e.index+e[0].length)}while(e);return n},findDelimiters:function(t,e){var n,i=t.substr(e),s=t.substr(0,e),o=e,a=e,r=this.getQuotes(s),l=this.getQuotes(i);return r.length%2==0?(o=s.lastIndexOf(" ")+1,a=(n=i.indexOf(" "))<0?t.length:a+n):(o=s.lastIndexOf(" ",r[r.length-1])+1,l.length%2==0?a=(n=i.indexOf(" "))<0?t.length:a+n:a+=l[0]),{start:o,end:a}},findMatches:function(t,e,n){var s=new RegExp("^"+i.escapeRegExp(e),"i");return t.filter(function(t){return s.test(t)&&t.length!==e.length}).map(function(t){var i=t.match(/([.\w]+:)(.*)/),s="";i?(s=i[1]+i[2],t=i[1]+f.escapeQuery(i[2])):s=t;var o=this.findDelimiters(v.value,n);return{start:o.start,end:o.end,fullValue:t,displayValue:s,lastWord:e}}.bind(this))}};return d.extend({name:"topic",build:function(){var e=this;this._parent();var n=l.getTemplate("topic-panel")(),i=this.elements.view.addContent(n);this._controlsParsed=new r(function(n){s.parse(i,{onComplete:function(i){e.elements=t.extend(e.elements,i),e.buildTopic(),n()}})})},retrieveData:function(){return{topic:this.elements.topicAny.isChecked()||""===this.autoComplete.getValue()?"*:*":this.autoComplete.getValue()}},changeData:function(){this.data.get("topic")!==this.autoComplete.getValue()&&this.dispatchEvent("onDataChanged")},cancel:function(){this.autoComplete.elements.input.focus(),this.autoComplete.setValue(this.data.get("topic"))},buildTopic:function(){var t=this.elements.view.getElement(".topic-input");this.autoComplete=new u({adaptor:b.autocompleteAdaptor,multiline:!0,floatingSuggestions:!0,typeDelay:50,inputOptions:{value:""}}),this.autoComplete.addEvent("onSetSuggestion",function(t){t.displayValue.test(/:$/)&&this.updateSuggestions()}),t.addContent(this.autoComplete),this.autoComplete.getInputElement().addEvent("input",function(){this.changeData()}.bind(this)),this.elements.view.getElement(".topic-any-overlay").addEvent("click",function(){this.elements.topicDefine.check(),this.autoComplete.elements.input.focus(),this.syncAny()}.bind(this)),this.elements.view.getElement(".tooltip").set("uwa-tooltip",_("No topic defined. Default will be All topics.")),this.buildPopular()},show:function(){this._shouldShow=!0,this._parent(),this._controlsParsed.then(function(){this._shouldShow&&("*:*"===this.data.get("topic")?(this.elements.topicAny.check(),this.elements.topicAny.focus()):(this.elements.topicDefine.check(),this.autoComplete.elements.input.focus(),this.autoComplete.setValue(this.data.get("topic"))),this.syncAny(),this.elements.topicAny.addEvent("onChange",this.syncAny.bind(this)),this.elements.topicDefine.addEvent("onChange",this.syncAny.bind(this)))}.bind(this)).done()},hide:function(){this._shouldShow=!1,this._parent()},buildPopular:function(){var t=this;c.getPopularTerms().done(function(e){var n=Object.keys(e);n.length&&t.elements.view.getElement("h3.popular-terms-title").setStyle("display","block");var i=t.elements.view.getElement(".popular-terms"),s=n.map(function(t){return new a({value:t,className:"light-border-only",closable:!1})});i.addContent(s),i.addEvent("click",t.onPopularTagsClick.bind(t))},function(t){if("Permission tag is needed."!==t)throw t})},onPopularTagsClick:function(t){var n=e.findElement(t,".uwa-tag");if(n){var i=n.getElement(".uwa-tag-title").getText(),s=this.autoComplete.getValue()?this.autoComplete.getValue()+" AND ":"";this.autoComplete.elements.input.focus(),this.autoComplete.setValue(s+'"'+i+'"'),this.elements.topicDefine.check(),this.syncAny(),this.changeData()}},syncAny:function(t){var e=this.elements.topicAny.isChecked();this.elements.view.toggleClassName("any",e),v=this.autoComplete.getInputElement(),e&&this.autoComplete&&this.autoComplete.setValue(""),t&&this.changeData()}})}.apply(e,i))||(t.exports=s)},function(t,e,n){"use strict";var i,s;i=[n(1),n(8),n(182),n(180),n(46)],void 0===(s=function(t,e,n,i,s){return n.extend({name:"period",build:function(){this._parent(),this.dateRange=new i({calendarOptions:{className:"dark"},from:this.data.get("date_from"),to:this.data.get("date_to")});var n=this.dispatchEvent.bind(this,"onDataChanged",null);this.dateRange.addEvent("onDataChanged",n),this.dateRange.inject(this.elements.view),t.createElement("div",{class:"panel-section",html:[{tag:"label",text:_("Range")},this._rangeInput=new e.Select({options:s.getRangeValues(),value:this.data.get("range")})]}).inject(this.elements.view),this._rangeInput.addEvent("onChange",n)},retrieveData:function(){var t=this.dateRange.getRange();return{date_from:t.from,date_to:t.to,range:this._rangeInput.getValue()[0]}},cancel:function(){this.dateRange.restore({from:this.data.get("date_from"),to:this.data.get("date_to"),range:this.data.get("range")})}})}.apply(e,i))||(t.exports=s)},function(t,e,n){"use strict";var i,s;i=[n(182),n(1),n(8),n(46)],void 0===(s=function(t,e,n,i){return t.extend({name:"sampling",build:function(){this._parent(),e.createElement("h2",{text:_("Define a sampling")}).inject(this.elements.view),e.createElement("div",{class:"panel-section",html:[this.samplingInput=new n.Select({options:i.getSamplingValues()})]}).inject(this.elements.view),this.samplingInput.setValue(this.data.get("sampling"))},retrieveData:function(){return{sampling:this.samplingInput.getValue()[0]}},cancel:function(){this.samplingInput.setValue(this.data.get("sampling"))}})}.apply(e,i))||(t.exports=s)},function(t,e,n){"use strict";var i,s;i=[n(1),n(0),n(5),n(11),n(119),n(46),n(43),n(17)],void 0===(s=function(t,e,n,i,s,o,a,r){var l=e.h;return n.extend({name:"nv-analyze-duplicate-ingredient",render:function(){return l("div",{className:this.getClassNames(),style:{display:"flex",alignItems:"center"}},[l("div",{className:this.getClassNames("-text"),style:{fontSize:"14px",marginRight:"20px"}},_("Copy an existing {0} ingredient").format(this.props.source.getTitle())),l(i.Autocomplete,{className:this.getClassNames("-autocomplete"),adaptor:this.getAdaptor(),events:{onSetSuggestion:function(t){this.fillEditor(t)}.bind(this)}})])},fillEditor:function(t){this.setState({loading:!0});var e=o.parseSourcesPreference(t.module.getData().sources).filter(function(e){return e.id===t.source.getId()});s.requestSourcesWithoutStats(e).done(function(t){var e=t.asArray()[0],n=e.cloneWith({id:null});this.setState({loading:!1}),this.props.events.onDisplayStep("ingredient",{source:n,originalSource:e})}.bind(this))},getAdaptor:function(){if(!this._adaptor){var e=this.props.source.getType(),n=[];r.getAll().forEach(function(t){t.getSources().forEach(function(i){i.getType()===e&&n.push({module:t,source:i,value:t.getTitle().toLowerCase()+" "+i.getTitle().toLowerCase()})})}),this._adaptor=a.extend({getSuggestions:function(t,e){var i=t.slice(0,e).toLowerCase();return n.filter(function(t){return t.value.includes(i)}).map(function(t){return{fullValue:t.module.getTitle()+" / "+t.source.getDisplayableQuery(),source:t.source,module:t.module,title:t.module.getTitle(),topic:t.source.getDisplayableQuery()}})},renderSuggestions:function(e){var n=e.map(function(e){return{tag:"div",class:"suggestion",html:[t.createElement("div",{text:e.title.unescapeHTML()}),t.createElement("div",{text:e.source.getDisplayableSuggestion()})]}});return t.createElement("div",{class:"category uwa-icon magnifying-glass",html:n})}})}return this._adaptor}})}.apply(e,i))||(t.exports=s)},function(t,e,n){"use strict";n.r(e),n.d(e,"default",function(){return D});var i=n(0),s=n.n(i),o=n(5),a=n.n(o),r=n(11),l=n.n(r),c=n(14),u=n.n(c),h=n(66),d=n.n(h),p=n(229),m=n.n(p),f=n(55),g=n.n(f),v=n(34),b=n.n(v),y=n(98),w=n(185),x=n.n(w),C=n(12);function S(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}var E=u.a.namespace("Analyze_Wizard_EditIngredient").addRules({titleAndColorInput:{display:"flex"},colorInput:{marginLeft:10}});function k(t){var e=t.getColor();e&&e.startsWith("#")&&(e=e.slice(1));var n={title:t.getTitle(),color:e,view:t.getView().name,connectNonNulls:t.connectNonNulls(),visibleSmoothedLine:t.isSmoothedLineVisible(),visibleTrendLine:t.isTrendLineVisible(),visibleForecastLine:t.isForecastLineVisible(),aggMethod:t.getAggregationMethod(),alignTo:t.getAlignTo()};return function(t,e){var n={};return Object.keys(e).forEach(function(i){t.getAvailableOptions().includes(i)&&(n[i]=e[i])}),n}(t,n)}function T(t){return s.a.h(b.a,{title:_("Parameters"),className:d.a.getClassNames("-query-form")},s.a.h("div",{style:{flex:1,padding:"15px 40px",fontSize:"0.9em",minWidth:0}},s.a.h(m.a,{source:t.source,showSeeMore:!0,onEdit:!t.source.isReadOnly()&&t.onEditQuery})))}function A(t){return s.a.h("div",{class:d.a.getClassNames("-facets-selection")},t.facets.map(function(e){var n=t.selectedFacetNames.includes(e.getName()),i=t.currentFacetName===e.getName();return s.a.h("div",{class:d.a.getClassNames("-facet")+(n?" selected":"")+(i?" current-facet":""),onClick:function(){t.onShowFacet(e)}},s.a.h("div",{class:d.a.getClassNames("-facet-color"),style:{"background-color":n?e.getColor():""}}),s.a.h(l.a.Checkbox,{value:e.getName(),className:"green",attributes:{checked:n},events:{onClick:function(i){i.stopPropagation(),n?t.onUnselectFacet(e):t.onShowFacet(e)}}}),s.a.h("div",{class:d.a.getClassNames("-facet-name")},e.getDisplayName()))}))}var I=function(t){var e=t.children,n=t.title;return s.a.h(b.a,{title:n,togglable:!0},s.a.h(b.a.Item,{class:"no-padding"},e))},N=function(t){var e=t.onChange,n=t.facet,i=t.disabled;return s.a.h(C.d,{onInit:function(t){t.values=k(n),t.fields.forEach(function(t){t.disabled=i})},onUpdate:function(t){t.values=k(n),t.fields.forEach(function(t){t.disabled=i})},onChange:function(t){return e({value:t.values})},render:function(t){return s.a.h("div",{class:d.a.getClassNames("-facets-forms")},s.a.h(I,{title:_("Display")},s.a.h(C.g,{label:_("Display name"),disabled:i},s.a.h("div",{class:E("titleAndColorInput")},s.a.h(C.j,{model:t.field("title"),attributes:{disabled:i}}),s.a.h(C.b,{model:t.field("color"),defaultView:"panton",valueInput:!1,attributes:{disabled:i},containerClass:E("colorInput")}))),s.a.h(C.h,{model:t.field("view"),label:_("View")},s.a.h(C.i,{options:n.getAvailableViews().map(function(t){return{value:t.name,label:t.title}})}))),s.a.h(I,{title:_("Legend")},s.a.h(C.h,{model:t.field("aggMethod"),label:_("Show results as")},s.a.h(C.i,{options:[{value:"none",label:_("None")}].concat(Object(y.getNames)().map(function(t){return{value:t,label:Object(y.getLabel)(t)}}))}))),s.a.h(I,{title:_("Other")},s.a.h(C.h,{model:t.field("connectNonNulls"),label:_("Connect over empty values")},s.a.h(C.a,null)),s.a.h(C.h,{model:t.field("visibleSmoothedLine"),label:_("Display a smoothed curve")},s.a.h(C.a,null)),s.a.h(C.h,{model:t.field("visibleTrendLine"),label:_("Display a linear regression")},s.a.h(C.a,null)),s.a.h(C.h,{model:t.field("visibleForecastLine"),label:_("Display a forecast")},s.a.h(C.a,null)),s.a.h(C.h,{model:t.field("alignTo"),label:_("Align to")},s.a.h(C.i,{options:[{value:"left",label:_("Left axis")},{value:"right",label:_("Right axis")}]}))))}})},D=function(t){var e,n;function i(e){var n;(n=t.call(this,e)||this).onUnselectFacet=n.onUnselectFacet.bind(S(n)),n.onShowFacet=n.onShowFacet.bind(S(n)),n.onFormChange=n.onFormChange.bind(S(n)),n.onClickNext=n.onClickNext.bind(S(n)),n.onEditQuery=n.onEditQuery.bind(S(n));var i,s=e.source.getFacets(),o=[],a=e.source.getAvailableFacets().map(function(t){var n,a=s.detect(function(e){return e.getName()===t.getName()});return a?(n=a,o.push(n.getName())):n=t,e.currentFacet&&e.currentFacet.getName()===t.getName()&&(i=n.getName()),n});return n.state={facets:a,selectedFacetNames:o,currentFacetName:i||o[0]||a[0].getName()},n}n=t,(e=i).prototype=Object.create(n.prototype),e.prototype.constructor=e,e.__proto__=n;var o=i.prototype;return o.render=function(t,e){return s.a.h(d.a,{title:t.source.getTitle(),extraClass:"edit-ingredient dark-background",scroller:!0,leftNavigation:s.a.h(g.a.Delete,{onClick:function(){t.events.onDeleteSource(t.source),t.events.onDisplayStep("selectedIngredients")}}),rightNavigation:[t.hasPreviousStep&&s.a.h(g.a.Text,{label:_("Previous"),onClick:t.events.onPreviousStep}),s.a.h(g.a.Main,{label:_("Done"),onClick:this.onClickNext,disabled:!0===t.loading})]},s.a.h("div",null,s.a.h(T,{source:t.source,onEditQuery:this.onEditQuery}),s.a.h(b.a,{title:_("Metrics"),className:d.a.getClassNames("-metrics-form")},s.a.h(A,{facets:e.facets,selectedFacetNames:e.selectedFacetNames,currentFacetName:e.currentFacetName,onUnselectFacet:this.onUnselectFacet,onShowFacet:this.onShowFacet}),e.currentFacetName&&s.a.h(N,{facet:e.facets.find(function(t){return t.getName()===e.currentFacetName}),disabled:!e.selectedFacetNames.includes(e.currentFacetName),onChange:this.onFormChange}))))},o.onEditQuery=function(){this.props.events.onDisplayStep("ingredient",{source:this.props.source})},o.onClickNext=function(){var t=this,e=this.props;e.events.onPopulateSource({facets:this.state.facets.filter(function(e){return t.state.selectedFacetNames.includes(e.getName())})}).done(function(){e.events.onDisplayStep("selectedIngredients",{showLayout:!1})})},o.onUnselectFacet=function(t){this.setState(function(e){return{selectedFacetNames:e.selectedFacetNames.filter(function(e){return e!==t.getName()})}})},o.onShowFacet=function(t){t.getColor()||this._replaceFacet(t.getName(),{color:x.a.getMiddleRandomColor()}),this.setState(function(e){return{currentFacetName:t.getName(),selectedFacetNames:e.selectedFacetNames.includes(t.getName())?e.selectedFacetNames:e.selectedFacetNames.concat(t.getName())}})},o.onFormChange=function(t){var e=this,n=t.value,i=this.state.facets.detect(function(t){return t.getName()===e.state.currentFacetName}),s={};i.getAvailableOptions().forEach(function(t){if(n.hasOwnProperty(t)){var e=n[t];"color"===t&&(e="#"+e),s[t]=e}}),this._replaceFacet(this.state.currentFacetName,s)},o._replaceFacet=function(t,e){this.setState(function(n){return{facets:n.facets.map(function(n){return n.getName()===t?n.cloneWith(e):n})}})},i}(a.a)},function(t,e,n){"use strict";var i,s;i=[n(16),n(0),n(4),n(6),n(5),n(123),n(65),n(310),n(14),n(80),n(66),n(1084),n(199),n(55),n(34),n(1085),n(1087),n(1088),n(419)],void 0===(s=function(t,e,n,i,s,o,a,r,l,c,u,h,d,p,m,f,g,v,b){var y=e.h,w=l.namespace("Analyze_Step_SelectedIngredients").addRules({absoluteContainer:{position:"absolute",transition:"width .4s, bottom .4s, transform .4s"},button:{position:"relative",margin:"15px 0",padding:"20px 0 20px 80px",fontSize:"1.5em",cursor:"pointer",before:{position:"absolute",display:"block",top:"15px",left:"0",width:"80px",textAlign:"center",color:"#AAAAAA",fontSize:"60px",transition:"color .2s ease-out"},hover:{before:{color:"#ffffff"}}},title:{fontSize:"18px",marginBottom:"9px"}}),x=s.extend({init:function(t){this._parent(t),this._onFacetOver=this._onFacetOver.bind(this),this.state={dragFacetsInfos:null,overFacet:null,sourceListHeight:0,currentTab:"layout"}},render:function(t,e){var n=t.showLayout,i=t.isTransitioning,s=t.size,o=s.height-221,l=Math.floor(Math.min(s.width/2,480));return y("div",null,y("div",{class:w("absoluteContainer"),style:{display:"flex",flexDirection:"column",top:84,height:Math.min(s.height-84,e.sourceListHeight+84),left:0,transform:n?"":"translate("+Math.floor((s.width-542)/2-130)+"px, 0)",width:n?l:822}},y("div",{style:{flex:1,position:"relative",display:"flex"}},y(a,{style:{flex:1}},y("div",{ref:function(t){this._sourceList=t}.bind(this),style:{transition:"padding 0.4s",overflow:"hidden",paddingLeft:n?0:10,paddingRight:n?20:150}},y(h,{sourceList:t.sourceList,showCompare:!n,dragFacets:e.dragFacetsInfos&&e.dragFacetsInfos.node.getFacets(),overFacet:e.overFacet,onEditSource:!n&&function(e){t.events.onDisplayStep("editIngredient",{source:e})},isFacetDragable:function(e){return!t.layoutRootNode.getFacets().includes(e)},onFacetDragStart:n&&function(t){return this._layout&&this._layout.createDragFacetsScenario(new c.FacetsNode(null,[t]))}.bind(this),onFacetOver:this._onFacetOver}))),y(r,{style:{zIndex:1,position:"absolute",display:"flex",top:0,left:0,right:0,bottom:0}},e.dragFacetsInfos&&!e.dragFacetsInfos.creation&&y(b,{over:!e.dragFacetsInfos.inZone,dropMode:"dropable",text:_("Add back to the list.")}))),y("div",{style:{marginLeft:n?"0":"130px",transition:"margin .4s"}},y(r,null,!n&&y("div",{class:w("button")+" uwa-icon","data-icon":"3",onClick:function(){t.events.onDisplayStep("index")}},t.sourceList.asArray().length?_("Add another ingredient to compare"):_("Add an ingredient"))))),y("div",{class:w("absoluteContainer"),style:{top:20,width:l,left:0,transform:n?"":"translate(-"+l+"px, 0)"}},(i||n)&&[y("div",{class:w("title")},_("Metrics available")),y("div",null,_("Create up to four charts by dragging as many metrics as you want to the chart zone.")),y("div",null,_("All the metrics – including the metrics you do not drag –  will appear in the legend."))]),y("div",{class:w("absoluteContainer"),style:{display:"flex",flexDirection:"column",top:20,bottom:20,height:s.height-20,width:s.width-(l+20),left:l+20,transform:n?"":"translate("+(s.width-l-20)+"px, 0)"}},(i||n)&&[y(m,{title:_("Customize “{0}”").format(t.generalSettings.title),togglable:!0,closed:"general-settings"!==e.currentTab,onToggle:function(t){this.setState({currentTab:!!t&&"general-settings"})}.bind(this),style:{height:o+"px",overflow:"hidden"}},y(m.Item,{style:{height:"100%"},class:"no-padding"},y(g.default,{generalSettings:Object.assign({},t.generalSettings,t.editedSettings),onSettingsChange:t.onSettingsChange}))),y(m,{title:_("Create your chart(s)"),togglable:!0,closed:"layout"!==e.currentTab,onToggle:function(t){this.setState({currentTab:!!t&&"layout"})}.bind(this),style:{height:o+"px"}},y(m.Item,{class:"no-padding"},y(f,{ref:function(t){this._layout=t}.bind(this),height:o+"px",rootNode:t.layoutRootNode,overFacet:e.overFacet,onRootChange:t.events.onLayoutRootNodeChanges,onFacetOver:this._onFacetOver,onFacetDrag:function(t){this.setState({dragFacetsInfos:t,overFacet:null})}.bind(this)}))),y(m,{title:_("Reorder the legend"),togglable:!0,closed:"reorder-legend"!==e.currentTab,onToggle:function(t){this.setState({currentTab:!!t&&"reorder-legend"})}.bind(this)},y(m.Item,{class:"reorder-legend"},y(v,{sourceList:t.sourceList,onReorderFacets:t.onReorderFacets,maxHeight:o})))]))},componentDidMount:function(){this._updateSourceListHeight()},componentDidUpdate:function(){this._updateSourceListHeight()},_updateSourceListHeight:function(){var t=this._sourceList.offsetHeight;t!==this.state.sourceListHeight&&this.setState({sourceListHeight:t})},_onFacetOver:function(t){clearTimeout(this._facetOverTimeout),this.props.showLayout&&(t?this._facetOverTimeout=setTimeout(function(){this.setState({overFacet:t})}.bind(this),500):this.setState({overFacet:null}))}});return s.extend({init:function(t){this._parent(t),this.state={isTransitioning:!1,editedSettings:null},this._onReorderFacets=this._onReorderFacets.bind(this)},componentWillUpdate:function(t,e){e.isTransitioning&&(clearTimeout(this.transition),this.transition=setTimeout(function(){this.setState({isTransitioning:!1})}.bind(this),400))},render:function(t,e){var n=Boolean(t.sourceList.asArray().length),i=t.layoutRootNode instanceof c.EmptyNode;return y(u,{extraClass:"selected-ingredients",scroller:!1,middleNavigation:t.showLayout&&y(p.Secondary,{label:_("Preview"),disabled:!0===t.loading||!n||i,onClick:function(){t.events.onDisplayPreview()}}),rightNavigation:[t.showLayout&&y(p.Text,{label:_("Previous"),onClick:function(){t.events.onShowLayout(!1),this.setState({isTransitioning:!0})}.bind(this)}),y(p.Main,{label:t.showLayout?_("Done"):_("Next"),disabled:!0===t.loading||!n||t.showLayout&&i,onClick:function(){t.showLayout?this._commitHeaderIfNecessary().fin(function(){t.events.onGeneralSettingsChanges(Object.assign({},t.generalSettings,e.editedSettings||{})),t.events.onCloseRequest()}).done():(t.events.onShowLayout(!0),this.setState({isTransitioning:!0}))}.bind(this)})]},y(o,{style:{flex:1,maxHeight:"100%",position:"relative",overflow:"hidden"}},function(n){return y(x,Object.assign({size:n,onReorderFacets:this._onReorderFacets,onSettingsChange:function(t){this.setState({editedSettings:t})}.bind(this)},t,e))}.bind(this)))},_onReorderFacets:function(t){var e=new d(this.props.sourceList.asArray().map(function(e){return e.cloneWith({facets:e.getFacets().map(function(e){return e.cloneWith({index:t.indexOf(e)})})})}));this.props.events.onSourceListChange(e)},_commitHeaderIfNecessary:function(){return this.state.editedSettings&&this.state.editedSettings.imageUrl&&this.state.editedSettings.imageUrl.startsWith("/module/preview/")?i.uploadWidgetHeader({commit:!0,url:this.state.editedSettings.imageUrl}).then(function(t){this.setState(function(e){return{editedSettings:Object.assign({},e.editedSettings,{imageUrl:t+"?"+n.uniqueID()})}})}.bind(this)):t.resolve()}})}.apply(e,i))||(t.exports=s)},function(t,e,n){"use strict";var i,s;i=[n(53),n(223),n(0),n(5),n(162),n(229)],void 0===(s=function(t,e,n,i,s,o){var a=n.h,r=i.extend({render:function(t){var e=t.onDragStart||t.overFacet===t.facet;return a(s,{style:{display:"flex",alignItems:"center",flex:1,transition:"color .4s, background-color .4s, opacity 0.4s",color:e?"#333":"#fff",marginTop:"2px",marginLeft:"70px",backgroundColor:t.dragged?"#b4b4b4":e?"#fff":"#717171",padding:"13px",borderLeft:"10px solid "+t.facet.getColor(),cursor:t.onDragStart?"move":"default",opacity:t.overFacet&&t.overFacet!==t.facet?.4:1},start:function(){return t.onDragStart&&t.onDragStart(t.facet)},onMouseEnter:t.onOver&&t.onOver.bind(this,t.facet),onMouseLeave:t.onOver&&t.onOver.bind(this,null)},a("div",{style:{flex:1,whiteSpace:"nowrap",textOverflow:"ellipsis",overflow:"hidden"}},t.facet.getTitle()||t.facet.getName()),a("div",{style:{transition:"width .4s",width:t.sourceEditable?55:31,textAlign:"center"},"data-icon":t.facet.getView().icon,class:"uwa-icon"}))},componentDidUpdate:function(){(this.props.dragged||this.props.overFacet===this.props.facet)&&t.scrollToElement(this.base,{margin:20,smooth:!0})}});return function(t){var n=t.sourceList.asArray(),i=t.showCompare&&n.length>1;return a("div",{style:{flex:1,position:"relative",transition:"padding-left .4s",paddingLeft:t.showCompare?"120px":0}},a("div",{style:{position:"absolute",top:"calc(50% - 20px)",left:"17px",transform:"scale(2)",color:"#aaa",opacity:i?1:0,transition:"opacity 0.2s"},class:"uwa-icon","data-icon":"V","uwa-tooltip":i&&_("This app compare all these series.")}),n.map(function(s,l){var c=0===l,u=l===n.length-1,h=l===n.length-2;return a("div",{key:s.cid,style:{position:"relative",marginTop:0===l?0:22}},a("div",{style:{position:"absolute",left:-52,top:u?"0":40,bottom:u?"auto":h?-22:-62,width:52,height:u?40:"auto",boxSizing:"border-box",border:"3px solid #ffffff",borderRightWidth:0,borderBottomWidth:u?"3px":0,borderTopWidth:u?0:"3px",borderRadius:c?"10px 0 0 0":u?"0 0 0 10px":"0",opacity:i?1:0,transition:"opacity 0.2s"}}),a("div",{style:{display:"flex",backgroundColor:"#717171",transition:"opacity 0.4s",opacity:t.overFacet&&s!==t.overFacet.getSource()?.4:1}},a(e,{name:s.getTitle(),image:s.getIcon(),selected:!0}),a("div",{style:{marginTop:5,marginLeft:18,flex:1,minWidth:0}},a(o,{source:s,onEdit:t.onEditSource&&t.onEditSource.bind(null,s)}))),s.getFacets().map(function(e){return a(r,{key:e.cid,facet:e,dragged:t.dragFacets&&t.dragFacets.includes(e),overFacet:t.overFacet,sourceEditable:Boolean(t.onEditSource),onDragStart:t.isFacetDragable&&t.isFacetDragable(e)&&t.onFacetDragStart,onOver:t.onFacetOver})}))}))}}.apply(e,i))||(t.exports=s)},function(t,e,n){"use strict";var i,s;i=[n(9),n(3),n(19),n(2),n(0),n(52),n(14),n(5),n(310),n(223),n(418),n(80),n(227),n(419),n(1086)],void 0===(s=function(t,e,n,i,s,o,a,r,l,c,u,h,d,p,m){var f=s.h,g=h.EmptyNode,v=h.FacetsNode,b=a.namespace("Analyze_Step_SelectedIngredients_Layout").addRules({root:{flex:1,display:"flex",position:"relative"},gridContainer:{overflow:"hidden",flex:1,display:"flex"},thumbnail:{cursor:"move"},easter:{animation:"easter-egg-keyframe",animationDuration:"1s",animationIterationCount:"infinite",animationTimingFunction:"ease-in-out",animationDirection:"alternate",transformOrigin:"center 45px"},settingsOverlay:{backgroundColor:"#3a3a3a",position:"absolute",top:0,left:0,right:0,bottom:0,zIndex:102}});var y=t.extend({init:function(t,e,n,i){this._view=t,this._node=e,this._isFacetCreation=n,this._inZone=void 0,this._easter=i},_computePosition:function(t){var i=e.getPosition(t),s=n.getScrolls();i.x-=s.x,i.y-=s.y;var o,a,r,l,c,u,h,d,p=this._view.base.getBoundingClientRect(),m=this._rootNode;return h=this._baseRect,d=i,h.left<=d.x&&d.x<=h.left+h.width&&h.top<=d.y&&d.y<=h.top+h.height&&(r=this._dropZones,l=i,r.forEach(function(t){var e,n,i=(e=t.point,n=l,(e.x-n.x)*(e.x-n.x)+(e.y-n.y)*(e.y-n.y));(!c||i<u)&&(u=i,c=t)}),(a=c)&&(m=a.rootNode,o=function(){var t=a.toReplace?a.rootNode.replace(a.toReplace,a.toReplace instanceof v?a.toReplace.cloneWith({facets:a.toReplace.getFacets().concat(this._node.getFacets())}):this._node):a.rootNode;this._view.props.onRootChange(t)}.bind(this))),Boolean(a)!==this._inZone&&(this._inZone=Boolean(a),this._view.props.onFacetDrag({node:this._node,creation:this._isFacetCreation,inZone:this._inZone})),o||(o=function(){this._view.props.onRootChange(this._rootNode)}.bind(this)),{node:this._node,easter:this._easter,x:i.x-p.left,y:i.y-p.top,onDrop:o,toReplace:a&&a.toReplace,rootNode:m}},snap:function(t){var e=this._view.props.rootNode;this._isFacetCreation?this._rootNode=e:this._rootNode=this._node.getFacets().reduce(function(t,e){return t.removeFacet(e)},e),this._baseRect=this._view.grid.getBaseRect(!0),this._dropZones=d.getDropZones(this._rootNode,this._node,this._baseRect),this._view.setState({dragFacets:this._computePosition(t),editedNode:!1})},move:function(t){this._view.setState({dragFacets:this._computePosition(t),editedNode:!1})},stop:function(){var t=this._view.state.dragFacets;this._view.setState({dragFacets:!1}),this._view.props.onFacetDrag(),t.onDrop&&t.onDrop()},cancel:function(){this._view.setState({dragFacets:!1})}});return r.extend({init:function(t){this._parent(t),this._renderCell=this._renderCell.bind(this),this._onOpenSettings=this._onOpenSettings.bind(this),this._onCloseSettings=this._onCloseSettings.bind(this),this._onSaveSettings=this._onSaveSettings.bind(this),this.state={editedNode:!1},this._settingsShortcuts={esc:this._onCloseSettings}},render:function(t,e){return e.editedNode?o.pushFocus(this._settingsShortcuts):o.popFocus(this._settingsShortcuts),f("div",{class:b("root")},f("div",{class:b("gridContainer"),style:{height:t.height}},f(u,{ref:function(t){this.grid=t}.bind(this),rootNode:t.rootNode,temporaryRootNode:e.dragFacets&&e.dragFacets.rootNode,resizable:!e.dragFacets,onRootChange:t.onRootChange,renderCell:this._renderCell,renderCellProps:{dragFacets:e.dragFacets&&{node:e.dragFacets.node,toReplace:e.dragFacets.toReplace},rootNode:t.rootNode,onSettingsClick:this._onOpenSettings,onFacetOver:t.onFacetOver,overFacet:t.overFacet}})),f(l,{class:b("settingsOverlay")},e.editedNode&&f(m.default,{node:this.state.editedNode,onClose:this._onCloseSettings,onSave:this._onSaveSettings})),e.dragFacets&&this._renderDragThumbnail())},_renderDragThumbnail:function(){var t=this.state.dragFacets,e=t.node.getFacets();return f("div",{style:{display:"flex",position:"absolute",top:t.y-45,left:t.x-40,zIndex:101}},f("div",{style:{position:"relative",zIndex:1}},t.easter?f("img",{className:b("easter"),src:i.getAssetURL("css/base/analyze/easter.png"),width:"80",height:"90"}):f(c,{style:b("thumbnail"),iconBackground:e[0].getColor(),iconColor:"#fff",iconCharacter:e[0].getView().icon,name:e[0].getTitle()})),e.slice(1,3).map(function(t,e){return f("div",{style:{position:"absolute",width:80,height:90,backgroundColor:"#3A3A3A",opacity:0===e?.5:.25,top:5*(e+1),left:5*(e+1)}})}))},_renderCell:function(t){var e=t.dragFacets,n=null;t.rootNode.each(function(e){e.id===t.node.id&&(n=e)});var i=e&&!n,s={width:t.rect.width,height:t.rect.height,over:e&&(e.node===t.node||e.toReplace===t.node)};if(n instanceof g||i)return f(p,Object.assign({dropMode:"dropable",text:n instanceof g?_("Drag and drop metrics available here"):_("Dropping this will generate a new chart")},s));var o=e&&e.node.getFacets()[0],a=!!o&&(n.getFacets().includes(o)||0===t.node.getFacets().length?"dragged-from":d.canAddFacet(t.node.getFacets(),o)?"dropable":"not-dropable");return f(p,Object.assign({node:t.node,dropMode:a,text:"dropable"===a?_("Dropping this will compare metrics."):_("Sorry, these metrics can’t be compared. Views aren’t compatible."),onFacetDragStart:!e&&function(t,e){return new y(this,t,!1,e)}.bind(this),onSettingsClick:t.onSettingsClick,onFacetOver:t.onFacetOver,overFacet:t.overFacet},s))},createDragFacetsScenario:function(t){return new y(this,t,!0)},_onOpenSettings:function(t){this.setState({editedNode:t})},_onCloseSettings:function(){this.setState({editedNode:!1})},_onSaveSettings:function(t){this.props.onRootChange(this.props.rootNode.replace(this.state.editedNode,t)),this.setState({editedNode:!1})}})}.apply(e,i))||(t.exports=s)},function(t,e,n){"use strict";n.r(e),n.d(e,"default",function(){return m});var i=n(0),s=n.n(i),o=n(14),a=n.n(o),r=n(65),l=n.n(r),c=n(55),u=n.n(c),h=n(12),d=n(98),p=a.a.namespace("Analyze_Step_SelectedIngredients_GraphSettings").addRules({root:{height:"100%",display:"flex",lineHeight:"1.3",flexDirection:"column",paddingTop:"36px",boxSizing:"border-box"},closeButton:{position:"absolute",width:26,height:26,top:5,right:5,zIndex:2},field:{display:"flex",padding:"15px 43px"},label:{minWidth:"111px",fontSize:"15px",padding:"7px 10px 0 0",flex:.5},inputContainer:{flex:1},description:{margin:"10px 0"},scrollerInner:{paddingTop:"10px"}});function m(t){var e=t.node,n=t.onSave,i=t.onClose,o=e.getFacets()[0],a="pie"===o.getView().name,r=o.isTimeData(),c=o.getView().facetsAggregateAs,m=c&&e.getFacets().every(function(t){return t.getView().facetsAggregateAs===c});return s.a.h(h.d,{onInit:function(t){t.values={caption:e.getCaption(),url:e.getURL(),logarithmic:e.isLogarithmic(),filterNullValues:e.shouldFilterNullValues(),facetsAggMethod:e.getFacetsAggregationMethod()}},render:function(t){return s.a.h("div",{class:p("root")},s.a.h("div",{class:p("closeButton")+" nv-close-icon uwa-icon uwa-icon-only delete",onClick:i}),s.a.h(l.a,{style:{flex:1}},s.a.h("div",{class:p("scrollerInner")},s.a.h(h.h,{model:t.field("caption"),label:_("Caption"),description:_("Text only (no HTML tags allowed).")},s.a.h(h.j,{multiline:!0})),s.a.h(h.h,{model:t.field("url"),label:_("Url")},s.a.h(h.j,null)),r&&!a&&s.a.h(h.h,{model:t.field("logarithmic"),label:_("Logarithmic")},s.a.h(h.a,null)),r&&s.a.h(h.h,{model:t.field("filterNullValues"),label:_("Compact empty values")},s.a.h(h.a,null)),m&&s.a.h(h.h,{model:t.field("facetsAggMethod"),label:_("Display metrics as")},s.a.h(h.i,{options:[{value:"",label:_("Distinct values")}].concat(Object(d.getNames)().filter(function(t){return"percent"!==t}).map(function(t){return{value:t,label:Object(d.getLabel)(t)}}))})))),s.a.h(u.a.Main,{label:_("Save"),style:{margin:"10px 43px",alignSelf:"flex-end"},onClick:function(){return n(e.cloneWith({settings:t.values}))}}))}})}},function(t,e,n){"use strict";n.r(e);var i=n(0),s=n.n(i),o=n(65),a=n.n(o),r=n(12);e.default=function(t){var e=t.generalSettings,n=t.onSettingsChange;return s.a.h(r.d,{onInit:function(t){var n=Object.assign({},e);void 0===n.descriptionTextColor&&(n.descriptionTextColor="000000"),void 0===n.descriptionBckgColor&&(n.descriptionBckgColor="ffffff"),t.values=n},onConstraint:function(t){var e=!t.values.imageUrl;t.field("imageBckgColor").disabled=e,t.field("imagePosition").disabled=e;var n=!t.values.description;t.field("descriptionBckgColor").disabled=n,t.field("descriptionTextColor").disabled=n,t.field("descriptionPosition").disabled=n},onChange:function(t){return n(t.values)},render:function(t){return s.a.h(a.a,{style:{height:"100%"}},s.a.h(r.h,{label:_("Title"),model:t.field("title")},s.a.h(r.j,null)),s.a.h(r.h,{label:_("Image"),description:_("Supported: png, jpg or gif. Max weight: 5MB"),model:t.field("imageUrl")},s.a.h(r.k,null)),s.a.h(r.h,{label:_("Background color"),model:t.field("imageBckgColor")},s.a.h(r.b,{defaultView:"panton"})),s.a.h(r.h,{label:_("Alignement"),model:t.field("imagePosition")},s.a.h(r.i,{options:[{label:_("Left"),value:"left"},{label:_("Center"),value:"center"},{label:_("Right"),value:"right"}]})),s.a.h(r.h,{label:_("Description"),model:t.field("description"),description:_("Text only (no HTML tags allowed).")+" "+_("URLs will be converted into clickable links.")},s.a.h(r.j,{multiline:!0})),s.a.h(r.h,{label:_("Description alignement"),model:t.field("descriptionPosition")},s.a.h(r.i,{options:[{label:_("Left"),value:"left"},{label:_("Center"),value:"center"},{label:_("Right"),value:"right"}]})),s.a.h(r.h,{label:_("Description background color"),model:t.field("descriptionBckgColor")},s.a.h(r.b,{defaultView:"panton"})),s.a.h(r.h,{label:_("Text color"),model:t.field("descriptionTextColor")},s.a.h(r.b,{defaultView:"panton"})))}})}},function(t,e,n){"use strict";var i,s;i=[n(3),n(0),n(14),n(5),n(65),n(140),n(1089),n(162)],void 0===(s=function(t,e,n,i,s,o,a,r){var l=e.h,c=n.namespace("SelectedIngredients_ReorderLegend").addRules({root:{display:"flex",flexDirection:"column"},facet:{display:"flex",alignItems:"center",flex:1,padding:"13px",color:"#444444",backgroundColor:"#fff",marginBottom:"2px"},facetTitle:{flex:1,fontSize:"13px",lineHeight:"18px",whiteSpace:"nowrap",textOverflow:"ellipsis",overflow:"hidden",marginLeft:"10px",marginRight:"auto"}});function u(e,n){var i,s=e.props.sourceList.getSourceFacets(),r=e._scroller.scroller.getInnerElement().scrollHeight;function l(t){var n,o=1/0;return(i||(i=[].map.call(e.base.querySelectorAll("[data-drag-facet-id]"),function(t){var e=a.findFacet(s,t.getAttribute("data-drag-facet-id")),n=t.getBoundingClientRect();return{x:n.left+n.width/2,y:n.top+n.height/2,height:n.height,facet:e}},e).filter(Boolean)),i).forEach(function(e){var i,s,a=(s=t,((i=e).y-s.y)*(i.y-s.y));a<o&&(n=e,o=a)}),n}var c=new o(e._scroller.scroller.getInnerElement(),{area:30,events:{onChange:function(t,e){i=null,this.element.scrollTo(t,e)}}});return{snap:function(){c.attach()},move:function(i){var o,c=t.getPosition(i,{relativeTo:"client"}),u=l(c),h=u.facet,d=c.y<u.y;o=h===n?e.state.dragFacets:a.moveFacet(s,n,u.facet,d);var p=e._scroller.scroller.getInnerElement();e.setState({dragFacets:o,draggingFacetPosition:Math.max(0,Math.min(r-u.height-2,c.y-p.getBoundingClientRect().top+p.scrollTop-u.height/2)),draggingFacet:n})},stop:function(){var t=e.state.dragFacets?a.replaceFacet(e.state.dragFacets,n):s;e.props.onReorderFacets(t)},reset:function(){c.detach(),e.setState({dragFacets:null,draggingFacet:null})}}}var h=i.extend({render:function(t){return t.dragging?l("div",{style:{backgroundColor:"#666666",height:"46px"}}):l("div",{style:{borderLeft:"10px solid "+t.facet.getColor()},class:c("facet"),onMouseLeave:this._onMouseLeave,onMouseEnter:this._onMouseEnter,"data-drag-facet-id":t.facet.cid},l("div",{class:c("facetTitle")},t.facet.getTitle()||t.facet.getName()),l("div",{style:{color:"#666",margin:"0 20px 0 10px"},"data-icon":t.facet.getView().icon,class:"uwa-icon"}),l(t.startDrag?r:"div",{style:{color:"#999",cursor:"pointer"},"data-icon":"$",class:"uwa-icon",start:t.startDrag}))}});return i.extend({init:function(t){this._parent(t),this._startDrag=function(t){return u(this,t)}.bind(this)},componentDidMount:function(){this.setHeight()},componentDidUpdate:function(){this.setHeight()},setHeight:function(){if(!this.state.draggingFacet){var t=this._scroller.scroller.getInnerElement(),e=t.lastElementChild.getBoundingClientRect().bottom+2,n=t.getBoundingClientRect().top,i=Math.min(this.props.maxHeight-20,e-n);this.base.style.height=i+"px"}},render:function(t,e){var n=e.dragFacets||t.sourceList.getSourceFacets();return l("div",{class:c("root")},l(s,{ref:function(t){this._scroller=t}.bind(this),style:{flex:1}},n.map(function(t){var i=n.length>1;return l(h,{key:t.cid,facet:t,dragging:e.draggingFacet&&e.draggingFacet===t,startDrag:i&&this._startDrag.bind(this,t)})},this),e.draggingFacet&&l("div",{style:{position:"absolute",left:"0px",right:"0px",top:e.draggingFacetPosition+"px"}},l(h,{facet:e.draggingFacet}))))}})}.apply(e,i))||(t.exports=s)},function(t,e,n){"use strict";var i;void 0===(i=function(){function t(t,e){for(var n=0;n<t.length;n+=1)if(t[n].cid===e)return n;throw new Error("Facet not found: "+e)}return{findFacet:function(e,n){return e[t(e,n)]},replaceFacet:function(e,n){var i=e.slice();return i[t(e,n.cid)]=n,i},moveFacet:function(e,n,i,s){return e=function(e,n){var i=e.slice();return i.splice(t(e,n.cid),1),i}(e,n),e=s?function(e,n,i){var s=e.slice();return s.splice.apply(s,[i?t(e,i.cid):0,0].concat(n)),s}(e,n,i):function(e,n,i){var s=e.slice();return s.splice.apply(s,[i?t(e,i.cid)+1:e.length,0].concat(n)),s}(e,n,i)}}}.apply(e,[]))||(t.exports=i)},function(t,e,n){"use strict";var i,s;i=[n(0),n(5),n(66),n(311),n(55)],void 0===(s=function(t,e,n,i,s){var o=t.h,a=e.extend({render:function(t){return o(n,{title:_("App preview"),extraClass:"dark-background preview",rightNavigation:o(s.Secondary,{label:_("Close"),onClick:function(){t.events.onClosePreview()}})},o(i,{style:{flex:1,display:"flex"},settings:this.props.generalSettings,moduleId:this.props.moduleId,preview:!0,fixedHeight:!0}))}});return a.checkProps=function(t){if(!t.generalSettings.sources)throw new Error("Preview generalSettings.sources prop is required")},a}.apply(e,i))||(t.exports=s)},function(t,e,n){"use strict";var i,s;i=[n(0),n(5),n(11)],void 0===(s=function(t,e,n){var i=t.h,s=e.extend({name:"nv-analyze-loader",init:function(t){this._parent(t),this.state={slowliness:t.slowliness||s.NORMAL}},render:function(t,e){var o,a,r;switch(e.slowliness){case s.NORMAL:o=_("Loading..."),a="loading-center",r="#CACACA";break;case s.SLOW:o=[_("This is taking a little bit longer than usual."),i("br"),_("Thanks for your patience.")],r="#CACACA";break;case s.VERY_SLOW:o=[_("Due to high traffic, our servers are slow at the moment."),i("br"),_("We’re still working on it. Thanks for your patience.")],r="#e75c5c"}return i("div",{class:this.getClassNames()},i("div",{class:this.getClassNames("-spinner")},i(n.Spinner,{size:30,color:r})),i("div",{class:"uwa-message simple "+(a||"")},o))},componentWillReceiveProps:function(t){t.slowliness&&this._increaseSlowliness(t.slowliness)},componentWillMount:function(){this._timeout=setTimeout(function(){this._increaseSlowliness(s.SLOW),this._timeout=setTimeout(function(){this._increaseSlowliness(s.VERY_SLOW)}.bind(this),22e3)}.bind(this),8e3)},componentWillUnmount:function(){clearTimeout(this._timeout)},_increaseSlowliness:function(t){this.setState(function(e){return{slowliness:Math.max(t,e.slowliness)}})}});return s.NORMAL=0,s.SLOW=1,s.VERY_SLOW=2,s}.apply(e,i))||(t.exports=s)},function(t,e,n){"use strict";var i,s;i=[n(0),n(5),n(2),n(1093),n(1097),n(1098)],void 0===(s=function(t,e,n,i,s,o){var a=t.h;function r(t){return a("div",{class:"legend-tab-title "+t.name+(t.selected?" selected-tab":""),onClick:function(){t.onClick(t.name)}},a("span",null,t.title))}return e.extend({init:function(t){this._parent(t),this._onClickTab=this._onClickTab.bind(this)},render:function(t){var e,l=t.sourceList.isSomeTimeFacets(),c=!t.preview&&!n.isIn3DDashboard();return"details"===t.selectedTab?e=a(i,{sourceList:t.sourceList,preview:t.preview,readOnly:t.readOnly,layout:t.layout,displayAutosave:t.displayAutosave,useLinkOnAutoSave:!n.isIn3DDashboard(),displayUpgrade:!n.isIn3DDashboard(),highlightedFacets:t.highlightedFacets,onCreateModuleHistory:t.onCreateModuleHistory,onOpenPivot:t.onOpenPivot,onEditSource:t.onEditSource,onCreatePotion:t.onCreatePotion,onHighliteFacet:t.onHighliteFacet,onFacetChange:t.onFacetChange,selectedTab:t.selectedTab}):"stats"===t.selectedTab&&l?e=a(s,{sourceList:t.sourceList,preview:t.preview,readOnly:t.readOnly,layout:t.layout,onHighliteFacet:t.onHighliteFacet,onFacetChange:t.onFacetChange,onCreateModuleHistory:this.props.onCreateModuleHistory,onOpenPivot:this.props.onOpenPivot,onEditSource:this.props.onEditSource,onCreatePotion:this.props.onCreatePotion}):"notes"===t.selectedTab&&c&&(e=a(o,{sourceList:t.sourceList,preview:t.preview,readOnly:t.readOnly,isNotesVisible:!n.isIn3DDashboard(),highlightedNote:t.highlightedNote,onHighliteFacet:t.onHighliteFacet,onOpenNote:t.onOpenNote,onHighliteNote:t.onHighliteNote,onFacetChange:t.onFacetChange,onCreateModuleHistory:this.props.onCreateModuleHistory,onOpenPivot:this.props.onOpenPivot,onEditSource:this.props.onEditSource,onCreatePotion:this.props.onCreatePotion})),a("div",{class:"nv-analyze-legend"},!n.isInScreenshot()&&a("div",{class:"legend-tabs"},a(r,{name:"details",selected:"details"===t.selectedTab,title:_("Details"),onClick:this._onClickTab}),l&&a(r,{name:"stats",selected:"stats"===t.selectedTab,title:_("Stats"),onClick:this._onClickTab}),c&&a(r,{name:"notes",selected:"notes"===t.selectedTab,title:_("Notes"),onClick:this._onClickTab})),e&&a("div",{class:"legend-tab-content"},e))},_onClickTab:function(t){this.props.selectedTab===t?this.props.onChangeTab(""):this.props.onChangeTab(t)}})}.apply(e,i))||(t.exports=s)},function(t,e,n){"use strict";var i,s;i=[n(1),n(0),n(5),n(2),n(4),n(289),n(290),n(291)],void 0===(s=function(t,e,n,i,s,o,a,r){var l=e.h;function c(t){if(!isFinite(t))return _("N/A");var e=s.formatHumanNumber(t);return t>0&&(e="+"+e),e+"%"}return n.extend({init:function(t){this._parent(t)},render:function(){var t=[];return this.props.sourceList.getSourceFacets().forEach(function(e){var n,i=[];if(e.isSmoothedLineVisible()&&e.getSmoothed()&&i.push(l("div",{class:"details legend-facet-details-smoothed"},[l("div",{class:"details-icon",style:{borderColor:e.getColor()}}),l("div",{class:"details-title"},_("Smooth curve")),l("div",{class:"details-value"},c(e.getSmoothed().value))])),e.isTrendLineVisible()&&e.getTrend()&&i.push(l("div",{class:"details legend-facet-details-trend"},[l("span",{class:"details-icon",style:{borderColor:e.getColor()}}),l("div",{class:"details-title"},_("Linear regression")),l("div",{class:"details-value"},c(e.getTrend().value))])),"spline"===e.getView().name&&e.isForecastLineVisible()&&e.getForecast()&&e.getStats().length>2){var o=e.getStats().length-1,u=e.getStats()[o].getFormatedDate();i.push(l("div",{class:"details legend-facet-details-forecast"},[l("span",{class:"details-icon uwa-icon","data-icon":"G",style:{color:e.getColor()}}),l("div",{class:"details-title"},_("Forecast")+" "+u),l("div",{class:"details-value"},s.formatHumanNumber(e.getForecast().forecast,{decimalDigits:2})+" ±"+s.formatHumanNumber(e.getForecast().errors,{decimalDigits:2}))]))}i.length&&(n=l(r,{facet:e,detail:i},null)),t.push(l(a,{facet:e,layout:this.props.layout,withAggInfos:!0,detail:n,highlightedFacets:this.props.highlightedFacets,preview:this.props.preview,readOnly:this.props.readOnly,onCreateModuleHistory:this.props.onCreateModuleHistory,onOpenPivot:this.props.onOpenPivot,onEditSource:this.props.onEditSource,onCreatePotion:this.props.onCreatePotion,onHighliteFacet:this.props.onHighliteFacet,onFacetChange:this.props.onFacetChange,selectedTab:this.props.selectedTab},null))}.bind(this)),this.props.displayAutosave&&t.push(this.getAutosaveLegend()),l(o,{tab:"details"},t)},getAutosaveLegend:function(){var t=this.props.useLinkOnAutoSave?l("div",{class:"legend-autoSaveText"},[_("Out of")+" ",l("a",{href:i.getWelcomeURL("autosave")},_("AutoSave"))," "+_("coverage:")]):_("AutoSave"),e=this.props.displayUpgrade?l("div",{class:"legend-upgradeText"},[_("Articles may be unavailable for reading or analysis.")+" ",l("a",{href:i.getWelcomeBusinessURL("contact-us")},_("Upgrade."))]):"";return l("div",{class:"legend-facet legend-autosave-text"},l("div",{class:"legend-facet-container"},[l("div",{class:"legend-facet-img-container"}),l("div",{},[t,e])]))}})}.apply(e,i))||(t.exports=s)},function(t,e,n){"use strict";var i,s;i=[n(3),n(0),n(14),n(5),n(11)],void 0===(s=function(t,e,n,i,s){var o=e.h,a=n.namespace("InlineEdit").addRules({root:{position:"relative",marginRight:"auto"}});return i.extend({init:function(t){this._parent(t),this.setState({editText:t.initialValue||"",focus:t.focus||!1}),this._save=this._save.bind(this),this._onChange=this._onChange.bind(this),this._onKeyDown=this._onKeyDown.bind(this)},render:function(){return o("div",{class:a("root")},o(s.Text,{attributes:{events:{blur:this._save,keydown:this._onKeyDown,keyup:this._onChange}},events:{onChange:this._onChange},value:this.state.editText,ref:function(t){this._input=t}.bind(this)}))},componentDidUpdate:function(){this._maybeFocus()},componentDidMount:function(){this._maybeFocus()},_maybeFocus:function(){this.state.focus&&setTimeout(function(){this._input&&this._input.getControl().focus(!0)}.bind(this),0)},_save:function(e){var n=t.getElement(e);this.props.onFacetChange(this.props.facet,{title:n.value}),this.props.onEditModeChange(!1)},_onKeyDown:function(e){"esc"===t.whichKey(e)&&this._save(e)},_onChange:function(e){var n=t.whichKey(e),i=t.getElement(e);this.setState({editText:i.value,focus:!0}),(this.props.onFacetChange&&"return"===n||"esc"===n)&&this._save(e)}})}.apply(e,i))||(t.exports=s)},function(t,e,n){"use strict";var i,s;i=[n(2),n(0),n(5),n(1096),n(14),n(1),n(3)],void 0===(s=function(t,e,n,i,s,o,a){var r=s.namespace("FacetActions").addRules({buttonDropdown:{flex:"0 0 30px",width:"30px",flexShrink:"0",textAlign:"right",position:"relative",height:"31px",marginLeft:"8px",display:"flex",color:"#aaa",hover:{cursor:"pointer"},before:{margin:"5px 8px"}},highlitedButton:{backgroundColor:"#cacaca",color:"#696969"},list:{padding:0},listItem:{cursor:"pointer",whiteSpace:"nowrap",borderBottom:"1px dotted #bfbfbf",borderTop:"1px dotted #ececec",lineHeight:"20px",padding:"5px 10px",hover:{backgroundColor:"#cacaca",borderBottom:"1px dotted #aaa",borderTop:"1px dotted #bfbfbf"},"last-child":{borderBottom:"none"}}}),l=e.h;return n.extend({init:function(t){this._parent(t),this.state={openedMenu:!1},this.onToggleDropdown=this.onToggleDropdown.bind(this),this.onEditQuery=this.onEditQuery.bind(this),this.onDisplayHistory=this.onDisplayHistory.bind(this),this.onCreatePotion=this.onCreatePotion.bind(this),this.onPivot=this.onPivot.bind(this)},render:function(e){var n=!t.isInScreenshot()&&!e.readOnly&&e.facet.isQuantitativeData()&&e.facet.getStats().length&&e.facet.getSource().getAvailableFacets().some(function(t){return"pub_date"===t.getName()});return l("div",{class:r("buttonDropdown",this.state.openedMenu?"highlitedButton":"")+" uwa-icon","data-icon":"D",ref:function(t){this._iconAction=o.extendElement(t)}.bind(this),onClick:this.onToggleDropdown},this._iconAction&&l(i,{target:this._iconAction,className:"legend-facet-actions-dropdown",global:!0,margin:0,isOpen:this.state.openedMenu,autoPosition:["below-end","above-end"],events:{onClickOutside:function(t){a.stop(t),this.onToggleDropdown()}.bind(this),onClick:this.onToggleDropdown}},l("ul",{class:r("list")},l("li",{class:r("listItem"),onClick:this.onEditQuery},_("Edit parameters")),n&&l("li",{class:r("listItem"),onClick:this.onDisplayHistory},_("Display history")),t.isAllowed("potion")&&l("li",{class:r("listItem"),onClick:this.onCreatePotion},_("Create a potion")),e.facet.getSource().getAvailableFacets().length>1&&l("li",{class:r("listItem"),onClick:this.onPivot},_("Pivot on another metric")))))},onToggleDropdown:function(){this.setState({openedMenu:!this.state.openedMenu})},onEditQuery:function(){this.props.onEditSource({source:this.props.facet.getSource()})},onDisplayHistory:function(){this.props.onCreateModuleHistory(this.props.facet)},onCreatePotion:function(){this.props.onCreatePotion(this.props.facet)},onPivot:function(){this.props.onOpenPivot({source:this.props.facet.getSource(),facet:this.props.facet})}})}.apply(e,i))||(t.exports=s)},function(t,e,n){"use strict";var i,s;i=[n(0),n(88),n(5)],void 0===(s=function(t,e,n){return n.extend({render:function(e){return t.h("div",{class:e.class,style:e.style})},componentDidMount:function(){this.dropdown=new e.Pointy(this.props),this.setDropdownContent(),this.props.innerClass&&this._applyClass(this.props.innerClass),this.dropdown.inject(this.base)},componentDidUpdate:function(){this.setDropdownContent(),this.props.isOpen?this.dropdown.show():this.dropdown.hide()},componentWillUnmount:function(){this.dropdown.destroy()},_applyClass:function(t){var e=this.dropdown.getInnerElement();t=t?String(t).split(/\s+/).filter(Boolean):[];var n=this._currentClass,i=Array.isArray(n),s=0;for(n=i?n:n[Symbol.iterator]();;){var o;if(i){if(s>=n.length)break;o=n[s++]}else{if((s=n.next()).done)break;o=s.value}var a=o;t.includes(a)||e.classList.remove(a)}var r=t,l=Array.isArray(r),c=0;for(r=l?r:r[Symbol.iterator]();;){var u;if(l){if(c>=r.length)break;u=r[c++]}else{if((c=r.next()).done)break;u=c.value}var h=u;e.classList.add(h)}this._currentClass=t},setDropdownContent:function(){var e=this.dropdown.getInnerElement();t.render(t.h("div",{},this.props.children),e,e.firstChild)}})}.apply(e,i))||(t.exports=s)},function(t,e,n){"use strict";var i,s;i=[n(0),n(5),n(289),n(290),n(291),n(46),n(80),n(4),n(44)],void 0===(s=function(t,e,n,i,s,o,a,r,l){var c=t.h;function u(t,e){var n;return t.each(function(t){t instanceof a.FacetsNode&&t.getFacets().includes(e)&&(n=t.getFacets().filter(function(t){return t!==e}))}),n?n.map(function(t){return i=t,c=(n=e).getTrend().stats.length,u=i.getTrend().stats.length,s={x:n.getTrend().stats[0].getKey(),y:n.getTrend().stats[0].getValue()},a={x:n.getTrend().stats[c-1].getKey(),y:n.getTrend().stats[c-1].getValue()},r={x:i.getTrend().stats[0].getKey(),y:i.getTrend().stats[0].getValue()},l={x:i.getTrend().stats[u-1].getKey(),y:i.getTrend().stats[u-1].getValue()},Object.assign({otherFacet:i},o.getLineIntersection(s,a,r,l));var n,i,s,a,r,l,c,u}).filter(Boolean):[]}return e.extend({init:function(t){this._parent(t)},render:function(t){var e=[];return t.sourceList.getSourceFacets().forEach(function(n){var o;if(n.isTimeData()&&n.hasStats()){var a=[],h=n.getMax();a.push(c("div",{class:"details"},[c("div",{class:"details-title"},_("High Point")+": "),c("div",{class:"details-value"},h.getFormatedDate()+" ("+h.getFormatedValue()+")")]));var d=n.getMin();a.push(c("div",{class:"details"},[c("div",{class:"details-title"},_("Low Point")+": "),c("div",{class:"details-value"},d.getFormatedDate()+" ("+d.getFormatedValue()+")")]));var p=n.getTrend()<0?[c("span",{},_("Downward")),c("span",{"data-icon":"D",class:"guide-downward uwa-icon"},null)]:0===n.getTrend()?[c("span",{},_("Equal")),c("span",{"data-icon":"G",class:"guide-equal uwa-icon"},null)]:[c("span",{},_("Upward")),c("span",{"data-icon":"E",class:"guide-upward uwa-icon"},null)];a.push(c("div",{class:"details legend-facet-guide-trend"},[c("div",{class:"details-title"},_("Overall trend")+": "),c("div",{class:"details-value"},p)])),u(t.layout,n).forEach(function(t){if(t){var e,i=Number(n.getStats()[0].getKey()),s=Number(n.getStats()[n.getStats().length-1].getKey());e=t.x<i?_("The trend of the series has intersected series {0} on {1}."):t.x>s?_("The trend of the series will intersect series {0} on {1}."):_("The trend of the series intersects series {0} on {1}."),a.push(c("div",{class:"details legend-facet-guide-intersection"},e.format(t.otherFacet.getTitle(),l.formatLocalizedDate(new Date(1e3*r.round(t.x))))))}}),a.length&&(o=c(s,{facet:n,detail:a,onFacetChange:this.props.onFacetChange},null))}o&&e.push(c(i,{facet:n,withAggInfos:!1,detail:o,preview:this.props.preview,hideMenu:!0,onHighliteFacet:this.props.onHighliteFacet,onCreateModuleHistory:this.props.onCreateModuleHistory,onOpenPivot:this.props.onOpenPivot,onEditSource:this.props.onEditSource,onCreatePotion:this.props.onCreatePotion,onFacetChange:this.props.onFacetChange},null))}.bind(this)),c(n,{tab:"stats"},e)}})}.apply(e,i))||(t.exports=s)},function(t,e,n){"use strict";var i,s;i=[n(0),n(5),n(289),n(290),n(291)],void 0===(s=function(t,e,n,i,s){var o=t.h;return e.extend({init:function(t){this._parent(t)},render:function(){var t=[];return this.props.isNotesVisible&&!this.props.preview?this.props.sourceList.hasNotes()?this.props.sourceList.getSourceFacets().forEach(function(e){var n,a=[];e.getNotes().map(function(t){var n=o("div",{class:"details"+(this.props.highlightedNote===t?" highlighted":""),onClick:function(){this.props.readOnly||this.props.onOpenNote(t,e)}.bind(this),onMouseOver:function(){this.props.onHighliteNote(t,!0)}.bind(this),onMouseOut:function(){this.props.onHighliteNote(t,!1)}.bind(this)},[o("div",{class:"details-icon uwa-icon","data-icon":"~",style:{color:e.getColor()}},""),o("div",{class:"details-note-container"},[o("div",{class:"details-title"},t.getLabel()),o("div",{class:"details-value"},t.getText())]),this.props.readOnly?"":o("div",{class:"details-edit-icon uwa-icon","data-icon":"X"})]);a.push(n)}.bind(this)),a.length&&(n=o(s,{facet:e,detail:a},null)),n&&t.push(o(i,{facet:e,withAggInfos:!1,detail:n,preview:this.props.preview,readOnly:this.props.readOnly,hideMenu:!0,onHighliteFacet:this.props.onHighliteFacet,onCreateModuleHistory:this.props.onCreateModuleHistory,onOpenPivot:this.props.onOpenPivot,onEditSource:this.props.onEditSource,onCreatePotion:this.props.onCreatePotion,onFacetChange:this.props.onFacetChange},null))}.bind(this)):t=this.props.readOnly?this.getMessage(_("There are no notes for this chart.")):this.getMessage(_("To add a note, click on the chart.")):t=this.getMessage(_("There are no notes for this chart.")),o(n,{tab:"notes"},t)},getMessage:function(t){var e=t||_("Error. Please try later.");return o("div",{class:"uwa-message simple"},e)}})}.apply(e,i))||(t.exports=s)},function(t,e,n){"use strict";var i,s;i=[n(1),n(4),n(0),n(5),n(1100),n(418),n(420),n(80)],void 0===(s=function(t,e,n,i,s,o,a,r){var l=n.h;function c(t){return e.mapSplat(t.getFacets(),function(t){return t.getNotes()})}var u=i.extend({render:function(){return l("div",{style:{flex:1,minHeight:0}})},shouldComponentUpdate:function(e){this._chart.resize&&!t.equals(this.props.size,e.size)&&this._chart.resize(e.size);var n=this.props.highlightNote,i=e.highlightNote;this._chart.setNoteHighlite&&n!==i&&(n&&this._chart.setNoteHighlite(n,!1),i&&this._chart.setNoteHighlite(i,!0));var s=this.props.highlightFacet,o=e.highlightFacet;this._chart.setFacetHighlite&&s!==o&&(s&&this._chart.setFacetHighlite(s,!1),o&&this._chart.setFacetHighlite(o,!0));var a=c(e.node);return t.equals(a,this._renderedNotes)||(this._renderedNotes=a,this._chart.redraw()),!1},componentDidMount:function(){var t,e=this.props,n=e.node,i=n.getFacetsAggregationMethod(),o=n.getFacets()[0].getView();t=i&&o.facetsAggregateAs?o.facetsAggregateAs:o.combineWith?o.combineWith+"Combined":o.name,this._renderedNotes=c(n),this._chart=new(s[t.ucfirst()+"Graph"])({facetsNode:e.node,events:e.events,highlightFacet:e.highlightFacet,highlightNote:e.highlightNote,preview:e.preview,readOnly:e.readOnly,size:e.size,tooltipFormatter:e.tooltipFormatter}),this._chart.inject(this.base)},componentWillUnmount:function(){this._chart.destroy()}});return i.extend({init:function(t){this._parent(t),this._renderCell=this._renderCell.bind(this)},render:function(t){return t.rootNode instanceof r.EmptyNode?l("div",{class:"uwa-message simple"},_("No chart to render, please edit the app.")):l("div",{class:"nv-source-list-view-graph",style:{display:"flex",flexGrow:1,height:t.height}},l(o,{renderCell:this._renderCell,renderCellProps:this.props.chartProps,rootNode:t.rootNode,margin:10}))},_renderCell:function(t){if(t.node instanceof r.FacetsNode){var e={height:t.rect.height-(t.node.getCaption()?30:0),width:t.rect.width};return l("div",{style:{flex:1,display:"flex",flexDirection:"column",minWidth:0}},t.node.getFacets().some(function(t){return t.getStats().length})?l(u,Object.assign({size:e},t)):l("div",{className:"uwa-message simple",style:{flex:1,padding:25},onMouseOver:function(){t.events.onMouseOverMsg(t.node.getFacets(),!0)},onMouseOut:function(){t.events.onMouseOverMsg(t.node.getFacets(),!1)}},_("Not enough results. Please either update your analysis by refining your search criteria, or by widening the time period, or wait for next refresh.")),l(a,{node:t.node}))}}})}.apply(e,i))||(t.exports=s)},function(t,e,n){"use strict";var i,s;i=[n(1101),n(1102),n(1103),n(1104),n(422),n(1105),n(1106),n(1107),n(1108)],void 0===(s=function(t,e,n,i,s,o,a,r,l){return{HorizontalCombinedGraph:t,VerticalCombinedGraph:e,Column3dGraph:n,PieGraph:i,HbarGraph:s,StackedhbarGraph:o,TableGraph:a,TextcloudGraph:r,MapGraph:l}}.apply(e,i))||(t.exports=s)},function(t,e,n){"use strict";var i,s;i=[n(292)],void 0===(s=function(t){return t.extend({name:"nv-horizontal-combined-graph"})}.apply(e,i))||(t.exports=s)},function(t,e,n){"use strict";var i,s;i=[n(292)],void 0===(s=function(t){return t.extend({name:"nv-vertical-combined-graph"})}.apply(e,i))||(t.exports=s)},function(t,e,n){"use strict";var i,s;i=[n(1),n(292)],void 0===(s=function(t,e){return e.extend({name:"nv-column-3d-graph",getChartOptions:function(){var e=t.extend(this._parent(),{chart:{type:"column",plotBackgroundColor:"#fff",spacing:[0,-15,0,-15],options3d:{enabled:!0,alpha:15,beta:15,depth:50,viewDistance:100}},plotOptions:{column:{borderWidth:0,groupPadding:.1,pointPadding:0}}},!0);return e.chart=t.extend(e.chart,this.getBetaOptions(),!0),e},getSeriesOptions:function(){var t=this._parent();return t.forEach(function(t){t.type="column"}),t},getBetaOptions:function(){var t={},e=this.elements.container.getDimensions().width,n=Math.round((e-275)/26),i=Math.round((e-1700)/-107);return n>14&&(t={options3d:{beta:i<6?6:i}}),t}})}.apply(e,i))||(t.exports=s)},function(t,e,n){"use strict";var i,s;i=[n(1),n(4),n(46),n(98),n(421)],void 0===(s=function(t,e,n,i,s){return s.extend({name:"nv-pie-graph",getChartOptions:function(){var e=this._parent();return t.extend(e,{chart:{type:"pie"},plotOptions:{pie:{size:"94%",shadow:!1},series:{innerSize:"42%",slicedOffset:0}}},!0),e},_getAggregationMethod:function(){return this.options.facetsNode.getFacetsAggregationMethod()},getSeriesOptions:function(){var t=this,e=94,n=94/this.options.facetsNode.getFacets().length,s=[];return this.options.facetsNode.getFacets().forEach(function(o){var a=this._getAggregationMethod();if(a)s.length||s.push({data:[]}),s[0].data.push({y:i.getValue(a,o),facet:o,label:i.getLabel(a)});else{var r=o.getStatsForHighchart({limit:5,usePanelColor:!0,sort:{type:"bymethod",label:"value",order:"desc"}});s.push({data:r,size:e+"%",innerSize:e-n+"%",facet:o,states:{hover:{brightness:-.3}},point:{events:{click:function(){this.stat&&t.dispatchEvent("onPointClick",[this.stat])},mouseOver:function(){this.stat&&t.dispatchEvent("onMouseOverNote",[this.stat.getNote(),!0])},mouseOut:function(){this.stat&&t.dispatchEvent("onMouseOverNote",[this.stat.getNote(),!1])}}}}),e-=n}}.bind(this)),s},getTooltipOptions:function(){var t=this._getAggregationMethod();return{enable:!0,useHTML:!0,borderColor:null,borderWidth:0,shadow:!1,backgroundColor:null,formatter:function(){var n=this.point,s=n.facet,o=t?i.getFormatedValue(t,s):e.formatHumanNumber(n.y);return'<div class="chart-tooltip"><div><p class="tooltip-title"><span>'+s.getTitle().escapeHTML()+'</span></p><p class="tooltip-series"><span style="color:'+n.color+'">'+n.label.escapeHTML()+(n.keyType?" ("+n.keyType+")":"")+"</span> "+Math.round(100*n.percentage)/100+"% ("+o+")</p></div></div>"},style:{fontSize:"10px"}}},setFacetHighlite:function(t,e){this.graph&&this.graph.series.forEach(function(n){n.options.facet===t&&n.setState(e?"hover":""),n.points.forEach(function(n){n.facet===t&&n.setState(e?"hover":"")})})},setNoteHighlite:function(t,e){this.graph&&this.graph.series.forEach(function(n){n.points.forEach(function(n){n.stat&&n.stat.getKey()===t.getKey()&&n.setState(e?"hover":"")})})}})}.apply(e,i))||(t.exports=s)},function(t,e,n){"use strict";var i,s;i=[n(1),n(13),n(4),n(87),n(422)],void 0===(s=function(t,e,n,i,s){return s.extend({name:"nv-stackedhbar-graph",buildContent:function(){this.stats.forEach(function(t){this.getBarElement(t).inject(this.elements.innerContainer)}.bind(this)),!this.options.preview&&this.options.facetsNode.getFacets().some(function(t){return t.getNotes().length>0})&&this.updatePositionForNotes()},getTotal:function(t){var e=0;return t.forEach(function(t){e+=t.getValue()}),e},getBarElement:function(s){var o;s=e.splat(s);var a=0,r=t.createElement("div",{class:"bar",html:[t.createElement("h4",{html:this.getBarTitle(s[0]),styles:{width:this.getMaxWidth()+"%"}})]});s[0].getFavicon()&&this.getFavicon(s[0]).inject(r);var l=t.createElement("div",{class:"bar-inner",styles:{width:this.getWidth(s[0])},html:[o=this.makeInnerValueContainer(s[0])]}).inject(r),c=this.getTotal(s);return s.forEach(function(e,n){var s=t.createElement("div",{class:"stacked-bar-inner",styles:{width:100*e.getValue()/c+"%","background-color":e.getColor()}}).inject(l);if(i.set(s,"data",{stat:e}),0===n&&t.createElement("h4",{html:this.getBarTitle(e)}).inject(s),t.createElement("div",{class:"over-stacked-bar",styles:{width:100*e.getValue()/c+"%"}}).inject(s),e.getNote()&&!this.options.preview){this.elements.container.addClassName("with-notes");var u=this.getNoteElement(e.getNote(),e,!0).inject(r);u.setStyle("right",10+15*a),(u=this.getNoteElement(e.getNote(),e,!1).inject(o)).setStyle("right",10+15*a),a++,(!this.pinLength||this.pinLength<a)&&(this.pinLength=a)}this.attachEvents(s,e)}.bind(this)),t.createElement("span",{class:"bar-value",text:n.formatHumanNumber(c)}).inject(r),this.addTooltip(r,s),r},updatePositionForNotes:function(){this.elements.container.getElements(".bar-value").forEach(function(t){var e=20+16*this.pinLength;t.setStyle("right",e)}.bind(this))},setFacetHighlite:function(t,e){this.elements.container.getElements(".stacked-bar-inner").forEach(function(n){var s=i.get(n,"data").stat;s.getFacet()===t&&this.setStatHighlite(n,s,e)}.bind(this))},setNoteHighlite:function(t,e){this.elements.container.getElements(".stacked-bar-inner").forEach(function(n){var s=i.get(n,"data").stat;s.getKey()===t.getKey()&&this.setStatHighlite(n,s,e)}.bind(this))}})}.apply(e,i))||(t.exports=s)},function(t,e,n){"use strict";var i,s;i=[n(1),n(3),n(18),n(10),n(157),n(87),n(46),n(98)],void 0===(s=function(t,e,n,i,s,o,a,r){return i.extend({name:"nv-table-graph",options:{size:{height:250}},init:function(e){this._parent(e),this.elements.container=t.createElement("div",{class:this.getClassNames()}),this.formatStats(),this.buildContent()},isNotesVisible:function(){return!0},resize:function(t){this.grid&&this.grid.setScrollerSize({height:t.height-4})},redraw:function(){this.grid&&this.grid.destroy(),this.elements.container.empty(),this.buildContent()},inject:function(){this._parent.apply(this,arguments),this.grid.updateScroller()},formatStats:function(){var e=this,n=this.options.facetsNode.getFacetsAggregationMethod(),i=this;this.data={columns:[],data:[]};var s=function(e){var s=t.createElement("div"),a="";return e?(a=null===e.getValue()?"n/a":e.getFormatedValue(),e.getNote()&&!i.options.preview&&(a+=' <span class="uwa-icon note-pin" data-icon="~" style="color:'+e.getColor()+'"></span>')):a="n/a",s.setHTML(a),n||s.addEvent("click",function(){i.dispatchEvent("onPointClick",e)}),o.set(s,"data",{stat:e}),[s]},a=function(t){return t?null===t.getValue()?1/0:t.getValue():null};if(this.data.columns.push({dataIndex:"dataLabel",isFixed:!0,isFirst:!0}),n){var l={};l.text=r.getLabel(n),l.dataIndex="value",l.format=s,l.sortKey=a,this.data.columns.push(l),this.options.facetsNode.getFacets().forEach(function(t){e.data.data.push({key:t.getTitle(),dataLabel:t.getTitle(),value:r.asStat(n,t)})})}else this.options.facetsNode.getFacets().forEach(function(t,e){var n=t.getStats(),i={};i.text=t.getTitle(),i.dataIndex="value_"+e,i.color=t.getColor(),i.format=s,i.sortKey=a,this.data.columns.push(i),n.forEach(function(n){var i=this.data.data.filter(function(t){return t&&t.key===n.getKey()})[0];i||((i={}).key=n.getKey(),i.dataLabel=t.isTimeData()?n.getFormatedDate():n.getLabel(),this.data.data.push(i)),i["value_"+e]=n}.bind(this))}.bind(this))},getTableOptions:function(){var e={sortable:!0,scrollerOptions:{height:this.options.size.height-4,scrollbar:{autoHide:!1,bgColor:"transparent",opacity:.65}}};if(this.options.tableSort){var n=JSON.parse(this.options.tableSort);e.orderBy=n.orderBy,e.sortReverse=n.sortReverse}else{var i=this.data.columns;i.length>1?(e.orderBy=i[1].dataIndex,e.sortReverse=!0):(e.orderBy=i[0].dataIndex,e.sortReverse=!1)}return e=t.merge(e,this.data)},buildContent:function(){var t=this.getTableOptions();this.grid=new s(t).inject(this.elements.container)},setNoteHighlite:function(t,e){this.grid&&this.grid.elements.grid.getElements(".note-pin").forEach(function(n){var i=n.getParent(),s=o.get(i,"data").stat;t.getKey()===s.getKey()&&n.setStyle("color",e?a.brightenColor(s.getColor()):s.getColor())})}})}.apply(e,i))||(t.exports=s)},function(t,e,n){"use strict";var i,s;i=[n(1),n(10),n(82),n(87),n(46)],void 0===(s=function(t,e,n,i,s){function o(t,e,n,i){return t.some(function(t,s){return t&&(o=t,a=e[s],r=n,l=i,Math.abs(2*o.x+a.width-2*r.x-l.width)<a.width+l.width+5&&Math.abs(2*o.y+a.height-2*r.y-l.height)<a.height+l.height+5);var o,a,r,l})}return e.extend({name:"nv-textcloud-graph",options:{size:{width:250,height:250}},init:function(e){this._parent(e),this.elements.wordsContainer=t.createElement("div",{class:this.getClassNames("-words-container")}),this._rngSeed=Math.random(),this.elements.container=t.createElement("div",{class:this.getClassNames(),html:this.elements.wordsContainer,styles:{width:this.options.size.width,height:this.options.size.height}}),this.formatStats()},isNotesVisible:function(){return!1},inject:function(){this._parent.apply(this,arguments),this._buildContent(),this._setWordPositions()},resize:function(t){this.options.size=t,this.elements.container.setStyles({width:t.width,height:t.height}),this._setWordPositions()},formatStats:function(){this.stats=[],this.options.facetsNode.getFacets().forEach(function(t){t.getStats().forEach(function(t){var e={key:t.getKey(),value:t.getValue(),stats:[t],color:t.getColor()},n=this.stats.detect(function(e){return e.key===t.getKey()});n?(n.common=!0,n.color="#FFF",n.value+=t.getValue(),n.stats.push(t)):this.stats.push(e)},this)},this),this.stats=s.sort(this.stats,{type:"bylabel",label:"value",order:"desc"})},_buildContent:function(){this._wordElements=this.stats.slice(0,50).map(this._buildWordElement,this),this.elements.wordsContainer.addContent(this._wordElements),this._wordSizes=this._wordElements.map(function(t){return t.getBoundingClientRect()})},_buildWordElement:function(e){var o=function(t){c.setStyle("color",t?s.brightenColor(e.color):e.color)},a=this.stats[0].value,r=this.stats[this.stats.length-1].value||0,l=100*((e.value-r)/(a-r)*.75+.25),c=t.createElement("span",{styles:{fontSize:l+"%",color:e.color,position:"absolute"},html:e.stats[0].getLabel()+" ",class:"textcloud-word"+(e.common?" common":""),events:{click:function(){this.dispatchEvent("onPointClick",[e.stats[0]]);var t=this.elements.container.getElement(".chart-tooltip.uwa-tooltip");t&&t.hide()}.bind(this),mouseover:o.bind(this,!0),mouseout:o.bind(this,!1)}});return i.set(c,"data",{stat:e}),this.options.tooltipFormatter&&new n(c,this.options.tooltipFormatter(e.stats),{fx:!1,className:"chart-tooltip",root:this.elements.container}),c},_setWordPositions:function(){var t,e,n,i=this.options.size,s=i.width/i.height,a=i.width/2,r=i.height/2,l=[],c=(t=this._rngSeed,e=2147483648,n=t||Math.floor(Math.random()*(e-1)),function(){return(n=(1103515245*n+12345)%e)/(e-1)});this._wordSizes.forEach(function(t){l.push(function(t,e,n,i,s){var a=Math.pow(t(),2),r=(t()<.5?1-a:1+a)*Math.PI/2;t()<.5&&(r=-r);for(var l=20,c={x:-e.width/2,y:-e.height/2};o(s,i,c,e);)l+=2,c.x=-e.width/2+l*Math.cos(r)*n,c.y=l*Math.sin(r)-e.height/2;return c}(c,t,s,this._wordSizes,l))},this);var u=0,h=0,d=0,p=0;l.slice(0,8).forEach(function(t,e){h=Math.min(h,t.y),u=Math.min(u,t.x),d=Math.max(d,t.x+this._wordSizes[e].width),p=Math.max(p,t.y+this._wordSizes[e].height)},this);var m=Math.min(a/-u,r/-h,a/d,r/p,1);this.elements.wordsContainer.setStyles({fontSize:m+"em"}),this._wordElements.forEach(function(t,e){var n=l[e],i=this._wordSizes[e];n.x<-a/m||n.x+i.width>a/m||n.y<-r/m||n.y+i.height>r/m?t.hide():(t.show(),t.setStyles({top:n.y*m,left:n.x*m}))},this)},setFacetHighlite:function(t,e){var n=this.elements.container.getElements(".textcloud-word"),o=e?s.brightenColor(t.getColor()):t.getColor();n.forEach(function(e){var n=i.get(e,"data").stat;!n.common&&n.stats[0]&&n.stats[0].getFacet()===t&&e.setStyle("color",o)})}})}.apply(e,i))||(t.exports=s)},function(t,e,n){"use strict";var i,s;i=[n(1),n(13),n(10),n(300),n(2),n(4),n(46),n(400)],void 0===(s=function(t,e,n,i,s,o,a,r){return n.extend({name:"nv-map-graph",styles:[{brightness:.9,size:35,anchor:[18,0],textSize:11,xPosition:26},{brightness:.8,size:45,anchor:[22,0],textSize:12,xPosition:21},{brightness:.6,size:55,anchor:[28,0],textSize:13,xPosition:15},{brightness:.4,size:65,anchor:[32,0],textSize:13,xPosition:8}],options:{size:{height:250,width:"100%"}},init:function(e){this._parent(e),this.markerClusters=[],this.elements.container=t.createElement("div",{class:this.getClassNames()}),this.buildContent()},isNotesVisible:function(){return!0},redraw:function(){this.elements.container.empty(),this.markerClusters=[],this.buildContent()},buildMarkers:function(){this.options.facetsNode.getFacets().forEach(function(e){var n=[],i=t.clone(this.styles).map(function(n){return this.getMarkerStyle(t.merge(n,{color:e.getColor()}))}.bind(this));e.getStats().forEach(function(t){var e=t.getKey().split(","),i=new google.maps.LatLng(e[0],e[1]),s=new google.maps.Marker({position:i,icon:this.getMarkerSymbol(t),value:t.getValue(),markerData:t,optimized:!1});this.addMarkerEvents(s),n.push(s)}.bind(this));var s=new r(this.map.map,n,{styles:i,zoomOnClick:!1,useMarkerValue:!0});this.addMarkerClusterEvents(s,e),this.markerClusters.push(s)}.bind(this))},buildContent:function(){var t=s.Config.api_keys,e=t.googlecloud&&t.googlecloud.key?t.googlecloud.key:null;this.map=new i({api:{zoom:1,mapTypeId:"roadmap",streetViewControl:!1,mapTypeControl:!1},googleApiKey:e,height:this.options.size.height-8,width:this.options.size.width-20}),this.map.inject(this.elements.container),this._addEvents()},resize:function(t){this.map.setSize({width:t.width-20,height:t.height-8})},setMapStyle:function(){this.map.map.setOptions({styles:[{featureType:"administrative",elementType:"all",stylers:[{visibility:"simplified"}]},{featureType:"administrative",elementType:"geometry.fill",stylers:[{visibility:"off"}]},{featureType:"administrative.country",elementType:"geometry.stroke",stylers:[{visibility:"on"},{color:"#eeeeee"}]},{featureType:"landscape",elementType:"geometry",stylers:[{visibility:"simplified"},{color:"#fcfcfc"}]},{featureType:"poi",elementType:"geometry",stylers:[{visibility:"simplified"},{color:"#fcfcfc"}]},{featureType:"road.highway",elementType:"geometry",stylers:[{visibility:"simplified"},{color:"#dddddd"}]},{featureType:"road.arterial",elementType:"geometry",stylers:[{visibility:"simplified"},{color:"#dddddd"}]},{featureType:"road.local",elementType:"geometry",stylers:[{visibility:"simplified"},{color:"#eeeeee"}]},{featureType:"water",elementType:"geometry",stylers:[{visibility:"simplified"},{color:"#dddddd"}]}]})},getMarkerSymbol:function(t){var e;return e=t.getValue()<10?0:t.getValue()<100?1:t.getValue()<1e3?2:3,{url:this.getCircleSymbol({stat:t,size:this.styles[e].size,color:a.brightenColor(t.getColor(),this.styles[e].brightness),value:t.getFormatedValue(),xPosition:this.styles[e].xPosition,note:this.options.preview?"":t.getNote()}),scaledSize:new google.maps.Size(this.styles[e].size,this.styles[e].size+25)}},getCircleSymbol:function(t){return"data:image/svg+xml;base64,"+e.base64Encode('<svg xmlns="http://www.w3.org/2000/svg" height="'+(t.size+15)+'" viewBox="0 0 64 64" width="'+t.size+'" ><g><circle fill-opacity="0.8" stroke="'+a.brightenColor(t.color,.2)+'" stroke-width="10" stroke-opacity="0.5" cx="32" cy="32" r="15" fill="'+t.color+'"/>'+(t.value?'<text x="'+t.xPosition+'" y="38" font-family="Arial" font-size="18" font-weight="bold" fill="#FFF">'+t.value+"</text>":"")+(t.note?'<g transform="translate(24, -15)"><path d="M8,0C3.582,0,0,3.582,0,8s8,24,8,24s8-19.582,8-24S12.418,0,8,0z M8,12c-2.209,0-4-1.791-4-4   s1.791-4,4-4s4,1.791,4,4S10.209,12,8,12z" fill="'+t.color+'"/></g>':"")+"</g></svg>")},getMarkerStyle:function(t){return{url:this.getCircleSymbol({size:t.size,color:a.brightenColor(t.color,t.brightness)}),height:t.size,width:t.size,anchor:t.anchor,textColor:"#FFF",textSize:t.textSize}},_addEvents:function(){this.map.addEvent("onLoad",function(){this.setMapStyle(),this.map.setPosition({coords:{latitude:45,longitude:28}}),this.buildMarkers(),google.maps.event.addListener(this.map.map,"zoom_changed",function(){this.infoWindowCluster&&this.infoWindowCluster.close()}.bind(this))}.bind(this))},addMarkerEvents:function(t){var e=new google.maps.InfoWindow({content:'<div class="map-tooltip"><p class="tooltip-series"><span style="color:'+t.markerData.getColor()+'">'+t.markerData.getFacet().getTitle()+' </span></p><p class="tooltip-title"><span>'+t.markerData.getLabel()+"</span> "+t.markerData.getFormatedValue()+"</p></div>",disableAutoPan:!0,pixelOffset:{height:10,width:0}});google.maps.event.addListener(t,"click",function(){this.dispatchEvent("onPointClick",t.markerData)}.bind(this)),google.maps.event.addListener(t,"mouseover",function(){e.open(this.map.map,t)}.bind(this)),google.maps.event.addListener(t,"mouseout",function(){e.close()})},addMarkerClusterEvents:function(t,e){google.maps.event.addListener(t,"clustermouseover",function(t){var n=t.getMarkers(),i="";n.sort(function(t,e){return t.markerData.getValue()<e.markerData.getValue()?1:t.markerData.getValue()>e.markerData.getValue()?-1:0});for(var s=0;s<n.length;s++)if(i+='<p class="tooltip-title"><span>'+n[s].markerData.getLabel()+"</span> "+n[s].markerData.getFormatedValue()+"</p>",5===s){i+="<p>...</p>";break}this.infoWindowCluster=new google.maps.InfoWindow({content:'<div class="map-tooltip"><p class="tooltip-series"><span style="color:'+e.getColor()+'">'+e.getTitle()+" </span></p>"+i+"</div>",disableAutoPan:!0,position:{lat:t.getCenter().lat(),lng:t.getCenter().lng()},pixelOffset:{height:-10,width:0}}),this.infoWindowCluster.open(this.map.map)}.bind(this)),google.maps.event.addListener(t,"clustermouseout",function(){this.infoWindowCluster&&this.infoWindowCluster.close()}.bind(this))}})}.apply(e,i))||(t.exports=s)},function(t,e,n){"use strict";var i,s;i=[n(1),n(35),n(0),n(5),n(11),n(155),n(361),n(36),n(161)],void 0===(s=function(t,e,n,i,s,o,a,r,l){var c=n.h;return i.extend({init:function(t){this._parent(t),this.state={showNote:!t.stat}},render:function(t,e){return c(o,{onClose:t.onClose,class:"in-app-overlay",injectInParentMatching:".moduleFrame"},e.showNote?this._renderNoteForm():this._renderIndex())},_renderIndex:function(){var e=this.props,n=e.stat,i=n.getFacet().getSource(),o=function(e,n){var i=t.clone(e.getQuery()),s=e.getDisplayableQuery(),o=e.getDescription(),a=e.getAvailableFacets(),c=e.getFrom(),u=e.getTo();if(n.getFacet().isQuantitativeData()){var h=n.getFacet().getName(),d=n.getLabel(),p=n.getKey(),m=n.getKeyType(),f=[];f.push({value:"geoloc"===h?p:l.escapeQuery(d),filter:m||h});var g=l.buildQuery({raw:i.topic,and:l.buildQueryPartsFromRequestAdd(f)});i.topic=g,s=g,o.topic&&(o.topic=g)}else{var v=r.getDatesFromRange(n.getDate(),e.getRange());c=r.formatDateForPreferences(v[0]),u=r.formatDateForPreferences(v[1])}return e.cloneWith({query:i,displayableQuery:s,description:o,availableFacets:a,from:c,to:u,range:e.getRange(),sampling:e.getSampling()})}(i,n);return c("div",{class:"nv-analyze-pivots"},c("div",{class:"nv-analyze-pivots-title"},c("strong",null,o.getDisplayableQuery().truncate(150),n.getFacet().isTimeData()&&[" "+_("on")+" ",c("strong",null,n.getFormatedDate())])),c("div",{class:"nv-analyze-pivots-buttons"},e.isNotesVisible&&c(s.Button,{className:"nv-analyze-pivots-button medium-grey iconl pin-point",value:n.getNote()?_("Edit note"):_("Add a note"),events:{onClick:function(){this.setState({showNote:!0})}.bind(this)}}),i.getAvailableFacets().length&&c(s.Button,{className:"nv-analyze-pivots-button green iconl combined-charts",value:_("Drill down"),events:{onClick:function(){e.onOpenPivot({source:o,facet:n.getFacet()}),e.onClose()}}})))},_renderNoteForm:function(){var t=this.props.facet,e=this.props.note,n=!e;if(n){var i=this.props.stat;e=new a({key:i.getKey(),label:t.isTimeData()?i.getFormatedDate():i.getLabel()})}return c("div",{class:"in-app-overlay-notes"},c("div",{class:"in-app-overlay-title"},c("i",{class:"uwa-icon pin"}),c("span",null,_("Notes"))),c("div",{class:"lightbox-section-group"},c("div",{class:"lightbox-section"},c("div",{class:"lightbox-content"},c("p",{class:"lightbox-content-label"},_("Item:")),c("p",null,e.getLabel()),c(s.Text,{ref:function(t){this._textarea=t}.bind(this),className:"multiline note-text-input",value:e.getText(),multiline:!0})))),c("p",{class:"lightbox-button-group"},c(s.Button,{className:"medium dark-grey left-aligned"+(n?"":" iconl delete"),value:n?_("Cancel"):_("Delete"),events:{onClick:function(){n||this.props.onNoteChange(this._setNote())}.bind(this)}}),c(s.Button,{className:"medium dark-grey",value:n?_("Add"):_("Update"),events:{onClick:function(){this.props.onNoteChange(this._setNote(this._textarea.getControl().getValue()))}.bind(this)}})))},_setNote:function(t){var n,i=this.props.note,s=this.props.stat,o=this.props.facet,r=o.getSource();if(void 0===t?i&&(e.log("notes","remove"),n=o.getNotes().filter(function(t){return i!==t})):i?n=o.getNotes().map(function(e){return e!==i?e:i.cloneWith({text:t})}):(e.log("notes","new"),n=o.getNotes().concat(new a({key:s.getKey(),label:o.isTimeData()?s.getFormatedDate():s.getLabel(),text:t}))),n)return r.cloneWith({facets:r.getFacets().map(function(t){return o!==t?t:o.cloneWith({notes:n})},this)})}})}.apply(e,i))||(t.exports=s)},function(t,e,n){"use strict";var i,s;i=[n(0),n(5),n(11),n(65),n(304),n(66),n(229),n(55),n(80),n(311),n(36),n(139),n(119)],void 0===(s=function(t,e,n,i,s,o,a,r,l,c,u,h,d){var p=t.h;function m(t){return p(i,{class:o.getClassNames("-pivot-facets")},p("h2",{},_("Create another Analytics app based on this metric")),t.source.getAvailableFacets().length&&p("div",{class:o.getClassNames("-pivot-facets-tags")},p("h3",{},_("Metrics")),t.source.getAvailableFacets().map(function(e){var i=!t.readArticles&&e.getName()===t.source.getFacets()[0].getName();return p(n.Tag,{value:e.getDisplayName(),className:"light-border-only"+(i?" selected":""),containerStyle:{display:"inline-block"},events:{onClick:t.onToggleFacet.bind(this,e)}})})),"Corpus"===t.source.getType()?p("div",{class:o.getClassNames("-pivot-facets-tags")},p("h3",{},_("Other")),p(n.Tag,{value:_("Read articles"),className:"light-border-only"+(t.readArticles?" selected":""),containerStyle:{display:"inline-block"},events:{onClick:t.onToggleReadArticleFacet}})):"")}return e.extend({init:function(t){this._parent(t),this.state={loading:!0,readArticles:!1},this.onToggleFacet=this.onToggleFacet.bind(this),this.onToggleReadArticleFacet=this.onToggleReadArticleFacet.bind(this)},componentWillMount:function(){this.setState({loading:!0}),d.cloneSource(this.props.source).done(function(t){this.setState({loading:!1,error:!1,newSource:t.cloneWith({facets:[(this.props.source.getQuantitativeAvailableFacets()[0]||this.props.source.getAvailableFacets()[0]).cloneWith({color:this.props.source.getFacets()[0].getColor()})]})})}.bind(this),function(){this.setState({loading:!1,error:!0})}.bind(this))},render:function(t,e){return p(o,{extraClass:"pivot dark-background",rightNavigation:[p(r.Main,{label:_("Add to my tab"),disabled:t.loading||e.loading,onClick:function(){this.onAddNewModule()}.bind(this)})]},e.newSource&&p("div",{class:o.getClassNames("-query-details")},p(a,{source:e.newSource})),e.newSource&&p("div",{class:o.getClassNames("-pivot")},p(m,{source:e.newSource,readArticles:e.readArticles,onToggleFacet:this.onToggleFacet,onToggleReadArticleFacet:this.onToggleReadArticleFacet}),p("div",{class:o.getClassNames("-pivot-preview")},p("h2",{},_("Preview")+": "+(e.readArticles?_("Read articles"):e.newSource.getFacets()[0].getDisplayName())),!e.loading&&e.error?p("div",{class:"uwa-message error"},_("An error occured. Please try later.")):e.loading?p("div",{class:"loading-message"},p(n.Spinner,{autostart:!0,color:"#CACACA",size:30}),p("div",{class:"uwa-message simple"},_("Loading"))):e.readArticles?p(s.PreactComponent,{itemList:this.itemList,view:"normal"}):p(c,this.getSourceListViewProps()))))},getSourceListViewProps:function(){return this._sourceLayout=new l.FacetsNode(null,this.state.newSource.getFacets()),{settings:{layout:JSON.stringify(this._sourceLayout.toJSON()),selectedTab:"details",sources:JSON.stringify([this.state.newSource.toJson()])},fixedHeight:!0,preview:!0}},isPivotFromTimeData:function(){return this.props.facet.isTimeData()},isPivotFromQuantitativeData:function(){return this.props.facet.isQuantitativeData()},getPeriod:function(){return{from:this.state.newSource.getFrom(),to:this.state.newSource.getTo()}},onToggleFacet:function(t){var e=this.props;this.setState(function(n){return{newSource:n.newSource.cloneWith({facets:[t.cloneWith({color:e.source.getFacets()[0].getColor()})]}),readArticles:!1}})},onToggleReadArticleFacet:function(){if(this.setState(function(t){return{newSource:t.newSource.cloneWith({facets:[]}),readArticles:!0}}),!this.props.loading&&!this.itemList){this.setState({loading:!0,error:!1});var t=this.getPeriod();h.fetch({query:this.state.newSource.getQuery()},Object.assign({},u.formatDateRangeForAPI(t.from,t.to))).done(function(t){this.itemList=t,this.setState({loading:!1})}.bind(this),function(){this.setState({loading:!1,error:!0})})}},getNewModuleDataObj:function(){var t;if(this.state.readArticles){var e=this.state.newSource.getQuery();t={moduleName:"SmartFilter",title:e.topic+" - "+this.props.facet.getDisplayName(),data:Object.assign({searchQuery:JSON.stringify(e)},this.getPeriod())}}else t={moduleName:"Analyze",title:this.state.newSource.getFacets()[0].getTitle(),data:{sources:JSON.stringify([this.state.newSource.toJson()]),layout:JSON.stringify(this._sourceLayout.toJSON())}};return t},onAddNewModule:function(){this.props.events.onCloseRequest(this.getNewModuleDataObj())}})}.apply(e,i))||(t.exports=s)},function(t,e,n){"use strict";var i,s;i=[n(1),n(24),n(10),n(23),n(58),n(282),n(45),n(153),n(279),n(284),n(423),n(224)],void 0===(s=function(t,e,n,i,s,o,a,r,l,c,u,h){var d=l.extend({onFocusChange:function(t,e){(t||e).scrollTo()}});return n.extend(e,{name:"nv-item-list-renderer-reader",options:{view:"normal",asideItemListOptions:{itemOptions:{displayInnerItem:!1,displayActions:!1,globalAudioPlayer:!1,buildImage:!1}},displayedItemOptions:{closable:!0}},getContent:function(){return this.elements.content||this._buildContent(),this.elements.content},getNotify:function(){return this.elements.notify},getAsideItemList:function(){return this.elements.itemList||(this.elements.itemList=this._renderAsideItemList()),this.elements.itemList},getDisplayedItemRenderer:function(){return this.elements.displayedItemRenderer},getDisplayedItemScroller:function(){return this.elements.displayedItemScroller},getDisplayedItem:function(){var t=this.elements.displayedItemRenderer;return t&&t.getItem()},_buildContent:function(){this.elements.content=t.createElement("div",{class:this.getClassNames(),html:[this.elements.notify=new h,this.getAsideItemList(),this.elements.toggleList=t.createElement("div",{class:this.getClassNames("-toggle-list")+" uwa-icon",events:{click:function(){this.toggleList()}.bind(this)}}),this.elements.dragList=t.createElement("div",{class:this.getClassNames("-drag-list")}),{tag:"div",class:this.getClassNames("-displayed-item"),html:[this.elements.displayedItemScroller=new i({className:this.getClassNames("-displayed-item-scroller"),shadows:!0})]}],events:{resize:function(){this._syncClassNames()}.bind(this)}});var e=this.newListWidth=a.get("feedreaderMenuWidth"),n=this.elements.itemList.getContent();e&&n.setStyle("max-width",e),o.stickyElements(this.elements.displayedItemScroller.getInnerElement(),{stickySelector:".item-actions-wrapper"})},toggleDrag:function(t){var n=this,i=this.elements.itemList.getContent();if(this.drag&&(this.drag.destroy(),this.drag=null),t){var o=s.extend(e,{start:function(){n.newListWidth=this.width=i.getSize().width},move:function(t,e){n.newListWidth=Math.min(Math.max(300,e.x+this.width),600),this.setAnimate("updateSize",this.updateSize)},updateSize:function(){i.setStyle("max-width",n.newListWidth)},stop:function(){a.set("feedreaderMenuWidth",Math.round(n.newListWidth)),a.save()}});this.drag=new o({element:this.elements.dragList})}},renderDisplayedItem:function(t){return r.factory(t,this.options.displayedItemOptions)},renderAsideItemList:function(){var t=Object.assign({itemOptions:{}},this.options.asideItemListOptions);return t.itemOptions.showFocusBar=!0,t.tileSizes=function(t){return this.getDisplayedItem()?{width:t-26,height:140,maxRows:1,maxColumns:1}:{width:140,height:140,maxRows:3,maxColumns:3}}.bind(this),"mosaic"===this.options.view?new c(t):"condensed"===this.options.view?new u(t):new d(t)},_renderAsideItemList:function(){var t=this.renderAsideItemList();return t.addEvent("onItemRendererToggleContent",function(t,e){this.setDelayed("toggle-item",function(){this._toggleItem(t.getItem(),e)},1)}.bind(this)),t.addEvent("onItemRendererPlayEnclosure",function(t){this.setDelayed("on-play-enclosure",function(){this.elements.displayedItemRenderer&&this.elements.displayedItemRenderer.playEnclosure(t)},1)}.bind(this)),t},addItems:function(t,e){if(this.getAsideItemList().addItems(t,e),this._shouldFocusItem&&t.indexOf(this._shouldFocusItem)>=0){var n=this.elements.itemList.getRenderer(this._shouldFocusItem);n&&n.setFocus(),delete this._shouldFocusItem}},openItem:function(t){this._toggleItem(t,!0)},focusFirstItem:function(){this.getAsideItemList().focusFirstItem()},_toggleItem:function(t,e){this.getContent();var n=this.elements.displayedItemScroller.getInnerElement(),i=this.elements.displayedItemRenderer,s=i&&i.getItem();if(!e||s!==t){this.toggleDrag(e),i&&(i.scrollTo({top:!0}),i.destroy(),delete this.elements.displayedItemRenderer);var o=this.elements.itemList.getRenderer(t);if(e){o?o.setFocus():this._shouldFocusItem=t;var a=this.elements.displayedItemRenderer=this.renderDisplayedItem(t);a.getContent().addClassName("open"),a.addEvent("onFocusChange",function(e){var n=this.elements.itemList.getRenderer(t);!e&&n&&(n.setFocus(!1),n.toggleContent&&n.toggleContent(!1))}.bind(this)),n.setContent(a),this.elements.itemList.getContent().setStyle("max-width",this.newListWidth||"")}else n.empty(!0),this.elements.itemList.getContent().setStyle("max-width","");this.dispatchEvent("onToggleItem",[t,e]),this.elements.content.toggleClassName("is-displaying-item",e),this.elements.itemList.dispatchEvent("onResize"),this._syncClassNames()}},toggleList:function(t){void 0===t&&(t=!this.elements.content.hasClassName("hide-list")),this.elements.content.toggleClassName("hide-list",Boolean(t)),this.elements.itemList.dispatchEvent("onResize"),this._syncClassNames()},onResize:function(){this._syncClassNames()},_syncClassNames:function(){var t=this.elements.content.clientWidth;this.elements.content.toggleClassName("large-view",t>=720)}})}.apply(e,i))||(t.exports=s)},function(t,e,n){"use strict";var i,s;i=[n(1),n(3),n(2),n(153),n(44)],void 0===(s=function(t,e,n,i,s){return i.extend({name:"nv-condensed-item-renderer",render:function(){var t=this.getItem();return[{tag:"a",target:"_blank",href:t.getLink(),class:"item-header","uwa-tooltip":this._getDescriptionToolTipContent(),"uwa-tooltip-delay":1500,"uwa-tooltip-quick":!0,html:[{tag:"span",class:"item-title",html:[t.getTitle().sanitizeHTML(),t.getContent()&&{tag:"span",class:"item-preview",html:" - "+t.getContent().sanitizeHTML()}]},this.buildDateElement()]}]},buildDateElement:function(){var e=t.createElement("span",{class:"item-time"});return s.bindRelativeTime(e,this.getItem().getPublishDate(),"abbr"),e},onClick:function(t){this._parent(t);var i=e.whichButton(t)<=0,s=!!e.whichKey(t),o=this.options.openOutside||!i||s||!n.isAllowed("feed_reader");o?this.toggleReadFlag(!0):e.stop(t),o||(this.setFocus(!this.hasFocus()),this.scrollTo({smooth:!0}))},onFocusChange:function(t){this.getContainer().toggleClassName("focus",t),t?(this.toggleReadFlag(!0),this.dispatchEvent("onToggleContent",[!0])):this.dispatchEvent("onToggleContent",[!1]),this._parent(t)}})}.apply(e,i))||(t.exports=s)},function(t,e,n){"use strict";var i,s;i=[n(0),n(14),n(5),n(223),n(174)],void 0===(s=function(t,e,n,i,s){var o=t.h,a=e.namespace("Analyze_Sidebar").addRules({root:{display:"inline-flex",flexDirection:"column",overflow:"hidden",backgroundColor:"#666666",width:"167px"},title:{textTransform:"uppercase",textAlign:"center",fontSize:"1.5em",letterSpacing:".02em",padding:"25px 0 40px"},ingredients:{display:"flex",flexDirection:"column",width:"100%"},emptyIngredient:{width:"80px",height:"90px",boxSizing:"border-box",border:"2px solid #999999",margin:"0 auto"},thumbnail:{margin:"0 auto"},arrow:{position:"absolute",display:"block",top:"50%",marginTop:"-15px",width:0,height:0,right:0,borderStyle:"solid",borderWidth:"15px 15px 15px 0",borderColor:"transparent #2C2C2C transparent transparent",transition:"right .2s ease-out"}});return n.extend({name:"nv-analyze-sidebar",render:function(t){return o("div",{class:a("root")},o("div",{class:a("title")},_("Ingredient")),o("div",{class:a("ingredients")},t.ingredients&&0!==t.ingredients.length?t.ingredients.map(function(t){var e=s.factory({type:t});return o("div",{style:{position:"relative"}},o(i,{name:e.getTitle(),image:e.getIcon(),style:a("thumbnail"),selected:!0}),o("div",{class:a("arrow")}))}):o("div",{class:a("emptyIngredient")})))}})}.apply(e,i))||(t.exports=s)},function(t,e,n){"use strict";var i,s;i=[n(1),n(3),n(13),n(2),n(184),n(1115),n(1118),n(1120),n(237),n(238),n(224)],void 0===(s=function(t,e,n,i,s,o,a,r,l,c,u){var h=t.createElement;return s.extend({getExtraClassName:function(){return this.options.stepId||this.stepId},open:function(t,e){this.stepId=e,this._parent(t),"blacklist"===e?this.getBlacklistEntity():this.getMergeEntity()},getMergeEntity:function(){return l.getMergeEntity().done(function(t){this.entities=t,this.updateContent(),this.dispatchEvent("onUpdateHeaderTitle","associated")}.bind(this),function(t){this.elements.exportButton.hide(),this.elements.list.displayMessage(l.getErrorMessage(t))}.bind(this))},getBlacklistEntity:function(){return c.getBlacklistEntity(!0).done(function(t){this.entities=t,this.updateContent(),this.dispatchEvent("onUpdateHeaderTitle","blacklist")}.bind(this),function(t){this.elements.exportButton.hide(),this.elements.list.displayMessage(c.getErrorMessage(t))}.bind(this))},buildStep:function(){var t={entities:[],lightVersion:!0,events:{onResetMergeEntity:function(){this.getMergeEntity()}.bind(this),onResetBlacklistEntity:function(){this.getBlacklistEntity()}.bind(this),onEditEntity:function(t){this.dispatchEvent("onSubmitEntity",{stepId:this.stepId,data:t})}.bind(this),onRefreshWidget:function(){this.dispatchEvent("onRefreshWidget")}.bind(this)}},e="blacklist"===this.options.stepId?a:o;return this.elements.list=new e(t),[this.getHeaderButtons(),this.elements.list,this.elements.filter=new r({events:{onUpdateListingView:function(t){this.elements.list.filterListView(t)}.bind(this)},extraClassName:this.getExtraClassName()})]},updateContent:function(){this.elements.list.setMergeEntity(this.entities.rules),this.elements.filter.setMergeEntity(this.entities.counters),this.entities.rules.length?this.elements.exportButton.show():this.elements.exportButton.hide()},getHeaderButtons:function(){return h("div",{class:this.getClassNames("-header-buttons"),html:[h("div",{class:"add-buttons-menu",html:[h("div",{class:"add-buttons-menu-title",title:_("Add"),html:[h("div",{class:"uwa-icon","data-icon":"3"})]}),h("div",{class:"add-buttons-menu-inner",html:[h("span",{text:"blacklist"===this.options.stepId?_("Blocklist"):_("Associate"),events:{click:function(){this.dispatchEvent("onSubmitEntity",{stepId:this.options.stepId})}.bind(this)}}),h("span",{text:_("Import"),events:{click:function(){e.dispatchEvent(this.elements.file,"click")}.bind(this)}}),this.elements.file=h("input",{type:"file",name:"userfile",events:{change:function(){this.onImport()}.bind(this)}}).hide()]})]}),this.elements.exportButton=h("div",{class:"uwa-icon download",title:_("Export"),events:{click:function(){var t={pageId:i.Page.id,format:"csv"},e="blacklist"===this.options.stepId?i.Config.urls.base+"/api/blacklist/export?"+n.toQueryString(t):i.Config.urls.base+"/api/merge-entity/export?"+n.toQueryString(t);window.location.replace(e)}.bind(this)}}).hide()]})},displayNotif:function(t,e){var n=new u;this.elements.message.setContent(n),n.show({content:t,class:"simple"+(e?" error":""),delay:1e4})},onImport:function(){("blacklist"===this.options.stepId?c.importBlacklistEntity:l.importMergeEntity)({userfile:this.elements.file.files[0]}).done(this.onImportLoaded.bind(this),this.onImportFailed.bind(this))},onImportFailed:function(t){this.displayNotif(l.getErrorMessage(t),!0)},onImportLoaded:function(){var t=this.entities?this.entities.rules.length:0;("blacklist"===this.options.stepId?this.getBlacklistEntity.bind(this):this.getMergeEntity.bind(this))().done(function(){var e=this.entities.rules.length-t;this.displayNotif(_("{0} entities imported.").format(e)),this.dispatchEvent("onRefreshWidget"),this.updateContent()}.bind(this))}})}.apply(e,i))||(t.exports=s)},function(t,e,n){"use strict";var i,s;i=[n(1),n(3),n(157),n(237),n(312)],void 0===(s=function(t,e,n,i,s){var o=t.createElement;return s.extend({name:"nv-corpus-manager-listingview",init:function(t){t=t||{},this._parent(t)},getGridData:function(){var t=[],e=[];return this.entities.forEach(function(t){e=e.concat(t.getSources())}),this.getFilteredSources(e).forEach(function(e){t[e.getDestination()+e.getFacetTitle()]?t[e.getDestination()+e.getFacetTitle()].sources+=", "+e.getSource():t[e.getDestination()+e.getFacetTitle()]={destination:e.getDestination(),sources:e.getSource(),facet:e.getFacetTitle(),select:e,action:e,className:"entity_"+e.getEntity().getId()}}),t=Object.keys(t).map(function(e){return t[e]})},buildGrid:function(){this.elements.grid&&(this.elements.list.empty(),this.elements.grid.destroy());var t=this.getGridData();if(t.length){var e=this,i=function(t){return t.toLowerCase()},s={sortable:!0,orderBy:"destination",className:this.getClassNames("-datagrid"),columns:[{text:_("Entities"),dataIndex:"sources",className:"sources-column",format:this.getCell.bind(this),sortKey:i},{text:_("Associated with"),dataIndex:"destination",className:"destination-column",format:this.getCell.bind(this),sortKey:i},{text:_("Metric"),dataIndex:"facet",className:"facet-column",format:this.getCell.bind(this),sortKey:i}],data:t,scrollerOptions:{scrollableX:!1,events:{onScroll:function(){e.elements.listShadow&&(this.isMaxPosition("y")?e.elements.listShadow.hide():e.elements.listShadow.show())}}},events:{updateSortOptions:function(){this.updateTableDisplay()}.bind(this)}};this.options.lightVersion||s.columns.push({text:"",dataIndex:"select",className:"select-column",format:this.getSelectCell.bind(this),noSortable:!0}),s.columns.push({text:"",dataIndex:"action",className:"action-column",format:this.getActionCell.bind(this),noSortable:!0}),this.elements.grid=new n(s),setTimeout(function(){this.elements.grid.addScroller(),this.options.lightVersion?this.options.height&&this.elements.grid.getContent().getDimensions().height>this.options.height?this.elements.grid.getContent().setStyle("height",this.options.height):this.elements.grid.getContent().setStyle("height",this.elements.grid.getContent().getDimensions().height):this.updateTableDisplay(),this.elements.grid.elements.grid.getDimensions().height>this.elements.container.getDimensions().height&&this.elements.list.addContent(this.elements.listShadow=o("div",{class:"shadow"})),this.addTableEvents()}.bind(this),10),this.elements.list.setContent(this.elements.grid)}else this.filters?this.displayMessage(_("No result for your search."),this.elements.list,"Entitites"):this.displayWelcomeNotice(_("You don't have any Associated Entities."))},getActionCell:function(t){var n=o("div",{class:"action-buttons"});return t.isLocked()?(n.addClassName("locked"),n.setContent(o("div",{class:"uwa-icon lock"}))):n.setContent(o("div",{class:"uwa-icon edit edit-entity-button",title:_("Edit"),events:{click:function(n){e.stop(n),t.isLocked()||this.dispatchEvent("onEditEntity",t.getEntity())}.bind(this)}}),o("div",{class:"uwa-icon delete-entity-button","data-icon":"Ź",title:_("Delete"),events:{click:function(n){e.stop(n),this.onDeleteSources(t.getEntity().getSources())}.bind(this)}})),n},addTableEvents:function(){this.elements.container.getElements("table:not(.fixed-column) tr").forEach(function(t){t.getElements("td:not(.action-column)").forEach(function(n){var i=t.getElement(".edit");n.addEvent("click",function(){e.dispatchEvent(i,"click")})}),t.addEvent("mouseover",function(t){var n=e.getElement(t).getClosest("td").className.match(/entity_\w+/)[0];this.elements.container.getElements("."+n).forEach(function(t){t.getParent("tr").addClassName("highlighted")})}.bind(this)),t.addEvent("mouseleave",function(){this.elements.container.getElements(".highlighted").invoke("removeClassName","highlighted")}.bind(this))}.bind(this)),this.elements.container.removeEvent("resize"),this.elements.container.addEvent("resize",function(){this.buildGrid()}.bind(this))},onDeleteSources:function(t){i.deleteSources(t).done(function(){this.resetList(),this.dispatchEvent("onResetMergeEntity"),this.dispatchEvent("onRefreshWidget")}.bind(this))}})}.apply(e,i))||(t.exports=s)},function(t,e,n){"use strict";var i,s;i=[n(122),n(4),n(1117)],void 0===(s=function(t,e,n){function i(t){return function(){return this.get(t)}}return t.extend({defaults:{id:"",facet:"",facetTitle:"",sources:[],destination:""},setup:function(){this.get("id")||this.set("id",e.uniqueID());var t=this.get("sources").map(function(t){return t.entity=this,new n(t)}.bind(this));this.set("sources",t)},getId:i("id"),getFacet:i("facet"),getFacetTitle:function(){return this.get("facetTitle")||this.get("facet")},getSources:i("sources"),getSourcesList:function(){return this.get("sources").map(function(t){return t.getSource()})},getSourcesIds:function(){return this.getSources().map(function(t){return t.getId()})},getSourceByName:function(t){return this.getSources().detect(function(e){return e.getSource()===t})},getDestination:i("destination")})}.apply(e,i))||(t.exports=s)},function(t,e,n){"use strict";var i,s;i=[n(122),n(2)],void 0===(s=function(t,e){function n(t){return function(){return this.get(t)}}return t.extend({defaults:{id:"",facet:"",facetTitle:"",source:"",destination:"",isSelected:!1,isLocked:!1},getId:n("id"),getEntity:n("entity"),getFacet:n("facet"),getFacetTitle:function(){return this.getEntity().getFacetTitle()},getSource:n("source"),getDestination:n("destination"),getPageId:n("pageId"),isSelected:n("isSelected"),isLocked:function(){return 0===this.getPageId()&&!e.Page.isDraft&&!e.Page.isMaster}})}.apply(e,i))||(t.exports=s)},function(t,e,n){"use strict";var i,s;i=[n(1),n(3),n(157),n(238),n(312)],void 0===(s=function(t,e,n,i,s){var o=t.createElement;return s.extend({name:"nv-corpus-manager-listingview",init:function(t){t=t||{},this._parent(t)},getGridData:function(){var t,e=[],n=[];return this.entities.filter(function(t){return t}).forEach(function(t){n=n.concat([t.getSources()])}),this.getFilteredSources(n).forEach(function(n){if("author"!==n.getFacet())t=n.get("itemLink")||n.getSource();else{var i=n.getSource().split(" "),s=i.shift(),a=i.join(" ");t=(t=a+" "+_("on")+" "+s).replace(/\*/,_("all domains"))}e[n.getSource()+n.getFacetTitle()]={source:"item"===n.getFacet()?o("a",{text:t,href:t,attributes:{target:"_blank"}}):t,facet:n.getFacetTitle(),select:n,action:n,className:"entity_"+n.getId()}}),e=Object.keys(e).map(function(t){return e[t]})},buildGrid:function(){this.elements.grid&&(this.elements.list.empty(),this.elements.container.setContent(this.elements.list),this.elements.grid.destroy());var t=this.getGridData();if(t.length){var e=this,i=function(t){return t.getText?t.getText().toLowerCase():t.toLowerCase()},s={sortable:!0,orderBy:"source",className:this.getClassNames("-datagrid"),columns:[{text:_("Entity"),dataIndex:"source",className:"sources-column",format:this.getCell.bind(this),sortKey:i},{text:_("Metric"),dataIndex:"facet",className:"facet-column",format:this.getCell.bind(this),sortKey:i}],data:t,scrollerOptions:{scrollableX:!1,events:{onScroll:function(){e.elements.listShadow&&(this.isMaxPosition("y")?e.elements.listShadow.hide():e.elements.listShadow.show())}}},events:{updateSortOptions:function(){this.updateTableDisplay()}.bind(this)}};this.options.lightVersion||s.columns.push({text:"",dataIndex:"select",className:"select-column",format:this.getSelectCell.bind(this),noSortable:!0}),s.columns.push({text:"",dataIndex:"action",className:"action-column",format:this.getActionCell.bind(this),noSortable:!0}),this.elements.grid=new n(s),setTimeout(function(){this.elements.grid.addScroller(),this.options.lightVersion?this.options.height&&this.elements.grid.getContent().getDimensions().height>this.options.height?this.elements.grid.getContent().setStyle("height",this.options.height):this.elements.grid.getContent().setStyle("height",this.elements.grid.getContent().getDimensions().height):this.updateTableDisplay(),this.elements.grid.elements.grid.getDimensions().height>this.elements.container.getDimensions().height&&this.elements.list.addContent(this.elements.listShadow=o("div",{class:"shadow"})),this.addTableEvents()}.bind(this),10),this.elements.list.setContent(this.elements.grid)}else this.filters?this.displayMessage(_("No result for your search."),this.elements.list,_("Blocklists")):this.displayWelcomeNotice(_("You don't have any Blocklists."))},getActionCell:function(t,n){var i=o("div",{class:"action-buttons action-buttons-"+n});return t.isLocked()?(i.addClassName("locked"),i.setContent(o("div",{class:"uwa-icon lock"}))):i.setContent(o("div",{class:"uwa-icon edit edit-entity-button edit-entity-button-"+n,title:_("Edit"),events:{click:function(n){e.stop(n),t.isLocked()||this.dispatchEvent("onEditEntity",t.getSources())}.bind(this)}}),o("div",{class:"uwa-icon delete-entity-button delete-entity-button-blacklist","data-icon":"Ź",title:_("Delete"),events:{click:function(n){e.stop(n),this.onDeleteSources(t.getSources())}.bind(this)}})),i},addTableEvents:function(){this.elements.container.getElements("table:not(.fixed-column) tr").forEach(function(t){t.getElements("td").forEach(function(n){if(!(n.hasClassName("sources-column")&&n.getElement("a"))||n.hasClassName("action-column")||n.hasClassName("facet-column")){var i=t.getElement(".edit");n.addEvent("click",function(){e.dispatchEvent(i,"click")})}}),t.addEvent("mouseover",function(t){var n=e.getElement(t).getClosest("td").className.match(/entity_\w+/)[0];this.elements.container.getElements("."+n).forEach(function(t){t.getParent("tr").addClassName("highlighted")})}.bind(this)),t.addEvent("mouseleave",function(){this.elements.container.getElements(".highlighted").invoke("removeClassName","highlighted")}.bind(this))}.bind(this)),this.elements.container.removeEvent("resize"),this.elements.container.addEvent("resize",function(){this.buildGrid()}.bind(this))},onDeleteSources:function(t){i.deleteSources(t).done(function(){this.resetList(),this.dispatchEvent("onResetBlacklistEntity"),this.dispatchEvent("onRefreshWidget")}.bind(this))}})}.apply(e,i))||(t.exports=s)},function(t,e,n){"use strict";var i,s;i=[n(122),n(4),n(2),n(99)],void 0===(s=function(t,e,n,i){function s(t){return function(){return this.get(t)}}return t.extend({defaults:{id:"",facet:"",facetTitle:"",value:"",pageId:""},setup:function(){this.get("id")||this.set("id",e.uniqueID()),this.set("sources",this)},getId:s("id"),getFacet:s("facet"),getFacetTitle:function(){return this.get("facetTitle")||i.getFacetTitle(this.get("facet"))},getFormatedDomain:function(){var t;return"author"===this.getFacet()&&(t=this.getSource().split(" ")[0]),t},getFormatedSource:function(){var t=this.get("itemLink")||this.getSource();return"author"===this.getFacet()&&(t=t.split(" ").slice(1).join(" ")),t},getSources:s("sources"),getSource:s("value"),getPageId:s("pageId"),isLocked:function(){return 0===this.getPageId()&&!n.Page.isDraft&&!n.Page.isMaster}})}.apply(e,i))||(t.exports=s)},function(t,e,n){"use strict";var i,s;i=[n(1),n(110),n(23),n(8),n(3),n(236),n(457)],void 0===(s=function(t,e,n,i,s,o,a){return a.extend({name:"nv-filteringview-corpus",facetsAccordion:[{title:_("Metrics"),id:"facets"}],init:function(t){this._parent(t),this.availableFacets={}},buildSkeleton:function(){this.elements.container=t.createElement("div",{class:this.getClassNames(),html:[this.elements.filtersContainer=t.createElement("div",{class:this.getClassNames("-container"),html:[this.elements.filtersAccordion=new e({className:this.getClassNames("-accordion")+" dark",multiSelect:!0})]})]}),this.elements.scroller=new n({element:this.elements.filtersContainer})},addSearchAccordion:function(){t.createElement("div",{class:"inner",html:[this.elements.searchText=new i.Text({attributes:{placeholder:_("Search")}}),this.elements.deleteButton=t.createElement("div",{class:"delete-button",title:_("Delete")}).hide(),this.elements.searchButton=t.createElement("div",{class:"search-button",title:_("Search")})]}).inject(this.elements.container,"top")},addOtherAccordion:function(){this.facetsAccordion.forEach(function(t){this.elements.filtersAccordion.addItem(t.id,{text:"facets"===t.id?_("Metrics"):t.title})}.bind(this))},setMergeEntity:function(t){this.availableFacets=t,this.getContent().toggle(Object.keys(this.availableFacets).length>0),this.updateOtherAccordionContent()},addSelectionAccordion:function(){this.elements.filtersAccordion.hasItem("selection")||(this.elements.filtersAccordion.addItem("selection",{text:_("Your selection"),content:t.createElement("div").addContent(t.createElement("div",{class:"inner"}),t.createElement("div",{class:"clear",text:_("Clear all filters"),events:{click:this.unSelectAll.bind(this)}})),where:"top"}),this.elements.filtersAccordion.selectItem("selection"))},getFacetsElm:function(t){var e=[];for(var n in this.availableFacets)if(this.availableFacets.hasOwnProperty(n)){var i=new o({title:this.availableFacets[n].title,id:t+"/"+n,value:n,numArticles:this.availableFacets[n].nbEntities,category:t}).addEvents({onSelect:this.onSelectFacet.bind(this),onUnselect:this.onUnselectFacet.bind(this)});e.push(i)}return e},onSelectFacet:function(t){var e=s.findElement(t,".facet");this.selectFacet(e),this.onUpdateFilters()},onUnselectFacet:function(t){var e=s.findElement(t,".facet");this.unselectFacet(e),this.onUpdateFilters()},selectFacet:function(t){var e=t.getAttribute("data-id"),n=JSON.parse(t.getAttribute("data-value")),i=t.getAttribute("data-category");this.addSelectionAccordion();var s=this.elements.filtersContainer.getElement(".uwa-accordion-item.selection .inner");s.getElement('div[data-id="'+e+'"]')||new o({title:this.availableFacets[n].title,value:n,id:e,category:i,isSelection:!0}).addEvent("onClose",this.onUnselectFacet.bind(this)).inject(s);this.filters[i]||(this.filters[i]=[]),this.filters[i].push(n)},unselectFacet:function(t){var e=t.getAttribute("data-id"),n=t.getAttribute("data-category"),i=JSON.parse(t.getAttribute("data-value"));this.elements.filtersContainer.getElements('div[data-id="'+e+'"]').forEach(function(t){t.getParent("li.selection")?t.remove():t.removeClassName("facet-selected")});var s=this.elements.filtersContainer.getElement("li.selection .inner");s&&s.getChildren().length<=0&&(this.elements.filtersAccordion.addEvent("onAccordionItemClosed",function(t){"selection"===t.name&&this.elements.filtersAccordion.removeItem("selection")}.bind(this)),this.elements.filtersAccordion.unselectItem("selection")),this.filters[n]=this.filters[n].filter(function(t){return t!==i})}})}.apply(e,i))||(t.exports=s)},function(t,e,n){"use strict";var i,s;i=[n(1),n(8),n(41),n(184),n(99),n(237),n(1122),n(0),n(65)],void 0===(s=function(t,e,n,i,s,o,a,r,l){a=a.default;var c=t.createElement;return i.extend({init:function(t){this._parent(t),this.data={facet:this.isEdit()&&this.options.data.getFacet()||this.options.defaultValues&&this.options.defaultValues.facet,tagSelectionData:this.isEdit()?this.options.data.getSourcesList():this.options.defaultValues&&this.options.defaultValues.sources?this.options.defaultValues.sources:[],associatedTag:this.isEdit()?this.options.data.getDestination():""},this.availableFacets={},this.inputOptions=null},isCloseableStep:function(){return!1},isEdit:function(){return Boolean(this.options.data)},getExtraClassName:function(){return"add-entity dark-background"},getTitle:function(){return _("Associate Entities")},getHeaderTitle:function(){return c("span",{html:" • "+this.getTitle()+(this.isEdit()?' "'+this.options.data.getDestination()+'"':"")})},getMergeEntity:function(){return o.getMergeEntity().done(function(t){this.entities=t}.bind(this),function(t){this.displayError(o.getErrorMessage(t))}.bind(this))},getDescription:function(){return _("Associating entities merges them into a single entity name.")},open:function(t){this._parent(t,this.options),this.getMergeEntity(),this.getFacets()},buildStep:function(){return[this.elements.spinner=this.getSpinner(),this.elements.form=c("div",{class:this.getClassNames("-form")}).hide()]},onChange:function(t){this.data=t,this.updateSubmitButtonState()},buildForm:function(){this.elements.form.setContent(r.render(r.h(l,null,r.h(a,{ref:function(t){this._form=t}.bind(this),onChange:this.onChange.bind(this),entities:this.entities,facetInputOptions:this.facetInputOptions,facet:this.data.facet,tagSelectionData:this.data.tagSelectionData,associatedTag:this.data.associatedTag}))))},getSpinner:function(){return new n({autostart:!0,size:30})},buildNavigation:function(){return this.elements.deleteButton=new e.Button({value:_("Delete"),className:"medium delete dark-grey iconl left-button",events:{onClick:this.onDelete.bind(this)}}),this.elements.message=c("div",{class:this.getClassNames("-message")}),this.elements.submitButton=new e.Button({value:this.isEdit()?_("Save"):_("Associate"),className:"medium green right-button",events:{onClick:this.onAdd.bind(this)}}),this.elements.cancelButton=c("span",{text:_("Cancel"),class:"cancel",events:{click:function(){this.onDoneAction()}.bind(this)}}),this.isEdit()||this.elements.submitButton.setDisabled(!0),c("div",{class:this.getClassNames("-nav-wrapper")}).setContent(this.isEdit()?this.elements.deleteButton:"",this.elements.message,this.elements.cancelButton,this.elements.submitButton)},updateSubmitButtonState:function(){var t=!this.data.tagSelectionData.length||!this.data.associatedTag;this.elements.submitButton.setDisabled(t)},updateNavigationState:function(t){this.elements.submitButton.setDisabled(t),this.elements.deleteButton.setDisabled(t)},getErrorMessage:function(t){return c("div",{class:"uwa-message error",text:t||_("An error occured, please try later.")})},displayError:function(t){this.elements.spinner.stop(),this.elements.form.setContent(this.getErrorMessage(t)),this.elements.form.show()},updateContent:function(){var t=Object.keys(this.availableFacets),e=[];t.forEach(function(t){t.match(/(pub_date|emotion|sentiment|term)/)||e.push({label:s.getFacetTitle(t),value:t,selected:this.isEdit()&&this.options.data.getFacet()===t||this.options.defaultValues&&this.options.defaultValues.facet===t})}.bind(this)),this.facetInputOptions=e,this.buildForm(),this.elements.spinner.stop(),this.elements.form.show()},getFacets:function(){s.loadFacetsWithValues().done(function(t){this.availableFacets=t,this.updateContent()}.bind(this))},getSubmitOptions:function(){var t={},e=this.data.tagSelectionData,n=this.data.associatedTag.escapeHTML(),i=this.data.facet;if(this.isEdit()){var s=[],o=[],a=[];this.options.data.getSources().forEach(function(t){e.includes(t.getSource())||o.push(t.getId())}),e.forEach(function(t){this.options.data.getSourcesList().includes(t)?n===this.options.data.getDestination()&&this.options.data.getFacet()===i||a.push({id:this.options.data.getSourceByName(t).getId(),source:t,destination:n,facet:i}):s.push({source:t,destination:n,facet:i})}.bind(this)),s.length&&(t.create=s),o.length&&(t.delete=o),a.length&&(t.update=a)}else t.create=e.map(function(t){return{source:t,destination:n,facet:i}});return t},onAdd:function(){this.updateNavigationState(!0);var t=this.getSubmitOptions();Object.keys(t).length>0?o.submitMergeEntity(t).done(this.onDoneAction.bind(this),this.onFailAction.bind(this)):this.onDoneAction()},onDelete:function(){this.updateNavigationState(!0),o.deleteSources(this.options.data.getSources()).done(this.onDoneAction.bind(this),this.onFailAction.bind(this))},onDoneAction:function(){this.onCloseStep(this.options.stepId),this.dispatchEvent("onRefreshWidget")},onFailAction:function(t){this.updateNavigationState(!1),this.elements.message.setContent(this.getErrorMessage(o.getErrorMessage(t)))}})}.apply(e,i))||(t.exports=s)},function(t,e,n){"use strict";n.r(e);var i=n(18),s=n.n(i),o=n(3),a=n.n(o),r=n(0),l=n.n(r),c=n(5),u=n.n(c),h=n(11),d=n.n(h),p=n(43),m=n.n(p),f=l.a.h,g=m.a.extend({init:function(t){this._parent(),this._entities=t},getSuggestions:function(t,e){var n=t.slice(0,e),i=/\w*$/.exec(n)[0],o=new RegExp("^"+s.a.escapeRegExp(i),"i");return i.length&&this._entities.rules?this._entities.rules.filter(function(t){return o.test(t.getDestination())&&t.getDestination()!==i.length}).map(function(t){return{displayValue:t.getDestination(),start:e-i.length,end:e,fullValue:t.getDestination(),lastWord:i}}):[]},renderSuggestion:function(t){var e=t.displayValue;return[{tag:"strong",text:e.slice(0,t.lastWord.length)},{tag:"span",text:e.slice(t.lastWord.length)}]}}),v=u.a.extend({name:"nv-corpus-manager-step",init:function(t){this._parent(t);var e=t.tagSelectionData;this.setState({facet:t.facet,tagSelectionData:e,associatedTag:t.associatedTag,inputEntitiesVisible:0===e.length,inputAssociatedVisible:""===t.associatedTag}),this.renderFacet=this.renderFacet.bind(this),this.renderAssociateTags=this.renderAssociateTags.bind(this),this.onMetricChange=this.onMetricChange.bind(this),this.renderArrow=this.renderArrow.bind(this),this.renderEntities=this.renderEntities.bind(this),this.renderEntitiesForm=this.renderEntitiesForm.bind(this),this.renderAssociateWith=this.renderAssociateWith.bind(this),this.removeTag=this.removeTag.bind(this),this.onSubmitAssociate=this.onSubmitAssociate.bind(this),this.addTag=this.addTag.bind(this),this.onFormChange=this.onFormChange.bind(this)},onFormChange:function(){var t=this.state,e={facet:t.facet,tagSelectionData:t.tagSelectionData,associatedTag:t.associatedTag};this.props.onChange(e)},addTag:function(t){if("keyup"===t.type&&"return"===a.a.whichKey(t)||"blur"===t.type){var e=t.target.value,n=this.state.tagSelectionData;n.indexOf(e)<0&&""!==e.trim()&&(n.push(e),this.setState({tagSelectionData:n,inputEntitiesVisible:!1},this.onFormChange))}},removeTag:function(t){var e=this.state.tagSelectionData.filter(function(e){return t!==e});this.setState({tagSelectionData:e,inputEntitiesVisible:0===e.length},this.onFormChange)},onMetricChange:function(t){this.setState({facet:t.target.value},this.onFormChange)},renderFacet:function(){return f("div",{class:this.name+"-form-item facet-input"},f("p",null,_("Metric")),f(d.a.Select,{options:[{label:_("Choose one"),value:""}].concat(this.props.facetInputOptions),events:{onChange:this.onMetricChange}}))},renderEntities:function(){var t=this;return this.state.tagSelectionData.map(function(e,n,i){return f("li",{class:"tree"+(0===n?" first-child":t.state.inputEntitiesVisible||n!==i.length-1?"":" last-child")},f(d.a.Tag,{value:e,className:"green",closable:!0,clickable:!1,events:{onClose:function(){t.removeTag(this.options.value)}}}))})},renderEntitiesForm:function(){var t=f(d.a.Text,{value:"",attributes:{placeholder:_("Enter a name"),events:{blur:this.addTag,keyup:this.addTag}}}),e=f("span",{class:this.name+"-add-button uwa-icon large","data-icon":3,onClick:function(){this.setState({inputEntitiesVisible:!0})}.bind(this)});return f("li",{class:this.state.inputEntitiesVisible?"tree tree-editing last-child"+(0===this.state.tagSelectionData.length?" first-child":""):""},this.state.inputEntitiesVisible?t:e)},onSubmitAssociate:function(t){this.setState({inputAssociatedVisible:!1,associatedTag:t.target.value},this.onFormChange)},renderAssociateWith:function(){return f("div",{class:this.name+"-form-item destination-input"},f("div",{class:"destination-input-wrapper"},f("p",null,_("Associated with")),this.state.inputAssociatedVisible?f(d.a.Autocomplete,{className:"large",placeholder:_("Enter a name"),value:this.state.associatedTag,adaptor:new g(this.props.entities),events:{onChange:this.onSubmitAssociate},attributes:{events:{blur:this.onSubmitAssociate,keyup:this.onSubmitAssociate}}}):f(d.a.Tag,{className:"green large",value:this.state.associatedTag,closable:!0,clickable:!1,events:{onClose:function(){this.setState({inputAssociatedVisible:!0})}.bind(this)}})))},renderArrow:function(){var t=0===this.state.tagSelectionData.length;return f("div",{class:"arrow"},f("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 32",width:"30",height:"30"},f("path",{d:"M3 3 L19 16 L3 29 z",fill:t?"#282828":"#fff",stroke:"rgba(56,56,56,0.6)","stroke-linejoin":"round","stroke-width":6}),f("path",{d:"M3 3 L19 16 L3 29 z",fill:t?"#282828":"#fff"})))},renderAssociateTags:function(){return this.state.facet&&f("div",{class:this.name+"-form-content"},f("div",{class:this.name+"-form-item sources-input"},f("div",{class:"sources-input-wrapper"},f("p",null,_("Entities")),f("ul",null,this.renderEntities(),this.renderEntitiesForm()))),this.renderArrow(),this.renderAssociateWith())},render:function(){var t=this.renderFacet(),e=this.renderAssociateTags();return f("div",null,t,e)}});e.default=v},function(t,e,n){"use strict";var i,s;i=[n(1),n(13),n(18),n(16),n(23),n(8),n(71),n(43),n(2),n(4),n(6),n(156),n(36),n(41),n(184),n(99),n(238)],void 0===(s=function(t,e,n,i,s,o,a,r,l,c,u,h,d,p,m,f,g){var v=t.createElement;return m.extend({init:function(t){this._parent(t),this.availableFacets={},this.cacheSuggest={},this.cacheFeeds={},this.cacheStreams={}},isCloseableStep:function(){return!1},isEdit:function(){return Boolean(this.options.data)},getExtraClassName:function(){return"add-entity dark-background"},getTitle:function(){return _("Blocklist an Entity")},getHeaderTitle:function(){return v("span",{text:" • "+this.getTitle()+(this.isEdit()?' "'+this.options.entity.getDestination()+'"':"")})},getDescription:function(){return _("Enter the entity you want to block from your Dashboard.<br> Entity will no more be displayed in your Analytics and Tracked Topic apps.")},open:function(t){this._parent(t,this.options),this.getFacets()},buildStep:function(){return[this.elements.spinner=this.getSpinner(),this.elements.form=v("div",{class:this.getClassNames("-form")}).hide()]},buildForm:function(){var t=this;this.elements.form.setContent(new s({shadows:!0,element:v("div",{html:[v("div",{class:this.getClassNames("-form-item")+" facet-input-blacklist",html:[v("div",{class:this.getClassNames("-form-item")+" facet-container-blacklist",html:[v("p",{class:this.getClassNames("-label-container"),html:v("span",{class:this.getClassNames("-label"),text:_("Metric")})}),this.elements.facetInput=new o.Select({events:{onChange:this.updateSubmitButtonState.bind(this)}})]}),v("div",{class:this.getClassNames("-form-item")+" facet-container-blacklist",html:[v("p",{class:this.getClassNames("-label-container"),html:v("span",{class:this.getClassNames("-label"),text:_("Entity")})}),this.elements.sourcesInput=new a({adaptor:this.getAdaptor(),inputOptions:{value:this.isEdit()?this.options.data.getFormatedSource():"",events:{onKeyDown:this.updateSubmitButtonState.bind(this)}}})]}),this.elements.domain=v("div",{class:this.getClassNames("-form-item")+" facet-container-blacklist facet-container-blacklist-authordomain",html:[v("p",{class:this.getClassNames("-label-container"),html:v("span",{class:this.getClassNames("-label"),text:_("Domain")})}),v("div",{class:this.getClassNames("-form-item")+" facet-container-blacklist-authordomain-form",html:[v("div",{html:[this.elements.domainAll=new o.Radio({className:"green",events:{onChange:function(){this.elements.domainSpecific.check(!1),this.elements.domainInput.getInputControl().setDisabled()}.bind(this)},attributes:{checked:!this.isEdit()||this.options.data&&"*"===this.options.data.getFormatedDomain()}}),v("span",{class:"label-radio",text:_("All")})]}),v("div",{html:[this.elements.domainSpecific=new o.Radio({className:"green",events:{onChange:function(){this.elements.domainAll.check(!1),this.elements.domainInput.getInputControl().setDisabled(!1),this.updateSubmitButtonState()}.bind(this)},attributes:{checked:this.isEdit()&&"*"!==this.options.data.getFormatedDomain()}}),v("span",{class:"label-radio",text:_("Specific")})]}),this.elements.domainInput=new a({adaptor:this.getAdaptor("domain"),inputOptions:{value:this.isEdit()&&"*"!==this.options.data.getFormatedDomain()?this.options.data.getFormatedDomain():"",attributes:{placeholder:_("Domain name")}},events:{onChange:function(){this.updateSubmitButtonState()}.bind(this)}})]})]})]})]})})),this.elements.sourcesInput.addEvent("onHideSuggestions",function(){t.updateSubmitButtonState()}),this.syncField()},getSuggestions:function(t,e){var n=t.slice(0,e);return this.availableFacets[this.getCurrentFacet()].categories.filter(function(t){return!n||t.title.toLowerCase().includes(n.toLowerCase())}).map(function(t){return{displayValue:t.title,start:e-n.length,end:e,fullValue:t.title,lastWord:n}})},getDomainSuggestions:function(t,e){var n=t;return this.availableFacets.domain.categories.filter(function(t){return!n||t.title.toLowerCase().includes(n.toLowerCase())}).map(function(t){return{displayValue:t.title,start:e-n.length,end:e,fullValue:t.title,lastWord:n}})},getAdaptor:function(n){return r.extend({getSuggestions:"domain"===n?this.getDomainSuggestions.bind(this):this.getSuggestions.bind(this),renderSuggestion:function(n){var i=n.displayValue;return t.extendElement(e.xmlToHtml("<span>"+i.replace(new RegExp(n.lastWord,"gi"),"<strong>$&</strong>")+"</span>"))}})},getSpinner:function(){return new p({autostart:!0,size:30})},buildNavigation:function(){return this.elements.deleteButton=new o.Button({value:_("Delete"),className:"medium delete dark-grey iconl left-button",events:{onClick:this.onDelete.bind(this)}}),this.elements.message=v("div",{class:this.getClassNames("-message")}),this.elements.submitButton=new o.Button({value:this.isEdit()?_("Save"):_("Blocklist"),className:"medium green right-button",events:{onClick:this.onAdd.bind(this)}}),this.elements.cancelButton=v("span",{text:_("Cancel"),class:"cancel",events:{click:function(){this.onDoneAction()}.bind(this)}}),this.isEdit()||this.elements.submitButton.setDisabled(!0),v("div",{html:[this.isEdit()?this.elements.deleteButton:"",this.elements.message,this.elements.cancelButton,this.elements.submitButton],class:this.getClassNames("-nav-wrapper")})},updateSubmitButtonState:function(){var t=!this.elements.sourcesInput.getValue();if(this.elements.domainInput.getInputElement().setStyles({visibility:"author"===this.getCurrentFacet()?"visible":"hidden"}),!t&&"author"===this.getCurrentFacet()){var e=this.elements.domainSpecific.isChecked()&&this.elements.domainInput.getValue().length;t=!(this.elements.domainAll.isChecked()||e)}this.elements.submitButton.setDisabled(t),this.syncField()},updateNavigationState:function(t){this.elements.submitButton.setDisabled(t),this.elements.deleteButton.setDisabled(t)},getCurrentFacet:function(){return this.elements.facetInput.getValue()[0]},getErrorMessage:function(t){return v("div",{class:"uwa-message error",text:t||_("An error occured, please try later.")})},displayError:function(t){this.elements.spinner.stop(),this.elements.form.setContent(this.getErrorMessage(t)),this.elements.form.show()},updateContent:function(){var t=Object.keys(this.availableFacets),e=[];t.forEach(function(t){t.match(/(pub_date|emotion|sentiment)/)||e.push({label:f.getFacetTitle(t),value:t,selected:this.isEdit()&&this.options.data.getFacet()===t||this.options.defaultValues&&this.options.defaultValues.facet===t})}.bind(this)),this.buildForm(),this.elements.spinner.stop(),this.elements.form.show(),this.elements.facetInput.putOptions(e),this.syncField()},syncField:function(){this.elements.sourcesInput.getInputElement().setAttribute("placeholder",f.getFacetSubject(this.getCurrentFacet())),this.elements.domain.setStyles({display:"author"===this.getCurrentFacet()?"flex":"none"}),this.elements.domainInput.getInputControl().setDisabled(!this.elements.domainSpecific.isChecked())},getFacets:function(){f.getCorpusFacetsWithValues(!0).done(function(t){var e={};f.getCorpusFacets().forEach(function(n){var i=n.name;!1===n.readOnly&&(e[i]=t[i])}),this.availableFacets=e,this.updateContent()}.bind(this))},getSubmitOptions:function(){var t={value:this.elements.sourcesInput.getValue(),facet:this.getCurrentFacet()};if("author"===this.getCurrentFacet()){var e=this.elements.domainAll.isChecked()?"*":this.elements.domainInput.getValue();t.value=e+" "+t.value}return t},getUpdateOptions:function(){var t,e,n={},i=this.getCurrentFacet(),s=this.elements.sourcesInput.getValue(),o=this.options.data.getFacet(),a=this.options.data.getFormatedSource();return"author"===i?(t=this.elements.domainAll.isChecked()?"*":this.elements.domainInput.getValue(),e=this.options.data.getFormatedDomain()):t=e=!1,(o!==i||a!==s||e!==t)&&(n={id:this.options.data.getId(),value:s,facet:i,pageId:this.options.data.getPageId()},"author"===i&&(n.value=t+" "+n.value)),n},onAdd:function(){this.updateNavigationState(!0);var t=this.isEdit()?this.getUpdateOptions():this.getSubmitOptions(),e=this.isEdit()?g.updateBlacklistEntity:g.submitBlacklistEntity;Object.keys(t).length>0?e(t).done(this.onDoneAction.bind(this),this.onFailAction.bind(this)):this.onDoneAction()},onDelete:function(){this.updateNavigationState(!0),g.deleteSources(this.options.data).done(this.onDoneAction.bind(this),this.onFailAction.bind(this))},onDoneAction:function(){this.onCloseStep(this.options.stepId),this.dispatchEvent("onRefreshWidget")},onFailAction:function(t){this.updateNavigationState(!1),this.elements.message.setContent(this.getErrorMessage(g.getErrorMessage(t)))}})}.apply(e,i))||(t.exports=s)},function(t,e,n){"use strict";n.r(e);var i=n(16),s=n.n(i),o=n(1),a=n.n(o),r=n(0),l=n.n(r),c=n(5),u=n.n(c),h=n(6),d=n.n(h),p=n(119),m=n(55),f=n.n(m),g=n(183),v=n.n(g),b=n(2),y=n.n(b),w=n(36),x=n.n(w),C=n(34),S=n.n(C),E=n(12);function k(){for(var t=new Date,e=[[_("Date"),_("Mobile"),_("Laptop"),_("Tablet")]],n=0;n<20;n++){0!==n&&(t=x.a.add(t,"-10days"));for(var i=[x.a.formatDateForHumanQuery(t)],s=0;s<3;s++)i.push(Math.floor(250*Math.random())+200);e.push(i)}return(e=e.map(function(t){return t.join(", ")})).join("\n")}var T=function(t){var e,n;function i(e){var n;return(n=t.call(this,e)||this)._onFormChange=n._onFormChange.bind(function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(n)),n}n=t,(e=i).prototype=Object.create(n.prototype),e.prototype.constructor=e,e.__proto__=n;var s=i.prototype;return s.render=function(){var t=this;return l.a.h("div",{class:"spreadsheet-form import-data"},l.a.h(E.d,{onInit:function(t){t.values={uploadType:"local",pasteSource:k()}},onChange:this._onFormChange,render:function(e){return l.a.h(S.a,{title:_("Import data")},t._renderLocal(e),t._renderCloud(e),t._renderPaste(e))}}))},s._renderLocal=function(t){return l.a.h(S.a.Item,{class:"no-padding"},l.a.h("label",null,l.a.h(E.e,{model:t.field("uploadType"),value:"local"}),l.a.h("span",null,_("Local file")),l.a.h("span",{class:"step-infos"}," ("+_("One-time upload")+")")),"local"===t.values.uploadType&&l.a.h(E.h,{model:t.field("localFile"),description:_("Format: .xls, .xlsx, .csv, .ods, .txt, .tsv (10MB max)")},l.a.h(E.c,null)))},s._renderCloud=function(t){var e=this.props.needPassword;return l.a.h(S.a.Item,{class:"no-padding"},l.a.h("label",null,l.a.h(E.e,{model:t.field("uploadType"),value:"cloud"}),l.a.h("span",null,_("Cloud")),l.a.h("span",{class:"step-infos"}," ("+(y.a.isAllowed("misodata_retention")?_("Automatically synced"):_("One-time upload"))+")")),"cloud"===t.values.uploadType&&l.a.h("div",null,l.a.h(E.h,{model:t.field("cloudSource"),description:_("Support : http, https, ftp (and time matching variables).")},l.a.h(E.j,{model:t.field("cloudSource"),attributes:{placeholder:_("File url")}})),e&&l.a.h("div",null,l.a.h(E.h,{model:t.field("cloudLogin")},l.a.h(E.j,{attributes:{placeholder:_("Login")}})),l.a.h(E.h,{model:t.field("cloudPassword")},l.a.h(E.j,{attributes:{type:"password",autocomplete:"new-password",placeholder:_("Password")}})))))},s._renderPaste=function(t){return l.a.h(S.a.Item,{class:"no-padding"},l.a.h("label",null,l.a.h(E.e,{model:t.field("uploadType"),value:"paste"}),l.a.h("span",null,_("Paste data")),l.a.h("span",{class:"step-infos"}," ("+_("One-time upload")+")")),"paste"===t.values.uploadType&&l.a.h(E.h,{model:t.field("pasteSource")},l.a.h(E.j,{containerStyle:{height:"120px",width:"100%",boxSizing:"border-box"},multiline:!0})))},s._onFormChange=function(t){var e,n,i=t.values;switch(i.uploadType){case"local":e={uploadType:"local"},n=i.localFile;break;case"cloud":e={uploadType:"cloud",crawler:{login:i.cloudLogin,password:i.cloudPassword}},n=i.cloudSource;break;case"paste":e={uploadType:"paste"},n=i.pasteSource}this.props.onConfigChange({query:e,source:n})},i}(u.a),A=n(44),I=n(11),N=n(14),D=n.n(N);function O(t){var e={strategy:t.strategy,indexColumn:String(Number(t.parser.indexColumn)+1),aggregationMethod:t.parser.aggregationMethod};if("*"!==t.parser.columns){var n=t.parser.columns.split(",").map(function(t){return Number(t)+1});n.some(isNaN)?e.columns=t.parser.columns:e.columns=n.join(",")}else e.columns=t.parser.columns;return void 0!==t.parser.sheet&&(e.sheet=String(Number(t.parser.sheet)+1)),"TimeSeries"===t.strategy&&Object.assign(e,{dateFormat:t.parser.dateFormat}),"cloud"===t.uploadType&&(t.crawler&&t.crawler.resetData&&(e.resetData=t.crawler.resetData),e.update_scheme="manual",t.crawler&&"auto"===t.crawler.type&&(e.update_scheme=t.crawler.type,e.step=String(t.crawler.step),e.unit=t.crawler.unit)),e}var P=D.a.namespace("Analyze_Wizard_Spreadsheet_ConfigStep").addRules({loading:{display:"flex",justifyContent:"center"},cloudSchemeSelect:{display:"flex",margin:"5px 35px"},cloudSchemeSelectInput:{margin:"5px"},reportingLine:{display:"flex",margin:"0 0 23px",whiteSpace:"nowrap",lineHeight:"1.5",":last-child":{margin:0}},reportingLabel:{minWidth:"130px"},reportingValue:{textOverflow:"ellipsis",overflow:"hidden"},reportingCrawlButton:{margin:"0 0 0 auto",display:"block"},link:{color:"inherit"}}),F=function(t){var e,n=t.form,i=t.query,s=t.previewSource;return l.a.h(S.a.Item,{class:"no-padding"},l.a.h(E.h,{model:n.field("strategy"),label:_("Data type")},l.a.h(E.i,{options:[{value:"TimeLessSeries",label:_("Quantitative")},{value:"TimeSeries",label:_("Time")}]})),l.a.h(E.h,{model:n.field("aggregationMethod"),label:_("Aggregation method")},l.a.h(E.i,{options:(e=[{value:"sum",label:_("Sum")},{value:"avg",label:_("Average")},{value:"max",label:_("Maximum")},{value:"min",label:_("Minimum")}],"TimeLessSeries"===n.values.strategy&&e.unshift({value:"count",label:_("Count")}),e)})),n.values.sheet&&l.a.h(E.h,{model:n.field("sheet"),label:_("Sheet")},l.a.h(E.j,null)),"count"!==n.values.aggregationMethod&&l.a.h(E.h,{model:n.field("columns"),label:_("Column"),description:_("Pick the columns you want to graph. * for all.")},l.a.h(E.j,null)),"TimeSeries"===n.values.strategy?l.a.h("div",null,l.a.h(E.h,{model:n.field("indexColumn"),label:_("Date column")},l.a.h(E.j,null)),l.a.h(E.h,{model:n.field("dateFormat"),label:_("Date format")},l.a.h(E.i,{options:i.parser.possibleFormats.map(function(t){return{value:t,label:t}})}))):l.a.h(E.h,{model:n.field("indexColumn"),label:"count"===n.values.aggregationMethod?_("Column"):_("Column index")},l.a.h(E.i,{options:s.header.map(function(t,e){return{value:String(e+1),label:t}})})))},M=function(t){var e=t.form;return l.a.h(S.a.Item,{class:"no-padding"},l.a.h("label",{className:"reset-data-label"},l.a.h(E.a,{model:e.field("resetData")}),l.a.h("span",null,_("Reset data before updating"))),l.a.h(E.g,{label:_("Update frequency"),vertical:!0},l.a.h(E.f,{model:e.field("update_scheme"),options:[{value:"manual",label:_("Manually")},{value:"auto",label:_("Automatically every")}]}),"auto"===e.values.update_scheme&&l.a.h("div",{class:P("cloudSchemeSelect")},l.a.h(E.i,{model:e.field("step"),containerClass:P("cloudSchemeSelectInput"),options:[1,2,5,10,15,30].map(function(t){return{value:String(t),label:t}})}),l.a.h(E.i,{model:e.field("unit"),containerClass:P("cloudSchemeSelectInput"),options:[{value:"hours",label:_("Hours")},{value:"days",label:_("Days")},{value:"weeks",label:_("Weeks")},{value:"months",label:_("Months")}]}))))},L=function(t){var e=t.source,n=t.onCrawl,i=t.isCrawling;if(e.getId()){var s=[],o="cloud"===e.getQuery().uploadType;if(o){var a=function(t){return t?Object(A.formatLocalizedDate)(t):"N/A"};s.push({label:_("First crawl:"),value:a(e.getActivatedAtDate())},{label:_("Last parse:"),value:a(e.getComputedAtDate())},{label:_("Next update:"),value:a(e.getUpdateAtDate())})}var r=e.getQuery().parser.fileName,c=e.getActivatedAtDate();return r&&s.push({label:_("Source name:"),value:r}),c&&s.push({label:_("Creation date:"),value:x.a.formatDateForDisplay(c)}),l.a.h(S.a,{title:_("Reporting")},l.a.h(S.a.Item,null,s.map(function(t){var e=t.label,n=t.value;return l.a.h("div",{class:P("reportingLine")},l.a.h("div",{class:P("reportingLabel")},e),l.a.h("div",{class:P("reportingValue")},n))}),o&&l.a.h(I.Button,{value:_("Crawl data now"),className:"green",containerClass:P("reportingCrawlButton"),attributes:{disabled:i},events:{onClick:n}})))}},R=function(t){var e=t.query,n=t.previewSource,i=t.onQueryChange,s=t.onCrawl,o=t.isCrawling,r=t.source;return l.a.h("div",{class:"spreadsheet-form config"},l.a.h(S.a,{title:_("What do you want to chart?")},e&&n?l.a.h(E.d,{onInit:function(t){t.values=O(e)},onUpdate:function(t){t.values=O(e)},onChange:function(t){i(function(t,e){var n=a.a.clone(t);if(n.strategy=e.strategy,e.sheet&&(n.parser.sheet=Number(e.sheet)-1),e.indexColumn&&(n.parser.indexColumn=Number(e.indexColumn)-1),e.columns){var i=e.columns;if("*"!==i){var s=i.split(",").map(function(t){return Number(t)-1});s.some(isNaN)||(i=s.join(","))}n.parser.columns=i}return e.dateFormat&&(n.parser.dateFormat=e.dateFormat),e.aggregationMethod&&(n.parser.aggregationMethod=e.aggregationMethod),"TimeSeries"===e.strategy&&"count"===n.parser.aggregationMethod&&(n.parser.aggregationMethod="sum"),e.update_scheme&&(n.crawler.resetData=e.resetData,n.crawler.type=e.update_scheme,"auto"===n.crawler.type&&(n.crawler.step=Number(e.step),n.crawler.unit=e.unit)),n}(e,t.values))},render:function(t){return l.a.h("div",null,l.a.h(F,{form:t,query:e,previewSource:n}),"cloud"===e.uploadType&&l.a.h(M,{form:t}))}}):l.a.h(S.a.Item,{innerClass:P("loading")},l.a.h(I.Spinner,null))),l.a.h(L,{source:r,onCrawl:s,isCrawling:o}))},j=n(27);function V(){return(V=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t}).apply(this,arguments)}var B=D.a.namespace("Spreadsheet_Preview").addRules({loading:{display:"flex",justifyContent:"center"}}),z=function(t){var e,n;function i(){return t.apply(this,arguments)||this}n=t,(e=i).prototype=Object.create(n.prototype),e.prototype.constructor=e,e.__proto__=n;var s=i.prototype;return s.render=function(t){var e,n=t.onRefreshData,i=t.loading,s=t.loadingError,o=this._renderGrid();if(i)e=l.a.h(S.a.Item,{innerClass:B("loading")},l.a.h(I.Spinner,null));else if(s){var a=Object(j.getErrorMessage)(s.code,{"Unknow sheet":_("Unknown sheet")},!0),r="preview"===s.from?_("Error while loading the preview"):_("Error while loading the source"),c=a?_("{0}:").format(r)+" "+a:r;e=l.a.h(S.a.Item,{class:"error"},c)}else e=l.a.h(S.a.Item,null,l.a.h("div",{class:"spreadsheet-table-preview"},o||l.a.h("p",{class:"uwa-message"},_("Please select source first in order to view a sample of your data"))),l.a.h("p",{class:"step-infos"},_("Note: This is a partial preview only.")),l.a.h(I.Button,{className:"medium dark-grey iconl refresh icon-separated spreadsheet-preview-button",value:_("Update preview"),attributes:{disabled:!o||i},events:{onClick:n}}));return l.a.h("div",{style:{flex:1},class:"spreadsheet-preview"},l.a.h(S.a,{title:_("Preview")},e))},s._renderGrid=function(){var t=this.props.checkedSource?this.getCheckDataGrid():this.props.previewSource?this.getPreviewDataGrid():null;if(t&&t.data.length)return l.a.h(I.DataGrid,V({scrollable:!0,sortable:!0},t))},s.getCheckDataGrid=function(){var t=[],e=[{text:"",dataIndex:"0",isFixed:!0,isFirst:!0,className:"column-index"}];return this.props.checkedSource.forEach(function(n,i){var s={0:i+1};0===i&&(s.isFixed=!0,s.className="column-name"),n.forEach(function(t,n){if(0===i){var o={dataIndex:String(n+1),text:String(n+1),isFixed:0===n,className:0===n?"column-name":""};e.push(o)}s[n+1]=t}),t.push(s)}),{data:t,columns:e}},s.getPreviewDataGrid=function(){var t=this.props.previewSource,e=this.props.query,n=Object.keys(t.header).filter(function(t){return Number(t)!==Number(e.parser.indexColumn)}),i=[],s=[{text:"",dataIndex:"0",isFixed:!0,isFirst:!0,className:"column-index"},{text:String(Number(e.parser.indexColumn)+1),dataIndex:"1",isFixed:!0,className:"column-name"}];s=s.concat(n.map(function(t,e){return{text:String(Number(t)+1),dataIndex:String(e+2)}}));var o={0:1,1:t.header[Number(e.parser.indexColumn)],isFixed:!0,className:"column-name"};n.forEach(function(e,n){o[n+2]=t.header[Number(e)]}),i.push(o);for(var a=Object.keys(t.data[0]),r=a.length>9?9:a.length,l=0;l<r;l++){var c={};c[0]=l+2,c[1]="TimeSeries"===e.strategy?x.a.formatDateForHumanQuery(new Date(1e3*a[l])):a[l];for(var u=0;u<t.data.length;u++)c[u+2]=t.data[u][a[l]]||"N/A";i.push(c)}return{data:i,columns:s}},i}(u.a);function W(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function U(t){return t.source&&t.source.getId()||t.originalSource&&t.originalSource.getId()||null}function H(t){return!t.source.getQuery().uploadType}n.d(e,"default",function(){return q});var q=function(t){var e,n;function i(e){var n;return(n=t.call(this,e)||this).state={step:"importData",importDataConfig:{query:{uploadType:e.source.getQuery().uploadType||"local"},source:null},previewData:{},checkedData:null,isCrawling:!1},n._onNextStep=n._onNextStep.bind(W(n)),n._onCrawl=n._onCrawl.bind(W(n)),n}n=t,(e=i).prototype=Object.create(n.prototype),e.prototype.constructor=e,e.__proto__=n;var o=i.prototype;return o.componentWillMount=function(){H(this.props)||this._previewSpreadsheet(U(this.props),this.props.source.getQuery())},o.componentWillReceiveProps=function(t){U(t)===U(this.props)&&a.a.equals(t.source.getQuery(),this.props.source.getQuery())||H(t)||this._previewSpreadsheet(U(t),t.source.getQuery())},o.render=function(t,e){var n=this,i="config"===e.step||!H(t);return l.a.h(v.a,{source:t.source,events:t.events,scroller:!0,rightNavigation:[t.hasPreviousStep&&l.a.h(f.a.Text,{label:_("Previous"),onClick:function(){i&&H(t)?(n.props.events.onHideDuplicateIngredient(!1),n.setState({step:"importData",loadingError:!1})):t.events.onPreviousStep()}}),l.a.h(f.a.Main,{label:i?_("Done"):_("Next"),disabled:t.loading||e.loading||!i&&!e.importDataConfig.source,onClick:i?this._onNextStep:function(){n.props.events.onHideDuplicateIngredient(!0),n._previewSpreadsheet(U(n.props),e.checkedData.query).done(function(){n.setState({step:"config",loadingError:!1})})}})]},l.a.h("div",{style:{display:"flex"}},i?[l.a.h(R,{previewSource:e.previewData.source,query:e.previewData.query,source:t.source,onQueryChange:function(t){n._previewSpreadsheet(U(n.props),t).done()},onCrawl:this._onCrawl,isCrawling:e.isCrawling}),l.a.h(z,{previewSource:e.previewData.source,query:e.previewData.query,loading:e.loading,loadingError:e.loadingError,onRefreshData:function(){n._previewSpreadsheet(U(n.props),e.previewData.query).done()}})]:[l.a.h(T,{config:e.importDataConfig,needPassword:e.needPassword,onConfigChange:function(t){n.setState({importDataConfig:t},function(){n._checkSpreadsheet()})}}),l.a.h(z,{checkedSource:e.checkedData&&e.checkedData.source,loading:e.loading,loadingError:e.loadingError,onRefreshData:function(){n._checkSpreadsheet()}})]))},o._checkSpreadsheet=function(){var t=this;if(!this.state.importDataConfig.source)return this.setState({checkedData:null}),s.a.resolve();var e=Object.assign({},this.state.importDataConfig,{query:JSON.stringify(this.state.importDataConfig.query)});this.setState({loading:!0,loadingError:!1}),d.a.spreadsheetCheck(e).then(function(e){t.setState({loading:!1,loadingError:!1,checkedData:e})}).catch(function(e){t.setState(function(t){return{loading:!1,needPassword:t.needPassword||"Auth error: Unauthorized (401)"===e,loadingError:{from:"check",code:e}}})})},o._previewSpreadsheet=function(t,e){var n=this,i=this.state,o=i.previewData,a=i.importDataConfig,r={query:JSON.stringify(Object.assign({},a.query,e)),source:a.source,id:t};this.setState({loading:!0,loadingError:!1,previewData:Object.assign({},o,{query:e})});var l=this._previewSpreadsheetToken={};return d.a.spreadsheetPreview(r).then(function(t){n._previewSpreadsheetToken===l&&n.setState({loading:!1,loadingError:!1,previewData:t})}).catch(function(t){if(n._previewSpreadsheetToken===l)return n.setState({loading:!1,loadingError:{from:"preview",code:t}}),s.a.reject(t)})},o._onNextStep=function(){var t=this,e=this.state.previewData;this.props.events.onPopulateSource({query:e.query,from:e.from?String(e.from):void 0,to:e.to?String(e.to):void 0,range:e.range}).done(function(){t.props.events.onDisplayStep("editIngredient",{source:t.props.source})})},o._onCrawl=function(){var t=this;this.setState({isCrawling:!0,loading:!0,loadingError:!1}),Object(p.crawlSource)(this.props.source).then(function(e){t.props.events.onReplaceSource(e)}).catch(function(){t.setState({loadingError:_("Error while crawling the source")})}).finally(function(){return t.setState({isCrawling:!1,loading:!1}),t._previewSpreadsheet(U(t.props),t.props.source.getQuery())})},i}(u.a)},function(t,e,n){"use strict";n.r(e);var i=n(0),s=n.n(i),o=n(2),a=n.n(o),r=n(11),l=n.n(r),c=n(123),u=n.n(c),h=n(20),d=n.n(h),p=n(1),m=n(184),f=n.n(m),g=n(106),v=n(154),b=n(136),y=n(186),w=n(3),x=n.n(w),C=n(19),S=n.n(C),E=n(13),k=n.n(E);var T=function(t){var e="javascript:"+escape("(function(){window.nv_pageId="+JSON.stringify(a.a.Page.id||"")+";window.nv_baseUrl="+JSON.stringify("//"+k.a.parseUrl(a.a.Config.urls.startpage).domain)+";window.s=document.createElement('script'); s.setAttribute('type','text/javascript'); s.setAttribute('charset','UTF-8'); s.setAttribute('src',nv_baseUrl+'/js/misc/tagBookmarklet.js'); document.documentElement.appendChild(s); void(0);}())").replace(/ /g,"").replace(/~/g," ").replace("\n","");return s.a.h(r.ButtonLink,{attributes:{href:e,title:_(" Drag this to your bookmark bar")},className:t.className,value:t.value,events:{onClick:function(t){x.a.stop(t),S.a.Engine.ie?alert(_("To start using this button, right-click and select 'Add To Favorites...' to save it to your browser's bookmarks toolbar.")):alert(_("To start using this button, drag it to your browser's bookmarks toolbar."))}}})},A=n(14),I=n.n(A),N=n(185),D=n.n(N),O=n(155),P=n.n(O),F=n(165),M=n.n(F),L=n(6),R=n.n(L);function j(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function V(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,t.__proto__=e}var B=I.a.namespace("CorpusManagerOpinionOverlay").addRules({root:{backgroundColor:"#666",display:"flex","flex-grow":"1","justify-content":"space-between",margin:"0 -8px"},title:{fontSize:16,lineHeight:"2em",marginBottom:16,marginTop:-35,padding:"6px 5px 6px 15px"},box:{backgroundColor:"#383838",marginBottom:1,fontSize:16},boxForm:{padding:"18px 17px 38px 17px"},boxImport:{textAlign:"center",padding:"15px 17px"},label:{color:"#AAA"},formRow:{marginBottom:"0.8em",paddingLeft:14},formInline:{display:"inline-block"},inputFile:{},labelDatepicker:{width:75},datepicker:{width:120},datepickerButton:{display:"inline-block"},formControl:{marginBottom:"1.4em"},overlayAction:{paddingTop:30,textAlign:"right"},boxFormExport:{padding:"32px 17px 38px 12px"},boxFormExportFormat:{padding:"18px 17px 25px 12px"},btnCancel:{backgroundColor:"transparent",border:0,color:"#aaa",cursor:"pointer",fontSize:"14px",lineHeight:"32px",textDecoration:"underline",outline:"none",":hover":{color:"#fff"}},errorMessage:{backgroundColor:"#982e2a",margin:"-18px -17px 15px -17px",padding:"9px 31px"},formControlTagSelection:{fontSize:12},exportLabel:{display:"block",marginBottom:"0.9em"},customPeriod:{paddingLeft:36}}),z=function(t){function e(e){var n;return(n=t.call(this,e)||this).defaultValues={name:""},n.state={opinion:"object"==typeof e.item?e.item:n.defaultValues,error:""},n.isNew="object"!=typeof e.item,n.onChange=n.onChange.bind(j(n)),n.onSubmit=n.onSubmit.bind(j(n)),n.renderError=n.renderError.bind(j(n)),n}V(e,t);var n=e.prototype;return n.componentDidMount=function(){this.props.onOpen&&this.props.onOpen()},n.onChange=function(t){if("keyup"!==t.type||"return"!==x.a.whichKey(t)){var e=Object.assign(this.state.opinion,{name:t.target.value});this.setState({opinion:e,error:null})}else this.onSubmit()},n.onImport=function(t){var e=this;g.default.import({import:t.target.files[0]}).done(function(){e.props.refresh(),e.props.onClose()},function(t){e.setState({error:g.default.getErrorMessage(t)})})},n.onSubmit=function(){var t=this;g.default[this.isNew?"submit":"edit"](this.state.opinion).done(function(){t.props.refresh(),t.props.onClose()},function(e){t.setState({error:g.default.getErrorMessage(e)})})},n.renderError=function(){var t=this.state.error;if(t)return s.a.h("div",{className:B("errorMessage")},t)},n.render=function(){var t=this,e=this.state.opinion;return s.a.h(P.a,{onClose:this.props.onClose},s.a.h("p",{className:B("title")},this.isNew?_("Create a new Opinion"):_("Edit Opinion")),s.a.h("div",{className:B("box","boxForm")},s.a.h("p",{className:B("label","formRow")},_("Name")),s.a.h(l.a.Text,{value:e.name,attributes:{events:{keyup:this.onChange}}})),s.a.h("div",{className:B("box","boxImport")},s.a.h("p",{className:B("label","formInline")},_("Or")),s.a.h(l.a.File,{ref:function(e){t.file=e},className:B("inputFile")+" green auto-width",button:{text:_("Import CSV")},buttonOnly:!0,events:{onChange:this.onImport.bind(this)}})),s.a.h("div",{className:B("overlayAction")},s.a.h("button",{className:B("btnCancel"),onClick:this.props.onClose},_("Cancel")),s.a.h(l.a.Button,{className:"green",value:_("Done"),events:{onClick:this.onSubmit}})))},e}(i.Component),W=function(t){function e(e){var n;n=t.call(this,e)||this;var i=new Date,s=new Date(i.getTime()-2592e6);return n.options={format:"%Y-%m-%d"},n.state={period:"all",from:s,to:i},n.elements={},n.overlay=null,n.onChange=n.onChange.bind(j(n)),n.onSubmit=n.onSubmit.bind(j(n)),n.setDatePikerDate=n.setDatePikerDate.bind(j(n)),n}V(e,t);var n=e.prototype;return n.onChange=function(t){this.setState({period:t.target.value})},n.onSubmit=function(){var t=this.elements.format.getControl().getValue()[0],e={npdId:a.a.NPD.id,pageId:a.a.Page.id,format:t};"custom"===this.state.period&&(e.from=this.elements.from.getControl().getDate().strftime("%Y-%m-%d"),e.to=this.elements.to.getControl().getDate().strftime("%Y-%m-%d")),this.state.opinion&&(e.labelId=this.state.opinion.id),R.a.dashboardAnalyticsExport(e,{exportResponseBody:t}).done(function(e){M()(new Blob([e],{type:"csv"===t?"text/csv":"application/json"}),"netvibes-"+(new Date).strftime("%Y-%m-%d")+"."+t)})},n.setDatePikerDate=function(t,e){var n,i=new Date(e);Date.parse(i)&&(this.elements[t].getControl().setDate(i),this.setState(((n={})[t]=i,n)))},n.render=function(){var t=this,e=this.state.period,n=this;return s.a.h(P.a,{onClose:this.props.onClose},s.a.h("p",{className:B("title")},_("Export Opinions")),s.a.h("div",{className:B("box","boxFormExport")},s.a.h("p",{className:B("label","formRow")},_("Period")),s.a.h("label",{key:"all",className:B("label","exportLabel")},s.a.h(l.a.Radio,{attributes:{name:"period",checked:"all"===e},value:"all",className:"green",events:{onChange:this.onChange}}),_("All")),s.a.h("label",{key:"custom",className:B("label","exportLabel")},s.a.h(l.a.Radio,{attributes:{name:"period",checked:"custom"===e},value:"custom",className:"green",events:{onChange:this.onChange}}),_("Custom")),s.a.h("div",{className:B("customPeriod"),style:{display:"custom"===e?"block":"none"}},s.a.h("div",{className:B("formRow")},s.a.h("p",{className:B("label","formInline","labelDatepicker")},_("From")),s.a.h("div",{className:B("formInline")},s.a.h(l.a.Text,{className:B("datepicker"),"data-date":this.state.from,value:this.state.from.strftime(this.options.format),attributes:{events:{blur:function(){n.setDatePikerDate("from",this.value)}}}}),s.a.h(l.a.DatePicker,{className:B("datepickerButton"),ref:function(e){t.elements.from=e},date:this.state.from,format:this.options.format,valueInput:!1,events:{onDateSelect:function(t){this.setState({from:t})}.bind(this)}}))),s.a.h("div",{className:B("formRow")},s.a.h("p",{className:B("label","formInline","labelDatepicker")},_("To")),s.a.h("div",{className:B("formInline")},s.a.h(l.a.Text,{className:B("datepicker"),"data-date":this.state.to,value:this.state.to.strftime(this.options.format),attributes:{events:{blur:function(){n.setDatePikerDate("to",this.value)}}}}),s.a.h(l.a.DatePicker,{className:B("datepickerButton"),ref:function(e){t.elements.to=e},date:this.state.to,format:this.options.format,valueInput:!1,events:{onDateSelect:function(t){this.setState({to:t})}.bind(this)}}))))),s.a.h("div",{className:B("box","boxFormExportFormat")},s.a.h("p",{className:B("label","formRow")},_("Format")),s.a.h(l.a.Select,{ref:function(e){t.elements.format=e},options:[{label:_("CSV"),value:"csv"},{label:_("JSON"),value:"json"}]})),s.a.h("div",{className:B("overlayAction")},s.a.h("button",{className:B("btnCancel"),onClick:this.props.onClose},_("Cancel")),s.a.h(l.a.Button,{className:"green",value:_("Export"),events:{onClick:this.onSubmit}})))},e}(i.Component),U=function(t){function e(e){var n;return(n=t.call(this,e)||this).defaultValues={name:"",color:D.a.getRandomColor().replace(/#/,"")},n.state={sentiment:"object"==typeof e.item?e.item:n.defaultValues},n.isNew="object"!=typeof e.item,n.overlay=null,n.onChange=n.onChange.bind(j(n)),n.onSubmit=n.onSubmit.bind(j(n)),n.renderError=n.renderError.bind(j(n)),n}V(e,t);var n=e.prototype;return n.onChange=function(t){var e,n=t.target,i=n.name,s=Object.assign({},this.state.sentiment,((e={})[i]=n.value,e));this.setState({sentiment:s,error:null})},n.onSubmit=function(){var t=this;v.default[this.isNew?"submit":"edit"](this.state.sentiment).done(function(){t.props.refresh(),t.props.onClose()},function(e){t.setState({error:v.default.getErrorMessage(e)})})},n.renderError=function(){var t=this.state.error;if(t)return s.a.h("div",{className:B("errorMessage")},t)},n.render=function(){var t=this.state.sentiment;return s.a.h(P.a,{onClose:this.props.onClose},s.a.h("p",{className:B("title")},this.isNew?_("Create a new Sentiment"):_("Edit a Sentiment")),s.a.h("div",{className:B("box","boxForm")},s.a.h("p",{className:B("label","formRow")},_("Name")),s.a.h("div",{className:B("formControl")},s.a.h(l.a.Text,{value:t.name,attributes:{name:"name",events:{keyup:this.onChange}}})),s.a.h("p",{className:B("label","formRow")},_("Color")),s.a.h(l.a.ColorPicker,{value:t.color,events:{onChange:this.onChange},attributes:{name:"color"}})),s.a.h("div",{className:B("overlayAction")},s.a.h("button",{className:B("btnCancel"),onClick:this.props.onClose},_("Cancel")),s.a.h(l.a.Button,{className:"green",value:_("Done"),events:{onClick:this.onSubmit}})))},e}(i.Component),H=function(t){function e(e){var n;(n=t.call(this,e)||this).defaultValues={keyword:"",new_keyword:"",tags:[]},n.isNew="object"!=typeof e.item;var i=n.isNew?n.defaultValues:Object.assign(e.item,{new_keyword:e.item.keyword});return n.state={suggestion:i},n.overlay=null,n.onTagSelectionChange=n.onTagSelectionChange.bind(j(n)),n.onChange=n.onChange.bind(j(n)),n.onSubmit=n.onSubmit.bind(j(n)),n}V(e,t);var n=e.prototype;return n.onTagSelectionChange=function(t){this.onChange({target:{name:"tags",value:t.list||[]}})},n.onChange=function(t){var e,n=t.target,i=this.isNew||"keyword"!==n.name?n.name:"new_keyword",s=Object.assign({},this.state.suggestion,((e={})[i]=n.value,e));this.setState({suggestion:s})},n.onSubmit=function(){var t=this;b.default[this.isNew?"submit":"edit"](this.state.suggestion).done(function(){t.props.refresh(),t.props.onClose()})},n.onImport=function(t){var e=this;b.default.import({import:t.target.files[0]}).done(function(){e.props.refresh(),e.props.onClose()},function(t){e.setState({error:b.default.getErrorMessage(t)})})},n.render=function(){var t=this.state.suggestion,e=this.isNew;return s.a.h(P.a,{onClose:this.props.onClose},s.a.h("p",{className:B("title")},_("Create a new Suggestion")),s.a.h("div",{className:B("box","boxForm")},s.a.h("p",{className:B("label","formRow")},_("Text to detect")),s.a.h("div",{className:B("formControl")},s.a.h(l.a.Text,{value:t[e?"keyword":"new_keyword"],attributes:{name:e?"keyword":"new_keyword",events:{keyup:this.onChange}}})),s.a.h("p",{className:B("label","formRow")},t.tags.length>1?_("Suggested opinions"):_("Suggested opinion")),s.a.h("div",{class:B("formControlTagSelection")},s.a.h(l.a.TagSelection,{data:t.tags,events:{onChange:this.onTagSelectionChange}}))),s.a.h("div",{className:B("box","boxImport")},s.a.h("p",{className:B("label","formInline")},_("Or")," ",s.a.h(l.a.File,{className:B("inputFile")+" green auto-width",button:{text:_("Import CSV")},buttonOnly:!0,events:{onChange:this.onImport.bind(this)}}))),s.a.h("div",{className:B("overlayAction")},s.a.h("button",{className:B("btnCancel"),onClick:this.props.onClose},_("Cancel")),s.a.h(l.a.Button,{className:"green",value:_("Done"),events:{onClick:this.onSubmit}})))},e}(i.Component);function q(){return(q=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t}).apply(this,arguments)}function G(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Y(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,t.__proto__=e}var X=I.a.namespace("CorpusManagerOpinion").addRules({root:{backgroundColor:"#666",minHeight:"100%",display:"flex",flex:"1 1",height:"100%","justify-content":"space-between",margin:"0 -8px","@media screen and (max-width: 700px)":{flexDirection:"column"}},column:{backgroundColor:"#fff",color:"#333",flex:"1 1",margin:"0 8px",position:"relative",display:"flex",flexDirection:"column",transition:"all ease-out 300ms"},column2:{"@media screen and (max-width: 700px)":{marginTop:13}},column3:{"@media screen and (max-width: 1200px)":{marginTop:13}},columnExpand:{"@media screen and (max-width: 1200px)":{flexBasis:"auto",height:"100%"}},columnCollapse:{height:44,minHeight:44,overflow:"hidden"},row:{flex:"1 1",display:"flex","@media screen and (max-width: 1200px)":{flexDirection:"column"}},columnMobile:{},columnHeader:{color:"#fff",fontSize:16,lineHeight:"2em",padding:"6px 5px 6px 30px",position:"relative"},headerCounter:{display:"inline-block",backgroundColor:"rgba(0,0,0,0.3)",borderRadius:4,fontSize:12,textAlign:"center",marginLeft:10,padding:"0 5px",minWidth:22},headerActions:{float:"right",top:0,right:8},headerButtonCollapse:{transform:"rotate(90deg)",marginTop:-7},headerButton:{backgroundColor:"transparent",height:36,cursor:"pointer",fontSize:20,margin:"0 8px",position:"relative",outline:0,verticalAlign:"top",":before":{fontSize:40,lineHeight:"26px"}},columnBody:{display:"flex",flex:"1 1"},navigationButtonLeft:{position:"absolute",left:0}}),K=I.a.namespace("CorpusManagerList").addRules({rowAction:{opacity:0},rowActionActive:{opacity:1,textAlign:"right"},actionButton:{color:"#ACACAC",display:"inline-block",margin:"0 10px",":hover":{color:"#666"}},opinionCol1:{width:"30%",paddingLeft:"30px!important"},opinionCol2:{width:"30%",textAlign:"center"},opinionCol3:{minWidth:"130px",paddingRight:16},sentimentCol1:{display:"flex","align-items":"stretch","flex-grow":"0",padding:0,width:10},sentimentCol2:{width:"60%"},sentimentCol3:{width:"130px",paddingRight:16},suggestionCol1:{width:"30%",paddingLeft:"30px!important"},suggestionCol2:{width:"30%"},suggestionCol3:{width:"130px",paddingRight:16},colorPreview:{margin:1,"flex-grow":"1"},opinionList:{color:"#333"}}),J=function(t){function e(e){var n;return(n=t.call(this,e)||this).state={},n.openOverlay=n.openOverlay.bind(G(n)),n.closeOverlay=n.closeOverlay.bind(G(n)),n}Y(e,t);var n=e.prototype;return n.openOverlay=function(t,e){var n;this.setState(((n={})[t]=e||!0,n))},n.closeOverlay=function(t){var e;this.setState(((e={})[t]=!1,e))},n.render=function(t){return s.a.h("div",q({className:X("root")},t),t.children)},e}(i.Component),Q=function(t){function e(e){var n;return(n=t.call(this,e)||this).state={display:e.display||"normal"},n.toggle=n.toggle.bind(G(n)),n.getDisplay=n.getDisplay.bind(G(n)),n}Y(e,t);var n=e.prototype;return n.toggle=function(t){return t||(t="normal"===this.state.display?"expand":"normal"),this.setState({display:t}),this.props.onToggle&&this.props.onToggle(t),t},n.getDisplay=function(){return this.state.display},n.render=function(t){var e=this;return s.a.h("div",{className:X("column",t.sansselStyle,"collapse"===this.state.display?"columnCollapse":"expand"===this.state.display?"columnExpand":"")},s.a.h("div",{className:X("columnHeader"),style:{backgroundColor:t.color}},t.header,s.a.h("span",{className:X("headerCounter")},t.count),function(){var n=t.actions;if(!n)return!1;var i=n.map(function(t){var e=X("headerButton")+(t.className?" "+t.className:"");if(t){"collapse"===this.state.display&&t.classNameCollapse&&(e=e+" "+t.classNameCollapse);var n=Object.assign({},t,{className:e});return s.a.h("button",n)}}.bind(e));return s.a.h("span",{className:X("headerActions")},i)}()),t.children)},e}(i.Component),$=f.a.extend({init:function(){this._parent(),this.data={},this.mode="desktop",this.widgets=["opinions","sentiments","suggestions"],this.overlayConfig={opinionAdd:"opinions",opinionExport:"opinions",sentimentForm:"sentiments",suggestionForm:"suggestions"},this.toggleWidget=this.toggleWidget.bind(this),this.getWidgetInColumn=this.getWidgetInColumn.bind(this),this.closeWidgetsInColumn=this.closeWidgetsInColumn.bind(this),this.getWidgetCollapseInColumn=this.getWidgetCollapseInColumn.bind(this),this.openOverlay=this.openOverlay.bind(this)},open:function(t){this._parent(t),this.getData(),this.buildContainer()},getData:function(){d.a.all([g.default.getOpinionEntity(),v.default.getSentimentEntity(),b.default.getSuggestionEntity()]).done(function(t){this.data.opinions=t[0],this.data.sentiments=t[1],this.data.suggestions=t[2],this.updateContent()}.bind(this))},updateOpinion:function(){g.default.getOpinionEntity().done(function(t){this.data.opinions=t,this.updateContent()}.bind(this))},updateContent:function(){this.buildContainer(),this.elements.columns.show()},getWidgetInColumn:function(t){var e=[];return this.widgets.forEach(function(n){var i=this.elements[n];i&&i.props.column===t&&e.push(i)}.bind(this)),e},toggleWidget:function(t){var e=t.props.name,n="expand"===this.elements[e].toggle()?"collapse":"normal";this.getWidgetInColumn(t.props.column).forEach(function(t){t.props.name!==e&&this.elements[t.props.name].toggle(n)}.bind(this)),this.buildContainer()},closeWidgetsInColumn:function(t){var e=this.elements[t].props.column;this.getWidgetInColumn(e).forEach(function(e){e.props.name!==t&&this.elements[e.props.name].toggle("collapse")}.bind(this))},getWidgetCollapseInColumn:function(t){return this.getWidgetInColumn(t).filter(function(t){return"collapse"===t.getDisplay()})},openOverlay:function(t,e){if("desktop"!==this.mode){var n=this.overlayConfig[t];this.elements[n].toggle("expand"),this.closeWidgetsInColumn(n)}this.elements.manager.openOverlay(t,e),this.buildContainer()},closeOverlay:function(t){this.elements.manager.closeOverlay(t)},buildContainer:function(){var t=this,e=this.data&&this.data.opinions&&this.data.opinions.entities||[],n=this.data&&this.data.sentiments&&this.data.sentiments.entities,i=this.data&&this.data.suggestions&&this.data.suggestions.entities,o=a.a.isAllowed("tag_create"),r=a.a.isAllowed("tag_administration");s.a.render(s.a.h(J,{ref:function(e){t.elements.manager=e}},s.a.h(u.a,{style:{display:"flex",flex:"1",position:"relative",overflow:"hidden"}},function(a){var l=this;if(0===a.width)return null;this.mode=a.width<1200?a.width<716?"mobile":"tablet":"desktop";var c=s.a.h(Q,{column:1,display:"mobile"===this.mode?"expand":void 0,ref:function(t){l.elements.opinions=t},name:"opinions",header:_("Opinions"),color:"#84bd00",count:e&&e.length,className:"mobile"===this.mode?X("columnMobile"):"",onToggle:function(){t.closeOverlay("opinionAdd")},actions:[{className:"uwa-icon icon-only uwa-button",title:_("Export"),"data-icon":"Y",onClick:function(){this.openOverlay("opinionExport")}.bind(this)},(o||r)&&{className:"uwa-icon icon-only uwa-button",title:_("Add"),"data-icon":"3",onClick:function(){this.openOverlay("opinionAdd")}.bind(this)},"mobile"===this.mode&&{className:"uwa-icon icon-only uwa-button arrow-down small",classNameCollapse:X("headerButtonCollapse"),onClick:function(){t.toggleWidget(t.elements.opinions)}}]},s.a.h("div",{className:X("columnBody")},s.a.h(y.default,{sansselStyle:K("opinionList"),error:"Error messsage",items:e,orderKey:"name",getItemKey:function(t){return t.id},renderHeader:function(){return s.a.h("div",null,s.a.h("div",{className:K("opinionCol1")},_("Name")),s.a.h("div",{className:K("opinionCol2")},_("Occurrence")),s.a.h("div",{className:K("opinionCol3")}))},renderItem:function(e){return s.a.h("div",null,s.a.h("div",{className:K("opinionCol1")},e.name),s.a.h("div",{className:K("opinionCol2")},e.count),s.a.h("div",{className:K("opinionCol3")},s.a.h("div",{className:K(this.state.hover?"rowActionActive":"rowAction")},s.a.h("div",{className:["uwa-icon",K("actionButton")].join(" "),"data-icon":"Y",title:_("Export"),onClick:function(){t.openOverlay("opinionExport",e)}}),r&&s.a.h("div",{className:["uwa-icon","edit",K("actionButton")].join(" "),title:_("Edit"),onClick:function(){t.openOverlay("opinionAdd",e)}}),r&&s.a.h("div",{className:["uwa-icon",K("actionButton")].join(" "),"data-icon":"Ź",title:_("Delete"),onClick:function(){g.default.delete(this.id).done(function(){t.updateOpinion()})}.bind(e)}))))}})),t.elements.manager&&t.elements.manager.state.opinionAdd&&s.a.h(z,{refresh:t.getData.bind(t),parent:"opinions",item:t.elements.manager.state.opinionAdd,onClose:function(){this.closeOverlay("opinionAdd")}.bind(t)}),t.elements.manager&&t.elements.manager.state.opinionExport&&s.a.h(W,{parent:"opinions",onClose:function(){this.closeOverlay("opinionExport")}.bind(t)})),u=s.a.h(Q,{column:"tablet"===this.mode?2:1,display:"mobile"===this.mode?"collapse":void 0,ref:function(t){l.elements.sentiments=t},name:"sentiments",sansselStyle:["column2","desktop"!==this.mode?X("columnMobile"):""],color:"#aa8ce7",header:_("Sentiments"),count:n&&n.length,onToggle:function(){t.closeOverlay("sentimentForm")},actions:[(o||r)&&{className:"uwa-icon icon-only uwa-button","data-icon":"3",title:_("Add"),onClick:function(){this.openOverlay("sentimentForm")}.bind(this)},"desktop"!==this.mode&&{className:"uwa-icon icon-only uwa-button arrow-down small",classNameCollapse:X("headerButtonCollapse"),onClick:function(){t.toggleWidget(t.elements.sentiments)}}]},s.a.h(y.default,{sansselStyle:K("opinionList"),error:"Error messsage",items:n,orderKey:"name",getItemKey:function(t){return t.name},renderHeader:function(){return s.a.h("div",null,s.a.h("div",{className:K("sentimentCol1")}),s.a.h("div",{className:K("sentimentCol2")},_("Name")),s.a.h("div",{className:K("sentimentCol3")}))},renderItem:function(e){return s.a.h("div",null,s.a.h("div",{className:K("sentimentCol1")},s.a.h("div",{className:K("colorPreview"),style:{backgroundColor:"#"+e.color}})),s.a.h("div",{className:K("sentimentCol2")},e.name),s.a.h("div",{className:K("sentimentCol3")},s.a.h("div",{className:K(this.state.hover?"rowActionActive":"rowAction")},r&&s.a.h("div",{className:["uwa-icon","edit",K("actionButton")].join(" "),title:_("Edit"),onClick:function(){t.openOverlay("sentimentForm",e)}}),r&&s.a.h("div",{className:["uwa-icon",K("actionButton")].join(" "),"data-icon":"Ź",title:_("Delete"),onClick:function(){v.default.delete(this.id).done(function(){t.getData()})}.bind(e)}))))}}),t.elements.manager&&t.elements.manager.state.sentimentForm&&s.a.h(U,{refresh:this.getData.bind(t),parent:"sentiments",item:t.elements.manager.state.sentimentForm,onClose:function(){this.closeOverlay("sentimentForm")}.bind(t)})),h=s.a.h(Q,{column:"tablet"===this.mode?2:1,display:"mobile"===this.mode?"collapse":void 0,ref:function(t){l.elements.suggestions=t},name:"suggestions",sansselStyle:["column3","desktop"!==this.mode?X("columnMobile"):""],color:"#008c93",header:_("Suggestions"),count:i&&i.length,onToggle:function(){t.closeOverlay("suggestionForm")},actions:[(o||r)&&{className:"uwa-icon icon-only uwa-button","data-icon":"3",title:_("Add"),onClick:function(){this.openOverlay("suggestionForm")}.bind(this)},"desktop"!==this.mode&&{className:"uwa-icon icon-only uwa-button arrow-down small",classNameCollapse:X("headerButtonCollapse"),onClick:function(){t.toggleWidget(t.elements.suggestions)}}]},s.a.h(y.default,{sansselStyle:K("opinionList"),error:"Error messsage",items:i,getItemKey:function(t){return t.name},orderKey:"keyword",renderHeader:function(){return s.a.h("div",null,s.a.h("div",{className:K("suggestionCol1")},_("Text to detect")),s.a.h("div",{className:K("suggestionCol2")},_("Opinion")),s.a.h("div",{className:K("sentimentCol3")}))},renderItem:function(e){return s.a.h("div",null,s.a.h("div",{className:K("suggestionCol1")},e.keyword),s.a.h("div",{className:K("suggestionCol2")},e.tags.join(", ")),s.a.h("div",{className:K("suggestionCol3")},s.a.h("div",{className:K(this.state.hover?"rowActionActive":"rowAction")},r&&s.a.h("div",{className:["uwa-icon","edit",K("actionButton")].join(" "),title:_("Edit"),onClick:function(){t.openOverlay("suggestionForm",e)}}),r&&s.a.h("div",{className:["uwa-icon",K("actionButton")].join(" "),"data-icon":"Ź",title:_("Delete"),onClick:function(){b.default.delete(this.keyword).done(function(){t.getData()})}.bind(e)}))))}}),t.elements.manager&&t.elements.manager.state.suggestionForm&&s.a.h(H,{refresh:this.getData.bind(t),parent:"suggestions",item:t.elements.manager.state.suggestionForm,onClose:function(){this.closeOverlay("suggestionForm")}.bind(t)}));return"tablet"===this.mode?[s.a.h("div",{className:X("row")},c),s.a.h("div",{className:X("row")},u,h)]:s.a.h("div",{className:X("row")},c,u,h)}.bind(this))),this.elements.columns,this.elements.columns.firstChild)},buildStep:function(){return[this.elements.columns=Object(p.createElement)("div",{class:this.getClassNames("-form")}).hide()]},buildNavigation:function(){return s.a.render(s.a.h("div",{className:this.getClassNames("-nav-wrapper")+" opinion"},a.a.isAllowed("bookmarklet_link")&&s.a.h(T,{className:"dark-grey left-button "+X("navigationButtonLeft"),value:_("Opinion Bookmarklet")}),s.a.h(r.Button,{className:"green right-button",value:_("Done"),events:{onClick:this.onDone.bind(this)}})))}});e.default=$},function(t,e,n){var i,s;i=[n(1),n(3),n(10)],void 0===(s=function(t,e,n){"use strict";var i=n.extend({offset:0,limit:0,max:0,length:0,loadingData:!1,defaultOptions:{className:"uwa-pager nv-pager",type:0,showPageLinks:!1,showMoreLink:!1,pageLinks:5,length:0,offset:0,limit:10,max:0,loadNext:null,prevLabel:"prev",nextLabel:"next",moreLabel:"more"},init:function(t){this._parent(t),t=this.options,this.offset=parseInt(t.offset,10),this.limit=parseInt(t.limit,10),this.max=parseInt(t.max,10),this.length=parseInt(t.length,10),this.buildSkeleton()},setOptions:function(t){return this._parent(t),(t=this.options).dataLength?t.length=t.dataLength:t.dataArray&&(t.length=t.dataArray.length),t.onChange&&this.addEvent("onOffsetChange",t.onChange),t.onMoreClick&&this.addEvent("onMoreClick",t.onMoreClick),(t.showPageLinks||t.pageLinks&&!t.type)&&(this.type=1),this},setLength:function(t){this.length=parseInt(t,10),this.setOffset(this.offset)},setOffset:function(t){var e=this.offset;return t=t<0?0:t,this.offset=Math.min(parseInt(t,10),this.max||this.length),e!==this.offset&&this.dispatchEvent("onOffsetChange",[this.offset]),this},setLimit:function(t){return this.limit=parseInt(t,10),this},getPageOffset:function(t){return Math.ceil((parseInt(t,10)||this.offset)/this.limit)},getPages:function(){return Math.ceil((this.max||this.length||1)/this.limit)},isLastPage:function(){var t=!this.max||this.length>=this.max,e=this.offset+this.limit>=this.length;return t&&e},buildSkeleton:function(){this.elements.container=t.createElement("div",{class:this.options.className}),this.dispatchEvent("onRefresh")},buildPageInfos:function(){var e=this.elements;e.pageInfos=t.createElement("span",{class:"pageInfos",html:t.createElement("span",{text:this.getPageOffset()+1+" / "+this.getPages()})}).inject(e.subContainer)},buildPageLinks:function(){var e,n,i=this.elements,s=this.options,o=this.injectPageLink.bind(this),a=this.injectPageSeparator.bind(this),r=s.pageLinks,l=this.getPages(),c=this.getPageOffset(),u=0,h=Math.round(r/2),d=c>=h&&l>=r?c-h+1:0;if(i.pageContainer=t.createElement("span",{class:"pageLinks"}),d<l)for(e=d;e<l&&u<r;e++)d>=1&&0===u&&(o(u),e>1&&a()),n=o(e),e===c&&n.addClassName("selected"),e<l-1&&u===r-1&&(e<l-2&&a(),o(l-1)),u++;i.pageContainer.inject(i.subContainer)},injectPageLink:function(e){var n=parseInt(e+1,10);return t.createElement("a",{class:"pageLink",href:"#page_"+n,text:n,events:{click:this.dispatchAsEventListener("onPageClick",e)}}).inject(this.elements.pageContainer)},injectPageSeparator:function(){return t.createElement("span",{class:"comas",text:" ... "}).inject(this.elements.pageContainer)},onRefresh:function(){var e=this.elements,n=this.options,i=this.isLastPage();e.container.empty(),e.subContainer=t.createElement("div"),e.prev=t.createElement("a",{class:"prev"+(0===this.offset?" disabled":""),href:"#prev",html:t.createElement("span",{text:t.i18n(n.prevLabel)}),events:{click:this.dispatchAsEventListener("onPrevClick")}}).inject(e.subContainer),i&&(n.showMoreLink||n.moreLink)?e.next=t.createElement("a",{class:"more",href:n.moreLink||"#more",html:t.createElement("span",{text:t.i18n(n.moreLabel)}),events:{click:this.dispatchAsEventListener("onMoreClick")}}).inject(e.subContainer):e.next=t.createElement("a",{class:"next"+(i?" disabled":""),href:"#next",html:t.createElement("span",{text:t.i18n(n.nextLabel)}),events:{click:this.dispatchAsEventListener("onNextClick")}}).inject(e.subContainer),1===n.type?this.buildPageLinks():2===n.type&&this.buildPageInfos(),e.subContainer.inject(e.container)},onOffsetChange:function(t){this.offset=t,this.dispatchEvent("onRefresh"),this.dispatchEvent("onChange",[t])},onPageClick:function(e,n){t.Event.preventDefault(e),this.loadingData||this.setOffset(this.limit*n)},onPrevClick:function(t){e.preventDefault(t);var n=e.findElement(t,"a");this.loadingData||n.hasClassName("disabled")||this.setOffset(this.offset-this.limit)},onNextClick:function(t){e.preventDefault(t);var n=this,i=n.options.loadNext,s=e.findElement(t,"a"),o=n.offset+n.limit,a=o+n.limit<=n.length;function r(){n.setOffset(o)}n.loadingData||n.isLastPage()||s.hasClassName("disabled")||(!i&&n.onNeedMoreData&&(i=function(t,e){n.onNeedMoreData(t),setTimeout(e.bind(null,null),6e4)}),!a&&i?(n.dispatchEvent("onLoadingStart"),i(n.length,function(t){t&&(n.length=t),r(),n.dispatchEvent("onLoadingEnd")})):r())},onMoreClick:function(){},onLoadingStart:function(){this.loadingData=!0,this.elements.subContainer.addClassName("loading")},onLoadingEnd:function(){this.loadingData=!1,this.elements.subContainer.removeClassName("loading")}});return t.namespace("Controls/Pager",i,t)}.apply(e,i))||(t.exports=s)},function(t,e,n){var i,s;i=[n(1),n(19),n(86),n(3),n(24),n(10)],void 0===(s=function(t,e,n,i,s,o){"use strict";var a=o.extend(s,{name:"uwa-searchform",defaultOptions:{searchText:"",faviconUrl:"",submitButton:"button",className:"nv-search",showCheckbox:!1,showHistory:!1,allowEmpty:!1,dir:"ltr",limit:10},init:function(t){this.historyList=[],this._parent(t),this.buildSkeleton(),this.options.faviconUrl&&this.setFavicon(t.faviconUrl),this.options.searchText&&this.setSearchText(t.searchText)},setOptions:function(t){(t=t||{}).searchHistory&&(t.showHistory=!0),this._parent(t)},setInitialState:function(t,e){this.setFavicon(t),this.setSearchText(e),this.setCheckboxState(e)},buildSkeleton:function(){var e,n,i=t.i18n,s=this.options,o=this.elements;e=t.createElement("div",{class:"search "+this.getClassNames()}),o.form=t.createElement("form",{events:{submit:this.dispatchAsEventListener("onSubmitByHistoryLink")}}).inject(e),o.favicon=t.createElement("img",{class:"favicon",src:t.hosts.uwa+t.paths.css+"base/img/s.gif",width:16,height:16,styles:{display:"none"}}).inject(o.form),o.inputWrapper=t.createElement("span",{class:"input-wrapper"}).inject(o.form),o.inputSearch=t.createElement("input",{class:"search",type:"text",value:"",events:{focus:this.dispatchAsEventListener("onFocusSearch"),blur:this.dispatchAsEventListener("onBlurSearch"),click:this.dispatchAsEventListener("onClickSearch"),keypress:this.dispatchAsEventListener("onSearchKeyPress")}}).inject(o.inputWrapper),o.resetButton=t.createElement("img",{class:"clear",alt:i("Clear"),title:i("Clear"),src:t.hosts.uwa+t.paths.css+"base/img/clear.gif",events:{click:this.dispatchAsEventListener("onResetSearch")},styles:{display:"none"}}).inject(o.inputWrapper),n=s.submitButton&&"string"!=typeof s.submitButton?s.submitButton:"icon"===s.submitButton?t.createElement("a",{"data-icon":"U",class:"uwa-icon uwa-icon-only",alt:t.i18n("Search"),events:{click:this.dispatchAsEventListener("onSubmitByHistoryLink")}}):t.createElement("input",{type:"submit",value:t.i18n("Search")}),o.inputWrapper.addContent(n),o.inputWrapper.lastChild.addClassName("submit"),s.showCheckbox&&(o.checkbox=t.createElement("input",{class:"check",type:"checkbox",title:s.checkboxTitle||"",value:"",events:{click:this.dispatchAsEventListener("onToggleSearch")}}).inject(o.form),"rtl"===s.dir?o.checkbox.setStyle("left","5px"):o.checkbox.setStyle("right","5px")),this.inputSearch=o.inputSearch,this.form=o.form,this.container=e},buildHistoryBox:function(){this.hideHistory();var e=this,n=e.elements,s=n.inputSearch,o=s.getSize(),a=e.getSearchText(),r=e.historyList,l=t.createElement("ul",{class:"uwa-popup-menu",events:{click:function(n){i.stop(n);var s=t.Event.getElement(n).getText();e.setSearchText(s),e.dispatchEvent("onSubmitByHistoryLink",[n])}}});r.forEach(function(t){a!==t&&e.getHistoryBoxItem(t).inject(l)}),t.createElement("li",{class:"uwa-popup-menu-item action",html:{tag:"a",text:t.i18n("Clear recent searches"),events:{click:function(t){i.stop(t),e.clearHistory()}}}}).inject(l),l.inject(n.form),l.setStyles({width:o.width-s.getComputedSize("borderWidth")+"px"}),l.setPosition({x:0,y:o.height-s.getComputedSize("borderWidth")},{relative:s}),n.historyBox=l},getHistoryBoxItem:function(e){return t.createElement("li",{class:"uwa-popup-menu-item",html:{tag:"a",href:"#history:"+e,html:{tag:"span",text:e}}})},setFavicon:function(t,e){var n=this.elements.favicon;n.src=t,n.alt=n.title=e,n[t&&t.length?"show":"hide"]()},setSearchText:function(t){var e=this.elements,n=e.inputSearch,i=e.resetButton;n.value=t||"",i[t&&t.length?"show":"hide"](),this.addHistory(t)},getSearchText:function(){return this.elements.inputSearch.value},setCheckboxState:function(t){var e=this.elements.checkbox;e&&(t?(e.setAttribute("checked","checked"),e.defaultChecked=!0):(e.setAttribute("checked",""),e.defaultChecked=!1))},getCheckboxState:function(){var t=this.elements.checkbox;return t&&"checked"===t.getAttribute("checked")},setHistoryString:function(e){var i=[];t.is(e,"string")&&n.isJson(e)&&(e=n.decode(e)),t.is(e,"array")?i=e:t.is(e)&&(i=String(e).split(":")),i.forEach(this.addHistory,this)},getHistoryString:function(){return n.encode(this.historyList)},addHistory:function(e){var n=this.historyList,i=n.indexOf(e);t.is(e,"string")&&e.length>0&&(i>-1&&n.splice(i,1),n.unshift(e),n.length>this.options.limit&&n.pop(),this.dispatchEvent("updateHistory"))},clearHistory:function(){this.historyList=[],this.dispatchEvent("updateHistory"),this.hideHistory()},hideHistory:function(){this.elements.historyBox&&this.elements.historyBox.destroy(),this.elements.historyBox=null},showHistory:function(){var t=this.historyList,e=this.getSearchText();this.options.showHistory&&(t.length>1||1===t.length&&t[0]!==e)&&this.buildHistoryBox()},toggleHistory:function(){this.options.showHistory&&(this.elements.historyList?this.hideHistory():this.showHistory())},onSubmitSearch:function(t,e){this.hideHistory(),this.setSearchText(t),this.dispatchEvent("submit",[t,e])},onSubmitByHistoryLink:function(t){i.stop(t);var e=this.getSearchText(),n="onSubmitSearch";0!==e.trim().length||this.options.allowEmpty||(n="onResetSearch"),this.dispatchEvent(n,[e,this.getCheckboxState()])},onResetSearch:function(){this.hideHistory(),this.setSearchText(""),this.dispatchEvent("reset")},onToggleSearch:function(){this.dispatchEvent("toggle")},onFocusSearch:function(){this.dispatchEvent("focus"),this.clearDelayed("onBlurSearch")},onBlurSearch:function(){this.options.showHistory&&this.setDelayed("onBlurSearch",this.hideHistory,500,!1,this),this.dispatchEvent("blur")},onClickSearch:function(){this.options.showHistory&&this.toggleHistory()},onSearchKeyPress:function(){this.options.showHistory&&this.hideHistory()}});return t.namespace("Controls/SearchForm",a,t)}.apply(e,i))||(t.exports=s)},function(t,e,n){"use strict";var i,s;i=[n(0),n(5),n(11),n(2),n(3)],void 0===(s=function(t,e,n,i,s){var o=t.h;return e.extend({render:function(t){return o("div",{className:"widget-intro-body"},[o("div",{className:"widget-intro-body-input"},[o(n.Text,{className:t.className,attributes:{name:t.name,placeholder:t.placeholder||"",events:{change:t.onChange?t.onChange:function(){},keydown:function(e){"return"===s.whichKey(e)&&t.onSubmit(e)}}},value:t.value||""}),i.isIn3DDashboard()?o(n.Button,{className:"widget-intro-body-button light-grey medium primary",attributes:{events:{click:t.onSubmit}},value:_("Add")}):o("i",{className:"widget-intro-body-button uwa-icon","data-icon":"3",onClick:t.onSubmit})])])}})}.apply(e,i))||(t.exports=s)},function(t,e,n){"use strict";var i,s;i=[n(1)],void 0===(s=function(t){return{show:function(e){var n=t.createElement("div",{class:"uwa-message simple"});n.setText(_("You are not allowed to use this app with your current role. Please contact your administrator to upgrade your role.")),e.setContent(n)}}}.apply(e,i))||(t.exports=s)},function(t,e,n){"use strict";var i,s;i=[n(181),n(286),n(225),n(235),n(401),n(402),n(403),n(309),n(404),n(287),n(308)],void 0===(s=function(t,e,n,i,s,o,a,r,l,c,u){return{BarChart:t,HbarChart:e,LineChart:n,PieChart:i,StackedhbarChart:s,StackedlineChart:o,StackedvbarChart:a,TableChart:r,Vbar3dChart:l,VbarChart:c,MapChart:u}}.apply(e,i))||(t.exports=s)},function(t,e,n){"use strict";var i,s;i=[n(1),n(9),n(22),n(15),n(3),n(86),n(18),n(16),n(25),n(108),n(2),n(396),n(4),n(70),n(17)],void 0===(s=function(t,e,n,i,s,o,a,r,l,c,u,h,d,p,m){var f=e.extend(n,{enterCount:0,init:function(t){this.setOptions(t)},isHoveringItself:function(){return this.getOption("moduleId")===this.getDraggedModuleId()},isDropAllowed:function(){var t=this.getHoveredModule(),e=this.getDraggedModule();if(t&&e)return h.isComparableWith(this.getHoveredModule(),this.getDraggedModule())},getDraggedModule:function(){return m.getById(this.getDraggedModuleId())},getHoveredModule:function(){return m.getById(this.getOption("moduleId"))},displayLightbox:function(t){return this.lightbox=new c({className:t.className||"",fxOptions:{duration:0}}),this.lightbox.setContent(t.html||{tag:"div",text:t.text}),setTimeout(function(){this.lightbox.inject(this.getOption("moduleContainer")).open()}.bind(this),0),this},removeLightbox:function(){return this.lightbox&&(this.lightbox.destroy(),this.lightbox=null),this},enter:function(){return this.enterCount++,this},leave:function(){return this.enterCount--,this},resetEnterCount:function(){return this.enterCount=0,this},isOddlyDragEvent:function(){return this.enterCount>0},saveDraggedModuleId:function(){return parent._netvibes_dragged_m_id=this.getOption("moduleId"),this},getDraggedModuleId:function(){return parent._netvibes_dragged_m_id},resetDraggedModuleId:function(){return parent._netvibes_dragged_m_id=null,this}});var g="data-file-drop-zone";return{registerComparisonDnD:function(t){window.require(["DS/DataDragAndDrop/DataDragAndDrop"],function(e){!function(t,e){var n=new f({moduleId:e.moduleId,moduleContainer:e.moduleContainer});t.draggable(e.dragEl,{start:function(){n.saveDraggedModuleId().displayLightbox({className:"nv-compare-self",text:_("Select the chart to be dragged, drag to the desire chart to be compared then release.")})},stop:function(){n.resetDraggedModuleId().removeLightbox()}}),t.droppable(e.dropEl,{enter:function(t,e){var i,s;e.preventDefault(),n.isHoveringItself()||n.isOddlyDragEvent()||(n.isDropAllowed()?(s="nv-compare-allowed",i=_('Dropping this here will generate a new app comparing "{0}" to "{1}". If that\'s not what you intended, simply drag the app outside and release to cancel.').format(n.getDraggedModule().getTitle(),n.getHoveredModule().getTitle())):(s="nv-compare-forbidden",i=_("Sorry {0}, I'm afraid I can't do that").format(u.User.displayName||_("Anonymous"))),n.displayLightbox({className:s,text:i})),n.enter()},leave:function(t,e){e.preventDefault(),n.leave(),n.isHoveringItself()||n.isOddlyDragEvent()||n.removeLightbox()},drop:function(){if(!n.isHoveringItself()){n.removeLightbox();var t=n.isDropAllowed();t&&p.add(h.getSocialPackComparisonData(t,n.getHoveredModule(),n.getDraggedModule()))}n.resetEnterCount()}})}(e,t)})},registerFileDropZone:function(t){window.require(["DS/DataDragAndDrop/DataDragAndDrop"],function(e){!function(t,e){var n=new f({moduleId:e.moduleId,moduleContainer:e.moduleContainer});e.dropEl.setAttribute(g,"true"),t.droppable(e.dropEl,{enter:function(t,i){i.preventDefault();var s=i.dataTransfer.types[0];e.getQuery()||"text/plain"!==s&&"Text"!==s?n.displayLightbox({text:_("Sorry {0}, I'm afraid I can't do that").format(u.User.displayName||_("Anonymous")),className:"nv-compare-forbidden"}):n.isOddlyDragEvent()||n.displayLightbox({html:{class:"uwa-icon",tag:"div",attributes:{"data-icon":"3"}},className:"nv-overlay-drag"}),n.enter()},leave:function(t,e){e.preventDefault(),n.leave(),n.isOddlyDragEvent()||n.removeLightbox()},drop:function(t){var i=o.decode(t);if(n.resetEnterCount(),n.removeLightbox(),-1!==["xls","xlsx","csv","ods","txt","tsv"].indexOf(i.data.items[0].displayType)){var s=i.data.items[0],r=s.envId,l=s.objectId,c=s.displayName,h=u.get3DDService("3DDrive",r),d=a.format("{0}/resources/3ddrive/v1/bos/{1}/download?tenant={2}",h,l,r);e.onDrop({downloadUrl:d,fileName:c})}else n.displayLightbox({text:_("Sorry {0}, This file type is not supported. Please drag a spreadsheet file : .xls, .xlsx, .csv, .ods, .txt, .tsv").format(u.User.displayName||_("Anonymous")),className:"nv-compare-forbidden"}),setTimeout(function(){n.removeLightbox()},2e3)}})}(e,t)})},unregisterFileDropZone:function(t){window.require(["DS/DataDragAndDrop/DataDragAndDrop"],function(e){!function(t,e){"true"===e.dropEl.getAttribute(g)&&(e.dropEl.removeAttribute(g),t.clean(e.dropEl))}(e,t)})}}}.apply(e,i))||(t.exports=s)},function(t,e,n){"use strict";var i,s;i=[n(2),n(426),n(296),n(0)],void 0===(s=function(t,e,n,i){return{introBuilder:function(s){var o=i.h,a=s&&!s.isShared()&&!s.isPreview(),r=new e({serviceName:_("Library"),serviceId:"library",serviceDesc:_("Compile a complete list of sources that is searchable, shareable and Potion-ready to track and analyze precisely what matters to you."),control:!a||o(n,{value:t.isIn3DDPreview()?_("Pin to dashboard"):_("Configure"),className:"light-grey medium primary",onClick:function(){t.isIn3DDPreview()?r.pinToDashboard():s.openWizard()}})});return r}}}.apply(e,i))||(t.exports=s)},function(t,e,n){"use strict";var i;void 0===(i=function(){return[{value:"",label:_("Any language")},{value:"en_US",label:_("English (US)")},{value:"en_GB",label:_("English (UK)")},{value:"fr_FR",label:_("French")},{value:"de_DE",label:_("German")},{value:"es_ES",label:_("Spanish (Spain)")},{value:"es_LA",label:_("Spanish")},{value:"ko_KR",label:_("Korean")},{value:"it_IT",label:_("Italian")},{value:"ar_AR",label:_("Arabic")},{value:"da_DK",label:_("Danish")},{value:"nl_NL",label:_("Dutch")},{value:"ru_RU",label:_("Russian")},{value:"sr_RS",label:_("Serbian")},{value:"fi_FI",label:_("Finnish")},{value:"el_GR",label:_("Greek")},{value:"he_IL",label:_("Hebrew")},{value:"pt_PT",label:_("Portuguese (Portugal)")},{value:"pt_BR",label:_("Portuguese (Brazil)")},{value:"sv_SE",label:_("Swedish")},{value:"hu_HU",label:_("Hungarian")},{value:"is_IS",label:_("Icelandic")},{value:"vi_VN",label:_("Vietnamese")},{value:"pl_PL",label:_("Polish")},{value:"ja_JP",label:_("Japanese")},{value:"bg_BG",label:_("Bulgarian")},{value:"nb_NO",label:_("Norwegian (bokmal)")},{value:"nn_NO",label:_("Norwegian (nynorsk)")},{value:"tr_TR",label:_("Turkish")},{value:"cs_CZ",label:_("Czech")},{value:"ro_RO",label:_("Romanian")},{value:"id_ID",label:_("Indonesian")},{value:"sk_SK",label:_("Slovak")},{value:"et_EE",label:_("Estonian")},{value:"lt_LT",label:_("Lithuanian")},{value:"ms_MY",label:_("Malay")},{value:"sq_AL",label:_("Albanian")},{value:"uk_UA",label:_("Ukrainian")},{value:"hr_HR",label:_("Croatian")},{value:"ca_ES",label:_("Catalan")},{value:"fa_IR",label:_("Persian")},{value:"sl_SI",label:_("Slovenian")},{value:"zh_HK",label:_("Traditional Chinese (Hong Kong)")},{value:"zh_TW",label:_("Traditional Chinese (Taiwan)")},{value:"zh_CN",label:_("Simplified Chinese (China)")},{value:"th_TH",label:_("Thai")},{value:"tl_PH",label:_("Filipino")},{value:"af_ZA",label:_("Afrikaans")},{value:"az_AZ",label:_("Azerbaijani")},{value:"be_BY",label:_("Belarusian")},{value:"bn_IN",label:_("Bengali")},{value:"bs_BA",label:_("Bosnian")},{value:"cy_GB",label:_("Welsh")},{value:"eo_EO",label:_("Esperanto")},{value:"eu_ES",label:_("Basque")},{value:"fb_LT",label:_("Leet Speak")},{value:"fo_FO",label:_("Faroese")},{value:"fr_CA",label:_("French (Canada)")},{value:"fy_NL",label:_("Frisian")},{value:"ga_IE",label:_("Irish")},{value:"gl_ES",label:_("Galician")},{value:"hi_IN",label:_("Hindi")},{value:"hy_AM",label:_("Armenian")},{value:"ka_GE",label:_("Georgian")},{value:"km_KH",label:_("Khmer")},{value:"ku_TR",label:_("Kurdish")},{value:"la_VA",label:_("Latin")},{value:"lv_LV",label:_("Latvian")},{value:"mk_MK",label:_("Macedonian")},{value:"ml_IN",label:_("Malayalam")},{value:"ne_NP",label:_("Nepali")},{value:"pa_IN",label:_("Punjabi")},{value:"ps_AF",label:_("Pashto")},{value:"sw_KE",label:_("Swahili")},{value:"ta_IN",label:_("Tamil")},{value:"te_IN",label:_("Telugu")}]}.apply(e,[]))||(t.exports=i)},function(t,e,n){"use strict";var i,s;i=[n(2),n(438),n(10),n(8)],void 0===(s=function(t,e,n,i){var s={hours:{pluralLabel:_("hours"),label:_("hour"),limit:24},days:{pluralLabel:_("days"),label:_("day"),limit:7},weeks:{pluralLabel:_("weeks"),label:_("week"),limit:4},months:{pluralLabel:_("months"),label:_("month"),limit:2}},o={hourly:{unit:"hours",count:24},daily:{unit:"days",count:7},weekly:{unit:"weeks",count:4},monthly:{unit:"months",count:2},yearly:{unit:"months",count:2}},a=n.extend({init:function(n,i,s){var o;this._parent({}),this.compound=n,this.currentIng=i,this.elements={},this.hasBacklog=!0,this.range=s,o=e.getRawCompound("payloads",n.payload),this.payloadLabel=o.description.toLowerCase(),this.payloadLabelPlural=o.pluralDescription.toLowerCase(),this.triggerLimits=this.compound.backlog_limits||{},!n.hasOwnProperty("forced_backlog")&&t.isAllowed("potion_history")?(this.buildHTML(),this.addEvent("onInjected",this.initValues.bind(this))):this.hasBacklog=!1},initValues:function(){var t={type:"count",count:0},e=!1;this.currentIng.reference&&this.currentIng.reference===this.compound.reference&&this.currentIng.config.backlog&&(t=UWA.clone(this.currentIng.config.backlog),e=!0),"count"!==t.type?(this.elements.backlogType[1].check(),this.elements.periodUnit.setValue(t.unit),this.elements.periodCount.setValue(t.count.toString())):(this.elements.periodUnit.setValue("days"),this.elements.periodCount.setValue("7"),this.elements.periodCount.setDisabled(),this.elements.periodUnit.setDisabled()),this.range&&!e&&this.updatePeriod(this.range,!0)},updatePeriod:function(t,e){(e||t!==this.range)&&(this.range=t,this.elements.periodUnit.setValue(o[t].unit),this.onChangeUnit(),this.elements.periodCount.setValue(""+o[t].count))},getValue:function(){return App.Utils.getInputsValue(this.elements.container)},getBacklogPeriodLimit:function(){var t={};return Object.keys(s).map(function(e){t[e]=s[e].limit}),this.triggerLimits.hasOwnProperty("period")&&Object.keys(this.triggerLimits.period).forEach(function(e){t[e]=Math.min(this.triggerLimits.period[e],t[e])},this),t},getPeriodUnitOptions:function(t){var e=t<2?"label":"pluralLabel";return this.backlogLimits=this.getBacklogPeriodLimit(),Object.keys(this.backlogLimits).map(function(t){return{label:s[t][e],value:t}})},onChangeBacklogType:function(){var t="count"===this.getValue().type;this.elements.periodCount.setDisabled(t),this.elements.periodUnit.setDisabled(t),this.dispatchEvent("onChange",this.getValue())},onChangeUnit:function(){for(var t=this.elements.periodUnit.getValue()[0],e=this.elements.periodCount.getValue()[0],n=[],i=1;i<this.backlogLimits[t]+1;i++)n.push({label:i,value:i});this.elements.periodCount.putOptions(n,!0),this.elements.periodCount.setValue(e)},pluralizeUnits:function(){var t=this.elements.periodCount.getValue()[0];this.elements.periodUnit.putOptions(this.getPeriodUnitOptions(t))},buildHTML:function(){this.elements.backlogType=[],this.elements.container=UWA.createElement("div",{class:"uwa-schemaform-field input-stream",content:[UWA.createElement("div",{class:"uwa-schemaform-field-title",text:_("Include")}),UWA.createElement("div",{class:"uwa-schemaform uwa-schemaform-root backlog-selector",content:[UWA.createElement("div",{class:"backlog-type",content:[this.elements.backlogType[0]=new i.Radio({className:"green",attributes:{name:"type",value:"count",checked:!0},events:{onChange:this.onChangeBacklogType.bind(this)}}),UWA.createElement("label",{text:_("Only the new {0}").format(this.payloadLabel)})]}),UWA.createElement("div",{class:"backlog-type",content:[this.elements.backlogType[1]=new i.Radio({className:"green",attributes:{name:"type",value:"period",checked:!1},events:{onChange:this.onChangeBacklogType.bind(this)}}),UWA.createElement("div",{content:[UWA.createElement("span",{text:_("{0} from the past").format(this.payloadLabelPlural.ucfirst())}),this.elements.periodCount=new i.Select({className:"backlog-unit",options:[{value:1,label:"1"}],attributes:{name:"count"},events:{onChange:this.pluralizeUnits.bind(this)}}),this.elements.periodUnit=new i.Select({className:"backlog-time",options:this.getPeriodUnitOptions(1),attributes:{name:"unit"},events:{onChange:this.onChangeUnit.bind(this)}})]})]})]})]})}});return a.getLitteralValue=function(t){if(t&&t.unit){var e=t<2?"label":"pluralLabel";return _("From the past {0}").format(t.count+" "+s[t.unit][e])}},a}.apply(e,i))||(t.exports=s)},function(t,e,n){var i;!function(s){"use strict";var o="undefined"==typeof window?null:window;void 0===(i=function(){return function t(e){var n=function(e){return t(e)};if(n.version="0.8.3",n.removed=[],!e||!e.document||9!==e.document.nodeType)return n.isSupported=!1,n;var i=e.document,s=i,o=e.DocumentFragment,a=e.HTMLTemplateElement,r=e.NodeFilter,l=e.NamedNodeMap||e.MozNamedAttrMap,c=e.Text,u=e.Comment,h=e.DOMParser;if("function"==typeof a){var d=i.createElement("template");d.content&&d.content.ownerDocument&&(i=d.content.ownerDocument)}var p=i.implementation,m=i.createNodeIterator,f=i.getElementsByTagName,g=i.createDocumentFragment,v=s.importNode,b={};n.isSupported=void 0!==p.createHTMLDocument&&9!==i.documentMode;var y=function(t,e){for(var n=e.length;n--;)"string"==typeof e[n]&&(e[n]=e[n].toLowerCase()),t[e[n]]=!0;return t},w=function(t){var e,n={};for(e in t)t.hasOwnProperty(e)&&(n[e]=t[e]);return n},x=null,C=y({},["a","abbr","acronym","address","area","article","aside","audio","b","bdi","bdo","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","content","data","datalist","dd","decorator","del","details","dfn","dir","div","dl","dt","element","em","fieldset","figcaption","figure","font","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","img","input","ins","kbd","label","legend","li","main","map","mark","marquee","menu","menuitem","meter","nav","nobr","ol","optgroup","option","output","p","pre","progress","q","rp","rt","ruby","s","samp","section","select","shadow","small","source","spacer","span","strike","strong","style","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","tr","track","tt","u","ul","var","video","wbr","svg","altglyph","altglyphdef","altglyphitem","animatecolor","animatemotion","animatetransform","circle","clippath","defs","desc","ellipse","filter","font","g","glyph","glyphref","hkern","image","line","lineargradient","marker","mask","metadata","mpath","path","pattern","polygon","polyline","radialgradient","rect","stop","switch","symbol","text","textpath","title","tref","tspan","view","vkern","feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feMerge","feMergeNode","feMorphology","feOffset","feSpecularLighting","feTile","feTurbulence","math","menclose","merror","mfenced","mfrac","mglyph","mi","mlabeledtr","mmuliscripts","mn","mo","mover","mpadded","mphantom","mroot","mrow","ms","mpspace","msqrt","mystyle","msub","msup","msubsup","mtable","mtd","mtext","mtr","munder","munderover","#text"]),_=null,S=y({},["accept","action","align","alt","autocomplete","background","bgcolor","border","cellpadding","cellspacing","checked","cite","class","clear","color","cols","colspan","coords","datetime","default","dir","disabled","download","enctype","face","for","headers","height","hidden","high","href","hreflang","id","ismap","label","lang","list","loop","low","max","maxlength","media","method","min","multiple","name","noshade","novalidate","nowrap","open","optimum","pattern","placeholder","poster","preload","pubdate","radiogroup","readonly","rel","required","rev","reversed","rows","rowspan","spellcheck","scope","selected","shape","size","span","srclang","start","src","step","style","summary","tabindex","title","type","usemap","valign","value","width","xmlns","accent-height","accumulate","additivive","alignment-baseline","ascent","attributename","attributetype","azimuth","basefrequency","baseline-shift","begin","bias","by","clip","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","cx","cy","d","dx","dy","diffuseconstant","direction","display","divisor","dur","edgemode","elevation","end","fill","fill-opacity","fill-rule","filter","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","fx","fy","g1","g2","glyph-name","glyphref","gradientunits","gradienttransform","image-rendering","in","in2","k","k1","k2","k3","k4","kerning","keypoints","keysplines","keytimes","lengthadjust","letter-spacing","kernelmatrix","kernelunitlength","lighting-color","local","marker-end","marker-mid","marker-start","markerheight","markerunits","markerwidth","maskcontentunits","maskunits","max","mask","mode","min","numoctaves","offset","operator","opacity","order","orient","orientation","origin","overflow","paint-order","path","pathlength","patterncontentunits","patterntransform","patternunits","points","preservealpha","r","rx","ry","radius","refx","refy","repeatcount","repeatdur","restart","result","rotate","scale","seed","shape-rendering","specularconstant","specularexponent","spreadmethod","stddeviation","stitchtiles","stop-color","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke","stroke-width","surfacescale","targetx","targety","transform","text-anchor","text-decoration","text-rendering","textlength","u1","u2","unicode","values","viewbox","visibility","vert-adv-y","vert-origin-x","vert-origin-y","word-spacing","wrap","writing-mode","xchannelselector","ychannelselector","x","x1","x2","y","y1","y2","z","zoomandpan","accent","accentunder","bevelled","close","columnsalign","columnlines","columnspan","denomalign","depth","display","displaystyle","fence","frame","largeop","length","linethickness","lspace","lquote","mathbackground","mathcolor","mathsize","mathvariant","maxsize","minsize","movablelimits","notation","numalign","open","rowalign","rowlines","rowspacing","rowspan","rspace","rquote","scriptlevel","scriptminsize","scriptsizemultiplier","selection","separator","separators","stretchy","subscriptshift","supscriptshift","symmetric","voffset","xlink:href","xml:id","xlink:title","xml:space","xmlns:xlink"]),E=null,k=null,T=!0,A=!1,I=!1,N=!1,D=/\{\{[\s\S]*|[\s\S]*\}\}/gm,O=/<%[\s\S]*|[\s\S]*%>/gm,P=!1,F=!1,M=!1,L=!1,R=!0,j=!0,V=y({},["audio","head","math","script","style","svg","video"]),B=y({},["audio","video","img","source"]),z=y({},["alt","class","for","id","label","name","pattern","placeholder","summary","title","value","style","xmlns"]),W=null,U=i.createElement("form"),H=function(t){n.removed.push({element:t});try{t.parentNode.removeChild(t)}catch(e){t.outerHTML=""}},q=function(t,e){n.removed.push({attribute:e.getAttributeNode(t),from:e}),e.removeAttribute(t)},G=function(t){return m.call(t.ownerDocument||t,t,r.SHOW_ELEMENT|r.SHOW_COMMENT|r.SHOW_TEXT,function(){return r.FILTER_ACCEPT},!1)},Y=function(t){var e,i;if(tt("beforeSanitizeElements",t,null),function(t){if(t instanceof c||t instanceof u)return!1;if("string"!=typeof t.nodeName||"string"!=typeof t.textContent||"function"!=typeof t.removeChild||!(t.attributes instanceof l)||"function"!=typeof t.removeAttribute||"function"!=typeof t.setAttribute)return!0;return!1}(t))return H(t),!0;if(e=t.nodeName.toLowerCase(),tt("uponSanitizeElement",t,{tagName:e}),!x[e]||E[e]){if(j&&!V[e]&&"function"==typeof t.insertAdjacentHTML)try{t.insertAdjacentHTML("AfterEnd",t.innerHTML)}catch(t){}return H(t),!0}return!I||t.firstElementChild||t.content&&t.content.firstElementChild||!/</g.test(t.textContent)||(n.removed.push({element:t.cloneNode()}),t.innerHTML=t.textContent.replace(/</g,"&lt;")),N&&3===t.nodeType&&(i=(i=(i=t.textContent).replace(D," ")).replace(O," "),t.textContent!==i&&(n.removed.push({element:t.cloneNode()}),t.textContent=i)),tt("afterSanitizeElements",t,null),!1},X=/^data-[\-\w.\u00B7-\uFFFF]/,K=/^(?:(?:(?:f|ht)tps?|mailto|tel):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i,J=/^(?:\w+script|data):/i,Q=/[\x00-\x20\xA0\u1680\u180E\u2000-\u2029\u205f\u3000]/g,$=function(t){var s,o,a,r,l,c,u,h;if(tt("beforeSanitizeAttributes",t,null),c=t.attributes){for(u={attrName:"",attrValue:"",keepAttr:!0},h=c.length;h--;)if(s=c[h],o=s.name,a=s.value,r=o.toLowerCase(),u.attrName=r,u.attrValue=a,u.keepAttr=!0,tt("uponSanitizeAttribute",t,u),a=u.attrValue,"name"===r&&"IMG"===t.nodeName&&c.id?(l=c.id,c=Array.prototype.slice.apply(c),q("id",t),q(o,t),c.indexOf(l)>h&&t.setAttribute("id",l.value)):("id"===o&&t.setAttribute(o,""),q(o,t)),u.keepAttr&&(!R||"id"!==r&&"name"!==r||!(a in e||a in i||a in U))){if(N&&(a=(a=a.replace(D," ")).replace(O," ")),T&&X.test(r));else{if(!_[r]||k[r])continue;if(z[r]);else if(K.test(a.replace(Q,"")));else if("src"===r&&0===a.indexOf("data:")&&B[t.nodeName.toLowerCase()]);else if(A&&!J.test(a.replace(Q,"")));else if(a)continue}try{t.setAttribute(o,a),n.removed.pop()}catch(t){}}tt("afterSanitizeAttributes",t,null)}},Z=function(t){var e,n=G(t);for(tt("beforeSanitizeShadowDOM",t,null);e=n.nextNode();)tt("uponSanitizeShadowNode",e,null),Y(e)||(e.content instanceof o&&Z(e.content),$(e));tt("afterSanitizeShadowDOM",t,null)},tt=function(t,e,i){b[t]&&b[t].forEach(function(t){t.call(n,e,i,W)})};return n.sanitize=function(t,i){var a,r,l,c,u;if(t||(t=""),"string"!=typeof t){if("function"!=typeof t.toString)throw new TypeError("toString is not a function");t=t.toString()}if(!n.isSupported)return"object"==typeof e.toStaticHTML||"function"==typeof e.toStaticHTML?e.toStaticHTML(t):t;if(function(t){"object"!=typeof t&&(t={}),x="ALLOWED_TAGS"in t?y({},t.ALLOWED_TAGS):C,_="ALLOWED_ATTR"in t?y({},t.ALLOWED_ATTR):S,E="FORBID_TAGS"in t?y({},t.FORBID_TAGS):{},k="FORBID_ATTR"in t?y({},t.FORBID_ATTR):{},T=!1!==t.ALLOW_DATA_ATTR,A=t.ALLOW_UNKNOWN_PROTOCOLS||!1,I=t.SAFE_FOR_JQUERY||!1,N=t.SAFE_FOR_TEMPLATES||!1,P=t.WHOLE_DOCUMENT||!1,F=t.RETURN_DOM||!1,M=t.RETURN_DOM_FRAGMENT||!1,L=t.RETURN_DOM_IMPORT||!1,R=!1!==t.SANITIZE_DOM,j=!1!==t.KEEP_CONTENT,N&&(T=!1),M&&(F=!0),t.ADD_TAGS&&(x===C&&(x=w(x)),y(x,t.ADD_TAGS)),t.ADD_ATTR&&(_===S&&(_=w(_)),y(_,t.ADD_ATTR)),j&&(x["#text"]=!0),Object&&"freeze"in Object&&Object.freeze(t),W=t}(i),n.removed=[],!F&&!P&&-1===t.indexOf("<"))return t;if(!(a=function(t){var e,n;try{e=(new h).parseFromString(t,"text/html")}catch(t){}return e&&e.documentElement||(e=p.createHTMLDocument(""),(n=e.body).parentNode.removeChild(n.parentNode.firstElementChild),n.outerHTML=t),"function"==typeof e.getElementsByTagName?e.getElementsByTagName(P?"html":"body")[0]:f.call(e,P?"html":"body")[0]}(t)))return F?null:"";for(c=G(a);r=c.nextNode();)3===r.nodeType&&r===l||Y(r)||(r.content instanceof o&&Z(r.content),$(r),l=r);if(F){if(M)for(u=g.call(a.ownerDocument);a.firstChild;)u.appendChild(a.firstChild);else u=a;return L&&(u=v.call(s,u,!0)),u}return P?a.outerHTML:a.innerHTML},n.addHook=function(t,e){"function"==typeof e&&(b[t]=b[t]||[],b[t].push(e))},n.removeHook=function(t){b[t]&&b[t].pop()},n.removeHooks=function(t){b[t]&&(b[t]=[])},n.removeAllHooks=function(){b={}},n}(o)}.call(e,n,e,t))||(t.exports=i)}()},function(t,e,n){var i,s;i=[n(1),n(13),n(9),n(22),n(86)],void 0===(s=function(t,e,n,i,s){"use strict";var o=n.extend(i,{intervalId:null,timeoutId:null,defaultOptions:{isUploadSuccess:function(t){return"uploaded"===t.status},isUploadFailed:function(t){return"failed"===t.status},formElement:"undefined",onUpload:"",onUploadSuccess:"",onUploadFailed:"",frameIdPrefix:"",timeout:1e4,polling:1e3,urls:{statusScript:"",uploadScript:""}},init:function(e){this.setOptions(e),this.options.formElement=t.extendElement(e.formElement);var n=this.buildIframe();this.buildFormRequirements(n),this.options.formElement.addEvent("submit",function(t){void 0!==e.urls.statusScript&&this.setTimer(t),this.options.onUpload()}.bind(this,n))},buildIframe:function(){var n=this.options,i=n.frameIdPrefix+e.random(1,1e5),s=t.createElement("div"),o=!1;return t.createElement("iframe",{src:"about:blank",id:i,name:i,styles:{position:"absolute",top:"-2000px",left:"0px"}}).inject(s).addEvent("load",function(){o&&n.onUploadSuccess(),o=!0}),document.body.appendChild(s),i},buildFormRequirements:function(e){var n=this.options.formElement;n.setAttributes({target:e,method:"post",enctype:"multipart/form-data",action:this.options.urls.uploadScript}),t.createElement("input",{type:"hidden",name:"frameId",value:e}).inject(n)},setTimer:function(t){this.intervalId=setInterval(this.checkStatus.bind(this,t),this.options.polling),this.timeoutId=setTimeout(function(){clearInterval(this.intervalId),this.options.onUploadFailed({status:"failed",details:{errors:{TimeoutError:"Upload timeout after "+this.options.timeout+"ms."}}})}.bind(this),this.options.timeout)},checkStatus:function(t){s.request(this.options.urls.statusScript+"?format=jsonp&frameId="+t,{onComplete:function(t){if(this.options.isUploadSuccess(t))this.options.onUploadSuccess(t);else{if(!this.options.isUploadFailed(t))return;this.options.onUploadFailed(t)}clearTimeout(this.timeoutId),clearInterval(this.intervalId)}.bind(this)})}});return t.namespace("Services/Upload",o,t)}.apply(e,i))||(t.exports=s)},function(t,e,n){"use strict";var i,s;i=[n(1),n(9),n(432)],void 0===(s=function(t,e,n){return e.extend({init:function(e,n){this.data=e,this.parentContainer=n,this.container=t.createElement("div",{class:"mosaic-container"}),Object.keys(e).forEach(this.buildCells.bind(this)),this.container.inject(n)},buildCells:function(e,i){var s=this.data[e],o=t.createElement("div",{class:"nv-mosaic "+e+(s.dual?" dual-cell":"")+(i<3?" first-cell":""),styles:{"background-color":s.color}});s.clickEvt&&(o.addEvent("click",function(){s.clickEvt()}),o.addClassName("clickable")),t.createElement("div",{text:s.icon,class:"info-icon"}).inject(o),s.invert&&t.createElement("div",{text:s.icon,class:"info-icon-invert",styles:{color:s.color}}).inject(o);var a=t.createElement("div",{text:s.count,class:"info-value"});s.invert&&a.setStyle("margin-top","100px"),a.inject(o),1===s.count&&(e=e.slice(0,-1));var r=t.createElement("div",{text:s.translation,class:"info-name"}).inject(o);new n(r,s.toolTip),o.inject(this.container)},onResize:function(){var t=this.parentContainer.getDimensions(),e=this.container.getElements(".nv-mosaic"),n="";if(0!==t.width){t.width<230?n=" six-rows":t.width<420?n=" four-rows":t.width<690&&(n=" two-rows");for(var i=0;i<e.length;i++)e[i].className=e[i].className.replace(/ ((two|four|six)-rows)/g,""),e[i].className+=n}}})}.apply(e,i))||(t.exports=s)},function(t,e,n){var i,s;i=[n(1),n(25)],void 0===(s=function(t,e){"use strict";var n={getFromProvider:function(n,i){if(!e.proxies[n])throw new Error("Not supported UWA.Services.Mail proviver");switch(n){case"pop":case"gmail":return e.request(e.proxies[n],t.merge({method:"POST",type:"json"},i));default:t.log("invalid request type")}}};return t.namespace("Services/Mail",n,t)}.apply(e,i))||(t.exports=s)},function(t,e,n){"use strict";var i,s;i=[n(138),n(10),n(59),n(8),n(99),n(4),n(2)],void 0===(s=function(t,e,n,i,s,o,a){return e.extend({facets:{people:_("People"),organization:_("Organization"),event:_("Event"),location:_("Location"),expressions:_("Expressions"),category:_("Category")},init:function(t){this.options=t||{},this.elements={},this.blacklist={},this.refreshWidget=!1,this.initBlacklistPreference(),this.initBlacklist()},initBlacklistPreference:function(){var t=this.options.widget,e="tagcloud"===t.getValue("mainView")||t.getValue("types")&&t.getValue("types").test(/term/),n={name:"visibleFacets",label:_("Metrics")};e?(void 0===t.getValue("visibleFacets")&&t.setValue("visibleFacets",JSON.stringify(s.getBlacklistableFacets())),a.isIn3DDashboard()?(n.type="hidden",t.addPreference(n),s.getBlacklistableFacets().forEach(function(e){t.addPreference({name:"visibleFacet_"+e,label:s.getFacetTitle(e),type:"boolean"}),t.getValue("visibleFacets").includes(e)&&t.setValue("visibleFacet_"+e,!0)})):(n.type="checklist",n.options=[],s.getBlacklistableFacets().forEach(function(t){n.options.push({label:s.getFacetTitle(t),value:t})}),t.addPreference(n))):(n.type="hidden",t.addPreference(n),s.getBlacklistableFacets().forEach(function(e){var n=t.getPreference("visibleFacet_"+e);n&&(n.type="hidden",t.addPreference(e))}))},initBlacklist:function(){this.blacklist.blacklistValue=o.tryJSONParse(this.options.widget.getValue("blacklistValue")),this.blacklist.visibleFacets=this.options.widget.getValue("visibleFacets")},setPreference:function(t){this.options.widget.setValue(t,"blacklistValue"===t?JSON.stringify(this.blacklist[t]):this.blacklist[t]),this.refreshWidget=!0},getBlacklistValue:function(){return this.blacklist.blacklistValue},getVisibleFacets:function(){return this.blacklist.visibleFacets},getBlacklistFacets:function(){var t=[];return this.getVisibleFacets()&&s.getBlacklistableFacets().forEach(function(e){this.blacklist.visibleFacets.includes(e)||t.push(e)}.bind(this)),t},getBlacklistCount:function(){return this.blacklist.blacklistValue?this.blacklist.blacklistValue.length:0},getBlacklistPreference:function(){var t=this.options.widget;if(a.isIn3DDashboard()){if(!s.getBlacklistableFacets().every(function(e){return t.hasPreference("visibleFacet_"+e)}))return;var e=[];return s.getBlacklistableFacets().forEach(function(n){t.getBool("visibleFacet_"+n)&&e.push(n)}),e}return t.getValue("visibleFacets")},addBlacklistValue:function(t){this.blacklist.blacklistValue||(this.blacklist.blacklistValue=[]),this.blacklist.blacklistValue.includes(t)||this.blacklist.blacklistValue.push(t),this.setPreference("blacklistValue")},removeAllBlacklistValues:function(){this.blacklist.blacklistValue="",this.setPreference("blacklistValue")},removeBlacklistValue:function(t){this.blacklist.blacklistValue=this.blacklist.blacklistValue.filter(function(e){return e!==t}),this.setPreference("blacklistValue")},setBlacklist:function(){this.getBlacklistPreference()!==this.getVisibleFacets()&&(this.setBlacklistPreference(),this.setVisibleFacets(this.getBlacklistPreference()))},setBlacklistPreference:function(){a.isIn3DDashboard()&&this.options.widget.setValue("visibleFacets",JSON.stringify(this.getBlacklistPreference()))},setVisibleFacets:function(t){this.blacklist.visibleFacets=t,this.setPreference("visibleFacets")},openBlacklistOverlay:function(e){this._blacklistOverlay||(this._blacklistOverlay=new t({name:"blacklist",events:{onClose:function(){this.refreshWidget&&(this.dispatchEvent("onRefreshWidget"),this.dispatchEvent("onCloseOverlay"),this.refreshWidget=!1)}.bind(this)}})),this._blacklistOverlay.setTitle(_("Hidden values"),"delete");var n=UWA.createElement("div",{class:"lightbox-section-group"});this.elements.lightboxContent=UWA.createElement("div",{class:"lightbox-section"}).inject(n),this.displayTagsElements(),this.elements.lightboxButtons=UWA.createElement("div",{class:"lightbox-button-group",html:[new i.Button({className:"medium dark-grey done-lightbox",value:_("Done"),events:{onClick:function(){this._blacklistOverlay.close()}.bind(this)}})]}).inject(n),this._blacklistOverlay.setContent(n).inject(e.container.getParent(".moduleFrame")||e.container).open()},displayTagsElements:function(){var t=[];this.blacklist.blacklistValue.length?(this.blacklist.blacklistValue.forEach(function(e){t.push(new n({value:e,className:"green",closable:!0,events:{onClose:function(){this.removeBlacklistValue(e),this.displayTagsElements()}.bind(this)}}))}.bind(this)),t.push(UWA.createElement("p",{text:_("Clear all hidden values"),class:"lightbox-clear-button",events:{click:function(){this.removeAllBlacklistValues(),this.displayTagsElements()}.bind(this)}}))):t=UWA.createElement("p",{text:_("No hidden values.")}),this.elements.lightboxContent.setContent(t)}})}.apply(e,i))||(t.exports=s)},function(t,e,n){"use strict";var i,s;i=[n(1),n(349),n(2),n(41)],void 0===(s=function(t,e,n,i){var s=t.createElement;return e.extend({init:function(t){t=Object.assign({message:_("Loading...")},t),Object.assign(t,{closeable:!1,className:(t.className?" ":"")+"nv-overlay-loading"}),this._parent(t)},buildSkeleton:function(){this._parent(),this.elements.container.setContent(s("div",{html:[s("span",{class:"message",text:this.options.message}),this.elements.spinner=new i({autostart:!1,color:n.isIn3DDashboard()?"#3d6680":"#fff"})]}))},toggle:function(t){t?this.elements.spinner.start():this.elements.spinner.stop(),this._parent(t)}})}.apply(e,i))||(t.exports=s)}]]);