!function(){var e,t,r,n,o,s={2264:function(e,t,r){"use strict";r.r(t),r.d(t,{camelCase:function(){return d},camelCaseTransform:function(){return u},camelCaseTransformMerge:function(){return l}});var n=r(5058);function o(e){return e.toLowerCase()}var s=[/([a-z0-9])([A-Z])/g,/([A-Z])([A-Z][a-z])/g],i=/[^A-Z0-9]+/gi;function a(e,t,r){return t instanceof RegExp?e.replace(t,r):t.reduce((function(e,t){return e.replace(t,r)}),e)}function c(e,t){var r=e.charAt(0),n=e.substr(1).toLowerCase();return t>0&&r>="0"&&r<="9"?"_"+r+n:""+r.toUpperCase()+n}function u(e,t){return 0===t?e.toLowerCase():c(e,t)}function l(e,t){return 0===t?e.toLowerCase():function(e){return e.charAt(0).toUpperCase()+e.slice(1).toLowerCase()}(e)}function d(e,t){return void 0===t&&(t={}),function(e,t){return void 0===t&&(t={}),function(e,t){void 0===t&&(t={});for(var r=t.splitRegexp,n=void 0===r?s:r,c=t.stripRegexp,u=void 0===c?i:c,l=t.transform,d=void 0===l?o:l,p=t.delimiter,h=void 0===p?" ":p,f=a(a(e,n,"$1\0$2"),u,"\0"),g=0,v=f.length;"\0"===f.charAt(g);)g++;for(;"\0"===f.charAt(v-1);)v--;return f.slice(g,v).split("\0").map(d).join(h)}(e,(0,n.__assign)({delimiter:"",transform:c},t))}(e,(0,n.__assign)({transform:u},t))}},438:function(e,t,r){"use strict";r.r(t),r.d(t,{assoc:function(){return d},deepMerge:function(){return _},dissoc:function(){return g},get:function(){return c},merge:function(){return b},update:function(){return y}});var n=Array.prototype.slice;function o(e){return"object"==typeof e}function s(e){if(Array.isArray(e))return e.slice();var t={};for(var r in e)t[r]=e[r];return t}function i(e,t,r){return o(e)&&null!==e&&t in e?e[t]:r}function a(e,t,r){var n=t[0],o=t.slice(1);return i(e,n)&&o.length?a(e[n],o,r):i(e,n,r)}function c(e,t,r){return Array.isArray(t)?a(e,t,r):i(e,t,r)}function u(e,t,r){if(e[t]===r)return e;var n=s(e);return n[t]=r,n}function l(e,t,r){if(a(e,t)===r)return e;var n=t[0],o=t.slice(1),i=s(e);return o.length?i[n]=l(n in i?i[n]:{},o,r):i[n]=r,i}function d(e){for(var t,r,n=arguments,o=arguments.length,s=e,i=1;i<o;i+=2)t=n[i],r=n[i+1],s=Array.isArray(t)?l(s,t,r):u(s,t,r);return s}function p(e,t){if(!(t in e))return e;var r=s(e);return delete r[t],r}function h(e,t){var r=t[0],n=t.slice(1);return n.length?r in e&&h(e[r],n):r in e}function f(e,t){if(!h(e,t))return e;var r=t[0],n=t.slice(1),o=s(e);return 0!==n.length?(o[r]=f(e[r],n),0===Object.keys(o[r]).length&&delete o[r]):delete o[r],o}function g(e){for(var t,r=arguments,n=arguments.length,o=0,s=e;++o<n;)t=r[o],s=Array.isArray(t)?f(s,t):p(s,t);return s}function v(e,t,r){var o=i(e,t);return u(e,t,r.apply(o,[o].concat(n.call(arguments,3))))}function m(e,t,r){var o=a(e,t);return l(e,t,r.apply(o,[o].concat(n.call(arguments,3))))}function y(e,t){return Array.isArray(t)?m.apply(this,arguments):v.apply(this,arguments)}function b(){for(var e,t=arguments,r=arguments.length,n=0,o=arguments[0];++n<r;)for(var s in e=t[n])o=u(o,s,e[s]);return o}function S(e,t){for(var r,n,i=Object.keys(t),a=i.length,c=-1,l=e;++c<a;)l=o(r=t[n=i[c]])&&null!==r?u(l,n,n in l?S(l[n],r):s(r)):u(l,n,r);return l}function _(){for(var e=arguments,t=arguments.length,r=0,n=arguments[0];++r<t;)n=S(n,e[r]);return n}},2109:function(e,t){var r;!function(){"use strict";var n={}.hasOwnProperty;function o(){for(var e=[],t=0;t<arguments.length;t++){var r=arguments[t];if(r){var s=typeof r;if("string"===s||"number"===s)e.push(r);else if(Array.isArray(r)){if(r.length){var i=o.apply(null,r);i&&e.push(i)}}else if("object"===s){if(r.toString!==Object.prototype.toString&&!r.toString.toString().includes("[native code]")){e.push(r.toString());continue}for(var a in r)n.call(r,a)&&r[a]&&e.push(a)}}}return e.join(" ")}e.exports?(o.default=o,e.exports=o):void 0===(r=function(){return o}.apply(t,[]))||(e.exports=r)}()},4317:function(e,t,r){"use strict";var n=r(1238),o={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},s={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},i={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},a={};function c(e){return n.isMemo(e)?i:a[e.$$typeof]||o}a[n.ForwardRef]={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},a[n.Memo]=i;var u=Object.defineProperty,l=Object.getOwnPropertyNames,d=Object.getOwnPropertySymbols,p=Object.getOwnPropertyDescriptor,h=Object.getPrototypeOf,f=Object.prototype;e.exports=function e(t,r,n){if("string"!=typeof r){if(f){var o=h(r);o&&o!==f&&e(t,o,n)}var i=l(r);d&&(i=i.concat(d(r)));for(var a=c(t),g=c(r),v=0;v<i.length;++v){var m=i[v];if(!(s[m]||n&&n[m]||g&&g[m]||a&&a[m])){var y=p(r,m);try{u(t,m,y)}catch(e){}}}}return t}},3816:function(e){"use strict";e.exports=function(e,t,r,n,o,s,i,a){if(!e){var c;if(void 0===t)c=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var u=[r,n,o,s,i,a],l=0;(c=new Error(t.replace(/%s/g,(function(){return u[l++]})))).name="Invariant Violation"}throw c.framesToPop=1,c}}},8418:function(e){e.exports={}},1040:function(e){e.exports={flex:"aw--jr8",hidden:"bw--jr8"}},7595:function(e,t){"use strict";var r="function"==typeof Symbol&&Symbol.for,n=r?Symbol.for("react.element"):60103,o=r?Symbol.for("react.portal"):60106,s=r?Symbol.for("react.fragment"):60107,i=r?Symbol.for("react.strict_mode"):60108,a=r?Symbol.for("react.profiler"):60114,c=r?Symbol.for("react.provider"):60109,u=r?Symbol.for("react.context"):60110,l=r?Symbol.for("react.async_mode"):60111,d=r?Symbol.for("react.concurrent_mode"):60111,p=r?Symbol.for("react.forward_ref"):60112,h=r?Symbol.for("react.suspense"):60113,f=r?Symbol.for("react.suspense_list"):60120,g=r?Symbol.for("react.memo"):60115,v=r?Symbol.for("react.lazy"):60116,m=r?Symbol.for("react.block"):60121,y=r?Symbol.for("react.fundamental"):60117,b=r?Symbol.for("react.responder"):60118,S=r?Symbol.for("react.scope"):60119;function _(e){if("object"==typeof e&&null!==e){var t=e.$$typeof;switch(t){case n:switch(e=e.type){case l:case d:case s:case a:case i:case h:return e;default:switch(e=e&&e.$$typeof){case u:case p:case v:case g:case c:return e;default:return t}}case o:return t}}}function E(e){return _(e)===d}t.AsyncMode=l,t.ConcurrentMode=d,t.ContextConsumer=u,t.ContextProvider=c,t.Element=n,t.ForwardRef=p,t.Fragment=s,t.Lazy=v,t.Memo=g,t.Portal=o,t.Profiler=a,t.StrictMode=i,t.Suspense=h,t.isAsyncMode=function(e){return E(e)||_(e)===l},t.isConcurrentMode=E,t.isContextConsumer=function(e){return _(e)===u},t.isContextProvider=function(e){return _(e)===c},t.isElement=function(e){return"object"==typeof e&&null!==e&&e.$$typeof===n},t.isForwardRef=function(e){return _(e)===p},t.isFragment=function(e){return _(e)===s},t.isLazy=function(e){return _(e)===v},t.isMemo=function(e){return _(e)===g},t.isPortal=function(e){return _(e)===o},t.isProfiler=function(e){return _(e)===a},t.isStrictMode=function(e){return _(e)===i},t.isSuspense=function(e){return _(e)===h},t.isValidElementType=function(e){return"string"==typeof e||"function"==typeof e||e===s||e===d||e===a||e===i||e===h||e===f||"object"==typeof e&&null!==e&&(e.$$typeof===v||e.$$typeof===g||e.$$typeof===c||e.$$typeof===u||e.$$typeof===p||e.$$typeof===y||e.$$typeof===b||e.$$typeof===S||e.$$typeof===m)},t.typeOf=_},1238:function(e,t,r){"use strict";e.exports=r(7595)},8335:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return p}});var n=r(6443),o=r(4121),s=r.n(o),i=r(4083),a=r.n(i);let c;function u(){return c||(c=function(){if("undefined"!=typeof navigator){const e=/(ipad|tablet|(android(?!.*mobile))|(windows(?!.*phone)(.*touch))|kindle|playbook|silk|(puffin(?!.*(IP|AP|WP))))/,t=/(mobi|ipod|phone|blackberry|opera mini|fennec|minimo|symbian|psp|nintendo ds|archos|skyfire|puffin|blazer|bolt|gobrowser|iris|maemo|semc|teashark|uzard)/,r=navigator.userAgent.toLowerCase();return r.match(e)?"tablet":r.match(t)?"mobile":"desktop"}}()),c}const l={isPhone:window.matchMedia(`(max-width: ${a().PHONE}px)`),isTablet:window.matchMedia(`(min-width: ${a().TABLETS}px)`),isDesktop:window.matchMedia(`(min-width: ${a().DESKTOP}px)`),isDesktopS:window.matchMedia(`(min-width: ${a().DESKTOP_SMALL}px)`),isDesktopMd:window.matchMedia(`(min-width: ${a().DESKTOP_MD}px)`),isDesktopM:window.matchMedia(`(min-width: ${a().DESKTOP_MEDIUM}px)`),isDesktopL:window.matchMedia(`(min-width: ${a().DESKTOP_LARGE}px)`),isDesktopXL:window.matchMedia(`(min-width: ${a().DESKTOP_EXTRA_LARGE}px)`),isRetina:window.matchMedia("(-webkit-min-device-pixel-ratio: 2), (min-resolution: 192dpi)")},d=(()=>{let e={};const t=[];return Object.keys(l).forEach((r=>{const o=r;e[o]=l[o].matches,l[o].addListener((r=>function(r,o){e=(0,n.Z)({},e,{[r]:o}),function(){for(let e=0;e<t.length;e++)(0,t[e])()}()}(o,r.matches)))})),{getState:function(){return e},getDeviceType:u,subscribe:function(e){return t.push(e),function(){const r=t.indexOf(e);t.splice(r,1)}}}})(),p=()=>e=>{const t=e.displayName||e.name;class r extends s().Component{constructor(e){super(e),this.updateMedia=()=>{d&&this.setState({media:d.getState()})},this.isTouch=void 0,this.subscribe=void 0,this.state={media:{},deviceType:u()},this.isTouch=!1,this.subscribe=()=>{}}componentDidMount(){this.isTouch=Boolean("ontouchstart"in window||window.DocumentTouch&&"undefined"!=typeof document&&document instanceof window.DocumentTouch),d&&(this.subscribe=d.subscribe(this.updateMedia)),this.updateMedia()}componentWillUnmount(){this.subscribe()}render(){const{media:t,deviceType:r}=this.state;return s().createElement(e,Object.assign({},this.props,{media:t,deviceType:r,isTouch:this.isTouch}))}}return r.displayName=`MediaInfo(${t})`,r.defaultProps=e.defaultProps,r}},2011:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.BlocksTrackingEvents=t.sendEvent=t.techSendEvent=t.makeEvent=void 0;const n=r(5058).__importDefault(r(8297)),o=r(9746),s=(0,n.default)("analytics:tracking");function i(e,t){let r;try{r=new CustomEvent(e,{detail:t,bubbles:!0})}catch(n){r=document.createEvent("CustomEvent"),r.initCustomEvent(e,!0,!1,t)}return r}function a(e,t,r=document.body){let n=r;return(0,o.isConnected)(r)||(t.originalTarget=r,n=document.body),null!==n&&(n.dispatchEvent(i(e,t)),!0)}function c(e,t,r=document.body){a(e,t,r)&&s.info("Dispatched event:",e,t)}t.makeEvent=i,t.techSendEvent=a,t.sendEvent=c,t.BlocksTrackingEvents=class{constructor(e,t,r){this._eventea=e,this._tree=t,this._trackingOptions=r}trackBlock(e,t,r){const n=this._tree.traverseBlockTarget(e);if(n){const{guid:o,payload:s}=n;if(!this._tree.isActiveTracking(o))return;const i=Object.assign({},r,s);this.sendEvent(t,i,e)}}sendEvent(e,t,r){this._eventea&&!this._trackingOptions.disableEventea?this._eventea.send({project:"boxy",event:e,payload:t}):c(e,t,r)}}},175:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=r(5058),o=n.__importStar(r(4121)),s=n.__importDefault(r(5045)),i=["flags"];t.default=function(e){return t=>{const r=(0,o.useMemo)((()=>{var e,r;const n=new s.default({options:null===(e=t.dival)||void 0===e?void 0:e.trackingOptions,eventea:null===(r=t.dival)||void 0===r?void 0:r.eventea});return n.setTree(t.tree),n}),[]);(0,o.useEffect)((()=>(r.mount(),r.unmount)),[]);const n=Object.assign({},t.dival,{blocksTrackingFeatures:i});return o.default.createElement(e,Object.assign({},t,{dival:n,saveDomRef:(e,n)=>(t.saveDomRef&&t.saveDomRef(e,n),r.registerElement(e,n))}))}}},6348:function(e,t,r){"use strict";const n=r(5058),o=n.__importDefault(r(9639)),s=n.__importDefault(r(175));t.Z=(0,s.default)(o.default)},6062:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.LIST_SCHEMA_KEYS=void 0,t.LIST_SCHEMA_KEYS=["slideList","slides","panels","panelList","banners"];class r{constructor(e=[],t){this.segments=e,this.noImpressions=(null==t?void 0:t.noImpressions)||!1,this.hasListKey=(null==t?void 0:t.hasListKey)||!1}get length(){return this.segments.length}get(e){return this.segments[e]}getAsNumber(e){const t=this.segments[e],r=parseInt(t);if(isFinite(r))return r}asNumber(){if(1===this.length)return this.getAsNumber(0)}getListKey(){if(this.hasListKey)return this.segments[0]}toString(){return this.segments.join(".")}concat(e){const t=[...this.segments,...e.segments],n=this.length?this.hasListKey:e.hasListKey;return new r(t,{noImpressions:this.noImpressions||e.noImpressions,hasListKey:n})}static parseString(e=""){const[n,...o]=e.split("|"),s=n.split(".").filter((e=>e.length)),i={noImpressions:!1,hasListKey:s.reduce(((e,r)=>e||-1!==t.LIST_SCHEMA_KEYS.indexOf(r)),!1)};return o.forEach((e=>{var t,n;return null===(n=(t=r.flagHandlersMap)[e])||void 0===n?void 0:n.call(t,{segments:s,options:i})})),new r(s,i)}}t.default=r,r.flagHandlersMap={noimp:({options:e})=>{e.noImpressions=!0},lst:({options:e})=>{e.hasListKey=!0},nolst:({options:e})=>{e.hasListKey=!1}}},5045:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DEFAULT_LOCAL_KEYS=t.DEFAULT_IMPRESSION_DELAY=t.DEFAULT_IMPRESSION_BATCH_DELAY=t.CLICK_DEDUP_KEY=t.DelayedActionType=void 0;const n=r(5058),o=n.__importDefault(r(8297)),s=n.__importStar(r(6062)),i=r(8923),a=r(2011),c=r(7365),u=r(9746);var l;!function(e){e[e.Negative=0]="Negative",e[e.Positive=1]="Positive"}(l=t.DelayedActionType||(t.DelayedActionType={}));const d=(0,o.default)("boxy:blocks-tracking");t.CLICK_DEDUP_KEY="dedup_click",t.DEFAULT_IMPRESSION_BATCH_DELAY=300,t.DEFAULT_IMPRESSION_DELAY=100,t.DEFAULT_LOCAL_KEYS=["itemType","itemName"];const p=Array.prototype.forEach;let h=(e,t={})=>"undefined"!=typeof IntersectionObserver?new IntersectionObserver(e,Object.assign({root:null},t)):(console.warn("IntersectionObserver feature not supported!"),h=()=>null,null);function f(e,t){for(let r=e.parentElement;r;r=r.parentElement)if(r.dataset&&t.some((e=>null==r?void 0:r.dataset[e])))return r}function g(e,t){e.unobserve(t),e.observe(t)}function v(e,t){return Array.prototype.find.call(e,t)}function m(e){if(!(0,u.isConnected)(e))return!1;const t=getComputedStyle(e);return"0"!==t.opacity&&"none"!==t.display&&"hidden"!==t.visibility}t.default=class{constructor(e={}){this._elemsMutObserver=null,this._elementsMap={},this._recheckQueue=[],this._delayedActions={},this._trackedAsVisibleMap={},this._elemsSeenTimings={},this.mount=()=>{d.info("mount"),document.addEventListener("mousedown",this.handleMouseDown,!0),document.addEventListener("visibilitychange",this.handlePageVisChange)},this.unmount=()=>{d.info("umount"),this.elemsInObserver&&this.elemsInObserver.disconnect(),document.removeEventListener("visibilitychange",this.handlePageVisChange),document.removeEventListener("mousedown",this.handleMouseDown,!0),Object.keys(this._delayedActions).forEach((e=>{var t;clearTimeout(null===(t=this._delayedActions[e])||void 0===t?void 0:t.actionTimeout)})),this._delayedActions={}},this.handleMouseDown=e=>{this._events.trackBlock(function(e){const t=function(e,t){try{return"elementsFromPoint"in document?document.elementsFromPoint(e,t):"msElementsFromPoint"in document?document.msElementsFromPoint(e,t):null}catch(e){return null}}(e.clientX,e.clientY)||[],r=e.target||void 0,n=v(t,(e=>e instanceof HTMLElement&&!!e.dataset.guid));return n&&v(t,(e=>e instanceof HTMLElement&&(!!e.dataset.schemaPath||e===n)||e instanceof Node&&!n.contains(e)))||r}(e)||document.body,"blockClick",{itemType:"block"})},this.handleElemsIntersection=e=>{document.hidden?e.forEach((e=>{this._recheckQueue.push(e.target)})):e.forEach((e=>{const t=m(e.target),r=this._tree.getTargetDesc(e.target);if(!r)return;const n=r.guid+"/"+r.schemaPath.toString(),o=`seen_${n}`;e.intersectionRatio>=this._trackingOptions.elemsIntersectionThreshold&&t?this.cancelableDelayedAction(o,l.Positive,(()=>{this._trackedAsVisibleMap[n]||(this._trackedAsVisibleMap[n]=!0,this._elemsSeenTimings[n]=Date.now(),this._events.trackBlock(e.target,"blockImpressionIn",{itemType:"block"}))}),this._trackingOptions.elemsImpressionDelay):this.cancelableDelayedAction(o,l.Negative,(()=>{if(this._trackedAsVisibleMap[n]){this._trackedAsVisibleMap[n]=!1;const t=n in this._elemsSeenTimings?Date.now()-this._elemsSeenTimings[n]:0;this._events.trackBlock(e.target,"blockImpressionOut",{itemType:"block",componentTime:t})}}),this._trackingOptions.elemsImpressionDelay)}))},this.handlePageVisChange=()=>{const{elemsInObserver:e}=this;!document.hidden&&this._recheckQueue.length>0&&e&&(this._recheckQueue.forEach((t=>{g(e,t)})),this._recheckQueue=[])},this.handleElemsMutation=e=>{const{elemsInObserver:t}=this;t&&e.forEach((e=>{const r=this._tree.getTargetDesc(e.target);if(!r)return;const n=r.guid+"/"+r.schemaPath.toString();var o;this._trackedAsVisibleMap[n]||(o=e.target,m(o)?Promise.resolve(!0):new Promise((e=>{setTimeout((()=>{e(m(o))}),350)}))).then((r=>{r&&t&&g(t,e.target)}))}))};const{options:r={},eventea:n}=e;this._trackingOptions=Object.assign({elemsIntersectionThreshold:.4,elemsImpressionDelay:t.DEFAULT_IMPRESSION_DELAY,impressionBatchDelay:t.DEFAULT_IMPRESSION_BATCH_DELAY,localKeys:t.DEFAULT_LOCAL_KEYS,disableEventea:!1},r),this._tree=new i.BlocksTree(this._trackingOptions),this._events=new a.BlocksTrackingEvents(n||null,this._tree,this._trackingOptions)}setTree(e){e&&this._tree.setPageMakerTree(e)}get elemsInObserver(){return void 0===this._elemsInObserver&&(this._elemsInObserver=h(this.handleElemsIntersection,{threshold:this._trackingOptions.elemsIntersectionThreshold})),this._elemsInObserver}get elemsMutObserver(){return void 0===this._elemsMutObserver&&(this._elemsMutObserver=new MutationObserver(this.handleElemsMutation)),this._elemsMutObserver}registerElement(e,t){if(null!==t)if(t instanceof HTMLElement){if(t!==this._elementsMap[e]&&this._elementsMap[e]&&this.unregisterElement(e),this.attachInfoDataAttrsToElement(e,t),t.dataset.guid=e,!this._tree.isActiveTracking(e))return;d.info({event:"attach",guid:e}),p.call(t.querySelectorAll("[data-eye-target]"),(e=>{this.observeElem(e)})),this.getListElements(e,t).forEach((e=>{this.observeElem(e)})),this._elementsMap[e]=t}else d.warn(`Couldn't find dom node for ${e}`)}unregisterElement(e){var t;const r=this._elementsMap[e];r instanceof HTMLElement&&(delete r.dataset.guid,delete this._elementsMap[e],null===(t=this._elemsInObserver)||void 0===t||t.unobserve(r))}getListElements(e,t){if(!this._tree.hasBlockInfo(e))return[];const r=[t].concat(Array.from(t.querySelectorAll("[data-schema-path]"))).map((e=>({elem:e,schemaPath:s.default.parseString(e.dataset.schemaPath)}))).filter((({schemaPath:e})=>e.hasListKey));if(0===r.length)return[t];const n=r.find((({schemaPath:e})=>1===e.length));if(n){const{elem:e}=n,t=[];return p.call(e.querySelectorAll("[data-schema-path]"),(r=>{if(!(r instanceof HTMLElement))return;const n=s.default.parseString(r.dataset.schemaPath);n.noImpressions||void 0===n.asNumber()||f(r,["schemaPath"])!==e||t.push(r)})),t}return r.reduce(((e,{elem:r,schemaPath:n})=>{if(!n.noImpressions&&f(r,["schemPath","guid"])===t){if(n.length>2||void 0===n.getAsNumber(1))throw new Error(`data-schema-path, that contain list keys (${s.LIST_SCHEMA_KEYS}), have to look like '${n.getListKey()}}' or \`${n.getListKey()}.\${index}\``);e.push(r)}return e}),[])}observeElem(e){var t,r;d.info({event:"attach to elem",element:e}),null===(t=this.elemsInObserver)||void 0===t||t.observe(e),null===(r=this.elemsMutObserver)||void 0===r||r.observe(e,{childList:!1,attributes:!0,subtree:!1})}attachInfoDataAttrsToElement(e,t){try{if(localStorage.getItem("set-page-maker-data-attrs")){const{type:r,version:n,render:o}=this._tree.getBlockInfo(e).block;t.dataset.type=r,t.dataset.schemaVersion=String(n),t.dataset.render=JSON.stringify(o)}}catch(e){}}cancelableDelayedAction(e,t,r,n){if(0===n)(0,c.requestIdleCallbackWithDuration)((()=>r.call(this)));else{const o=this._delayedActions[e];o&&(delete this._delayedActions[e],clearTimeout(o.actionTimeout)),o&&o.actionType!==t||(this._delayedActions[e]={actionType:t,actionTimeout:setTimeout((()=>{delete this._delayedActions[e],(0,c.requestIdleCallbackWithDuration)((()=>r.call(this)))}),n)})}}}},8923:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.BlocksTree=void 0;const n=r(5058).__importDefault(r(6062)),o={active:!1},s={localKeys:["itemType","itemName"]};function i(e,t,r){const n=Object.keys(t);for(const o of n)r(o,t[o])&&(e[o]=t[o]);return e}t.BlocksTree=class{constructor(e={}){this._traversedTargets=new WeakMap,this._blocksTrackingMeta={},this._blocksTrackingData={},this._opts=Object.assign(s,e)}setPageMakerTree(e){const t={},r=(e,n=[])=>{t[e.id]={block:e,pagePosition:n.join(".")},Array.isArray(e.content)&&e.content.forEach(((e,t)=>r(e,[...n,t+1])))};r(e),this._blocksRegistry=t}hasBlockInfo(e){return!!this._blocksRegistry&&e in this._blocksRegistry}getBlockInfo(e){if(this._blocksRegistry)return this._blocksRegistry[e]}doCollect(e,t,r=[]){if(!this._blocksRegistry||!this._blocksRegistry[e])return;const n=t.length,o=this.getBlockPayload(e),s=this._blocksRegistry[e].block.properties||{},a=t.getListKey();let c;if(a)if(c=s[a].filter((e=>!1!==e.active)),c.length>1){const e=s.panelProps||s.slideProps;e&&e.type&&"row"===e.type.substr(0,3)?o.view="row":o.view="slider"}else o.view="default";let u=s;s&&s.analytics&&Object.assign(o,s.analytics);let l,d,p=-1,h=!1,f=!1;for(let e=0;e<t.length;e++){const g=t.get(e);if(h=e==n-1,u=u[g],!u)throw new Error(`Connection with block schema is broken, is data-schema-path missed? path=${t}, error-at=${g}`);if(-1!==p){l=d="card";const r=t.getAsNumber(e);a&&!f&&void 0!==r&&(f=!0,o.componentMaxPosition=c.length,o.componentPosition=r+1-s[a].slice(0,r).filter((e=>!1===e.active)).length,u.productName&&(o.componentProductName=u.productName),u.productCategory&&(o.componentProductCategory=u.productCategory))}const v=e=>!!h||-1===this._opts.localKeys.indexOf(e);i(o,r[e],v),u.analytics&&i(o,u.analytics,v),t.getListKey()===g&&(p=e)}if(t.length>0){const e=!a||-1!==p&&n-1-p>=2;if(!o.itemType){const r=e?t.get(n-1):l;r&&(o.itemType=r)}if(!o.itemName){let t;e||o.itemType!==l||(t=d),e&&(t=u.title||u.text),"string"==typeof t&&(o.itemName=t)}}return{guid:e,payload:o}}traverseBlockTarget(e){const t=this.getTargetDesc(e);if(t)return this.doCollect(t.guid,t.schemaPath,t.payloadVector)}getTargetDesc(e){if(e){if(!this._traversedTargets)return this.traverseTargetDesc(e);if(!this._traversedTargets.has(e)){const t=this.traverseTargetDesc(e);this._traversedTargets.set(e,t)}return this._traversedTargets.get(e)}}traverseTargetDesc(e){if(!(e instanceof HTMLElement||e instanceof SVGElement))return;const t=[];let r=new n.default,o={};for(let s=e;s;s=s.parentElement){const e=s.dataset;if(e){if(e.schemaPath){r.length&&t.unshift(o),o={};const s=n.default.parseString(e.schemaPath);r=s.concat(r);let i=s.length;for(;i-- >1;)t.unshift({})}if(0!==r.length){if(e.aData)try{Object.assign(o,JSON.parse(e.aData),o)}catch(e){}for(const t of["itemType","itemName"])e[t]&&!o[t]&&(o[t]=e[t])}const s=e.guid;if(s)return r.length&&t.unshift(o),{guid:s,schemaPath:r,payloadVector:t}}}}getTrackingData(e){if(!this._blocksRegistry)throw new Error("blocksRegistry is not ready");if(!this._blocksTrackingMeta[e]){const t=this._blocksRegistry[e];if(!t)return o;const{block:r}=t,n=((r.meta||{}).analytics||{}).tracking||{active:!0};this._blocksTrackingMeta[e]=n}return this._blocksTrackingMeta[e]}getBlockPayload(e){const{_blocksRegistry:t}=this;if(!t)throw new Error("blocksRegistry is not ready");const r=this.getTrackingData(e),n=t[e];if(!n)throw new Error(`No metadata found for block ${e}`);const{block:o,pagePosition:s}=n,i=r.trackingName||`${o.type}_${o.id}`;return Object.assign({},this._blocksTrackingData[e],{type:o.type,name:i,pagePosition:s,componentPosition:1,componentMaxPosition:1})}isActiveTracking(e){return this.getTrackingData(e).active||function(){try{if("true"===localStorage.getItem("page_tracking_force_enabled"))return!0}catch(e){}return!1}()}}},7365:function(e,t){"use strict";function r(e,t){if("function"==typeof window.requestIdleCallback)return window.requestIdleCallback(e,t);const r=Date.now();return window.setTimeout((()=>{e({didTimeout:!1,timeRemaining:()=>Math.max(0,50-(Date.now()-r))})}),1)}Object.defineProperty(t,"__esModule",{value:!0}),t.requestIdleCallbackWithDuration=t.safeCancelIdleCallback=t.safeRequestIdleCallback=void 0,t.safeRequestIdleCallback=r,t.safeCancelIdleCallback=function(e){return window.cancelIdleCallback?window.cancelIdleCallback(e):clearTimeout(e)},t.requestIdleCallbackWithDuration=function(e,t){const n=function(e){return Math.min(e||10,50)}(null==t?void 0:t.duration),o=()=>{r((t=>{if(t.timeRemaining()<n&&!t.didTimeout)return o();e(t)}),t)};o()}},9746:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isConnected=void 0,t.isConnected=function(e){return!(e instanceof Node)||(void 0!==e.isConnected?e.isConnected:!((e.ownerDocument||document).compareDocumentPosition(e)&Node.DOCUMENT_POSITION_DISCONNECTED))}},4990:function(e,t,r){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.withMedia=t.MediaContext=t.MediaConsumer=t.MediaProvider=void 0;var o=r(981);Object.defineProperty(t,"MediaProvider",{enumerable:!0,get:function(){return o.MediaProvider}}),Object.defineProperty(t,"MediaConsumer",{enumerable:!0,get:function(){return o.MediaConsumer}}),Object.defineProperty(t,"MediaContext",{enumerable:!0,get:function(){return o.MediaContext}});var s=r(771);Object.defineProperty(t,"withMedia",{enumerable:!0,get:function(){return n(s).default}})},8295:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.FallbackMediaProvider=void 0;const n=r(5058),o=n.__importStar(r(4121)),s=n.__importDefault(r(8335));class i extends o.PureComponent{render(){return this.props.children(this.props.media)}}t.FallbackMediaProvider=(0,s.default)()(i)},981:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.MediaConsumer=t.MediaProvider=t.MediaContext=void 0;const n=r(5058),o=n.__importStar(r(4121)),s=r(8295),i=n.__importDefault(r(5258));t.MediaContext=i.default,t.MediaProvider=({value:e,children:r})=>o.createElement(t.MediaContext.Provider,{value:e},r),t.MediaConsumer=({children:e})=>o.createElement(t.MediaContext.Consumer,null,(t=>((e,t)=>t?e(t):o.createElement(s.FallbackMediaProvider,null,e))(e,t)))},5258:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=r(5058).__importStar(r(4121)),o="__MEDIA_CONTEXT_GLOBAL_REACT_CONTEXT__";let s;s=window[o],s||"undefined"==typeof globalThis||(s=globalThis[o]),s||void 0===r.g||(s=r.g[o]),s||(s=n.createContext(null),"undefined"!=typeof globalThis&&(globalThis[o]=s),void 0!==r.g&&(r.g[o]=s),window[o]=s),t.default=s},771:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=r(5058).__importStar(r(4121)),o=r(981);t.default=function(e){var t;return(t=class extends n.PureComponent{render(){return n.createElement(o.MediaConsumer,null,(t=>n.createElement(e,Object.assign({},this.props,{media:t}))))}}).displayName=`WithMedia(${e.displayName||e.name})`,t}},4196:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.fillMap=t.getMap=void 0;const n=r(5058),o=n.__importDefault(r(4121)),s=r(1460),i=r(7783),a=r(7971),c=r(6954),u=n.__importDefault(r(8297));t.getMap=a.getMap;const l=(0,u.default)("mml:client");t.fillMap=(e,t)=>((0,a.fillMap)(),(0,i.traverseTree)(e,(e=>{var r;"string"==typeof(null===(r=e.render)||void 0===r?void 0:r.lazy)&&"none"!==e.render.lazy&&((e,t)=>{if(void 0===e.render)return;const r=(0,a.getTemper)(),n=(0,c.getMmid)(e);if(r.modules[n])return;const{render:i}=e,u=(0,c.getUrl)(e,"clientJs",t);let d;!1===e.render.isCriticalCss&&(d=(0,c.getUrl)(e,"css",t));const p=o.default.forwardRef(((e,t)=>o.default.createElement(s.ClientLazyRender,{clientJs:u,css:d,mmid:n,props:e,forwardedRef:t,modules:r.modules,strategy:i.lazy}))),h={initialize:()=>(h.initialize=!0,l.debug("initializing lazy",n),h),initialized:!0,meta:{mmid:n,clientJs:u,css:d,strategy:i.lazy,render:e.render},exports:p};r.modules[n]=h,h.exports.displayName=`ClientLazyRender(${n})`,(0,a._addToMap)(n,h.exports),l.debug("assigned lazy to temper",h)})(e,t)})),(0,a.getMap)()),t.default=t.fillMap},2054:function(e,t,r){"use strict";const n=r(5058),o=r(7971),s=r(7783),i=n.__importDefault(r(6439)),a=n.__importDefault(r(393)),c=r(6954),u=n.__importDefault(r(8297)),l=n.__importDefault(r(4196)),d=(0,u.default)("mm-lazy:dynamic"),p=e=>{const t=(0,o.getTemper)().modules[e];if(void 0===t)throw new Error(`module ${e} not found`);d.debug("initializeModule",e,t),!1===t.initialized&&(t.initialize(),t.initialized=!0,t.exports||d.error("no exports after initialization",e,t)),d.debug("initialized",e,t),(0,o._addToMap)(e,t.exports)};t.Z=async({tree:e,baseUrl:t})=>{d.debug("starting blockMap with baseUrl and tree",t,e),(0,l.default)(e,t);const r=(0,o.getTemper)(),n=[];(0,s.traverseTree)(e,(e=>{var o;if(void 0===e.render)return;const s=(0,c.getMmid)(e),u=r.modules[s];if(!(null==u?void 0:u.exports)){u?d.debug("module found, but no exports",s,u):d.debug("module not found",s);const r=(0,c.getUrl)(e,"clientJs",t),l=(0,c.getUrl)(e,"css",t);d.debug(`block ${e.type} not found, loading it via solo url`,r);const p=e.render&&e.render.integrity,h=Object.assign({mmid:s},null!==(o=p&&{integrity:p})&&void 0!==o?o:void 0),f=Promise.all([(0,i.default)("stylesheet",l),(0,a.default)(r,h)]).then((()=>({mmid:s}))).catch((()=>({mmid:s,failed:!0})));n.push(f)}}));try{const e=await Promise.all(n);for(const{mmid:t,failed:r}of e)r?d.warn(`mmid ${t} failed to load`):(d.debug(`initializing async block ${t}`),p(t))}catch(e){d.error({message:"failed to load some modules"}),console.error(e)}return(0,o.getMap)()}},1460:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ClientLazyRender=void 0;const n=r(5058),o=n.__importStar(r(4121)),s=r(6363),i=n.__importDefault(r(393)),a=n.__importDefault(r(6439)),c={__html:""},u=(0,s.createUseObserverVisible)({root:null,rootMargin:"200px 0px 0px 0px"}),l={};t.ClientLazyRender=({mmid:e,clientJs:t,css:r,props:n,forwardedRef:s,modules:d,strategy:p})=>{var h,f,g;const v=`${e}-lazy-inner`,m=!!(null===(h=d[v])||void 0===h?void 0:h.initialized),[y,b]=(0,o.useState)(m),[S,_]=(0,o.useState)(null),E=u(S,"viewport"===p),[w,O]=(0,o.useState)(!1),[k,T]=(0,o.useState)(!1);(0,o.useEffect)((()=>{"function"==typeof n.forwardDomRef&&n.forwardDomRef(S)}),[S]),(0,o.useEffect)((()=>{"string"==typeof r&&(0,a.default)("stylesheet",r),"idle"===p&&("function"==typeof window.__testRequestIdleCallback?__testRequestIdleCallback((()=>T(!0))):"function"==typeof window.requestIdleCallback?window.requestIdleCallback((()=>T(!0))):T(!0))}),[]);const C=void 0===p||"none"===p,R="hover"===p&&w,M="viewport"===p&&E,P="idle"===p&&k,x="static"===p&&0===(null==S?void 0:S.innerHTML.length);if((C||R||M||P||x)&&!y&&(0,i.default)(t,{mmid:v}).then((()=>b(!0))),y){d[v].initialized||d[v].initialize();const t=d[v].exports;null===(f=n.onBotaUpdate)||void 0===f||f.call(n,t.bota);let r=n;return(null===(g=t.prototype)||void 0===g?void 0:g.render)&&(r=Object.assign({},n,{ref:s})),o.default.createElement("div",{"data-mmid":e,ref:e=>_(e),style:l},o.default.createElement(t,Object.assign({},r)))}let I;return"hover"===p&&(I={onMouseMove:()=>{w||O(!0)}}),o.default.createElement("div",Object.assign({"data-mmid":e,ref:e=>_(e),style:l,suppressHydrationWarning:!0,dangerouslySetInnerHTML:c},I))},t.ClientLazyRender.displayName="ClientLazyRender"},6363:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createUseObserverVisible=void 0;const n=r(4121);t.createUseObserverVisible=e=>(t,r)=>{const[o,s]=(0,n.useState)(!1);return(0,n.useEffect)((()=>{if(!t||o||!r)return;const n=new IntersectionObserver(((e,t)=>{e.forEach((({isIntersecting:e})=>{e&&(t.disconnect(),s(!0))}))}),e);return n.observe(t),()=>{n.disconnect()}}),[t]),o}},6439:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=new Map;t.default=(e,t,n={})=>{if(r.has(t))return r.get(t);const o=document.createElement("link");Object.assign(o,n,{rel:e,href:t});const s=new Promise(((e,r)=>{o.onerror=()=>r(new Error(`could not load link ${t}`)),"onload"in o?o.onload=e:setTimeout(e,50),document.head.appendChild(o)}));return r.set(t,s),s}},393:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=new Map;t.default=(e,t={})=>{if(r.has(e))return r.get(e);const n=document.createElement("script");Object.assign(n,{async:!0,crossorigin:"anonymous",src:e}),"mmid"in t&&(n.dataset.mmid=t.mmid),t.integrity&&n.setAttribute("integrity",t.integrity);const o=new Promise(((t,r)=>{n.onerror=t=>r(new Error(`could not load script ${e} ${t.message||t}`)),n.onload=t,document.head.appendChild(n)}));return r.set(e,o),o}},6954:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getMmid=t.getUrl=void 0;const n=r(5058).__importDefault(r(2129)),o={clientJs:".client.js",css:".css",jsMap:".client.js.map"};t.getUrl=function(e,t,r){const{type:s,render:i}=e;if(void 0===i)throw new Error(`render field is not defined for ${s}@${e.version}`);if(t in i&&"string"==typeof i[t])return i[t];if("npmVersion"in i){const e=(0,n.default)(s);return`${r}/${e}/${i.npmVersion}/${e}${o[t]}`}throw new Error(`failed to get resource location for ${e.id}`)},t.getMmid=function(e){var t,r;const{type:n,render:o}=e;if(void 0===o)throw new Error(`failed to get mmid for subtree ${e.id}`);return null!==(r=null!==(t=o.mmid)&&void 0!==t?t:o.clientJs)&&void 0!==r?r:`${n}@${o.npmVersion}`}},7971:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.fillMap=t._addToMap=t.getTemper=t.getMap=t._map=void 0;const n=r(5058),o=n.__importDefault(r(4121)),s=n.__importDefault(r(776)),i=(0,n.__importDefault(r(8297)).default)("mm:client");t._map={},t.getMap=()=>t._map,t.getTemper=()=>{window.__tempref59452||(window.__tempref59452={});const e=window.__tempref59452;return void 0===e.externals&&(e.externals={react:o.default,"react-dom":s.default}),void 0===e.modules&&(e.modules={}),e},t._addToMap=(e,r)=>{t._map[e]=r},t.fillMap=()=>{const e=(0,t.getTemper)();for(const r in e.modules){const n=e.modules[r];i.debug("initial mm value",n),!1===n.initialized&&(n.initialize(),n.initialized=!0,n.exports||i.error("no exports after initialization",r,n)),i.debug("mm initialized",n),(0,t._addToMap)(r,n.exports)}return t._map},t.default=t.fillMap},9416:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createDi=t.ALLOWED_KEYS=void 0,(0,r(5058).__importDefault(r(8297)).default)("page-maker:di"),t.ALLOWED_KEYS=Symbol("allowed_di_keys"),t.createDi=e=>{const{dival:r,diKeys:n}=e,o={[t.ALLOWED_KEYS]:n,get:e=>{const n=o[t.ALLOWED_KEYS];let s;return(void 0===n||-1!==n.indexOf(e))&&(s=null==r?void 0:r[e]),s}};return o}},5128:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=r(5058).__importDefault(r(4121)),o=["Mobile","Desktop","Independent"];class s extends n.default.Component{constructor(e){super(e),this.state={error:null,errorInfo:null}}componentDidCatch(e,t){this.setState({error:e,errorInfo:t})}render(){var e;const{children:t,dival:r}=this.props,n=null==r?void 0:r.eventea;if(this.state.error){const t=null===(e=this.state.errorInfo)||void 0===e?void 0:e.componentStack.match(/at\s(\w+)/),r=t&&t[1];r&&o.some((e=>null==r?void 0:r.includes(e)))&&(null==n||n.send({project:"boxy",event:"block-error-boundry",payload:{type:r,message:this.state.error.stack||this.state.error.toString()}}))}return t}}t.default=s},3860:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.generateProps=void 0;const n=r(5058).__importDefault(r(8297)),o=r(9416),s=(0,n.default)("page-maker:di");t.generateProps=(e,t)=>{const{children:r,ids:n,missedDi:i}=t;let a=t.bota;const c=(r=[])=>{r.forEach((r=>{t.dival&&r in t.dival||i({key:r,bota:a,subtree:e})}))},u=(0,o.createDi)({dival:t.dival,diKeys:null==a?void 0:a.diKeys,type:e.type});return c(null==a?void 0:a.diRequiredKeys),Object.assign({},e.properties,{di:u,dispatch:r=>(s.debug({message:"dispatch was called with payload",payload:r}),t.act(r,e,n)),bus:(r,n)=>(s.debug({message:`component ${e.id} is subscribing for event ${r}`}),t.bus(e.id,r,n)),key:e.id,id:e.id,children:r,forwardDomRef:r=>t.saveDomRef(e.id,r)},"sticky"===e.type?{scrollParent:t.scrollParent}:{},{onBotaUpdate:e=>{a=e,u[o.ALLOWED_KEYS]=null==a?void 0:a.diKeys,c(null==a?void 0:a.diRequiredKeys)}})}},9639:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.JointMaker=t.NakedMaker=void 0;const n=r(5058),o=n.__importDefault(r(6623));t.NakedMaker=o.default;const s=n.__importDefault(r(4995));t.JointMaker=s.default,t.default=s.default},4995:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.jointUse=void 0;const n=r(5058),o=n.__importDefault(r(4121)),s=n.__importDefault(r(8297)),i=r(6744),a=n.__importDefault(r(6623)),c=(0,s.default)("page-maker:render"),u={flex:i.Flex,fragment:i.Fragment,screen:i.Screen};function l(e){const{use:r}=e;return o.default.createElement(a.default,Object.assign({},e,{use:(e,n)=>(0,t.jointUse)(e)||(null==r?void 0:r(e,n))}))}t.jointUse=({type:e})=>{if(void 0!==u[e])return c.debug(`for type "${e}" found build-in component, returning`),u[e];c.debug(`jointUse: type "${e}" not found inside page-maker, going outside`)},l.displayName="JointMaker",t.default=l},2976:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=r(5058),o=n.__importDefault(r(4121)),s=n.__importDefault(r(2109)),i=n.__importDefault(r(1040)),a=["padding","background","flex","flexDirection","justifyContent","alignItems","borderTop","borderBottom","alignSelf"].concat(["fontSize","fontFamily","fontWeight","color"]);function c(e){const{className:t,hidden:r,html:n,forwardDomRef:c}=e,u=(l=e,d=a,Object.keys(l).reduce(((e,t)=>(-1!==d.indexOf(t)&&l[t]&&(e[t]=l[t]),e)),{}));var l,d;const p=(0,s.default)(i.default.flex,t,{[i.default.hidden]:r});return n&&!e.children?o.default.createElement("div",{ref:c,dangerouslySetInnerHTML:{__html:n},className:p,style:u}):o.default.createElement("div",{ref:c,className:p,style:u},e.children)}t.default=c,c.displayName="Flex"},6744:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Screen=t.Fragment=t.Flex=void 0;const n=r(5058).__importDefault(r(2976));function o(e){return e.children}function s(e){return e.children}t.Flex=n.default,t.Fragment=o,o.displayName="PMFragment",t.Screen=s,s.displayName="PMScreen"},220:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=r(5058).__importDefault(r(4121)).default.createContext({scrollTo:()=>{}});n.displayName="StickyContext",t.default=n},6623:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=r(5058),o=n.__importStar(r(4121)),s=n.__importDefault(r(8297)),i=n.__importDefault(r(220)),a=n.__importDefault(r(6070)),c=(0,s.default)("page-maker:master-of-scroll");class u extends o.Component{constructor(e){super(e),this.scrollParentElement=null,this.stack=[],this.beforeHeightsMap={},this.contextValue={scrollTo:this.scrollTo.bind(this)}}lazyScrollParent(){if(this.scrollParentElement instanceof HTMLElement)return this.scrollParentElement;let e=null;return this.props.scrollParent&&(e=document.querySelector(this.props.scrollParent)),e instanceof HTMLElement||(e=document.scrollingElement||document.body&&document.body.parentElement),e instanceof HTMLElement&&(this.scrollParentElement=e),c.debug({message:"scrollParentElement",scrollParentElement:e}),this.scrollParentElement}componentDidMount(){this.lazyScrollParent()}componentWillUnmount(){this.stack=[]}scrollTo(e){const t=this.scrollParentElement;if(e instanceof HTMLElement&&t instanceof HTMLElement){const{top:r}=e.getBoundingClientRect(),n=r+t.scrollTop;"function"==typeof this.props.scrollTo?this.props.scrollTo(0,n):"scrollTo"in t?t.scrollTo({left:0,top:n,behavior:"smooth"}):t.scrollTop=n}}render(){return o.default.createElement(i.default.Provider,{value:this.contextValue},o.default.createElement(a.default,Object.assign({},this.props)))}}t.default=u,u.displayName="MasterOfScroll"},6070:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=r(5058),o=n.__importStar(r(4121)),s=n.__importDefault(r(8297)),i=r(8758),a=n.__importDefault(r(220)),c=n.__importDefault(r(5128)),u=r(4413),l=(0,s.default)("page-maker:dispatch"),d=(0,s.default)("page-maker"),p=(0,s.default)("page-maker");function h(e){const{tree:t,use:r,dival:n,saveDomRef:s,isConcurrentFeaturesEnabled:h,initialStickyOffset:f}=e,g=(0,o.useContext)(a.default),[v]=(0,o.useState)(new Map),[m]=(0,o.useState)(new Map),y=(0,o.useRef)(new u.StickyManager);f&&y.current.setInitialOffset(f),(0,o.useEffect)((()=>{d.debug({event:"reistry",domRegistry:v})}),[t]);const{displayTree:b}=(0,i.renderTree)(t,{use:r,act:(t,r,n)=>function(e,t,r,n){l.debug({event:"action",action:r});const{domRegistry:o,stickyContext:s,subscriptions:i,ids:a}=t;if("string"!=typeof(null==r?void 0:r.type))return void p.error('Wrong action shape, no "type: string" found',r);const c=(null==r?void 0:r.payload)||{};switch(null==r?void 0:r.type){case"scrollTo":{const e="targetGuid"in c?c.targetGuid:c.blockId;if("string"!=typeof e){p.error("cannot scrollTo, because id is not a string");break}if(s.scrollTo(o.get(e)),!o.has(e)){let t=`Failed to scroll to the element with id='${e}'.`;t=a&&a.has(e)?`${t} Tree node id='${e}' exists, but html element does not. Make sure forwardDomRef is called.`:`${t} Tree node id='${e}' does not exists. Check block properties.`,p.error(t),console.error(t)}break}case"emit":if(c.eventName&&c.blockId){const e=`${c.eventName}-${c.blockId}`;l.debug(`eventName and blockId found in action.payload, key is ${e}`),i.has(e)?(l.debug(`found ${e} subscription, invoking it with`,c.arg),i.get(e)(c.arg)):l.debug(`subscription ${e} not found, all subscriptions:`,i)}break;case"send":console.error("Action type send is no longer supported, use emit instead");break;default:"function"==typeof e.act?e.act(r,n):p.warn("action fired, but no one listening",r)}}(e,{domRegistry:v,stickyContext:g,subscriptions:m,ids:n},t,r),dival:n,saveDomRef:(e,t)=>{v.set(e,t),s&&s(e,t)},subscriptions:m,miss:e.miss,missedDi:e.missedDi||(e=>{}),isConcurrentFeaturesEnabled:h,stickyManager:y.current});return o.default.createElement(c.default,{dival:n},b)}h.displayName="PureMaker",t.default=h},8758:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.renderTree=void 0;const n=r(5058),o=n.__importStar(r(4121)),s=n.__importDefault(r(8297)),i=r(7783),a=r(3860),c=r(6638),u=(0,s.default)("page-maker:render");t.renderTree=function(e,t){let r,n=0;const s=new Set;return u.debug({event:"renderTree",subtree:e,options:t}),r=e?(0,i.traverseTree)(e,((e,r,i)=>{var l;s.add(e.id),n++,t.stickyManager.setComponentPosition(e.id,n);const{depth:d}=i;let p;"function"==typeof t.use&&(p=t.use(e,{depth:d})),p||(p=({children:t})=>o.default.createElement("div",{"data-fail-type":e.type},t),u.warn({message:`Component ${e.type} not found. Using fallback instead (() => children)`,subtree:{type:e.type,version:e.version,render:e.render}}),null===(l=t.miss)||void 0===l||l.call(t,e));const h=(0,a.generateProps)(e,{ids:s,children:r,dival:t.dival,bota:p.bota,act:t.act,saveDomRef:t.saveDomRef,scrollParent:t.scrollParent,depth:d,bus:(e,r,n)=>{const o=`${r}-${e}`;return t.subscriptions.set(o,n),()=>t.subscriptions.delete(o)},missedDi:t.missedDi}),f=o.default.createElement(c.StickyWrap,Object.assign({},h,{key:e.id,component:p,componentId:e.id,stickyManager:t.stickyManager})),{isConcurrentFeaturesEnabled:g}=t;return g&&1===d?o.default.createElement(o.Suspense,{fallback:null},f):f})):null,u.debug({event:"renderTreeResult",result:r,counter:n}),{displayTree:r,counter:n}}},4413:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.StickyManager=void 0,t.StickyManager=class{constructor(e){this.heights=new Map,this.positions=new Map,this.handlers=new Map,this.initialOffset=null!=e?e:0}setInitialOffset(e){this.initialOffset=e}setComponentPosition(e,t){this.positions.set(e,t)}setComponentHeight(e,t){const r=this.heights.get(e);this.heights.set(e,t),r&&r===t||this.triggerOffsetChange(this.positions.get(e))}handleComponentRemove(e){const t=this.positions.get(e);void 0!==t&&(this.heights.delete(e),this.positions.delete(e),this.handlers.delete(e),this.triggerOffsetChange(t))}getOffset(e){let t=this.initialOffset;const r=this.positions.get(e);for(const[e,n]of this.heights.entries()){const o=this.positions.get(e);void 0!==n&&void 0!==o&&o<r&&(t+=n)}return t}setOffsetChangeHandler(e,t){this.handlers.set(e,t)}triggerOffsetChange(e){for(const[t,r]of this.handlers.entries())this.positions.get(t)>e&&r()}}},6638:function(e,t,r){"use strict";var n=r(6220);const o=["component","componentId","stickyManager"];Object.defineProperty(t,"__esModule",{value:!0}),t.StickyWrap=void 0;const s=r(5058).__importStar(r(4121));t.StickyWrap=function(e){const{component:t,componentId:r,stickyManager:i}=e,a=n(e,o),[c,u]=(0,s.useState)(!0),l=(0,s.useCallback)((()=>u(!c)),[c]);i.setOffsetChangeHandler(r,l);const d=(0,s.useCallback)((({height:e})=>{i.setComponentHeight(r,e)}),[r,i]);return(0,s.useEffect)((()=>()=>{i.handleComponentRemove(r)}),[]),s.default.createElement(t,Object.assign({},a,{registerSticky:d,stickyOffset:i.getOffset(r)}))}},3657:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return e.split("-").map(((e,t)=>0===t?e:e.charAt(0).toUpperCase()+e.slice(1))).join("")}},7783:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.kebabize=t.camelize=t.asTree=t.FIRST_ID=t.mapTree=t.traverseTree=void 0;const n=r(5058),o=n.__importDefault(r(3657));t.camelize=o.default;const s=n.__importDefault(r(2129));function i(e,t,r){var n;const o=null!==(n=null==r?void 0:r.pattern)&&void 0!==n?n:"post-order";return function e(r,n=0,s=0,i=0){var a,c,u;const l=null!==(c=null===(a=r.content)||void 0===a?void 0:a.length)&&void 0!==c?c:0;let d=null!==(u=r.content)&&void 0!==u?u:null;const p={depth:n,layerPosition:i,neighborsCount:s};switch(o){case"pre-order":{const o=t(r,d,p);if(Array.isArray(r.content)){const t=r.content.map(((t,r)=>e(t,n+1,l-1,r)));o&&"object"==typeof o&&(o.content=t)}return o}case"post-order":return Array.isArray(r.content)&&(d=r.content.map(((t,r)=>e(t,n+1,l-1,r)))),t(r,d,p);default:throw new Error(`wrong pattern value: "${o}"`)}}(e)}function a(e,t){return i(e,((e,r)=>Object.assign({},t(e),{content:r})))}t.kebabize=s.default,t.traverseTree=i,t.mapTree=a,t.FIRST_ID="generated-id",t.asTree=function e(r,n=0){let s=n;return Array.isArray(r)?e({type:"fragment",content:r}):a(r,(e=>{var r,n;let i=e.id;if(!i){const e=s>0?`-${String(s)}`:"";i=`${t.FIRST_ID}${e}`,s++}return{id:i,type:(0,o.default)(null!==(r=e.type)&&void 0!==r?r:"as-tree-generated-type"),version:null!==(n=e.version)&&void 0!==n?n:"AS_TREE_PLACEHOLDER",content:e.content,render:e.render,properties:e.properties}}))}},2129:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return e.replace(/([a-z0-9]|(?=[A-Z0-9]))([A-Z0-9])/g,"$1-$2").toLowerCase()}},6609:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){var e,t=navigator.userAgent,r=t.match(/(opera|chrome|safari|firefox|msie|trident(?=\/))\/?\s*(\d+)/i)||[];if(/trident/i.test(r[1]))return!1;if("Chrome"===r[1]&&null!==(e=t.match(/\bOPR|Edge\/(\d+)/)))return parseInt(e[1],10)>=38;r=r[2]?[r[1],r[2]]:[navigator.appName,navigator.appVersion,"-?"],null!==(e=t.match(/version\/(\d+)/i))&&r.splice(1,1,e[1]);var n=parseInt(r[1],10);return"Edge"===r[0]&&n>=15||"Chrome"===r[0]&&n>=58||"Firefox"===r[0]&&n>=53||"Safari"===r[0]&&n>=11}},5408:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(6509);t.default=function(){window.cobrowsing&&(window.cobrowsing.closeAllStreams(),window.cobrowsing=null);var e=document.getElementById(n.COBROWSING_ID);e&&document.body.removeChild(e),Array.from(document.querySelectorAll('script[src*="//cobrowsing"]')).forEach((function(e){return e.remove()}))}},624:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(7355);t.default=function(e,t,r){void 0===t&&(t=n.AppId.TEST);try{if(localStorage){var o=localStorage.getItem("cobrowsingDynamicStand");if(o)return o.includes("localhost")?o:o+"/static/customer"}}catch(e){}switch(e){case n.Env.LOCAL:return"http://localhost:"+r;case n.Env.PROD:return"https://unic-cdn-prod.cdn-tinkoff.ru/static/cobrowsing-static/static/customer";case n.Env.QA:return"https://cobrowsing-"+e+".tcsbank.ru/static/customer";default:return e+"/static/customer"}}},8711:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,r){return"https://cobrowsing-admin.tcsbank.ru/player/"+e+"/"+t+"/"+r}},1519:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=window.cobrowsing;return t?t.getRecordedTime(e):Promise.resolve(null)}},4233:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),o=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),s=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&n(t,e,r);return o(t,e),t},i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.getRecordedTime=t.getPlayerUrl=t.Modern=t.SendMessageTypes=t.ViewId=t.Env=t.AppId=t.ReceiveMessageTypes=t.close=t.send=t.initialize=void 0;var a=i(r(6509));t.initialize=a.default;var c=i(r(2772));t.send=c.default;var u=i(r(5408));t.close=u.default;var l=i(r(8711));t.getPlayerUrl=l.default;var d=i(r(1519));t.getRecordedTime=d.default;var p=r(1801);Object.defineProperty(t,"SendMessageTypes",{enumerable:!0,get:function(){return p.SendMessageTypes}});var h=r(7355);Object.defineProperty(t,"AppId",{enumerable:!0,get:function(){return h.AppId}}),Object.defineProperty(t,"ViewId",{enumerable:!0,get:function(){return h.ViewId}}),Object.defineProperty(t,"Env",{enumerable:!0,get:function(){return h.Env}}),Object.defineProperty(t,"ReceiveMessageTypes",{enumerable:!0,get:function(){return h.ReceiveMessageTypes}}),Object.defineProperty(t,"Modern",{enumerable:!0,get:function(){return h.Modern}});try{Promise.resolve().then((function(){return s(r(459))})).then((function(e){window.cobrowsingPackageVersion=e.version}))}catch(e){}},7355:function(e,t){"use strict";var r,n,o,s,i;Object.defineProperty(t,"__esModule",{value:!0}),t.ViewId=t.Modern=t.ReceiveMessageTypes=t.AppId=t.Env=void 0,function(e){e.PF="pf",e.PFPHOME="pfphome",e.SME="sme",e.TCRM="tcrm",e.TQM="tqm",e.ITR="itr",e.TEST="test",e.TCB="tcb",e.WO="wo",e.TEST_SETTINGS="testsettings",e.TEST_LIMITS="testlimits",e.TCRMSME="tcrmsme",e.PWAMVNO="pwamvno",e.PWACREDIT="pwacredit",e.PWADEPOSIT="pwadeposit",e.PWASME="pwasme",e.PWAKASKO="pwakasko",e.PWAOSAGO="pwaosago",e.TCRMINSURANCE="tcrminsurance",e.TCRMMOBILE="tcrmmobile",e.TCRMFLCALLCENTER="tcrmflcallcenter",e.TCRMFLCHAT="tcrmflchat",e.TCRMSMECHAT="tcrmsmechat",e.TCRMOUTBOUND="tcrmoutbound",e.TCRMVALIDATION="tcrmvalidation",e.TCRMINVESTCALLS="tcrminvestcalls",e.TCRMINVESTCHATS="tcrminvestchats",e.TCRMVERIFICATION="tcrmverification",e.TCRMOPNK="tcrmopnk",e.MONOLITH="monolith",e.TRAVEL="travel"}(r||(r={})),t.AppId=r,function(e){e.TQM="tqm",e.TCB="tcb",e.TQM_WO="tqmwo",e.TEST_PLAYER="testplayer",e.PF_PLAYER="pfplayer",e.PFPHOME_PLAYER="pfphomeplayer",e.TEST_SETTINGS_PLAYER="testsettingsplayer",e.TEST_LIMITS_PLAYER="testlimitsplayer",e.SME_PLAYER="smeplayer",e.TQM_SME="tqmsme",e.PWAMVNO_PLAYER="pwamvnoplayer",e.PWACREDIT_PLAYER="pwacreditplayer",e.PWADEPOSIT_PLAYER="pwadepositplayer",e.PWASME_PLAYER="pwasmeplayer",e.PWAKASKO_PLAYER="pwakaskoplayer",e.PWAOSAGO_PLAYER="pwaosagoplayer",e.TQMINSURANCE="tqminsurance",e.TQMMOBILE="tqmmobile",e.TQMFLCALLCENTER="tcrmflcallcenter",e.TQMFLCHAT="tqmflchat",e.TQMSMECHAT="tqmsmechat",e.TQMTCRMOUTBOUND="tqmtcrmoutbound",e.TQMVALIDATION="tqmvalidation",e.TQMINVESTCALLS="tqminvestcalls",e.TQMINVESTCHATS="tqminvestchats",e.TQMVERIFICATION="tqmverification",e.TQMOPNK="tqmopnk",e.MONOLITH="monolith",e.TRAVEL_PLAYER="travelplayer"}(n||(n={})),t.ViewId=n,function(e){e.LOCAL="local",e.PROD="prod",e.QA="qa"}(o||(o={})),t.Env=o,function(e){e.auto="auto",e.modern="modern",e.legacy="legacy"}(s||(s={})),t.Modern=s,function(e){e.GOOD_CONNECTION="GOOD_CONNECTION",e.BAD_CONNECTION="BAD_CONNECTION",e.CONNECTION_LOST="CONNECTION_LOST",e.SESSION_CLOSE="SESSION_CLOSE",e.SESSION_REQUEST="SESSION_REQUEST",e.NO_CONNECTION="NO_CONNECTION",e.MARK_AREA="MARK_AREA",e.SESSION_CODE="SESSION_CODE",e.SESSION_REJECTED="SESSION_REJECTED"}(i||(i={})),t.ReceiveMessageTypes=i},6509:function(e,t,r){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.COBROWSING_ID=void 0;var o=n(r(624)),s=r(2772),i=r(7355),a=n(r(6609)),c="cobrowsingScript";t.COBROWSING_ID=c;var u=function(){};function l(e){try{return JSON.parse(e.data)}catch(t){return e.data}}t.default=function(e,t,r,n){var d=e.env,p=e.wuid,h=e.appId,f=e.disableStream,g=e.modern,v=e.minDomUpdateTimeout,m=e.ngZone,y=e.onlyOnLoad;void 0===t&&(t=u),void 0===r&&(r=u),void 0===n&&(n=u);var b=function(e,t,r){void 0===e&&(e=i.Env.QA),void 0===t&&(t=i.AppId.TEST),void 0===r&&(r=i.Modern.auto);var n=o.default(e,t,3e3);return r===i.Modern.auto?n+"/main."+(a.default()?"modern.":"")+"bundle.js?appId="+t:r===i.Modern.legacy?n+"/main.bundle.js?appId="+t:n+"/main.modern.bundle.js?appId="+t}(d,h,g),S=document.getElementById(c);S&&(window.cobrowsing&&(window.cobrowsing.closeAllStreams(),window.cobrowsing=null),document.body.removeChild(S)),window.addEventListener("message",(function e(o){"cobrowsingReady"===l(o).message&&(window.cobrowsing.initialize(p,f,v,m),window.cobrowsing.subscribe(t,r,n),window.removeEventListener("message",e))}),!1),window.addEventListener("message",(function(e){"cobrowsingConnectionReady"===l(e).message&&s.flushBuffer()}),!1);var _=function e(){(S=document.createElement("script")).setAttribute("id",c),S.src=b+"&t="+(new Date).getTime(),document.body.appendChild(S),window.removeEventListener("load",e)};y&&"complete"!==document.readyState?window.addEventListener("load",_):_()}},1801:function(e,t){"use strict";var r;Object.defineProperty(t,"__esModule",{value:!0}),t.SendMessageTypes=void 0,function(e){e.SESSION_CONFIRMATION="SESSION_CONFIRMATION",e.SESSION_REFUSE="SESSION_REFUSE",e.SESSION_CLOSE="SESSION_CLOSE",e.START_RECORD="START_RECORD",e.STOP_RECORD="STOP_RECORD",e.CUSTOM_DATA="CUSTOM_DATA",e.STOP_LIGHT_RECORD="STOP_LIGHT_RECORD",e.SESSION_REQUEST="SESSION_REQUEST"}(r||(r={})),t.SendMessageTypes=r},2772:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.flushBuffer=void 0;var r=[];function n(e,t,n){var o=window.cobrowsing;"object"==typeof n&&n.saveStartTime&&!n.startTime&&(n.startTime=Date.now()),o&&o.isSocketReady&&o.isSocketReady()?o.send(e,t,n):!o||o.isSocketReady?r.push({message:e,data:t,settings:n}):o.send(e,t,n)}t.flushBuffer=function(){var e=r.slice();r=[];for(var t=e.shift();t;t=e.shift())n(t.message,t.data,t.settings)},t.default=n},7818:function(e,t,r){"use strict";r.d(t,{e:function(){return c},w:function(){return a}});var n=r(3697),o=r(1940),s=r(2099),i=r(971);const a=(0,n.V)("isDiChildContainer");class c extends o.W{constructor(e,t){super(void 0,t),this.root=e,this.register({provide:s.Z,useValue:this}),this.register({provide:a,useValue:!0})}getRecord(e){return super.getRecord(e)||this.root.getRecord(e)}getValue(e){return this.recordValues.has(e)?this.recordValues.get(e):e.scope!==i.s.SINGLETON&&e.factory?o.L:this.root.getValue(e)}hydrateDeps(e){return e.scope===i.s.REQUEST?super.hydrateDeps(e):super.hydrateDeps.call(this.root,e)}hydrate(e,t,r){return e.scope===i.s.REQUEST?super.hydrate(e,t,r):super.hydrate.call(this.root,e,t,r)}}},1940:function(e,t,r){"use strict";r.d(t,{W:function(){return u},L:function(){return i}});var n=r(971);const o=(e,t)=>{const r=new Error(e);return Object.assign(r,Object.assign({},t,{stack:t.stack?`${r.stack}\n---- caused by: ----\n${t.stack}`:r.stack}))};var s=r(2099);const i="__NOT_YET__MARKER",a="__CIRCULAR__MARKER";function c(e,t,r,n,o){return{factory:e,resolvedDeps:t,scope:r,multi:n?[]:void 0,stack:o}}class u{constructor(e,t){this.records=new Map,this.recordValues=new Map,e&&e.forEach((e=>this.register(e))),this.fallback=t,this.register({provide:s.Z,useValue:this})}get(e){var t;let r,s=!1;"string"==typeof e?r=e:"token"in e?(r=e.token,s=e.optional):r=e,r=r.toString();const i=this.getRecord(r);return!i&&(null===(t=this.fallback)||void 0===t?void 0:t.getRecord(r))?this.fallback.get(e):!i&&s?null:(function(e,t){if(void 0===e)throw o(`Token not found "${t}"`,{type:n.D.NOT_FOUND})}(i,r),this.hydrate(i,r,s))}getOfDeps(e){const t={};for(const r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=this.get(e[r]));return t}getRecord(e){return this.records.get(e)}has(e){return!!this.getRecord(e.toString())}borrowToken(e,t){const r=t.toString();if(!this.getRecord(r)){const t=e.getRecord(r);t&&(this.records.set(r,t),this.recordValues.set(t,i))}}getValue(e){return this.recordValues.get(e)}register(e){return function(e){if("string"==typeof e.provide)return;const t=e.provide.options;if(t&&t.multi&&!e.multi)throw o(`Token ${e.provide.toString()} require multi providers`,{type:n.D.REQUIRE_MULTI,stack:e.__stack})}(e),this.processProvider(e)}processProvider(e){const t=e.provide.toString(),r=function(e){let t,r={},o=n.s.REQUEST;return"useFactory"in e?(t=t=>e.useFactory(t),e.deps&&(r=e.deps),e.scope&&(o=e.scope)):"useClass"in e&&(t=t=>new e.useClass(t),e.deps&&(r=e.deps),e.scope&&(o=e.scope)),c(t,r,o,!1,e.__stack)}(e),s=function(e){return"useValue"in e?e.useValue:i}(e);if(e.multi){let s=this.getRecord(t);if(s){if(void 0===s.multi)throw o(`Mixed multi-provider for ${t}`,{type:n.D.MIXED_MULTI,stack:e.__stack})}else s=c(void 0,{},e.scope||n.s.REQUEST,!0,e.__stack),this.records.set(t,s),this.recordValues.set(s,i);s.multi.push(r)}else this.records.set(t,r);this.recordValues.set(r,s)}hydrateDeps(e){return this.getOfDeps(e.resolvedDeps)}hydrate(e,t,r){let s=this.getValue(e);if(function(e,t,r){if(r===a)throw o(`Circular dep for "${t}"`,{type:n.D.CIRCULAR_DEP,stack:e.stack})}(e,t,s),s!==i)return s;if(e.multi)this.recordValues.set(e,a),s=e.multi.map((e=>this.hydrate(e,t,!1)));else{this.recordValues.set(e,a);try{s=e.factory(this.hydrateDeps(e))}catch(o){if(this.recordValues.set(e,i),r&&o.type===n.D.NOT_FOUND)return null;!function(e,t){throw t.__extendedWithStack?t.message+=` < ${e}`:(t.__extendedWithStack=!0,t.message=`${t.message} at "${e}"`),Object.hasOwnProperty.call(t,"stack")&&"string"==typeof t.stack&&(t.stack=t.stack.replace(/^.+\n/,`${t.name}: ${t.message}\n`)),t}(t,Object.assign(o,{stack:!e.stack||/---- caused by: ----/g.test(o.stack)?o.stack:`${o.stack}\n---- caused by: ----\n${e.stack||""}`}))}}return this.recordValues.set(e,s),s}}},971:function(e,t,r){"use strict";r.d(t,{D:function(){return o},s:function(){return n}});const n={REQUEST:"request",SINGLETON:"singleton"},o={NOT_FOUND:"NotFound",CIRCULAR_DEP:"CircularDep",REQUIRE_MULTI:"RequireMulti",MIXED_MULTI:"MixedMulti",WRONG_FORMAT:"WrongFormat"}},487:function(e,t,r){"use strict";r.d(t,{H:function(){return o}});var n=r(7818);function o(e,t){const r=new n.e(e);return t&&t.forEach((e=>{r.register(e)})),r}},4403:function(e,t,r){"use strict";r.d(t,{f:function(){return o}});var n=r(1940);function o(e){return new n.W(e)}},3697:function(e,t,r){"use strict";r.d(t,{V:function(){return o}});class n{constructor(e,t={}){this.isToken=!0,this.name=e,this.options=t}toString(){return this.name}}function o(e,t){return new n(e,t)}},9652:function(e,t,r){"use strict";r.r(t),r.d(t,{Container:function(){return n.W},ChildContainer:function(){return o.e},IS_DI_CHILD_CONTAINER_TOKEN:function(){return o.w},createContainer:function(){return s.f},createChildContainer:function(){return i.H},createToken:function(){return a.V},Scope:function(){return c.s},DI_TOKEN:function(){return u.Z},provide:function(){return l.J}});var n=r(1940),o=r(7818),s=r(4403),i=r(487),a=r(3697),c=r(971),u=r(2099),l=r(8574)},8574:function(e,t,r){"use strict";function n(e){return e}r.d(t,{J:function(){return n}})},2099:function(e,t,r){"use strict";r.d(t,{Z:function(){return n}});const n=(0,r(3697).V)("di")},3742:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.EventeaBeerClient=void 0,t.EventeaBeerClient=class{constructor(e){{const{baseUrl:t}=e;this._request=e=>fetch(`${t}${e.method}`,Object.assign({},e,{method:e.httpMethod})).then((e=>e.json()))}}event(e){var t;const r={project:e.project,event:e.event,payload:Object.assign({},e.payload||{},{appName:null===(t=e.handlersData)||void 0===t?void 0:t.appName})};return this._request({method:"event",httpMethod:"POST",body:JSON.stringify(r),headers:{"content-type":"application/json"},credentials:"omit"}).catch((()=>{}))}}},3579:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.EventeaDataState=void 0,t.EventeaDataState=class{constructor(e){this.__state={},this.add=e=>{const{project:t,payload:r}=e;this.__state[t]=Object.assign({},this.__state[t],r)},this.remove=(...e)=>{const[t,r]=e;return!!this.__state[t]&&(delete this.__state[t][r],!0)},this.get=(...e)=>{const[t,r]=e;if(this.__state[t])return this.__state[t][r]},(null==e?void 0:e.initData)&&e.initData&&(this.__state=e.initData)}get _getAll(){return this.__state}}},9549:function(e,t){"use strict";var r,n,o,s;Object.defineProperty(t,"__esModule",{value:!0}),t.sendDiagMessage=t.DiagMessageType=t.HandlerStatus=t.SentStatus=t.IncompleteReason=void 0,(s=t.IncompleteReason||(t.IncompleteReason={}))[s.MissedProject=0]="MissedProject",s[s.MissedRouting=1]="MissedRouting",s[s.MissedEvent=2]="MissedEvent",s[s.MissedRoutes=3]="MissedRoutes",(o=t.SentStatus||(t.SentStatus={}))[o.Routed=0]="Routed",o[o.IncompleteRouting=1]="IncompleteRouting",o[o.Deprecated=2]="Deprecated",o[o.Dead=3]="Dead",(n=t.HandlerStatus||(t.HandlerStatus={}))[n.Handled=0]="Handled",n[n.MissedHandler=1]="MissedHandler",n[n.HandlerErrored=2]="HandlerErrored",(r=t.DiagMessageType||(t.DiagMessageType={}))[r.SendStart=0]="SendStart",r[r.SentStats=1]="SentStats",t.sendDiagMessage=function(e){try{const t=new CustomEvent("__evntx10t",{bubbles:!0,detail:e});document.dispatchEvent(t)}catch(e){}}},307:function(e,t){"use strict";var r;Object.defineProperty(t,"__esModule",{value:!0}),t.EventeaFeaturesBits=void 0,(r=t.EventeaFeaturesBits||(t.EventeaFeaturesBits={}))[r.DiagStats=1]="DiagStats"},5183:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),o=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),o(r(307),t),o(r(9549),t)},7385:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.sendPostMessage=void 0;const r=window;t.sendPostMessage=({type:e,payload:t,config:n={}})=>{const{targetOrigin:o="*",payloadProperty:s}=n;r&&(r.top||r.opener||r.parent).postMessage(JSON.stringify(Object.assign({type:e},s?{[s]:t}:t)),o)}},9523:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.EventeaQueueObserver=t.EventeaQueue=void 0;const r=window;t.EventeaQueue=class{constructor(e){var t,n;this.send=e=>{this.__addEventToStore(["send",e])},this.sendOnce=e=>(this.__addEventToStore(["sendOnce",e]),!0),this.data=e=>{this.__addEventToStore(["data",e])},this.errorHandlers=null==e?void 0:e.errorHandlers,r?!r._evnteq&&(r._evnteq=[]):null===(n=null===(t=this.errorHandlers)||void 0===t?void 0:t.handleQueueUsageAtServer)||void 0===n||n.call(t)}__addEventToStore(e){(null==r?void 0:r._evnteq)&&r._evnteq.push(e)}get getQueue(){return null==r?void 0:r._evnteq}},t.EventeaQueueObserver=class{constructor(e){var t,n;this.DEFAULT_REFRESH_TIME=500,this.timerId=0,this.observerSuspended=!1,this.clearGlobalData=()=>{(null==r?void 0:r._evnteq)&&(r._evnteq=[])},this.handleSubscriber=()=>{var e,t;if(this.watcher&&(null==r?void 0:r._evnteq)&&r._evnteq.length){try{this.watcher([...r._evnteq])}catch(r){const{message:n}=r;null===(t=null===(e=this.errorHandlers)||void 0===e?void 0:e.handleObserverWatcherErrors)||void 0===t||t.call(e,n)}this.clearGlobalData()}},this.setRefreshTimer=()=>{this.timerId=setInterval(this.handleSubscriber,this.DEFAULT_REFRESH_TIME)},this.unwatch=()=>clearInterval(this.timerId),this.__getAllQueue=()=>null==r?void 0:r._evnteq,this.errorHandlers=null==e?void 0:e.errorHandlers,(null==e?void 0:e.refreshTime)&&(this.DEFAULT_REFRESH_TIME=e.refreshTime),r?!r._evnteq&&(r._evnteq=[]):(this.observerSuspended=!0,null===(n=null===(t=this.errorHandlers)||void 0===t?void 0:t.handleQueueUsageAtServer)||void 0===n||n.call(t))}set watch(e){var t,r;this.observerSuspended?null===(r=null===(t=this.errorHandlers)||void 0===t?void 0:t.handleQueueUsageAtServer)||void 0===r||r.call(t):(this.unwatch(),this.watcher=e,this.handleSubscriber(),this.setRefreshTimer())}}},9422:function(e,t,r){"use strict";t.k=void 0;const n=r(3742),o=r(9523),s=r(3579),i=r(7385),a=r(5183),c=r(5183);class u{constructor(e){if(this.defaultEventHandlers=Object.assign({},e.defaultEventHandlers),this.defaultDataHandlers=Object.assign({},e.defaultDataHandlers),window.__evntfxb1ts||(window.__evntfxb1ts=c.EventeaFeaturesBits.DiagStats),this.defaultEventHandlers.postMessage=({event:e,config:t,payload:r})=>(0,i.sendPostMessage)({type:e,config:t,payload:r}),e.beerBaseUrl){const t=new n.EventeaBeerClient({baseUrl:e.beerBaseUrl});this.defaultEventHandlers["eventea-beer"]=e=>null==t?void 0:t.event(e)}this.routingClientLoader=e.routingClientLoader,this.projectConfigurationMap=e.projectConfigurationMap,this.errorHandlers=e.errorHandlers,this.handlersData=e.handlersData||{},this.onceSentEvents=e.onceSentEvents||new Map,this.handleAnyEvent=e.handleAnyEvent,this.eventeaDataState=new s.EventeaDataState({initData:e.data}),this.eventeaQueueObserver=new o.EventeaQueueObserver({errorHandlers:{handleQueueUsageAtServer:this.errorHandlers.handleQueueUsageAtServer,handleObserverWatcherErrors:this.errorHandlers.handleObserverWatcherErrors}}),this.eventeaQueueObserver.watch=e=>{e.forEach((e=>{var t,r,n,o;const[s,i]=e;try{switch(s){case"send":this.send(i);break;case"sendOnce":this.sendOnce(i);break;case"data":this.data(i);break;default:null===(r=(t=this.errorHandlers).handleUnknownMethodInQueue)||void 0===r||r.call(t,{requestType:s})}}catch(e){null===(o=(n=this.errorHandlers).handleErrorQueueEvent)||void 0===o||o.call(n,{requestType:s,requestData:i})}}))}}send(e){var t,r,n,o;(0,a.sendDiagMessage)({type:a.DiagMessageType.SendStart,event:e});const{project:s,event:i}=e,c=this.projectConfigurationMap[s];let u=e;const l=t=>(0,a.sendDiagMessage)({type:a.DiagMessageType.SentStats,event:e,stats:t});if(!(null==c?void 0:c.routing)&&this.routingClientLoader)return void this.routingClientLoader.getRouting(s).then((t=>{c?c.routing=t:this.projectConfigurationMap[s]={routing:t},this.send(e)}),(e=>{var t,r;!e&&(null===(r=(t=this.errorHandlers).handleMissedClientRouting)||void 0===r||r.call(t,{project:s})),l({status:a.SentStatus.IncompleteRouting,reason:a.IncompleteReason.MissedProject})}));if(!c)return this.errorHandlers.handleMissedProject({event:i,project:s}),void l({status:a.SentStatus.IncompleteRouting,reason:a.IncompleteReason.MissedProject});const d=c.routing;if(!d)return this.errorHandlers.handleMissedRouting({project:s}),void l({status:a.SentStatus.IncompleteRouting,reason:a.IncompleteReason.MissedProject});const p=d.events;if(!p)return this.errorHandlers.handleMissedRouting({project:s}),void l({status:a.SentStatus.IncompleteRouting,reason:a.IncompleteReason.MissedRouting});const h=p[i];if(!h)return this.errorHandlers.handleMissedEvent({event:i,project:s}),void l({status:a.SentStatus.IncompleteRouting,reason:a.IncompleteReason.MissedEvent});if("fromData"in h&&h.fromData){const{fromData:e}=h,t={};Object.keys(e).forEach((r=>{const n=this.eventeaDataState.get(s,e[r]);n&&(t[r]=n)})),u=Object.assign({},u,{payload:Object.assign({},t,u.payload)})}const f=this._getTracking();if("fromDataPool"in h&&h.fromDataPool&&f){const e={};for(const t of Object.keys(h.fromDataPool)){const r=h.fromDataPool[t];e[t]=f._prot.dataPool[r]}const t=f._prot.collectDataElements(e);u=Object.assign({},u,{payload:Object.assign({},t,u.payload)})}let g=this.handlersData;if(d.statist&&(g=Object.assign({},g,{statist:d.statist})),this.handleAnyEvent&&this.handleAnyEvent(Object.assign({},u,{eventRouting:h,handlersData:g})),"isDeprecated"in h&&h.isDeprecated)return null===(r=(t=this.errorHandlers).handleDeprecatedEvent)||void 0===r||r.call(t,{event:i,project:s}),void l({status:a.SentStatus.Deprecated});if(!("routes"in h))return null===(o=(n=this.errorHandlers).handleMissedRoutes)||void 0===o||o.call(n,{event:i,project:s}),void l({status:a.SentStatus.IncompleteRouting,reason:a.IncompleteReason.MissedRoutes});const v=Object.getOwnPropertyNames(h.routes);if(0==v.length)l({status:a.SentStatus.Dead});else{const e={};v.forEach((t=>{var r;const n=(null===(r=c.eventHandlers)||void 0===r?void 0:r[t])||this.defaultEventHandlers[t];if(!n)return this.errorHandlers.handleMissedEventHandler({project:s,event:i,routeHandlerName:t}),void(e[t]={status:a.HandlerStatus.MissedHandler});const o=h.routes[t],l=Object.assign({},u,{config:o,handlersData:g});try{n(l),e[t]={status:a.HandlerStatus.Handled}}catch(r){if(e[t]={status:a.HandlerStatus.HandlerErrored,error:r},!this.errorHandlers.handleEventHandlerError)throw r;this.errorHandlers.handleEventHandlerError(r,t,l)}})),l({status:a.SentStatus.Routed,routesStats:e})}}sendOnce(e,t=!0){const r=`${e.project}/${e.event}`;this.onceSentEvents.has(r)||this.onceSentEvents.set(r,new Set);const n=this.onceSentEvents.get(r);return!n.has(t)&&(this.send(e),n.add(t),!0)}data(e){var t,r,n,o;const{project:s}=e,i=this.projectConfigurationMap[s];if(!i)return void(null===(r=(t=this.errorHandlers).handleMissedDataProject)||void 0===r||r.call(t,{project:s}));const{dataHandlers:a={}}=i,c=Object.assign({},this.defaultDataHandlers,a);for(const t of Object.keys(c)){const r=c[t];"function"==typeof r?r(e):null===(o=(n=this.errorHandlers).handleMissedDataHandler)||void 0===o||o.call(n,{project:s,handlerName:t})}this.eventeaDataState.add(e)}replicateWithData(e){const t=Object.assign({},this.eventeaDataState._getAll,null==e?void 0:e.additionalDataState);return new u({errorHandlers:this.errorHandlers,handlersData:Object.assign({},this.handlersData,null==e?void 0:e.additionalHandlersData),projectConfigurationMap:this.projectConfigurationMap,onceSentEvents:this.onceSentEvents,defaultEventHandlers:this.defaultEventHandlers,defaultDataHandlers:this.defaultDataHandlers,data:t})}_getTracking(){if(window.tracking&&tracking._prot)return window.tracking}}t.k=u},9442:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.statistHandlerFactory=void 0;const n=r(2264);function o(){if(window.tracking&&tracking._prot)return window.tracking}t.statistHandlerFactory=function({statistClient:e}){return({event:t,payload:r,project:s,config:i,handlersData:a})=>{let c=r||{};if(!function(e){return"object"==typeof e&&null!==e}(i))throw new Error("Unknown config for statist handler");{const u=`eventea.projects.${(0,n.camelCase)(s)}`,l=`events.${i.eventName||t}`,d=o(),p=a&&a.statist?a.statist:void 0;if(p&&p.commonParams&&d){const e={};for(const t of Object.keys(p.commonParams)){const{deprecated:r}=p.commonParams[t];!r&&t in d._prot.dataPool&&(e[t]=d._prot.dataPool[t])}const t=d._prot.collectDataElements(e);c=Object.assign({},t,c)}const{remapAsList:h}=i;if(h)for(const e of Object.keys(h))c[e]=h[e].params.map((t=>{var n,o,s;const i=(null===(n=h[e].paramsSource)||void 0===n?void 0:n[t])||"event";return"event"===i&&r?String(null!==(o=r[t])&&void 0!==o?o:""):"dataPool"===i&&d&&t in d._prot.dataPool?String(null!==(s=d._prot.collectDataElement(d._prot.dataPool[t]))&&void 0!==s?s:""):""}));e.send(u,l,c)}}}},538:function(e,t,r){"use strict";t.I=void 0;var n=r(9442);Object.defineProperty(t,"I",{enumerable:!0,get:function(){return n.statistHandlerFactory}})},8153:function(e,t,r){"use strict";r.d(t,{z:function(){return n},K:function(){return o}});const n={trace:50,debug:40,info:30,warn:20,error:10,fatal:0,silent:-1/0},o={50:"trace",40:"debug",30:"info",20:"warn",10:"error",0:"fatal"}},3310:function(e,t,r){"use strict";r.d(t,{v:function(){return i}});var n=r(86),o=r(8153);const s=["addBeforeReporter","setBeforeReporters","addReporter","setReporters","addFilter","setFilters","addExtension","setExtensions",...Object.keys(o.z)],i=e=>{const t=new n.Y(e);return Object.assign((e=>t.child(e)),s.reduce(((e,r)=>(t[r]&&(e[r]=t[r].bind(t)),e)),{}),{setLevel:n.Y.setLevel,setGlobalReporters:n.Y.setGlobalReporters,enable:n.Y.enable,disable:n.Y.disable,clear:n.Y.clear})}},8297:function(e,t,r){"use strict";r.r(t),r.d(t,{BrowserReporter:function(){return o.q},LEVELS:function(){return i.z},LEVEL_NAMES:function(){return i.K},RemoteReporter:function(){return d.f},createLoggerFactory:function(){return n.v},default:function(){return l},formatJson:function(){return p.S},logger:function(){return l}});var n=r(3310),o=r(2821),s=r(86),i=r(8153);const a="_t_logger";let c,u;i.z.error;try{c=window.localStorage,u=JSON.parse(c.getItem(a))}catch(e){}u||(u=(()=>{try{return(e=>{if(!e)return;const t=e.split(",");return{level:i.z.silent,enabledLevel:Array(t.length).fill(i.z.trace),enabledName:t}})(window.localStorage.getItem("debug"))}catch(e){}})()),s.Y.setOnChange((e=>{try{c.setItem(a,JSON.stringify(e))}catch(e){}})),u&&s.Y.load(u);const l=(0,n.v)({name:"",reporters:[new o.q]});window.logger=l;var d=r(6916),p=r(8100)},86:function(e,t,r){"use strict";r.d(t,{Y:function(){return d}});var n=r(5797),o=r.n(n),s=r(6061),i=r.n(s),a=r(5972),c=r.n(a),u=r(8153);const l=e=>new RegExp(`^${e.replace(/\*/g,".*?")}$`);class d{constructor(e={name:""}){if(this.name=o()(e.name),this.key=e.key||this.name,d.instances[this.key])return d.instances[this.key];this.beforeReporters=e.beforeReporters||[],this.reporters=e.reporters||[],this.filters=e.filters||[],this.extensions=e.extensions||[],this.defaults=e.defaults||{},e.level&&this.setLevel(u.z[e.level]),e.enabled&&this.setLevel(u.z.trace),this.checkEnabled(),d.instances[this.key]=this,i()(((e,t)=>{this[t]=(...t)=>this.log(e,t)}),u.z)}static save(){var e;null===(e=d.onChange)||void 0===e||e.call(d,{level:d.level,enabledName:this.enabledName,enabledLevel:this.enabledLevel})}static load(e){d.level=e.level,d.enabledName=e.enabledName,d.enabledLevel=e.enabledLevel}static setLevel(e){var t;d.level=null!==(t=u.z[e])&&void 0!==t?t:d.level,d.save()}static setOnChange(e){d.onChange=e}static enable(e,t){const[r,n]=t?[u.z[e],t]:[u.z.trace,e];d.enabledName.push(n),d.enabledLevel.push(r),d.save();const o=l(n);i()((e=>{const{name:t}=e;o.test(t)&&e.setLevel(r)}),d.instances)}static disable(e,t){const[r,n]=t?[u.z[e],t]:[u.z.silent,e],o=d.enabledName.indexOf(n);o>-1?(d.enabledName.splice(o,1),d.enabledLevel.splice(o,1)):(d.enabledName.push(n),d.enabledLevel.push(r)),d.save();const s=l(n);i()((e=>{const{name:t}=e;s.test(t)&&e.setLevel(r)}),d.instances)}static clear(){d.level=u.z.silent,d.enabledName=[],d.enabledLevel=[],d.save(),i()((e=>{e.setLevel(void 0)}),d.instances)}static setGlobalReporters(e){const t=c()(e);i()((e=>{e.reporters=t}),d.instances)}child(e){const t="string"==typeof e?{name:e}:e,r=t.key||t.name,n=this.name?`${this.name}.${t.name}`:t.name,o=this.key?`${this.key}.${r}`:r;return new d(Object.assign({beforeReporters:this.beforeReporters,reporters:this.reporters,filters:this.filters,extensions:this.extensions,defaults:this.defaults},t,{name:n,key:o}))}addBeforeReporter(e){this.beforeReporters=this.beforeReporters.concat(e)}setBeforeReporters(e){this.beforeReporters=c()(e)}addReporter(e){this.reporters=this.reporters.concat(e)}setReporters(e){this.reporters=c()(e)}addFilter(e){this.filters=this.filters.concat(e)}setFilters(e){this.filters=c()(e)}addExtension(e){this.extensions=this.extensions.concat(e),this.extensions.push(e)}setExtensions(e){this.extensions=c()(e)}setLevel(e){this.level=e}checkEnabled(){for(let e=d.enabledName.length-1;e>=0;e--){const t=d.enabledName[e];if(l(t).test(this.name))return void this.setLevel(d.enabledLevel[e])}}createLogObj(e,t){return Object.assign({date:new Date},this.defaults,{name:this.name,type:u.K[e],level:e,args:t})}log(e,t){let r;this.beforeReporters.length&&(r=this.createLogObj(e,t));for(const e of this.beforeReporters)e.log(r);if(void 0===this.level){if(e>d.level)return!1}else if(e>this.level)return!1;r||(r=this.createLogObj(e,t));for(const e of this.filters)if(!1===e.filter(r))return!1;for(const e of this.extensions)r=e.extend(r);for(const e of this.reporters)e.log(r);return!0}}d.level=u.z.silent,d.instances={},d.enabledName=[],d.enabledLevel=[]},2821:function(e,t,r){"use strict";r.d(t,{q:function(){return n}});class n{constructor(){this.defaultColor="#7f8c8d",this.levelColorMap={0:"#c00046",10:"#c0392b",20:"#f39c12",30:"#00BCD4"}}log(e){const t=e.level<20?console.error:20===e.level?console.warn:console.log,r=`\n      background: ${this.levelColorMap[e.level]||this.defaultColor};\n      border-radius: 0.5em;\n      color: white;\n      font-weight: bold;\n      padding: 2px 0.5em;\n    `,n=`%c${[e.name,e.type].filter(Boolean).join(":")}`;"string"==typeof e.args[0]?t.call(console,`${n}%c ${e.args[0]}`,r,"",...e.args.slice(1)):t.call(console,n,r,...e.args)}}},6916:function(e,t,r){"use strict";r.d(t,{f:function(){return c}});var n=r(3016),o=r.n(n),s=r(8430),i=r.n(s),a=r(8100);class c{constructor({requestCount:e,makeRequest:t,emitLevels:r}){this.reqCount=0,this.queue=[],this.requestCount=e||1,this.makeRequest=t,this.emitLevels=r||{fatal:!0}}checkQueue(){this.queue.length&&this.reqCount<this.requestCount&&this.sendRequest()}sendRequest(){const e=this.queue.shift();this.reqCount++,this.makeRequest((0,a.S)(e)).catch(o()).then((()=>{this.reqCount--,this.checkQueue()}))}remote(e){this.queue.push(e),this.checkQueue()}log(e){const{type:t,remote:r}=e;null==r?this.emitLevels[t]&&this.remote(e):(!0===r||i()(["emitLevels",t],!0,r))&&this.remote(Object.assign({},e,{remote:void 0}))}}},8100:function(e,t,r){"use strict";r.d(t,{S:function(){return d}});var n=r(1336),o=r.n(n),s=r(7384),i=r.n(s),a=r(9648),c=r.n(a),u=r(8345);const l=e=>(o()(e)&&(e=new Error(e)),Object.assign({},e,{body:(0,u.K)(e.body),code:(0,u.K)(e.code),message:e.message,stack:e.stack})),d=e=>{let t,r,n=null;const{args:s}=e;s[0]instanceof Error?(r=l(s[0]),t=o()(s[1])?s[1]:s[0].message):i()(s[0])&&!c()(s[0])?(n=s[0],r=n.error&&l(n.error),s[0].message?t=s[0].message:o()(s[1])&&(t=s[1])):t=s[0];const a=s.slice(t===s[1]?2:1).map((e=>e instanceof Error?{error:l(e)}:e));return Object.assign({},e,{args:a.length?a:void 0},n,{error:r,message:t})}},4772:function(e){const t="object"==typeof performance&&performance&&"function"==typeof performance.now?performance:Date,r=e=>e<=Math.pow(2,8)?Uint8Array:e<=Math.pow(2,16)?Uint16Array:e<=Math.pow(2,32)?Uint32Array:e<=Number.MAX_SAFE_INTEGER?n:null;class n extends Array{constructor(e){super(e),this.fill(0)}}class o{constructor(e){if(0===e)return[];const t=r(e);this.heap=new t(e),this.length=0}push(e){this.heap[this.length++]=e}pop(){return this.heap[--this.length]}}e.exports=class{constructor(e={}){const{max:t=0,ttl:n,ttlResolution:s=1,updateAgeOnGet:i,allowStale:a,maxAge:c,stale:u}=e;this.max=t;const l=t?r(t):Array;this.keyMap=new Map,this.keyList=new Array(t).fill(null),this.valList=new Array(t).fill(null),this.next=new l(t),this.prev=new l(t),this.head=0,this.tail=0,this.free=new o(t),this.initialFill=1,this.size=0,this.allowStale=!!a||!!u,this.updateAgeOnGet=!!i,this.ttlResolution=s,this.ttl=n||c||0,this.ttl&&this.initializeTTLTracking()}initializeTTLTracking(){this.ttls=new n(this.max),this.starts=new n(this.max),this.setItemTTL=(e,r)=>{this.starts[e]=0!==r?t.now():0,this.ttls[e]=r},this.updateItemAge=e=>{this.starts[e]=0!==this.ttls[e]?t.now():0};let e=0;const r=()=>{const r=t.now();if(this.ttlResolution>0){e=r;const t=setTimeout((()=>e=0),this.ttlResolution);t.unref&&t.unref()}return r};this.isStale=t=>0!==this.ttls[t]&&0!==this.starts[t]&&(e||r())-this.starts[t]>this.ttls[t]}updateItemAge(e){}setItemTTL(e,t){}isStale(e){return!1}set(e,t,{ttl:r=this.ttl}={}){let n=0===this.size?void 0:this.keyMap.get(e);return void 0===n?(n=this.newIndex(),this.keyList[n]=e,this.valList[n]=t,this.keyMap.set(e,n),this.next[this.tail]=n,this.prev[n]=this.tail,this.tail=n,this.size++):(t!==this.valList[n]&&(this.valList[n]=t),this.moveToTail(n)),0===r||0!==this.ttl||this.ttls||this.initializeTTLTracking(),this.setItemTTL(n,r),this}newIndex(){return 0===this.size?this.tail:this.size===this.max&&0!==this.max?this.evict(!1):0!==this.free.length?this.free.pop():this.initialFill++}pop(){if(this.size){const e=this.valList[this.head];return this.evict(!0),e}}evict(e){const t=this.head,r=this.keyList[t];return e&&(this.keyList[t]=null,this.valList[t]=null,this.free.push(t)),this.head=this.next[t],this.keyMap.delete(r),this.size--,t}has(e){const t=this.keyMap.get(e);return void 0!==t&&!this.isStale(t)}peek(e,{allowStale:t=this.allowStale}={}){const r=this.keyMap.get(e);if(void 0!==r&&(t||!this.isStale(r)))return this.valList[r]}get(e,{allowStale:t=this.allowStale,updateAgeOnGet:r=this.updateAgeOnGet}={}){const n=this.keyMap.get(e);if(void 0!==n){const o=this.valList[n];return this.isStale(n)?(this.delete(e),t?o:void 0):(this.moveToTail(n),r&&this.updateItemAge(n),o)}}connect(e,t){this.prev[t]=e,this.next[e]=t}moveToTail(e){e!==this.tail&&(e===this.head?this.head=this.next[e]:this.connect(this.prev[e],this.next[e]),this.connect(this.tail,e),this.tail=e)}delete(e){let t=!1;if(0!==this.size){const r=this.keyMap.get(e);void 0!==r&&(t=!0,1===this.size?this.clear():(this.keyMap.delete(e),this.keyList[r]=null,this.valList[r]=null,r===this.tail?this.tail=this.prev[r]:r===this.head?this.head=this.next[r]:(this.next[this.prev[r]]=this.next[r],this.prev[this.next[r]]=this.prev[r]),this.size--,this.free.push(r)))}return t}clear(){this.keyMap.clear(),this.valList.fill(null),this.keyList.fill(null),this.ttls&&(this.ttls.fill(0),this.starts.fill(0)),this.head=0,this.tail=0,this.initialFill=1,this.free.length=0,this.size=0}}},1234:function(e,t,r){"use strict";r.d(t,{L:function(){return n}});const n=r(4121).useLayoutEffect},7350:function(e,t,r){"use strict";r.d(t,{s:function(){return i}});var n=r(4121),o=r(2322),s=r.n(o);const i=e=>{const t=(0,n.useRef)(e);return s()(t.current,e)||(t.current=e),t.current}},4:function(e,t,r){"use strict";r.d(t,{t1:function(){return g},$d:function(){return p},lw:function(){return k},Me:function(){return v},kV:function(){return m},mm:function(){return w},TF:function(){return b},QO:function(){return S},C5:function(){return _},o2:function(){return E}});var n=r(5868),o=r.n(n),s=r(4444),i=r.n(s),a=r(1218),c=r.n(a),u=r(8430),l=r.n(u),d=r(3211);const p="CORE",h=["ANONYMOUS","AUTHENTICATED","APPLICANT","CANDIDATE","REGISTERED","CLIENT","EMPLOYEE"],f={0:"ANONYMOUS",5:"AUTHENTICATED",20:"APPLICANT",30:"CANDIDATE",35:"REGISTERED",40:"CLIENT",50:"EMPLOYEE"},g=(0,d.cG)(p,h),v=()=>Object.assign({},(0,d.n5)(g),{[g.ANONYMOUS]:!0}),m=(e,t)=>{if(t===g.ANONYMOUS)return(0,d.ac)(e,p,v());let r=!0;const n=h.reduce(((e,n)=>(e[n]=r,n===t&&(r=!1),e)),{});return(0,d.ac)(e,p,n)},y=i()(p,{}),b=c()([p,g.AUTHENTICATED],o()),S=l()([p,g.REGISTERED],!0),_=l()([p,g.CLIENT],!0),E=e=>{const t=y(e);return!!t[g.REGISTERED]&&!t[g.CLIENT]},w=(e=0)=>m({[p]:{}},f[e]),O=h.length;function k(e,t){const r=y(e),n=y(t);if(r===n)return!1;for(let e=O-1;e>=0;e--){const t=h[e];if(!r[t]&&n[t])return!0}return!1}},3211:function(e,t,r){"use strict";r.d(t,{n5:function(){return f},cG:function(){return l},ac:function(){return d},Mr:function(){return h}});var n=r(5852),o=r.n(n),s=r(746),i=r.n(s),a=r(4444),c=r.n(a),u=r(6322);const l=(e,t)=>t.reduce(((e,t)=>(e[t]=t,e)),Object.create(null)),d=(e,t,r)=>{const n=c()(t,{},e);return i()(((e,t)=>e===n[t]),r)?e:Object.assign({},e,{[t]:Object.assign({},n,r)})},p=r.n(u)()(o()),h=(e,t)=>{const r=c()(t,{},e);return i()((e=>!1===e),r)?e:Object.assign({},e,{[t]:p(r)})},f=e=>p(e)},2013:function(e,t,r){"use strict";r.d(t,{w:function(){return n}});const n="psid"},9463:function(e,t,r){"use strict";r.d(t,{DI:function(){return y},n2:function(){return p},WU:function(){return S},Qc:function(){return f},co:function(){return b},F_:function(){return h},Hz:function(){return g}});var n=r(1973),o=r(2787),s=r.n(o),i=r(6061),a=r.n(i),c=r(1680),u=r.n(c);const l=["href","path","query","origin","port","username","password"],d=(s()(/^(?:[a-z]+:)?\/\//i),e=>e.pathname+e.search+e.hash),p=e=>{const t=Object.create(null);e.searchParams.forEach(((e,r)=>{Object.prototype.hasOwnProperty.call(t,r)?Array.isArray(t[r])?t[r].push(e):t[r]=[t[r],e]:t[r]=e}));const r=e.toString(),n=d(e),o={href:n,origin:e.origin,protocol:e.protocol,username:e.username,password:e.password,port:e.port,pathname:e.pathname,path:n,search:e.search,hash:e.hash,query:t};return"localhost"!==e.host&&Object.assign(o,{href:e.href,host:e.host,hostname:e.hostname}),Object.defineProperty(o,"toString",{value:()=>r,enumerable:!1}),o},h=(e,t=(()=>window.location.href)())=>new URL((e=>{if(e.length<2)return!1;for(let t=0;t<e.length;t++)switch(e[t]){case"?":return!0;case"/":break;default:return!1}return!0})(e)?e.replace(/^\/+/,"/"):e,t),f=e=>p(h(e)),g=(e,t)=>{const r=h(e.toString());return h(t,r)},v=/^(\/[^?\s]*)(\?[^\s]*)?(#[^s]*)?$/,m=(e,t)=>{a()(((t,r)=>{Array.isArray(t)?(e.delete(r),u()((t=>e.append(r,t)),t)):void 0===t?e.delete(r):e.set(r,t)}),t)},y=(e,t)=>{const r=h(e.toString());return m(r.searchParams,t),p(r)},b=(e,t)=>{const{path:r,query:o,port:s,username:i,password:a}=t,c=(0,n.Z)(t,l);if(r){const t=(e=>{const t=v.exec(e);if(t){const[e,r,n="",o=""]=t;return{pathname:r,search:n,hash:o}}})(r);t&&Object.assign(e,t)}if(i&&(e.username=i),a&&(e.password=a),Object.assign(e,c),void 0!==s&&(e.port=s,"0"===e.port&&(e.port="http:"===e.protocol?"80":"443")),o){const r=new URLSearchParams(t.search);m(r,o),e.search=r.toString()}return e},S=e=>{const t=h("");return p(b(t,e)).href}},9726:function(e,t,r){"use strict";var n=r(7986);e.exports=n(2,(function(e,t){void 0===t&&(t=[]);for(var r=0;r<t.length;r++)if(e(t[r],r,t))return!0;return!1}))},9777:function(e,t,r){"use strict";var n=r(7986),o=r(9648),s=r(5030),i=r(7709);e.exports=n(2,(function(e,t){if(void 0===e&&(e=[]),void 0===t&&(t=[]),o(e))return e.concat(t);if(s(e)){for(var r=i(0,e.length,e),n=0;n<t.length;n++)r.push(t[n]);return r}return e+t}))},8219:function(e,t,r){"use strict";var n=r(7986),o=r(7160);e.exports=n(2,(function(e,t){void 0===e&&(e=[]),void 0===t&&(t=[]);for(var r=[],n=0;n<e.length;n++)o(e[n],t)<0&&r.push(e[n]);return r}))},1680:function(e,t,r){"use strict";var n=r(7986);e.exports=n(2,(function(e,t){void 0===t&&(t=[]);for(var r=0;r<t.length;r++)e(t[r],r,t)}))},1897:function(e,t,r){"use strict";var n=r(7986);e.exports=n(2,(function(e,t){void 0===t&&(t=[]);for(var r=[],n=0;n<t.length;n++)e(t[n],n,t)&&r.push(t[n]);return r}))},112:function(e,t,r){"use strict";var n=r(7986);e.exports=n(2,(function(e,t){void 0===t&&(t=[]);for(var r=0;r<t.length;r++)if(e(t[r],r,t))return t[r]}))},858:function(e,t,r){"use strict";var n=r(5030);e.exports=function e(t){void 0===t&&(t=[]);for(var r=[],o=0;o<t.length;o++){var s=t[o];if(n(s))for(var i=e(s),a=0;a<i.length;a++)r.push(i[a]);else r.push(s)}return r}},9567:function(e,t,r){"use strict";var n=r(7986),o=r(7160);e.exports=n(2,(function(e,t){return void 0===t&&(t=[]),-1!==o(e,t)}))},7160:function(e,t,r){"use strict";var n=r(7986),o=r(1336);e.exports=n(2,(function(e,t){return void 0===t&&(t=[]),o(t)?t.indexOf(e):Array.prototype.indexOf.call(t,e)}))},3970:function(e,t,r){"use strict";var n=r(7986);e.exports=n(2,(function(e,t){void 0===t&&(t=[]);for(var r=t.length,n=new Array(r),o=0;o<r;o++)n[o]=e(t[o],o,t);return n}))},9294:function(e,t,r){"use strict";var n=r(7986);e.exports=n(3,(function(e,t,r){void 0===r&&(r=[]);for(var n=r.length,o=0;o<n;o++)t=e(t,r[o],o,r);return t}))},7709:function(e,t,r){"use strict";var n=r(7986),o=r(1336);e.exports=n(3,(function(e,t,r){return void 0===r&&(r=[]),o(r)?r.slice(e,t):Array.prototype.slice.call(r,e,t)}))},5972:function(e,t,r){"use strict";var n=r(9648),o=r(5030);e.exports=function(e){return n(e)?e:o(e)?Array.prototype.slice.call(e):[e]}},5368:function(e){"use strict";e.exports=function(e){void 0===e&&(e=[]);for(var t=[],r=0;r<e.length;r++)-1===t.indexOf(e[r])&&t.push(e[r]);return t}},8131:function(e,t,r){"use strict";var n=r(9648);e.exports=function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return n(t[0])?Object.assign.apply(Object,[[]].concat(t)):Object.assign.apply(Object,[{}].concat(t))}},9267:function(e,t,r){"use strict";var n=r(7986);e.exports=n(2,(function(e,t){return null==t||t!=t?e:t}))},5852:function(e){"use strict";e.exports=function(){return!1}},8318:function(e){"use strict";e.exports=function(){return!0}},905:function(e,t,r){"use strict";var n=r(7986);e.exports=n(2,(function(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];for(var o=0;o<e.length;o++)if(!e[o].apply(e,r))return!1;return!0}))},6818:function(e){"use strict";e.exports=function(e){return function(){return e}}},4511:function(e,t,r){"use strict";var n=r(7986);e.exports=n(2,(function(e,t){return"function"==typeof t?t.apply(void 0,e):t}))},9833:function(e,t,r){"use strict";var n=r(7986);e.exports=n(2,(function(e,t){return function(){return e.apply(void 0,arguments)&&t.apply(void 0,arguments)}}))},6495:function(e){"use strict";e.exports=function(e){return function(){return!e.apply(void 0,arguments)}}},8072:function(e){"use strict";e.exports=function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return function(){for(var e=t.length-1,r=t[e].apply(t,arguments),n=e-1;n>=0;n--)r=t[n](r);return r}}},3411:function(e){"use strict";e.exports=function(e){return function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];for(var o=0;o<e.length;o++)if(e[o][0].apply(this,r))return e[o][1].apply(this,r)}}},7679:function(e,t,r){"use strict";var n=r(7986);e.exports=function(e){return n(e.length,e)}},7986:function(e){"use strict";e.exports=function(e,t){return function r(){for(var n=arguments.length,o=new Array(n),s=0;s<n;s++)o[s]=arguments[s];return o.length>=e?t.apply(this,o):function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return r.apply(this,o.concat(t))}}}},4957:function(e,t,r){"use strict";var n=r(7986);e.exports=n(2,(function(e,t){var r;function n(){var n=this,o=arguments;clearTimeout(r),r=setTimeout((function(){return t.apply(n,o)}),e)}return n.cancel=function(){return clearTimeout(r)},n}))},3301:function(e,t,r){"use strict";var n=r(7986);e.exports=n(2,(function(e,t){return function(){return e.apply(void 0,arguments)||t.apply(void 0,arguments)}}))},767:function(e){"use strict";e.exports=function(e){return e}},7216:function(e,t,r){"use strict";var n=r(7986);e.exports=n(3,(function(e,t,r){return function(){return e.apply(void 0,arguments)?t.apply(void 0,arguments):r.apply(void 0,arguments)}}))},6537:function(e,t,r){"use strict";var n=r(2584);e.exports=function(e,t){void 0===t&&(t=n);var r,o=[],s=!1,i=function(e,r){return t(e,o[r])};return function(){for(var t=arguments.length,n=new Array(t),a=0;a<t;a++)n[a]=arguments[a];return s&&n.length===o.length&&n.every(i)||(r=e.apply(void 0,n),s=!0,o=n),r}}},3016:function(e){"use strict";e.exports=function(){}},934:function(e){"use strict";e.exports=function(){}},3915:function(e){"use strict";e.exports=function(e){var t,r=!1;return function(){return r||(t=e.apply(void 0,arguments),r=!0),t}}},87:function(e,t,r){"use strict";var n=r(7986);e.exports=n(2,(function(e,t){var r,n;return function(){for(var o=this,s=arguments.length,i=new Array(s),a=0;a<s;a++)i[a]=arguments[a];var c=Date.now(),u=r+e-c;r&&u>0?(clearTimeout(n),n=setTimeout((function(){r=c,t.apply(o,i)}),u)):(r=c,t.apply(this,i))}}))},9820:function(e,t,r){"use strict";var n=r(7986);e.exports=n(3,(function(e,t,r){return e(r)?t(r):r}))},9648:function(e){"use strict";e.exports=function(e){return!!e&&Array.isArray(e)}},5030:function(e,t,r){"use strict";var n=r(9648),o=r(1336),s=r(74);e.exports=function(e){switch(!0){case n(e):return!0;case!e:case"object"!=typeof e:case o(e):return!1;case 1===e.nodeType:return!!e.length;case 0===e.length:return!0;case e.length>0:return s("0",e)&&s(String(e.length-1),e)}return!1}},6600:function(e,t,r){"use strict";var n=r(6724),o=r(9648),s=r(1336),i=r(7384);e.exports=function(e){switch(!0){case n(e):return!0;case s(e):return""===e;case o(e):return 0===e.length;case i(e):return 0===Object.keys(e).length}return!1}},2584:function(e,t,r){"use strict";var n=r(7679),o=r(9648),s=function(e,t){if(e===t)return!0;if(typeof e!=typeof t||e!==Object(e)||!e||!t)return!1;if(o(e)&&o(t))return function(e,t){var r=e.length;if(r!==t.length)return!1;for(var n=0;n<r;n++)if(!s(e[n],t[n]))return!1;return!0}(e,t);var r=Object.prototype.toString.call(e);return"[object Object]"===r&&Object.prototype.toString.call(t)===r?function(e,t){var r=Object.keys(e),n=r.length;if(n!==Object.keys(t).length)return!1;for(var o=0;o<n;o++){var i=r[o];if(!Object.prototype.hasOwnProperty.call(t,i)||!s(e[i],t[i]))return!1}return!0}(e,t):"function"==typeof e?e===t:function(e,t){return e.toString()===t.toString()}(e,t)};e.exports=n(s)},543:function(e){"use strict";e.exports=function(e){return"function"==typeof e}},6724:function(e){"use strict";e.exports=function(e){return null==e}},9310:function(e){"use strict";e.exports=function(e){return"number"==typeof e||e instanceof Number}},7384:function(e){"use strict";e.exports=function(e){return null!==e&&"object"==typeof e}},9331:function(e,t,r){"use strict";var n=r(7384),o=r(543);e.exports=function(e){return(n(e)||o(e))&&o(e.then)}},9329:function(e,t,r){"use strict";var n,o=r(74);try{n=r(1238).isElement}catch(e){}n||(n=function(e){return!!e&&o("$$typeof",e)}),e.exports=n},2322:function(e,t,r){"use strict";var n=r(7384),o=Object.prototype.hasOwnProperty;e.exports=function(e,t){if(e===t)return!0;if(!n(e)||!n(t))return!1;var r=Object.keys(e);if(r.length!==Object.keys(t).length)return!1;for(var s=0;s<r.length;s++){var i=r[s];if(!o.call(t,i)||e[i]!==t[i])return!1}return!0}},1336:function(e){"use strict";e.exports=function(e){return"string"==typeof e||e instanceof String}},5868:function(e){"use strict";e.exports=function(e){return!e}},746:function(e,t,r){"use strict";var n=r(7986);e.exports=n(2,(function(e,t){for(var r in void 0===t&&(t={}),t)if(Object.prototype.hasOwnProperty.call(t,r)&&!e(t[r],r,t))return!1;return!0}))},2421:function(e,t,r){"use strict";var n=r(7986);e.exports=n(2,(function(e,t){for(var r in void 0===t&&(t={}),t)if(Object.prototype.hasOwnProperty.call(t,r)&&e(t[r],r,t))return!0;return!1}))},6061:function(e,t,r){"use strict";var n=r(7986);e.exports=n(2,(function(e,t){for(var r in void 0===t&&(t={}),t)Object.prototype.hasOwnProperty.call(t,r)&&e(t[r],r,t)}))},4522:function(e,t,r){"use strict";var n=r(7986),o=r(3089);e.exports=n(2,(function(e,t){void 0===t&&(t={});for(var r=o(t),n={},s=0;s<r.length;s++){var i=r[s];e(t[i],i,t)&&(n[i]=t[i])}return n}))},74:function(e,t,r){"use strict";var n=r(7986);e.exports=n(2,(function(e,t){return null!=t&&Object.prototype.hasOwnProperty.call(t,e)}))},3089:function(e,t,r){"use strict";var n=r(7384);e.exports=function(e){return n(e)?Object.keys(e):[]}},6322:function(e,t,r){"use strict";var n=r(7986);e.exports=n(2,(function(e,t){void 0===t&&(t={});var r={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(r[n]=e(t[n],n,t));return r}))},6552:function(e,t,r){"use strict";var n=r(7986),o=r(3089),s=r(8131);e.exports=n(3,(function(e){for(var t=s(arguments.length<=1?void 0:arguments[1]),r=1;r<(arguments.length<=1?0:arguments.length-1);r++)for(var n=r+1<1||arguments.length<=r+1?void 0:arguments[r+1],i=o(n),a=0;a<i.length;a++){var c=i[a];Object.prototype.hasOwnProperty.call(t,c)?t[c]=e(t[c],n[c],c,t,n):t[c]=n[c]}return t}))},4676:function(e,t,r){"use strict";var n=r(7986);e.exports=n(2,(function(e,t){var r;return(r={})[e]=t,r}))},2795:function(e,t,r){"use strict";var n=r(7986),o=r(3089);e.exports=n(2,(function(e,t){void 0===e&&(e=[]),void 0===t&&(t={});for(var r=Object.create(null),n=0;n<e.length;n++)r[e[n]]=!0;for(var s={},i=o(t),a=0;a<i.length;a++){var c=i[a];r[c]||(s[c]=t[c])}return s}))},2165:function(e,t,r){"use strict";var n=r(7986);e.exports=n(2,(function(e,t){void 0===e&&(e=[]),void 0===t&&(t={});for(var r=t,n=0;n<e.length;n++){if(null==r)return;r=r[e[n]]}return r}))},1218:function(e,t,r){"use strict";var n=r(7986),o=r(2165);e.exports=n(3,(function(e,t,r){return void 0===e&&(e=[]),void 0===r&&(r={}),t(o(e,r),e,r)}))},8430:function(e,t,r){"use strict";var n=r(7986),o=r(2165);e.exports=n(3,(function(e,t,r){return void 0===e&&(e=[]),void 0===r&&(r={}),o(e,r)===t}))},180:function(e,t,r){"use strict";var n=r(7986),o=r(2165);e.exports=n(3,(function(e,t,r){void 0===e&&(e=[]),void 0===r&&(r={});var n=o(e,r);return null!=n?n:t}))},5743:function(e,t,r){"use strict";var n=r(7986);e.exports=n(2,(function(e,t){void 0===e&&(e=[]),void 0===t&&(t={});for(var r={},n=0;n<e.length;n++){var o=e[n];o in t&&(r[o]=t[o])}return r}))},6247:function(e,t,r){"use strict";var n=r(7986);e.exports=n(2,(function(e,t){return null!=t?t[e]:void 0}))},6060:function(e,t,r){"use strict";var n=r(7986),o=r(6247);e.exports=n(3,(function(e,t,r){return o(e,r)===t}))},4444:function(e,t,r){"use strict";var n=r(7986),o=r(6247);e.exports=n(3,(function(e,t,r){var n=o(e,r);return null!=n?n:t}))},9553:function(e,t,r){"use strict";var n=r(3089);e.exports=function(e){for(var t=n(e),r=t.length,o=new Array(r),s=0;s<r;s++)o[s]=e[t[s]];return o}},4271:function(e,t,r){"use strict";var n=r(7986);e.exports=n(2,(function(e,t){return Promise.resolve().then((function(){return e(t)})).then((function(){return t}))}))},9079:function(e,t,r){"use strict";var n=r(7986);e.exports=n(2,(function(e,t){return void 0===e&&(e=""),void 0===t&&(t=""),t.slice(-e.length)===e}))},3038:function(e){"use strict";var t=/[&<>"']/g,r={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},n=function(e){return r[e]};e.exports=function(e){return void 0===e&&(e=""),e.replace(t,n)}},2137:function(e,t,r){"use strict";var n=r(7986),o=r(1336);e.exports=n(2,(function(e,t){if(void 0===e&&(e=0),!o(t))return"";for(var r="",n=0;n<e;n++)r+=t;return r}))},5759:function(e,t,r){"use strict";var n=r(7986);e.exports=n(3,(function(e,t,r){return void 0===e&&(e=""),void 0===t&&(t=""),void 0===r&&(r=""),r.replace(e,t)}))},4815:function(e,t,r){"use strict";var n=r(7986);e.exports=n(2,(function(e,t){return void 0===e&&(e=""),void 0===t&&(t=""),t.split(e)}))},2468:function(e,t,r){"use strict";var n=r(7986);e.exports=n(2,(function(e,t){return void 0===e&&(e=""),void 0===t&&(t=""),t.slice(0,e.length)===e}))},2787:function(e,t,r){"use strict";var n=r(7986);e.exports=n(2,(function(e,t){return void 0===e&&(e=/()/),void 0===t&&(t=""),e.test(t)}))},5797:function(e){"use strict";e.exports=function(e){return void 0===e&&(e=""),e.toLowerCase()}},661:function(e,t){"use strict";t.A=void 0,t.A=function(){return new Promise((function(e){var t=window.tracking;t&&t.fullfill?t.trackingReady?t.trackingReady().then(e):e(t):window.addEventListener("tracking-created",(function(t){t instanceof CustomEvent&&e(t.detail||window.tracking)}))}))}},7824:function(e,t){"use strict";t.x4=t.OR=void 0,t.OR=function(e,t){var r=t.event,n=t.config,o=void 0===n?{}:n,s=t.payload,i=r,a=void 0===s?{}:s;"pushTrack"===o.type&&(i=o.type,a.pageAction?a._event=r:a.pageAction=r),e.event.call({isSendContext:!0,fromEventea:!0},i,a)},t.x4=function(e,t){var r=t.payload,n=void 0===r?{}:r;e.extend(n)}},6938:function(e,t,r){"use strict";var n=r(5058),o=r(438),s=(0,n.__importDefault)(r(9649)),i=function(){function e(){var e=this;this.utils={},this.proxy=!0,this.addUtil=this.createProxiedMethod((function(e){return e.addUtil})),this.updateLocation=this.createProxiedMethod((function(e){return e.updateLocation})),this.addPixel=this.createProxiedMethod((function(e){return e.addPixel})),this.addEventsHandler=this.createProxiedMethod((function(e){return e.addEventsHandler})),this.use=this.createProxiedMethod((function(e){return e.use})),this._clearAllListeners=this.createProxiedMethod((function(e){return e._clearAllListeners})),this._event=this.createProxiedMethod((function(e){return e.event})),this._stateAcc={},this._listeners=Object.create(null),this.ready=new Promise((function(t){e._readyResolve=t})),this.trackingReady=new Promise((function(t){e._trackingResolve=t}))}return Object.defineProperty(e.prototype,"_version",{get:function(){return this.tracking?this.tracking._version:"proxy-5.48.0"},enumerable:!1,configurable:!0}),e.prototype.setTracking=function(e){var t=this;this.tracking=e;var r=Object.keys(e.state).length>0;this._trackingResolve(e),e.ready.then(this._readyResolve),e.extend(this._stateAcc),r&&this._listeners.change&&this._listeners.change.forEach((function(r){r(e.state,t._stateAcc)})),this._listeners=Object.create(null)},e.prototype.addPixels=function(e){return this.tracking?this.tracking.addPixels(e):this.trackingReady.then((function(t){return t.addPixels(e)}))},e.prototype.resolve=function(e){var t=this;return Promise.resolve(e).then((function(e){return t.setTracking(e),e}))},Object.defineProperty(e.prototype,"state",{get:function(){return this.tracking?this.tracking.state:this._stateAcc},enumerable:!1,configurable:!0}),e.prototype.callUtil=function(e){for(var t,r=[],o=1;o<arguments.length;o++)r[o-1]=arguments[o];return this.tracking?(t=this.tracking).callUtil.apply(t,(0,n.__spreadArray)([e],r,!1)):this.trackingReady.then((function(t){return t.callUtil.apply(t,(0,n.__spreadArray)([e],r,!1))}))},e.prototype.fullfill=function(e){return this.tracking?this.tracking.fullfill(e):this.trackingReady.then((function(t){return t.fullfill(e)}))},e.prototype.extend=function(e){if(this.tracking)return this.tracking.extend(e);var t=Object.keys(e).reduce((function(t,r){var n=r.split(".");return(0,o.assoc)(t,n,e[r])}),this._stateAcc);return this.update(t)},e.prototype.extendDeep=function(e){if(this.tracking)return this.tracking.extendDeep(e);var t=Object.keys(e).reduce((function(t,r){var n=r.split(".");return(0,o.update)(t,n,(function(e,t){return(0,s.default)(e)&&(0,s.default)(t)?(0,o.deepMerge)(e,t):t}),e[r])}),this._stateAcc);return this.update(t)},e.prototype.update=function(e){return this.tracking?this.tracking.update(e):(this._stateAcc!==e&&(this._stateAcc=e),this)},e.prototype.remove=function(){for(var e,t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];if(this.tracking)return(e=this.tracking).remove.apply(e,t);var s=o.dissoc.apply(void 0,(0,n.__spreadArray)([this._stateAcc],t.map((function(e){return e.split(".")})),!1));return this.update(s)},e.prototype.on=function(e,t){this.tracking?this.tracking.on(e,t):("change"===e&&(this._listeners[e]=this._listeners[e]||[],this._listeners[e].push(t)),this.trackingReady.then((function(r){r.on(e,t)})))},e.prototype.event=function(e,t){return"u"!=="object"[0]?this._event(e,t):this},e.prototype.off=function(e,t){this.tracking?this.tracking.off(e,t):("change"===e&&this._listeners[e]&&(this._listeners[e]=this._listeners[e].filter((function(e){return e!==t}))),this.trackingReady.then((function(r){r.off(e,t)})))},e.prototype.emit=function(e){for(var t,r=[],o=1;o<arguments.length;o++)r[o-1]=arguments[o];this.tracking?(t=this.tracking).emit.apply(t,(0,n.__spreadArray)([e],r,!1)):this.trackingReady.then((function(t){t.emit.apply(t,(0,n.__spreadArray)([e],r,!1))}))},e.prototype.waitFor=function(e){return this.trackingReady.then((function(t){return t.waitFor(e)}))},e.prototype.createProxiedMethod=function(e){var t=this;return function(){for(var r=[],n=0;n<arguments.length;n++)r[n]=arguments[n];return t.tracking?e(t.tracking).apply(t.tracking,r):t.trackingReady.then((function(t){e(t).apply(t,r)})),t}},e}();t.Z=i},9649:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return Object(e)===e&&Object.getPrototypeOf(e)===Object.prototype}},5149:function(e,t,r){"use strict";r.d(t,{x:function(){return Y}});var n=r(9463),o=r(6600),s=r.n(o),i=r(2165),a=r.n(i),c=r(6322),u=r.n(c);const l="x-service",d="dcoData",p="dcoTrackingData",h="beforeRedirectPageUrl",f=/[<>\/\u2028\u2029]/g,g={"<":"\\u003C",">":"\\u003E","/":"\\u002F","\u2028":"\\u2028","\u2029":"\\u2029"},v=e=>g[e];function m(e){let t;try{r=e,t=JSON.stringify(r).replace(f,v)}catch(e){}var r;return t||""}var y=r(4522),b=r.n(y),S=r(5743),_=r.n(S);const E=["utm_source","utm_content","utm_campaign","utm_medium","utm_term","sid","wm"],w=(e,t)=>"dco.id"===e?new RegExp("^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$").test(t):void 0!==e&&void 0!==t,O=E.reduce(((e,t)=>Object.assign({},e,{[t]:!0})),{}),k="utm_source",T=/; */,C=/, */,R=e=>b()(((e,t)=>!O[t]),e),M=(e,t)=>Object.keys(e).sort().map((r=>{const n=t[r]||e[r];return w(r,n)?`${r}=${e[r]}`:null})).filter(Boolean).join("; "),P=(e,t,r,n)=>{const o=(e=>{if(!e)return e;const t={};return Object.keys(e).forEach((r=>{if(Object.prototype.hasOwnProperty.call(e,r))try{t[encodeURIComponent(r)]=encodeURIComponent(e[r])}catch(e){}})),t})((e=>!!e.utm_source&&_()(E,e))(e));return o?M(Object.assign({},R(r),o),t):t[k]?M(r,t):M(Object.assign({},R(r),{[k]:n||""}),t)};var x=r(1680),I=r.n(x),N=r(180),j=r.n(N),A=r(9648),D=r.n(A),L=r(5368),U=r.n(L);const F=["protocol","host","pathname","query"];function V(e,t,r){let o=Object.assign({},e);var s;return void 0!==r&&(o.query=Object.assign({},o.query,{dco_ic:r})),o=Object.assign({},o,{query:(s=Object.assign({},o.query,t.query),u()((e=>{if(D()(e)){const t=U()(e);return 1===t.length?t[0]:t}return e}),s))}),o=_()(F,o),"/"!==o.pathname.slice(-1)&&(o.pathname+="/"),(0,n.WU)(o)}var H=r(2584),q=r.n(H);const B=[{dcoAppliedStatus:"not_match",dcoAppliedEntity:"pageContent"}];function $(e){return s()(e)||q()(B)}class Y{constructor({pageUrl:e,pageReferrer:t,logger:r,userHeaders:o}){this.pageUrl=(0,n.Qc)(e),this.pageReferrer=t,this.logger=r,this.userHeaders=o,this.rawUserCookie=((e="")=>e.split(T).reduce(((e,t)=>{const[r,n]=t.split("=");return Object.assign({},e,{[r]:n})}),{}))(this.userHeaders.cookie),this.decodedUserCookie=u()((e=>function(e){try{return decodeURIComponent(e)}catch(t){return e}}(e)),this.rawUserCookie)}getDcoRequestParams({appId:e,service:t}){const{query:r}=this.pageUrl,n={"x-app-id":e,"x-dco-user-data":P(r,this.decodedUserCookie,this.rawUserCookie,this.pageReferrer)};return t?n[l]=t:this.userHeaders[l]&&(n[l]=this.userHeaders[l]),{headers:n,payload:Object.assign({},r,{trackingState:m({dco:{referrer:this.pageReferrer,beforeRedirectPageUrl:this.decodedUserCookie[h]}})})}}getUserResponseParams({dcoResponse:e,dcoResponseHeaders:t}){const r=(e=>{const t=[];return I()((r=>{const n=e[r];w(r,n)&&t.push({name:r,value:n,expires:31536e3,noSubdomains:!0})}),Object.keys(e).sort()),t})(((e="")=>e.split(C).reduce(((e,t)=>{const[r,n]=t.split("=");return Object.assign({},e,{[r]:n})}),{}))(t["x-dco-set-context"])),{dcoTracking:o,dco:i}=e,c=!s()(i)&&!s()(i.state),u=$(o);if(c&&e.redirectUrl)return r.push({name:h,value:this.pageUrl.pathname,expires:60},{name:d,value:m(i),expires:60},{name:p,value:m(o),expires:60}),{redirectUrl:V((0,n.Qc)(e.redirectUrl),this.pageUrl,a()(["state","ic"],i)),redirectCode:e.redirectCode,cookieSet:r};const{dco:l,dcoTracking:f}=((e,t)=>{const r=e[d],n=e[p],o={};if(r)try{o.dco=JSON.parse(r)}catch(e){t({name:"dcoParsingCookieState"}).error(e)}if(n)try{o.dcoTracking=JSON.parse(n)}catch(e){t({name:"dcoParsingCookieState"}).error(e)}return o})(this.decodedUserCookie,this.logger);l&&r.push({name:d,value:"",expires:new Date(0)}),f&&r.push({name:p,value:"",expires:new Date(0)});const g=c||!l?i:l,v=u||$(f)?o:f,y=function({dcoData:e,dcoTrackingData:t,query:r,dcoResponseHeaders:n,decodedUserCookie:o,referrer:s}){const i=j()(["dco_ic"],"",r),c=a()(["x-dco-ic"],n),u={dcoTracking:t,personalizedLandingMetrics:e,dco:{referrer:s,ic:a()(["state","ic"],e)||c||i}};return o.beforeRedirectPageUrl&&(u.dco.beforeRedirectPageUrl=o.beforeRedirectPageUrl),u}({referrer:this.pageReferrer,query:this.pageUrl.query,dcoData:g,dcoTrackingData:v,dcoResponseHeaders:t,decodedUserCookie:this.decodedUserCookie});return{cookieSet:r,dcoData:g,trackingData:y}}}},5623:function(e,t,r){"use strict";const n=r(9652).createToken("imagePreloadExtractors",{multi:!0});t.y=n},8485:function(e,t,r){"use strict";r.d(t,{X:function(){return g}});var n=r(8072),o=r.n(n),s=r(4444),i=r.n(s),a=r(4815),c=r.n(a),u=r(2358),l=r(4674),d=r(7598),p=r(4233),h=r(2659);let f=null;const g=(0,u.P)({name:"startCobrowsingAction",fn:function(e,t,r){if(f)return f;const{onMessage:n,disableStream:s}=t||{};return f=new Promise((t=>{window.addEventListener("message",(function r(n){let o=null==n?void 0:n.data;try{o=JSON.parse(n.data)}catch(e){return}"cobrowsingReady"===o.message&&(e.dispatch((0,h.os)()),window.removeEventListener("message",r),f=null,t())}),!1);const a=(({envManager:e,wuid:t})=>{var r;return{wuid:t,env:e.get("COBROWSING_SCRIPT_ENV")||(r=e.get("COBROWSING_SCRIPT_URL"),o()(i()(1,"prod"),c()("-"),i()(0,""),c()("."),i()(2,""),c()("/"))(r))||e.get("COBROWSING_LOCAL")&&"local",appId:e.get("COBROWSING_APP_ID")}})(r);void 0!==s&&(a.disableStream=s),(0,p.initialize)(a,n)})),f},deps:{wuid:l.$,envManager:d.v},conditions:{onlyBrowser:!0}})},8884:function(e,t,r){"use strict";r.d(t,{WM:function(){return O}});var n=r(2358),o=r(510),s=r(4233),i=r(8072),a=r.n(i),c=r(9777),u=r.n(c),l=r(6600),d=r.n(l),p=r(7709),h=r.n(p),f=r(4),g=r(1894),v=r(4674),m=r(2013),y=r(2659);const b=32,S="a-",_="n-",E=()=>(0,s.send)(s.SendMessageTypes.STOP_RECORD),w=(e,t)=>{if(E(),window.removeEventListener("beforeunload",E),!d()(e))return(0,s.send)(s.SendMessageTypes.START_RECORD,e),(0,s.send)(s.SendMessageTypes.CUSTOM_DATA,{name:"appId",value:t}),window.addEventListener("beforeunload",E),e},O=(0,n.P)({name:"startFullstoryAction",fn:(e,t,{cookieManager:r,appInfo:n,wuid:o})=>{const s=(({context:e,sessionId:t,wuid:r})=>{if(!t||!r)return"";const{authPrefix:n=S,anonPrefix:o=_,maxUidLen:s=b}=(e=>e.getStore(y.d$).getState())(e),i=(e=>(0,f.QO)(e.getStore("roles").getState()))(e);return a()(h()(0,s),u()(i?n:o),u()(t.slice(0,12)))(r)})({context:e,sessionId:r.get(m.w),wuid:o});return w(s,"pfphome")},deps:{cookieManager:g.T,appInfo:o.Qo,wuid:v.$},conditions:{onlyBrowser:!0}});(0,n.P)({name:"resumeFullstoryAction",fn:(e,t,{appInfo:r})=>w(t,"pfphome"),deps:{appInfo:o.Qo},conditions:{onlyBrowser:!0}})},2659:function(e,t,r){"use strict";r.d(t,{d$:function(){return s},os:function(){return c},xZ:function(){return l},dm:function(){return d}});var n=r(8875),o=r(165);const s="cobrowsing",i={authorized:!1,anonymous:!1},a={isCobrowsingReady:!1,cobrowsingEnabled:i,fullstoryEnabled:i},c=(0,n.y)("COBROWSING_READY"),u=(0,n.y)("COBROWSING_CONFIG_UPDATED"),l=(0,n.y)("COBROWSING_STATE_CHANGED"),d=(0,o.L)(s,a).on(c,(function(e){return Object.assign({},e,{isCobrowsingReady:!0})})).on(u,(function(e,t){return Object.assign({},e,t,{loaded:!0})})).on(l,(function(e,t){return Object.assign({},e,{cobrowsingState:t})}))},187:function(e,t,r){"use strict";var n;r.d(t,{S:function(){return n}}),function(e){e.Hide="hide",e.Disconnect="disconnect",e.Error="error",e.Show="show",e.Connect="connect",e.NoConnection="no_connection",e.Connected="connected",e.Deny="deny",e.DisconnectError="disconnect_error",e.DisconnectNoConnection="disconnect_no_connection"}(n||(n={}))},6778:function(e,t,r){"use strict";r.d(t,{J:function(){return w}});var n=r(5058),o=r(2490),s=r(8574),i=r(971),a=r(7598),c=r(9979),u=r(2383),l=r(2536),d=r(1894),p=r(1453),h=r(1616),f=r(5149),g=r(7438),v=r(6322),m=r.n(v),y=r(7384),b=r.n(y),S=r(5759),_=r.n(S);const E=(0,r(3697).V)("router-dco responseDcoCache");let w=class{};w=(0,n.__decorate)([(0,o.Yl)({providers:[(0,s.J)({provide:a.s,multi:!0,scope:i.s.REQUEST,useValue:[{key:"DCO_SERVICE",optional:!0,dehydrate:!1}]}),(0,s.J)({provide:E,scope:i.s.SINGLETON,useFactory:({createCache:e})=>e("memory",{ttl:3e5,max:100}),deps:{createCache:c.xC}}),(0,s.J)({provide:h.eZ,multi:!0,scope:i.s.REQUEST,useFactory:({cookieManager:e,tracking:t,dcoClient:r,routesFallback:n,envManager:o,domainResolve:s,logger:i,responseDcoCache:a})=>(i("route-dco"),i=>async a=>{n&&i(a).then((({route:e,payload:t})=>{e&&("string"!=typeof t&&"page"in t&&t.page.matchedUrlParams?n.set(Object.assign({},e,{alias:a.url.pathname}),{appId:a.appId}):n.set(e,{appId:a.appId}))})).catch((()=>{}));const c=r.getDcoRequestParams({appId:a.appId,service:o.get("DCO_SERVICE")}),[u,l]=await Promise.all([i(Object.assign({},a,{shouldSetFallback:!1,requestOptions:Object.assign({},a.requestOptions,{headers:c.headers,query:c.payload,cache:!1})})),s()]);if(!b()(u.payload))return u;const d=r.getUserResponseParams({dcoResponseHeaders:u.headers,dcoResponse:u.payload});if(d.cookieSet.forEach((t=>e.set(t))),"trackingData"in d&&t&&t.extend(d.trackingData),"redirectUrl"in d){const e=_()(new RegExp(`^https://(?:${l}|${l.replace(/^www\./,"")})`),"",d.redirectUrl);return Object.assign({},u,{payload:Object.assign({},u.payload,{redirectUrl:e}),route:Object.assign({},u.route,{name:"dco-redirect",redirect:{url:e,code:+d.redirectCode,preserveQuery:!1}})})}return u}),deps:{cookieManager:d.T,tracking:{token:p.t3,optional:!0},dcoClient:"dcoClient",routesFallback:{token:h.c3,optional:!0},envManager:a.v,domainResolve:h.xO,logger:u.F,responseDcoCache:E}}),(0,s.J)({provide:"dcoClient",scope:i.s.REQUEST,useFactory:({logger:e,requestManager:t})=>{const r=m()((e=>Array.isArray(e)?e.join(","):e),t.getHeaders());return new f.x({logger:e,pageUrl:t.getUrl(),userHeaders:r,pageReferrer:(0,g.l)(t.getHeader("referer"))})},deps:{logger:u.F,requestManager:l.Gu}})]})],w)},7438:function(e,t,r){"use strict";r.d(t,{l:function(){return d}});var n=r(8072),o=r.n(n),s=r(2468),i=r.n(s),a=r(9294),c=r.n(a);const u=[/<link[^>]+>/gi,/<script\b[^<]*(?:(?!<\/script>)<[^<]*)*<\/script\s*>/gi],l="https://secure.tcsbank.ru/acs/auth/finish.do",d=o()(((e="")=>i()(l,e)?l:e),((e="")=>c()(((e,t)=>e.replace(t,"")),e,u)))},1616:function(e,t,r){"use strict";r.d(t,{DG:function(){return o},xO:function(){return s},c3:function(){return a},eZ:function(){return i}});var n=r(3697);const o=(0,n.V)("router appIdResolve"),s=(0,n.V)("router domainResolve"),i=(0,n.V)("router routeResolveExtend",{multi:!0}),a=(0,n.V)("router fallback")},6819:function(e,t){"use strict";t.Z={routes:{},pages:{}}},2358:function(e,t,r){"use strict";r.d(t,{P:function(){return o}});var n=r(7069);function o(e){const t=Object.assign(e.fn,{[n.d]:e});return e.conditions||(e.conditions={}),t}},7751:function(e,t,r){"use strict";r.d(t,{Z:function(){return p}});var n=r(9777),o=r.n(n),s=r(6552),i=r.n(s),a=r(2795),c=r.n(a);const u=(e,t)=>Array.isArray(e)&&Array.isArray(t)?o()(e,t):"object"==typeof e&&"object"==typeof t?i()(u,e,t):t,l=i()(u),d=e=>{if(!e||!e.length)return{};const t=e.map((e=>l(d(e.presets),c()(["presets"],e))));return 1===t.length?t[0]:l(...t)};function p(e){let t={};return e.presets&&(t=d(e.presets)),l(t,e)}},2490:function(e,t,r){"use strict";r.d(t,{eF:function(){return n},Yl:function(){return o}});const n="_module_parameters_";function o({providers:e,imports:t,deps:r={}}){return o=>Object.assign(o,{[n]:{providers:e,deps:r,imports:t,name:o.name,id:`${o.name}-${Math.random()}`}})}},1453:function(e,t,r){"use strict";r.d(t,{ZY:function(){return s},dZ:function(){return a},cY:function(){return i},t3:function(){return o}});var n=r(3697);const o=(0,n.V)("analytics"),s=(0,n.V)("analyticsConfig"),i=(0,n.V)("analyticsTagManagerContainer"),a=(0,n.V)("analyticsEventeaReady")},2689:function(e,t,r){"use strict";r.d(t,{kE:function(){return a},go:function(){return i},IB:function(){return p},Af:function(){return s},iO:function(){return c},tK:function(){return l},jp:function(){return h},zU:function(){return u},Hs:function(){return o},HU:function(){return d}});var n=r(3697);const o=(0,n.V)("boxyService"),s=(0,n.V)("boxyFallbackMappingExtension",{multi:!0}),i=(0,n.V)("boxyCustomMappingExtension",{multi:!0}),a=(0,n.V)("boxyBaseMappingExtension",{multi:!0}),c=(0,n.V)("boxyLazy"),u=(0,n.V)("boxyRenderer"),l=(0,n.V)("boxyMetrics"),d=(0,n.V)("getDivalToken"),p=(0,n.V)("boxy default bundle"),h=(0,n.V)("boxyPubsub")},4945:function(e,t,r){"use strict";r.d(t,{H:function(){return _}});var n=r(5058),o=r(2490),s=r(8574),i=r(971),a=r(7598),c=r(1894),u=r(2383),l=r(3565),d=r(2536),p=r(1453),h=r(5149),f=r(6322),g=r.n(f),v=r(7438),m=r(7384),y=r.n(m);let b=null,S=!1;try{S=!!r(Object(function(){var e=new Error("Cannot find module '@tramvai/module-route-dco/tsconfig.json'");throw e.code="MODULE_NOT_FOUND",e}()))}catch(e){}try{b=Object(function(){var e=new Error("Cannot find module '@tramvai/module-route-admin'");throw e.code="MODULE_NOT_FOUND",e}())}catch(e){console.warn("    @tramvai/module-route-admin,\n       \n   https://coretech-frontend.pages.devplatform.tcsbank.ru/tramvai/docs/releases/migration#11122020-%D0%BF%D0%B5%D1%80%D0%B5%D1%85%D0%BE%D0%B4-%D0%BD%D0%B0-%D0%BD%D0%BE%D0%B2%D1%8B%D0%B9-%D1%80%D0%BE%D1%83%D1%82%D0%B8%D0%BD%D0%B3\n   #tramvai")}let _=class{};_=(0,n.__decorate)([(0,o.Yl)({providers:!b||S?[]:[(0,s.J)({provide:a.s,multi:!0,scope:i.s.REQUEST,useValue:[{key:"DCO_SERVICE",optional:!0,dehydrate:!1}]}),(0,s.J)({provide:b,multi:!0,scope:i.s.REQUEST,useFactory:({cookieManager:e,tracking:t,dcoClient:r,envManager:n})=>o=>s=>{const i=r.getDcoRequestParams({appId:s.appId,service:n.get("DCO_SERVICE")});return o(Object.assign({},s,{withDco:!0,headers:i.headers,payload:Object.assign({},s.payload,i.payload)})).then((n=>{if(!y()(n.payload))return n;const o=r.getUserResponseParams({dcoResponseHeaders:n.headers,dcoResponse:n.payload});return o.cookieSet.forEach((t=>e.set(t))),"trackingData"in o&&t&&t.extend(o.trackingData),"redirectUrl"in o?Object.assign({},n,{payload:Object.assign({},n.payload,{redirectUrl:o.redirectUrl,finalRedirectUrl:!0})}):Object.assign({},n,{payload:Object.assign({},n.payload,{dco:o.dcoData})})}))},deps:{cookieManager:c.T,tracking:{token:p.t3,optional:!0},dcoClient:"dcoClient",envManager:a.v}}),(0,s.J)({provide:"dcoClient",scope:i.s.REQUEST,useFactory:({logger:e,requestManager:t,store:r})=>{const n=g()((e=>Array.isArray(e)?e.join(","):e),t.getHeaders());return new h.x({logger:e,pageUrl:t.getUrl(),userHeaders:n,pageReferrer:(0,v.l)(t.getHeader("referer"))})},deps:{logger:u.F,store:l.kR,requestManager:d.Gu}}),{provide:"__tinkoffRouterDeprecatedToken",multi:!0,useValue:["@tramvai/module-route-dco","@tramvai-tinkoff/module-router-extension-dco"]}]})],_)},4674:function(e,t,r){"use strict";r.d(t,{$:function(){return n}});const n=(0,r(3697).V)("webUserId")},614:function(e,t,r){"use strict";r.d(t,{n:function(){return n}});const n=(0,r(4121).createContext)(null)},7428:function(e,t,r){"use strict";r.d(t,{x:function(){return a}});var n=r(4121),o=r(6322),s=r.n(o),i=r(614);function a(e){const t=(()=>{const e=(0,n.useContext)(i.n);if(!e)throw new Error("DI container not found");return e})();return(0,n.useMemo)((()=>{return"[object Object]"!==e.toString()||"token"in(r=e)&&(1===Object.keys(r).length||"boolean"==typeof r.optional||"boolean"==typeof r.multi)?t.get(e):s()((e=>t.get(e)),e);var r}),[e,t])}},8345:function(e,t,r){"use strict";r.d(t,{K:function(){return n}});const n=(e,t,r)=>{try{return JSON.stringify(e,t,r)}catch(n){return((e,t,r)=>{const n=new Set,o=t||(e=>e);return JSON.stringify(e,((e,t)=>t&&"object"==typeof t?n.has(t)?"[~Circular~]":(n.add(t),o(t)):o(t)),r)})(e,t,r)}}},4773:function(e,t,r){"use strict";r.d(t,{h:function(){return o},N:function(){return s}});var n=r(4121);const o=(0,n.createContext)(null),s=(0,n.createContext)(null)},1693:function(e,t,r){"use strict";r.d(t,{x:function(){return s}});var n=r(4121),o=r(4773);const s=()=>{const e=(0,n.useContext)(o.h);if(!e)throw new Error('CONSUMER_CONTEXT not found, have you added "@tramvai/module-common"?');return e}},3017:function(e,t,r){"use strict";r.d(t,{v:function(){return b}});var n=r(2322),o=r.n(n),s=r(4121),i=r(7350),a=r(1234),c=r(3816),u=r.n(c),l=r(5972),d=r.n(l),p=r(248),h=r(1693);class f{constructor(e){this.handleStateChange=()=>{this.onStateChange&&this.onStateChange()},this.stores=e,this.unsubscribe=void 0}isSubscribed(){return Boolean(this.unsubscribe)}setOnStateChange(e){this.onStateChange=e}trySubscribe(){this.unsubscribe||(this.unsubscribe=this.stores.filter(Boolean).map((e=>(e.on("change",this.handleStateChange),()=>{e.removeListener("change",this.handleStateChange)}))))}tryUnsubscribe(){this.unsubscribe&&(this.unsubscribe.forEach((e=>e())),this.unsubscribe=void 0),this.onStateChange=void 0}}const g=window;function v(){return"requestAnimationFrame"in g?requestAnimationFrame:"setImmediate"in g?g.setImmediate:setTimeout}var m=r(4773);const y=v();function b(e,t,r=o()){u()(t,"You must pass a selector to useSelectors");const n=(0,h.x)(),c=(0,s.useContext)(m.N),l=(0,s.useRef)(!1),g=(0,i.s)(e),v=(0,s.useMemo)((()=>new f(d()(g).map(n.getStore))),[g,n]),b=(0,s.useRef)(),S=(0,s.useCallback)((e=>(v.setOnStateChange((()=>{l.current||(l.current=!0,y((()=>{e(),l.current=!1})))})),v.trySubscribe(),()=>v.tryUnsubscribe())),[v]);let _;try{_=(0,p.useSyncExternalStoreWithSelector)(S,n.getState,c?()=>c:n.getState,t,r)}catch(e){let t=`An error occured while selecting the store state: ${e.message}.`;throw b.current&&(t+=`\nThe error may be correlated with this previous error:\n${b.current.stack}\n\nOriginal stack trace:`),new Error(t)}return(0,a.L)((()=>{b.current=void 0})),_}},8875:function(e,t,r){"use strict";r.d(t,{y:function(){return s}});var n=r(767),o=r.n(n);function s(e,t=o()){const r=e,n=(...e)=>({type:r,payload:t(...e)});return n.getType=()=>r,n.toString=()=>r,n}},165:function(e,t,r){"use strict";r.d(t,{L:function(){return s}});var n=r(8875),o=r(3787);function s(e,t){var r;const s={};return(r=class e extends o.Z{constructor(){super(),this.state=t}static createEvents(t){const r=Object.keys(t),o={};return r.forEach((r=>{const s=t[r],i=(0,n.y)(`${r}`);o[r]=i,e.on(i,s)})),o}static on(t,r){if(Array.isArray(t))return t.forEach((t=>e.on(t,r))),e;const n=t.toString();return e.handlers[n]="handle",s[n]=r,e}getState(){return this.state}setState(e){this.state=e,this.emit("change")}dehydrate(){return this.state}rehydrate(e){this.state=e}handle(e,t){const r=s[t];r&&(this.state=r(this.state,e),this.emit("change"))}}).storeName=e,r.handlers={},r}},3787:function(e,t,r){"use strict";r.d(t,{Z:function(){return n}});class n{constructor(){this.listeners=[]}emit(e){this.listeners.forEach((e=>{e()}))}addListener(e,t){this.listeners.push(t)}on(e,t){this.addListener(e,t)}removeListener(e,t){const r=[];for(let e=0;e<this.listeners.length;e++)this.listeners[e]!==t&&r.push(this.listeners[e]);this.listeners=r}off(e,t){this.removeListener(e,t)}}},5029:function(e){e.exports="object"==typeof self?self.FormData:window.FormData},4939:function(e,t,r){"use strict";r.d(t,{xW:function(){return a},R$:function(){return s},FM:function(){return i},R9:function(){return o}});var n=r(3697);const o=(0,n.V)("actionRegistry"),s=(0,n.V)("actionExecution"),i=(0,n.V)("actionPageRunner"),a=(0,n.V)("actionConditionals",{multi:!0})},9979:function(e,t,r){"use strict";r.d(t,{oK:function(){return i},xC:function(){return o},TZ:function(){return s}});var n=r(3697);const o=(0,n.V)("createCache"),s=(0,n.V)("registerClearCache",{multi:!0}),i=(0,n.V)("clearCache")},7598:function(e,t,r){"use strict";r.d(t,{v:function(){return o},s:function(){return s}});var n=r(3697);const o=(0,n.V)("environmentManager"),s=(0,n.V)("envUsed",{multi:!0})},2383:function(e,t,r){"use strict";r.d(t,{J:function(){return s},F:function(){return o}});var n=r(3697);const o=(0,n.V)("logger"),s=(0,n.V)("loggerHook")},2536:function(e,t,r){"use strict";r.d(t,{Z:function(){return o},Gu:function(){return s}});var n=r(3697);const o=(0,n.V)("request"),s=(0,n.V)("requestManager")},3565:function(e,t,r){"use strict";r.d(t,{Ym:function(){return i},jm:function(){return s},qb:function(){return o},PU:function(){return c},kR:function(){return a}});var n=r(3697);const o=(0,n.V)("dispatcher"),s=(0,n.V)("dispatcherContext"),i=(0,n.V)("combineReducers",{multi:!0}),a=(0,n.V)("store"),c=(0,n.V)("storeMiddleware",{multi:!0})},1894:function(e,t,r){"use strict";r.d(t,{T:function(){return n}});const n=(0,r(3697).V)("cookieManager")},510:function(e,t,r){"use strict";r.d(t,{I7:function(){return s},Qo:function(){return a},om:function(){return o},PR:function(){return u},S9:function(){return c},mJ:function(){return i},Bi:function(){return d}});var n=r(3697);const o=(0,n.V)("bundleList"),s=(0,n.V)("actionsList"),i=(0,n.V)("modulesList"),a=(0,n.V)("appInfo"),c=(0,n.V)("commandLineRunner"),u=(0,n.V)("commandLines"),l={multi:!0},d={init:(0,n.V)("init",l),listen:(0,n.V)("listen",l),customerStart:(0,n.V)("customer_start",l),resolveUserDeps:(0,n.V)("resolve_user_deps",l),resolvePageDeps:(0,n.V)("resolve_page_deps",l),generatePage:(0,n.V)("generate_page",l),clear:(0,n.V)("clear",l),spaTransition:(0,n.V)("spa_transition",l),afterSpaTransition:(0,n.V)("after_spa_transition",l),close:(0,n.V)("close",l)}},2036:function(e,t,r){"use strict";r.d(t,{Y9:function(){return a},sU:function(){return i},$d:function(){return l},l1:function(){return o},Dk:function(){return s},TL:function(){return c},S3:function(){return u}});var n=r(3697);const o=(0,n.V)("router router"),s=(0,n.V)("router routes",{multi:!0}),i=(0,n.V)("router guard",{multi:!0}),a=(0,n.V)("router pageService"),c=(0,n.V)("router routeResolve"),u=(0,n.V)("router routeTransform",{multi:!0}),l=(0,n.V)("router spaRunMode")},7069:function(e,t,r){"use strict";r.d(t,{d:function(){return n}});const n="__action_parameters__"},7021:function(e){"use strict";const{AbortController:t,AbortSignal}="undefined"!=typeof self?self:window;e.exports=t,e.exports.AbortSignal=AbortSignal,e.exports.default=t},5058:function(e,t,r){"use strict";r.r(t),r.d(t,{__extends:function(){return o},__assign:function(){return s},__rest:function(){return i},__decorate:function(){return a},__param:function(){return c},__metadata:function(){return u},__awaiter:function(){return l},__generator:function(){return d},__createBinding:function(){return p},__exportStar:function(){return h},__values:function(){return f},__read:function(){return g},__spread:function(){return v},__spreadArrays:function(){return m},__spreadArray:function(){return y},__await:function(){return b},__asyncGenerator:function(){return S},__asyncDelegator:function(){return _},__asyncValues:function(){return E},__makeTemplateObject:function(){return w},__importStar:function(){return k},__importDefault:function(){return T},__classPrivateFieldGet:function(){return C},__classPrivateFieldSet:function(){return R},__classPrivateFieldIn:function(){return M}});var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},n(e,t)};function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}var s=function(){return s=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var o in t=arguments[r])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},s.apply(this,arguments)};function i(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(n=Object.getOwnPropertySymbols(e);o<n.length;o++)t.indexOf(n[o])<0&&Object.prototype.propertyIsEnumerable.call(e,n[o])&&(r[n[o]]=e[n[o]])}return r}function a(e,t,r,n){var o,s=arguments.length,i=s<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,r,n);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(i=(s<3?o(i):s>3?o(t,r,i):o(t,r))||i);return s>3&&i&&Object.defineProperty(t,r,i),i}function c(e,t){return function(r,n){t(r,n,e)}}function u(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)}function l(e,t,r,n){return new(r||(r=Promise))((function(o,s){function i(e){try{c(n.next(e))}catch(e){s(e)}}function a(e){try{c(n.throw(e))}catch(e){s(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(i,a)}c((n=n.apply(e,t||[])).next())}))}function d(e,t){var r,n,o,s,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return s={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function a(a){return function(c){return function(a){if(r)throw new TypeError("Generator is already executing.");for(;s&&(s=0,a[0]&&(i=0)),i;)try{if(r=1,n&&(o=2&a[0]?n.return:a[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,a[1])).done)return o;switch(n=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,n=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!((o=(o=i.trys).length>0&&o[o.length-1])||6!==a[0]&&2!==a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(e){a=[6,e],n=0}finally{r=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,c])}}}var p=Object.create?function(e,t,r,n){void 0===n&&(n=r);var o=Object.getOwnPropertyDescriptor(t,r);o&&!("get"in o?!t.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,o)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]};function h(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||p(t,e,r)}function f(e){var t="function"==typeof Symbol&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function g(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,o,s=r.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(n=s.next()).done;)i.push(n.value)}catch(e){o={error:e}}finally{try{n&&!n.done&&(r=s.return)&&r.call(s)}finally{if(o)throw o.error}}return i}function v(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(g(arguments[t]));return e}function m(){for(var e=0,t=0,r=arguments.length;t<r;t++)e+=arguments[t].length;var n=Array(e),o=0;for(t=0;t<r;t++)for(var s=arguments[t],i=0,a=s.length;i<a;i++,o++)n[o]=s[i];return n}function y(e,t,r){if(r||2===arguments.length)for(var n,o=0,s=t.length;o<s;o++)!n&&o in t||(n||(n=Array.prototype.slice.call(t,0,o)),n[o]=t[o]);return e.concat(n||Array.prototype.slice.call(t))}function b(e){return this instanceof b?(this.v=e,this):new b(e)}function S(e,t,r){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n,o=r.apply(e,t||[]),s=[];return n={},i("next"),i("throw"),i("return"),n[Symbol.asyncIterator]=function(){return this},n;function i(e){o[e]&&(n[e]=function(t){return new Promise((function(r,n){s.push([e,t,r,n])>1||a(e,t)}))})}function a(e,t){try{(r=o[e](t)).value instanceof b?Promise.resolve(r.value.v).then(c,u):l(s[0][2],r)}catch(e){l(s[0][3],e)}var r}function c(e){a("next",e)}function u(e){a("throw",e)}function l(e,t){e(t),s.shift(),s.length&&a(s[0][0],s[0][1])}}function _(e){var t,r;return t={},n("next"),n("throw",(function(e){throw e})),n("return"),t[Symbol.iterator]=function(){return this},t;function n(n,o){t[n]=e[n]?function(t){return(r=!r)?{value:b(e[n](t)),done:"return"===n}:o?o(t):t}:o}}function E(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t,r=e[Symbol.asyncIterator];return r?r.call(e):(e=f(e),t={},n("next"),n("throw"),n("return"),t[Symbol.asyncIterator]=function(){return this},t);function n(r){t[r]=e[r]&&function(t){return new Promise((function(n,o){!function(e,t,r,n){Promise.resolve(n).then((function(t){e({value:t,done:r})}),t)}(n,o,(t=e[r](t)).done,t.value)}))}}}function w(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e}var O=Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t};function k(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&p(t,e,r);return O(t,e),t}function T(e){return e&&e.__esModule?e:{default:e}}function C(e,t,r,n){if("a"===r&&!n)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!n:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?n:"a"===r?n.call(e):n?n.value:t.get(e)}function R(e,t,r,n,o){if("m"===n)throw new TypeError("Private method is not writable");if("a"===n&&!o)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!o:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===n?o.call(e,r):o?o.value=r:t.set(e,r),r}function M(e,t){if(null===t||"object"!=typeof t&&"function"!=typeof t)throw new TypeError("Cannot use 'in' operator on non-object");return"function"==typeof e?t===e:e.has(t)}},914:function(e,t,r){"use strict";var n={};r.r(n),r.d(n,{getCurrentName:function(){return Vd},getCurrentRegionCapital:function(){return qd},getDeliveryCityPrepositional:function(){return Fd},getDeliveryRegion:function(){return Ud},getFormattedCities:function(){return $d},getRegionsCapitals:function(){return Hd},getSearchedRegions:function(){return Yd},getSearchedRegionsWithCapitals:function(){return zd}});var o=r(2490);const s=(0,o.Yl)({imports:[],providers:[]})(class{});var i=r(8574),a=r(971),c=r(510),u=r(6916),l=r(1336),d=r.n(l);const p=e=>{if(!e)return"value should not be empty";let t;try{t=e.startsWith("/")?new URL(e,"http://localhost:3000"):new URL(e)}catch(e){return"URL is not valid"}return"http:"!==t.protocol&&"https:"!==t.protocol&&`Invalid protocol ${t.protocol}`},h=e=>t=>t?!!t.endsWith(e)||`value should ends with ${e}`:"value should not be empty",f=e=>t=>e.reduce(((e,r)=>{const n=r(t);return d()(n)?d()(e)?`${e}; ${n}`:n:d()(e)?e:e&&n}),!0);var g=r(8345);const v=window.fetch.bind(window),m=(e,t)=>t instanceof Error?Object.assign({message:t.message,stack:t.stack},t):t;var y=r(2383),b=r(7598),S=r(4674);const _=(0,o.Yl)({imports:[],providers:[(0,i.J)({provide:y.J,multi:!0,useFactory:({remoteReporter:e})=>t=>{t.addBeforeReporter(e)},deps:{remoteReporter:"remoteReporter"}}),(0,i.J)({provide:"remoteReporter",useFactory:({appInfo:e,envManager:t,wuid:r})=>{const{appName:n}=e,o=t.get("APP_VERSION"),s=t.get("APP_RELEASE"),i=t.get("FRONT_LOG_API"),a=t.get("FRONT_LOG_SYSTEM");return new u.f({requestCount:1,emitLevels:{error:!0,fatal:!0},makeRequest:e=>(({logApi:e,payload:t})=>v(`${e}collect`,{method:"POST",keepalive:!0,headers:{"Content-type":"application/json"},body:(0,g.K)(t,m)}).catch((e=>e)))({logApi:i,payload:Object.assign({},e,{component:`tramvai-${n}-${e.name}`,wuid:r,release:s,system:a,appVersion:o,appName:n,appType:"tramvai",from:"browser",userAgent:window.navigator.userAgent,href:window.location.href})})})},scope:a.s.SINGLETON,deps:{appInfo:c.Qo,envManager:b.v,wuid:{token:S.$,optional:!0}}}),(0,i.J)({provide:b.s,useValue:[{key:"FRONT_LOG_API",dehydrate:!0,validator:p},{key:"FRONT_LOG_SYSTEM",dehydrate:!0,value:"client_logs"}],multi:!0})]})(class{}),E=(0,o.Yl)({imports:[],providers:[]})(class{});var w=r(4957),O=r.n(w),k=r(3565),T=function(e,t){return(T=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])})(e,t)};function C(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}T(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}var R=function(){return(R=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var o in t=arguments[r])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)};function M(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(e){var t=16*Math.random()|0;return("x"===e?t:3&t|8).toString(16)}))}var P=function(e){return"function"==typeof e?e():e},x=function(){var e=0;return function(){return{clientEventTimestamp:Date.now(),clientUploadTimestamp:Date.now(),sequence:++e,uuid:M()}}},I={test:"https://api-dev-statist.tcsbank.ru",prod:"https://api-statist.tinkoff.ru"},N=document,j=window,A=navigator,D=XMLHttpRequest,L="undefined"!=typeof globalThis?globalThis:window,U=function(){function e(e,t){var r=this;this.events=[],this.timer=null,this.listeners=Object.create(null),this.destroy=function(){j.removeEventListener("visibilitychange",r.handleVisibilityChange),j.removeEventListener("pagehide",r.handlePageHide)},this.handleVisibilityChange=function(){"hidden"===N.visibilityState&&r.sendByBeacon()},this.handlePageHide=function(){r.sendByBeacon()},this.pushEventsUrl=e+"/gateway/v1/events",this.batchSize=t.batchSize,this.pushInterval=t.pushInterval,this.pushTimeout=t.pushInterval,"visibilityState"in N?j.addEventListener("visibilitychange",this.handleVisibilityChange,!1):j.addEventListener("pagehide",this.handlePageHide,!1)}return e.createInstance=function(t,r){return void 0===L._statistTransport&&(L._statistTransport=new e(t,r)),L._statistTransport},e.prototype.handleApiError=function(e){var t,r,n,o=this;if(e.status<200||e.status>=500)return(t=this.events).unshift.apply(t,e.events),void this.startPush();if(e.response)try{var s=JSON.parse(e.response);if(s.message&&(null===(r=s.details)||void 0===r?void 0:r.errors))return void s.details.errors.forEach((function(t){t&&o.emit("error",Object.assign(new Error(s.message),{status:e.status,response:t}))}))}catch(e){}this.emit("error",Object.assign(new Error(null!==(n=e.response)&&void 0!==n?n:e.message),{status:e.status}))},e.prototype.on=function(e,t){this.listeners[e]||(this.listeners[e]=[]),this.listeners[e].push(t)},e.prototype.off=function(e,t){this.listeners[e]&&(this.listeners[e]=this.listeners[e].filter((function(e){return e!==t})))},e.prototype.emit=function(e,t){var r=this.listeners[e];if(r)for(var n=0,o=r;n<o.length;n++)(0,o[n])(t)},e.prototype.startPush=function(){var e=this;this.timer||0===this.events.length||(this.timer=setTimeout((function(){return(e.isReady()?e.pushEvents(e.batchSize):Promise.resolve()).catch((function(t){return e.handleApiError(t)})).then((function(){e.timer=null,e.startPush()}))}),this.pushInterval))},e.prototype.pushEvents=function(e){var t=this.events.splice(0,e);return this.sendByXhr(t)},e.prototype.updateTimestamp=function(e){for(var t=Date.now(),r=0,n=e;r<n.length;r++)n[r].eventParameters.clientUploadTimestamp=t},e.prototype.sendByXhr=function(e){var t=this;return D?e.length?(this.updateTimestamp(e),new Promise((function(r,n){var o=new D,s=function(){if(o.status>=200&&o.status<=204)r();else{var t=Object.assign(new Error(o.responseText),{status:o.status,response:o.responseText,events:e});n(t)}};o.onerror=s,o.onload=s,o.timeout=t.pushTimeout,o.open("POST",t.pushEventsUrl,!0),o.setRequestHeader("Content-Type","application/json;charset=UTF-8"),o.send(JSON.stringify(e))}))):Promise.resolve():Promise.reject()},e.prototype.sendByBeacon=function(){var e=this.events;this.events=[],e.length&&(this.updateTimestamp(e),A.sendBeacon(this.pushEventsUrl,JSON.stringify(e)))},e.prototype.send=function(e){this.events.push(e),this.startPush()},e.prototype.isReady=function(){return!0},e}(),F={},V=function(e){try{return sessionStorage.getItem(e)}catch(t){return function(e){return F[e]?F[e]:null}(e)}},H=function(e,t){try{sessionStorage.setItem(e,t)}catch(r){!function(e,t){F[e]=t}(e,t)}return t},q=function(e,t){var r=new Date(Date.now()+15768e7).toUTCString();return N.cookie=e+"="+encodeURIComponent(t)+"; expires="+r+"; path=/; domain="+j.location.hostname.split(".").slice(-2).join("."),t},B=function(){function e(e,t,r){this.clientParameters=e,this.transport=t,this.eventParameters=r}return e.prototype.resolveClientParameters=function(e){return R(R({},null!=e?e:this.clientParameters),{visitId:V("vIdUid")||H("vIdUid",M()),deviceId:N.cookie.split("; ").reduce((function(e,t){var r=t.split("=");return"stDeIdU"===r[0]?decodeURIComponent(r[1]):e}),"")||q("stDeIdU",M())})},e.prototype.sendUserProperties=function(e,t,r,n){var o,s,i=((o={kind:"userProperties",project:e,eventParameters:P(this.eventParameters),clientParameters:this.resolveClientParameters()})[r]=((s={})["$"+t]=n,s),o);this.transport.send(i)},e.prototype.send=function(e,t,r,n){var o={project:e,name:t,parameters:r,eventParameters:P(this.eventParameters),clientParameters:this.resolveClientParameters(n)};this.transport.send(o)},e.prototype.updateClientParameters=function(e){for(var t in e)this.clientParameters[t]=e[t]},e.prototype.updateUserProperties=function(e,t,r){this.sendUserProperties(e,t,"userProperties",null!=r?r:{})},e.prototype.updateFeatureFlags=function(e,t){this.sendUserProperties(e,"set","featureFlags",null!=t?t:{})},e.prototype.updateABGroups=function(e,t){this.sendUserProperties(e,"set","ABGroups",null!=t?t:{})},e.prototype.on=function(e,t){this.transport.on(e,t)},e.prototype.off=function(e,t){this.transport.off(e,t)},e}(),$=function(e){function t(t){var r=t.transportOptions||{},n=r.batchSize,o=void 0===n?500:n,s=r.pushInterval,i=void 0===s?15e3:s,a=r.pushTimeout,c=void 0===a?3e4:a;return e.call(this,t.clientParameters,U.createInstance(I[t.environment],{batchSize:o,pushInterval:i,pushTimeout:c,preconnect:!1}),t.eventParameters||x())||this}return C(t,e),t.prototype.send=function(t,r,n,o){return e.prototype.send.call(this,t,r,n||{},o)},t}(B),Y=function(e){function t(t){var r=t.transportOptions||{},n=r.batchSize,o=void 0===n?500:n,s=r.pushInterval,i=void 0===s?15e3:s,a=r.pushTimeout,c=void 0===a?3e4:a;return e.call(this,t.clientParameters,U.createInstance(I[t.environment],{batchSize:o,pushInterval:i,pushTimeout:c,preconnect:!1}),t.eventParameters||x())||this}return C(t,e),t.prototype.send=function(t,r,n,o){return e.prototype.send.call(this,t,r,n,o)},t}(B);const z=(e,t)=>{var r,n,o,s,i;return(null===(n=null===(r=t.getState())||void 0===r?void 0:r.featureToggle)||void 0===n?void 0:n.statist_metrics)?{environment:null!==(i=null===(s=null===(o=t.getState())||void 0===o?void 0:o.featureToggle)||void 0===s?void 0:s.statist_metrics_env_dev)&&void 0!==i&&i?"test":"prod",clientParameters:{client:e.appName,clientVersion:"1.0.0",ssoId:null}}:null};var G=r(3697);const J=(0,G.V)("STATIST_EVENT_API_CLIENT"),W=(0,G.V)("STATIST_METRIC_API_CLIENT"),K=(0,o.Yl)({providers:[(0,i.J)({provide:J,useFactory:({appInfo:e,store:t,logger:r})=>{const n=z(e,t),o=r({name:"statist:event",defaults:{remote:!0}});if(n){const e=new $(n);return e.on("error",(e=>{o.error({event:"send-failed",error:e,status:e.status,response:e.response})})),e}},deps:{appInfo:c.Qo,store:k.kR,logger:y.F}}),{provide:W,useFactory:({appInfo:e,store:t,logger:r})=>{const n=z(e,t),o=r({name:"statist:metric",defaults:{remote:!0}});if(n){const e=new Y(n);return e.on("error",(e=>{o.error({event:"send-failed",error:e,status:e.status,response:e.response})})),e}},deps:{appInfo:c.Qo,store:k.kR,logger:y.F}}]})(class{});var Q=r(2036);const Z=(0,G.V)("userAgent"),X=e=>Math.round(e),ee=e=>t=>X(t[e]),te={lcp:{largestContentfulPaint:X},fp:{firstPaintTime:X},fid:{firstInputDelay:X},navigationTiming:{navigationTimingsDomainLookupTime:ee("dnsLookupTime"),navigationTimingsServerResponseTime:ee("timeToFirstByte"),navigationTimingsDownloadDocumentTime:ee("downloadTime"),navigationTimingsFetchTime:ee("fetchTime"),navigationTimingsWorkerTime:ee("workerTime"),navigationTimingsTotalTime:ee("totalTime"),navigationTimingsRedirectTime:ee("redirectTime")},networkInformation:{networkInformationRoundTripTime:ee("rtt"),networkInformationDownloadBandwidth:ee("downlink"),networkInformationEffectiveConnectionTypeV2:("effectiveType",e=>e.effectiveType),networkInformationSaveDataV2:e=>e.saveData?1:0},fcp:{firstContentfulPaint:X},cls:{cumulativeLayoutShift:e=>e},tbt:{totalBlockingTime:X},ttfb:{timeToFirstByte:X}};const re=(0,o.Yl)({imports:[K],providers:[(0,i.J)({provide:c.Bi.init,useFactory:({statistClient:e,pageService:t,userAgent:n})=>()=>{e&&((e,t,n)=>{const o=(({statistClient:e,pageService:t,userAgent:r})=>{var n;const o=-1!==(null===(n=navigator.userAgent)||void 0===n?void 0:n.indexOf("Mobi"))?"mobile":"desktop",s=null==r?void 0:r.browser.browserEngine,i=null==r?void 0:r.browser.version,a=null==r?void 0:r.os.name,c=null==r?void 0:r.os.version;let u={};e.updateClientParameters({osName:a,osVersion:c});const l=O()(500,(()=>{var r;const n=null===(r=t.getCurrentRoute())||void 0===r?void 0:r.path;e.send("coretech.web.metrics","performance.rum",Object.assign({},u,{deviceType:o,urlMask:n,browserName:s,browserVersion:i})),u={}}));return e=>{e&&(u=Object.assign({},u,e),l())}})({statistClient:e,pageService:t,userAgent:n});r.e("perfume_js_dist_perfume_esm_min_js").then(r.bind(r,6157)).then((e=>{new(0,e.default)({analyticsTracker:e=>{const{metricName:t,data:r}=e;o(((e,t,r)=>r[e]?((e,t)=>{const r={};for(const n in t)r[n]=t[n](e);return r})(t,r[e]):null)(t,r,te))}})}))})(e,t,n)},multi:!0,deps:{statistClient:{token:W,optional:!0},pageService:Q.Y9,userAgent:{token:Z,optional:!0}}})]})(class{}),ne=(0,o.Yl)({imports:[],providers:[]})(class{}),oe=(0,o.Yl)({imports:[],providers:[(0,i.J)({provide:b.s,useValue:[{key:"SENTRY_SDK_URL",dehydrate:!0,optional:!0,value:"https://www.cdn-tinkoff.ru/frontend-libraries/npm/sentry/5.17.0/bundle.min.js",validator:p}],multi:!0})]})(class{}),se=(0,G.V)("metaDefaultPack"),ie=(0,G.V)("metaWalk"),ae=(0,G.V)("metaUpdater",{multi:!0}),ce=(0,o.Yl)({imports:[],providers:[(0,i.J)({provide:se,useValue:{title:"     ,      ",ogTitle:"        .        .",ogDescription:"       5 .       .  -    .",ogSiteName:" ",ogImage:"http://static2.tinkoff.ru/portal/share/tinkoffru.png",ogImageSecure:"https://static2.tinkoff.ru/portal/share/tinkoffru.png"}})]})(class{}),ue=(0,o.Yl)({imports:[s,_,E,re,ne,oe,ce],providers:[]})(class{});var le=r(4403);const de=e=>!1!==Boolean(e)&&(o.eF in e||"mainModule"in e&&de(e.mainModule)),pe=e=>!!e.mainModule,he=e=>{let t;if(pe(e)){const r=e.mainModule[o.eF];t=Object.assign({},r),t.providers=t.providers.concat(e.providers||[]);const n=t.imports||[];t.imports=n.concat(e.imports||[])}else t=e[o.eF];return t};class fe{constructor({name:e,modules:t=[],bundles:r={},actions:n=[],providers:o}){this.di=(0,le.f)(),this.modulesToResolve=new Set,this.walkOfProviders(function(e,t,r,n){return[{provide:c.Qo,scope:a.s.SINGLETON,useValue:{appName:e}},{provide:c.om,scope:a.s.SINGLETON,useValue:t},{provide:c.I7,scope:a.s.SINGLETON,useValue:r,multi:!0},{provide:c.mJ,scope:a.s.SINGLETON,useValue:n}]}(e,r,n,t)),this.walkOfModules(t),o&&this.walkOfProviders(o)}async initialization(e,t="init"){const r=this.di.get({token:y.F,optional:!0}),n=null==r?void 0:r("tramvai-core"),o=this.di.get({token:c.S9,optional:!0});if(!o)throw new Error("`COMMAND_LINE_RUNNER_TOKEN` is not defined, have you added `@tramvai/module-common` to your dependency list?");null==n||n.warn({event:"tramvai-app-init",message:"Initializing. Run CommandLineRunner."});const s=await o.run(e,t);return null==n||n.warn({event:"tramvai-app-init",message:"CommandLineRunner executed successfully. Resolving modules."}),this.resolveModules(),null==n||n.warn({event:"tramvai-app-init",message:"Modules resolved successfully. Tramvai App initialized"}),s}resolveModules(){this.modulesToResolve.forEach((e=>{new e(this.resolveModuleDeps(e))}))}resolveModuleDeps(e){const{deps:t}=e[o.eF];if(t)return this.di.getOfDeps(t)}walkOfProviders(e){e.forEach((e=>{this.di.register(e)}))}walkOfModules(e){(e=>{const t=[],r=new Set,n=new Set,o=e=>{if(!de(e))throw new Error("An invalid module was passed in the list of modules");const s=he(e);r.has(s.id)||(r.add(s.id),n.add(s.name),s.imports&&s.imports.forEach((e=>{o(e)})),t.push(e))};return e.forEach((e=>{o(e)})),t})(e).forEach((e=>{const t=he(e);this.modulesToResolve.add(pe(e)?e.mainModule:e),this.walkOfProviders(t.providers)}))}}var ge=r(1973),ve=r(5058),me=r(6061),ye=r.n(me),be=r(2099);class Se{constructor(){this.parameters={}}get(e){return this.parameters[e]}getInt(e,t){const r=Number(e in this.parameters?this.parameters[e]:t);return Number.isFinite(r)?r:t}getAll(){return this.parameters}update(e){this.parameters=Object.assign(this.parameters,e)}clientUsed(){return this.getAll()}updateClientUsed(e){this.update(e)}}var _e=r(165);const Ee=(0,_e.L)("environment",{});let we=class{};we=(0,ve.__decorate)([(0,o.Yl)({providers:[{provide:b.v,useFactory:({store:e})=>{const t=new Se;return t.update(e.getState(Ee)),t},scope:a.s.SINGLETON,deps:{store:k.kR}},{provide:k.Ym,useValue:Ee,multi:!0}]})],we);const Oe=(0,G.V)("context");var ke=r(1894),Te=r(8875);const Ce=(0,Te.y)("setMedia"),Re=(0,_e.L)("media",{height:0,width:0,isTouch:!1,retina:!1,synchronized:!1}).on(Ce,((e,t)=>Object.assign({},e,t))),Me=!!("ontouchstart"in window||window.DocumentTouch&&document instanceof window.DocumentTouch),Pe=(0,Te.y)("setUserAgent"),xe=(0,_e.L)("userAgent",null).on(Pe,((e,t)=>t)),Ie=[{provide:k.Ym,multi:!0,useValue:[xe,Re]}];let Ne=class{};Ne=(0,ve.__decorate)([(0,o.Yl)({providers:[...Ie,(0,i.J)({provide:Z,useFactory:({store:e})=>e.getState(xe),deps:{store:k.kR}}),(0,i.J)({provide:c.Bi.clear,multi:!0,useFactory:({context:e,cookieManager:t})=>function(){const r=()=>{const r={width:window.innerWidth,height:window.innerHeight,isTouch:Me,retina:window.matchMedia("(-webkit-min-device-pixel-ratio: 2), (min-resolution: 192dpi)").matches};return t.set({name:"mediaInfo",value:JSON.stringify(r)}),e.dispatch(Ce(Object.assign({},r,{supposed:!1})))},n=O()(300,r);return window.addEventListener("orientationchange",n),window.addEventListener("resize",n),r()},deps:{context:Oe,cookieManager:ke.T}})]})],Ne);class je{constructor(e={}){this.defaults=e}get(e){const t=document.cookie.split(";");for(;t.length;){const r=t.pop();if(!r)break;let n=r.indexOf("=");n=n<0?r.length:n;const o=r.slice(0,n).replace(/^\s+/,""),s=r.slice(n+1);let i;try{i=decodeURIComponent(o)}catch(e){console.warn("Decode cookie name error",e)}if(i===e||o===e)try{return decodeURIComponent(s)}catch(e){return console.warn("Decode cookie value error",e),s}}return null}set(e,t,r){if(!e)return;const{domain:n,path:o,expires:s,secure:i,httpOnly:a,sameSite:c}=function(e={},t={}){var r,n,o,s,i;return{expires:e.expires||t.expires,domain:e.domain||t.domain,path:null!==(n=null!==(r=e.path)&&void 0!==r?r:t.path)&&void 0!==n?n:"/",secure:null!==(o=e.secure)&&void 0!==o?o:t.secure,httpOnly:null!==(s=e.httpOnly)&&void 0!==s?s:t.httpOnly,sameSite:null!==(i=e.sameSite)&&void 0!==i?i:t.sameSite}}(r,this.defaults),u=function(e){return e?new Date("number"==typeof e?(new Date).getTime()+864e5*e:e):null}(s),l=e.replace(/[^+#$&^`|]/g,encodeURIComponent).replace("(","%28").replace(")","%29"),d=("string"==typeof t?t:"").replace(/[^+#$&/:<-\[\]-}]/g,encodeURIComponent),p=u&&u.getTime()>=0?`;expires=${u.toUTCString()}`:"",h=n?`;domain=${n}`:"",f=o?`;path=${o}`:"",g=i?";secure":"",v=a?";httponly":"",m=c?`;samesite=${c}`:"";document.cookie=`${l}=${d}${p}${h}${f}${g}${v}${m}`}erase(e,t={}){this.set(e,"",{expires:-1,domain:t.domain,path:t.path,secure:!1,httpOnly:!1})}all(){const e={},t=document.cookie.split(";");for(;t.length;){const r=t.pop();if(!r)break;let n=r.indexOf("=");n=n<0?r.length:n;const o=r.slice(0,n).replace(/^\s+/,""),s=r.slice(n+1);let i,a;try{i=decodeURIComponent(o)}catch(e){console.warn("Decode cookie name error",e)}try{a=decodeURIComponent(s)}catch(e){console.warn("Decode cookie value error",e)}e[null!=i?i:o]=null!=a?a:s}return e}}const Ae=["sameSite","noSubdomains"],De=/^(?:::(?:ffff:(0:)?)?)?(?:[0-9]{1,3}\.){3}[0-9]{1,3}$/,Le=/^([0-9a-fA-F]{1,4}:){1,4}:(?:[0-9]{1,3}\.){3}[0-9]{1,3}$/,Ue=e=>{if(e)return new Date("number"==typeof e?+new Date+1e3*e:e)},Fe=["name","value"];class Ve{constructor(){this.cache=Object.create(null)}get(e){return this.cache[e]||void 0}set(e,t){this.cache[e]=t}erase(e){delete this.cache[e]}all(){return this.cache}}let He=class{};He=(0,ve.__decorate)([(0,o.Yl)({imports:[Ne],providers:[{provide:ke.T,useClass:class{constructor({cookieOptions:e={},userAgent:t}){const r="https:"===window.location.protocol;this.cookies=(()=>{const e="testcookiesenabled";return document.cookie=e,document.cookie.indexOf(e)>-1&&(document.cookie=`${e}; expires=Thu, 01 Jan 1970 00:00:01 GMT'`,!0)})()?new je(Object.assign({sameSite:t.sameSiteNoneCompatible&&r?"none":"lax",secure:r},e)):new Ve,this.userAgent=t}get(e){return this.cookies.get(e)||void 0}set(e){let{name:t,value:r}=e,n=(0,ge.Z)(e,Fe);this.cookies.set(t,r,(({userAgent:{sameSiteNoneCompatible:e},defaultHost:t,secureProtocol:r},n)=>{let{sameSite:o,noSubdomains:s}=n,i=(0,ge.Z)(n,Ae);return Object.assign({},i,"none"!==o||e&&r?{sameSite:o}:{},r&&"none"===o&&e?{secure:!0}:{},{expires:Ue(i.expires),domain:s?(a=i.domain||t,(e=>De.test(e)||Le.test(e))(a)?a:(e=>e.replace(/:\d+$/,""))(a.indexOf("localhost")>=0?a:`.${a.split(".").slice(-2).join(".")}`)):i.domain});var a})({userAgent:this.userAgent,defaultHost:window.location.hostname,secureProtocol:"https:"===window.location.protocol},n))}all(){return this.cookies.all()}remove(e,t){return this.cookies.erase(e,t)}},scope:a.s.SINGLETON,deps:{cookieOptions:{token:"temporary cookieOptions",optional:!0},userAgent:Z}}]})],He);var qe=r(3310),Be=r(2821);const $e=(0,qe.v)({name:"",key:"tramvai",reporters:[new Be.q]});let Ye=class{};Ye=(0,ve.__decorate)([(0,o.Yl)({providers:[{provide:y.F,useFactory({loggerInitHooks:e}){if(e)for(const t of e)t($e);return $e},deps:{loggerInitHooks:{token:y.J,multi:!0,optional:!0}}}]})],Ye);var ze=r(5368),Ge=r.n(ze);const Je=(0,G.V)("hooks"),We=(0,G.V)("componentRegistry"),Ke=(0,G.V)("bundleManager"),Qe=(0,G.V)("additional bundle",{multi:!0});var Ze=r(4939);const Xe=(0,G.V)("pubsubFactory"),et=(0,G.V)("pubsub"),tt=(0,G.V)("rootPubsub");var rt=r(7751),nt=r(4121),ot=r.n(nt),st=r(6443);function it(e,t){return it=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},it(e,t)}var at=r(1238),ct=r(4317),ut=r.n(ct);var lt=ot().createContext(),dt={},pt="PENDING",ht="REJECTED",ft=function(e){return e};function gt(e){var t=e.defaultResolveComponent,r=void 0===t?ft:t,n=e.render,o=e.onLoad;function s(e,t){void 0===t&&(t={});var s=function(e){return"function"==typeof e?{requireAsync:e,resolve:function(){},chunkName:function(){}}:e}(e),i={};function a(e){return t.cacheKey?t.cacheKey(e):s.resolve?s.resolve(e):"static"}function c(e,n,o){var s=t.resolveComponent?t.resolveComponent(e,n):r(e);if(t.resolveComponent&&!(0,at.isValidElementType)(s))throw new Error("resolveComponent returned something that is not a React component!");return ut()(o,s,{preload:!0}),s}var u,l,d=function(e){var t=a(e),r=i[t];return r&&r.status!==ht||((r=s.requireAsync(e)).status=pt,i[t]=r,r.then((function(){r.status="RESOLVED"}),(function(t){console.error("loadable-components: failed to asynchronously load component",{fileName:s.resolve(e),chunkName:s.chunkName(e),error:t?t.message:t}),r.status=ht}))),r},p=function(e){var r,u;function l(r){var n;return(n=e.call(this,r)||this).state={result:null,error:null,loading:!0,cacheKey:a(r)},function(e,t){if(!e){var r=new Error("loadable: "+t);throw r.framesToPop=1,r.name="Invariant Violation",r}}(!r.__chunkExtractor||s.requireSync,"SSR requires `@loadable/babel-plugin`, please install it"),r.__chunkExtractor?(!1===t.ssr||(s.requireAsync(r).catch((function(){return null})),n.loadSync(),r.__chunkExtractor.addChunk(s.chunkName(r))),function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(n)):(!1!==t.ssr&&(s.isReady&&s.isReady(r)||s.chunkName&&dt[s.chunkName(r)])&&n.loadSync(),n)}u=e,(r=l).prototype=Object.create(u.prototype),r.prototype.constructor=r,it(r,u),l.getDerivedStateFromProps=function(e,t){var r=a(e);return(0,st.Z)({},t,{cacheKey:r,loading:t.loading||t.cacheKey!==r})};var p=l.prototype;return p.componentDidMount=function(){this.mounted=!0;var e=this.getCache();e&&e.status===ht&&this.setCache(),this.state.loading&&this.loadAsync()},p.componentDidUpdate=function(e,t){t.cacheKey!==this.state.cacheKey&&this.loadAsync()},p.componentWillUnmount=function(){this.mounted=!1},p.safeSetState=function(e,t){this.mounted&&this.setState(e,t)},p.getCacheKey=function(){return a(this.props)},p.getCache=function(){return i[this.getCacheKey()]},p.setCache=function(e){void 0===e&&(e=void 0),i[this.getCacheKey()]=e},p.triggerOnLoad=function(){var e=this;o&&setTimeout((function(){o(e.state.result,e.props)}))},p.loadSync=function(){if(this.state.loading)try{var e=c(s.requireSync(this.props),this.props,f);this.state.result=e,this.state.loading=!1}catch(e){console.error("loadable-components: failed to synchronously load component, which expected to be available",{fileName:s.resolve(this.props),chunkName:s.chunkName(this.props),error:e?e.message:e}),this.state.error=e}},p.loadAsync=function(){var e=this,t=this.resolveAsync();return t.then((function(t){var r=c(t,e.props,f);e.safeSetState({result:r,loading:!1},(function(){return e.triggerOnLoad()}))})).catch((function(t){return e.safeSetState({error:t,loading:!1})})),t},p.resolveAsync=function(){var e=this.props,t=(e.__chunkExtractor,e.forwardedRef,(0,ge.Z)(e,["__chunkExtractor","forwardedRef"]));return d(t)},p.render=function(){var e=this.props,r=e.forwardedRef,o=e.fallback,s=(e.__chunkExtractor,(0,ge.Z)(e,["forwardedRef","fallback","__chunkExtractor"])),i=this.state,a=i.error,c=i.loading,u=i.result;if(t.suspense&&(this.getCache()||this.loadAsync()).status===pt)throw this.loadAsync();if(a)throw a;var l=o||t.fallback||null;return c?l:n({fallback:l,result:u,options:t,props:(0,st.Z)({},s,{ref:r})})},l}(ot().Component),h=(l=function(e){return ot().createElement(lt.Consumer,null,(function(t){return ot().createElement(u,Object.assign({__chunkExtractor:t},e))}))},(u=p).displayName&&(l.displayName=u.displayName+"WithChunkExtractor"),l),f=ot().forwardRef((function(e,t){return ot().createElement(h,Object.assign({forwardedRef:t},e))}));return f.displayName="Loadable",f.preload=function(e){f.load(e)},f.load=function(e){return d(e)},f}return{loadable:s,lazy:function(e,t){return s(e,(0,st.Z)({},t,{suspense:!0}))}}}var vt=gt({defaultResolveComponent:function(e){return e.__esModule?e.default:e.default||e},render:function(e){var t=e.result,r=e.props;return ot().createElement(t,r)}}),mt=vt.loadable,yt=vt.lazy,bt=gt({onLoad:function(e,t){e&&t.forwardedRef&&("function"==typeof t.forwardedRef?t.forwardedRef(e):t.forwardedRef.current=e)},render:function(e){var t=e.result,r=e.props;return r.children?r.children(t):null}}),St=bt.loadable,_t=bt.lazy;mt.lib=St,yt.lib=_t;r(6819);class Et{constructor({bundleList:e,componentRegistry:t,actionRegistry:r,dispatcher:n,logger:o}){this.bundles=e,this.componentRegistry=t,this.actionRegistry=r,this.dispatcher=n}get(e,t){return this.loadBundle(e,t).then((e=>this.resolve(e.default,t)))}has(e,t){return!!this.bundles[e]}async resolve(e,t){if(t&&e.components[t]){const r=e.components[t],n="function"==typeof r.load?(await r.load()).default:r;r!==n&&ut()(r,n),n.components&&ye()(((e,r)=>{this.componentRegistry.add(r,e,t)}),n.components),n.actions&&this.actionRegistry.add(t,n.actions),n.reducers&&n.reducers.forEach((e=>{this.dispatcher.registerStore(e)}))}return ye()(((t,r)=>{this.componentRegistry.add(r,t,e.name)}),e.components),e.actions&&this.actionRegistry.add(e.name,e.actions),e.reducers&&e.reducers.forEach((e=>{this.dispatcher.registerStore(e)})),e}loadBundle(e,t){return this.has(e,t)?this.bundles[e]().catch((t=>((e,t)=>{if("CSS_CHUNK_LOAD_FAILED"===(null==e?void 0:e.code)){const r=e.request;if(document.querySelector(`link[href="${r}"]`)||document.querySelector(`link[data-href="${r}"]`))return t()}throw e})(t,this.bundles[e]))):Promise.reject(new Error(`Bundle "${e}" not found`))}}var wt=r(180),Ot=r.n(wt),kt=r(858),Tt=r.n(kt);const Ct="__default";var Rt=r(2536);const Mt=(0,Te.y)("setRequest"),Pt=(0,_e.L)("requestManager",{}).on(Mt,((e,t)=>t)),xt=[{provide:Rt.Gu,scope:a.s.REQUEST,useClass:class{constructor({request:e}){this.request=e||{},this.url=window.location.href}getBody(){return this.request.body}getUrl(){return this.url}getMethod(){return this.request.method}getHeader(e){return this.request.headers[e]}getHeaders(){return this.request.headers}getCookie(e){return this.request.cookies[e]}getCookies(){return this.request.cookies}getClientIp(){return this.getHeader("x-real-ip")||Ot()(["connection","remoteAddress"],"",this.request)}getHost(){return window.location.host}},deps:{request:Rt.Z}},{provide:k.Ym,multi:!0,useValue:Pt}];let It=class{};It=(0,ve.__decorate)([(0,o.Yl)({providers:[...xt,(0,i.J)({provide:Rt.Z,useFactory:({store:e})=>{const t=e.getState(Pt);return Object.assign({},t,{headers:Object.assign({},null==t?void 0:t.headers,{"user-agent":navigator.userAgent,cookie:document.cookie})})},deps:{store:k.kR}})]})],It);const Nt=(0,G.V)("response"),jt=(0,G.V)("responseManager");var At=r(6600),Dt=r.n(At),Lt=r(9553),Ut=r.n(Lt);const Ft=[{provide:jt,scope:a.s.REQUEST,useClass:class{constructor(){this.body="",this.headers={},this.cookies={},this.status=200}getBody(){return this.body}setBody(e){this.body=e}getHeader(e){return"set-cookie"===e?Ut()(this.cookies):this.headers[e]}getHeaders(){return Dt()(this.cookies)?this.headers:Object.assign({},this.headers,{"Set-Cookie":Ut()(this.cookies)})}setHeader(e,t){this.headers[e]=t}getCookie(e){return this.cookies[e]}getCookies(){return this.cookies}setCookie(e,t){this.cookies[e]=t}setStatus(e){this.status=e}getStatus(){return this.status}},deps:{response:Nt}}];let Vt=class{};Vt=(0,ve.__decorate)([(0,o.Yl)({providers:[...Ft,{provide:Nt,useValue:{}}]})],Vt);var Ht=r(8072),qt=r.n(Ht);const Bt=(e,t)=>{e.on("change",t),t()};var $t=r(3787);const Yt=(e,t)=>"string"==typeof e?{payload:t,type:e,error:!1}:e;class zt extends $t.Z{constructor(e,t,r,n){super(),this.applyDispatch=e=>{const t=this.dispatcher.handlers[e.type]||[];return t.length?(this.applyHandlers(e,t),e.payload):e.payload},this.dispatcher=e,this.storeInstances={},this.storeUnsubscribeCallbacks={},this.context=t,this.dispatcherInterface={getContext:()=>this.context,getStore:this.getStore.bind(this)},this.rehydratedStoreState={},this.fullState={},r&&this.rehydrate(r),(null==n?void 0:n.length)&&(this.applyDispatch=this.applyMiddlewares(n)),Object.keys(this.dispatcher.stores).forEach((e=>{this.getStore(e)}))}applyMiddlewares(e){let t=(...e)=>{throw new Error("Dispatching while constructing your middleware is not allowed. Other middleware would not be applied to this dispatch.")};const r={getState:this.getState.bind(this),subscribe:this.subscribe.bind(this),dispatch:(...e)=>t(...e)};return t=qt()(...e.map((e=>e(r))))(this.applyDispatch),t}storeSubscribe(e,t){const r=()=>{const r=t.getState();r!==this.fullState[e]&&(this.fullState=Object.assign({},this.fullState,{[e]:r}),this.emit("change"))};Bt(t,r),this.storeUnsubscribeCallbacks[e]=()=>{t.off("change",r)}}getStore(e){let t,r=!1;"object"==typeof e?(t=e.store,r=e.optional):t=e;const n=this.dispatcher.getStoreName(t);if(!this.storeInstances[n]){let e=this.dispatcher.stores[n];if(!e){if("function"!=typeof t){if(r)return null;throw new Error(`Store ${n} was not registered.`)}this.dispatcher.registerStore(t),e=t}const o=new e(this.dispatcherInterface);if(this.storeInstances[n]=o,this.rehydratedStoreState&&this.rehydratedStoreState[n]){const e=this.rehydratedStoreState[n];o.rehydrate&&o.rehydrate(e),this.rehydratedStoreState[n]=null}this.storeSubscribe(n,o),e.dependencies&&e.dependencies.forEach((e=>{const t=this.getStore(e);Bt(t,(()=>{o.emit("change")}))}))}return this.storeInstances[n]}dispatch(e,t){if(!e)throw new Error(`eventOrType parameter ${e} is invalid.`);const r=Yt(e,t);return this.applyDispatch(r)}applyHandlers(e,t){const r={},n=e=>{if(r[e.name])return;const t=this.getStore(e.name);t&&("function"==typeof e.handler?r[e.name]=e.handler.bind(t):r[e.name]=t[e.handler].bind(t))},o=t.length;for(let e=0;e<o;e++)n(t[e]);return((e,t)=>{const r=Object.keys(t);for(let n=0;n<r.length;n++){const o=r[n],s=t[o];if(!s)throw new Error(`${o} does not have a handler for action ${e.type}`);s(e.payload,e.type)}})(e,r)}dehydrate(){const e={},t=Object.keys(this.storeInstances);for(let r=0;r<t.length;r++){const n=t[r],o=this.storeInstances[n];o.dehydrate()&&(e[n]=o.dehydrate())}return{stores:e}}rehydrate(e){if(e.stores){const t=Object.keys(e.stores);for(let r=0;r<t.length;r++){const n=t[r];this.rehydratedStoreState[n]=e.stores[n]}}}subscribe(...e){if("storeName"in e[0]){const t=e[0],r=e[1],n=this.getStore(t),o=()=>{const e=this.getState(t);r(e)};return n.on("change",o),()=>{n.off("change",o)}}const t=e[0],r=()=>{const e=this.getState();t(e)};return this.on("change",r),()=>{this.off("change",r)}}getState(e){return e?this.fullState[e.storeName]:this.fullState}setContext(e){this.context=e}hasStore(e){return e.storeName in this.storeInstances&&this.dispatcher.hasStore(e)}registerStore(e){this.dispatcher.registerStore(e),this.getStore(e)}unregisterStore(e){const{storeName:t}=e;this.dispatcher.unregisterStore(e),this.storeUnsubscribeCallbacks[t](),delete this.storeUnsubscribeCallbacks[t],delete this.rehydratedStoreState[t],delete this.storeInstances[t]}}class Gt{constructor({di:e,dispatcherContext:t,pubsub:r,store:n}){this.executeAction=(e,t)=>this.di.get(Ze.R$).run(e,t),this.dispatch=(e,t)=>new Promise(((r,n)=>{try{r(this.store.dispatch(Yt(e,t)))}catch(e){n(e)}})),this.dispatchWith=(e,t)=>"function"==typeof e?(...r)=>this.dispatch(e(...r),t):t=>this.dispatch(e,t),this.getStore=e=>this.dispatcher.getStore(e),this.dehydrate=()=>({dispatcher:this.dispatcher.dehydrate()}),this.getState=e=>this.store.getState(e),this.subscribe=(...e)=>this.store.subscribe(e[0],e[1]),this.hasStore=e=>this.dispatcher.hasStore(e),this.registerStore=e=>this.dispatcher.registerStore(e),this.unregisterStore=e=>this.dispatcher.unregisterStore(e),this.store=n,this.dispatcher=t,this.dispatcher.setContext(this),this.di=e,this.pubsub=r}}const Jt=(0,G.V)("metricsModule");var Wt=r(3016),Kt=r.n(Wt);const Qt=["message","httpStatus"];class Zt extends Error{constructor(e){let{message:t="Http Error",httpStatus:r}=e,n=(0,ge.Z)(e,Qt);super(t),this.name=Zt.errorName,this.httpStatus=r,Object.assign(this,n)}}Zt.errorName="HttpError";const Xt=["message"];class er extends Zt{constructor(e={}){let{message:t="Not Found"}=e,r=(0,ge.Z)(e,Xt);super({message:t,httpStatus:404}),this.name=er.errorName,Object.assign(this,r)}}er.errorName="NotFoundError";const tr=["message","nextUrl","httpStatus"];class rr extends Zt{constructor(e){let{message:t="Redirect Found",nextUrl:r,httpStatus:n=307}=e,o=(0,ge.Z)(e,tr);super({message:t,httpStatus:n}),this.name=rr.errorName,this.nextUrl=r,this.httpStatus=n,Object.assign(this,o)}}rr.errorName="RedirectFoundError";const nr=e=>e.name===rr.errorName;var or=r(487);const sr=[.01,.025,.05,.1,.25,.5,1,2.5,5,10,20,40,60],ir={init:[c.Bi.init,c.Bi.listen],close:[c.Bi.close],customer:[c.Bi.customerStart,c.Bi.resolveUserDeps,c.Bi.resolvePageDeps,c.Bi.generatePage,c.Bi.clear],spa:[c.Bi.resolveUserDeps,c.Bi.resolvePageDeps,c.Bi.spaTransition],afterSpa:[c.Bi.afterSpaTransition]},ar={server:ir,client:ir};let cr=class{};cr=(0,ve.__decorate)([(0,o.Yl)({providers:[{provide:c.S9,scope:a.s.SINGLETON,useClass:class{constructor({lines:e,rootDi:t,logger:r,metrics:n}){this.lines=e,this.rootDi=t,this.log=r("command:command-line-runner"),this.metrics=n}run(e,t,r,n){const o=null!=n?n:((e,t,r,n)=>{let o=r;return"customer"===t&&"client"!==e&&(o=(0,or.H)(o)),n&&n.forEach((e=>o.register(e))),o})(e,t,this.rootDi,r);return this.log.debug({event:"command-run",type:e,status:t}),this.lines[e][t].reduce(((e,t)=>e.then((()=>{const e=this.createDurationMetric();return Promise.resolve().then((()=>this.createLineChain(o,t))).finally((()=>e({line:t.toString()})))}))),Promise.resolve()).then((()=>o))}createLineChain(e,t){let r;try{if(r=e.get({token:t,optional:!0}),null===r)return Promise.resolve()}catch(t){return this.log.error(t),this.throwError(t,e)}return Array.isArray(r)?Promise.all(r.map((r=>this.instanceExecute(r,t,e)))):this.instanceExecute(r,t,e)}instanceExecute(e,t,r){if(!(e instanceof Function)){const r=new TypeError(`Expected function in line processing "commandLineListTokens.${t.toString()}", received "${e}".\n      Check that all commandLineListTokens subscribers return functions`);return void this.log.error({event:"line-error",error:r,line:t.toString()})}const{name:n=""}=e;return this.log.debug({event:"line-run",line:t.toString(),command:n}),Promise.resolve().then((()=>e())).catch((e=>{this.log[(e=>!!e.isSilent)(e)?"debug":"error"]({event:"line-error",error:e,line:t.toString(),command:n}),this.throwError(e,r)}))}createDurationMetric(){return this.metrics?(this.metricsInstance||(this.metricsInstance=this.metrics.histogram({name:"command_line_runner_execution_time",help:"Command line processing duration",labelNames:["line"],buckets:sr})),this.metricsInstance.startTimer()):Kt()}throwError(e,t){throw e.di=t,e}},deps:{lines:c.PR,rootDi:be.Z,logger:y.F,metrics:{token:Jt,optional:!0}}},{provide:c.PR,scope:a.s.SINGLETON,useValue:ar}]})],cr);const ur={logger:{debug:Kt(),info:Kt(),error:Kt()},resultTransform:e=>1===e.length?e[0]:e};class lr{constructor(e){this.subscribers=new Map;const t=Object.assign({},ur,e);this.logger=t.logger,this.resultTransform=t.resultTransform}subscribe(e,t){this.logger.debug("subscribe",e,t);let r=this.subscribers.get(e);return r?r.add(t):(r=new Set([t]),this.subscribers.set(e,r)),()=>r.delete(t)}publish(e,...t){this.logger.debug("publish",e,t);const r=this.subscribers.get(e);if(r&&r.size){const e=[];return r.forEach((r=>e.push(Promise.resolve(r(...t))))),Promise.all(e).then(this.resultTransform)}return Promise.resolve()}}let dr=class{};dr=(0,ve.__decorate)([(0,o.Yl)({providers:[{provide:Xe,scope:a.s.SINGLETON,useFactory:e=>()=>new lr({logger:e.logger("pubsub")}),deps:{logger:y.F}},{provide:et,scope:a.s.REQUEST,useFactory:({createPubsub:e})=>e(),deps:{createPubsub:Xe}},{provide:tt,scope:a.s.SINGLETON,useFactory:({createPubsub:e})=>e(),deps:{createPubsub:Xe}}]})],dr);const pr=(0,G.V)("initialAppState"),hr=[{provide:pr,useFactory:()=>JSON.parse(window.initialState||"{}"),scope:a.s.REQUEST},{provide:c.Bi.listen,useFactory:({commandLineRunner:e})=>function(){return e.run("client","customer")},deps:{commandLineRunner:c.S9},multi:!0}],fr=(0,Te.y)("action state execution in server"),gr=(0,_e.L)("actionTramvai",{serverState:{}}).on(fr,((e,t)=>Object.assign({},e,{serverState:t})));var vr=r(767),mr=r.n(vr),yr=r(7069),br=r(6322),Sr=r.n(br);const _r="global";class Er{constructor(e,t,r,n,o){this.globalConditionals=e,this.payload=t,this.parameters=r,this.executionState=n,this.type=o,this.status=!0,this.forbiddenMarker=!1,this.key=null,o===_r&&(this.status="success"!==n.status),this.conditions=r.conditions}check(){return this.globalConditionals.forEach((e=>{this.key=e.key,e.fn(this)})),this.getStatus()}setState(e){this.executionState.state[this.key]=e}getState(){return this.executionState.state[this.key]}forbid(){this.executionState.status="forbidden",this.forbiddenMarker=!0}allow(){this.status=!0}getStatus(){return!this.forbiddenMarker&&this.status}}var wr=r(8219),Or=r.n(wr),kr=r(5972),Tr=r.n(kr);const Cr="@@global",Rr={},Mr={key:"pageServer",fn:e=>{e.conditions.pageServer&&e.type===_r&&e.forbid()}};let Pr=class{};Pr=(0,ve.__decorate)([(0,o.Yl)({providers:[{provide:k.Ym,multi:!0,useValue:gr},{provide:Ze.R9,scope:a.s.SINGLETON,useClass:class{constructor({actionsList:e}){this.actions=new Map([[Cr,Tt()(e)]])}add(e,t){const r=Tr()(t);this.actions.set(e,Ge()(this.actions.has(e)?[...this.actions.get(e),...r]:r))}get(e,t){return Ge()([...this.actions.get(e)||[],...t||[]])}getGlobal(){return this.actions.get(Cr)}remove(e,t){if(!t)return void this.actions.delete(e);const r=Tr()(t);this.actions.has(e)&&this.actions.set(e,Or()(this.actions.get(e),r))}},deps:{actionsList:c.I7}},(0,i.J)({provide:Ze.R$,scope:a.s.REQUEST,useClass:class{constructor({actionConditionals:e,store:t,context:r,di:n,transformAction:o}){this.actionConditionals=Tt()(null!=e?e:[]),this.context=r,this.di=n,this.execution=new Map,this.transformAction=o||mr();const s=t.getState(gr);s&&s.serverState&&Sr()(((e,t)=>{this.execution.set(t,e)}),s.serverState)}run(e,t,r="local"){this.transformAction(e);const n=(e=>e[yr.d])(e),o=this.getExecutionState(n);if(!this.canExecuteAction(t,n,o,r))return Promise.resolve();const s=n.deps?this.di.getOfDeps(n.deps):{};return o.status="pending",Promise.resolve().then((()=>e(this.context,t,s))).then((e=>(o.status="success",e))).catch((e=>{throw o.status="failed",e}))}getExecutionState(e){let t=this.execution.get(e.name);return t||(t={status:"pending",state:{}},this.execution.set(e.name,t)),t}canExecuteAction(e,t,r,n){return new Er(this.actionConditionals,e,t,r,n).check()}},deps:{actionConditionals:{token:Ze.xW,optional:!0},context:Oe,store:k.kR,di:be.Z,transformAction:{token:"actionTransformAction",optional:!0}}}),{provide:Ze.FM,scope:a.s.REQUEST,useClass:class{constructor({actionExecution:e,logger:t}){this.actionExecution=e,this.log=t("action:action-page-runner")}runActions(e,t=(()=>!1)){return Promise.all(e.map((e=>Promise.resolve().then((()=>this.actionExecution.run(e,Rr,_r))).catch((r=>{const n=e[yr.d];if(this.log.error({error:r,event:"action-execution-error",message:`${n.name} execution error`}),t(r))throw r})))))}},deps:{actionExecution:Ze.R$,store:k.kR,limitTime:"limitActionGlobalTimeRun",logger:y.F}},{provide:"limitActionGlobalTimeRun",useValue:500},{provide:Ze.xW,multi:!0,useValue:[{key:"alwaysCondition",fn:e=>{e.conditions.always&&e.allow()}},{key:"onlyServer",fn:e=>{e.conditions.onlyServer&&e.forbid()}},{key:"onlyBrowser",fn:e=>{e.conditions.onlyBrowser}},Mr,{key:"pageBrowser",fn:e=>{e.conditions.pageBrowser&&e.type}}]}]})],Pr);class xr{constructor(e){(e=e||{}).stores=e.stores||[],this.stores={},this.handlers={},e.stores.forEach((e=>{this.registerStore(e)}))}createContext(e,t,r){return new zt(this,e,t,r)}hasStore(e){return!!this.stores[e.storeName]}registerStore(e){const{storeName:t}=e;this.stores[t]&&this.stores[t]===e||(this.stores[t]=e,e.handlers&&Object.keys(e.handlers).forEach((r=>{const n=e.handlers[r];this.registerHandler(r,t,n)})))}unregisterStore(e){const{storeName:t}=e;this.stores[t]&&(delete this.stores[t],e.handlers&&Object.keys(e.handlers).forEach((r=>{const n=e.handlers[r];this.unregisterHandler(r,t,n)})))}getStoreName(e){return"string"==typeof e?e:e.storeName}registerHandler(e,t,r){this.handlers[e]=this.handlers[e]||[],this.handlers[e].push({name:t,handler:r})}unregisterHandler(e,t,r){Array.isArray(this.handlers[e])&&(this.handlers[e]=this.handlers[e].filter((e=>!(e.name===t&&e.handler===r))))}}let Ir=class{};Ir=(0,ve.__decorate)([(0,o.Yl)({providers:[{provide:k.qb,scope:a.s.SINGLETON,useFactory:({stores:e})=>{return t={stores:e&&Tt()(e)},new xr(t);var t},deps:{stores:{token:k.Ym,optional:!0}}},{provide:k.jm,scope:a.s.REQUEST,useFactory:({dispatcher:e,initialState:t,middlewares:r})=>e.createContext({},t,[()=>e=>t=>e(t),...Tt()(r||[])]),deps:{dispatcher:k.qb,middlewares:{token:k.PU,optional:!0},initialState:{token:pr,optional:!0}}},{provide:k.kR,scope:a.s.REQUEST,useFactory:({dispatcherContext:e})=>({getState:t=>e.getState(t),dispatch:t=>e.dispatch(t),subscribe:(t,r)=>e.subscribe(t,r)}),deps:{dispatcherContext:k.jm}}]})],Ir);var Nr=r(7818),jr=r(9979),Ar=r(4772),Dr=r.n(Ar);const Lr=(e,t={max:100})=>new(Dr())(t),Ur=(0,G.V)("_cachesList");let Fr=class{};Fr=(0,ve.__decorate)([(0,o.Yl)({providers:[{provide:Ur,scope:a.s.SINGLETON,useValue:[]},{provide:jr.xC,useFactory:({caches:e,isChildDi:t})=>t?Lr:(t,...r)=>{const n=Lr(t,...r);return e.push(n),n},deps:{caches:Ur,isChildDi:{token:Nr.w,optional:!0}}},{provide:jr.oK,scope:a.s.SINGLETON,useFactory:({caches:e,cachesClear:t})=>r=>(e.forEach((e=>e.clear())),t?Promise.all(t.map((e=>e(r)))):Promise.resolve()),deps:{caches:Ur,cachesClear:{token:jr.TZ,optional:!0}}}]})],Fr);const Vr=["additionalBundleList"];let Hr=class{};Hr=(0,ve.__decorate)([(0,o.Yl)({imports:[cr,we,dr,Ye,He,Pr,Ir,It,Vt,Fr],providers:[(0,i.J)({provide:Je,scope:a.s.SINGLETON,useClass:class{constructor(){this.hooks=Object.create(null)}registerHooks(e,t){this.hooks[e]||(this.hooks[e]=[]),this.hooks[e]=Ge()(this.hooks[e].concat(t))}runHooks(e,t,r,n){const o=this.hooks[e];if(!o)return r;let s=r;for(let e=0;e<o.length;e++)s=o[e](t,s,n);return s}runAsyncHooks(e,t,r,n){const o=this.hooks[e];if(!o)return r;for(let e=0;e<o.length;e++){const s=o[e];setTimeout((()=>{s(t,r,n)}))}return r}runPromiseHooks(e,t,r){const n=this.hooks[e];return e=>{if(!n)return Promise.resolve(e);let o=0;return Promise.resolve(e).then((function e(s){const i=n[o++];return i?Promise.resolve(i(t,s,r)).then(e):s}))}}}}),(0,i.J)({provide:We,scope:a.s.SINGLETON,useClass:class{constructor({componentList:e}={}){this.components={[Ct]:Object.assign({},...Tt()(null!=e?e:[]))}}add(e,t,r=Ct){const n=this.components[r]||{};n[e]=t,this.components[r]=n}get(e,t=Ct){return(this.components[t]||{})[e]||this.components[Ct][e]}getComponentParam(e,t,r,n){return Ot()([e],t,this.get(r,n))}},deps:{componentList:{token:"componentDefaultList",optional:!0}}}),(0,i.J)({provide:Ke,scope:a.s.SINGLETON,useFactory:e=>{let{additionalBundleList:t}=e,r=(0,ge.Z)(e,Vr);var n;return null===(n=t)||void 0===n||n.forEach((e=>{ye()(((e,t)=>{t in r.bundleList||(r.bundleList[t]=()=>Promise.resolve({default:e}))}),e)})),new Et(r)},deps:{bundleList:c.om,additionalBundleList:{token:Qe,optional:!0},componentRegistry:We,actionRegistry:Ze.R9,dispatcher:k.qb,logger:y.F}}),(0,i.J)({provide:Oe,scope:a.s.REQUEST,useFactory:function({di:e,dispatcherContext:t,pubsub:r,store:n}){return new Gt({di:e,dispatcherContext:t,pubsub:r,store:n})},deps:{di:be.Z,pubsub:et,dispatcherContext:k.jm,store:k.kR}}),...hr]})],Hr);var qr=r(9463),Br=r(7384),$r=r.n(Br),Yr=r(3970),zr=r.n(Yr);const Gr=/\*/,Jr=/<history-fallback>/,Wr=/([^(?]+)(?:\((.+)\))?(\?)?/,Kr=(e,t=!1)=>{const r=e.endsWith("/");return t?r||(e=>/\/.+\.[^/]+$/.test(e))(e)?e:`${e}/`:e.length>1&&r?e.slice(0,-1):e},Qr=e=>!e.host||e.host===window.location.host,Zr=e=>"string"==typeof e?{url:e}:e,Xr=(e,t)=>(e.add(t),()=>{e.delete(t)}),en=(e,t)=>{const r=(e=>e.split("/").slice(e.startsWith("/")?1:0,e.endsWith("/")?-1:1/0))(e),n=zr()((r=>{var n;if((e=>Jr.test(e))(r)||(e=>Gr.test(e))(r))throw new Error(`Pathname should be only a string with dynamic parameters, not a special string, got ${e}`);if((e=>e.includes(":"))(r)){const[e="",o="",s=""]=r.split(":"),i=Wr.exec(o);if(!i)throw new Error('parameters should satisfy pattern "prefix:paramName(regexp)\\?:postfix"');const[,a,c,u]=i,l=null===(n=t[a])||void 0===n?void 0:n.toString();if(u&&!l)return"";if(!l)throw new Error(`value for parameter for ${a} should be defined in params`);if(c&&!new RegExp(c).test(l))throw new Error(`passed parameter for ${a} should satisfy regxep: ${c}, got: ${l}`);return e+l+s||r}return r}),r).join("/");return Kr(`/${n}`,e.endsWith("/"))};let tn={trace:Kt(),debug:Kt(),info:Kt(),warn:Kt(),error:Kt()};class rn{constructor({trailingSlash:e,mergeSlashes:t,beforeResolve:r=[],beforeNavigate:n=[],afterNavigate:o=[],beforeUpdateCurrent:s=[],afterUpdateCurrent:i=[],guards:a=[],onChange:c=[],onRedirect:u,onNotFound:l,onBlock:d}){this.started=!1,this.trailingSlash=!1,this.strictTrailingSlash=!0,this.mergeSlashes=!1,this.trailingSlash=null!=e&&e,this.strictTrailingSlash=void 0===e,this.mergeSlashes=null!=t&&t,this.hooks=new Map([["beforeResolve",new Set(r)],["beforeNavigate",new Set(n)],["afterNavigate",new Set(o)],["beforeUpdateCurrent",new Set(s)],["afterUpdateCurrent",new Set(i)]]),this.guards=new Set(a),this.syncHooks=new Map([["change",new Set(c)]]),this.onRedirect=u,this.onNotFound=l,this.onBlock=d}async start(){tn.debug({event:"start"}),this.started=!0}getCurrentRoute(){var e,t,r;return null!==(t=null===(e=this.currentNavigation)||void 0===e?void 0:e.to)&&void 0!==t?t:null===(r=this.lastNavigation)||void 0===r?void 0:r.to}getCurrentUrl(){var e,t,r;return null!==(t=null===(e=this.currentNavigation)||void 0===e?void 0:e.url)&&void 0!==t?t:null===(r=this.lastNavigation)||void 0===r?void 0:r.url}getLastRoute(){var e;return null===(e=this.lastNavigation)||void 0===e?void 0:e.to}getLastUrl(){var e;return null===(e=this.lastNavigation)||void 0===e?void 0:e.url}commitNavigation(e){tn.debug({event:"commit-navigation",navigation:e}),e.history||this.history.save(e),this.lastNavigation=e,this.currentNavigation=null,this.runSyncHooks("change",e)}async updateCurrentRoute(e){return this.internalUpdateCurrentRoute(e,{})}async internalUpdateCurrentRoute(e,{history:t}){var r;const n=null!==(r=this.currentNavigation)&&void 0!==r?r:this.lastNavigation;if(!n)throw new Error("updateCurrentRoute should only be called after navigate to some route");const{replace:o,params:s,navigateState:i}=e,{to:a,url:c}=n,u={type:"updateCurrentRoute",from:a,to:this.resolveRoute({params:s,navigateState:i},{wildcard:!0}),url:this.resolveUrl(e),fromUrl:c,replace:o,history:t,navigateState:i,code:e.code};tn.debug({event:"update-current-route",updateRouteOptions:e,navigation:u}),await this.run(u)}async runUpdateCurrentRoute(e){await this.runHooks("beforeUpdateCurrent",e),this.commitNavigation(e),await this.runHooks("afterUpdateCurrent",e)}async navigate(e){return this.internalNavigate(Zr(e),{})}async internalNavigate(e,{history:t,redirect:r}){var n;const{url:o,replace:s,params:i,navigateState:a,code:c}=e,u=r?this.lastNavigation:null!==(n=this.currentNavigation)&&void 0!==n?n:this.lastNavigation;if(!o&&!u)throw new Error("Navigate url should be specified and cannot be omitted for first navigation");const l=this.resolveUrl(e),{to:d,url:p}=null!=u?u:{};let h={type:"navigate",from:d,url:l,fromUrl:p,replace:s,history:t,navigateState:a,code:c,redirect:r,redirectFrom:r?this.currentNavigation.to:void 0};await this.runHooks("beforeResolve",h);const f=this.resolveRoute({url:l,params:i,navigateState:a},{wildcard:!0});if(f&&(h=Object.assign({},h,{to:f})),tn.debug({event:"navigation",navigation:h}),!h.to)return this.notfound(h);await this.run(h)}async runNavigate(e){if(e.to.redirect)return this.redirect(e,Zr(e.to.redirect));await this.runGuards(e),await this.runHooks("beforeNavigate",e),this.commitNavigation(e),await this.runHooks("afterNavigate",e)}async run(e){this.currentNavigation=e,"navigate"===e.type&&await this.runNavigate(e),"updateCurrentRoute"===e.type&&await this.runUpdateCurrentRoute(e)}resolve(e,t){const r="string"==typeof e?{url:e}:e;return this.resolveRoute(Object.assign({},r,{url:(0,qr.Qc)(r.url)}),t)}back(e){return this.go(-1,e)}forward(){return this.go(1)}async go(e,t){return tn.debug({event:"history.go",to:e}),this.history.go(e,t)}isNavigating(){return!!this.currentNavigation}async dehydrate(){throw new Error("Not implemented")}async rehydrate(e){throw new Error("Not implemented")}addRoute(e){var t;null===(t=this.tree)||void 0===t||t.addRoute(e)}async redirect(e,t){var r;return tn.debug({event:"redirect",navigation:e,target:t}),null===(r=this.onRedirect)||void 0===r?void 0:r.call(this,Object.assign({},e,{from:e.to,fromUrl:e.url,to:null,url:this.resolveUrl(t)}))}async notfound(e){var t;return tn.debug({event:"not-found",navigation:e}),null===(t=this.onNotFound)||void 0===t?void 0:t.call(this,e)}async block(e){if(tn.debug({event:"blocked",navigation:e}),this.currentNavigation=null,this.onBlock)return this.onBlock(e);throw new Error("Navigation blocked")}normalizePathname(e){let t=e;return this.mergeSlashes&&(t=(e=>{const[t,...r]=e.split("?");return[t.replace(/\/+/g,"/").replace(/^(\w+):\//,"$1://"),...r].join("?")})(t)),this.strictTrailingSlash||(t=Kr(t,this.trailingSlash)),t}resolveUrl({url:e,query:t={},params:r,preserveQuery:n,hash:o}){var s;const i=this.getCurrentRoute(),a=this.getCurrentUrl(),c=e?(0,qr.Hz)(null!==(s=null==a?void 0:a.href)&&void 0!==s?s:"",e):(0,qr.F_)(a.href);let{pathname:u}=c;return r&&(e?u=en(c.pathname,r):i&&(u=en(i.path,Object.assign({},i.params,r)))),Qr(c)&&(u=this.normalizePathname(u)),(0,qr.n2)((0,qr.co)(c,{pathname:u,search:e?c.search:"",query:Object.assign({},n?this.getCurrentUrl().query:{},t),hash:null!=o?o:c.hash}))}resolveRoute({url:e,params:t,navigateState:r},{wildcard:n}={}){var o,s;let i=e?null===(o=this.tree)||void 0===o?void 0:o.getRoute(e.pathname):this.getCurrentRoute();if(n&&!i&&e&&(i=null===(s=this.tree)||void 0===s?void 0:s.getWildcard(e.pathname)),i)return t||r!==i.navigateState?Object.assign({},i,{params:Object.assign({},i.params,t),navigateState:r}):i}async runGuards(e){if(tn.debug({event:"guards.run",navigation:e}),!this.guards)return void tn.debug({event:"guards.empty",navigation:e});const t=await Promise.all(Array.from(this.guards).map((t=>Promise.resolve(t(e)).catch((e=>{tn.warn({event:"guard.error",error:e})})))));tn.debug({event:"guards.done",navigation:e,results:t});for(const r of t){if(!1===r)return this.block(e);if(d()(r)||$r()(r))return this.redirect(e,Zr(r))}}registerGuard(e){return Xr(this.guards,e)}runSyncHooks(e,t){tn.debug({event:"sync-hooks.run",hookName:e,navigation:t});const r=this.syncHooks.get(e);if(r){for(const e of r)try{e(t)}catch(e){tn.warn({event:"sync-hooks.error",error:e})}tn.debug({event:"sync-hooks.done",hookName:e,navigation:t})}else tn.debug({event:"sync-hooks.empty",hookName:e,navigation:t})}registerSyncHook(e,t){return Xr(this.syncHooks.get(e),t)}async runHooks(e,t){tn.debug({event:"hooks.run",hookName:e,navigation:t});const r=this.hooks.get(e);r?(await Promise.all(Array.from(r).map((r=>Promise.resolve(r(t)).catch((t=>{if(tn.warn({event:"hook.error",error:t}),"beforeResolve"===e)throw t}))))),tn.debug({event:"hooks.done",hookName:e,navigation:t})):tn.debug({event:"hooks.empty",hookName:e,navigation:t})}registerHook(e,t){return Xr(this.hooks.get(e),t)}}class nn{init(e){}listen(e){this.listener=e}setTree(e){this.tree=e}}const on=window.history&&window.history.pushState,sn=e=>e&&"string"==typeof e.key,an=(e,t)=>{const r=(e=>{const{to:t}=e;if(t)return`${t.name}_${t.path}`})(e);let{type:n}=e;return e.replace&&t&&(n=t.type===n?n:"navigate"),{key:r,type:n,navigateState:e.navigateState}};class cn extends nn{constructor(){super(),this.currentIndex=0,this.historyWrapper=(({onNavigate:e})=>{if(!on){const e=(e,t,r)=>{window.location.href=r};return window.history.pushState=e,window.history.replaceState=e,{navigate:({path:t})=>e({},"",t),history:()=>{throw new Error("Method not implemented")},init:Kt(),subscribe:Kt()}}let t=window.history;"__originalHistory"in window.history?t=window.history.__originalHistory:window.history.__originalHistory={pushState:t.pushState.bind(window.history),replaceState:t.replaceState.bind(window.history),go:t.go.bind(window.history)};const r=t.pushState.bind(window.history),n=t.replaceState.bind(window.history),o=t.go.bind(window.history),s=e=>{o(e)},i=(t=!1)=>(r,n,o)=>{e({url:o,replace:t,navigateState:r})};return window.history.pushState=i(!1),window.history.replaceState=i(!0),window.history.go=s,window.history.back=()=>s(-1),window.history.forward=()=>s(1),{navigate:({path:e,replace:t,state:o})=>{t?n(o,"",e):r(o,"",e)},history:s,init:e=>{n(e,"")},subscribe:e=>{window.addEventListener("popstate",(({state:t})=>{e({path:window.location.pathname+window.location.search+window.location.hash,state:t})}))}}})({onNavigate:({url:e,replace:t,navigateState:r})=>{this.listener({url:e,replace:t,navigateState:r})}})}init(e){var t;this.currentState=sn(null===(t=window.history)||void 0===t?void 0:t.state)?window.history.state:an(e),this.historyWrapper.init(this.currentState),this.historyWrapper.subscribe((async({path:e,state:t})=>{var r,n;try{let n,o;if(sn(t)){const{key:e,type:r}=this.currentState,{key:s,type:i}=t;this.currentState=t,o=t.navigateState,n=s!==e||"updateCurrentRoute"!==i&&"updateCurrentRoute"!==r?"navigate":"updateCurrentRoute"}else this.currentIndex=0;await this.listener({type:n,history:!0,url:e,navigateState:o}),null===(r=this.goPromiseResolve)||void 0===r||r.call(this)}catch(e){null===(n=this.goPromiseReject)||void 0===n||n.call(this,e)}}))}save(e){const{replace:t,url:r}=e;t||this.currentIndex++,this.currentState=an(e,this.currentState),this.historyWrapper.navigate({path:r.path,replace:t,state:this.currentState})}go(e,t){var r;if(this.currentIndex+e<0){if(null==t?void 0:t.historyFallback)return this.listener({url:t.historyFallback,type:"navigate",history:!1});const e=null===(r=this.tree)||void 0===r?void 0:r.getHistoryFallback(window.location.pathname);if(e)return this.listener({url:e.actualPath,type:"navigate",history:!1})}const n=new Promise(((e,t)=>{this.goPromiseResolve=e,this.goPromiseReject=t}));return this.historyWrapper.history(e),n}}class un extends rn{constructor(e){super(e),this.history=new cn,this.history.listen((async({type:e,url:t,navigateState:r,replace:n,history:o})=>{var s;const i=this.getCurrentUrl(),{pathname:a,query:c}=this.resolveUrl({url:t}),u=i.pathname===a;if("updateCurrentRoute"===e||!e&&u){const e=null===(s=this.tree)||void 0===s?void 0:s.getRoute(a);await this.internalUpdateCurrentRoute({params:null==e?void 0:e.params,query:c,replace:n,navigateState:r},{history:o})}else await this.internalNavigate({url:t,replace:n,navigateState:r},{history:o})}))}async rehydrate(e){tn.debug({event:"rehydrate",navigation:e});const t=(0,qr.Qc)(window.location.href);this.currentNavigation=Object.assign({},e,{type:"navigate",url:t}),this.lastNavigation=this.currentNavigation,await this.runGuards(this.currentNavigation),this.history.init(this.currentNavigation),this.currentNavigation=null,e.to&&this.addRoute({name:e.to.name,path:e.to.path,config:e.to.config,alias:t.pathname})}resolveRoute(...e){const{url:t}=e[0];if(!t||Qr(t))return super.resolveRoute(...e)}async notfound(e){var t,r;await super.notfound(e);const n=null!==(r=null===(t=e.fromUrl)||void 0===t?void 0:t.href)&&void 0!==r?r:window.location.href,o=e.url.href;return(e.from&&!e.to||n!==o)&&(e.replace?window.location.replace(o):window.location.assign(o)),new Promise((()=>{}))}async block(e){return this.notfound(e)}async redirect(e,t){return await super.redirect(e,t),this.internalNavigate(Object.assign({},t,{replace:t.replace||e.replace}),{redirect:!0})}}const ln=e=>e.href.replace(/#.*$/,""),dn=(0,G.V)("RENDER_SLOTS",{multi:!0}),pn=(0,G.V)("RENDERER_CALLBACK",{multi:!0}),hn=(0,G.V)("CUSTOM_RENDER"),fn=(0,G.V)("resourcesRegistry"),gn=(0,G.V)("RENDER_MODE"),vn=(0,G.V)("useReactStrictMode"),mn=(0,G.V)("EXTEND_RENDER",{multi:!0}),yn=(0,G.V)("defaultLayoutComponent"),bn=(0,G.V)("defaultHeaderComponent"),Sn=(0,G.V)("defaultFooterComponent"),_n=(0,G.V)("layoutOptions",{multi:!0}),En=(0,G.V)("resourceInlineThreshold"),wn=(0,G.V)("tramvaiRenderMode"),On=(0,Te.y)("SET_CURRENT_ROUTE"),kn=(0,Te.y)("SET_URL_ON_REHYDRATE"),Tn=(0,_e.L)("router",{currentRoute:null,previousRoute:null,currentUrl:null,previousUrl:null}).on(On,((e,{to:t,from:r,url:n,fromUrl:o,replace:s})=>({currentRoute:t,previousRoute:s?e.previousRoute:r,currentUrl:n,previousUrl:s?e.previousUrl:o}))).on(kn,((e,t)=>Object.assign({},e,{currentUrl:t}))),Cn=(0,G.V)("router routerClassToken"),Rn=(0,G.V)("router additionalParameters"),Mn=(0,G.V)("router onChangeHooks",{multi:!0}),Pn=(0,G.V)("router beforeResolveHooks",{multi:!0}),xn=(0,G.V)("router beforeNavigateHooks",{multi:!0}),In=(0,G.V)("router afterNavigateHooks",{multi:!0}),Nn=(0,G.V)("router beforeUpdateCurrentHooks",{multi:!0}),jn=(0,G.V)("router afterUpdateCurrentHooks",{multi:!0}),An=(0,G.V)("router finalRouteTransform"),Dn=[{provide:Q.sU,multi:!0,useFactory:({bundleManager:e,logger:t,actionRegistry:r,responseManager:n,dispatcherContext:o})=>{const s=t("route:load-bundles");return async({to:t})=>{var r;s.debug({event:"load-bundle",route:t});const{bundle:i,pageComponent:a}=t.config;if(!e.has(i,a))return s.info({event:"load-bundle-not-found",bundle:i,pageComponent:a}),n.setStatus(404),!1;try{const{components:t,reducers:n}=await e.get(i,a),s=t[a];null===(r=null==s?void 0:s.reducers)||void 0===r||r.forEach((e=>o.getStore(e))),null==n||n.forEach((e=>o.getStore(e)))}catch(e){return s.error({event:"load-bundle-failed",error:e}),!1}}},deps:{logger:y.F,bundleManager:Ke,actionRegistry:Ze.R9,responseManager:jt,dispatcherContext:k.jm}},{provide:Q.sU,multi:!0,useFactory:({responseManager:e,logger:t})=>{const r=t("route:guard-check-error");return async()=>{if(e.getStatus()>=500)return r.error({event:"status-is-error",status:e.getStatus()}),!1}},deps:{logger:y.F,responseManager:jt}}],Ln=[{provide:Mn,multi:!0,useFactory:({context:e})=>t=>{e.dispatch(On(t))},deps:{context:Oe}}];var Un=r(5759),Fn=r.n(Un),Vn=r(130),Hn=r(4073);const qn=(0,nt.createContext)(null),Bn=(0,nt.createContext)(null),$n=(0,nt.createContext)(null),Yn=({router:e,serverState:t,children:r})=>{const n=(0,Hn.useSyncExternalStore)((t=>e.registerSyncHook("change",t)),(()=>e.getLastRoute()),t?()=>t.currentRoute:()=>e.getLastRoute()),o=(0,Hn.useSyncExternalStore)((t=>e.registerSyncHook("change",t)),(()=>e.getLastUrl()),t?()=>t.currentUrl:()=>e.getLastUrl());return(0,Vn.jsx)(qn.Provider,Object.assign({value:e},{children:(0,Vn.jsx)(Bn.Provider,Object.assign({value:n},{children:(0,Vn.jsx)($n.Provider,Object.assign({value:o},{children:r}),void 0)}),void 0)}),void 0)};Yn.displayName="Provider";const zn=[...Dn,...Ln,...[{provide:An,useFactory:({transformers:e})=>e&&0!==e.length?qt()(...Tt()(e)):mr(),deps:{transformers:{token:Q.S3,optional:!0}}},{provide:Q.S3,multi:!0,useValue:e=>{const t=Object.assign({bundle:"mainDefault",pageComponent:"pageDefault"},e.config);return Object.assign({},e,{config:t})}},{provide:Q.S3,multi:!0,useValue:e=>Object.assign({},e,{path:Fn()(/\/?$/,"/",e.path)})},{provide:mn,multi:!0,useFactory:({router:e})=>{const t={currentRoute:e.getCurrentRoute(),currentUrl:e.getCurrentUrl()};return r=>(0,Vn.jsx)(Yn,Object.assign({router:e,serverState:t},{children:r}),void 0)},deps:{router:Q.l1}}],...[!1].filter(Boolean),{provide:Q.l1,useFactory:({RouterClass:e,routes:t,routeTransform:r,routeResolve:n,additionalParameters:o})=>{const s=new e(Object.assign({},o,{trailingSlash:!0,mergeSlashes:!0,routes:Tt()(null!=t?t:[]).map(r)}));return n&&s.registerHook("beforeResolve",(async e=>{if(!s.resolve(e.url.href)){const t=await n(e);t&&s.addRoute(r(t))}})),s},deps:{RouterClass:Cn,additionalParameters:{token:Rn,optional:!0},routes:{token:Q.Dk,optional:!0},routeTransform:An,routeResolve:{token:Q.TL,optional:!0}}},{provide:c.Bi.customerStart,multi:!0,useFactory:({router:e,guards:t,onChange:r,beforeResolve:n,beforeNavigate:o,afterNavigate:s,beforeUpdateCurrent:i,afterUpdateCurrent:a})=>function(){Tt()(null!=t?t:[]).forEach((t=>e.registerGuard(t))),Tt()(null!=r?r:[]).forEach((t=>e.registerSyncHook("change",t))),Tt()(null!=n?n:[]).forEach((t=>e.registerHook("beforeResolve",t))),Tt()(null!=o?o:[]).forEach((t=>e.registerHook("beforeNavigate",t))),Tt()(null!=s?s:[]).forEach((t=>e.registerHook("afterNavigate",t))),Tt()(null!=i?i:[]).forEach((t=>e.registerHook("beforeUpdateCurrent",t))),Tt()(null!=a?a:[]).forEach((t=>e.registerHook("afterUpdateCurrent",t)))},deps:{router:Q.l1,guards:{token:Q.sU,optional:!0},onChange:{token:Mn,optional:!0},beforeResolve:{token:Pn,optional:!0},beforeNavigate:{token:xn,optional:!0},afterNavigate:{token:In,optional:!0},beforeUpdateCurrent:{token:Nn,optional:!0},afterUpdateCurrent:{token:jn,optional:!0}}},{provide:c.Bi.init,multi:!0,useFactory:({logger:e})=>function(){var t;t=e("route:router"),tn=t},deps:{logger:y.F}},{provide:Q.$d,useValue:"after"},(0,i.J)({provide:Q.Y9,useClass:class{constructor({router:e,componentRegistry:t}){this.router=e,this.componentRegistry=t}getCurrentRoute(){return this.router.getCurrentRoute()}getCurrentUrl(){return this.router.getCurrentUrl()}getConfig(){var e,t;return null!==(t=null===(e=this.getCurrentRoute())||void 0===e?void 0:e.config)&&void 0!==t?t:{}}getContent(){var e;return null!==(e=this.getConfig().content)&&void 0!==e?e:{}}getMeta(){var e;return null!==(e=this.getConfig().meta)&&void 0!==e?e:{}}navigate(e){return this.router.navigate(e)}updateCurrentRoute(e){return this.router.updateCurrentRoute(e)}back(e){return this.router.back(e)}forward(){return this.router.forward()}go(e,t){return this.router.go(e,t)}addComponent(e,t){const r=this.getComponentsGroupName();return this.componentRegistry.add(e,t,r)}getComponent(e){const t=this.getComponentsGroupName();return this.componentRegistry.get(e,t)}resolveComponentFromConfig(e){var t;const r=`${e}Component`,n=`${e}Default`,o=null!==(t=this.getConfig()[r])&&void 0!==t?t:n;return this.getComponent(o)||this.getComponent(n)}getComponentsGroupName(){const{bundle:e,pageComponent:t}=this.getConfig();return e}},deps:{router:Q.l1,componentRegistry:We}}),{provide:k.Ym,multi:!0,useValue:Tn}],Gn=e=>{if(e.name===er.errorName||nr(e))return!0},Jn=[...zn,(0,i.J)({provide:c.Bi.customerStart,multi:!0,useFactory:({router:e,store:t})=>async function(){const r=t.getState(Tn).currentRoute;return e.rehydrate({to:r})},deps:{router:Q.l1,store:k.kR}}),(0,i.J)({provide:c.Bi.clear,multi:!0,useFactory:({router:e,store:t})=>function(){return t.getState().router.currentUrl.href!==window.location.href&&t.dispatch(kn(e.getCurrentUrl())),e.start()},deps:{router:Q.l1,store:k.kR}}),(0,i.J)({provide:c.Bi.clear,multi:!0,useFactory:e=>{const t=e.store.getState(Tn).currentRoute;return"client"===e.renderMode&&(!t||t&&t.actualPath!==window.location.pathname)?Kt():(({store:e,router:t,actionRegistry:r,actionPageRunner:n})=>function(){const e=t.getCurrentRoute(),{config:{bundle:o,pageComponent:s}={}}=e;if(!o||!s)throw new Error(`bundle and pageComponent should be defined, but got ${e}`);const i=Ge()([...r.getGlobal()||[],...r.get(o)||[],...r.get(s)||[]]);return n.runActions(i,Gn).catch((e=>{if(nr(e))return t.navigate({url:e.nextUrl,replace:!0,code:e.httpStatus});throw e.error||e}))})(e)},deps:{store:k.kR,router:Q.l1,actionRegistry:Ze.R9,actionPageRunner:Ze.FM,renderMode:wn}}),(0,i.J)({provide:c.Bi.clear,multi:!0,useFactory:({store:e,router:t,renderMode:r})=>async function(){const n=e.getState(Tn).currentRoute;if("client"===r&&(!n||n&&n.actualPath!==window.location.pathname))return t.navigate({url:window.location.href,replace:!0})},deps:{store:k.kR,router:Q.l1,renderMode:wn}})];var Wn;const Kn=(0,o.Yl)({providers:[...Jn,{provide:Cn,useValue:class extends un{run(e){const{type:t,fromUrl:r,url:n}=e;return"updateCurrentRoute"===t||ln(n)===ln(r)?super.run(e):this.notfound(e)}async runHooks(){}}}]})(((Wn=class{}).forRoot=(Qn=Wn,(e,t={})=>({mainModule:Qn,providers:[{provide:Q.Dk,multi:!0,useValue:e},t.spaActionsMode&&{provide:Q.$d,useValue:t.spaActionsMode}].filter(Boolean)})),Wn));var Qn,Zn=r(6778),Xn=r(1680),eo=r.n(Xn),to=r(4773);const ro=({context:e,children:t,serverState:r})=>(0,Vn.jsx)(to.h.Provider,Object.assign({value:e},{children:(0,Vn.jsx)(to.N.Provider,Object.assign({value:r},{children:t}),void 0)}),void 0);var no=r(614);class oo extends nt.PureComponent{render(){const{LayoutComponent:e,PageComponent:t,HeaderComponent:r,FooterComponent:n}=this.props;return(0,Vn.jsx)(e,Object.assign({Header:r,Footer:n},{children:(0,Vn.jsx)(t,{},void 0)}),void 0)}}const so=({pageService:e})=>{const{config:t}=(0,nt.useContext)(Bn),{pageComponent:r}=t;let n=e.getComponent(r);n||(n=()=>{throw new Error(`Page component '${r}' not found`)});const o=e.resolveComponentFromConfig("layout"),s=e.resolveComponentFromConfig("header"),i=e.resolveComponentFromConfig("footer");return(0,Vn.jsx)(oo,{HeaderComponent:s,FooterComponent:i,LayoutComponent:o,PageComponent:n},void 0)};var io=r(7428);const ao=(0,G.V)("reactErrorBoundaryHandlers",{multi:!0}),co=(0,G.V)("errorBoundaryFallbackComponent"),uo=()=>(0,Vn.jsxs)("div",{children:[(0,Vn.jsx)("div",Object.assign({style:{textAlign:"center",marginBottom:11,paddingTop:26,fontSize:30,lineHeight:"36px",fontWeight:200}},{children:"An error occurred :("}),void 0),(0,Vn.jsxs)("div",Object.assign({style:{textAlign:"center",marginBottom:17,color:"#9299a2",fontSize:20,lineHeight:"24px"}},{children:["Try"," ",(0,Vn.jsx)("a",Object.assign({href:"",onClick:()=>window.location.reload()},{children:"reloading the page"}),void 0)]}),void 0)]},void 0);uo.displayName="FallbackError";class lo extends nt.Component{constructor(e){super(e),this.state={error:e.error||null,url:e.url}}static getDerivedStateFromProps(e,t){return e.url!==t.url?{error:e.error||null,url:e.url}:{error:e.error||t.error,url:t.url}}static getDerivedStateFromError(e){return{error:e}}componentDidCatch(e,t){const{errorHandlers:r}=this.props;r&&r.forEach((r=>{r(e,t)}))}render(){const{children:e,fallback:t,fallbackFromDi:r}=this.props,{url:n,error:o}=this.state;return o?t?(0,Vn.jsx)(t,{url:n,error:o},void 0):r||(0,Vn.jsx)(uo,{},void 0):e}}lo.displayName="UniversalErrorBoundary";var po=r(1693);const ho=(0,Te.y)("setPageError"),fo=(0,_e.L)("pageError",null).on(ho,((e,t)=>t&&function(e){return Object.assign({},e,{message:e.message,stack:e.stack})}(t))),go=e=>{const{children:t,pageService:r}=e,n=(0,nt.useContext)($n),o=function(e){const t=(0,po.x)(),r=(0,nt.useContext)(to.N),n=(0,nt.useRef)(e),o=(0,nt.useRef)(null);t.hasStore(e)||(t.registerStore(e),o.current=e.storeName);const s=(0,nt.useCallback)((r=>{const s=t.subscribe(e,r);return n.current=e,()=>{s(),o.current&&(t.unregisterStore(n.current),o.current=null)}}),[e,t]);return(0,Hn.useSyncExternalStore)(s,(()=>t.getState(e)),r?()=>r[e.storeName]:()=>t.getState(e))}(fo),s=(0,nt.useMemo)((()=>o&&function(e){const t=new Error(e.message);return Object.assign(t,e),t}(o)),[o]),i=(0,io.x)({token:ao,optional:!0}),a=(0,io.x)({token:co,optional:!0}),c=r.resolveComponentFromConfig("errorBoundary");return(0,Vn.jsx)(lo,Object.assign({url:n,error:s,errorHandlers:i,fallback:c,fallbackFromDi:a},{children:t}),void 0)};var vo=r(1234);let mo;try{mo=r(7179).a}catch(e){}const yo=({children:e,callback:t})=>((0,vo.L)(t,[]),e);const bo=e=>Array.isArray(e)?e:[e],So=(e,t)=>bo(null!=t?t:[]).reduce(((e,t)=>t(e)),e),_o=["children"],Eo=["header","footer","layout","content","page"],wo=({children:e})=>e,Oo=e=>{let{children:t}=e;return t((0,ge.Z)(e,_o))};let ko=class{};ko=(0,ve.__decorate)([(0,o.Yl)({providers:[{provide:yn,useFactory:({layoutOptions:e})=>{var t;return(({components:e={},wrappers:t={}}={})=>{const{header:r=Oo,footer:n=Oo,layout:o=wo,content:s=wo,page:i=wo}=e,a=(0,ge.Z)(e,Eo),c=So(o,t.layout),u=So(s,t.content),l=So(i,t.page),d=So(r,t.header),p=So(n,t.footer),h=Object.keys(a).map((e=>({name:e,Component:So(a[e],t[e])}))),f=({children:e,Header:t,Footer:r})=>(0,Vn.jsxs)(c,{children:[h.map((({Component:e,name:t})=>(0,Vn.jsx)(e,{},t))),(0,Vn.jsxs)(u,{children:[t?(0,Vn.jsx)(d,{children:e=>(0,Vn.jsx)(t,Object.assign({},e),void 0)},void 0):null,(0,Vn.jsx)(l,{children:e},void 0),r?(0,Vn.jsx)(p,{children:e=>(0,Vn.jsx)(r,Object.assign({},e),void 0)},void 0):null]},void 0)]},void 0);return f.displayName="Layout",f})((t=e,Tt()(null!=t?t:[]).reduce(((e,t)=>{const{components:r,wrappers:n}=e;return t.components&&Object.assign(r,t.components),t.wrappers&&Object.keys(t.wrappers).forEach((e=>{n[e]||(n[e]=[]),n[e].push(...bo(t.wrappers[e]))})),e}),{components:{},wrappers:{}})))},deps:{layoutOptions:{token:_n,optional:!0}}},{provide:"componentDefaultList",multi:!0,useFactory:e=>e,deps:{layoutDefault:yn,footerDefault:{token:Sn,optional:!0},headerDefault:{token:bn,optional:!0}}}]})],ko);const To=[(0,i.J)({provide:k.Ym,multi:!0,useValue:fo}),(0,i.J)({provide:wn,useValue:"ssr"})];var Co;let Ro=Co=class{static forRoot({mode:e,useStrictMode:t}){const r=[];return"string"!=typeof e&&"boolean"!=typeof t||r.push({provide:vn,useValue:null!=t?t:"strict"===e}),{mainModule:Co,providers:r}}};var Mo;Ro=Co=(0,ve.__decorate)([(0,o.Yl)({imports:[ko],providers:[...To,(0,i.J)({provide:c.Bi.customerStart,multi:!0,useFactory:({router:e,store:t})=>function(){e.registerHook("beforeResolve",(async()=>{t.getState(fo)&&t.dispatch(ho(null))}))},deps:{router:Q.l1,store:k.kR}}),(0,i.J)({provide:fn,useFactory:({logger:e})=>({getPageResources:()=>[],register:()=>{}}),deps:{logger:y.F}}),(0,i.J)({provide:c.Bi.generatePage,useFactory:e=>function(){return window.contextExternal=e.consumerContext,function({pageService:e,logger:t,consumerContext:n,customRender:o,extendRender:s,di:i,useStrictMode:a,rendererCallback:c}){const u=t("module-render");return new Promise(((t,l)=>{let d=function({pageService:e,di:t},r){const n=r.getState();return(0,Vn.jsx)(ro,Object.assign({context:r,serverState:n},{children:(0,Vn.jsx)(no.n.Provider,Object.assign({value:t},{children:(0,Vn.jsx)(go,Object.assign({pageService:e},{children:(0,Vn.jsx)(so,{pageService:e},void 0)}),void 0)}),void 0)}),void 0)}({pageService:e,di:i},n);if(s&&eo()((e=>{d=e(d)}),s),o)return o(d);a&&(d=(0,nt.createElement)(nt.StrictMode,null,d));const p=document.querySelector(".application"),h=e=>null==c?void 0:c.forEach((t=>{try{t(e)}catch(e){console.error(e)}})),f={element:d,container:p,callback:()=>{u.debug("App rendering"),document.querySelector("html").classList.remove("no-js"),h(),t()},log:u};try{(({element:e,container:t,callback:n,log:o})=>{if("function"==typeof mo)return mo(t,(0,nt.createElement)(yo,{callback:n},e),{onRecoverableError:(e,t)=>{o.error({event:"hydrate:recover-after-error",error:e,errorInfo:t})}});const{hydrate:s}=r(776);s(e,t,n)})(f)}catch(e){h(e),l(e)}}))}(e)},deps:{pageService:Q.Y9,logger:y.F,customRender:{token:hn,optional:!0},extendRender:{token:mn,optional:!0},rendererCallback:{token:pn,optional:!0},consumerContext:Oe,di:be.Z,useStrictMode:vn},multi:!0}),(0,i.J)({provide:vn,useFactory:({deprecatedMode:e})=>"strict"===e,deps:{deprecatedMode:gn}}),(0,i.J)({provide:gn,useValue:"legacy"})]})],Ro),function(e){e.iconLink="iconLink",e.meta="meta",e.inlineScript="inlineScript",e.script="script",e.asIs="asIs",e.preconnectLink="preconnectLink",e.preloadLink="preloadLink",e.inlineStyle="inlineStyle",e.style="style"}(Mo||(Mo={})),Mo.iconLink,Mo.meta,Mo.inlineScript,Mo.script,Mo.asIs,Mo.preconnectLink,Mo.preloadLink,Mo.inlineStyle,Mo.style;const Po=e=>Math.round(e)/1e3,xo=e=>t=>e.test(t),Io=xo(/\.js$/),No=xo(/\.css$/),jo=xo(/\.(?:svg|png|jpeg|webp|jpg)$/),Ao=xo(/\.(?:woff|eot|woff2|ttf)/);var Do;!function(e){e.html="html",e.js="js",e.css="css",e.img="img",e.font="font",e.other="other"}(Do||(Do={}));const Lo=(e,t)=>{if(e.getEntriesByType)return e.getEntriesByType(t)},Uo=e=>{const t=Lo(e,"paint");return t&&t[0]?t[0].startTime:0},Fo=(e,t)=>e&&e[t]||0,Vo=(e,t)=>({duration:Fo(e,"duration")+Po(t.duration),transferSize:Fo(e,"transferSize")+t.transferSize,encodedBodySize:Fo(e,"encodedBodySize")+t.encodedBodySize});function Ho(){let e;try{if(e=window.performance,!e.timing||!e.timing.loadEventEnd)throw 0===e.timing.loadEventEnd&&console.error("Library used at browser initialization page. Reed docs"),new Error("Not implemented timing api")}catch(e){return{}}const{requestStart:t,responseStart:r,responseEnd:n,domComplete:o,loadEventEnd:s,domInteractive:i,navigationStart:a}=e.timing,c=[{key:"connection",start:a,end:t},{key:"backend",start:t,end:r},{key:"pageDownload",start:r,end:n},{key:"first-paint",start:0,end:Uo(e)},{key:"domInteractive",start:a,end:i},{key:"domComplete",start:a,end:o},{key:"pageLoadTime",start:a,end:s}],u={};return c.forEach((e=>{const t=Po(e.end-e.start);u[e.key]=t>0||t<2e3?t:void 0})),u.download=(e=>{const t={},r=Lo(e,"resource");if(r&&r.length>0){const e={};r.forEach((r=>{const n=(e=>{switch(!0){case No(e):return Do.css;case Io(e):return Do.js;case jo(e):return Do.img;case Ao(e):return Do.font;default:return Do.other}})(r.name.split("?",1)[0]);Do[n]&&(e[n]||(e[n]=0),e[n]++,t[n]=Vo(t[n],r),t[n].count=e[n])}))}const n=Lo(e,"navigation");return n&&n.length>0&&(t[Do.html]=Vo({},n[0])),t})(e),u}class qo{constructor(e){}inc(){}reset(){}remove(){}labels(){return{inc(){}}}}class Bo{constructor(e){}inc(){}dec(){}set(){}setToCurrentTime(){}reset(){}remove(){}startTimer(e){return e=>{}}labels(){return{inc(){},dec(){},set(){},setToCurrentTime(){},startTimer:()=>e=>{}}}}class $o{constructor(e){}observe(){}startTimer(e){return e=>{}}reset(){}remove(){}labels(){return{observe(){},startTimer:()=>()=>{}}}}class Yo{constructor(e){}observe(){}startTimer(){return e=>{}}reset(){}labels(e){return{observe(){},startTimer:()=>e=>{}}}remove(){}}const zo=(0,G.V)("HTTP_CLIENT_FACTORY"),Go=(0,G.V)("DEFAULT_HTTP_CLIENT_FACTORY_OPTIONS"),Jo=(0,G.V)("HTTP_CLIENT"),Wo=(0,G.V)("HTTP_CLIENT_AGENT"),Ko=(0,G.V)("apiClientPassHeaders",{multi:!0}),Qo=(0,G.V)("papi service"),Zo=(0,G.V)("disable circuit breaker"),Xo=(0,Te.y)("set instant metrics map"),es=(0,_e.L)("instantMetrics",{instantMetricsMap:{}}).on(Xo,((e,t)=>t)),ts=[{provide:k.Ym,multi:!0,useValue:[es]}];let rs=class{};rs=(0,ve.__decorate)([(0,o.Yl)({providers:[...ts,{provide:c.Bi.init,scope:a.s.SINGLETON,multi:!0,useFactory({logger:e,papiService:t,context:r}){if(!t)return()=>{};const n=r.getStore("instantMetrics").getState().instantMetricsMap,o=new u.f({requestCount:1,emitLevels:{trace:!0,debug:!0,info:!0,warn:!0,error:!0,fatal:!0},makeRequest:e=>n[e.event]?t.request({path:`metrics/${e.event}`,method:"post",payload:e.value?{value:e.value}:{}}).then((({payload:e})=>e)):Promise.resolve()});return()=>{e.addBeforeReporter(o)}},deps:{papiService:{token:Qo,optional:!0},context:Oe,logger:y.F}}]})],rs);let ns=class{};ns=(0,ve.__decorate)([(0,o.Yl)({imports:[rs],providers:[{provide:Jt,useFactory:()=>({counter:e=>new qo(Object.assign({},e)),gauge:e=>new Bo(Object.assign({},e)),histogram:e=>new $o(Object.assign({},e)),summary:e=>new Yo(Object.assign({},e))}),scope:a.s.SINGLETON},{provide:c.Bi.init,useFactory:({logger:e,pageService:t})=>()=>{window.addEventListener("load",(()=>{setTimeout((()=>{var r,n;const o=Ho();e({name:"metrics:perf",defaults:{remote:{emitLevels:{info:!0}}}}).info(Object.assign({},o,{event:"perf-timings",deviceType:-1!==(null===(r=navigator.userAgent)||void 0===r?void 0:r.indexOf("Mobi"))?"mobile":"desktop",urlMask:null===(n=t.getCurrentRoute())||void 0===n?void 0:n.path}))}),0)}))},multi:!0,deps:{logger:y.F,pageService:Q.Y9}}]})],ns);const os=(0,G.V)("serverModulePapiPublicUrl"),ss=(0,G.V)("serverModulePapiPrivateUrl"),is=[{provide:os,useFactory:({appInfo:e})=>`/${e.appName}/papi`,deps:{appInfo:c.Qo}},{provide:ss,useFactory:({appInfo:e})=>`/${e.appName}/private/papi`,deps:{appInfo:c.Qo}}];let as=class{};as=(0,ve.__decorate)([(0,o.Yl)({providers:[...is]})],as);let cs=class{};cs=(0,ve.__decorate)([(0,o.Yl)({imports:[ns,as],providers:[]})],cs);const us=(0,o.Yl)({imports:[],providers:[{provide:S.$,useFactory:({cookie:e})=>e.get("__P__wuid"),deps:{cookie:ke.T}}]})(class{});var ls=r(6724),ds=r.n(ls);function ps(e,t,r){if(null==r?void 0:r.replace)return Object.assign({},e,t);const n=Object.assign({},e,t,{query:Object.assign({},e.query,t.query),headers:Object.assign({},e.headers,t.headers)}),o=r=>{e[r]&&t[r]&&(n[r]=qt()(t[r],e[r]))};return o("modifyRequest"),o("modifyResponse"),o("modifyError"),n}var hs,fs=r(3301),gs=r.n(fs),vs=r(4511),ms=r.n(vs),ys=r(3915),bs=r.n(ys),Ss=r(4444),_s=r.n(Ss);!function(e){e.INIT="init",e.COMPLETE="complete",e.ERROR="error"}(hs||(hs={}));var Es=hs;class ws{constructor(e){this.state=Object.assign({status:Es.INIT,request:null,response:null,error:null},e),this.internalMeta={},this.externalMeta={}}getState(){return this.state}setState(e){const t=ms()([this.state],e);t&&(this.state=Object.assign({},this.state,t))}getInternalMeta(e){return this.getMeta(e,this.internalMeta)}getExternalMeta(e){return this.getMeta(e,this.externalMeta)}updateInternalMeta(e,t){this.internalMeta=this.extendMeta(e,t,this.internalMeta)}updateExternalMeta(e,t){this.externalMeta=this.extendMeta(e,t,this.externalMeta)}getStatus(){return this.state.status}getResponse(){return this.state.response}getRequest(){return this.state.request}getMeta(e,t=this.externalMeta){return e?t[e]:t}extendMeta(e,t,r=this.externalMeta){if(t)return Object.assign({},r,{[e]:Object.assign({},r[e],t)})}}const Os={[Es.INIT]:Es.COMPLETE};var ks=r(6247),Ts=r.n(ks),Cs=r(9648),Rs=r.n(Cs);const Ms="log",Ps=e=>{const t=e.getExternalMeta(Ms),r=Date.now(),n=r-t.start;e.updateExternalMeta(Ms,{end:r,duration:n})},xs=e=>({debug:(...t)=>console.debug(e,...t),error:(...t)=>console.error(e,...t)}),Is=(e,t)=>!0===t?e:$r()(e)?!1===t?Sr()((()=>"*"),e):Sr()(((e,r)=>t.has(r)?e:"*"),e):"*",Ns="cache";var js=Ns,As=(e,t)=>r=>{var n,o,s,i;const a=r.getRequest(),c=null!==(n=Ts()("cacheForce",a))&&void 0!==n&&n,u=null!==(o=Ts()(`${e}CacheForce`,a))&&void 0!==o?o:c,l=null!==(s=Ts()("cache",a))&&void 0!==s?s:t,d=null!==(i=Ts()(`${e}Cache`,a))&&void 0!==i?i:l;return r.getStatus()===Es.INIT&&r.updateExternalMeta(Ns,{forced:c,enabled:l,[`${e}Enabled`]:d,[`${e}Force`]:u}),u?r.getStatus()===Es.COMPLETE:d},Ds=({httpMethod:e="GET",url:t,payload:r,query:n,rawQueryString:o="",additionalCacheKey:s=""})=>e.toLowerCase()+t+JSON.stringify(r||"")+JSON.stringify(n||"")+o+JSON.stringify(s),Ls=(e,t=Ds)=>{let r=Ts()("key",e.getInternalMeta(Ns));return r||(r=t(e.getRequest()),e.updateInternalMeta(Ns,{key:r})),r},Us=({shouldExecute:e=!0,getCacheKey:t}={})=>{const r={},n=e=>{const n=e.getState(),o=Ls(e,t);if(o&&r[o]){const e=r[o];delete r[o],e.forEach((e=>{e({status:n.status,response:n.response,error:n.error})}))}};return{shouldExecute:As("deduplicate",e),init:(e,n)=>{const o=Ls(e,t);if(r[o])return e.updateExternalMeta(js,{deduplicated:!0}),void r[o].push(n);r[o]=[],n()},complete:(e,t)=>{n(e),t()},error:(e,t)=>{n(e),t()}}};const Fs=e=>{const{requestTimeout:t,configTimeout:r}=e;return r||(t?2*t:void 0)},Vs=3e5;var Hs=({lruOptions:e={max:1e3,ttl:Vs},shouldExecute:t=!0,allowStale:n=!1,staleTtl:o=("ttl"in e?e.ttl:Vs),staleBackgroundRequestTimeout:s,memoryConstructor:i=(e=>new(r(4772))(e)),getCacheKey:a}={})=>{const c=i(Object.assign({},e,{allowStale:!0}));return{shouldExecute:As("memory",t),init:(e,t,r)=>{const i=Ls(e,a);if(c.has(i))return e.updateExternalMeta(js,{memoryCache:!0,memoryCacheOutdated:!1}),t({status:Es.COMPLETE,response:c.get(i)});const u=_s()("memoryCacheAllowStale",n,e.getRequest())&&c.peek(i);if(u){const n=e.getRequest();return e.updateExternalMeta(js,{memoryCache:!0,memoryCacheOutdated:!0}),c.set(i,u,{ttl:o}),setTimeout((()=>r(Object.assign({},n,{timeout:Fs({requestTimeout:n.timeout,configTimeout:s}),memoryCacheForce:!0,memoryCacheBackground:!0,signal:void 0,abortPromise:void 0})).catch((()=>{}))),15),t({status:Es.COMPLETE,response:u})}t()},complete:(e,t)=>{const r=Ls(e,a),n=Ts()("memoryCacheTtl",e.getRequest());c.set(r,e.getResponse(),{ttl:n}),e.updateExternalMeta(js,{memoryCacheBackground:Ts()("memoryCacheBackground",e.getRequest())}),t()}}},qs=r(934),Bs=r.n(qs);const $s="validate";var Ys=r(7021),zs=r.n(Ys),Gs=r(9294),Js=r.n(Gs);const Ws=(e,t="")=>{const r=new URLSearchParams(t),n=(e,t=[])=>{ye()(((e,o)=>{if(ds()(e))return;const s=t.length?[...t,o]:[o];$r()(e)?n(e,s):r.set(Js()(((e,t,r)=>r?`${e}[${t}]`:t),"",s),e)}),e)};return n(e),r.toString()};var Ks=r(5797),Qs=r.n(Ks),Zs=r(9567),Xs=r.n(Zs),ei=r(5029),ti=r.n(ei);const ri="PROTOCOL_HTTP",ni={GET:"GET",POST:"POST",PUT:"PUT",DELETE:"DELETE",HEAD:"HEAD",PATCH:"PATCH"},oi={html:"text/html",json:"application/json",xml:"text/xml",urlencoded:"application/x-www-form-urlencoded",form:"application/x-www-form-urlencoded","form-data":"application/x-www-form-urlencoded","multipart/form-data":""},si=e=>{const t=e.getInternalMeta(ri);return t&&t.response},ii=e=>"ERR_HTTP_ERROR"===e.code,ai=e=>(e=>"ERR_HTTP_REQUEST_TIMEOUT"===e.code)(e)||ii(e)&&!e.status,ci=e=>ii(e)&&e.status>=500,ui="undefined"!=typeof self?self:window;class li extends Error{constructor(){super(...arguments),this.code="ERR_HTTP_REQUEST_TIMEOUT",this.message="Request timed out"}}class di extends Error{constructor(){super(...arguments),this.code="ABORT_ERR"}}var pi=r(6818),hi=r.n(pi),fi=hi()({});const gi="retry",vi=["logger","name","disableCache","enableCircuitBreaker","createCache","cacheTime","defaultTimeout","validator","errorValidator","errorModificator","circuitBreakerOptions","getCacheKey","lruOptions","agent","querySerializer","retryOptions"];function mi(e){const{logger:t,name:r,disableCache:n,enableCircuitBreaker:o,createCache:s,cacheTime:i=3e4,defaultTimeout:a,validator:c,errorValidator:u,errorModificator:l,circuitBreakerOptions:d={},getCacheKey:p,lruOptions:h={max:1e3,maxAge:i},agent:f,querySerializer:g,retryOptions:v}=e,m=(0,ge.Z)(e,vi),y=(t&&t(`${r}:initialization`),[]);y.push({init:(e,t)=>{t({request:Object.assign({timeout:a},e.getRequest())})}}),y.push((({baseUrl:e="",transform:t=(({baseUrl:e,url:t})=>`${e}${t}`)}={})=>({init:(r,n)=>{const o=r.getRequest();n({request:Object.assign({},o,{url:t(Object.assign({},o,{baseUrl:o.baseUrl||e}))})})}}))({baseUrl:m.baseUrl,transform:({baseUrl:e,path:t,url:r})=>{if(r)return r;if(e&&t){const r=!("/"===e.slice(-1));return"/"===t.slice(0,1)&&(t=t.substring(1)),`${e}${r?"/":""}${t}`}return e||t||""}})),y.push((({name:e="",logger:t=xs,showQueryFields:r=!1,showPayloadFields:n=!1})=>{const o=t(`request.${e}`),s=({url:e,query:t,payload:o,showQueryFields:s,showPayloadFields:i})=>{const a=null!=s?s:r,c=null!=i?i:n;return{url:e,query:t&&Is(t,Rs()(a)?new Set(a):a),payload:o&&Is(o,Rs()(c)?new Set(c):c)}};return{init:(e,t)=>{const r=e.getRequest(),n=Date.now();Ts()("silent",r)||o.debug({event:"init",info:s(r)}),e.updateExternalMeta(Ms,{start:n}),t()},complete:(e,t)=>{Ps(e);const r=e.getRequest();Ts()("silent",r)||o.debug({event:"complete",info:s(r),meta:e.getExternalMeta()}),t()},error:(e,t)=>{const r=e.getRequest(),n=Ts()("silent",r);Ps(e),n||o.error({event:"error",info:s(r),error:e.getState().error,meta:e.getExternalMeta()}),t()}}})({logger:t,name:r,showQueryFields:!0,showPayloadFields:!0})),y.push(Hs({shouldExecute:!n,lruOptions:h,allowStale:!0,getCacheKey:p,memoryConstructor:s})),y.push(Us(p?{getCacheKey:p}:void 0)),o&&y.push(fi(Object.assign({isSystemError:gs()(ci,ai)},d))),y.push({error:(e,t)=>{const r=e.getState(),n=null==l?void 0:l(r);return n?t({error:n}):t()}}),(c||u)&&y.push((({validator:e=Bs(),allowFallback:t=!0,errorValidator:r=Bs()}={})=>({complete:(r,n)=>{const o=r.getState(),{request:s}=o,i=e(o);return r.updateExternalMeta($s,{validated:!i}),i?n({error:i,request:t?s:Object.assign({},s,{fallbackCache:!1}),status:Es.ERROR}):n()},error:(e,t)=>{const n=e.getState(),o=r(n);return e.updateExternalMeta($s,{errorValidated:!!o}),o?(e.updateExternalMeta($s,{error:n.error}),t({error:null,status:Es.COMPLETE})):t()}}))({validator:c,errorValidator:u,allowFallback:!0})),y.push((({agent:e,querySerializer:t}={})=>({init:(e,r)=>{const{httpMethod:n=ni.GET,url:o,query:s,queryNoCache:i,headers:a,type:c="form",payload:u,attaches:l=[],timeout:d,withCredentials:p,abortPromise:h,responseType:f,signal:g}=e.getRequest();let v=!1;const m=n.toUpperCase(),y=m===ni.GET||m===ni.HEAD;let b,S,_,E,w,O;if(l.length)b=((e,t=[])=>{const r=new(ti()),n=(e,t)=>{if(Rs()(e))return eo()((e=>n(e,t)),e);ds()(e)||r.append(t,e)};return ye()(n,e),t.forEach((e=>{if(!(e instanceof window.Blob))return;const t=e.uploadName||e.name,n=e.fieldName||"file";r.append(n,e,encodeURIComponent(t))})),r})(u,l),S=b.getHeaders&&b.getHeaders();else{const e=_s()(c,c,oi);S=e?{"Content-type":e}:{},y||(b=((e,t,r=Ws)=>{switch(e){case"form":case"urlencoded":case"form-data":return r(t);case"json":return JSON.stringify(t);default:return t}})(c,u,t))}if(zs()){const t=new(zs());E=t.signal;const n=e=>{v||(v=!0,t.abort(),r({status:Es.ERROR,error:e instanceof Error?e:Object.assign(new di,{abortOptions:e||{}})}))};h&&h.then(n),d&&(_=setTimeout((()=>{n(new li)}),d)),e.updateInternalMeta(ri,{requestAbort:n}),g&&(g.aborted?n():g.addEventListener("abort",(()=>{n()})))}else d&&(_=setTimeout((()=>{r({status:Es.ERROR,error:new li}),v=!0}),d));((...e)=>ui.fetch(...e))(((e,t,r=Ws)=>{const[n,o]=e.split("?",2),s=r(t,o);return s?`${n}?${s}`:n})(o,Object.assign({},y?u:{},i,s),t),{signal:E,method:m,headers:Object.assign({},S,a),agent:void 0,credentials:p?"include":"same-origin",body:b,timeout:d}).then((t=>(w=t,e.updateInternalMeta(ri,{response:w}),w[f]?w[f]():(e=>{const t=Qs()(e.headers.get("content-type")||"");return Xs()("application/json",t)?e.json():Xs()("application/octet-stream",t)?e.arrayBuffer():e.text()})(w)))).then((e=>{if(!v){if(O=e,!w.ok)throw new Error(w.statusText);r({status:Es.COMPLETE,response:O})}})).catch((e=>{if(!v)return e&&"string"==typeof e.type&&/timeout/.test(e.type)?r({status:Es.ERROR,error:new li}):void r({status:Es.ERROR,error:Object.assign(e,{code:"ERR_HTTP_ERROR",status:w&&w.status,body:O}),response:O})})).then((()=>{v=!0,_&&clearTimeout(_)}))}}))({agent:f||void 0,querySerializer:g||void 0})),v&&y.push((({retry:e=0,retryDelay:t=100,maxTimeout:r=6e4}={})=>({init:(e,t)=>{e.updateInternalMeta(gi,{startTime:Date.now()}),t()},error:(n,o,s)=>{var i,a;const c=n.getRequest(),u=c.timeout||r,l=null!==(i=c.retry)&&void 0!==i?i:e,d=null!==(a=c.retryDelay)&&void 0!==a?a:t,{startTime:p}=n.getInternalMeta(gi);let h=0;const f=()=>{h<l?setTimeout((()=>{const e=Date.now()-p;if(e>=u)return n.updateExternalMeta(gi,{attempts:h,timeout:!0}),o();s(Object.assign({},c,{retry:0,timeout:u-e,silent:!0,retryDelay:void 0,cache:!1})).then((e=>(n.updateExternalMeta(gi,{attempts:h+1}),o({status:Es.COMPLETE,response:e}))),(()=>{h++,f()}))}),ms()([h],d)):(l>0&&n.updateExternalMeta(gi,{attempts:h,timeout:!1}),o())};f()}}))(v));const b=function(e){const t=r=>{let n=-1;const o=e.length,s=new ws;s.setState({request:r});const i=new Promise(((r,i)=>{const a=e=>{const t=s.getState(),n=t.status,o=Os[n];return e?c(n,-1):o?(s.setState({status:o}),c(o,-1)):void(n===Es.COMPLETE?r(t.response):i(Object.assign(t.error||{},{url:t.request.url})))},c=(r,i)=>{const c=s.getState().status,u=l=>{if(s.setState(l),s.getState().status!==c)return a(!0);if(n+=i,n<0||n>=o)return a(!1);const d=e[n],p=d[r];if(!p||!ms()([s],_s()("shouldExecute",!0,d)))return u();try{p(s,bs()(u),t)}catch(e){return u({status:Es.ERROR,error:e})}};u()};c(Es.INIT,1)}));return Object.assign(i,{getState:s.getState.bind(s),getInternalMeta:s.getInternalMeta.bind(s),getExternalMeta:s.getExternalMeta.bind(s)})};return t}(y);return b}class yi{get(e,t,r){return this.request(Object.assign({path:e},t,r,{method:"GET"}))}post(e,t,r){return this.request(Object.assign({path:e,requestType:"json"},t,r,{method:"POST"}))}put(e,t,r){return this.request(Object.assign({path:e,requestType:"json"},t,r,{method:"PUT"}))}delete(e,t,r){return this.request(Object.assign({path:e},t,r,{method:"DELETE"}))}}const bi=["modifyRequest","modifyResponse","modifyError"],Si=["method","body","requestType"];class _i extends yi{constructor({options:e,makeRequest:t}){super(),this.options=e,this.makeRequest=t}async request(e){const t=ps(this.options,e),{modifyRequest:r,modifyResponse:n,modifyError:o}=t,s=(0,ge.Z)(t,bi),i=r?r(s):s,{method:a,body:c,requestType:u}=i,l=(0,ge.Z)(i,Si);a&&(l.httpMethod=a),c&&(l.payload=c),u&&(l.type=u);const d=this.makeRequest(l);try{const e=await d,t=(p=d,Ts()("status",si(p))),r=(e=>{const t=(e=>Ts()("headers",si(e)))(e),r={};return t&&t.forEach(((e,t)=>{r[t]="set-cookie"===t?[]:e})),r})(d),o={payload:e,status:t,headers:r};return n?n(o):o}catch(e){const t=d.getExternalMeta(),r=Object.assign(e,{__meta:t});throw o?o(r,l):r}var p}fork(e={},t={}){return new _i({options:ps(this.options,e,t),makeRequest:this.makeRequest})}}const Ei=e=>e=>e,wi={defaultTimeout:3e4};class Oi extends yi{constructor(e){super(),this.httpClient=e}request(e){return this.httpClient.request(e)}}const ki=(0,o.Yl)({providers:[(0,i.J)({provide:Qo,scope:a.s.SINGLETON,useClass:class extends Oi{constructor({httpClientFactory:e,baseUrl:t}){super(e({name:"papi",baseUrl:t,validator:({response:e})=>{if(!e.resultCode||!e.payload)return e.error||new Error(JSON.stringify(e))},modifyResponse:e=>Object.assign({},e,{payload:Ts()("payload",e.payload)})}))}},deps:{httpClientFactory:zo,baseUrl:os}})]})(class{}),Ti=(0,G.V)("httpClient createCache"),Ci=(0,o.Yl)({imports:[ki],providers:[(0,i.J)({provide:zo,useFactory:({logger:e,envManager:t,appInfo:r,requestManager:n,headersList:o,createCache:s,makeRequestRegistry:i,agent:a,querySerializer:c,disableCircuitBreaker:u=!1,defaultOptions:l})=>r=>{if(!r.name)throw Error('You need to pass a unique field "name" for the HTTP client instance');const n=t.get("HTTP_CLIENT_CACHE_DISABLED"),o=t.get("HTTP_CLIENT_CIRCUIT_BREAKER_DISABLED"),d=ps(ps(Object.assign({logger:e,agent:a,querySerializer:c,method:"GET",createCache:s?e=>s("memory",e):void 0,modifyRequest:qt()(Ei(),(e=>e)),circuitBreakerOptions:{failureThreshold:75,minimumFailureCount:10}},wi),null!=l?l:{}),r);ds()(n)||(d.disableCache=!!n),u&&(d.enableCircuitBreaker=!1),ds()(o)||(d.enableCircuitBreaker=!o),i.has(d.name)||i.set(d.name,mi(d));const p=i.get(d.name);return new _i({options:d,makeRequest:p})},deps:{logger:y.F,envManager:b.v,appInfo:c.Qo,createCache:Ti,makeRequestRegistry:"makeRequestRegistry",requestManager:{token:Rt.Gu,optional:!0},headersList:{token:Ko,optional:!0},agent:{token:Wo,optional:!0},disableCircuitBreaker:{token:Zo,optional:!0},defaultOptions:{token:Go,optional:!0}}}),(0,i.J)({provide:Jo,useFactory:({factory:e})=>e({name:"http-client",disableCache:!0}),deps:{factory:zo}}),(0,i.J)({provide:b.s,useValue:[{key:"HTTP_CLIENT_CACHE_DISABLED",optional:!0,dehydrate:!1},{key:"HTTP_CLIENT_CIRCUIT_BREAKER_DISABLED",optional:!0,dehydrate:!1}],multi:!0}),(0,i.J)({provide:"makeRequestRegistry",scope:a.s.SINGLETON,useFactory:()=>new Map}),(0,i.J)({provide:Ti,scope:a.s.SINGLETON,useFactory:({createCache:e})=>e,deps:{createCache:jr.xC}}),(0,i.J)({provide:Ko,multi:!0,useValue:["x-request-id"]})]})(class{}),Ri=(0,G.V)("ADMIN_SERVICE"),Mi=(0,G.V)("ADMIN_RESOURCES_SERVICE"),Pi=(0,G.V)("ADMIN_PAGE_ENRICHMENT_SERVICE"),xi=(0,G.V)("INTEGRATION_ADMIN_SERVICE"),Ii=(0,G.V)("ADMIN_API_HTTP_CLIENT_FACTORY"),Ni=(0,G.V)("ADMIN_API_DEFAULT_OPTIONS_FACTORY"),ji=(0,G.V)("TINKOFF_API_SERVICE"),Ai=(0,G.V)("COMMON_API_HTTP_CLIENT_FACTORY"),Di=(0,G.V)("COMMON_API_DEFAULT_OPTIONS_FACTORY"),Li=(0,G.V)("papiClient"),Ui=(0,G.V)("apiOriginService");class Fi extends Oi{constructor({httpClient:e}){super(e)}async getResources(e,t={}){const{query:r={}}=t,{payload:n}=await this.request(Object.assign({},t,{path:"resources",query:Object.assign({},r,{name:e})}));return n||{}}}class Vi extends Oi{constructor({httpClient:e}){super(e),this.pagesIntegrationApi="pages/api/integration/v1"}buildJsonRpcParams(e,t){return{path:`${this.pagesIntegrationApi}/${e}`,method:"POST",requestType:"json",body:{method:e,params:t,id:"null",jsonrpc:"2.0"}}}getRoutesByDomainAndAppId(e){return this.request(this.buildJsonRpcParams("getRoutesByDomainAndAppId",e))}}class Hi{constructor({httpClient:e}){this.httpClient=e}getResponse(e,t){return this.httpClient.request(Object.assign({},t,{path:`${Hi.pageEnrichmentApi}/getResponse`,query:Object.assign({},null==t?void 0:t.query,e)}))}getPreview(e,t){return this.httpClient.request(Object.assign({},t,{path:`${Hi.pageEnrichmentApi}/getPreview`,query:Object.assign({},null==t?void 0:t.query,e)}))}}Hi.pageEnrichmentApi="web-gateway";var qi=r(2165),Bi=r.n(qi);const $i={cacheTime:6e5,defaultTimeout:3e4},Yi=e=>Object.assign({},e,{payload:e.payload.response||e.payload.result||Bi()(["error","message"],e.payload)}),zi=e=>Object.assign({},e,{payload:_s()("value",{},Yi(e).payload)}),Gi=({request:e})=>{var t,r;return null!==(r=null===(t=e.path)||void 0===t?void 0:t.split("/")[0])&&void 0!==r?r:""},Ji=(0,o.Yl)({providers:[(0,i.J)({provide:b.s,useFactory:({dehydrateConfigApi:e,dehydrateResourcesApi:t})=>[{key:"CONFIG_API",validator:f([p,h("/")]),dehydrate:null===e||e},{key:"RESOURCES_API",validator:f([p,h("/")]),dehydrate:null===t||t},{key:"INTEGRATION_CONFIG_API",dehydrate:!1,validator:f([p,h("/")])}],deps:{dehydrateConfigApi:{token:"dehydrateConfigApi",optional:!0},dehydrateResourcesApi:{token:"dehydrateResourcesApi",optional:!0}},multi:!0}),{provide:Ri,useFactory:({factory:e,envManager:t})=>e({baseUrl:t.get("CONFIG_API"),circuitBreakerOptions:{failureThreshold:75,minimumFailureCount:10,isSystemError:()=>!0,getKey:Gi}}),deps:{factory:Ii,envManager:b.v}},{provide:Mi,useFactory:({factory:e,envManager:t})=>{const r=e({name:"admin-resources-api",baseUrl:t.get("RESOURCES_API"),modifyResponse:zi});return new Fi({httpClient:r})},deps:{factory:Ii,envManager:b.v}},{provide:xi,useFactory:({factory:e,envManager:t})=>{const r=e({name:"admin-integration-api",baseUrl:t.get("INTEGRATION_CONFIG_API")});return new Vi({httpClient:r})},deps:{factory:Ii,envManager:b.v}},(0,i.J)({provide:Ii,useFactory:({factory:e,optionsFactory:t})=>r=>e(Object.assign({},t(r),r)),deps:{factory:zo,optionsFactory:Ni}}),(0,i.J)({provide:Ni,useValue:e=>Object.assign({},$i,{name:"admin-api",validator:({request:e,response:t})=>{if(!t||!t.response&&!t.result)return $r()(t)?Object.assign(new Error,$r()(t.error)?t.error:{path:e.path,response:t||null}):new Error(JSON.stringify(t))},errorValidator:({request:e,response:t,error:r})=>(404===r.status||400===r.status)&&!(!t||!t.error),errorModificator:({error:e})=>Object.assign(e,{errorId:"CONFIG_REQUEST_ERROR"}),modifyResponse:Yi,enableCircuitBreaker:!0,circuitBreakerOptions:{failureThreshold:75,minimumFailureCount:10,isSystemError:()=>!0}})}),{provide:Pi,useFactory:({httpClient:e})=>new Hi({httpClient:e}),deps:{httpClient:{token:Ri,optional:!0}}}]})(class{}),Wi=(0,G.V)("authenticator"),Ki=(0,G.V)("sessionManager"),Qi=(0,G.V)("sessionCookieName"),Zi=(0,G.V)("sessionLifetimeController"),Xi=(0,G.V)("authStrategies",{multi:!0}),ea=(0,G.V)("logoutRedirectUrl");var ta=r(8430),ra=r.n(ta);const na=ra()(["resultCode"],"SESSION_IS_ABSENT"),oa=ra()(["resultCode"],"INSUFFICIENT_PRIVILEGES");var sa=r(905),ia=r.n(sa),aa=r(74),ca=r.n(aa);const ua={expired:na,notAllowed:oa,confirmation:ia()([ra()(["resultCode"],"WAITING_CONFIRMATION"),ca()("confirmations"),ca()("confirmationData")])},la=["query","method","serverGetSession","roles"],da=ra()(["resultCode"],"OK"),pa={defaultTimeout:6e4},ha=e=>Object.assign({},e,{payload:e.payload.payload});var fa=r(4676),ga=r.n(fa);class va extends Oi{constructor({httpClient:e,context:t,hooks:r,apiOriginService:n,cookieManager:o,wuid:s,sessionCookieName:i}){super(e),this.context=t,this.hooks=r,this.customizeParams=qt()((e=>t=>{const r=e.getWhen({requestOrigin:t.origin});return Object.assign({},t,{query:Object.assign({origin:r},t.query)})})(n),(({cookieManager:e,sessionCookieName:t})=>r=>r.withoutSession?r:Object.assign({},r,{query:Object.assign({sessionid:e.get(t||"psid")},r.query)}))({cookieManager:o,sessionCookieName:i}),(e=>t=>t.withoutSession||t.withoutWuid?t:Object.assign({},t,{query:Object.assign({wuid:e},t.query)}))(s))}request(e){const{path:t,confirmHide:r,confirmSSR:n=!1,confirmViewType:o=null,onConfirm:s=Kt()}=e;return this.httpClient.request(this.customizeParams(e)).then((e=>ua.confirmation(e.payload)?this.hooks.runPromiseHooks("confirm",this.context)({viewType:o,onConfirmShowed:s,confirmHide:r,confirmSSR:n,data:e.payload}).then(ga()("payload")):e)).catch((r=>{switch(!0){case"session_status"!==t&&ua.expired(r.response):return this.hooks.runPromiseHooks("sessionAbsent",this.context)({sessionExpired:!0,useCache:!1});case ua.notAllowed(r.response):return this.hooks.runPromiseHooks("notAllowed",this.context)(void 0).then((()=>{throw new Error("Not Allowed")}));default:return this.hooks.runPromiseHooks("unknown",this.context,e)(r).then((()=>{throw r}))}}))}}const ma=e=>Ts()("tinkoffApiOrigin",e)||Bi()(["properties","tinkoffApiOrigin"],e),ya=qt()(ma,Bi()(["currentRoute","config"]),("router",e=>e.getState().router));class ba{constructor({context:e,defaultOrigin:t}){this.chooseOriginFrom=({routeOrigin:e,defaultOrigin:t,requestOrigin:r})=>e||r||t,this.context=e,this.defaultOrigin=t}get(){return this.chooseOriginFrom({routeOrigin:ya(this.context),defaultOrigin:this.defaultOrigin})}getWhen({requestOrigin:e}){return this.chooseOriginFrom({requestOrigin:e,routeOrigin:ya(this.context),defaultOrigin:this.defaultOrigin})}}const Sa=(0,o.Yl)({providers:[(0,i.J)({provide:b.s,useValue:[{key:"TINKOFF_API",validator:f([p,h("/")])}],multi:!0}),(0,i.J)({provide:"defaultOrigin",useValue:"web,ib5,platform"}),(0,i.J)({provide:Ui,useFactory:({context:e,defaultOrigin:t})=>new ba({context:e,defaultOrigin:t}),deps:{context:Oe,defaultOrigin:"defaultOrigin"}}),(0,i.J)({provide:ji,useFactory:({factory:e,envManager:t,appInfo:r,context:n,hooks:o,apiOriginService:s,cookieManager:i,wuid:a,sessionCookieName:c})=>{const u=e({name:"tinkoff-api",baseUrl:t.get("TINKOFF_API"),disableCache:!0,query:{appName:r.appName,appVersion:t.get("APP_VERSION")},modifyResponse:e=>ua.confirmation(e.payload)?e:Object.assign({},e,{payload:e.payload.payload})},{isResponseValid:e=>da(e)||ua.confirmation(e)});return new va({httpClient:u,context:n,hooks:o,apiOriginService:s,cookieManager:i,wuid:a,sessionCookieName:c})},deps:{factory:Ai,envManager:b.v,appInfo:c.Qo,hooks:Je,requestManager:Rt.Gu,context:Oe,apiOriginService:Ui,cookieManager:ke.T,wuid:S.$,sessionCookieName:{token:Qi,optional:!0},headersList:{token:Ko,optional:!0}}}),(0,i.J)({provide:Ai,useFactory:({factory:e,optionsFactory:t})=>(r,n)=>e(Object.assign({},t(r,n),r)),deps:{factory:zo,optionsFactory:Di}}),(0,i.J)({provide:Di,useValue:({modifyResponse:e=ha,disableCache:t},{isResponseValid:r=da}={})=>Object.assign({name:"common-api",validator:({request:e,response:t})=>{if(!r(t))return $r()(t)?Object.assign(new Error,$r()(t.error)?t.error:{path:e.path,response:t||null}):new Error(JSON.stringify(t))},errorModificator:({error:e})=>Object.assign(e,{errorId:"COMMON_API_REQUEST_ERROR"}),modifyRequest:e=>{const{query:r={},method:n="GET",serverGetSession:o=!1,roles:s}=e,i=(0,ge.Z)(e,la),a=r.sessionid+JSON.stringify(s),c=Object.assign({method:n},i,{query:r,additionalCacheKey:a});if(!t){const{cache:e="POST"!==n,cacheForce:t}=c,r=!0;c.cache=r&&e,c.cacheForce=r&&t}return c},modifyResponse:e,enableCircuitBreaker:!0},pa)})]})(class{}),_a=(0,G.V)("adminClient"),Ea=(0,G.V)("adminResourceClient"),wa=(0,G.V)("tinkoffApiClient"),Oa=e=>{const t=Object.assign({},e);return e.method&&(t.path=e.method,delete t.method),e.httpMethod&&(t.method=e.httpMethod,delete t.httpMethod),e.payload&&(t.method&&"GET"!==t.method.toUpperCase()&&"DELETE"!==t.method.toUpperCase()?(t.body=e.payload,delete t.payload):(t.query=e.query?Object.assign({},e.query,e.payload):e.payload,delete t.payload)),t},ka=e=>e.then((e=>e.payload)),Ta=({httpClient:e,customRequestParams:t={},adoptParams:r=Oa})=>{const n=e.fork(t);return{request:e=>{const t={},o=new Promise(((o,s)=>{const i=r(e);n.request(i).then((e=>(Object.assign(t,e.headers),o(e.payload)))).catch((e=>{s(e)}))}));return Object.assign(o,{__RESPONSE_HEADERS__:t})},getHeaders:e=>e.__RESPONSE_HEADERS__?e.__RESPONSE_HEADERS__:{}}},Ca=["query","name"],Ra=e=>{const{query:t={},name:r}=e,n=(0,ge.Z)(e,Ca);return Object.assign({},n,{query:Object.assign({name:r},t)})},Ma=["query","sessionid","wuid"],Pa=e=>{const t=Oa(e),{query:r={},sessionid:n,wuid:o}=t,s=(0,ge.Z)(t,Ma),i={};return n&&(i.sessionid=n),o&&(i.wuid=o),Object.assign({},s,{query:Object.assign({},i,r)})},xa=(0,o.Yl)({providers:[{provide:_a,useFactory:({adminService:e})=>(({httpClient:e,customRequestParams:t={}})=>Ta({httpClient:e,customRequestParams:t}))({httpClient:e}),deps:{adminService:Ri}},{provide:Ea,useFactory:e=>(({httpClient:e,customRequestParams:t={}})=>Ta({httpClient:e,customRequestParams:Object.assign({path:"resources",modifyRequest:Ra},t)}))({httpClient:e.adminResourcesService.httpClient}),deps:{adminResourcesService:Mi}},{provide:wa,useClass:class{constructor({tinkoffApiService:e}){this.tinkoffApiService=e}request(e){return ka(this.tinkoffApiService.request(Pa(e)))}},deps:{tinkoffApiService:ji}}]})(class{}),Ia=(0,o.Yl)({imports:[us],providers:[(0,i.J)({provide:Li,scope:a.s.SINGLETON,useClass:class{constructor({papiService:e}){this.papiService=e}request(e){return ka(this.papiService.request(Oa(e)))}},deps:{papiService:Qo}}),{provide:Ko,multi:!0,useValue:["x-b3-traceid","x-b3-spanid","x-b3-parentspanid","x-b3-sampled","x-b3-flags","x-ot-span-context"]}]})(class{}),Na=(0,o.Yl)({imports:[],providers:[(0,i.J)({provide:Go,scope:a.s.SINGLETON,useValue:{modifyError:e=>{if(e.originalMessage)return e;const t=e.message,r=(e=>!0===(/network timeout at/i.test(e)||/request timed out/i.test(e))?" .     .":"-   .    .     .")(t);return Object.assign(e,{message:r,originalMessage:t})}}})]})(class{}),ja=(0,o.Yl)({imports:[us,Ia,Ci,Na,Ji,Sa,xa],providers:[]})(class{}),Aa={react:r(4121),"react-dom":r(776)};window.__externals=Object.assign(window.__externals||{},Aa);const Da={trace:Kt(),debug:Kt(),info:Kt(),warning:Kt(),error:Kt()};var La=r(112),Ua=r.n(La);const Fa=(e,t,r={})=>{const n=document.createElement("link");return Object.assign(n,r,{rel:e,href:t}),n.dataset.critical="true",new Promise(((e,r)=>{n.onerror=()=>r(new Error(`could not load link ${t}`)),"onload"in n?n.onload=e:setTimeout(e,50),document.head.appendChild(n)}))},Va=(e,t={},r)=>{const n=document.createElement("script");return Object.assign(n,t,{async:!0,src:e}),n.dataset.critical="true",r&&r(n),new Promise(((t,r)=>{n.onerror=t=>r(new Error(`could not load script ${e} ${t.message||t}`)),n.onload=t,document.head.appendChild(n)}))},Ha=e=>null==e?void 0:e.replace(/^https?:/,""),qa=e=>Ua()((t=>!!t.href&&Ha(t.href)===e),document.styleSheets),Ba=e=>document.querySelector(`[data-href="${e}"]`);class $a{constructor(e={}){this.log=e.log||Da}isLoaded(e){return!!this.get(e)}get(e){return(e=>{if(window.__externals&&window.__externals[e])return window.__externals[e]})(e.name)}load(e){const t=e.name;let r=this.get(e);if(r)return this.log.debug(`module "${t}" returned from cache`),r;this.log.debug(`module "${t}" will be fetched`);const n=()=>(r=this.get(e),r?(this.log.debug(t,"loaded"),Promise.resolve(r)):(this.log.error(`cannot find module ${t}`),Promise.reject(new Error(`Error resolving module ${t}`))));return function(e,t={}){const r=(n=e,Ua()((e=>!!e.src&&Ha(e.src)===n),document.scripts));var n;if(r){const e=r.getAttribute("loaded");return e?"true"===e?Promise.resolve():Promise.reject():new Promise(((e,t)=>{r.addEventListener("load",e),r.addEventListener("error",t)}))}return Promise.all([Va(e,{crossOrigin:"anonymous"},(e=>{e.addEventListener("load",(()=>e.setAttribute("loaded","true"))),e.addEventListener("error",(()=>e.setAttribute("loaded","error")))})),!t.cssUrl||qa(t.cssUrl)||Ba(t.cssUrl)?Promise.resolve():Fa("stylesheet",t.cssUrl)])}(e.js,{cssUrl:e.css}).then(n,n)}}const Ya=e=>`${-1===e.indexOf("localhost")?"https":"http"}://${e.replace(/\/$/,"")}`;class za{constructor(e=Object.create(null)){this.state=e}get(e){return this.state[e]}set(e){this.state=Object.assign({},this.state,e)}clear(){this.state=Object.create(null)}getState(){return this.state}}const Ga=(0,Te.y)("LOAD_MODULES_CONFIG"),Ja=(0,Te.y)("SET_MODULE_STATE"),Wa=(0,Te.y)("CLEAR_MODULE_STATE"),Ka=(0,_e.L)("module",{modulesConfig:{},modulesState:{},modulesInnerStore:{}}).on(Ga,((e,t)=>Object.assign({},e,{modulesConfig:t,modulesInnerStore:Sr()(((e,t)=>new za),t)}))).on(Ja,((e,{name:t,state:r})=>Object.assign({},e,{modulesState:Object.assign({},e.modulesState,{[t]:Object.assign({},e.modulesState[t],r)})}))).on(Wa,((e,t)=>Object.assign({},e,{modulesState:Object.assign({},e.modulesState,{[t]:void 0})})));Ka.prototype.rehydrate=function(e){const{modulesInnerStore:t}=e;this.state=Object.assign({},e,{modulesInnerStore:Sr()((e=>new za(e.state)),t)})};const Qa=(0,nt.createContext)({loader:void 0});var Za=r(9079),Xa=r.n(Za);const ec=["path","parentName","properties"],tc={config:{},navigate:{url:{query:{}}},params:{}},rc=(e,t)=>{if(!e)return tc;const r=(e=>{var t;const r=null!==(t=e.config)&&void 0!==t?t:{},{path:n,parentName:o,properties:s}=r,i=(0,ge.Z)(r,ec);return Object.assign({},i,s,{path:Xa()("/",n)?n:`${n}/`,parent:o})})(e);return Object.assign({},e,{config:r,navigate:{url:t},url:r.path,query:t.query,parsedUrl:t})};var nc=r(6060),oc=r.n(nc);const sc=Ua()(gs()(oc()("type","headerSlim"),oc()("type","header"))),ic=qt()(Ts()("properties"),sc),ac=(0,G.V)("dynamicPubsubSubscriptions",{multi:!0}),cc=(0,G.V)("DYNAMIC_COMPONENTS_TINKOFF_API_ADAPTER");let uc=class{};var lc;uc=(0,ve.__decorate)([(0,o.Yl)({providers:[(0,i.J)({provide:cc,useFactory:({tinkoffApiService:e})=>t=>ka(e.request(Pa(t))),deps:{tinkoffApiService:ji}}),(0,i.J)({provide:et,useFactory:({createPubsub:e})=>{const t=e(),r=t.subscribe.bind(t),n=t.publish.bind(t);return{fallback:!0,subscribe:(e,t)=>d()(e)?r(e,t):r(e.type,(e=>Promise.resolve(t(e)).then((e=>[e])))),publish:(e,...t)=>d()(e)?n(e,...t):n(e.type,e.payload)}},deps:{createPubsub:Xe}}),(0,i.J)({provide:c.Bi.customerStart,scope:a.s.REQUEST,useFactory:e=>function(){(({pubsub:e,pubsubSubscriptions:t,pageService:r,papiClient:n,tinkoffApiRequest:o,authenticator:s,resourceLoader:i})=>{const a=Object.assign({"Tinkoff:get:currentRoute":()=>rc(r.getCurrentRoute(),r.getCurrentUrl()),"Tinkoff:module:request:platform":e=>n.request(e),"Tinkoff:module:navigate":e=>r.navigate(e),"Tinkoff:get:headerVariations":()=>{const e=r.getContent();return e?ic(e.content):{}},"Tinkoff:module:request:tinkoff":e=>o(e),"Tinkoff:module:actions:logout":()=>null==s?void 0:s.logout(),"Tinkoff:module:request:resources":({name:e,httpMethod:t,useCache:r=!0,timeout:n})=>i.getResources(e,{method:t,cache:r,timeout:n})},...Tt()(t||[]));ye()(((t,r)=>{e.subscribe(r,((...e)=>Promise.resolve(t(...e)).then((e=>[e]))))}),a)})(e)},multi:!0,deps:{pubsub:et,pageService:Q.Y9,papiClient:Li,tinkoffApiRequest:cc,pubsubSubscriptions:{token:ac,optional:!0,multi:!0},authenticator:{token:Wi,optional:!0},resourceLoader:Mi,store:k.kR}})]})],uc);let dc=lc=class{static forRoot({pubsubSubscriptions:e}){return{mainModule:lc,providers:[{provide:ac,multi:!0,useValue:e}]}}};dc=lc=(0,ve.__decorate)([(0,o.Yl)({imports:[uc],providers:[{provide:"createDynamicModulesLoader",useFactory:({logger:e})=>new $a({log:e("dynamic-components")}),deps:{logger:y.F},scope:a.s.SINGLETON},{provide:"dynamicModulesLoader",useFactory:({store:e,loader:t,logger:r})=>(n,o)=>{const s=r("dynamic-components"),{modulesConfig:i}=e.getState(Ka),{featureToggle:a}=e.getState(),c=((e,t,r,n={})=>{const o=Ts()(t,e);if(!o)return null;!r&&Ts()(`module:${t}:beta`,n)&&(r=o.beta),r||(r=o.latest);const s=o.path||e.clientPath||e.defaultPath,i=o.path||e.serverPath||e.defaultPath;if(!s||!i)return null;const a=i.replace(/\/$/,""),c=`${s.replace(/\/$/,"")}/${t}/${r}`,u=`${a}/${t}/${r}`;return{name:`${t}`,version:`${r}`,js:Ya(`${c}/${t}_client.js`),css:o.withoutCSS?void 0:Ya(`${c}/${t}.css`),serverJs:Ya(`${u}/${t}_server.js`)}})(i,n,o,a);if(c)return t.load(c);s.error(`module ${n} is not found in moduleConfig`)},deps:{loader:"createDynamicModulesLoader",store:k.kR,logger:y.F}},{provide:mn,useFactory:({loader:e})=>{const t={loader:e};return e=>(0,Vn.jsx)(Qa.Provider,Object.assign({value:t},{children:e}),void 0)},deps:{loader:"dynamicModulesLoader"},multi:!0},{provide:k.Ym,useValue:Ka,multi:!0}]})],dc);const pc=(0,Te.y)("FEATURE_TOGGLE"),hc=(0,_e.L)("featureToggle",{__values:{}}).on(pc,((e,t)=>{const r={},n={};return ye()((({status:e,value:t},o)=>{!1!==e&&(r[o]=e),null!==e&&e===t||(n[o]=t)}),t),Object.assign({},r,{__values:n})}));let fc=class{};fc=(0,ve.__decorate)([(0,o.Yl)({providers:[{provide:k.Ym,useValue:hc,multi:!0}]})],fc);class gc{constructor(){this.state=new Map}eachMeta(e){this.state.forEach(((t,r)=>e(t,r)))}updateMeta(e,t){var r;return ye()(((t,r)=>{if(!t&&null!==t)return;const n=this.state.get(r);(!n||e>=n.priority)&&(null===t?this.state.delete(r):this.state.set(r,{value:t,priority:e}))}),t),null===(r=this.onChange)||void 0===r||r.call(this),this}get(e){return this.state.get(e)}reset(){this.state.clear()}subscribe(e){this.onChange=e}}const vc=e=>ca()("tag",e)?e:null;class mc{constructor({list:e,transformValue:t=mr(),converters:r={},metaWalk:n}){this.listSources=e,this.transformValue=t,this.converters=r,this.metaWalk=n}dataCollection(...e){var t;const r=null!==(t=this.metaWalk)&&void 0!==t?t:new gc;this.listSources.map((t=>t(r,...e)));let n=[];return r.eachMeta(((e,t)=>{const r=this.transformValue(e),o=(this.converters[t]||vc)(r.value);o&&(n=n.concat(Rs()(o)?o.filter(mr()):o))})),n}}const yc="data-meta-dynamic",bc=({tag:e,attributes:t,innerHtml:r})=>{const n=document.createElement(e);return r&&(n.innerHTML=r),t&&ye()(((e,t)=>{n.setAttribute(t,e||"")}),t),n.setAttribute(yc,"true"),n};class Sc{constructor(e){this.meta=e}update(){const e=document.head||document.querySelector("head"),t=this.meta.dataCollection().map(bc),r=e.querySelectorAll(`[${yc}]`),n=document.createDocumentFragment();[].slice.call(r).forEach((t=>e.removeChild(t))),t.forEach((e=>n.appendChild(e))),e.insertBefore(n,e.firstChild)}}var _c=r(7216),Ec=r.n(_c),wc=r(3038),Oc=r.n(wc);const kc=Ec()(d(),Oc(),mr()),Tc=e=>e.priority>10?{priority:e.priority,value:kc(e.value)}:e,Cc=(e,t={})=>{const r={};return Object.keys(t).forEach((n=>{var o;r[e+(o=n,`${o.charAt(0).toUpperCase()}${o.slice(1)}`)]=t[n]})),r},Rc=[{provide:ie,useClass:gc},{provide:se,useValue:{title:"Tramvai"}},{provide:ae,multi:!0,useFactory:({defaultMeta:e})=>{return t=e,e=>{e.updateMeta(0,t)};var t},deps:{defaultMeta:se}},{provide:ae,useFactory:({pageService:e})=>t=>{const r=e.getMeta().seo||{},n=r.shareSchema||{},o=Object.assign({},r.metaTags,Cc("twitter",n.twitterCard),Cc("og",n.openGraph));t.updateMeta(10,o)},multi:!0,deps:{pageService:Q.Y9}},{provide:ae,multi:!0,useFactory:({context:e,metaList:t})=>{const r=Tt()(t||[]);return t=>{r.forEach((r=>r(e,t)))}},deps:{context:Oe,metaList:{token:"metaList",optional:!0}}}];var Mc=r(7986),Pc=r.n(Mc);const xc=Pc()(2,((e,t)=>t&&{tag:e,innerHtml:t})),Ic=Pc()(2,((e,t)=>t&&{tag:"meta",attributes:{name:e,content:t}})),Nc=Pc()(2,((e,t)=>t&&{tag:"meta",attributes:{property:e,content:t}})),jc=Pc()(2,((e,t)=>t&&{tag:"link",attributes:{rel:e,href:t}})),Ac=[Ic("robots","noindex, follow"),Ic("robots","noarchive")],Dc=[Ic("robots","index, nofollow"),Ic("robots","noarchive")],Lc=[Ic("robots","none"),Ic("robots","noindex, nofollow"),Ic("robots","noarchive")],Uc={all:[Ic("robots","all"),Ic("robots","index, follow"),Ic("robots","noarchive")],noindex:Ac,"noindex, follow":Ac,nofollow:Dc,"index, nofollow":Dc,none:Lc,"noindex, nofollow":Lc},Fc={title:xc("title"),description:Ic("description"),keywords:Ic("keywords"),canonical:jc("canonical"),viewport:Ic("viewport"),ogTitle:Nc("og:title"),ogDescription:Nc("og:description"),ogSiteName:Nc("og:site_name"),ogUrl:Nc("og:url"),ogType:Nc("og:type"),ogImage:Nc("og:image"),ogImageSecure:Nc("og:image:secure_url"),ogImageType:Nc("og:image:type"),ogImageAlt:Nc("og:image:alt"),ogImageWidth:Nc("og:image:width"),ogImageHeight:Nc("og:image:height"),ogLocale:Nc("og:locale"),twitterTitle:Ic("twitter:title"),twitterDescription:Ic("twitter:description"),twitterCard:Ic("twitter:card"),twitterSite:Ic("twitter:site"),twitterCreator:Ic("twitter:creator"),twitterImage:Ic("twitter:image"),twitterImageAlt:Ic("twitter:image:alt"),robots:e=>Uc[e]};var Vc;let Hc=Vc=class{static forRoot(e){if(Rs()(e))return{mainModule:Vc,providers:[{provide:"metaList",useValue:e,multi:!0}]};const{metaUpdaters:t,metaDefault:r}=e,n=[];return r&&n.push({provide:se,useValue:r}),t&&n.push({provide:ae,useValue:t,multi:!0}),{providers:n,mainModule:Vc}}};Hc=Vc=(0,ve.__decorate)([(0,o.Yl)({providers:[...Rc,(0,i.J)({provide:c.Bi.spaTransition,multi:!0,useFactory:({metaWalk:e,metaUpdaters:t})=>{const r=new mc({list:Tt()(t||[]),transformValue:Tc,converters:Fc,metaWalk:e});let n=!1;const o=()=>{n=!0,new Sc(r).update(),n=!1},s=O()(500,o);return e.subscribe((()=>{n||s()})),function(){e.reset(),o()}},deps:{metaWalk:ie,metaUpdaters:{token:ae,optional:!0,multi:!0}}})]})],Hc);var qc=r(2054),Bc=r(7783);const $c=e=>!e||e.length<=0?{}:e.reduce(((e,{type:t,component:r})=>(e[t]=r,e)),{});var Yc=r(1616);const zc=(0,G.V)("mgm_boxy"),Gc=(0,G.V)("EVENTEA_TOKEN"),Jc=(0,G.V)("EVENTEA_PROJECT_HANDLERS",{multi:!0}),Wc=(0,G.V)("EVENTEA_ROUTING"),Kc=(0,G.V)("EVENTEA_ERROR_HANDLERS"),Qc=(0,G.V)("EVENTEA_DEFAULT_LOG_HANDLER"),Zc=(0,G.V)("EVENTEA_STATIST_HANDLER"),Xc=(0,G.V)("EVENTEA_DEFAULT_TRACKING_HANDLER"),eu=(0,G.V)("EVENTEA_TWT_DATA_HANDLER"),tu=(0,G.V)("EVENTEA_DEFAULT_EVENT_HANDLER",{multi:!0}),ru=(0,G.V)("EVENTEA_DEFAULT_DATA_HANDLER",{multi:!0});var nu=r(4),ou=r(2421),su=r.n(ou),iu=r(746),au=r.n(iu),cu=r(3211);const uu="DYNAMIC",lu=_s()(uu,{}),du=e=>su()(Boolean,lu(e));var pu=r(2689);const hu=["npmVersion"];function fu(e){if(!e)return{};const t=Object.keys(e).filter((t=>void 0!==e[t])).reduce(((t,r)=>{return Object.assign({},t,{[(n=r,n.split("_").map(((e,t)=>0===t?e.toLowerCase():`${e[0]}${e.slice(1).toLowerCase()}`)).join(""))]:String(e[r])});var n}),{});return t}const gu=e=>({fatal:e.fatal.bind(e),error:e.error.bind(e),warn:e.warn.bind(e),info:e.info.bind(e),debug:e.debug.bind(e),trace:e.trace.bind(e)}),vu=e=>e.child({name:"remote",defaults:{remote:{emitLevels:{fatal:!0,error:!0,warn:!0,info:!0,debug:!0,trace:!0}}}});function mu(e){const t=e("boxy-di-logger");return Object.assign({},gu(t),{remote:gu(vu(t)),createNamespace:e=>{const r=t.child(e);return Object.assign({},gu(r),{remote:gu(vu(r))})}})}var yu=r(2322),bu=r.n(yu),Su=r(3017),_u=r(6348);const Eu=(0,Te.y)("boxy ssr data set"),wu=(0,_e.L)("boxy",{ssrData:{}}).on(Eu,((e,t)=>t)),Ou=["getTree","createUse","createUseOptions","dival"],ku=["createUseOptions"],Tu=["act"],Cu=(new Set(["env","runtimeEnv","appName","appId","isAuthorized","isUserAuthorized"]),new Set(["showRegionPopup"]));r(8418);const Ru=(0,rt.Z)({name:"mainDefault",components:{pageDefault:()=>{const{BoxyRenderer:e}=(0,io.x)({BoxyRenderer:pu.zU});return(0,Vn.jsx)(e,{},void 0)}}}),Mu=[(0,i.J)({provide:pu.Hs,useClass:class{constructor({fallbackMapping:e,customMapping:t,baseMappingExtensions:r,boxyLazy:n}){this.map={},this.fallbackMapping=$c(e),this.customMapping=$c(t),this.baseMappingExtension=r?r.reduce(((e,t)=>Object.assign(e,t)),{}):void 0,this.boxyLazy=n||void 0,this.cookieMapping=void 0}isValidMapping(e){return Object.keys(e).reduce(((t,r)=>t&&Object.keys(e[r]).reduce(((t,n)=>(e[r][n],t)),!0)),!0)}setCookieMapping(e){try{const t=JSON.parse(e);this.isValidMapping(t)&&(this.cookieMapping=t)}catch(e){}}registerMap(e){this.map=e}registerTree(e){this.tree=e}getTree(){return this.transformTree(this.tree)}transformTree(e){const t=this.baseMappingExtension||this.boxyLazy||this.cookieMapping;return e&&t?(0,Bc.mapTree)(e,(e=>{var t,r,n,o,s,i,a,c,u,l;const d=null===(r=null===(t=this.baseMappingExtension)||void 0===t?void 0:t[e.type])||void 0===r?void 0:r[e.version],p=null!==(s=null!==(n=null==d?void 0:d.lazy)&&void 0!==n?n:null===(o=e.render)||void 0===o?void 0:o.lazy)&&void 0!==s?s:null===(i=this.boxyLazy)||void 0===i?void 0:i.lazy;if(!d&&!e.render)return e;const h=null===(c=null===(a=this.cookieMapping)||void 0===a?void 0:a[e.type])||void 0===c?void 0:c[e.version];if((null===(u=this.boxyLazy)||void 0===u?void 0:u.lazy)||d||h){let t=null!=d?d:e.render;return(null===(l=e.render)||void 0===l?void 0:l.overwriteLocal)&&(t=e.render),Object.assign({},e,{render:Object.assign({},t,h,p&&{lazy:p})})}return e})):e}getMap(){return this.map}getComponent({type:e,render:t},r={},n={}){let o;if(t){const r="clientJs";o=r in t?t[r]:`${e}@${t.npmVersion}`}return n[e]||this.customMapping[e]||o&&this.map[o]||r[e]||this.fallbackMapping[e]}createUse(e={}){return t=>this.getComponent(t,e.fallbackBlockMap,e.customBlockMap)||e.notFound}},deps:{fallbackMapping:{token:pu.Af,multi:!0,optional:!0},customMapping:{token:pu.go,multi:!0,optional:!0},baseMappingExtensions:{token:pu.kE,multi:!0,optional:!0},boxyLazy:{token:pu.iO,optional:!0}}}),(0,i.J)({provide:pu.zU,useFactory:({boxyService:e,analyticsConfig:t,boxyMetrics:r,authenticator:n,pageService:o,getUnchargedDival:s,context:i,boxyPubsub:a})=>c=>{const{dival:u}=c,{ssrData:l}=(0,Su.v)(wu,(({boxy:e})=>({ssrData:e.ssrData}))),{roles:d,featureToggle:p,region:h,referrer:f}=i.getState(),g=(0,Su.v)([d&&"roles",p&&"featureToggle",h&&"region",f&&"referrer"].filter(Boolean),(e=>({roles:e.roles,featureToggle:e.featureToggle,region:e.region,referrer:e.referrer}))),v=s(g);n&&(v.logout=()=>n.logout()),o&&(v.navigate=e=>o.navigate(e)),t&&(v.trackingOptions=t.blocks);const m=function({dival:e,ssrData:t,unchargedDival:r}){const n=Object.assign({},e,r,{env:Object.assign({},r.env,null==e?void 0:e.env),runtimeEnv:Object.assign({},r.runtimeEnv,null==e?void 0:e.runtimeEnv)});return Object.assign({},n,t)}({dival:u,ssrData:l,unchargedDival:v}),y=function(e,t){var r,n,o;const{getTree:s,createUse:i,createUseOptions:a,dival:c}=e,u=(0,ge.Z)(e,Ou),l=(0,nt.useRef)({cacheKeys:{simpleProps:null,createUseOptions:null},data:null}),d=(0,ge.Z)(e,ku);if(!bu()(l.current.cacheKeys.simpleProps,d)||!bu()(l.current.cacheKeys.createUseOptions,a)){const e=()=>{const e=[];return Promise.resolve().then((()=>{t.boxyMetrics.blocksRendered(),e.length&&t.boxyMetrics.blockMiss(e)})).catch((()=>{})),t=>{e.push(t)}};l.current={cacheKeys:{createUseOptions:a,simpleProps:d},data:Object.assign({},u,{miss:e(),missedDi:({key:e,subtree:r})=>t.boxyMetrics.diMiss(r.type,e),tree:s?s():t.boxyService.getTree(),use:i?i():t.boxyService.createUse(a)})}}return(null===(r=l.current.data.tree.content)||void 0===r?void 0:r.length)||null===(o=(n=t.boxyMetrics).emptyContent)||void 0===o||o.call(n),l.current.data}(c,{boxyService:e,boxyMetrics:r}),{act:b}=y,S=(0,ge.Z)(y,Tu),_=(0,nt.useCallback)((e=>{b&&b(e);const t="object"==typeof e&&(null==e?void 0:e.type);Cu.has(t)&&a.publish("page-maker-action",e)}),[b]);return(0,Vn.jsx)(_u.Z,Object.assign({act:_},S,{dival:m}),void 0)},deps:{boxyService:pu.Hs,analyticsConfig:{token:"analyticsConfig",optional:!0},analytics:{token:"analytics",optional:!0},appInfo:c.Qo,boxyMetrics:pu.tK,envManager:b.v,cookieManager:ke.T,getAppId:{token:Yc.DG,optional:!0},authenticator:{token:Wi,optional:!0},pageService:{token:Q.Y9,optional:!0},getUnchargedDival:pu.HU,context:Oe,boxyPubsub:pu.jp}}),{provide:k.Ym,useValue:[wu],multi:!0},(0,i.J)({provide:pu.HU,useFactory:e=>({roles:t,referrer:r,featureToggle:n,region:o})=>function({analytics:e,cookieManager:t,envManager:r,pageService:n,getAppId:o,appInfo:s,userAgent:i,logger:a,sessionManager:c,wuid:u,roles:l,featureToggle:d,region:p,referrer:h,mgm:f,eventea:g}){var v;const m=null==n?void 0:n.getCurrentUrl(),y=null==o?void 0:o(),b=nu.QO(l),S=nu.C5(l),_=du(l),E=S||_;return Object.assign({env:fu(r.getAll()),logger:mu(a),getWuid:()=>u,trackingService:e||void 0,runtimeEnv:Object.assign({},t&&{cookies:t.all()},{location:Object.assign({},m||{},{query:null==m?void 0:m.query})},"string"==typeof h&&{referrer:h})},i&&{userAgent:i},(null==s?void 0:s.appName)&&{appName:null==s?void 0:s.appName},y&&{appId:y},{layout:"mobile"===(null===(v=null==i?void 0:i.device)||void 0===v?void 0:v.type)?"mobile":"desktop"},l&&{roles:l,isAuthorized:b,isUserAuthorized:E},d&&{featureToggle:d},p&&{currentRegion:null==p?void 0:p.currentRegion},c&&{getSessionId:async()=>c.getSessionId()},n&&{setUrlQuery:e=>n.updateCurrentRoute({query:e})},{mgm:f,eventea:g})}(Object.assign({},e,{roles:t,referrer:r,featureToggle:n,region:o})),deps:{analytics:{token:"analytics",optional:!0},envManager:b.v,cookieManager:{token:ke.T,optional:!0},getAppId:{token:Yc.DG,optional:!0},pageService:{token:Q.Y9,optional:!0},appInfo:{token:c.Qo,optional:!0},userAgent:{token:Z,optional:!0},logger:y.F,sessionManager:{token:Ki,optional:!0},wuid:S.$,mgm:{token:zc,optional:!0},eventea:{token:Gc,optional:!0}}}),(0,i.J)({provide:Qe,multi:!0,useFactory:({boxyDefaultBundle:e})=>({mainDefault:e}),deps:{boxyDefaultBundle:pu.IB}}),(0,i.J)({provide:pu.IB,useValue:Ru}),(0,i.J)({provide:pu.jp,useFactory:({pubSubFactory:e})=>e(),deps:{pubSubFactory:Xe}})],Pu=[{provide:pu.tK,useFactory:({logger:e,papiService:t,pageService:r,eventea:n})=>({blocksRendered:()=>{null==n||n.send({project:"boxy",event:"pagemaker-client-rendered"})},blockMiss:t=>{null==n||n.send({project:"boxy",event:"block-client-fallback",payload:{blocksCount:t.length,blockTypes:t.map((({type:e,version:t})=>`${e}-v${t}`))}}),null==e||e.error({event:"boxy-block-client-fallback",message:"Blocks were fallbacked by page-maker",blocks:t.map((e=>`${e.type}:${e.version}`))})},diMiss:(e,t)=>{null==n||n.send({project:"boxy",event:"di-required-key-missed",payload:{type:e,key:t}})},emptyContent:()=>{var t;null==e||e.error({event:"boxy-render-empty-content",message:"Empty content",href:null===(t=null==r?void 0:r.getCurrentUrl())||void 0===t?void 0:t.href})}}),deps:{logger:{token:y.F,optional:!0},papiService:Qo,pageService:Q.Y9,eventea:{token:Gc,optional:!0}}}];let xu=class{};xu=(0,ve.__decorate)([(0,o.Yl)({providers:[...Mu,...Pu,(0,i.J)({provide:c.Bi.resolvePageDeps,useFactory:({boxyService:e,pageService:t,cookieManager:r,envManager:n})=>async function(){const o=t.getContent();if(!o)return;e.setCookieMapping(r.get("cookieMapping")),e.registerTree(o);const s=e.getTree(),i=await(0,qc.Z)({tree:s,baseUrl:n.get("BOXY_BASE_URL")});return e.registerMap(i),Promise.resolve()},multi:!0,deps:{boxyService:pu.Hs,pageService:Q.Y9,context:Oe,cookieManager:ke.T,envManager:b.v}}),{provide:b.s,useValue:[{key:"BOXY_BASE_URL"}],multi:!0}]})],xu);const Iu=(0,Te.y)("updateReferrer"),Nu=(0,_e.L)("referrer","").on(Iu,((e,t)=>t));let ju=class{};ju=(0,ve.__decorate)([(0,o.Yl)({providers:[{provide:k.Ym,multi:!0,useValue:Nu},{provide:c.Bi.spaTransition,multi:!0,useFactory:({store:e})=>function(){return e.dispatch(Iu(e.getState(Tn).currentUrl.href))},deps:{store:k.kR}}]})],ju);let Au=class{};Au=(0,ve.__decorate)([(0,o.Yl)({providers:[]})],Au);let Du=class{};Du=(0,ve.__decorate)([(0,o.Yl)({providers:[{provide:"additionalLabelNames",useValue:["unsafe_ignore_in_alerting"],multi:!0},{provide:"getAdditionalLabelValues",useValue(e){var t,r,n,o;return e.url.includes("/undefinedcollect")?{unsafe_ignore_in_alerting:"undefinedcollect"}:(null===(t=e.headers)||void 0===t?void 0:t["appsec-scanner"])?{unsafe_ignore_in_alerting:"appsec-scanner"}:(null===(r=e.headers)||void 0===r?void 0:r["x-bug-bounty"])?{unsafe_ignore_in_alerting:"x-bug-bounty"}:(null===(n=e.query)||void 0===n?void 0:n.previewToken)?{unsafe_ignore_in_alerting:"previewToken"}:(null===(o=e.query)||void 0===o?void 0:o.preview_creative)?{unsafe_ignore_in_alerting:"preview_creative"}:{}},multi:!0}]})],Du);const Lu=(0,Te.y)("UPDATE_UI_MODULES_CONFIG"),Uu=(0,_e.L)("uiModulesConfig",{}).on(Lu,((e,t)=>t)),Fu=[{provide:k.Ym,useValue:Uu,multi:!0}];let Vu=class{};Vu=(0,ve.__decorate)([(0,o.Yl)({providers:[...Fu]})],Vu);const Hu=(0,G.V)("UIMODULE_CONFIG_KEYS",{multi:!0}),qu=(0,G.V)("FOOTER_COMPONENT_TOKEN"),Bu=(0,G.V)("FOOTER_CONFIG_TRANSFORM_TOKEN"),$u=(0,G.V)("FOOTER_OPEN_MODEL_CALLBACK_TOKEN"),Yu=(0,G.V)("FOOTER_HANDLE_METRICS_TOKEN");var zu=r(543),Gu=r.n(zu),Ju=r(9329),Wu=r.n(Ju),Ku=r(9331),Qu=r.n(Ku),Zu=r(3411),Xu=r.n(Zu),el=r(8318),tl=r.n(el);const rl=e=>t=>{const[r,n]=(0,nt.useState)(!1);return(0,nt.useEffect)((()=>{if(!t.current||r)return;const o=new IntersectionObserver(((e,t)=>{e.forEach((({isIntersecting:e})=>{e&&(t.disconnect(),n(!0))}))}),e);return o.observe(t.current),()=>{o.disconnect()}}),[t]),r},nl={__html:""},ol=rl({root:null,rootMargin:"200px 0px 0px 0px"}),sl=({mode:e,children:t,useObserver:r=ol,wrapper:n="div",wrapperProps:o={}})=>{const s=(0,nt.useRef)(null);return r(s)||"static"===e?ot().createElement(n,Object.assign({},o),t):ot().createElement(n,Object.assign({ref:s,suppressHydrationWarning:!0,dangerouslySetInnerHTML:nl},o))};sl.displayName="LazyRender";const il=Xu()([[Gu(),ot().createElement],[Wu(),ot().cloneElement],[d(),mr()],[tl(),hi()("")]]);class al extends nt.Component{constructor(e,t){super(e,t);const{loader:r}=this.props,n=null==r?void 0:r(e.moduleName,e.moduleVersion,{lazy:!!e.lazy}),o=Qu()(n);this.state={module:o||!n?null:n.default,failed:!n},o&&n.then((e=>this.setState({module:e.default}))).catch((()=>this.setState({failed:!0})))}render(){const{error:e,loading:t,moduleProps:r,moduleInitialState:n,moduleInnerStore:o}=this.props,{module:s,failed:i}=this.state;return s?(0,Vn.jsx)(s,Object.assign({},r,{moduleInnerStore:o,moduleInitialState:n}),void 0):il(i?e:t)}}al.displayName="ModuleWrapper",al.defaultProps={error:(0,Vn.jsx)("div",{},void 0),loading:(0,Vn.jsx)("div",{},void 0)};const cl={root:null,rootMargin:"200px 0px 0px 0px"},ul=e=>{const{moduleName:t,moduleVersion:r,loader:n,lazyMode:o,lazyObserverOptions:s,lazyWrapper:i,lazyWrapperProps:a}=e,c=(0,nt.useMemo)((()=>(({moduleName:e,moduleVersion:t,loader:r,lazyObserverOptions:n})=>{const o=rl(n||cl);return n=>{const s=o(n),[i,a]=(0,nt.useState)(!1);return(0,nt.useEffect)((()=>{s&&r&&Promise.resolve(r(e,t)).catch(Kt()).then((()=>{a(!0)}))}),[s]),i}})({moduleName:t,moduleVersion:r,loader:n,lazyObserverOptions:s})),[t,r,n,s]);return(0,Vn.jsx)(sl,Object.assign({useObserver:c,wrapper:i,wrapperProps:a,mode:o},{children:(0,Vn.jsx)(al,Object.assign({},e),void 0)}),void 0)},ll=e=>(0,Vn.jsx)(Qa.Consumer,{children:({loader:t})=>e.lazy?(0,Vn.jsx)(ul,Object.assign({},e,{loader:t,lazyMode:void 0}),void 0):(0,Vn.jsx)(al,Object.assign({},e,{loader:t}),void 0)},void 0),dl=e=>{const{moduleName:t,moduleProps:r}=e,n=(0,io.x)(y.F),o=(0,Su.v)("module",(({module:{modulesState:e,modulesInnerStore:r}})=>({moduleInitialState:e[t],moduleInnerStore:r[t]})));return(0,Vn.jsx)(ll,Object.assign({},e,o,{moduleProps:Object.assign({logger:n},r)}),void 0)},pl=(e,t)=>"string"==typeof e?{[e]:t}:"object"==typeof e?e:null;var hl=r(6537),fl=r.n(hl);var gl=r(4083),vl=r.n(gl);function ml(e){return!!e.synchronized}function yl(e){return!!e.supposed}function bl(e){return!!e.retina}function Sl(e){return e.width<=vl().PHONE_SMALL}function _l(e){return e.width>=vl().TABLET_S}function El(e){return e.width>=vl().TABLET_L}function wl(e){return e.width>=vl().DESKTOP_S}function Ol(e){return e.width>=vl().DESKTOP_M}function kl(e){return e.width>=vl().DESKTOP_MD}function Tl(e){return e.width>=vl().DESKTOP_L}function Cl(){const e=(0,Su.v)("media",(({media:e})=>e));return(0,nt.useMemo)((()=>function(e){return{fromClientHints:ml(e),supposed:yl(e),isRetina:bl(e),isPhone:!_l(e),isPhoneSmall:Sl(e),isTablet:_l(e),isTabletS:_l(e),isTabletL:El(e),isMobile:!wl(e),isDesktop:wl(e),isDesktopS:wl(e),isDesktopM:Ol(e),isDesktopMd:kl(e),isDesktopL:Tl(e)}}(e)),[e])}const Rl=qt()(ca()("auth"),Ot()(["query"],{})),Ml=fl()(((e,t)=>{var r;const n=rc(e,t);return Object.assign({},n,{url:null===(r=n.parsedUrl)||void 0===r?void 0:r.path})}),((e,t)=>e===t)),Pl=qt()((xl={openModal:{token:$u,optional:!0},transformConfig:{token:Bu,optional:!0},pubsub:et,handleMetrics:{token:Yu,optional:!0}},e=>ut()((function(t){const r=(0,io.x)(xl);return(0,Vn.jsx)(e,Object.assign({},t,r),void 0)}),e)),(e=>{const t=({uiModulesConfig:{footerConfig:e},router:{currentRoute:t,currentUrl:r},roles:n,featureToggle:o})=>({isAuth:(0,nu.QO)(n),isPreAuth:Rl(r)||!1,isClient:(0,nu.C5)(n),currentRoute:Ml(t,r),footerConfig:e,featureToggle:o,userRoles:n,inheritedPhone:t.config.footerPhone});return function(r){var n;const o=(0,Su.v)(["uiModulesConfig","featureToggle","router",{store:"roles",optional:!0}],t),s=Cl(),i=null!==(n=r.transformConfig)&&void 0!==n?n:mr(),a=r.handleMetrics||mr();return(0,Vn.jsx)(e,Object.assign({},r,o,{media:s,transformConfig:i,handleMetrics:a}),void 0)}}));var xl;const Il=["variation","lazyWrapperProps"],Nl={style:{marginTop:"auto"}},jl=qt()(nt.memo,Pl)((e=>{let{variation:t,lazyWrapperProps:r}=e,n=(0,ge.Z)(e,Il);return(0,Vn.jsx)(dl,{moduleName:"footer",lazy:!0,lazyWrapperProps:r||Nl,moduleProps:Object.assign({},n,{variation:pl(t,n)})},void 0)}));let Al=class{};Al=(0,ve.__decorate)([(0,o.Yl)({imports:[Vu],providers:[{provide:qu,useValue:jl},{provide:Hu,multi:!0,useValue:"footerConfig"}]})],Al);const Dl=(0,G.V)("HEADER_MENU_TRANSFORM_TOKEN"),Ll=(0,G.V)("HEADER_CONFIG_TRANSFORM_TOKEN"),Ul=qt()(ca()("auth"),Ot()(["query"],{})),Fl=fl()(((e,t)=>{var r;const n=rc(e,t);return Object.assign({},n,{url:null===(r=n.parsedUrl)||void 0===r?void 0:r.path})}),((e,t)=>e===t)),Vl=({featureToggle:e,router:{currentRoute:t,currentUrl:r},roles:n,environment:{TINKOFF_API:o,SME_URL:s},menuCounters:i})=>({authorized:(0,nu.QO)(n),isPreAuth:Ul(t.parsedUrl)||!1,currentRoute:Fl(t,r)||{currentRoute:{config:{}}},featureToggle:e,userRoles:n,tinkoffApi:o,smeUrl:s,menuCounters:i}),Hl=["variation"],ql=qt()(nt.memo,(e=>function(t){const{appInfo:r,transformMenu:n,transformConfig:o,pubsub:s}=(0,io.x)({appInfo:c.Qo,pubsub:et,transformMenu:{token:Dl,optional:!0},transformConfig:{token:Ll,optional:!0}}),i=Cl(),a=(0,Su.v)(["featureToggle","router","environment",{store:"menuCounters",optional:!0},{store:"roles",optional:!0},{store:"region",optional:!0}],Vl),{appName:u}=null!=r?r:{},l=(0,nt.useMemo)((()=>null!=n?n:mr()),[n]),d=(0,nt.useMemo)((()=>null!=o?o:mr()),[o]);return(0,Vn.jsx)(e,Object.assign({},t,a,{transformMenu:l,transformConfig:d,media:i,appId:u,pubsub:s}),void 0)}))((e=>{let{variation:t}=e,r=(0,ge.Z)(e,Hl);return(0,Vn.jsx)(dl,{moduleName:"header",moduleProps:Object.assign({},r,{variation:pl(t,r)})},void 0)})),Bl=(0,G.V)("HEADER_COMPONENT_TOKEN");let $l=class{};$l=(0,ve.__decorate)([(0,o.Yl)({imports:[Vu],providers:[{provide:dn,multi:!0,useValue:[{type:Mo.asIs,slot:"body:start",payload:'<input id="menuPrimaryToggle" type="checkbox" class="h-menu-primary-toggle" hidden />'}]},{provide:Bl,useValue:ql},{provide:Hu,multi:!0,useValue:"headerConfig"}]})],$l);let Yl=class{};Yl=(0,ve.__decorate)([(0,o.Yl)({imports:[],providers:[]})],Yl);let zl=class{};zl=(0,ve.__decorate)([(0,o.Yl)({imports:[],providers:[]})],zl);let Gl=class{};Gl=(0,ve.__decorate)([(0,o.Yl)({imports:[],providers:[]})],Gl);const Jl=(e,t)=>function(r){const n=(0,nt.useMemo)((()=>({style:{marginTop:"auto"},"data-module-type":e})),[]);return(0,Vn.jsx)(t,Object.assign({},r,{variation:e,lazyWrapperProps:n}),void 0)};var Wl=r(4990);const Kl=({children:e})=>{const t=Cl();return(0,Vn.jsx)(Wl.MediaProvider,Object.assign({value:t},{children:e}),void 0)},Ql={display:"flex",flexDirection:"column",minHeight:"100vh"},Zl=(0,G.V)("makeHeaderFunctionToken"),Xl=[{provide:Zl,useValue:(e,t)=>function(r){return(0,Vn.jsx)(t,Object.assign({},r,{variation:e}),void 0)}},{provide:pu.Af,multi:!0,useFactory:({HeaderComponent:e,makeHeaderFunc:t})=>({type:"headerSlim",component:t("headerSlim",e)}),deps:{HeaderComponent:Bl,makeHeaderFunc:Zl}},{provide:pu.Af,multi:!0,useFactory:({HeaderComponent:e,makeHeaderFunc:t})=>({type:"header",component:t("header",e)}),deps:{HeaderComponent:Bl,makeHeaderFunc:Zl}},{provide:pu.Af,multi:!0,useFactory:({FooterComponent:e})=>({type:"productFooter",component:Jl("productFooter",e)}),deps:{FooterComponent:qu}},{provide:pu.Af,multi:!0,useFactory:({FooterComponent:e})=>({type:"advertFooter",component:Jl("advertFooter",e)}),deps:{FooterComponent:qu}},{provide:b.s,multi:!0,useValue:[{key:"TINKOFF_API",validator:f([p,h("/")])},{key:"SME_URL",validator:p,optional:!0}]},{provide:_n,multi:!0,useValue:{wrappers:{layout:e=>t=>(0,Vn.jsx)("div",Object.assign({style:Ql},{children:(0,Vn.jsx)(Kl,{children:(0,Vn.jsx)(e,Object.assign({},t),void 0)},void 0)}),void 0)}}}];let ed=class{};ed=(0,ve.__decorate)([(0,o.Yl)({imports:[],providers:Xl})],ed);const td=[{provide:c.Bi.customerStart,useFactory:()=>function(){window.self!==window.top||console.log("%c  ?     fb@tinkoff.ru \n     ?     frontend@tinkoff.ru","background-color: #ffdd2d; color: #333; ")},multi:!0}];let rd=class{};rd=(0,ve.__decorate)([(0,o.Yl)({imports:[Ne,dc,Al,$l,Yl,zl,Gl,ed],providers:td})],rd);let nd=class{};nd=(0,ve.__decorate)([(0,o.Yl)({providers:[]})],nd);const od=[{provide:"boundaryCollect",useFactory:e=>{let t=!1;return r=>{t||(t=!0,void 0!==r?e.eventea.send({project:"pwa",event:"app-start-fail",payload:{errorMessage:r.message,errorStack:r.stack}}):e.eventea.send({project:"pwa",event:"app-start-success",payload:{userRole:e.getUserRole()}}))}},deps:{eventea:Gc,getUserRole:"getUserRole"}},{provide:pn,useFactory:({boundaryCollect:e})=>e,deps:{boundaryCollect:"boundaryCollect"},multi:!0},{provide:ao,useFactory:({boundaryCollect:e})=>e,deps:{boundaryCollect:"boundaryCollect"},multi:!0},{provide:"getUserRole",scope:a.s.SINGLETON,useFactory:({context:e})=>()=>{const{roles:t}=e.getState();return t?nu.TF(t)?"anonymous":nu.C5(t)?"client":nu.QO(t)?"lightClient":"unknown":"inaccessible"},deps:{context:Oe}}];var sd=r(1453);const id=[(0,i.J)({provide:c.Bi.init,useFactory({tracking:e,logger:t}){const r=t({name:"personalized-landing-metrics",defaults:{remote:!0}});return e?()=>{window.addEventListener("load",(()=>{setTimeout((()=>{const t=Ho();e.waitFor("personalizedLandingMetrics").then((()=>{const{personalizedLandingMetrics:n}=e.state;if(!n)throw new Error("personalizedLandingMetrics is missed in tracking");const{enrichmentTechInfo:o={},state:s}=n,{dcoAppliedStatus:i}=o;r.info({event:"dco-applied-info",dcoAppliedStatus:i,dcoState:s,backend:"backend"in t?t.backend:void 0,pageDownload:"pageDownload"in t?t.pageDownload:void 0,"first-paint":"first-paint"in t?t["first-paint"]:void 0,domInteractive:"domInteractive"in t?t.domInteractive:void 0,domComplete:"domComplete"in t?t.domComplete:void 0,pageLoadTime:"pageLoadTime"in t?t.pageLoadTime:void 0})}),(e=>{r.error({event:"dco-applied-info-error",error:e})})).catch((e=>{r.error({event:"dco-monitoring-error",error:e})}))}),0)}))}:(r.error({event:"dco-monitoring-error",error:new Error("@tramvai/module-analytics not connected")}),()=>{})},deps:{tracking:{token:sd.t3,optional:!0},logger:y.F},multi:!0})],ad=[(0,i.J)({provide:Yu,useFactory:({eventea:e})=>t=>{e.send({project:"pwa",event:"footer-rendered",payload:{firstLevelRendersTotal:Number(t.firstLevel),secondLevelRendersTotal:Number(t.secondLevel),thirdLevelRendersTotal:Number(t.thirdLevel)}})},deps:{eventea:Gc}})],cd={provide:pn,useFactory:({eventea:e})=>()=>{try{const t=new PerformanceObserver((r=>{for(const n of r.getEntries()){const r=n.processingStart-n.startTime;e.send({project:"pwa",event:"client-perf",payload:{fid:r}}),t.disconnect()}}));t.observe({type:"first-input",buffered:!0})}catch(e){}},deps:{eventea:Gc},multi:!0};let ud=class{};ud=(0,ve.__decorate)([(0,o.Yl)({providers:[...od,...id,...ad,cd]})],ud);var ld=r(9422),dd=r(538);const pd={trace:!0,debug:!0,info:!0,warn:!0,error:!0,fatal:!0},hd=(0,i.J)({provide:Qc,useFactory:({logger:e,analytics:t})=>{const r=e({name:"eventea-logger",defaults:{remote:!0}});return function({event:e,payload:n,config:o,project:s}){var i;let a="hasNotFetchedYet";const c=(null==o?void 0:o.level)||o,u=null!==(i=null==o?void 0:o.samplingRate)&&void 0!==i?i:1,l=()=>{var t;"string"==typeof c&&pd[c]&&c in r?(0===(t=u)||1===t?t:Math.random()<=t)&&r[c]({event:e,eventeaProject:s,payload:n,dcoGeneralId:a}):r.error({event:"eventea-wrong-logs-config",originalEvent:e,originalLevel:c})};t.waitFor("personalizedLandingMetrics").then((()=>{const{personalizedLandingMetrics:e}=t.state;if(!e)return void r.error("Unable to resolve personalizedLandingMetrics in analytics module.");const{state:{dcoGeneralId:n=""}}=e;n&&(a=n,l())})).catch((e=>{r.error({event:"eventea-dco-monitoring-error",error:e})})),l()}},deps:{logger:y.F,analytics:{token:sd.t3,optional:!0}}});var fd=r(7824);const gd="5.48.0",vd=(0,i.J)({provide:Xc,useFactory:({analytics:e,logger:t})=>{const r=t({name:"eventea-logger-tracking",defaults:{remote:!0}});if(!e)return void t.warn("There is no analytics module, EVENTEA_TRACKING_HANDLER WILL NOT WORK");const n=e.callUtil("makeEventeaHandler");let o=!1;return t=>{o?(0,fd.OR)(e,t):n.then((e=>{e(t)})).catch((e=>{o=!0,r.error({event:`Unable to resolve makeEventeaHandler. Fallback to twt-eventea-handler v${gd}`,error:e})}))}},deps:{analytics:{token:sd.t3,optional:!0},logger:y.F}}),md=(0,i.J)({provide:eu,useFactory:({analytics:e,logger:t})=>{const r=t({name:"eventea-logger-twt-data",defaults:{remote:!0}});if(!e)return void t.warn("There is no analytics module, EVENTEA_TWT_DATA_HANDLER WILL NOT WORK");const n=e.callUtil("makeEventeaDataHandler");let o=!1;return t=>{o?(0,fd.x4)(e,t):n.then((e=>{e(t)})).catch((e=>{o=!0,r.error({event:`Unable to resolve makeEventeaDataHandler util. Fallback to twt-eventea-data-handler v${gd}`,error:e})}))}},deps:{analytics:{token:sd.t3,optional:!0},logger:y.F}}),yd=(0,Te.y)("set routing map"),bd=(0,_e.L)("eventea",{routingMap:{}}).on(yd,((e,t)=>({routingMap:t}))),Sd=[{provide:k.Ym,multi:!0,useValue:[bd]}];var _d;const Ed={routingMap:Wc,errorHandlers:Kc,projectHandlersList:{token:Jc,multi:!0},envManager:b.v,appInfo:c.Qo,defaultEventHandlers:{token:tu,multi:!0},defaultDataHandlers:{token:ru,multi:!0}};let wd=_d=class{static forRoot({projects:e}){const t=e.map((({project:e,fallbackForServer:t})=>(0,i.J)({provide:Jc,multi:!0,useFactory:({logger:r})=>(t&&r("eventea-logger-module-forRoot").error([`You passed fallbackForServer to the client for project ${e}, this will bloat your client build.`,"See eventea documentation on how this can be avoided."].join("\n")),{project:e}),deps:{logger:y.F}})));return{mainModule:_d,providers:t}}};wd=_d=(0,ve.__decorate)([(0,o.Yl)({imports:[],providers:[...Sd,{provide:Gc,useFactory({routingMap:e,errorHandlers:t,projectHandlersList:r,envManager:n,appInfo:o,defaultEventHandlers:s,defaultDataHandlers:i}){const a=(()=>{const e=Object.create(null);return{useEvent:({project:t,event:r})=>{e[t]||(e[t]=Object.create(null)),e[t][r]=!0},getUsedEvents:()=>Object.keys(e).map((t=>({projectName:t,eventList:Object.keys(e[t])})))}})(),c=null==n?void 0:n.get("EVENTEA_PROJECTS"),u=([...r,...(c&&c.match(/[a-zA-Z0-9\-\_]+/g)||[]).map((e=>({project:e})))]||[]).reduce(((t,r)=>(t[r.project]={eventHandlers:r.eventHandlers,dataHandlers:r.dataHandlers,routing:e[r.project]},t)),{}),l=s.reduce(((e,{name:t,handler:r})=>Object.assign({},e,{[t]:r})),{}),d=i.reduce(((e,{name:t,handler:r})=>Object.assign({},e,{[t]:r})),{}),p=new ld.k({projectConfigurationMap:u,errorHandlers:t,beerBaseUrl:n.get("EVENTEA_BEER_URL"),handlersData:{appName:o.appName,appVersion:n.get("APP_VERSION"),appRelease:n.get("APP_RELEASE")},handleAnyEvent:e=>{a.useEvent(e)},defaultEventHandlers:l,defaultDataHandlers:d});return window.addEventListener("beforeunload",(()=>{const e=a.getUsedEvents();e.length&&e.forEach((({projectName:e,eventList:t})=>{p.sendOnce({project:"eventea",event:"usage-stats",payload:{projectName:e,eventList:t}},e)}))})),window.__eventea=p,p},deps:Ed},{provide:Wc,useFactory:({context:e})=>e.getState(bd).routingMap,deps:{context:Oe}},{provide:Kc,useFactory({logger:e}){const t=e("eventea-error-handlers");return{handleMissedEvent:({event:e,project:r})=>{t.error({event:"eventea-missed-event",project:r,eventName:e})},handleMissedEventHandler:({event:e,routeHandlerName:r,project:n})=>{t.error({event:"eventea-missed-event-handler",eventName:e,project:n,routeHandlerName:r})},handleMissedProject:({event:e,project:r})=>{t.error({event:"eventea-missed-project",project:r,eventName:e})},handleMissedRouting:({project:e})=>{t.error({event:"eventea-missed-routing",project:e})},handleMissedDataHandler:({project:e,handlerName:r})=>{t.error({event:"eventea-missed-data-handler",project:e,handlerName:r})},handleMissedDataProject:({project:e})=>{t.error({event:"eventea-missed-data-project",project:e})},handleMissedRoutes:({project:e,event:r})=>{t.error({event:"eventea-missed-routes",project:e,eventName:r})},handleDeprecatedEvent:({project:e,event:r})=>{t.info({event:"eventea-deprecated-event",project:e,eventName:r})},handleEventHandlerError:(e,r,{project:n,event:o})=>{t.error({event:"eventea-handler-error",project:n,eventName:o,handlerName:r,error:e})}}},deps:{logger:y.F}},vd,md,hd,(0,i.J)({provide:Jc,multi:!0,useValue:{project:"eventea"}}),(0,i.J)({provide:Zc,useFactory:({statistClient:e,logger:t})=>{if(e)return(0,dd.I)({statistClient:e});t.warn("There is no statist event api client, EVENTEA_STATIST_HANDLER WILL NOT WORK")},deps:{statistClient:{token:J,optional:!0},logger:y.F}}),(0,i.J)({provide:tu,useFactory:({statistHandler:e})=>({name:"statist",handler:e}),deps:{statistHandler:Zc},multi:!0}),(0,i.J)({provide:tu,useFactory:({logsHandler:e})=>({name:"logs",handler:e}),deps:{logsHandler:Qc},multi:!0}),(0,i.J)({provide:tu,useFactory:({trackingHandler:e})=>({name:"tracking",handler:e}),deps:{trackingHandler:Xc},multi:!0}),(0,i.J)({provide:ru,useFactory:({twtDataHandler:e})=>({name:"twt",handler:e}),deps:{twtDataHandler:eu},multi:!0})]})],wd);let Od=class{};Od=(0,ve.__decorate)([(0,o.Yl)({imports:[wd],providers:[(0,i.J)({provide:Jc,multi:!0,useValue:{project:"pwa"}})]})],Od);let kd=class{};kd=(0,ve.__decorate)([(0,o.Yl)({imports:[wd],providers:[(0,i.J)({provide:Jc,multi:!0,useValue:{project:"boxy"}})]})],kd);let Td=class{};Td=(0,ve.__decorate)([(0,o.Yl)({providers:[]})],Td);let Cd=class{};Cd=(0,ve.__decorate)([(0,o.Yl)({providers:[]})],Cd);var Rd=r(9267),Md=r.n(Rd),Pd=r(1897),xd=r.n(Pd),Id="NOT_FOUND",Nd=function(e,t){return e===t};function jd(e,t){var r,n,o="object"==typeof t?t:{equalityCheck:t},s=o.equalityCheck,i=void 0===s?Nd:s,a=o.maxSize,c=void 0===a?1:a,u=o.resultEqualityCheck,l=function(e){return function(t,r){if(null===t||null===r||t.length!==r.length)return!1;for(var n=t.length,o=0;o<n;o++)if(!e(t[o],r[o]))return!1;return!0}}(i),d=1===c?(r=l,{get:function(e){return n&&r(n.key,e)?n.value:Id},put:function(e,t){n={key:e,value:t}},getEntries:function(){return n?[n]:[]},clear:function(){n=void 0}}):function(e,t){var r=[];function n(e){var n=r.findIndex((function(r){return t(e,r.key)}));if(n>-1){var o=r[n];return n>0&&(r.splice(n,1),r.unshift(o)),o.value}return Id}return{get:n,put:function(t,o){n(t)===Id&&(r.unshift({key:t,value:o}),r.length>e&&r.pop())},getEntries:function(){return r},clear:function(){r=[]}}}(c,l);function p(){var t=d.get(arguments);if(t===Id){if(t=e.apply(null,arguments),u){var r=d.getEntries(),n=r.find((function(e){return u(e.value,t)}));n&&(t=n.value)}d.put(arguments,t)}return t}return p.clearCache=function(){return d.clear()},p}function Ad(e){var t=Array.isArray(e[0])?e[0]:e;if(!t.every((function(e){return"function"==typeof e}))){var r=t.map((function(e){return"function"==typeof e?"function "+(e.name||"unnamed")+"()":typeof e})).join(", ");throw new Error("createSelector expects all input-selectors to be functions, but received the following types: ["+r+"]")}return t}function Dd(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];var o=function(){for(var t=arguments.length,n=new Array(t),o=0;o<t;o++)n[o]=arguments[o];var s,i=0,a={memoizeOptions:void 0},c=n.pop();if("object"==typeof c&&(a=c,c=n.pop()),"function"!=typeof c)throw new Error("createSelector expects an output function after the inputs, but received: ["+typeof c+"]");var u=a,l=u.memoizeOptions,d=void 0===l?r:l,p=Array.isArray(d)?d:[d],h=Ad(n),f=e.apply(void 0,[function(){return i++,c.apply(null,arguments)}].concat(p)),g=e((function(){for(var e=[],t=h.length,r=0;r<t;r++)e.push(h[r].apply(null,arguments));return s=f.apply(null,e)}));return Object.assign(g,{resultFunc:c,memoizedResultFunc:f,dependencies:h,lastResult:function(){return s},recomputations:function(){return i},resetRecomputations:function(){return i=0}}),g};return o}var Ld=Dd(jd);const Ud=Ld(Ts()("currentRegion"),Ts()("deliveryRegion"),((e,t)=>t||e)),Fd=Ld(Ud,(e=>qt()(gs()(Ts()("namePrepositional"),Ts()("name")),Md()({}))(e))),Vd=Ld(Ts()("currentRegion"),(e=>qt()(Ts()("name"),Md()({}))(e))),Hd=Ld(Ts()("capitalsByRegions"),(e=>qt()(Ge(),Ut())(e))),qd=Ld((e=>e.currentRegionCapital),(e=>Bi()(["capitalsByRegions",Vd(e)])(e)),((e,t)=>e||t)),Bd=e=>({name:e}),$d=Ld(_s()("cityList",[]),zr()(Bd)),Yd=Ld(Ts()("searchQuery"),_s()("list",[]),((e,t)=>xd()((t=>Xs()(e,t.name.toLowerCase())),t))),zd=Ld(Hd,Ts()("searchQuery"),((e,t)=>{const r=zr()(Bd,e);return xd()((e=>Xs()(t,e.name.toLowerCase())),r||[])})),Gd=n,Jd=(0,G.V)("moduleRegionPopupShow");let Wd=!0;try{r(Object(function(){var e=new Error("Cannot find module '../tsconfig.json'");throw e.code="MODULE_NOT_FOUND",e}()))}catch(e){Wd=!1}let Kd,Qd=!Wd;try{Object(function(){var e=new Error("Cannot find module '@tramvai/module-route-base'");throw e.code="MODULE_NOT_FOUND",e}())}catch(C){Qd=!1}Kd=Qd?r(4945).H:r(6778).J;let Zd=class{};Zd=(0,ve.__decorate)([(0,o.Yl)({imports:[rd,fc,Kd,ju,Au,Du,nd,ud,Od,kd,Td,Cd],providers:[{provide:Zl,useValue:(e,t)=>function(r){const{toggleRegionPopup:n}=(0,io.x)({toggleRegionPopup:{optional:!0,token:Jd}}),o=(0,po.x)(),s=(0,nt.useCallback)((()=>{if(n)return o.executeAction(n,{})}),[n,o]),{currentRegion:i}=(0,Su.v)({store:"region",optional:!0},(({region:e})=>({currentRegion:Gd.getDeliveryCityPrepositional(e)})));return(0,Vn.jsx)(t,Object.assign({},r,{applicationOpenPopup:s,currentRegion:i,variation:e}),void 0)}},{provide:Zo,useValue:!0},{provide:sd.dZ,useValue:!0}]})],Zd);var Xd=r(87),ep=r.n(Xd),tp=r(9820),rp=r.n(tp),np=r(9833),op=r.n(np),sp=r(6495),ip=r.n(sp),ap=r(4271),cp=r.n(ap),up=r(1218);const lp=["click","scroll","keypress"],dp=12e4,pp=r.n(up)()(["sessionWillExpireIn"],(e=>e-(new Date).getTime()<=24e4)),hp=ip()(ra()(["accessLevel"],"ANONYMOUS")),fp=(op()(pp,hp),rp()(hp)),gp=(0,Te.y)("UPDATE_ROLES"),vp={[nu.$d]:(0,nu.Me)()},mp=(0,_e.L)("roles",vp).on(gp,((e,t)=>t)),yp=(0,Te.y)("UPDATE_SESSION"),bp=(0,_e.L)("session",{}).on(yp,((e,t)=>t));var Sp=r(2468),_p=r.n(Sp),Ep=r(4815),wp=r.n(Ep),Op=r(9726),kp=r.n(Op),Tp=r(9777),Cp=r.n(Tp),Rp=r(3089),Mp=r.n(Rp);const Pp=qt()(xd()((e=>!!e)),wp()(","),Ot()(["config","requiredRoles"],"")),xp=Ot()(["config","accessLevel"],0),Ip=Ot()(["config","authenticateFailureRedirectUrl"],""),Np=Ot()(["config","failureRedirectWithQueryParams"],!1);function jp(e,t=[]){const r=Mp()(e);return kp()((t=>kp()((r=>e[r][t]),r)),t)}const Ap=(e,t)=>{const r=Pp(e),n=(0,nu.mm)(xp(e));return r.length?!jp(t,r):((e,t)=>{const r=du(e),n=du(t);return!(r||!n)||!(r&&!n)&&(0,nu.lw)(e,t)})(t,n)},Dp=({route:e,url:t,roles:r,redirectType:n=""})=>{if((0,nu.QO)(r))return"/summary/";const{path:o,query:s}=t;if(_p()("/login/",t.pathname))return;const i=Np(e),a=Ip(e);return a?(0,qr.DI)(a,i?s:{}).path:(0,qr.DI)("/login/",{redirectTo:o,redirectType:Ot()(["config","loginRedirectType"],n,e)}).path};class Lp{constructor({strategies:e=[]}){this.strategies=e}async authenticate(){for(let e=0,t=this.strategies.length;e<t;++e){const t=this.strategies[e],{status:r,payload:n}=await this.authenticateBy(t);if("success"===r)return n}}async authenticateBy(e){return new Promise((t=>{const r={pass:()=>t({status:"pass"}),success:e=>t({status:"success",payload:e})};e.authenticate(r)}))}}class Up{constructor({sessionManager:e}){this.sessionManager=e}authenticate({success:e,pass:t}){this.sessionManager.authenticate().then(e).catch(t)}}class Fp extends Lp{constructor({strategies:e,sessionManager:t}){super({strategies:e}),this.prolongateSession=async e=>this.sessionManager.prolongateSession(e),this.sessionManager=t,this.authenticateDeferred=(()=>{let e,t;return{promise:new Promise(((r,n)=>{e=r,t=n})),resolve:e,reject:t}})()}async logout(){return this.sessionManager.logout()}async runAuthenticateFlow(){return this.sessionManager.runAuthenticateFlow()}}const Vp=[{provide:k.Ym,useValue:bp,multi:!0},{provide:k.Ym,useValue:mp,multi:!0},{provide:Q.sU,multi:!0,useFactory:({store:e,authenticateDeferred:t})=>async({to:r,url:n})=>{await t.promise;const{requested:o}=e.getState(bp),s=e.getState(mp);if(o&&Ap(r,s))return Dp({route:r,url:n,roles:s})},deps:{store:k.kR,authenticator:Wi,authenticateDeferred:"authenticateDeferred"}},{provide:Ze.xW,useFactory:({context:e})=>({key:"auth",fn:t=>{const{requiredCoreRoles:r,requiredRoles:n=r}=t.conditions;if(n){const r=e.getState(mp),o=e.getState(bp);if(!jp(r,n))return t.forbid();const s=(({guid:e,accessLevel:t,campaign:r})=>{const n={guid:e,accessLevel:t};return r&&(n.campaignId=r.id),n})(o);bu()(t.getState(),s)||(t.allow(),t.setState(s))}}}),multi:!0,deps:{context:Oe}},{provide:Wi,useFactory:function({strategies:e,sessionManager:t}){const r=Tt()(e||[]);return new Fp({sessionManager:t,strategies:r.concat(new Up({sessionManager:t}))})},deps:{sessionManager:Ki,strategies:{token:Xi,optional:!0}}}];var Hp=r(9310),qp=r.n(Hp),Bp=r(2013);const $p=["sessionId","millisLeft","accessLevel","userId"],Yp={sessionId:void 0,sessionWillExpireIn:0,accessLevel:"ANONYMOUS",millisLeft:0,userId:null,requested:!1},zp={session:Yp};class Gp{constructor({apiClient:e,dispatcher:t,cookie:r,initialState:n,sessionCookieName:o}){this.state=zp,this.dispatcher=t,this.apiClient=e,this.cookie=r,this.sessionCookieName=o,n&&this.setState(n)}async updateSessionStatus(e){return this.fetchOrCreateSession(e).then(cp()((e=>this.saveAndDispatchSession(e))))}getSessionId(){return this.getSessionIdFromCookie()}async authenticate(){return this.isAuthenticated()?Promise.resolve():this.runAuthenticateFlow()}async logout(){return this.resetSessionOnServer().then(this.resetSessionOnClient.bind(this)).then(this.noSessionAuthFlow.bind(this))}async replaceWithNewSession(){return this.resetSessionOnServer().then(this.noSessionAuthFlow.bind(this))}async prolongateSession(e){return this.pingSession(e).then(this.updateSessionStatus.bind(this)).catch(Kt())}async runAuthenticateFlow(){const e=this.getSessionIdFromCookie();return e?this.hasSessionAuthFlow(e):this.noSessionAuthFlow()}async noSessionAuthFlow(){return this.createSession().then(this.saveAndDispatchSession.bind(this))}async hasSessionAuthFlow(e){return this.updateSessionStatus(e)}async fetchOrCreateSession(e){return e?this.fetchSessionStatus(e).catch((e=>{const t=Bi()(["response","errorMessage"],e);if(t&&Xa()("Session is absent",t))return this.createSession();throw e})):this.createSession()}async createSession(){return this.apiClient.request({method:"session",cache:!1,withoutSession:!0}).then(this.fetchSessionStatus.bind(this)).catch((e=>Yp))}async saveSession(e=Yp){let{sessionId:t,millisLeft:r,accessLevel:n="ANONYMOUS",userId:o}=e,s=(0,ge.Z)(e,$p);const i=(new Date).getTime()+r;this.setSessionIdToCookie(t,r);const a=Object.assign({},s,{accessLevel:n,sessionId:t,sessionWillExpireIn:i,userId:o,requested:!0});return this.setState({session:a}),a}async resetSessionOnClient(){return this.saveAndDispatchSession(Yp)}async resetSessionOnServer(){return this.apiClient.request({method:"sign_out",cache:!1,query:{sessionid:this.getSessionId()}})}async dispatchStatusChanged(){return this.dispatcher({action:"STATUS_CHANGED",payload:this.getState()})}async saveAndDispatchSession(e){return Promise.resolve().then((()=>this.saveSession(e))).then(this.dispatchStatusChanged.bind(this))}async pingSession(e){return this.apiClient.request({method:"ping",cache:!1,silent:!0,query:{sessionid:e}}).then((()=>e))}isAuthenticated(){const{session:{sessionWillExpireIn:e}}=this.getState();return qp()(e)&&e>Date.now()}getSessionCookieName(){return this.sessionCookieName||Bp.w}getSessionIdFromCookie(){return this.cookie.get(this.getSessionCookieName())}setSessionIdToCookie(e,t){const r=t/1e3;this.cookie.set({expires:r,name:this.getSessionCookieName(),value:e})}async fetchSessionStatus(e){return this.apiClient.request({method:"session_status",cache:!1,silent:!0,query:{sessionid:e}}).then((t=>Object.assign({sessionId:e},t)))}getState(){return this.state}setState(e){this.state=Object.assign({},this.getState(),e)}}const Jp=class extends Gp{async fetchSessionStatus(e){const t=(r=3)=>super.fetchSessionStatus(e).catch((e=>{if((Dt()(e)||!e.errorId)&&r>0)return new Promise((e=>setTimeout(e,500))).then((()=>t(r-1)));throw e}));return t()}},Wp="module:authenticate:auth",Kp=(0,Te.y)("AUTH_STATE_CHANGED"),Qp=["sessionId"];function Zp({apiClient:e,pubsub:t,cookie:r,context:n,initialState:o,sessionCookieName:s}){return new Jp({initialState:o,apiClient:e,cookie:r,dispatcher:function({type:e,payload:r}){const o=n.getStore("session").getState(),s=function(e){const t=e.session,r=(0,ge.Z)(t,Qp),{accessLevel:o,guid:s}=n.getStore("session").getState();return Object.assign(r,{guid:o===r.accessLevel?s:(new Date).getTime()})}(r),i=n.getStore("roles").getState(),a=((e,t)=>{var r;const n=null===(r=t.campaign)||void 0===r?void 0:r.id;return n?((e,t)=>{const r=(0,cu.ac)(e,nu.$d,(0,cu.n5)(nu.t1)),n={[`${nu.t1.CLIENT}_${t}`]:!0},o=lu(e);return au()(((e,t)=>e===o[t]),n)?r:Object.assign({},r,{[uu]:n})})(e,n):(0,nu.kV)((0,cu.Mr)(e,uu),t.accessLevel)})(i,s);return Promise.all([n.dispatch(yp(s)),n.dispatch(gp(a))]).then((()=>(function(e,t){return 0===function(e,t){const r=[];return e===t||Ge()(Cp()(Mp()(e),Mp()(t))).forEach((n=>{const o=_s()(n,{},e),s=_s()(n,{},t);Ge()(Cp()(Mp()(o),Mp()(s))).forEach((e=>{o[e]!==s[e]&&r.push(e)}))})),r}(e,t).length}(i,a)&&o.hasSsoSession===r.session.hasSsoSession||n.dispatch(Kp({session:o,newSession:s,roles:i,newRoles:a})),t.publish(Wp,Object.assign({currentSession:o},r,{roles:i,newRoles:a})))))},sessionCookieName:s})}let Xp=class{};Xp=(0,ve.__decorate)([(0,o.Yl)({imports:[us],providers:[...Vp,{provide:Ki,useFactory:({apiClient:e,pubsub:t,cookie:r,context:n,sessionCookieName:o})=>Zp({apiClient:e,pubsub:t,cookie:r,context:n,sessionCookieName:o,initialState:{session:n.getStore("session").getState()}}),deps:{cookie:ke.T,apiClient:wa,pubsub:et,context:Oe,sessionCookieName:{token:Qi,optional:!0}}},{provide:Zi,useClass:class{constructor({sessionManager:e}){this.startPollingAuthorizedSessionStatus=()=>{if(this.alreadyPollingSession())return;const e=({millisLeft:e})=>{const r=e<dp?e:dp;return this.schedule(t,r)},t=()=>this.sessionManager.updateSessionStatus(this.sessionManager.getSessionId()).then(cp()(fp(e))).catch(this.unSchedule);this.scheduleHandle&&this.unSchedule(),this.schedule(t,dp)},this.schedule=(e,t)=>{this.scheduleHandle=setTimeout(e,t)},this.unSchedule=()=>{clearTimeout(this.scheduleHandle),this.scheduleHandle=void 0},this.sessionManager=e,this.scheduleHandle=null}startProlongateSessionOnUserActivity(){this.startListenForUserActivity((()=>{this.sessionManager.prolongateSession(this.sessionManager.getSessionId())}))}alreadyListeningForUserActivity(){return!!this.throttledUserActivitySubscriber}alreadyPollingSession(){return!!this.scheduleHandle}startListenForUserActivity(e){this.alreadyListeningForUserActivity()||(this.throttledUserActivitySubscriber=ep()(6e4,(()=>setTimeout(e,5e3))),lp.forEach((e=>{window.addEventListener(e,this.throttledUserActivitySubscriber,!0)})))}},deps:{sessionManager:Ki}},{provide:c.Bi.generatePage,useFactory:({authenticator:e,sessionLifetimeController:t,pubsub:r,context:n,pageService:o,logger:s,customRedirectUrl:i})=>{const a=e=>{e&&t.startProlongateSessionOnUserActivity(),hp(e)&&t.startPollingAuthorizedSessionStatus()};return r.subscribe(Wp,(e=>{a(e.session),(({customRedirectUrl:e,pageService:t,logger:r,payload:n,context:o})=>{var s;const i=r("auth:pubsub"),{roles:a,newRoles:c,session:u}=n,l=(0,nu.QO)(a)&&!(0,nu.QO)(c)||du(a)&&!du(c);if(l){const r=!u.sessionId,n=!!u.sessionId,l=(({customRedirectUrl:e,pageService:t,sessionExpired:r,context:n})=>{var o,s,i;const a=t.getConfig()||{},{pageComponent:c}=a,u=t.getComponent(c),l=r?"sessionExpired":"himselfLogout";return(null==e?void 0:e())||(null===(o=null==a?void 0:a.redirects)||void 0===o?void 0:o[l])||(null===(i=null===(s=null==u?void 0:u.redirects)||void 0===s?void 0:s[l])||void 0===i?void 0:i.call(s,n,{sessionExpired:r}))})({customRedirectUrl:e,pageService:t,sessionExpired:n,context:o});let d,p=l;if(!l){const e={config:t.getConfig()||{}},o=!Ap(e,a)&&Ap(e,c);if(r&&o)p="/";else if(o){const e=n?"sessionExpired":"";p=Dp({route:t.getCurrentRoute(),url:t.getCurrentUrl(),roles:c,redirectType:e})}else p="./",d=null===(s=t.getCurrentUrl())||void 0===s?void 0:s.query}i.debug(`force redirect to ${p} after ${r?"user logout":"session expired"}`),t.navigate({url:p,query:d})}return l})({customRedirectUrl:i,pageService:o,payload:e,logger:s,context:n})||(({pageService:e,logger:t,payload:r})=>{const n=t("auth:access"),o=e.getCurrentRoute(),s=e.getCurrentUrl(),{newRoles:i}=r;Ap(o,i)&&(n.debug({event:"page-access-denied"}),e.navigate({url:Dp({route:o,url:s,roles:i}),replace:!0}))})({logger:s,pageService:o,payload:e})})),function(){return e.authenticate().then((()=>{const e=n.getStore("session").getState();a(e)}))}},deps:{authenticator:Wi,sessionLifetimeController:Zi,pubsub:et,context:Oe,pageService:Q.Y9,logger:y.F,customRedirectUrl:{token:ea,optional:!0}},multi:!0},{provide:"authenticateDeferred",useFactory:()=>{const e=(()=>{let e,t;return{promise:new Promise(((r,n)=>{e=r,t=n})),resolve:e,reject:t}})();return e.resolve(),e}}]})],Xp);var eh=r(6938),th=r(661);const rh=(0,Te.y)("Set analytics config"),nh=(0,_e.L)("analytics",{}).on(rh,((e,t)=>Object.assign({},e,{config:t}))),oh=[{provide:k.Ym,multi:!0,useValue:[nh]},(0,i.J)({provide:c.Bi.resolvePageDeps,multi:!0,useFactory:({tracking:e,pageService:t})=>function(){e.extend(_s()("analytics",{},t.getMeta()))},deps:{tracking:sd.t3,pageService:Q.Y9}}),(0,i.J)({provide:sd.ZY,useFactory:({store:e})=>{const{config:t={}}=e.getState(nh);return t},deps:{store:k.kR}})],sh=(0,G.V)("DPP_SERVICE"),ih="userType",ah={Visitor:0,"Client-Light":10,Applicant:20,"Client-Heavy":30},ch=e=>ah[e]||0;let uh=!1;const lh=({tracking:e,cookies:t,logger:r,store:n})=>{const o=r("analytics:tracking:user-type"),{roles:s}=n.getState(),i=t.get(ih)||"Visitor",a=ch(i),c=(e=>{let t;switch(!0){case(0,nu.o2)(e):t="Client-Light";break;case(0,nu.C5)(e):t="Client-Heavy";break;default:t="Visitor"}return t})(s),u=ch(c);let l=i;u>=a&&(l=c,((e,t,r)=>{t.debug({message:"New user level",userType:r}),e.set({name:ih,value:r,expires:63072e3,noSubdomains:!0})})(t,o,c)),e.extend({userType:l,userStatus:(0,nu.QO)(s)?"Logged In":"Not Logged In"}),!uh&&u>a&&(0,nu.QO)(s)&&(uh=!0,e.event("ibSuccess"))},dh={essentials:"Essential",functional:"Functionality",analytics:"Statistics",marketing:"Marketing"},ph=[{provide:c.Bi.resolvePageDeps,useFactory:({store:e,tracking:t,logger:r,cookies:n})=>()=>((({tracking:e,cookies:t,logger:r,store:n})=>{let{roles:o}=n.getState();o&&(lh({tracking:e,cookies:t,logger:r,store:n}),n.subscribe((()=>{const{roles:s}=n.getState();s!==o&&(o=s,lh({tracking:e,cookies:t,logger:r,store:n}))})))})({store:e,tracking:t,logger:r,cookies:n}),Promise.resolve()),deps:{store:k.kR,tracking:sd.t3,logger:y.F,cookies:ke.T},multi:!0},(0,i.J)({provide:c.Bi.customerStart,multi:!0,deps:{dppService:{token:sh,optional:!0},tracking:sd.t3},useFactory:({dppService:e,tracking:t})=>async()=>{if(!e)return;const r=await t.callUtil("getConsentVault");if(!r)return;let n=()=>{};n=e.subscribeToAccept((async e=>{r.update(((e,t)=>Object.entries(e).reduce(((e,[r,n])=>(e[t[dh[r]]]=n,e)),{}))(e,r.categories),"keep"),n()}))}})];var hh;let fh=hh=class{static forRoot({atmContainer:e}){const t=[];return e&&t.push({provide:sd.cY,useValue:e}),{mainModule:hh,providers:t}}};fh=hh=(0,ve.__decorate)([(0,o.Yl)({providers:[{provide:b.s,multi:!0,useValue:[{key:"CONFIG_API",dehydrate:!1,validator:f([p,h("/")])},{key:"APP_VERSION",optional:!0,dehydrate:!0}]},(0,i.J)({provide:sd.t3,useFactory:({logger:e,store:t,eventeaReady:r,appInfo:n,envManager:o})=>{const{config:s={}}=t.getState(nh),i=window.twtConfig=window.twtConfig||{};i.logger=e("analytics:tracking");const{atmContainer:a,containers:c}=(null==s?void 0:s.atm)||{};a&&(i.atmContainerName=a),c&&(i.atmContainers=c);const u=new eh.Z;u.resolve((0,th.A)());const l={appName:n.appName,appVersion:o.get("APP_VERSION"),proxyVersion:gd,tramvaiVersion:"1.115.44",eventeaReady:r};u.event=(e,t)=>(u.callUtil("tramSendEvent",e,t,l),u);const d=u.extend;return u.extend=e=>{const t=d.call(u,e);return u.callUtil("tramPostData",e,l),t},u},deps:{logger:y.F,store:k.kR,eventeaReady:{token:sd.dZ,optional:!0},envManager:b.v,appInfo:c.Qo}}),(0,i.J)({provide:"router afterNavigateHooks",multi:!0,useFactory:({tracking:e})=>()=>{e.updateLocation()},deps:{tracking:sd.t3}}),...oh,...ph]})],fh);const gh=["origin"],vh="SsoTimeout";const mh=["logger"];class yh{constructor({sessionManager:e,envManager:t,cookieManager:r,store:n,logger:o}){this.sessionManager=e,this.store=n,this.logger=o,this.envManager=t,this.cookieManager=r}async onAuthComplete(e){return function({sessionId:e,accessLevel:t,hasSsoToken:r}={}){return!(!e||!t||t===nu.t1.ANONYMOUS&&!r)}(e)?this.sessionManager.updateSessionStatus(e.sessionId):Promise.reject()}shouldPass(){const e=this.store.getState(mp),{featureToggle:t={}}=this.store.getState();return(0,nu.QO)(e)||!function(e,t){return e["header:sso:redirect"]&&(e["auth:sso"]||null!=t.get("enabledSharedAuth"))}(t,this.cookieManager)}async authenticate({success:e,pass:t}){return this.shouldPass()?t():this.authenticateViaHiddenFrame().then(this.onAuthComplete.bind(this)).then(e).catch(t)}createHiddenAuthFrame(){const e=function(e,t={}){let{origin:r="web,ib5,platform"}=t,n=(0,ge.Z)(t,gh);const o=e.get("SSO_AUTH_TINKOFF_API")||e.get("TINKOFF_API");return(0,qr.DI)(`${o}session/authorize`,Object.assign({origin:r},n))}(this.envManager,{prompt:"none"}),t=document.createElement("iframe");return t.style.width="0px",t.style.height="0px",t.style.position="absolute",t.style.left="-4000px",t.src=e.toString(),t}createAuthMessageHandler(){let e;return{promise:new Promise((t=>{const r=e=>{(function({data:e}){return e&&!e.data&&"authComplete"===e.messageCode})(e)&&t(e.data)};e=()=>window.removeEventListener("message",r),window.addEventListener("message",r)})),unsubscribe:e}}perfStart(e="sso-perf"){const t=Date.now();return r=>{const n=Date.now()-t;this.logger.info({type:r,event:e,message:`${n}`})}}async authenticateViaHiddenFrame(){const e=this.perfStart(),t=this.createHiddenAuthFrame(),r=this.createAuthMessageHandler();return document.body.appendChild(t),Promise.race([r.promise,(n=1e4,new Promise(((e,t)=>setTimeout((()=>{return t((e=vh,Object.assign(new Error("SSO timeout"),{type:e})));var e}),n))))]).then((t=>(e("iframe-check"),t))).catch((t=>{throw t&&t.type===vh?e("iframe-check-timeout"):this.logger.error({event:"iframe-check-error",error:t}),t})).finally((()=>{r.unsubscribe(),document.body.removeChild(t)}));var n}}let bh=class{};bh=(0,ve.__decorate)([(0,o.Yl)({providers:[{provide:Xi,useFactory:function(e){let{logger:t}=e,r=(0,ge.Z)(e,mh);return new yh(Object.assign({logger:t("auth:sso")},r))},deps:{sessionManager:Ki,cookieManager:ke.T,envManager:b.v,logger:y.F,store:k.kR},multi:!0}]})],bh);const Sh=(0,o.Yl)({providers:[]})(class{}),_h=(0,o.Yl)({providers:[]})(class{}),Eh=(0,o.Yl)({imports:[Sh,_h],providers:[]})(class{});let wh=class{};wh=(0,ve.__decorate)([(0,o.Yl)({providers:[{provide:"serviceWorker",useFactory:({serviceWorkerUrl:e})=>"serviceWorker"in navigator?navigator.serviceWorker.register(e):Promise.reject(new Error("ServiceWorker not supported")),deps:{serviceWorkerUrl:"pwaServiceWorkerUrl"}},{provide:"pwaServiceWorkerUrl",useValue:"/sw.js"},{provide:c.Bi.init,multi:!0,useFactory:({serviceWorker:e,logger:t})=>function(){e.catch((e=>{t.warn({event:"serviceworker-initialise-error",error:e})}))},deps:{serviceWorker:"serviceWorker",logger:y.F}}]})],wh);let Oh=class{};Oh=(0,ve.__decorate)([(0,o.Yl)({providers:[]})],Oh);let kh=class{};kh=(0,ve.__decorate)([(0,o.Yl)({providers:[]})],kh);const Th=[{provide:ao,useFactory:({logger:e})=>{const t=e("error-interceptor:error-boundary");return function(e,r){t.error({event:"component-did-catch",error:e,info:r})}},deps:{logger:y.F},multi:!0}];let Ch=class{};Ch=(0,ve.__decorate)([(0,o.Yl)({providers:[...Th]})],Ch);let Rh=class{};Rh=(0,ve.__decorate)([(0,o.Yl)({providers:[]})],Rh);const Mh=["init","addBreadcrumb","captureMessage","captureException","captureEvent","configureScope","withScope"];function Ph(){return window.Sentry}const xh=(0,G.V)("sentry"),Ih=(0,G.V)("sentryDSNToken"),Nh=(0,G.V)("sentryOptions",{multi:!0}),jh=(0,G.V)("sentryLazyLoading"),Ah=(0,G.V)("SENTRY_FILTER_ERRORS",{multi:!0}),Dh=[{provide:c.Bi.init,multi:!0,useFactory:({sentry:e,multiOptions:t,envManager:r,sentryDsn:n,filterErrors:o})=>{const s=e=>{const s={maxBreadcrumbs:20,enabled:!0,environment:r.get("SENTRY_ENVIRONMENT"),dsn:n,release:r.get("SENTRY_RELEASE"),beforeSend:(e,t)=>kp()((r=>r(e,t)),null!=o?o:[])?null:Qu()(null==t?void 0:t.originalException)?t.originalException.catch((t=>(e.extra=Object.assign({},e.extra,t),e))):($r()(null==t?void 0:t.originalException)&&(e.extra=Object.assign({},e.extra,null==t?void 0:t.originalException)),e)};return(null!=t?t:[]).reduce(((t,r)=>Object.assign({},t,ms()([e,t],r))),s)};return function(){e.init(s)}},deps:{sentry:xh,multiOptions:{token:Nh,optional:!0},envManager:b.v,sentryDsn:Ih,filterErrors:{token:Ah,optional:!0}}},{provide:ao,multi:!0,useFactory:({sentry:e})=>function(t,r){e.withScope((n=>{n.setExtras(r),e.captureException(t)}))},deps:{sentry:xh}}];var Lh;const Uh=e=>(e=>"UnhandledRejection"===e.type&&/promise rejection captured with value: (undefined|null)/g.test(e.value))(e)||(e=>"Error"===e.type&&/Problem with the file loading/g.test(e.value))(e);let Fh=Lh=class{static forRoot(e){return{mainModule:Lh,providers:[{provide:Nh,multi:!0,useValue:e}]}}};Fh=Lh=(0,ve.__decorate)([(0,o.Yl)({providers:[...Dh,{provide:xh,scope:a.s.SINGLETON,useFactory:({envManager:e,logger:t,sentryLazyLoading:r})=>{let n;return t&&(n=e=>{t.info({event:"global-errors",value:e})}),function({sdkBundleUrl:e,lazyInjecting:t=!1,sendGlobalErrorsCount:r}){var n;const o=null!==(n=window.__SENTRY_MODULE_INLINE_ERROR_INTERCEPTOR__)&&void 0!==n?n:{},s=o.onError,i=[];let a=Ph(),c=a?"loaded":null,u=0;function l(){var e,t;if(null===(e=o.clear)||void 0===e||e.call(o),r&&(window.onerror=()=>{u+=1},window.onunhandledrejection=()=>{u+=1},window.addEventListener("unload",(()=>{u&&r(u)}))),a=Ph(),!a)return;const n=a.init;a.init=e=>{n(ms()([a],e))},i.forEach((({method:e,args:t})=>{a[e](...t)}));const s=window.onerror,c=window.onunhandledrejection;null===(t=o.errorsQueue)||void 0===t||t.forEach((e=>{"error"in e&&s?s.apply(window,e.error):"promise"in e&&c&&c.apply(window,e.promise)}))}function d(){c="loading";const t=document.createElement("script");t.async=!0,t.src=e,t.crossOrigin="anonymous",t.onerror=()=>{c="fail"},t.onload=()=>{c="loaded",l()},document.head.appendChild(t)}function p(){null==c&&d()}function h(){(function(){var e;if(null!=c)return!1;const t=(null===(e=o.errorsQueue)||void 0===e?void 0:e.length)>0,r=!!Ua()((({method:e})=>"withScope"===e||e.indexOf("capture")>-1),i);return t||r})()&&d()}o.onError=(...e)=>{null==s||s(...e),h()};const f=Mh.reduce(((e,t)=>(e[t]=(...e)=>{if(a)return a[t](...e);i.push({method:t,args:e}),h()},e)),{});return f.forceLoad=()=>{p()},"loaded"===c?l():t?h():p(),f}({sdkBundleUrl:e.get("SENTRY_SDK_URL"),lazyInjecting:r,sendGlobalErrorsCount:n})},deps:{envManager:b.v,logger:{token:y.F,optional:!0},sentryLazyLoading:jh}},{provide:Ih,useFactory:({envManager:e})=>e.get("SENTRY_DSN_CLIENT")||e.get("SENTRY_DSN"),deps:{envManager:b.v}},{provide:Ah,multi:!0,useValue:(e,t)=>{var r,n;return null===(n=null===(r=null==e?void 0:e.exception)||void 0===r?void 0:r.values)||void 0===n?void 0:n.every(Uh)}},{provide:jh,useValue:!0}]})],Fh);var Vh=r(2137),Hh=r.n(Vh);function qh(e){const t=new URLSearchParams(e||"");return t.forEach(((e,r)=>{if(/sessionid/i.test(r)){const[n,o=""]=e.split("."),s=n.slice(0,12)+Hh()(n.slice(12).length,"*");t.set(r,`${s}.${o}`)}else"ticket"===r&&t.set(r,Hh()(e.length,"*"))})),t.toString()}function Bh(e){const[t,r=""]=(e||"").split("?"),[n,o]=r.split("#");return n?`${t}?${qh(n)}${o?`#${o}`:""}`:e}function $h(e,t){const r=null==e?void 0:e.category;return"http"===r||"fetch"===r||"xhr"===r?e.data.url=Bh(e.data.url):"navigation"===r&&(e.data.from=Bh(e.data.from),e.data.to=Bh(e.data.to)),e}let Yh=class{};Yh=(0,ve.__decorate)([(0,o.Yl)({imports:[Fh],providers:[{provide:Nh,multi:!0,useFactory:({envManager:e,appInfo:t,requestManager:r,wuid:n,filterErrors:o})=>{const{appName:s}=t,i=e.get("APP_VERSION");return function(t,o){var a,c;return{beforeSend:function(e,t){var a;const{tags:c={},contexts:u={},user:l={},request:d={}}=e,{host:p,search:h,pathname:f,href:g}=window.location;return null===(null===(a=o.beforeSend)||void 0===a?void 0:a.call(o,e,t))?null:(e.transaction=f,e.request=Object.assign({},d,{url:Bh(g),query_string:qh(h.slice(1))||void 0}),e.environment||(e.environment=p),e.tags=Object.assign({wuid:n,"app.name":s,"app.version":i,"app.platform":"browser"},c),e.contexts=Object.assign({app:{app_name:s,app_version:i}},u),e.user=Object.assign({wuid:n,ip_address:r.getClientIp()||void 0},l),e)},beforeBreadcrumb:$h,release:null!==(c=null!==(a=o.release)&&void 0!==a?a:e.get("APP_RELEASE"))&&void 0!==c?c:e.get("APP_VERSION")}}},deps:{appInfo:c.Qo,envManager:b.v,requestManager:Rt.Gu,wuid:{token:S.$,optional:!0}}}]})],Yh);const zh=(0,G.V)("routeExtNavigateState",{multi:!0}),Gh=e=>`tinkoff:navigateState:${e}`;let Jh=class{};Jh=(0,ve.__decorate)([(0,o.Yl)({imports:[],providers:[{provide:c.Bi.customerStart,multi:!0,useFactory:({navigateStateHandlers:e,logger:t})=>{const r=Tt()(null!=e?e:[]),n=t("route:navigate-state");return()=>Promise.all(r.map((async e=>{if(!e.read)return;const t=(e=>{try{const t=window.sessionStorage.getItem(e);if(t)return window.sessionStorage.removeItem(e),JSON.parse(t)}catch(e){return}})(Gh(e.key));if(t)try{const{expires:r,payload:n}=t;r&&new Date>new Date(r)||await e.read(n)}catch(e){n.error({event:"read",error:e})}})))},deps:{logger:y.F,navigateStateHandlers:{token:zh,optional:!0}}},{provide:"router additionalParameters",useFactory:({navigateStateHandlers:e,logger:t})=>{const r=Tt()(null!=e?e:[]),n=t("route:navigate-state");return{onNotFound:async e=>{await Promise.all(r.map((async t=>{if(!t.write)return;const r=Gh(t.key);try{const n=await t.write(e);if(void 0!==n){const e=new Date;e.setSeconds(e.getSeconds()+50),((e,t)=>{try{window.sessionStorage.setItem(e,JSON.stringify(t))}catch(e){}})(r,{payload:n,expires:e})}}catch(e){n.error({event:"write",error:e})}})))}}},deps:{logger:y.F,navigateStateHandlers:{token:zh,optional:!0}}}]})],Jh);var Wh=r(3619),Kh=r.n(Wh);const Qh=(0,Te.y)("PUSH_WEB_SETTINGS_LOADED"),Zh=(0,Te.y)("PUSH_WEB_STATE_UPDATE"),Xh=(0,Te.y)("PUSH_WEB_SUBSCRIPTION_UPDATE"),ef=Object.assign({},Wh.states.INIT,{status:Wh.states.INIT.id,settings:{}}),tf=(0,_e.L)("pushWeb",ef).on(Qh,((e,t)=>Object.assign({},e,{settings:t.settings}))).on(Zh,((e,t)=>Object.assign({},e,t))).on(Xh,((e,t)=>Object.assign({},e,{subscription:t.subscription}))),rf=[(0,i.J)({provide:k.Ym,useValue:[tf],multi:!0}),(0,i.J)({provide:b.s,useValue:[{key:"TINKOFF_API",optional:!0,dehydrate:!0,validator:p},{key:"APP_VERSION",optional:!0,dehydrate:!0},{key:"SAFARI_PUSH_API",optional:!0,dehydrate:!0,validator:p}],multi:!0})],nf=(0,G.V)("PUSH_WEB_INSTANCE_TOKEN"),of="webpush";var sf;const af=null===(sf=window.Notification)||void 0===sf?void 0:sf.permission,cf=[{rule:({permissionState:e,status:t})=>"default"===e&&t===Wh.states.STARTING_SUBSCRIBE.id,event:()=>({eventName:"pushShow"})},{rule:({permissionState:e})=>"default"===af&&"granted"===e,event:()=>({eventName:"pushSubscription"})},{rule:({permissionState:e})=>"default"===af&&"denied"===e,event:()=>({eventName:"pushBlocked"})}];var uf=r(2358);const lf=(0,uf.P)({name:"pushSubscribeAction",fn:async(e,t={},r)=>{const{pushWeb:n,wuid:o}=r;if(n)return n.subscribe(Object.assign({wuid:o},t.data),t.force)},deps:{wuid:S.$,pushWeb:nf}}),df=(0,uf.P)({name:"pushToggleAction",fn:async(e,t,r)=>{const{pushWeb:n}=r;if(!n)return;const{action:o}=t;return"subscribe"===o?e.executeAction(lf,{data:null==t?void 0:t.data,force:null==t?void 0:t.force}):n.unsubscribe()},deps:{pushWeb:nf}}),pf=(0,uf.P)({name:"sendEventAction",fn:async(e,t,r)=>{const{analytics:n}=r;if(n)return n.event(t.eventName)},deps:{analytics:{token:sd.t3,optional:!0}}}),hf=(0,nt.memo)((()=>{const e=(0,po.x)(),t=(0,io.x)(y.F),{status:r,permissionState:n,subscribed:o,unsubscribed:s,enableAutoSubscription:i,autoSubscriptionDelay:a,authorized:c}=(0,Su.v)([tf,Tn,mp],(({pushWeb:e,router:t,roles:r})=>({status:e.status,unsubscribed:e.status===Wh.states.UNSUBSCRIBED.id,enableAutoSubscription:!(!Bi()(["settings","enablePush"],e)||!Bi()(["currentRoute","config","enablePush"],t)),subscribed:e.status===Wh.states.SUBSCRIBED.id,autoSubscriptionDelay:Bi()(["settings","autoSubscriptionDelay"],e)||1e4,permissionState:e.permissionState,authorized:(0,nu.QO)(r)}))),u=(0,nt.useCallback)((t=>e.executeAction(df,{action:"subscribe",force:t})),[e]),l=(0,nt.useCallback)((t=>e.executeAction(pf,{eventName:t})),[e]),d=(0,nt.useRef)({trackedEvents:{},currentEvent:Promise.resolve(),firstSubscription:!1,sessionUpdated:!1,log:t(of)}),p=(0,nt.useCallback)((e=>{eo()((t=>{t.rule(e)&&(d.current.currentEvent=d.current.currentEvent.then((()=>t.event())).then((({eventName:e})=>{if(!d.current.trackedEvents[e])return d.current.log.debug(`sent event ${e}`),d.current.trackedEvents[e]=!0,l(e);d.current.log.debug(`event ${e} already sent`)})))}),cf)}),[l]);return(0,nt.useEffect)((()=>{p({status:r,permissionState:n}),i?(o&&(d.current.firstSubscription=!0),s&&!d.current.firstSubscription&&(d.current.firstSubscription=!0,d.current.log.debug("show subscription window"),setTimeout((()=>u(!1)),a)),!d.current.sessionUpdated&&c&&o&&(d.current.sessionUpdated=!0,d.current.log.debug("force update authorized subscription info"),u(!0))):d.current.log.debug("auto subscription is not enabled by route settings")}),[r,n,o,s,i,u,a,c,p]),null}));let ff=class{};ff=(0,ve.__decorate)([(0,o.Yl)({imports:[Ne,us,Xp,wh],providers:[...rf,(0,i.J)({provide:c.Bi.resolveUserDeps,useFactory:e=>function(){return Promise.resolve(e.webPush)},deps:{webPush:nf},multi:!0}),(0,i.J)({provide:nf,useFactory:function({userAgent:e,wuid:t,envManager:r,context:n,logger:o,sessionManager:s}){const i=o(of);if(!Kh().checkSupport())return i.debug("Notifications are not supported by tinkoff-push-web"),null;const a=n.getState(tf);if(Dt()(a.settings))return i.debug("Failed to load settings, skipping tinkoff-push-web instantiating"),null;const c=n.getState(bp);return new(Kh())({api:{host:r.get("TINKOFF_API")||Wh.apiDefaults.host},settings:{wuid:t,sessionid:s.getSessionId(),osName:`${e.os.name} ${e.os.version}`,browser:e.browser.name||"",appVersion:r.get("APP_VERSION"),applicationServerKey:new Uint8Array(a.settings.applicationServerKey),safari:{webServiceURL:r.get("SAFARI_PUSH_API")||"https://safaripush.tcsbank.ru",webSitePushId:"web.www.push.tinkoff.ru",firmware:"safari",clientId:null==c?void 0:c.userId,deviceStringId:t}},stateChangeCb:({id:e,interactive:t,subscribed:r,permissionState:o})=>n.dispatch(Zh({status:e,interactive:t,subscribed:r,permissionState:o})),subscriptionUpdateCb:e=>n.dispatch(Xh({subscription:e})),logCb:i.info})},deps:{userAgent:Z,wuid:S.$,envManager:b.v,context:Oe,logger:y.F,sessionManager:Ki}}),(0,i.J)({provide:_n,useValue:[{components:{pushWeb:hf}}],multi:!0})]})],ff);var gf=r(2659);const vf=nt.useLayoutEffect;var mf=r(4233),yf=r(7350);const bf=(0,uf.P)({name:"setCobrowsingStateAction",fn:function(e,t){return e.dispatch((0,gf.xZ)(t))},conditions:{onlyBrowser:!0,requiredCoreRoles:[nu.t1.REGISTERED]}});var Sf=r(8485),_f=r(8884),Ef=r(187);const wf=()=>{var e,t;null===(t=null===(e=window)||void 0===e?void 0:e.cobrowsing)||void 0===t||t.closeAllStreams()},Of=({cobrowsing:e,roles:t})=>{const r=(0,nu.QO)(t),n=r?"authorized":"anonymous";return Object.assign({},e,{cobrowsingEnabled:Ot()(["cobrowsingEnabled",n],!1,e),fullstoryEnabled:Ot()(["fullstoryEnabled",n],!1,e),isAuth:r})},kf=()=>{var e;const{cobrowsingEnabled:t,fullstoryEnabled:r,isCobrowsingReady:n,cobrowsingState:o,loaded:s,isAuth:i}=(0,Su.v)([gf.d$,{store:"roles",optional:!0}],Of),a=(c=o,u=nt.useRef(c),vf((function(){u.current=c})),u);var c,u;const[l,d,p]=function(e){const t=(0,po.x)(),r=(0,yf.s)(e);return(0,nt.useMemo)((()=>Rs()(r)?r.map((e=>t.executeAction.bind(t,e))):t.executeAction.bind(t,r)),[r,t])}([bf,Sf.X,_f.WM]),[h,f]=(0,nt.useState)(!0),[g,v]=(0,nt.useState)(),m=(0,nt.useCallback)((()=>setTimeout((()=>{/^disconnect/.test(a.current)&&l(Ef.S.Hide)}),1e4)),[a,l]),y=(0,nt.useCallback)((()=>setTimeout((()=>{a.current===Ef.S.Error&&(f(!0),l(Ef.S.DisconnectError),m())}),3e3)),[a,m,l]),b=(0,nt.useMemo)((()=>e=>{switch(e.type){case mf.ReceiveMessageTypes.SESSION_REQUEST:f(!1),l(Ef.S.Show);break;case mf.ReceiveMessageTypes.SESSION_CLOSE:f(!0),l(Ef.S.Disconnect),m();break;case mf.ReceiveMessageTypes.CONNECTION_LOST:f(!1),l(Ef.S.Error),(0,mf.send)(mf.SendMessageTypes.SESSION_CLOSE,"handleConnectionLost"),y();break;case mf.ReceiveMessageTypes.BAD_CONNECTION:l(Ef.S.Connect);break;case mf.ReceiveMessageTypes.GOOD_CONNECTION:l(Ef.S.Connected);break;case mf.ReceiveMessageTypes.NO_CONNECTION:f(!1),l(Ef.S.NoConnection);break;case mf.ReceiveMessageTypes.MARK_AREA:v(e.data)}}),[y,m,l]),S=(0,nt.useMemo)((()=>({handleApproveClick:()=>{f(!0),l(Ef.S.Connect),(0,mf.send)(mf.SendMessageTypes.SESSION_CONFIRMATION,"handleApproveClick")},handleConnectedClick:()=>{f(!1)},handleOnDenyClick:()=>{f(!0),l(Ef.S.Deny),(0,mf.send)(mf.SendMessageTypes.SESSION_REFUSE,"handleOnDenyClick"),m()},handleOnDisconnectClick:()=>{f(!0),l(Ef.S.Disconnect),(0,mf.send)(mf.SendMessageTypes.SESSION_CLOSE,"handleOnDisconnectClick"),m()},handleOnCloseClick:()=>{f(!0)},handleOnCloseError:()=>{f(!0),l(Ef.S.DisconnectError),m()},handleNoConnectionRefresh:()=>{f(!0),l(Ef.S.DisconnectNoConnection),(0,mf.send)(mf.SendMessageTypes.SESSION_CLOSE,"handleNoConnectionClose"),m()}})),[m,l]);return(0,nt.useEffect)((()=>{s&&t&&d({onMessage:b,disableStream:!i}).then((()=>r&&p())).catch((()=>{}))}),[b,t,r,s,d,p,i]),(0,nt.useEffect)((()=>wf),[]),(null===(e=window)||void 0===e?void 0:e.cobrowsing)&&n?{collapsed:h,markData:g,cobrowsingState:null!=o?o:"hide",handlers:S}:{collapsed:h,handlers:S,cobrowsingState:"hide"}},Tf=ot().lazy((()=>r.e("cobrowsing-ui").then(r.bind(r,9790))));function Cf(){const e=kf(),{handlers:t,collapsed:r,cobrowsingState:n,markData:o}=e||{};return n&&"hide"!==n&&(0,Vn.jsx)(nt.Suspense,Object.assign({fallback:""},{children:(0,Vn.jsx)(Tf,{handlers:t,collapsed:r,markData:o,cobrowsingState:n},void 0)}),void 0)}Cf.displayName="Cobrowsing";const Rf=(0,G.V)("SEND_CUSTOM_DATA");let Mf=class{};Mf=(0,ve.__decorate)([(0,o.Yl)({providers:[{provide:k.Ym,multi:!0,useValue:[gf.dm]},{provide:_n,useValue:{components:{cobrowsing:Cf}},multi:!0},{provide:Rf,useValue:function(...e){return(0,mf.send)(mf.SendMessageTypes.CUSTOM_DATA,...e)}}]})],Mf);let Pf=class{};Pf=(0,ve.__decorate)([(0,o.Yl)({imports:[],providers:[]})],Pf);let xf=class{};xf=(0,ve.__decorate)([(0,o.Yl)({providers:[]})],xf);const If=(0,G.V)("requestsLimiterActivateToken"),Nf=(0,G.V)("requestsLimiterOptionsToken");var jf=r(5623),Af=r(2676);const Df=[(0,i.J)({provide:k.Ym,multi:!0,useValue:[Af.M]}),(()=>{try{return!!window.sessionStorage}catch(e){}return!1})()&&(0,i.J)({provide:zh,multi:!0,useFactory:({context:e})=>({key:"newauth:sso:error",read:t=>e.dispatch((0,Af.y)(t))}),deps:{context:Oe}})].filter(Boolean),Lf=JSON.parse('{"formDepositCardOneClick":{"1.0":{"npmVersion":"0.0.4","integrity":"sha256-6e9FCIzj6WY55oIKP3teeo9dnFmuOQWDijcWevkqALg="}},"formDepositOneClickOffer":{"1.0":{"npmVersion":"0.0.15","integrity":"sha256-KvWH8z4aHnQSWN3qZpgcE/lO7By7Zaw1d6g4MFlPyUc="}}}'),Uf=JSON.parse;var Ff;JSON.parse=function(...e){if(void 0===e[0])throw new Error(`${e[0]} is not a valid json`);return Uf(...e)},function(e){let t;try{t=new fe(e)}catch(e){throw e.appCreationError=!0,e}t.initialization("client").then((()=>t))}({name:"pfphome",modules:[Yh,Hr,Kn,Zn.J,Ro,Xp,bh,Hc,xu,fc,dc,cs,ja,fh,Zd,Eh,wh,Oh,kh,Ch,Rh,Jh,xf,ue,ff,Mf,Pf],providers:Df.concat([]).concat([(0,i.J)({provide:En,useValue:{types:[Mo.style],threshold:40960}}),(Ff=Lf,(0,i.J)({provide:pu.kE,multi:!0,useFactory:({envManager:e})=>function(e,t){return Object.keys(e).reduce(((r,n)=>Object.assign({},r,{[n]:Object.keys(e[n]).reduce(((r,o)=>{let s=e[n][o];const{npmVersion:i}=s,a=(0,ge.Z)(s,hu);return void 0!==i&&(s=function(e,t){const{type:r,npmVersion:n}=e,o=r.replace(/([A-Z])/g,"-$1").toLowerCase(),s=`${t}/${o}/${n}/${o}`;return{clientJs:`${s}.client.js`,serverJs:`${s}.server.js`,css:`${s}.css`,jsMap:`${s}.client.js.map`}}({type:n,npmVersion:i},t)),Object.assign({},r,{[o]:Object.assign({},a,s)})}),{})})),{})}(Ff,e.get("BOXY_BASE_URL")),deps:{envManager:b.v}})),(0,i.J)({provide:If,useValue:!0}),(0,i.J)({provide:Nf,useFactory:({env:e})=>({maxEventLoopDelay:Number(e.get("REQUEST_LIMITER_MELD")),queue:Number(e.get("REQUEST_LIMITER_QUEUE")),limit:Number(e.get("REQUEST_LIMITER_LIMIT"))}),deps:{env:b.v}}),(0,i.J)({provide:b.s,useValue:[{key:"REQUEST_LIMITER_QUEUE",value:"10"},{key:"REQUEST_LIMITER_MELD",value:"20"},{key:"REQUEST_LIMITER_LIMIT",value:"10"}],multi:!0}),(0,i.J)({provide:jf.y,multi:!0,useValue:{blocks:["desktopHeroBannerNew","mobileHeroBannerNew"],extractor:e=>{var t,r;const n=null==(t=e.properties)||null==(r=t.image)?void 0:r.image,o=[];return n&&o.push({img:n}),o}}})]).concat(),bundles:{mainDefault:()=>r.e("mainDefault").then(r.bind(r,8877)),pfphomeMain:()=>r.e("pfphomeMain").then(r.bind(r,8967))}})},2676:function(e,t,r){"use strict";r.d(t,{y:function(){return s},M:function(){return i}});var n=r(8875),o=r(165);const s=(0,n.y)("setSsoError"),i=(0,o.L)("ssoError",{}).on(s,((e,t)=>t))},3619:function(e,t){!function(e){"use strict";var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,r)};function r(e,t,r,n){return new(r=r||Promise)((function(o,s){function i(e){try{c(n.next(e))}catch(e){s(e)}}function a(e){try{c(n.throw(e))}catch(e){s(e)}}function c(e){e.done?o(e.value):new r((function(t){t(e.value)})).then(i,a)}c((n=n.apply(e,t||[])).next())}))}function n(e,t){var r,n,o,s={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]},i={next:a(0),throw:a(1),return:a(2)};return"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function a(i){return function(a){return function(i){if(r)throw new TypeError("Generator is already executing.");for(;s;)try{if(r=1,n&&(o=2&i[0]?n.return:i[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,i[1])).done)return o;switch(n=0,(i=o?[2&i[0],o.value]:i)[0]){case 0:case 1:o=i;break;case 4:return s.label++,{value:i[1],done:!1};case 5:s.label++,n=i[1],i=[0];continue;case 7:i=s.ops.pop(),s.trys.pop();continue;default:if(!(o=0<(o=s.trys).length&&o[o.length-1])&&(6===i[0]||2===i[0])){s=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){s.label=i[1];break}if(6===i[0]&&s.label<o[1]){s.label=o[1],o=i;break}if(o&&s.label<o[2]){s.label=o[2],s.ops.push(i);break}o[2]&&s.ops.pop(),s.trys.pop();continue}i=t.call(e,s)}catch(e){i=[6,e],n=0}finally{r=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,a])}}}function o(e){return btoa(String.fromCharCode.apply(null,new Uint8Array(e)))}function s(e,t){return e.every((function(e){return e in t}))}var i={host:"https://api.tinkoff.ru/v1/",subscribe:"register_for_push_notification",unsubscribe:"",status:"set_push_notification_status",store:"store",log:"log",fetchRequestInit:{}};function a(e){e=e.storeName,this._storeName=e,this._db=null}var c,u,l,d=new(a.prototype._getDB=function(){var e=this;return this._db||(this._db=new Promise((function(t,r){var n=indexedDB.open(e._storeName,1);n.onerror=function(){return r(n.error)},n.onupgradeneeded=function(){return n.result.createObjectStore("keyval")},n.onsuccess=function(){return t(n.result)}}))),this._db},a.prototype._withStore=function(e,t){return r(this,void 0,void 0,(function(){var r;return n(this,(function(n){switch(n.label){case 0:return[4,this._getDB()];case 1:return r=n.sent(),[2,new Promise((function(n,o){var s=r.transaction("keyval",e);s.oncomplete=function(){return n()},s.onerror=function(){return o(s.error)},t(s.objectStore("keyval"))}))]}}))}))},a.prototype.get=function(e){return r(this,void 0,void 0,(function(){var t;return n(this,(function(r){switch(r.label){case 0:return[4,this._withStore("readonly",(function(r){t=r.get(e)}))];case 1:return r.sent(),[2,t.result]}}))}))},a.prototype.set=function(e,t){return r(this,void 0,void 0,(function(){return n(this,(function(r){switch(r.label){case 0:return[4,this._withStore("readwrite",(function(r){r.put(t,e)}))];case 1:return r.sent(),[2]}}))}))},a)({storeName:"tinkoff-push"}),p=function(){},h=(t(u=g,l=c=Error),u.prototype=null===l?Object.create(l):(f.prototype=l.prototype,new f),g);function f(){this.constructor=u}function g(e){var t=c.call(this,e)||this;return t.name="PermissionError",t.message=e||t.name,t.stack=Error().stack,t}function v(e,t){void 0===e&&(e=10),void 0===t&&(t="");var r=Math.random().toString(36).slice(2);return 10<=r.length?t+r:v(e,t)}var m,y={title:"Tinkoff.ru",lang:"RU",body:"",icon:"https://www.tinkoff.ru/apple-touch-icon-180x180.png",requireInteraction:!0},b={INIT:{id:"INIT",interactive:!1,subscribed:!1},UNSUPPORTED:{id:"UNSUPPORTED",interactive:!1,subscribed:!1},PERMISSION_DENIED:{id:"PERMISSION_DENIED",interactive:!1,subscribed:!1},PERMISSION_GRANTED:{id:"PERMISSION_GRANTED",interactive:!0,subscribed:!1},PERMISSION_PROMPT:{id:"PERMISSION_PROMPT",interactive:!0,subscribed:!1},ERROR:{id:"ERROR",interactive:!1,subscribed:!1},STARTING_SUBSCRIBE:{id:"STARTING_SUBSCRIBE",interactive:!1,subscribed:!1},SUBSCRIBED:{id:"SUBSCRIBED",interactive:!0,subscribed:!0},STARTING_UNSUBSCRIBE:{id:"STARTING_UNSUBSCRIBE",interactive:!1,subscribed:!1},UNSUBSCRIBED:{id:"UNSUBSCRIBED",interactive:!0,subscribed:!1}},S={UNSUPPORTED:!0,PERMISSION_DENIED:!0,ERROR:!0},_={webServiceURL:"https://safaripush-qa.tcsbank.ru",webSitePushId:"web.www-qa.push.tinkoff.ru",clientId:"anuidisuda",deviceStringId:"79E4D2CA63C946DF7E3AA5E4095B52793B8D605D728FF9AEB4B5348835BBB38B",firmware:"safari"},E={locale:"ru_RU",timezone:((m=-1*(new Date).getTimezoneOffset())<0?"-":"+")+function(e){return 9<(e=Math.floor(Math.abs(e/60)))?e.toString():"0"+e.toString()}(m)+":"+function(e){return 9<(e=Math.abs(e%60))?e.toString():"0"+e.toString()}(m)},w=(Object.defineProperty(O,"_isSafari",{get:function(){return!!window.safari},enumerable:!1,configurable:!0}),O.prototype._init=function(){return r(this,void 0,void 0,(function(){var e,t=this;return n(this,(function(r){switch(r.label){case 0:return d.set("api",this._api),this._addListener(),O._isSafari?[3,2]:[4,this._installServiceWorker()];case 1:r.sent(),r.label=2;case 2:return[4,O.getSubscription().catch((function(e){t._setState(b.ERROR,e)}))];case 3:return(e=r.sent())?(this._setState(b.SUBSCRIBED),O._isSafari||this._updateSubscription(e),[2]):(this._setState(b.UNSUBSCRIBED),[2])}}))}))},O.prototype._setState=function(e,t){e.permissionState=Notification.permission,this._state=Object.assign({},this._state,e),this._stateChangeCb(this._state,t)},O.prototype._updateSubscription=function(e){this._logCb("Subscription update: ",e),this._subscription=e,this._subscriptionUpdateCb(this._subscription)},O.prototype._addListener=function(){var e=this;O._isSafari||navigator.serviceWorker.addEventListener("message",(function(t){var r,n=function(e,t){var r;void 0===t&&(t={});try{r=JSON.parse(e)}catch(e){r=t}return r}(t.data,{});"PUSH_JS_SW"===n.source&&(e._logCb("Message from SW: ",n.data),n.data&&n.data.eventName&&n.data.tag&&e._notifications.has(n.data.tag)&&t.ports&&(n=(r=n.data).tag,r=r.eventName,t.ports[0].postMessage("OK"),e._notifications.get(n).notification.dispatchEvent(new Event(r)),"close"===r&&e._notifications.delete(n)))}))},O.prototype._installServiceWorker=function(){var e=this;return this._serviceWorker?navigator.serviceWorker.register(this._serviceWorker).catch((function(t){return e._setState(b.ERROR,t),Promise.reject(t)})):navigator.serviceWorker.ready},O.prototype._handleSubscribe=function(e){return this._updateSubscription(e),this._setState(b.SUBSCRIBED),Promise.resolve(e)},O.prototype._handleUnsubscribe=function(){return this._updateSubscription(null),this._setState(b.UNSUBSCRIBED),Promise.resolve()},O.prototype._getQuery=function(e){return"unsubscribe"===e?{notificationId:O._isSafari?this._deviceTokenSafari:this._subscription.endpoint}:Object.assign({},function(e,t){for(var r,n={},o={},s=0,i=e.length;s<i;)s+=o[e[s]]=1;for(r in t)o.hasOwnProperty(r)||(n[r]=t[r]);return n}(["safari","applicationServerKey"],this._settings),O._isSafari?{newNotificationId:this._deviceTokenSafari}:{auth:o(this._subscription.getKey("auth")),newNotificationId:this._subscription.endpoint,publicKey:o(this._subscription.getKey("p256dh"))})},O.prototype._apiRequest=function(e){return r(this,void 0,void 0,(function(){var t,r;return n(this,(function(n){switch(n.label){case 0:if(!this._api[e])throw Error('API method for action "'+e+'" is not specified.');if(!this._subscription&&!O._isSafari)throw Error("Something went wrong, there is no subscription!");return t=this._getQuery(e),r=this._api.host+this._api[e]+(void 0===s&&(s=encodeURIComponent),"?"+Object.keys(o=t).map((function(e){return s(e)+"="+s(o[e])})).join("&")),this._logCb("Performing API request"),this._logCb("API query",t),[4,fetch(r,this._api.fetchRequestInit).then((function(e){return e.json()}))];case 1:return r=n.sent(),this._logCb("API response: ",r),[2,{response:r,query:t,performedRequest:!0}]}var o,s}))}))},O.checkSupport=function(){return O._isSafari?s(["safari"],window)&&s(["pushNotification"],window.safari):s(["serviceWorker"],navigator)&&s(["Notification","Map","Promise"],window)},O.getPermissionState=function(){var e={};return e.denied=b.PERMISSION_DENIED,e.granted=b.PERMISSION_GRANTED,e.default=b.PERMISSION_PROMPT,e[Notification.permission]||b.ERROR},O.getSubscription=function(){return r(this,void 0,void 0,(function(){return n(this,(function(e){switch(e.label){case 0:return O._isSafari?[3,2]:[4,navigator.serviceWorker.ready];case 1:return[2,e.sent().pushManager.getSubscription().catch((function(){return null}))];case 2:return[2,null]}}))}))},O.requestPermission=function(){return new Promise((function(e,t){switch(Notification.permission){case"denied":t(new h("Push messages are blocked."));break;case"granted":e();break;case"default":Notification.requestPermission((function(r){"granted"!==r?t(new h("Couldn't obtain permission.")):e()}));break;default:t(Error("Unknown permission type"))}}))},O.prototype.showNotification=function(e,t){return void 0===t&&(t={}),r(this,void 0,void 0,(function(){var r,o,s,i,a,c=this;return n(this,(function(n){switch(n.label){case 0:return r=Object.assign({},y,t),o=r.tag||v(),(s=r.data||{})._source="PUSH_JS_WINDOW",s.closeOnClick=r.closeOnClick,s.focusOnClick=r.focusOnClick,this._notifications.has(o)&&(clearTimeout(this._notifications.get(o).timeout),this._notifications.delete(o)),[4,O.requestPermission()];case 1:return n.sent(),O._isSafari?[3,5]:[4,navigator.serviceWorker.ready];case 2:return[4,(i=n.sent()).showNotification(e,Object.assign({},r,{data:s,tag:o}))];case 3:return n.sent(),[4,i.getNotifications({tag:o})];case 4:return a=function(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,o,s=r.call(e),i=[];try{for(;(void 0===t||0<t--)&&!(n=s.next()).done;)i.push(n.value)}catch(e){o={error:e}}finally{try{n&&!n.done&&(r=s.return)&&r.call(s)}finally{if(o)throw o.error}}return i}(n.sent(),1),a=a[0],[3,6];case 5:a=new Notification(e,Object.assign({},r,{data:s,tag:o})),n.label=6;case 6:return this._notifications.set(o,{notification:a,timeout:r.timeout?setTimeout((function(){return c.closeNotification(o)}),r.timeout):void 0}),[2,a]}}))}))},O.prototype.closeNotification=function(e){var t;return this._notifications.has(e)&&(t=this._notifications.get(e),clearTimeout(t.timeout),t.notification.close(),this._notifications.delete(e)),Promise.resolve()},O.prototype.closeAllNotifications=function(){return this._notifications.forEach((function(e){clearTimeout(e.timeout),e.notification.close()})),this._notifications.clear(),Promise.resolve()},O.prototype._subscribeNormal=function(e,t){return void 0===t&&(t=!1),r(this,void 0,void 0,(function(){var r,o;return n(this,(function(n){switch(n.label){case 0:return[4,O.getSubscription()];case 1:return!(r=n.sent())||t?[3,3]:[4,this._handleSubscribe(r)];case 2:return n.sent(),[2,{performedRequest:!1}];case 3:return"object"==typeof e&&(this._settings=Object.assign({},this._settings,e)),this._setState(b.STARTING_SUBSCRIBE),[4,O.requestPermission()];case 4:return n.sent(),[4,navigator.serviceWorker.ready];case 5:return[4,n.sent().pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:this._settings.applicationServerKey})];case 6:return r=n.sent(),[4,this._handleSubscribe(r)];case 7:return n.sent(),o=this._settings,[4,d.get("subscription")];case 8:return o.oldNotificationId=n.sent(),[4,Promise.all([d.set("settings",Object.assign({},this._settings)),d.set("subscription",this._subscription.endpoint)])];case 9:return n.sent(),[2,this._apiRequest("subscribe")]}}))}))},O.prototype._checkRemotePermission=function(e){var t=this;return new Promise((function(r,n){var o=Object.assign({},_,t._settings.safari);"default"===e.permission?window.safari.pushNotification.requestPermission(o.webServiceURL,o.webSitePushId,{clientId:o.clientId,deviceStringId:o.deviceStringId,firmware:o.firmware,locale:t._settings.locale,timezone:t._settings.timezone,applicationVersion:t._settings.appVersion},(function(e){var t=e.permission;"denied"===t?n("denied"):"granted"===t&&r(e.deviceToken)})):"denied"===e.permission?n("denied"):"granted"===e.permission&&r(e.deviceToken)}))},O.prototype._subscribeSafari=function(e){return r(this,void 0,void 0,(function(){var t,r,o=this;return n(this,(function(n){switch(n.label){case 0:return"object"==typeof e&&(this._settings=Object.assign({},this._settings,e)),this._setState(b.STARTING_SUBSCRIBE),t=Object.assign({},_,this._settings.safari),t=window.safari.pushNotification.permission(t.webSitePushId),r=!1,[4,this._checkRemotePermission(t).then((function(e){o._deviceTokenSafari=e,r=!0})).catch((function(e){o._logCb("Push messages are unavailable (status: "+e+")")}))];case 1:if(n.sent(),r)return this._setState(b.SUBSCRIBED),[2,this._apiRequest("subscribe")];throw this._setState(b.UNSUBSCRIBED),Error("Push messages are unavailable")}}))}))},O.prototype.subscribe=function(e,t){return void 0===t&&(t=!1),r(this,void 0,void 0,(function(){var r;return n(this,(function(n){switch(n.label){case 0:return n.trys.push([0,2,,3]),[4,this._waitDocumentReady()];case 1:return n.sent(),[2,O._isSafari?this._subscribeSafari(e):this._subscribeNormal(e,t)];case 2:throw r=n.sent(),this._setState(r instanceof h?O.getPermissionState():b.ERROR,r),r;case 3:return[2]}}))}))},O.prototype._waitDocumentReady=function(){return r(this,void 0,void 0,(function(){return n(this,(function(e){return[2,new Promise((function(e,t){"complete"===document.readyState||"interactive"===document.readyState?e():document.addEventListener("readystatechange",(function(){"complete"!==document.readyState&&"interactive"!==document.readyState||e()}))}))]}))}))},O.prototype._unsubscribeNormal=function(){return r(this,void 0,void 0,(function(){var e;return n(this,(function(t){switch(t.label){case 0:return this._setState(b.STARTING_UNSUBSCRIBE),[4,O.getSubscription()];case 1:return(e=t.sent())?[4,Promise.all([e.unsubscribe(),this._handleUnsubscribe(),this._apiRequest("unsubscribe")])]:[2];case 2:return t.sent(),[2]}}))}))},O.prototype._unsubscribeSafari=function(){return r(this,void 0,void 0,(function(){return n(this,(function(e){switch(e.label){case 0:return this._setState(b.STARTING_UNSUBSCRIBE),this._setState(b.UNSUBSCRIBED),[4,this._apiRequest("unsubscribe")];case 1:return e.sent(),[2]}}))}))},O.prototype.unsubscribe=function(){return r(this,void 0,void 0,(function(){return n(this,(function(e){switch(e.label){case 0:return[4,(O._isSafari?this._unsubscribeSafari():this._unsubscribeNormal()).catch(p)];case 1:return e.sent(),this._logCb("Unsubscribed successfully."),[2]}}))}))},O);function O(e){var t=(s=void 0===e?{}:e).api,r=void 0===(n=s.logCb)?p:n,n=(e=void 0===(o=s.serviceWorker)?"":o,s.settings),o=void 0===(o=s.stateChangeCb)?p:o,s=void 0===(s=s.subscriptionUpdateCb)?p:s;this._subscription=null,this._logCb=r,this._serviceWorker=e,this._stateChangeCb=o,this._subscriptionUpdateCb=s,this._api=Object.assign({},i,t),this._settings=Object.assign({},E,n),this._notifications=new Map,this._state=Object.assign({},b.INIT),O.checkSupport()?(this._setState(O.getPermissionState()),S[this._state.id]||this._init()):this._setState(b.UNSUPPORTED)}e.apiDefaults=i,e.default=w,e.states=b,Object.defineProperty(e,"__esModule",{value:!0})}(t)},5373:function(e,t,r){"use strict";var n=r(4121),o="function"==typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e==1/t)||e!=e&&t!=t},s=n.useState,i=n.useEffect,a=n.useLayoutEffect,c=n.useDebugValue;function u(e){var t=e.getSnapshot;e=e.value;try{var r=t();return!o(e,r)}catch(e){return!0}}var l="undefined"==typeof window||void 0===window.document||void 0===window.document.createElement?function(e,t){return t()}:function(e,t){var r=t(),n=s({inst:{value:r,getSnapshot:t}}),o=n[0].inst,l=n[1];return a((function(){o.value=r,o.getSnapshot=t,u(o)&&l({inst:o})}),[e,r,t]),i((function(){return u(o)&&l({inst:o}),e((function(){u(o)&&l({inst:o})}))}),[e]),c(r),r};t.useSyncExternalStore=void 0!==n.useSyncExternalStore?n.useSyncExternalStore:l},1766:function(e,t,r){"use strict";var n=r(4121),o=r(4073),s="function"==typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e==1/t)||e!=e&&t!=t},i=o.useSyncExternalStore,a=n.useRef,c=n.useEffect,u=n.useMemo,l=n.useDebugValue;t.useSyncExternalStoreWithSelector=function(e,t,r,n,o){var d=a(null);if(null===d.current){var p={hasValue:!1,value:null};d.current=p}else p=d.current;d=u((function(){function e(e){if(!c){if(c=!0,i=e,e=n(e),void 0!==o&&p.hasValue){var t=p.value;if(o(t,e))return a=t}return a=e}if(t=a,s(i,e))return t;var r=n(e);return void 0!==o&&o(t,r)?t:(i=e,a=r)}var i,a,c=!1,u=void 0===r?null:r;return[function(){return e(t())},null===u?void 0:function(){return e(u())}]}),[t,r,n,o]);var h=i(e,d[0],d[1]);return c((function(){p.hasValue=!0,p.value=h}),[h]),l(h),h}},4073:function(e,t,r){"use strict";e.exports=r(5373)},248:function(e,t,r){"use strict";e.exports=r(1766)},6220:function(e){e.exports=function(e,t){if(null==e)return{};var r,n,o={},s=Object.keys(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)>=0||(o[r]=e[r]);return o},e.exports.__esModule=!0,e.exports.default=e.exports},4083:function(e){"use strict";e.exports={PHONE_SMALL:370,PHONE_GIANT:541,PHONE:599,MEDIUM_TABLETS:600,TABLETS:600,MOBILE:1023,DESKTOP:1024,DESKTOP_SMALL:1024,DESKTOP_MEDIUM:1360,DESKTOP_LARGE_BOARD:1600,DESKTOP_LARGE:1600,DESKTOP_EXTRA_LARGE:1716,TABLET_S:600,TABLET_L:768,DESKTOP_S:1024,DESKTOP_MD:1280,DESKTOP_M:1360,DESKTOP_L:1600}},6443:function(e,t,r){"use strict";function n(){return n=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},n.apply(this,arguments)}r.d(t,{Z:function(){return n}})},1973:function(e,t,r){"use strict";function n(e,t){if(null==e)return{};var r,n,o={},s=Object.keys(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}r.d(t,{Z:function(){return n}})},459:function(e){"use strict";e.exports=JSON.parse('{"name":"@tinkoff/cobrowsing","version":"3.16.1","main":"index.js","types":"index.d.ts","sideEffects":false,"publishConfig":{"registry":"https://nexus.tcsbank.ru/repository/npm-hosted/"}}')}},i={};function a(e){var t=i[e];if(void 0!==t)return t.exports;var r=i[e]={exports:{}},n=!0;try{s[e].call(r.exports,r,r.exports,a),n=!1}finally{n&&delete i[e]}return r.exports}a.m=s,a.c=i,e=[],a.O=function(t,r,n,o){if(!r){var s=1/0;for(l=0;l<e.length;l++){for(var[r,n,o]=e[l],i=!0,c=0;c<r.length;c++)(!1&o||s>=o)&&Object.keys(a.O).every((function(e){return a.O[e](r[c])}))?r.splice(c--,1):(i=!1,o<s&&(s=o));if(i){e.splice(l--,1);var u=n();void 0!==u&&(t=u)}}return t}o=o||0;for(var l=e.length;l>0&&e[l-1][2]>o;l--)e[l]=e[l-1];e[l]=[r,n,o]},a.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return a.d(t,{a:t}),t},a.d=function(e,t){for(var r in t)a.o(t,r)&&!a.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},a.f={},a.e=function(e){return Promise.all(Object.keys(a.f).reduce((function(t,r){return a.f[r](e,t),t}),[]))},a.u=function(e){return e+"."+{mainDefault:"96c432a7cb22db08",pfphomeMain:"444390bbf6c4fa5a",perfume_js_dist_perfume_esm_min_js:"645fad92433eb132","cobrowsing-ui":"da7ce77dd6e1b1bc"}[e]+".chunk.js"},a.miniCssF=function(e){return e+"."+{mainDefault:"bb1dc989b1d6059c",pfphomeMain:"bb1dc989b1d6059c","cobrowsing-ui":"94a5aac30a7d717e"}[e]+".chunk.css"},a.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t={},r="@tramvai/cli:",a.l=function(e,n,o,s){if(t[e])t[e].push(n);else{var i,c;if(void 0!==o)for(var u=document.getElementsByTagName("script"),l=0;l<u.length;l++){var d=u[l];if(d.getAttribute("src")==e||d.getAttribute("data-webpack")==r+o){i=d;break}}i||(c=!0,(i=document.createElement("script")).charset="utf-8",i.timeout=240,a.nc&&i.setAttribute("nonce",a.nc),i.setAttribute("data-webpack",r+o),i.src=e,0!==i.src.indexOf(window.location.origin+"/")&&(i.crossOrigin="anonymous")),t[e]=[n];var p=function(r,n){i.onerror=i.onload=null,clearTimeout(h);var o=t[e];if(delete t[e],i.parentNode&&i.parentNode.removeChild(i),o&&o.forEach((function(e){return e(n)})),r)return r(n)},h=setTimeout(p.bind(null,void 0,{type:"timeout",target:i}),24e4);i.onerror=p.bind(null,i.onerror),i.onload=p.bind(null,i.onload),c&&document.head.appendChild(i)}},a.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},a.p=window.ap,function(){a.S={};var e={},t={};a.I=function(r,n){n||(n=[]);var o=t[r];if(o||(o=t[r]={}),!(n.indexOf(o)>=0)){if(n.push(o),e[r])return e[r];a.o(a.S,r)||(a.S[r]={});var s=a.S[r],i="@tramvai/cli",c=function(e,t,r,n){var o=s[e]=s[e]||{},a=o[t];(!a||!a.loaded&&(!n!=!a.eager?n:i>a.from))&&(o[t]={get:r,from:i,eager:!!n})},u=[];return"default"===r&&(c("react-dom","18.2.0",(function(){return function(){return a(2673)}}),1),c("react/jsx-runtime","18.2.0",(function(){return function(){return a(2754)}}),1),c("react","18.2.0",(function(){return function(){return a(2932)}}),1)),e[r]=u.length?Promise.all(u).then((function(){return e[r]=1})):1}}}(),function(){var e=function(e){var t=function(e){return e.split(".").map((function(e){return+e==e?+e:e}))},r=/^([^-+]+)?(?:-([^+]+))?(?:\+(.+))?$/.exec(e),n=r[1]?t(r[1]):[];return r[2]&&(n.length++,n.push.apply(n,t(r[2]))),r[3]&&(n.push([]),n.push.apply(n,t(r[3]))),n},t=function(t,r){var n=t[r];return(r=Object.keys(n).reduce((function(t,r){return!t||function(t,r){t=e(t),r=e(r);for(var n=0;;){if(n>=t.length)return n<r.length&&"u"!=(typeof r[n])[0];var o=t[n],s=(typeof o)[0];if(n>=r.length)return"u"==s;var i=r[n],a=(typeof i)[0];if(s!=a)return"o"==s&&"n"==a||"s"==a||"u"==s;if("o"!=s&&"u"!=s&&o!=i)return o<i;n++}}(t,r)?r:t}),0))&&n[r]},r=function(e){return function(t,r,n,o){var s=a.I(t);return s&&s.then?s.then(e.bind(e,t,a.S[t],r,n,o)):e(t,a.S[t],r,n,o)}}((function(e,r,n,o){return r&&a.o(r,n)?((s=t(r,n)).loaded=1,s.get()):o();var s})),n={},o={4121:function(){return r("default","react",(function(){return function(){return a(2932)}}))},130:function(){return r("default","react/jsx-runtime",(function(){return function(){return a(2754)}}))},776:function(){return r("default","react-dom",(function(){return function(){return a(2673)}}))}};[4121,130,776].forEach((function(e){a.m[e]=function(t){n[e]=0,delete a.c[e];var r=o[e]();if("function"!=typeof r)throw new Error("Shared module is not available for eager consumption: "+e);t.exports=r()}}));var s={};a.f.consumes=function(e,t){a.o(s,e)&&s[e].forEach((function(e){if(a.o(n,e))return t.push(n[e]);var r=function(t){n[e]=0,a.m[e]=function(r){delete a.c[e],r.exports=t()}},s=function(t){delete n[e],a.m[e]=function(r){throw delete a.c[e],t}};try{var i=o[e]();i.then?t.push(n[e]=i.then(r).catch(s)):r(i)}catch(e){s(e)}}))}}(),n=function(e){return new Promise((function(t,r){var n=a.miniCssF(e),o=a.p+n;if(function(e,t){for(var r=document.getElementsByTagName("link"),n=0;n<r.length;n++){var o=(i=r[n]).getAttribute("data-href")||i.getAttribute("href");if("stylesheet"===i.rel&&(o===e||o===t))return i}var s=document.getElementsByTagName("style");for(n=0;n<s.length;n++){var i;if((o=(i=s[n]).getAttribute("data-href"))===e||o===t)return i}}(n,o))return t();!function(e,t,r,n){var o=document.createElement("link");o.rel="stylesheet",o.type="text/css",o.onerror=o.onload=function(s){if(o.onerror=o.onload=null,"load"===s.type)r();else{var i=s&&("load"===s.type?"missing":s.type),a=s&&s.target&&s.target.href||t,c=new Error("Loading CSS chunk "+e+" failed.\n("+a+")");c.code="CSS_CHUNK_LOAD_FAILED",c.type=i,c.request=a,o.parentNode.removeChild(o),n(c)}},o.href=t,0!==o.href.indexOf(window.location.origin+"/")&&(o.crossOrigin="anonymous"),document.head.appendChild(o)}(e,o,t,r)}))},o={platform:0},a.f.miniCss=function(e,t){o[e]?t.push(o[e]):0!==o[e]&&{mainDefault:1,pfphomeMain:1,"cobrowsing-ui":1}[e]&&t.push(o[e]=n(e).then((function(){o[e]=0}),(function(t){throw delete o[e],t})))},function(){var e={platform:0};a.f.j=function(t,r){var n=a.o(e,t)?e[t]:void 0;if(0!==n)if(n)r.push(n[2]);else{var o=new Promise((function(r,o){n=e[t]=[r,o]}));r.push(n[2]=o);var s=a.p+a.u(t),i=new Error;a.l(s,(function(r){if(a.o(e,t)&&(0!==(n=e[t])&&(e[t]=void 0),n)){var o=r&&("load"===r.type?"missing":r.type),s=r&&r.target&&r.target.src;i.message="Loading chunk "+t+" failed.\n("+o+": "+s+")",i.name="ChunkLoadError",i.type=o,i.request=s,n[1](i)}}),"chunk-"+t,t)}},a.O.j=function(t){return 0===e[t]};var t=function(t,r){var n,o,[s,i,c]=r,u=0;if(s.some((function(t){return 0!==e[t]}))){for(n in i)a.o(i,n)&&(a.m[n]=i[n]);if(c)var l=c(a)}for(t&&t(r);u<s.length;u++)o=s[u],a.o(e,o)&&e[o]&&e[o][0](),e[s[u]]=0;return a.O(l)},r=self.wsp=self.wsp||[];r.forEach(t.bind(null,0)),r.push=t.bind(null,r.push.bind(r))}();var c=a.O(void 0,["react"],(function(){return a(914)}));c=a.O(c)}();