var e={d:(t,r)=>{for(var n in r)e.o(r,n)&&!e.o(t,n)&&Object.defineProperty(t,n,{enumerable:!0,get:r[n]})},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t)},t={};e.d(t,{j:()=>N});const r={randomUUID:"undefined"!=typeof crypto&&crypto.randomUUID&&crypto.randomUUID.bind(crypto)};let n;const i=new Uint8Array(16);function o(){if(!n&&(n="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!n))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return n(i)}const a=[];for(let e=0;e<256;++e)a.push((e+256).toString(16).slice(1));const s=function(e,t,n){if(r.randomUUID&&!t&&!e)return r.randomUUID();const i=(e=e||{}).random||(e.rng||o)();if(i[6]=15&i[6]|64,i[8]=63&i[8]|128,t){n=n||0;for(let e=0;e<16;++e)t[n+e]=i[e];return t}return function(e,t=0){return(a[e[t+0]]+a[e[t+1]]+a[e[t+2]]+a[e[t+3]]+"-"+a[e[t+4]]+a[e[t+5]]+"-"+a[e[t+6]]+a[e[t+7]]+"-"+a[e[t+8]]+a[e[t+9]]+"-"+a[e[t+10]]+a[e[t+11]]+a[e[t+12]]+a[e[t+13]]+a[e[t+14]]+a[e[t+15]]).toLowerCase()}(i)};function c(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function u(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?c(Object(r),!0).forEach((function(t){l(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):c(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function l(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var p=/^(impression|click)$/;class d{get size(){return this.queue.size}constructor(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};l(this,"queue",new Set),l(this,"defaultProperties",{}),this.defaultProperties=t,e.forEach((e=>this.push(e)))}push(e){this._assertType(e)&&this.queue.add(u(u({},e),this.defaultProperties))}flush(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=-1*Math.min(Math.abs(e),this.queue.size),r=Array.from(this.queue),n=r.slice(t);return t?(n.forEach((e=>this.queue.delete(e))),new Set(n)):(this.queue.clear(),new Set(r))}_assertType(e){var{eventType:t}=e;return p.test(t)}}const f={interval:500,timer:null,stopped:!1,start(e,t){"function"==typeof e&&(this.interval=isNaN(t)?this.interval:t,this.stopped=!1,this._onTick=e,this.timer=setTimeout(this._tick.bind(this),this.interval))},stop(){this.stopped=!0,clearTimeout(this.timer),this.timer=null},_tick(){this.stopped||(this._onTick(),this.timer=setTimeout(this._tick.bind(this),this.interval))}};function v(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Object.keys(e).reduce(((r,n)=>{var i=t[n]?t[n]:n,o=e[n];return function(e){return null!=e&&""!==e}(o)&&r.push(function(e,t){return"".concat(encodeURIComponent(e),"=").concat(encodeURIComponent(t))}(i,o)),r}),[])}const h=JSON.parse('{"abbaId":"abba-id","moduleId":"module","moduleTitle":"module-title","storyId":"story","pageviewId":"pageview-id"}');function b(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}class y{constructor(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};b(this,"maxUrlLength",2e3),b(this,"decorators",[]),b(this,"fields",[]),this.fields=e.fields||[]}addDecorator(e){"function"==typeof e&&this.decorators.push(e)}getFields(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.fields.reduce(((t,r)=>(r in e&&(t[r]=e[r]),t)),{})}prepare(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=this.getFields(e);return this.decorators.length?this.decorators.reduce(((e,t)=>t(e)),t):t}checkUrl(){(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"").length>this.maxUrlLength&&console.warn("Sputnik: Url exceeds maximum recommended length")}send(){throw new Error("Unimplemented method")}}var m="abbaExperiments,abbaId,count,id,parentId,positionX,positionY,timezoneOffset,trackingTitle,type,viewportHeight,viewportWidth,pageviewId".split(","),g="action,category,pageviewId,data".split(","),O=["category","action","data"];function w(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function j(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?w(Object(r),!0).forEach((function(t){P(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):w(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function P(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}class S extends y{constructor(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};super(j({fields:g},e)),this.opt=j({},e),this.addDecorator(S._decorator)}gtag(e){window.dataLayer&&window.dataLayer.push(e)}send(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(window.dataLayer){var t=this.prepare(e);this.gtag(j(j(j({},this.opt),t),{},{event:"lineup_module_click"}))}}static _decorator(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{category:t,action:r,data:n}=e,i=function(e,t){if(null==e)return{};var r,n,i=function(e,t){if(null==e)return{};var r,n,i={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(i[r]=e[r]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}(e,O),o=function(e,t){return v(e,h).join(",")}(j(j({},n),i));if(!t||!r)throw new Error("Sputnik: Required parameters category and action are not specified");return o.length>500&&console.warn("Sputnik: eventLabel limit is exceeded!"),{eventCategory:t,eventAction:r,eventLabel:o}}}const k=JSON.parse('{"abbaExperiments":"abex","abbaId":"abid","count":"cnt","pageviewId":"pvid","parentId":"pid","positionX":"px","positionY":"py","timezoneOffset":"tzo","trackingTitle":"mttl","type":"ty","viewportHeight":"vh","viewportWidth":"vw"}');function D(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function U(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}class I{sendBulk(e){e.forEach((e=>{var{eventType:t}=e,r="click"===t?I.transports[t]:I.transports.default;r&&r.send(e)}))}}var T,E,_;function x(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if("object"!=typeof e||Array.isArray(e))return null;var t=Object.getPrototypeOf(e);return Object.getOwnPropertyNames(t).sort().join(":")}function z(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function q(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?z(Object(r),!0).forEach((function(t){L(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):z(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function L(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}T=I,E="transports",_={default:new class extends y{constructor(e){super(function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?D(Object(r),!0).forEach((function(t){U(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):D(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({fields:m},e)),this.baseUrl=e.baseUrl,this.addDecorator((e=>function(e,t){return v(e,k).join("&")}(e)))}send(e){var t=this.prepare(e),r="".concat(this.baseUrl,"?").concat(t);this.checkUrl(r),this._isBeaconSupported()?navigator.sendBeacon(r):(new Image).src=r}_isBeaconSupported(){return navigator&&"function"==typeof navigator.sendBeacon}}({baseUrl:"https://tracking.bloomberg.com/imp/pixel.gif"}),click:new S},(E=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:String(t)}(E))in T?Object.defineProperty(T,E,{value:_,enumerable:!0,configurable:!0,writable:!0}):T[E]=_;var N=new class{constructor(e,t){var r,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];return L(this,"eventQueue",null),L(this,"transmitter",null),L(this,"pageviewId",s()),L(this,"timezoneOffset",60*(new Date).getTimezoneOffset()*1e3),L(this,"version","2.3.0"),x(n)===x(this)?n:(r=navigator.doNotTrack||window.doNotTrack||navigator.msDoNotTrack||null,1===parseInt(r,10)||"yes"===r?(console.warn("Tracking is disabled due to user request (DNT)"),this):(this.eventQueue=new d(n,{pageviewId:this.pageviewId,timezoneOffset:this.timezoneOffset}),this.transmitter=new I,this._onDocumentUnload=this._onDocumentUnload.bind(this),this._onPeriodicSync=this._onPeriodicSync.bind(this),e.addEventListener("beforeunload",this._onDocumentUnload),f.start(this._onPeriodicSync),void(t.cookie="__sppvid=".concat(this.pageviewId,";domain=.bloomberg.com;"))))}push(e){this.eventQueue&&e&&this.eventQueue.push(q({},e))}trackClick(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.push(q(q({},e),{},{eventType:"click"}))}trackImpression(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.push(q(q({},e),{},{eventType:"impression"}))}_onDocumentUnload(){f.stop(),this.transmitter.sendBulk(this.eventQueue.flush())}_onPeriodicSync(){this.transmitter.sendBulk(this.eventQueue.flush(20))}}(window,document,window.bbeep);window.bbeep=N;var B=t.j;export{B as Sputnik};