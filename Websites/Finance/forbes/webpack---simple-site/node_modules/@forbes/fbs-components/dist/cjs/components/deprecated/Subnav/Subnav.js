'use strict';

Object.defineProperty(exports, '__esModule', { value: true });

var _tslib = require('../../../_virtual/_tslib.js');
var React = require('react');
var index = require('../../../node_modules/classnames/index.js');
var RegisterElementDimensions = require('../../RegisterElementDimensions/RegisterElementDimensions.js');
var DimensionsProvider = require('../../RegisterElementDimensions/contexts/DimensionsProvider.js');
var Subnav$1 = require('./Subnav.scss.js');

function _interopDefaultLegacy (e) { return e && typeof e === 'object' && 'default' in e ? e : { 'default': e }; }

var React__default = /*#__PURE__*/_interopDefaultLegacy(React);

function Subnav(_a) {
    var _b;
    var _ref = _a._ref, _c = _a.alignment, alignment = _c === void 0 ? 'center' : _c, className = _a.className, logo = _a.logo, children = _a.children, restProps = _tslib.__rest(_a, ["_ref", "alignment", "className", "logo", "children"]);
    var classNameAlignment = logo ? Subnav$1["default"].spaceBetween : Subnav$1["default"][alignment];
    var _d = React.useState(null), openedIndex = _d[0], setOpenedIndex = _d[1];
    var closeAll = function () { return setOpenedIndex(null); };
    var subNavItems = React__default["default"].Children.map(children, function (child, index) {
        return React__default["default"].cloneElement(child, {
            isOpen: index === openedIndex,
            setOpen: function (open) { return setOpenedIndex(open ? index : null); },
            closeAll: closeAll,
        });
    });
    React.useEffect(function () {
        document.addEventListener('click', closeAll);
        return function () { return document.removeEventListener('click', closeAll); };
    }, []);
    return (React__default["default"].createElement(DimensionsProvider["default"], null,
        React__default["default"].createElement(RegisterElementDimensions["default"], { name: "subnavDimensions" },
            React__default["default"].createElement("div", _tslib.__assign({ className: index["default"](Subnav$1["default"].subnav, className, classNameAlignment), ref: _ref }, restProps),
                logo && React__default["default"].createElement("div", { className: Subnav$1["default"].subnavLogo }, logo),
                React__default["default"].createElement("ul", { className: index["default"](Subnav$1["default"].subnavList, (_b = {},
                        _b[Subnav$1["default"].subnavListWhenLogoPresent] = logo,
                        _b)) }, subNavItems)))));
}

exports["default"] = Subnav;
//# sourceMappingURL=Subnav.js.map
