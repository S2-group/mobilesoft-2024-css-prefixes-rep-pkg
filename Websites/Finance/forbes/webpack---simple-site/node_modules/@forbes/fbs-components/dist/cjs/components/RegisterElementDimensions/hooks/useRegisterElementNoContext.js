'use strict';

Object.defineProperty(exports, '__esModule', { value: true });

var _tslib = require('../../../_virtual/_tslib.js');
var React = require('react');
var constants = require('./constants.js');
var helpers = require('./helpers.js');

function useRegisterElementNoContext(name, ref) {
    React.useEffect(function () {
        if (!(ref === null || ref === void 0 ? void 0 : ref.current))
            return;
        var resizeObserver = new ResizeObserver(function (entries) {
            entries.forEach(function (entry) {
                var _a;
                var detail = (_a = {}, _a["".concat(name)] = entry.target.getBoundingClientRect(), _a);
                var event = new CustomEvent(constants.DIMENSIONS_CHANGED_EVENT, { detail: detail });
                window.fbsDimensions = _tslib.__assign(_tslib.__assign({}, helpers.getFbsDimensions()), detail);
                document.dispatchEvent(event);
            });
        });
        resizeObserver.observe(ref.current);
        var currentRef = ref === null || ref === void 0 ? void 0 : ref.current;
        // eslint-disable-next-line consistent-return
        return function () {
            var _a;
            resizeObserver.disconnect();
            var val = currentRef ? currentRef === null || currentRef === void 0 ? void 0 : currentRef.getBoundingClientRect() : undefined;
            var detail = (_a = {}, _a["".concat(name)] = val, _a);
            var event = new CustomEvent(constants.DIMENSIONS_CHANGED_EVENT, { detail: detail });
            window.fbsDimensions = _tslib.__assign(_tslib.__assign({}, helpers.getFbsDimensions()), detail);
            document.dispatchEvent(event);
        };
    }, [name, ref]);
}

exports["default"] = useRegisterElementNoContext;
//# sourceMappingURL=useRegisterElementNoContext.js.map
