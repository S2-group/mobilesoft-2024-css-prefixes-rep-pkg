'use strict';

Object.defineProperty(exports, '__esModule', { value: true });

var React = require('react');
var reactIs = require('react-is');
var DimensionsProvider = require('./contexts/DimensionsProvider.js');
var useRegisterElementNoContext = require('./hooks/useRegisterElementNoContext.js');

function _interopDefaultLegacy (e) { return e && typeof e === 'object' && 'default' in e ? e : { 'default': e }; }

var React__default = /*#__PURE__*/_interopDefaultLegacy(React);

function RegisterElementDimensions(_a) {
    var _b;
    var name = _a.name, children = _a.children;
    var ref = React.useRef(null);
    var _c = DimensionsProvider.useDimensionsContext(), useRegisterElement = _c.useRegisterElement, usesContext = _c.usesContext;
    var registerElementHook = usesContext
        ? useRegisterElement
        : useRegisterElementNoContext["default"];
    registerElementHook(name, ref);
    var isChildDomElement = typeof children.type === 'string';
    var isChildForwardRef = reactIs.isForwardRef(children);
    var refKey = isChildDomElement || isChildForwardRef ? 'ref' : '_ref';
    return React__default["default"].cloneElement(children, (_b = {}, _b[refKey] = ref, _b));
}

exports["default"] = RegisterElementDimensions;
//# sourceMappingURL=RegisterElementDimensions.js.map
