import { __rest, __assign } from '../../_virtual/_tslib.js';
import React__default, { useState } from 'react';
import classnames from '../../node_modules/classnames/index.js';
import SvgChevronRight from '../../node_modules/@forbes/fbs-icons/dist/svg/chevron-right.svg.js';
import MenuItemWithSubMenu from '../MenuItemWithSubMenu/MenuItemWithSubMenu.js';
import MenuItem from '../MenuItem/MenuItem.js';
import Menu from '../Menu/Menu.js';
import subMenuConfig from '../../data/subMenuConfig.json.js';
import { copyrightNotice } from '../../shared/constants/copyrightNotice.js';
import GlobalHeaderSubscribeToNewsletters from '../GlobalHeader/GlobalHeaderSubscribeToNewsletters/GlobalHeaderSubscribeToNewsletters.js';
import ShowIf from '../../shared/components/ShowIf/index.js';
import styles from './GlobalHeaderMenu.scss.js';

var generateTracking = function (title, position) {
    return "U20 - Channel: ".concat(title, " - Position ").concat(position);
};
function ChannelMenu(_a) {
    var menuConfig = _a.children, _b = _a.isOpen, isOpen = _b === void 0 ? false : _b, showNewslettersSubscribeUI = _a.showNewslettersSubscribeUI, newsLetterSubscribeTrackingProps = _a.newsLetterSubscribeTrackingProps, restProps = __rest(_a, ["children", "isOpen", "showNewslettersSubscribeUI", "newsLetterSubscribeTrackingProps"]);
    var _c = useState(-1), activeTab = _c[0], setActiveTab = _c[1];
    if (!menuConfig)
        return null;
    var closeSubMenu = function () {
        setActiveTab(-1);
    };
    return (React__default.createElement(Menu, __assign({}, restProps, { className: classnames(styles.globalHeaderMenu, isOpen ? styles.opened : styles.closed) }),
        React__default.createElement(ShowIf, { condition: showNewslettersSubscribeUI },
            React__default.createElement("li", { className: styles.newsLetterSubscriptionMobileContainer },
                React__default.createElement(GlobalHeaderSubscribeToNewsletters, { className: styles.newsletterSubscriptionMenuItem, trackingProps: newsLetterSubscribeTrackingProps }))),
        menuConfig.map(function (menuItem, index) {
            var _a;
            if ((_a = menuItem === null || menuItem === void 0 ? void 0 : menuItem.sections) === null || _a === void 0 ? void 0 : _a.length) {
                return (React__default.createElement(MenuItem, { key: index, variant: "primary", tabIndex: 0 },
                    React__default.createElement("div", { role: "button", className: styles.menuTitle, onClick: function () { return setActiveTab(index); } },
                        menuItem.url ? (React__default.createElement("a", { "data-ga-track": generateTracking(menuItem.title, menuItem.position), className: styles.channelMenuTitle, href: menuItem.url }, menuItem.title)) : (React__default.createElement("span", null, menuItem.title)),
                        React__default.createElement("span", null,
                            React__default.createElement(SvgChevronRight, null))),
                    React__default.createElement(MenuItemWithSubMenu, { index: index, key: index, variant: "primary", closeSubMenu: closeSubMenu, openSubMenu: activeTab === index, menuItem: menuItem, dataGaTrack: generateTracking(menuItem.title, menuItem.position) })));
            }
            return (React__default.createElement(MenuItem, { key: index, tabIndex: 0, variant: "primary" },
                React__default.createElement("a", { "data-ga-track": generateTracking(menuItem.title, menuItem.position), href: menuItem.url }, menuItem.title)));
        }),
        subMenuConfig.map(function (subMenuItem, index) {
            return (React__default.createElement(MenuItem, { key: index, variant: "tertiary", tabIndex: 0 },
                React__default.createElement("a", { href: subMenuItem.href }, subMenuItem.title)));
        }),
        React__default.createElement(MenuItem, { variant: "tertiary", tabIndex: 0 }, copyrightNotice)));
}

export { ChannelMenu as default };
//# sourceMappingURL=ChannelMenu.js.map
