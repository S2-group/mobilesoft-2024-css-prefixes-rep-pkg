const buildBrowseArticle = ({ author, published, primarySection, referrer, customPageTitle }) => {
    window.crdl('event', 'browseArticle', {
        author: author,
        pubDate: published,
        section: primarySection,
        source: referrer,
        title: customPageTitle,
    });
};
const buildBrowseVideo = ({ published, primarySection, referrer, customPageTitle }) => {
    window.crdl('event', 'browseVideo', {
        pubDate: published,
        section: primarySection,
        source: referrer,
        title: customPageTitle,
    });
};
const buildBrowseContrib = ({ author, primarySection, referrer }) => {
    window.crdl('event', 'browseCHPS', {
        author: author,
        section: primarySection,
        source: referrer,
    });
};
const buildBrowseLanding = ({ referrer, primarySection }) => {
    window.crdl('event', 'browseLanding', {
        section: primarySection,
        source: referrer,
    });
};
const hasCordialContactId = () => localStorage.getItem('contactID') !== null;
const trackCordial = (tracking) => {
    var _a;
    if ((_a = window['fbsCordial']) === null || _a === void 0 ? void 0 : _a.identify) {
        window['fbsCordial'].identify().then((isLoggedIn) => {
            var _a, _b, _c;
            const hasUserInfo = isLoggedIn || hasCordialContactId();
            if (hasUserInfo) {
                if ((_a = tracking === null || tracking === void 0 ? void 0 : tracking.DFPZone) === null || _a === void 0 ? void 0 : _a.includes('article-')) {
                    buildBrowseArticle(tracking);
                }
                else if ((_b = tracking === null || tracking === void 0 ? void 0 : tracking.DFPZone) === null || _b === void 0 ? void 0 : _b.includes('video')) {
                    buildBrowseVideo(tracking);
                }
                else if (((_c = tracking === null || tracking === void 0 ? void 0 : tracking.DFPZone) === null || _c === void 0 ? void 0 : _c.includes('contrib')) && window.forbes['simple-site'].showFollowButton) {
                    buildBrowseContrib(tracking);
                }
                else if (tracking) {
                    buildBrowseLanding(tracking);
                }
            }
        });
    }
};
export default trackCordial;
