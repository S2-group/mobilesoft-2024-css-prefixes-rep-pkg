(window.webpackJsonp=window.webpackJsonp||[]).push([[1,43,49],{445:function(e,t,n){e.exports={}},446:function(e,t,n){e.exports={}},455:function(e,t,n){"use strict";n.r(t);var r=n(0),o=n(5),l=(n(7),n(8),n(272),n(107),n(154)),c=n(39),d=n(100),h=e=>{window.dataLayer=window.dataLayer||[],window.dataLayer.push(e)};function f(object,e){var t=Object.keys(object);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(object);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(object,e).enumerable}))),t.push.apply(t,n)}return t}var m={components:{EModal:l.a},props:{show:{type:Boolean,required:!0},internationalRedirectUrl:{type:String}},data:()=>({ButtonPrimary:{text:"Visit international",icon:"external_link",iconPosition:"right"},ButtonSecondary:{text:"Cancel"},internationalSiteName:"international website",hasInternationalSiteName:!1,loaded:!1}),computed:function(e){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?f(Object(source),!0).forEach((function(t){Object(o.a)(e,t,source[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(source)):f(Object(source)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(source,t))}))}return e}({},Object(c.d)({parcelIdentifiers:e=>e.parcelIdentifiers})),methods:{handleCancel(){h({event:"ga_tracking",eventCategory:"Click tracking",eventAction:"/track-a-parcel",eventLabel:"btn-cancel international"}),window.location.assign(window.location.origin+"/track-a-parcel")},handleClose(){h({event:"ga_tracking",eventCategory:"Click tracking",eventAction:"/track-a-parcel",eventLabel:"btn-close international modal"}),window.location.assign(window.location.origin+"/track-a-parcel")},goToInternationalRedirect(){h({event:"ga_tracking",eventCategory:"Click tracking",eventAction:"/track-a-parcel",eventLabel:"btn-visit international"}),window.open(this.internationalRedirectUrl)}},created(){var e=this;return Object(r.a)((function*(){if(e.internationalRedirectUrl){if("international.evri.com"!==new URL(e.internationalRedirectUrl).host)try{var{data:data}=yield d.a.getByUID("track_variables","track_variables",{});e.hasInternationalSiteName=!0,e.internationalSiteName=data.international_site_name,e.ButtonPrimary.text=data.international_site_button_text}catch(e){console.log(e)}e.loaded=!0}else e.loaded=!0}))()}},v=m,_=(n(470),n(1)),component=Object(_.a)(v,(function(){var e=this,t=e._self._c;return t("e-modal",{staticClass:"international-redirect-modal",attrs:{"is-open":e.show&&e.loaded,avatar:"alert_2",heading:"Redirect notice","button-primary":e.ButtonPrimary,"button-secondary":e.ButtonSecondary},on:{close:e.handleClose,clickButtonPrimary:e.goToInternationalRedirect,clickButtonSecondary:e.handleCancel}},[t("div",{staticClass:"international-redirect-modal__body"},[e.hasInternationalSiteName?t("p",[e._v("\n      To track an international parcel, you'll need to visit our international\n      site\n      "),t("span",{staticClass:"international-redirect-modal__body--bold"},[e._v("\n        "+e._s(e.internationalSiteName)+".")])]):e._e(),e._v(" "),e.hasInternationalSiteName?e._e():t("p",[e._v("\n      To track an international parcel, you'll need to visit our\n      "),t("span",{staticClass:"international-redirect-modal__body--bold"},[e._v("\n        international site.")])]),e._v(" "),t("p",[e._v("\n      If you don't want to visit this website, you can cancel to stay on\n      evri.com, but you'll be unable to track this parcel.\n    ")])])])}),[],!1,null,"6a3401f5",null);t.default=component.exports},470:function(e,t,n){"use strict";n(445)},473:function(e,t){function n(e,t,n){var r,o,l,c,d;function h(){var f=Date.now()-c;f<t&&f>=0?r=setTimeout(h,t-f):(r=null,n||(d=e.apply(l,o),l=o=null))}null==t&&(t=100);var f=function(){l=this,o=arguments,c=Date.now();var f=n&&!r;return r||(r=setTimeout(h,t)),f&&(d=e.apply(l,o),l=o=null),d};return f.clear=function(){r&&(clearTimeout(r),r=null)},f.flush=function(){r&&(d=e.apply(l,o),l=o=null,clearTimeout(r),r=null)},f}n.debounce=n,e.exports=n},474:function(e,t,n){"use strict";n(446)},475:function(e,t,n){e.exports={}},478:function(e,t,n){e.exports={}},489:function(e,t,n){"use strict";n.r(t);var r=n(0),o=n(5),l=(n(64),n(108),n(16),n(42),n(24),n(157),n(39)),c=n(31),d=n(473),h=n(79),f=n(153),m=n(13),v=n(152),_=n(160);function k(object,e){var t=Object.keys(object);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(object);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(object,e).enumerable}))),t.push.apply(t,n)}return t}function y(e){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?k(Object(source),!0).forEach((function(t){Object(o.a)(e,t,source[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(source)):k(Object(source)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(source,t))}))}return e}var R={name:"e-retailer-search",components:{EInput:f.a,EIcon:m.a,EAvatar:v.default,ValidationProvider:c.b},props:{value:{type:String,required:!0},rules:{type:String,required:!1,default:""}},data:()=>({retailerLabel:"Enter your retailer's name",isDropdownOpen:!1,isLoading:!1,showHasNoResults:!1,DEFAULT_RETAILER_LOGO:_.a}),computed:y(y({},Object(l.d)({retailerList:e=>e.entry.filteredRetailerList,fetchRetailersLoading:e=>e.entry.fetchRetailersLoading})),{},{searchTerm:{get(){return this.$store.state.entry.retailerSearchTerm},set(e){this.$store.commit("entry/SET_RETAILER_SEARCH_TERM",e)}},selectedRetailer:{get(){return this.$store.state.entry.selectedRetailer},set(e){this.$store.commit("entry/SET_SELECTED_RETAILER",e)}},isDropdownVisible(){var e;return this.searchTerm.trim().length>=_.b&&(null===(e=this.retailerList)||void 0===e?void 0:e.length)&&this.isDropdownOpen},hasNoResults(){var e;return this.searchTerm.trim().length>=_.b&&!this.fetchRetailersLoading&&!(null!==(e=this.retailerList)&&void 0!==e&&e.length)&&this.showHasNoResults}}),watch:{searchTerm(e,t){e.trim().length>=_.b&&(this.isLoading=!0,t.trim().length<_.b&&(this.showHasNoResults=!1)),this.debouncedGetRetailers()}},created(){var e=this;this.debouncedGetRetailers=Object(d.debounce)(Object(r.a)((function*(){yield e.getRetailers(),e.isLoading=!1,e.showHasNoResults=!0})),300)},mounted(){this.$refs.searchField.$el.setAttribute("data-gtm-track","input-blank-retailer's search field")},methods:y(y({},Object(l.b)({getRetailers:"entry/GET_RETAILERS"})),{},{resetSelectedRetailer(){this.searchTerm="",this.isDropdownOpen=!1,this.selectedRetailer="",this.$emit("input","")},closeDropdown(e){var t;null!=e&&null!==(t=e.currentTarget)&&void 0!==t&&t.contains(e.relatedTarget)||(this.isDropdownOpen=!1)},openDropdown(){this.isDropdownOpen=!0},handleInput(e){this.searchTerm=e,this.selectedRetailer="",this.$emit("input","")},handleInputClick(e){e.currentTarget.closest("button[aria-label=Reset]")||(this.isDropdownOpen=!0)},handleSelect(e){this.searchTerm=null==e?void 0:e.clientName,this.selectedRetailer=null==e?void 0:e.id,this.$emit("input",null==e?void 0:e.id),this.closeDropdown()},splitMarkedText(e,t){var n=Object(h.c)(t);if(!n)return[{value:e}];var r=new RegExp(n.split("").map((s=>Object(h.a)(s))).join("\\s*"),"gi"),o="$%separator%$";return e.replace(r,(e=>o+e+o)).split(o).map((e=>({value:e,marked:Object(h.c)(e)===n})))}})},E=(n(474),n(1)),component=Object(E.a)(R,(function(){var e=this,t=e._self._c;return t("div",{staticClass:"e-retailer-search",attrs:{tabindex:"0"},on:{focusin:e.openDropdown,focusout:e.closeDropdown,keydown:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"esc",27,t.key,["Esc","Escape"])?null:e.closeDropdown.apply(null,arguments)}}},[t("div",{staticClass:"e-retailer-search__input-wrapper"},[t("EInput",{ref:"searchField",staticClass:"e-retailer-search__input",attrs:{value:e.searchTerm,label:e.retailerLabel,"is-loading":e.isLoading||e.fetchRetailersLoading,"is-required":"","is-reset":"",search:!0,autocomplete:"do-not-autofill"},on:{clear:e.resetSelectedRetailer,input:e.handleInput},nativeOn:{click:function(t){return e.handleInputClick.apply(null,arguments)}},scopedSlots:e._u([{key:"leftIcon",fn:function(){return[t("EIcon",{attrs:{icon:"search"}})]},proxy:!0}])}),e._v(" "),t("ValidationProvider",{ref:"retailer",attrs:{name:"retailer",rules:e.rules}},[t("EInput",{staticStyle:{display:"none"},attrs:{label:e.retailerLabel,"hide-label":""},model:{value:e.selectedRetailer,callback:function(t){e.selectedRetailer=t},expression:"selectedRetailer"}})],1)],1),e._v(" "),e.isDropdownVisible?t("ul",{staticClass:"e-retailer-search__dropdown"},e._l(e.retailerList,(function(n){return t("li",{key:n.id,class:["e-retailer-search__dropdown-item",{"e-retailer-search__dropdown-item--selected":n.id===e.selectedRetailer}],attrs:{"data-gtm-track":"li-".concat(n.clientName,"-search dropdown option")},on:{"!click":function(t){return e.handleSelect(n)}}},[t("EAvatar",{attrs:{"image-src":n.clientLogo||e.DEFAULT_RETAILER_LOGO}}),e._v(" "),t("span",[e._l(e.splitMarkedText(n.clientName,e.searchTerm),(function(text,n){return[text.marked?t("mark",{key:n},[e._v(e._s(text.value))]):t("span",{key:n},[e._v(e._s(text.value))])]}))],2),e._v(" "),n.id===e.selectedRetailer?t("EIcon",{staticClass:"e-retailer-search__dropdown-item-tick",attrs:{icon:"tick_circle",color:"brand-01"}}):e._e()],1)})),0):e._e(),e._v(" "),e.hasNoResults?t("p",{staticClass:"e-retailer-search__no-results"},[e._v("\n    No results found\n  ")]):e._e()])}),[],!1,null,"1bb56970",null);t.default=component.exports},502:function(e,t,n){"use strict";n(475)},504:function(e,t,n){"use strict";n(478)},527:function(e,t,n){e.exports={}},561:function(e,t,n){"use strict";n.r(t);var r=n(0),o=n(83),l=n(13),c=n(452),d=n(454),h=n(455),f=n(9),m=n(40),v={getParcelIdentifiers:e=>Object(r.a)((function*(){try{return(yield m.get("".concat(f.a.API_BASE).concat(f.a.TRACKING_ENDPOINT,"parcels/reference/").concat(e),{headers:{apiKey:f.a.HERMES_API_KEY}})).data.parcelIdentifiers}catch(e){return console.log(e),e}}))()},_={components:{TextField:d.default,EButton:o.a,EIcon:l.a,InternationalRedirectModal:h.default},extends:c.default,data:()=>({trackingNumber:"",helper:null,isError:!1,isInternationalRedirect:!1,internationalRedirectUrl:null}),computed:{submitDisabled(){return 8!==this.trackingNumber.length&&16!==this.trackingNumber.length}},methods:{handleSubmit(){var e=this;return Object(r.a)((function*(){if(yield e.$refs.validator.validate()){var t;e.helper=null,e.isError=!1;try{t=yield v.getParcelIdentifiers(e.trackingNumber)}catch(t){e.isError=!0,e.helper="We could not retrieve the details for this Evri tracking number. Please check and try again."}if(1===t.length)return e.setLocalStorageParcelIdentifiers(t),void(t[0].redirectUrl?(e.internationalRedirectUrl=t[0].redirectUrl,e.isInternationalRedirect=!0):e.$store.dispatch("entry/TRACK_A_SINGLE_PARCEL",e.trackingNumber));if(t.length>1)return e.setLocalStorageParcelIdentifiers(t),void e.$store.dispatch("entry/TRACK_A_PNUMBER",e.trackingNumber);e.isError=!0,e.helper="We do not recognise this as a valid Evri tracking number. Please check and try again."}}))()},resetErrorState(){var e=this;return Object(r.a)((function*(){e.$refs.validator.reset(),e.isError=!1,e.helper=null}))()},setLocalStorageParcelIdentifiers(e){localStorage.removeItem("parcelIdentifiers");var t=[],n={};n[this.trackingNumber]=e,t.push(JSON.stringify(n)),localStorage.setItem("parcelIdentifiers",t)},handleInternationalRedirectClose(){this.isInternationalRedirect=!1}}},k=(n(504),n(1)),component=Object(k.a)(_,(function(){var e=this,t=e._self._c;return t("div",[t("ECard",{staticClass:"form-card",attrs:{"thinner-padding":""},scopedSlots:e._u([{key:"footer",fn:function(){return[t("EntryFormFooter",{attrs:{"quick-links":e.quickLinks,"footer-links":e.footerLinks}})]},proxy:!0}])},[t("div",{staticClass:"form-card__intro"},[t("h3",[e._v("\n        "+e._s(e.heading)+"\n        "),e.headingSupplement?t("span",[e._v(e._s(e.headingSupplement))]):e._e()]),e._v(" "),t("p",[e._v(e._s(e.subheading))])]),e._v(" "),t("ValidationObserver",{ref:"validator",staticClass:"form-card__form"},[t("div",{staticClass:"form-card__form-fields"},[t("TextField",{attrs:{label:"Tracking number",name:"Tracking number",type:"text",mode:"passive",value:e.trackingNumber,"character-limit":16,spellcheck:"false",autocomplete:"do-not-autofill",rules:"required|multiLength:8,16","is-character-limit":"","is-required":"",helper:e.helper,"force-error-state":e.isError},on:{valueChanged:function(t){return e.resetErrorState()}},model:{value:e.trackingNumber,callback:function(t){e.trackingNumber=t},expression:"trackingNumber"}})],1),e._v(" "),t("EButton",{attrs:{type:"primary","aria-label":"Track",disabled:e.submitDisabled,"data-gtm-track":"btn-Track"},on:{click:function(t){return e.handleSubmit()}},scopedSlots:e._u([{key:"icon",fn:function(){return[t("EIcon",{attrs:{icon:"chevron_right"}})]},proxy:!0}])},[e._v("\n        Track\n        ")])],1)],1),e._v(" "),e.isInternationalRedirect?t("div",[t("InternationalRedirectModal",{attrs:{show:e.isInternationalRedirect,internationalRedirectUrl:e.internationalRedirectUrl}})],1):e._e()],1)}),[],!1,null,"5080262c",null);t.default=component.exports;installComponents(component,{InternationalRedirectModal:n(455).default})},562:function(e,t,n){"use strict";n.r(t);var r=n(0),o=n(83),l=n(13),c=n(452),d={components:{RetailerSearchField:n(489).default,EButton:o.a,EIcon:l.a},extends:c.default,data:()=>({selectedRetailer:""}),methods:{handleSubmit(){var e=this;return Object(r.a)((function*(){(yield e.$refs.validator.validate())&&e.$store.dispatch("entry/RETURN_A_PARCEL",e.selectedRetailer)}))()}}},h=(n(502),n(1)),component=Object(h.a)(d,(function(){var e=this,t=e._self._c;return t("ECard",{staticClass:"form-card",attrs:{"thinner-padding":""},scopedSlots:e._u([{key:"footer",fn:function(){return[t("EntryFormFooter",{attrs:{"quick-links":e.quickLinks,"footer-links":e.footerLinks}})]},proxy:!0}])},[t("div",{staticClass:"form-card__intro"},[t("h3",[e._v("\n      "+e._s(e.heading)+"\n      "),e.headingSupplement?t("span",[e._v(e._s(e.headingSupplement))]):e._e()]),e._v(" "),t("p",[e._v(e._s(e.subheading))])]),e._v(" "),t("ValidationObserver",{ref:"validator",staticClass:"form-card__form",scopedSlots:e._u([{key:"default",fn:function(n){var{invalid:r}=n;return[t("div",{staticClass:"form-card__form-fields"},[t("RetailerSearchField",{staticClass:"form-card__input",attrs:{label:"Enter your retailer's name",rules:"required","is-required":""},model:{value:e.selectedRetailer,callback:function(t){e.selectedRetailer=t},expression:"selectedRetailer"}})],1),e._v(" "),t("EButton",{attrs:{type:"primary","aria-label":"Return a parcel",disabled:r,"data-gtm-track":"btn-Return a parcel"},on:{click:function(t){return e.handleSubmit()}},scopedSlots:e._u([{key:"icon",fn:function(){return[t("EIcon",{attrs:{icon:"chevron_right"}})]},proxy:!0}],null,!0)},[e._v("\n      Return a parcel\n      ")])]}}])})],1)}),[],!1,null,"535c943f",null);t.default=component.exports},564:function(e,t,n){"use strict";n.r(t);n(7),n(11),n(8);var r=n(560),o=n(561),l=n(562),c={components:{EAvatar:()=>Promise.resolve().then(n.bind(null,152)),SendEntry:r.default,TrackEntry:o.default,ReturnEntry:l.default},props:{content:{type:Object[Array],default:[],required:!0}},data:()=>({activeTabIndex:0}),computed:{hasTabs(){return this.content.length>1}}},d=(n(580),n(1)),component=Object(d.a)(c,(function(){var e=this,t=e._self._c;return t("div",{staticClass:"hero-card"},[e.hasTabs?t("div",{staticClass:"tabs-card"},[t("div",{staticClass:"tabs-card__tabs"},e._l(e.content,(function(n,r){return t("div",{key:"tab-".concat(n.id),class:["tabs-card__tab",{"tabs-card__tab--active":e.activeTabIndex===r}],attrs:{"data-gtm-track":n.data.tabDataGtmTrack||null},on:{click:function(t){e.activeTabIndex=r}}},[e._v("\n        "+e._s(n.data.tabName)+"\n      ")])})),0),e._v(" "),e._l(e.content,(function(n,r){return t("div",{key:n.id,staticClass:"tabs-card__tab-content"},[t(n.data.name,{directives:[{name:"show",rawName:"v-show",value:e.activeTabIndex===r,expression:"activeTabIndex === tabIndex"}],tag:"component",staticClass:"form-card",attrs:{heading:n.data.heading,"heading-international":n.data.headingInternational,"destination-countries":n.data.destination_countries.url,"heading-supplement":n.data.headingSupplement,"heading-supplement-international":n.data.headingSupplementInternational,subheading:n.data.subheading,"subheading-international":n.data.subheadingInternational,"promo-text":n.data.promoText,"promo-text-international":n.data.promoTextInternational,"quick-links":n.data.quickLinks,"footer-links":n.data.footerLinks,"footer-links-international":n.data.footerLinksInternational}})],1)}))],2):e.content[0]?t("div",[t(e.content[0].data.name,{tag:"component",staticClass:"form-card",attrs:{heading:e.content[0].data.heading,"heading-international":e.content[0].data.headingInternational,destinationCountries:e.content[0].data.destination_countries.url,"heading-supplement":e.content[0].data.headingSupplement,"heading-supplement-international":e.content[0].data.headingSupplementInternational,subheading:e.content[0].data.subheading,"subheading-international":e.content[0].data.subheadingInternational,"promo-text":e.content[0].data.promoText,"promo-text-international":e.content[0].data.promoTextInternational,"quick-links":e.content[0].data.quickLinks,"footer-links":e.content[0].data.footerLinks,"footer-links-international":e.content[0].data.footerLinksInternational}})],1):e._e()])}),[],!1,null,"6fc9cf6c",null);t.default=component.exports},580:function(e,t,n){"use strict";n(527)}}]);