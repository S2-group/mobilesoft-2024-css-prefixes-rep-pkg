"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2305],{6410:function(e,n,o){var i=o(7297),t=o(31230);function r(){let e=(0,i.Z)(['\n      fragment HomeDetailsCardFragment on HOME_Details {\n        __typename\n        location {\n          city\n          stateCode\n          zipCode\n          fullLocation: formattedLocation(formatType: STREET_CITY_STATE_ZIP)\n          partialLocation: formattedLocation(formatType: STREET_ONLY)\n        }\n        price {\n          formattedPrice\n        }\n        url\n        homeUrl\n        tags(include: MINIMAL, variation: $userPreviouslyViewedHomesVariation) {\n          level\n          formattedName\n          icon {\n            vectorImage {\n              svg\n            }\n          }\n        }\n        fullTags: tags(variation: $userPreviouslyViewedHomesVariation) {\n          level\n          formattedName\n          icon {\n            vectorImage {\n              svg\n            }\n          }\n        }\n        floorSpace {\n          formattedDimension\n        }\n        lotSize {\n          ... on HOME_SingleDimension {\n            formattedDimension(minDecimalDigits: 2, maxDecimalDigits: 2)\n          }\n        }\n        bedrooms {\n          formattedValue(formatType: TWO_LETTER_ABBREVIATION)\n        }\n        bathrooms {\n          formattedValue(formatType: TWO_LETTER_ABBREVIATION)\n        }\n        isSaveable\n        preferences {\n          isSaved\n          isSavedByCoShopper @include(if: $shouldIncludeCoShopping)\n        }\n        metadata {\n          compositeId\n          legacyIdForSave\n          unifiedListingType\n        }\n        typedHomeId\n        tracking {\n          key\n          value\n        }\n        displayFlags {\n          showMLSLogoOnListingCard\n          addAttributionProminenceOnListCard\n        }\n        ... on HOME_RoomForRent {\n          numberOfRoommates\n          availableDate: formattedAvailableDate(dateFormat: "MMM D")\n          providerListingId\n        }\n\n        ... on HOME_RentalCommunity {\n          activeListing {\n            provider {\n              summary(formatType: SHORT)\n              listingSource {\n                logoUrl\n              }\n            }\n          }\n          location {\n            communityLocation: formattedLocation(\n              formatType: STREET_COMMUNITY_NAME\n            )\n          }\n          providerListingId\n        }\n\n        ... on HOME_Property {\n          currentStatus {\n            isRecentlySold\n            isRecentlyRented\n            isActiveForRent\n            isActiveForSale\n            isOffMarket\n            isForeclosure\n          }\n          priceChange {\n            priceChangeDirection\n          }\n          activeListing {\n            provider {\n              summary(formatType: SHORT)\n              extraShortSummary: summary(formatType: EXTRA_SHORT)\n              listingSource {\n                logoUrl\n              }\n            }\n            dateListed\n          }\n          lastSold {\n            provider {\n              summary(formatType: SHORT)\n              extraShortSummary: summary(formatType: EXTRA_SHORT)\n              listingSource {\n                logoUrl\n              }\n            }\n          }\n          providerListingId\n        }\n\n        ... on HOME_FloorPlan {\n          priceChange {\n            priceChangeDirection\n          }\n          provider {\n            summary(formatType: SHORT)\n          }\n        }\n      }\n    ']);return r=function(){return e},e}function a(){let e=(0,i.Z)(["\n      fragment HomeDetailsCardHeroFragment on HOME_Details {\n        media {\n          heroImage(fallbacks: $heroImageFallbacks) {\n            url {\n              small\n              medium\n            }\n            webpUrl: url(compression: webp) {\n              small\n            }\n          }\n        }\n      }\n    "]);return a=function(){return e},e}function l(){let e=(0,i.Z)(["\n      fragment HomeDetailsCardPhotosFragment on HOME_Details {\n        media {\n          __typename\n          heroImage(fallbacks: $heroImageFallbacks) {\n            url {\n              small\n              medium\n            }\n            webpUrl: url(compression: webp) {\n              small\n              medium\n            }\n          }\n          photos {\n            url {\n              small\n              medium\n            }\n            webpUrl: url(compression: webp) {\n              small\n              medium\n            }\n          }\n        }\n      }\n    "]);return l=function(){return e},e}function s(){let e=(0,i.Z)(["\n      fragment HomeDetailsCallToActionFragment on HOME_Details {\n        hasPrequalifiers\n        leadFormCallToAction(context: CARD, appendOneClick: true) {\n          callToActionType\n          callToActionDisplayLabel\n          supportsCancellableSubmission\n          buttonStyle\n        }\n      }\n    "]);return s=function(){return e},e}let d=()=>({homeDetails:(0,t.ZP)(r()),homeDetailsHero:(0,t.ZP)(a()),homeDetailsPhotos:(0,t.ZP)(l()),homeDetailsCallToAction:(0,t.ZP)(s())});n.Z=d},48935:function(e,n,o){o.d(n,{G5:function(){return x},ZP:function(){return $},Jv:function(){return N}});var i,t=o(70655),r=o(85893),a=o(23098),l=o(95084),s=o(84524),d=o(68100),u=o(26395),m=o(29796),c=o(52152),p=o(80667),v=o(67294),g=o(97650),h=o(8679),f=o.n(h),S=o(20957);let y="https://www.trulia.com/images/txl3R/placeholder_images/PropertyCardPlaceholder.svg",C=void 0,A={FLOOR_PLAN:"HOME_FloorPlan",PROPERTY:"HOME_Property",ROOM_FOR_RENT:"HOME_RoomForRent",RENTAL_COMMUNITY:"HOME_RentalCommunity",BUILDER_COMMUNITY:"HOME_BuilderCommunity"},O=e=>e.price&&e.price.formattedPrice?e.price.formattedPrice:"",T=e=>e.bedrooms&&e.bedrooms.formattedValue?e.bedrooms.formattedValue:"",R=e=>e.bathrooms&&e.bathrooms.formattedValue?e.bathrooms.formattedValue:"",I=e=>{let n="default";switch(e){case"HIGHLIGHTED":n="on market";break;case"ALERT":n="off market";break;case"LOWLIGHT":n="lowlight";break;case"NORMAL":n="default"}return n},b=(e,n)=>e.tags||e.fullTags?n?e.fullTags.map(e=>{var n,o;let i=null===(n=e.icon)||void 0===n?void 0:null===(o=n.vectorImage)||void 0===o?void 0:o.svg;return{type:I(e.level),value:e.formattedName||"",iconUrl:i}}):e.tags.map(e=>{var n,o;let i=null===(n=e.icon)||void 0===n?void 0:null===(o=n.vectorImage)||void 0===o?void 0:o.svg;return{type:I(e.level),value:e.formattedName||"",iconUrl:i}}):null,L=e=>e.priceChange&&e.priceChange.priceChangeDirection?"EQUAL"===e.priceChange.priceChangeDirection?C:e.priceChange.priceChangeDirection.toLowerCase():C,_=e=>{let n="",o="",i="",t="";return e.location&&(n=(e.location.communityLocation?e.location.communityLocation:e.location.partialLocation)||"",o=e.location.city||"",i=e.location.stateCode||"",t=e.location.zipCode||""),{streetAddress:n,city:o,stateCode:i,zipCode:t}},E=e=>{if(e.numberOfRoommates){if(1===e.numberOfRoommates)return"1 Roommate";if(e.numberOfRoommates>1)return"".concat(e.numberOfRoommates," Roommates")}return""},M=e=>e.availableDate?e.availableDate:"",D=e=>e.__typename===A.ROOM_FOR_RENT,P=e=>e.__typename===A.RENTAL_COMMUNITY?null:e.floorSpace&&e.floorSpace.formattedDimension,k=function(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:y,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"small",t={},r=(0,S.supportsWebp)(n);return e.media&&Array.isArray(e.media.photos)&&e.media.photos.length>0&&e.media.photos[0].url&&e.media.photos[0].url[i]&&(t.photos=e.media.photos.map(e=>r&&e.webpUrl?{url:e.webpUrl&&(e.webpUrl[i]||e.webpUrl.extraLarge||e.webpUrl.large||e.webpUrl.medium||e.webpUrl.small)}:{url:e.url[i]||e.url.extraLarge||e.url.large||e.url.medium||e.url.small}),t.imageSrc=t.photos[0].url),e.media&&e.media.heroImage&&e.media.heroImage.url&&e.media.heroImage.url[i]?t.imageSrc=r&&e.media.heroImage.webpUrl?e.media.heroImage.webpUrl[i]:e.media.heroImage.url[i]:t.imageSrc||(t.imageSrc=o),t},w=e=>{var n,o;return(null==e?void 0:null===(n=e.media)||void 0===n?void 0:null===(o=n.heroImage)||void 0===o?void 0:o.__typename)==="MEDIA_HeroImageStreetView"},H=(e,n)=>{var o,i,t,r,a,l,s,d,u;if(n){let n=(null==e?void 0:null===(l=e.activeListing)||void 0===l?void 0:null===(s=l.provider)||void 0===s?void 0:s.extraShortSummary)||(null==e?void 0:null===(d=e.lastSold)||void 0===d?void 0:null===(u=d.provider)||void 0===u?void 0:u.extraShortSummary);if(Array.isArray(n))return n.join(", ")}let m=(null==e?void 0:null===(o=e.activeListing)||void 0===o?void 0:null===(i=o.provider)||void 0===i?void 0:i.summary)||(null==e?void 0:null===(t=e.lastSold)||void 0===t?void 0:null===(r=t.provider)||void 0===r?void 0:r.summary)||(null==e?void 0:null===(a=e.provider)||void 0===a?void 0:a.summary);if(Array.isArray(m))return m.join(", ")},U=e=>{var n,o,i,t,r,a,l;return(null==e?void 0:null===(n=e.displayFlags)||void 0===n?void 0:n.showMLSLogoOnListingCard)?(null==e?void 0:null===(o=e.activeListing)||void 0===o?void 0:null===(i=o.provider)||void 0===i?void 0:null===(t=i.listingSource)||void 0===t?void 0:t.logoUrl)||(null==e?void 0:null===(r=e.lastSold)||void 0===r?void 0:null===(a=r.provider)||void 0===a?void 0:null===(l=a.listingSource)||void 0===l?void 0:l.logoUrl):""},N=function(e,n){var o,i;let t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:y,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},a=arguments.length>4?arguments[4]:void 0,{useFullTags:l,useExtraShortSummary:s}=r;return{..._(e),...k(e,n,t,a),tags:b(e,l),saved:e.preferences&&e.preferences.isSaved,propertyLink:e.url||"",price:O(e),beds:T(e),baths:R(e),floorSpace:P(e),lotSize:null==e?void 0:null===(o=e.lotSize)||void 0===o?void 0:o.formattedDimension,trend:L(e),imageAlt:e.location&&e.location.fullLocation||"",fallbackSrc:t,isStreetView:w(e),summary:H(e,s),summaryColor:(null==e?void 0:null===(i=e.displayFlags)||void 0===i?void 0:i.addAttributionProminenceOnListCard)?"default":"lowlight",logoUrl:U(e)}},F=function(e,n){var o;let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:y,t=arguments.length>3?arguments[3]:void 0;return{..._(e),...k(e,n,i,t),tags:b(e),saved:e.preferences&&e.preferences.isSaved,propertyLink:e.url||"",price:O(e),beds:T(e),baths:R(e),floorSpace:P(e),lotSize:null==e?void 0:null===(o=e.lotSize)||void 0===o?void 0:o.formattedDimension,trend:L(e),imageAlt:e.location&&e.location.fullLocation||"",fallbackSrc:i,isStreetView:w(e),numberOfRoommates:E(e),availableDate:M(e),isRoomForRent:D(e),summary:H(e),logoUrl:U(e)}},x=e=>{let n=e&&e.__typename;return!(n!==A.PROPERTY&&n!==A.FLOOR_PLAN&&n!==A.ROOM_FOR_RENT&&n!==A.RENTAL_COMMUNITY)};var Z=o(95762),V=o(59066),j=o(6410),B=o(34159),Y=o(21231);let{isInTest:z}=B.be,W=((i=class extends v.Component{render(){let{homeDetails:e}=this.props,{__typename:n}=e,{isActiveForRent:o}="currentStatus"in e?e.currentStatus:{isActiveForRent:!1};return n===A.ROOM_FOR_RENT||n===A.RENTAL_COMMUNITY||o?this.generateForRentPropertyCard():n===A.PROPERTY||n===A.FLOOR_PLAN||n===A.BUILDER_COMMUNITY?this.generateForSalePropertyCard():null}constructor(...e){super(...e),this.state={mediaIndex:0},this.onSave=()=>{let{onSave:e,onUnsave:n,homeDetails:o}=this.props;o.preferences&&o.preferences.isSaved?n({homeDetails:o}):e({homeDetails:o})},this.onClick=e=>{let{onClick:n,homeDetails:o,fallbackSrc:i,session:t={},mediaSize:r}=this.props,{supportedMediaTypes:a}=t,{mediaIndex:l}=this.state;if(n){let{photos:t,imageSrc:s}=k(o,a,i,r),d=t?t[l].url:s;n(e,d)}},this.onMediaIndexChanged=e=>{let{onMediaIndexChanged:n}=this.props;this.setState({mediaIndex:e},()=>{n&&n(e)})},this.filterCardPhotos=e=>{let{lazyLoadImage:n,placeholderImage:o,carouselEnabled:i}=this.props;if(n){let{photos:n,imageSrc:i,imageSources:t,...r}=e;return{...r,imageSrc:o}}if(!i){let{photos:n,imageSrc:o,imageSources:i,...t}=e;return{...t,imageSrc:o}}return e},this.getAdditionalActions=()=>{let{handleShareHome:e,handleHideHome:n,handleUnhideHome:o,onUnsave:i,onSave:t,homeDetails:m,ab:c,breakpoint:p,createAnalyticsEvent:v}=this.props,g=[e?{id:"share",title:"Share",icon:(0,r.jsx)(l.Z,{}),onClick:()=>{e(m)}}:null,n?{id:"hide",title:"Hide",icon:(0,r.jsx)(s.Z,{}),onClick:()=>{n(m)}}:null,o?{id:"unhide",title:"Unhide",icon:(0,r.jsx)(s.Z,{}),onClick:()=>o(m)}:null].filter(e=>null!==e);if(g.length>0&&e){let e=null;z("mWebAddASaveOptionOnsrpListCardMapCard.a",c)&&(0,B.tq)(p)&&(e={},m.preferences&&m.preferences.isSaved?(e.id="unsave",e.title="Unsave",e.icon=(0,r.jsx)(d.Z,{}),e.onClick=()=>{i({homeDetails:m}),v(a.Uk.INTERACTION,{interactedWith:"property card:dropdown unsave"}).track()}):(e.id="save",e.title="Save",e.icon=(0,r.jsx)(u.Z,{}),e.onClick=()=>{t({homeDetails:m}),v(a.Uk.INTERACTION,{interactedWith:"property card:dropdown save"}).track()}),g.unshift(e))}return g},this.generateForSalePropertyCard=()=>{var e,n,o,i;let{homeDetails:t,fallbackSrc:a,useFullTags:l,onSave:s,session:d={},onUnsave:u,index:c,mediaSize:p,eagerLoadingFirstImage:v,...g}=this.props,{supportedMediaTypes:h}=d,f=!0===t.isSaveable&&s&&u,S=this.filterCardPhotos(N(t,h,a,{useFullTags:l},p)),y=this.getAdditionalActions(),C=(null==t?void 0:null===(e=t.groupedInsights)||void 0===e?void 0:e.insights)&&(null==t?void 0:null===(n=t.media)||void 0===n?void 0:null===(o=n.photos)||void 0===o?void 0:o.length)>0?null==t?void 0:null===(i=t.groupedInsights)||void 0===i?void 0:i.insights:null;return(0,r.jsx)("div",{ref:this.cardRef,children:(0,r.jsx)(m.Z,{...S,...g,onClick:this.onClick,onMediaIndexChanged:this.onMediaIndexChanged,onSave:f?this.onSave:null,facts:C,"data-testid":"home-card-sale",fetchpriority:v&&0===c?"high":"auto",additionalActions:y})})},this.generateForRentPropertyCard=()=>{let{homeDetails:e,fallbackSrc:n,onSave:o,onUnsave:i,session:t={},index:a,mediaSize:l,eagerLoadingFirstImage:s,...d}=this.props,{supportedMediaTypes:u}=t,m=!0===e.isSaveable&&o&&i,p=this.filterCardPhotos(F(e,u,n,l)),v=this.getAdditionalActions();return(0,r.jsx)(g.df,{threshold:0,as:"div",onChange:this.handleInViewTracking,triggerOnce:!0,children:(0,r.jsx)("div",{ref:this.cardRef,children:(0,r.jsx)(c.Z,{...p,...d,onClick:this.onClick,onMediaIndexChanged:this.onMediaIndexChanged,onSave:m?this.onSave:null,"data-testid":"home-card-rent",fetchpriority:s&&0===a?"high":"auto",additionalActions:v})})},null==e?void 0:e.url)},this.handleInViewTracking=e=>{let{createAnalyticsEvent:n,trackingModuleName:o,homeDetails:i}=this.props;e&&n(a.Uk.ACTION,{productPageDetails:o,providerListingId:"providerListingId"in i?i.providerListingId:null,eventAction:"RentalPropertyImpression",sendOnlyTo:"footprint"}).track()}}}).defaultProps={lazyLoadImage:!1,carouselEnabled:!0,placeholderImage:"data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==",useFullTags:!1,homeDetails:{url:"",tags:[],bedrooms:"",bathrooms:"",floorSpace:null,currentStatus:null,media:null,location:null,isSaveable:!1,preferences:null,price:null,priceChange:null,handleHideHome:null,handleShareHome:null},eagerLoadingFirstImage:!1},i.getFragments=j.Z,i);W=(0,t.gn)([(0,Z.f)({session:V.B,ab:Y.s}),(0,a.j)()],W);let G=(0,p.Ng)(W);f()(G,W);var $=G},2445:function(e,n,o){var i=o(7297),t=o(31230),r=o(67294);function a(){let e=(0,i.Z)(["\n      fragment Viewer on USER_Viewer {\n        userStatus\n        userType\n        userId\n        loggedIn\n        name\n        email\n        profileImage {\n          small\n        }\n        permissions\n        userNavigation {\n          label\n          uri\n          description\n          children {\n            label\n            uri\n          }\n        }\n        optedOutOfSale\n      }\n    "]);return a=function(){return e},e}class l extends r.Component{}l.fragments={viewer:(0,t.Ps)(a())},n.Z=l}}]);