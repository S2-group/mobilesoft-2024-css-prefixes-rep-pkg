'use strict';

Object.defineProperty(exports, '__esModule', { value: true });

const QueryString = {}; // Deprecate and replace with https://developer.mozilla.org/en-US/docs/Web/API/URLSearchParams

QueryString.parse = function (qs, sep = '&', eq = '=') {
  const obj = {};

  if (typeof qs !== 'string' || qs.length === 0) {
    return obj;
  }

  return qs.split(sep).reduce((prev, kvp) => {
    const x = kvp.split(eq).map(part => part.replace(/\+/g, ' '));
    const key = decodeURIComponent(x[0], true);
    const value = decodeURIComponent(x.slice(1).join(eq), true);

    if (!(key in prev)) {
      prev[key] = value;
    } else if (Array.isArray(prev[key])) {
      prev[key].push(value);
    } else {
      prev[key] = [prev[key], value];
    }

    return prev;
  }, obj);
};

exports.default = QueryString;
