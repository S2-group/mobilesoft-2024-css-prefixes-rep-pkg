import{aG as e,bG as t,bH as a,az as s,av as o,aJ as n,aK as r,aI as l,cq as i,bB as c,as as u,bv as d,br as g,aw as b,cr as y,aB as L,ax as p,bl as h,bC as f,aM as m,ap as S,bx as C,bk as B,bw as w,by as T,aC as A,aD as O}from"./index.module.js";import{A as k,D,S as E}from"./SaveButton-9062224f.js";import{H as x,B as v,C as R,D as I,J as M,K as F,M as N}from"./VirtualServiceItem-fecd9a5b.js";import{D as V}from"./DefaultTabs-026ae0eb.js";const H=e.div(["align-items:center;display:inline-flex;margin-top:",";margin-bottom:",";",";"],(({theme:e})=>e.spacing.base.xxs),(({theme:e})=>e.spacing.base.md),(({theme:e})=>t(e,a.MARGIN_RIGHT,e.spacing.base.md))),P=e.div(["color:",";font-size:",";display:flex;flex:1 0 auto;"],(({theme:e})=>e.ui.text.color),(({theme:e})=>e.typography.size.small)),_=({category:e,checked:t,onCategoryToggle:a})=>s(H,{"data-testid":"uc-category-toggle"},s(P,null,s(x,{checked:t,id:e.slug,isDisabled:e.isEssential,label:e.label,onToggle:a}))),U=({disabled:e,onClick:t,buttonRef:a,marginStyle:u})=>{const{labels:d}=o(),{rules:g}=n(r.BUTTON_MORE),{rules:b}=n(r.BUTTON_MORE,!0),y=l();return i(d)||c(d)?s(v,{ariaLabel:d.ariaLabels.ccpaMoreInformation,backgroundColor:y.ui.buttons.more.bg,disabled:e,label:(L=d.buttons.showSecondLayer,L.charAt(0).toUpperCase()+L.slice(1)),onClick:t,testid:"uc-more-button",textColor:y.ui.buttons.more.text,buttonRef:a,buttonTypeRules:g,buttonHoverRules:b,marginStyle:u}):null;var L},Y={firstLayerBanner:"uc-default-banner",firstLayerWall:"uc-default-wall",secondLayer:"uc-default-settings"};var j=u((({onClose:e,onCustomize:t,onFullScreenAmp:a,onLanguageChange:n,onAcceptAll:r,onDenyAll:i,isAcceptDenyAllLoading:u,UC:x})=>{const{core:v,labels:H,ui:P}=o(),{isIE:j,isMobile:z}=d(),{categories:G,getUpdatedCategories:K,setCategories:J}=g(),{abTestVariant:q,closeView:W,firstLayerVariant:Q,isAmpEnabled:X,isInFullScreen:Z,secondLayerVariant:$,view:ee}=b(),te=y(ee===L.FIRST_LAYER?Q:$,Y),ae=l(),[se,{loading:oe}]=p(x.dismissAmp,x),[ne,{loading:re}]=p(x.updateServices,x),le=h(null),ie=h(null);if(!f(P)||!c(H))return null;const ce=()=>{i().then((()=>{W()}))},ue=re||oe||u,de=s(k,{disabled:ue,onClick:()=>{r().then((()=>{W()}))},isSecondLayerView:ee===L.SECOND_LAYER}),ge=s(D,{disabled:ue,onClick:ce,isSecondLayerView:ee===L.SECOND_LAYER}),be=s(E,{disabled:ue,onClick:()=>{re||oe||!v||ne(T(G)).then((async()=>{X&&await se(),A(ee,O.SAVE,q,x.setTrackingPixel),J(await K(ee)),W()}))}}),ye=s(U,{disabled:ue,onClick:t,buttonRef:le}),Le=m(m(m({AcceptAllButton:de},!P.firstLayer.hideButtonDeny&&{DenyAllButton:ge}),P.firstLayer.isCategoryTogglesEnabled&&{SaveButton:be}),ae.ui.firstLayer.secondLayerTrigger===S.BUTTON&&{MoreButton:ye});let pe={AcceptAllButton:de};pe=X?m(m({},pe),{},{DenyAllButton:ge}):P.secondLayer.hideButtonDeny?m(m({},pe),{},{SaveButton:be}):m(m({},pe),{},{DenyAllButton:ge,SaveButton:be});const he=te.layerPlacement===C.BOTTOM||te.layerPlacement===C.TOP,fe=ae.ui.firstLayer.secondLayerTrigger===S.LINK?[{ariaLabel:H.buttons.showSecondLayer,elRef:ie,label:H.buttons.showSecondLayer,onClick:t}]:[],me=()=>{switch(P.firstLayer.closeOption){case w.ICON:case w.LINK:return ce();default:return null}};switch(ee){case L.FIRST_LAYER:return s(R,{customActions:fe,footer:{buttons:Le,showSecondLayerButtonRef:le},header:m(m({},P.firstLayer.closeOption&&{closeOption:{onClose:me,type:P.firstLayer.closeOption||null}}),{},{description:H.firstLayer.description.default,enableHTMLTextFormatting:!0,functions:{onFullScreenAmp:a,onLanguageChange:n},labelShowLess:H.general.showLess,labelShowMore:H.general.showMore,shortDescriptionDesktop:P.firstLayer.showShortDescriptionOnDesktop?H.firstLayer.description.shortDesktop:"",shortDescriptionMobile:P.firstLayer.showShortDescriptionOnMobile?H.firstLayer.description.shortMobile:"",showCloseButton:!(!P.firstLayer.closeOption||P.firstLayer.closeOption!==w.ICON),showFullScreenButton:X&&!Z,showLanguageSelector:P.firstLayer.isLanguageSelectorEnabled,title:H.firstLayer.title}),layerSettings:m(m(m({isOverlayEnabled:P.firstLayer.isOverlayEnabled},(j||z)&&{minVerticalScrollerHeight:100}),te),{},{placeLinksInFooter:he,showBorderBottom:!1,withFadingBottom:!1,withInitialHeight:!0}),useBackgroundColor:!0,setTrackingPixel:x.setTrackingPixel},P.firstLayer.isCategoryTogglesEnabled&&s(M,null,s(F,null,N({categories:G,setCategories:J}).map((e=>s(_,e))))));case L.SECOND_LAYER:return s(I,null,s(R,{footer:{buttons:pe,showBorderBeforeFooter:!0},header:{closeOption:{onClose:e,type:w.ICON},description:H.secondLayer.description,enableHTMLTextFormatting:!0,functions:{onFullScreenAmp:a,onLanguageChange:n},showCloseButton:X&&Z||!X,showFullScreenButton:X&&!Z,showLanguageSelector:P.secondLayer.isLanguageSelectorEnabled,title:H.secondLayer.title},layerSettings:m(m(m({isOverlayEnabled:P.secondLayer.isOverlayEnabled},j&&{minVerticalScrollerHeight:350}),te),{},{placeLinksInFooter:he,showBorderBottom:!1,side:P.secondLayer.side,withFadingBottom:!0}),useBackgroundColor:!1,setTrackingPixel:x.setTrackingPixel},s(V,null)));default:return s(B,null)}}));export{j as default};
