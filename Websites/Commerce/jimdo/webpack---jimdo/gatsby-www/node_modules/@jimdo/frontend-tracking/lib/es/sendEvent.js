const browserBeacon = () => navigator.sendBeacon.bind(navigator);
const sendEvent = (endpoint, data, sendBeacon) => {
  const beacon = sendBeacon ?? browserBeacon();
  try {
    beacon(endpoint, data);
  } catch {
    sendEventFallback(endpoint, data);
  }
};
const sendEventFallback = async (endpoint, data) => {
  await fetch(endpoint, {
    method: 'POST',
    body: data,
    headers: {
      'Content-Type': 'application/json'
    },
    mode: 'no-cors',
    credentials: 'omit',
    cache: 'no-cache',
    referrerPolicy: 'origin',
    keepalive: true
  });
};
export { sendEvent };