"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.isAffiliate = void 0;
var _jsCookie = _interopRequireDefault(require("js-cookie"));
function _interopRequireDefault(obj) {
  return obj && obj.__esModule ? obj : {
    "default": obj
  };
}

// NOTE: This affiliate file is referred to as deprecated, although it is still in
// usage to determine the isAffiliate value in LaunchDarkly. In the future it might be replaced, see the comment below
// TODO: [aromanov] this affiliate integration will be deprecated and took down as soon as easy-marketing affiliates
// subsystem goes live. We will probably need to remove this code after that. Talk to payment team if you have questions
var REG_EXP = /[&#?]ref=((a|imp)\d+)/;
var COOKIE_NAME = 'jimdoRefAffiliate';
var TRS_COOKIE_NAME = 'trs';
var getAffiliateCodeFromUrl = function getAffiliateCodeFromUrl() {
  var match = (window.location.search || '').match(REG_EXP);
  if (!match) {
    return null;
  }
  return match[1];
};
var getAffiliateCodeFromCookie = function getAffiliateCodeFromCookie() {
  return _jsCookie["default"].get(COOKIE_NAME);
};
var getNewAffiliateCookie = function getNewAffiliateCookie() {
  return _jsCookie["default"].get(TRS_COOKIE_NAME);
};
var isAffiliate = function isAffiliate() {
  return Boolean(getAffiliateCodeFromUrl() || getAffiliateCodeFromCookie() || getNewAffiliateCookie());
};
exports.isAffiliate = isAffiliate;