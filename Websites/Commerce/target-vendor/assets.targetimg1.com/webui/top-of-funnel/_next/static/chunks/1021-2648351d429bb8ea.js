"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1021,1119],{35593:function(e,t,n){n.r(t),n.d(t,{AddToCartButtonForProductContext:function(){return p}});var o=n(59499),r=n(85893),l=n(67294),i=n(60217),a=n(81982),d=n(93041),c=n(89175);function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,o)}return n}function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach(function(t){(0,o.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}let p=e=>{let t=(0,i.Ao)(e=>e),n=(0,i.ct)(e=>e),{customGiftCardAmount:o}=(0,c.S)(),s="Custom value"===o?a.TX.DISABLE_WITH_CORRECT_BUTTON_TYPE:e.overrideBehavior,p=(0,i.MN)(),m=null!=p?p:null==t?void 0:t.tcin,v=(0,l.useMemo)(()=>u(u({},n),{},{children:void 0,parent:void 0}),[n]),h=(0,l.useMemo)(()=>u(u({},t),{},{parent:v,tcin:m}),[t,v,m]);return m?(0,r.jsx)(d.a,u(u({childOrStandaloneProduct:h,tcin:m},e),{},{overrideBehavior:s})):null};p.displayName="AddToCartButtonForProductContext"},85393:function(e,t,n){n.d(t,{Dm:function(){return d},VB:function(){return l},Wk:function(){return c},YE:function(){return a},fr:function(){return r},k2:function(){return i},t_:function(){return o}});let o=e=>null==e?void 0:e.recommended_products,r=e=>null==e?void 0:e.recommended_products,l=e=>null==e?void 0:e.products,i=e=>null==e?void 0:e.strategy_description,a=e=>null==e?void 0:e.strategy_name,d=e=>null==e?void 0:e.strategy_id,c=e=>{var t,n;let o=null!==(t=null==e?void 0:e.products)&&void 0!==t?t:[],r=null==o?void 0:o.map(e=>{var t;return{placementType:"recommendations",tcin:null!==(t=null==e?void 0:e.tcin)&&void 0!==t?t:""}}),l={guest:{eventType:"recommendations"},products:r,recommendations:{docType:null!==(n=null==e?void 0:e.doctype)&&void 0!==n?n:"",placementId:null==e?void 0:e.strategy_id,strategyDescription:null==e?void 0:e.strategy_description,strategyId:null==e?void 0:e.strategy_id,strategyName:null==e?void 0:e.strategy_name,type:"product"}};return l}},69390:function(e,t,n){n.d(t,{Ql:function(){return h}});var o=n(59499),r=n(44350),l=n(25682),i=n(61464),a=n(47269),d=n(27139),c=n(11637),s=n(56276);function u(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,o)}return n}let p="@web/domain-promotions/get-recommended-promotions-v1",m=["page","placement_id","pricing_store_id","visitor_id"],{useQuery:v}=(0,l.J)({name:p,keyFn:e=>(m.forEach(t=>{if(!e[t])throw Error(`Required \`${t}\` was missing from query: \`${p}\``)}),[p,e]),queryFn:async(e,t)=>{var n;let l=await (0,d.W)(),{apiKey:c,apis:{promotions:s},baseUrl:p}=(0,r.config)().services.redskyAggregations,{barcode_id:m,category_id:v,channel:h="WEB",fulfillment_types:g,loyalty_id:f,member_id:b,offer_id:y,page:_,placement_id:j,plan_id:x,pricing_store_id:P,purchasable_store_ids:O,slingshot_component_id:k,tcins:w,visitor_id:T,page_token:C}=null!=e?e:{},N=a.Z.buildURLWithParams(new URL(s.endpointPaths.getRecommendedPromotionsV1,p),{barcode_id:m,category_id:v,channel:h,effective_date:l,fulfillment_types:g,loyalty_id:f,member_id:b,offer_id:y,page:_,placement_id:j,plan_id:x,pricing_store_id:P,purchasable_store_ids:O,slingshot_component_id:k,tcins:w,visitor_id:T,page_token:C,key:c}),{data:I,ok:E,statusText:S}=await (0,i.G)(N,function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?u(Object(n),!0).forEach(function(t){(0,o.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):u(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}({partialErrorTag:"get_recommended_promotions_v1_error_partial",errorTag:"get_recommended_promotions_v1_error",timerTag:"get_recommended_promotions_v1_call"},t));if(E)return null!==(n=null==I?void 0:I.data)&&void 0!==n?n:null;throw Error(`${S}`)},defaultOptions:{staleTime:s.e}}),h=(0,c.p)(v)},39271:function(e,t,n){n.d(t,{F5:function(){return o},hc:function(){return r}});let o=e=>null==e?void 0:e.promotion_id,r=e=>null==e?void 0:e.image_url},83047:function(e,t,n){n.d(t,{B6:function(){return l},CV:function(){return d},LA:function(){return a},NT:function(){return c},cF:function(){return i},pA:function(){return r},yl:function(){return o}});let o=e=>null==e?void 0:e.recommended_promotions,r=e=>{var t;return null==e?void 0:null===(t=e.recommended_promotions)||void 0===t?void 0:t.strategy_description},l=e=>{var t;return null==e?void 0:null===(t=e.recommended_promotions)||void 0===t?void 0:t.placement_id},i=e=>{var t;return null==e?void 0:null===(t=e.recommended_promotions)||void 0===t?void 0:t.doctype},a=e=>{var t;return null==e?void 0:null===(t=e.recommended_promotions)||void 0===t?void 0:t.strategy_id},d=e=>{var t;return null==e?void 0:null===(t=e.recommended_promotions)||void 0===t?void 0:t.strategy_name},c=e=>{var t;return null==e?void 0:null===(t=e.recommended_promotions)||void 0===t?void 0:t.promotions}},71021:function(e,t,n){n.r(t),n.d(t,{PersonalizationCarousel:function(){return eK}});var o=n(59499),r=n(85893),l=n(238),i=n(96026),a=n.n(i),d=n(41609),c=n.n(d),s=n(67294),u=n(17619),p=n(55446),m=n(39206),v=n(43430),h=n(40424),g=n(85393),f=n(60217),b=n(18617),y=n(42850),_=n(67300),j=n(11163),x=n(80367),P=n(35281),O=n(27041);function k(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,o)}return n}let w=e=>{if(!e)return{};let{category_id:t,doctype:n,placement_id:o,strategy_description:r,strategy_id:l,strategy_name:i,products:a=[]}=e;return{recommendations:{categoryId:t,docType:n,placementId:o,strategyDescription:r,strategyId:l,strategyName:i,type:"product"},products:a.map(({tcin:e})=>({placementType:"recommendations",tcin:e}))}},T=e=>(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?k(Object(n),!0).forEach(function(t){(0,o.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):k(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e})({guest:{eventType:"recommendations"}},w(e)),C=(e,t)=>{if(null!=t)return e[t]},N=(e,t)=>{let n=t.currentTarget?t.currentTarget.dataset.index:"",o=C(e,Number(n));if(null!=o&&o.sponsoredTrackingData){let{ad_source:e,click_id:t,click_token:n}=o.sponsoredTrackingData;return{customInteraction:{value:`${t}|${n}`},products:[{tcin:o.tcin,sponsor:{name:e}}],guest:{eventType:"customInteraction"}}}return{}},I=e=>{var t;let n=null==e?void 0:null===(t=e.products)||void 0===t?void 0:t.filter(e=>"sponsored_ad"in e);return n.length<=0?{}:{guest:{eventType:"adimp"},adImpressions:null==n?void 0:n.map(e=>({creativeId:e.sponsored_ad?e.sponsored_ad.impression_id:"",lineItemId:e.tcin,orderId:"",slotSize:"",xApiId:"",sponsor:{name:e.sponsored_ad?e.sponsored_ad.ad_source:""}}))}},E=(e,t)=>{var n,o,r;let l=null!==(n=null==e?void 0:null===(o=e.components)||void 0===o?void 0:o[0])&&void 0!==n?n:{};return{name:null!==(r=null==l?void 0:l.title)&&void 0!==r?r:null==l?void 0:l.id,position:String(t),component:null!=l&&l.title?`${null==l?void 0:l.id} || ${null==l?void 0:l.title}`:null==l?void 0:l.id,componentType:null==l?void 0:l.type_name,contentType:null==l?void 0:l.content_type}};var S=n(8668);let D=(e=[])=>e.map(e=>{let t=(0,S.hg)(e),n=(0,b.TV)(e);return{tcin:t,sponsoredTrackingData:n,id:t}});var A=n(36679),$=n(53726),F=n(37586),z=n(48496),B=n(35593),R=n(81982),Z=n(72604),L=n(44350),W=n(77041),H=n(36786),M=n(30497),V=n(30695),Y=n(60390),q=n(33460),G=n(85702);function K(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,o)}return n}function U(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?K(Object(n),!0).forEach(function(t){(0,o.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):K(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}let X=({product:e,handleAddToCartClick:t,handleAddToRegistryClick:n,handleItemClick:o,useBorder:l,callToAction:i,index:a,trackingPayload:d})=>{let{tcin:c}=e,u="add_to_cart"===i&&(0,L.flags)("PRZ_ITEM_CAROUSEL_ADD_TO_CART_ENABLED"),p=(0,f.ct)(F.Mw),m=(0,f.ct)(F.jz),v=(0,z.T)(),h=(0,W.u)(),g=(0,s.useMemo)(()=>({recClick:U({position:a,productId:c,type:"product"},d)}),[a,c,d]),b=(0,s.useCallback)(e=>U(U({},e),{},{lnk:U(U({},e.lnk),{},{recClick:U(U({},d),{},{position:a,productId:c})})}),[a,c,d]);return(0,r.jsxs)(G.a4,{"data-test":`item-card-${c}`,useBorder:l,children:[(0,r.jsxs)(A.F,{"data-index":c,"data-test":"item-link",href:p,onClick:o,style:{color:"#333",flex:"1 0 auto",width:"100%"},underline:"invert",children:[(0,r.jsx)(G.Vt,{alt:v,src:m}),(0,r.jsxs)(G.Mv,{children:[(0,r.jsx)(Y.S,{showPdpPromoMessage:!0,textAlignment:"left"}),(0,r.jsx)($.k,{className:"h-text-md h-hidden-md-up h-margin-t-tiny","data-test":"product-title-sm",lines:3,children:v}),(0,r.jsx)($.k,{className:"h-text-md h-hidden-sm-down h-margin-t-tiny","data-test":"product-title-md-lg",lines:2,children:v})]})]}),"add_to_registry"===i?(0,r.jsx)(G.W4,{onClick:n,children:(0,r.jsx)(q.E,{buttonSize:"sm",isInPrzCarousel:!0,lnkData:g,showPlpVersionButton:!0})}):u?(0,r.jsx)(G.W4,{onClick:t,children:(0,r.jsx)(B.AddToCartButtonForProductContext,{"aria-label":`Add ${v} to Cart`,handleOverridingOrAddingTrackingFieldsToAddToCartSuccess:b,isFullWidth:!0,overrideBehavior:R.TX.ENABLE_CHOOSE_OPTIONS_ONLY_MODE,placementType:Z.bo.SlingshotCarousel,size:"sm"})}):h?(0,r.jsx)(G.W4,{children:(0,r.jsx)(H.M,{placement:M.d7.PLP_PRZ})}):null]})};X.displayName="ProductsTile";var J=(0,V.R)({tag:"error_boundary_prz_carousel_products_tile"})(X),Q=n(66069),ee=n(56947);let et="@web/SlingshotComponents/ProductsCarousel";ee.colors.palette.gray.darkest,ee.colors.palette.white;var en=n(58979),eo=n(19521);let er=eo.ZP.div.withConfig({displayName:"ProductsTilePlaceholder__PlaceholderWrapper",componentId:"sc-f6s8vj-0"})(["margin:",";width:calc(100% - ",");min-width:110px;"],ee.space.generic.x1,ee.space.generic.x2),el=eo.ZP.div.withConfig({displayName:"ProductsTilePlaceholder__ImagePlaceholderWrapper",componentId:"sc-f6s8vj-1"})(["width:100%;min-width:117px;"]),ei=eo.ZP.div.withConfig({displayName:"ProductsTilePlaceholder__ImagePlaceholder",componentId:"sc-f6s8vj-2"})(["position:relative;font-size:14px;&::before{content:' ';display:block;width:100%;padding-bottom:100%;background:#c4c4c4;}"]),ea=eo.ZP.div.withConfig({displayName:"ProductsTilePlaceholder__TitlePlaceholder",componentId:"sc-f6s8vj-3"})(["position:relative;font-size:14px;&::before{content:' ';display:block;width:50%;height:1em;background:",";margin-top:0.25em;margin-bottom:0.4em;}"],ee.colors.palette.gray.darkest),ed=eo.ZP.div.withConfig({displayName:"ProductsTilePlaceholder__TextPlaceholder",componentId:"sc-f6s8vj-4"})(["position:relative;font-size:14px;&::before{content:' ';display:block;width:90%;height:1em;background:#c4c4c4;margin-bottom:0.25em;}&::after{content:' ';display:block;width:80%;height:1em;background:#c4c4c4;margin-bottom:0.4em;}"]),ec=eo.ZP.div.withConfig({displayName:"ProductsTilePlaceholder__BottomTextPlaceholder",componentId:"sc-f6s8vj-5"})(["position:relative;font-size:14px;&::before{content:' ';display:block;width:70%;height:1em;background:#c4c4c4;margin-bottom:0.4em;}"]);function es({useBorder:e}){return(0,r.jsxs)(G.a4,{"data-test":"@web/SiteTopOfFunnel/ProductsTilePlaceholder",useBorder:e,children:[(0,r.jsx)(el,{children:(0,r.jsx)(ei,{})}),(0,r.jsxs)(er,{children:[(0,r.jsx)(ea,{}),(0,r.jsx)(ed,{}),(0,r.jsx)(ec,{})]})]})}es.displayName="ProductsTilePlaceholder";var eu=n(81316),ep=n(69686);let em=(0,L.flags)("CONTENT_TRACKING_INTERACTIONS_ON_FIREFLY_NORTH_STAR_ENABLED"),ev=(e,t,n)=>({url:"https://api.target.com/consumers/v1/ingest/web/eventstream",apiKey:"9f36aeafbe60771e321a7cc95a78140772ab3e96",event:e,links:em?{array:[{rel:{string:null==n?void 0:n.relationship},href:null!=n&&n.xApiId?{string:`/event/${n.xApiId}`}:void 0}]}:void 0,lnk:{contentClick:null,listClick:null,navClick:null,recClick:null},guest:t});function eh(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,o)}return n}function eg(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?eh(Object(n),!0).forEach(function(t){(0,o.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):eh(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}let ef=e=>"standard"===e?"default":e;function eb({content:e,metadata:t,options:n,order:o}){var l,i,d,k,w;let{background_color:C,endcap:S,margin_bottom:A,text_color:$,custom_headline:F}=null!=e?e:{},{fullWidth:z=!1}=null!=n?n:{},B=null!==(l=null!==(i=null==S?void 0:S.background_color)&&void 0!==i?i:C)&&void 0!==l?l:"",R=null!==(d=null!=$?$:null==S?void 0:S.text_color)&&void 0!==d?d:"",Z=(0,v.rS)(),{asPath:L}=(0,j.useRouter)(),W=(0,_.ew)(L),H=!C||"white"===C||"#FFFFFF"===C,{screenMd:M}=(0,u.l)(),V=(0,x.X)(),Y=(0,P.Y)(L),q=(0,O.Y)(),G=q(e=>{var t;return null==e?void 0:null===(t=e.metadata)||void 0===t?void 0:t["x-api-id"]}),[K,U]=(0,h.q)({placement_id:null==e?void 0:e.placement_id,category_id:null==e?void 0:e.category_id,brand_ids:null==e?void 0:e.brand_ids,offer_id:null==e?void 0:e.offer_id,fulfillment_types:null==e?void 0:e.fulfillment_types,slingshot_component_id:null==t?void 0:null===(k=t.components)||void 0===k?void 0:null===(w=k[0])||void 0===w?void 0:w.id,resolve_to_first_variation_child:"/c/0cb2f"===W,facet_ids:null==e?void 0:e.facet_ids}),X=U.isIdle||U.isFetching||U.isLoading,ee=K(g.fr),eo=Y?null!=F?F:"Headline placeholder":X?(0,r.jsx)("span",{children:"\xa0"}):null!=F?F:"Headline placeholder";(0,s.useEffect)(()=>{ee&&(Z&&Z.trackEvent(T(ee)),Z&&Z.trackEvent(I(ee)))},[ee,Z]);let er=(0,g.VB)(ee),el=(0,g.k2)(ee),ei=(0,g.Dm)(ee),ea=(0,g.YE)(ee),ed=D(er),ec={strategyId:ei,strategyName:ea},em=(0,f.Ao)(b.$y),eh=(0,s.useCallback)((n,r)=>l=>{let i=E(t,o);em?(Z.trackEvent(N(ed,l)),Z.trackEvent({event:{name:"openNewPage",source:`product ad | ${null==e?void 0:e.placement_id} | ${n}`,type:"click"},guest:{eventType:"click"},products:[{tcin:r}]})):(0,v.OK)({recClick:{position:n,productId:r,strategyId:ei,strategyName:ea,type:"product"},contentClick:i})},[null==e?void 0:e.placement_id,em,ei,ea,Z,ed,t,o]),eb=(0,s.useCallback)(e=>{var n,o;let r=e.target===e.currentTarget,l=e.currentTarget.contains(e.target);(r||l)&&Z.trackEvent(ev({name:"addToRegistry",source:null==t?void 0:null===(n=t.components)||void 0===n?void 0:null===(o=n[0])||void 0===o?void 0:o.id,type:"click"},{eventType:"click"},{xApiId:G,relationship:"components"}))},[t,Z,G]),ey=(0,s.useCallback)(e=>{var n,o;let r=e.target===e.currentTarget,l=e.currentTarget.contains(e.target);(r||l)&&Z.trackEvent(ev({name:"addToCart",source:null==t?void 0:null===(n=t.components)||void 0===n?void 0:null===(o=n[0])||void 0===o?void 0:o.id,type:"click"},{eventType:"click"},{xApiId:G,relationship:"components"}))},[t,Z,G]),e_=!!(null!=e&&e.placement_id)&&!!(null!=er&&er.length),ej=c()(S)?null:(0,r.jsx)(en.e,eg(eg({},S),{},{background_color:B,headline:el||(V?Y?null!=F?F:"Headline placeholder":X?void 0:null!=F?F:"Headline placeholder":""),text_color:R})),ex=M?ej:null,eP=M?null:ej,eO=a()(10).map(e=>(0,r.jsx)(ep.P,{},e)),ek=a()(10).map(e=>(0,r.jsx)(es,{useBorder:H},e)),ew=S?null:(0,r.jsx)(Q.J,{background_color:B||C,className:"l-container l-container-standard h-padding-a-x2",text_color:R,children:(0,r.jsx)(p.w,{className:"h-margin-b-none h-margin-t-x2",level:2,size:1,style:{color:"inherit"},children:el||(V?eo:X?(0,r.jsx)("span",{children:"\xa0"}):"")})});return V?(0,r.jsxs)("div",{"aria-label":"Carousel",className:`l-container ${z?"":"l-container-standard"}`,"data-test":et,role:"region",children:[ew,(0,r.jsxs)(Q.T,{backgroundColor:null==e?void 0:e.background_color,className:`${A?`h-margin-b-${ef(A)}`:""}`,"data-test":"filmstrip-products-carousel",extraPadding:!!(null!=e&&e.background_color)&&!ex&&M,children:[eP,(0,r.jsxs)(m.T,{children:[ex,c()(er)?X?Y?ek:eO:ek:null==er?void 0:er.map((t,n)=>{var o;return(0,r.jsx)(y.d,{debugName:"PersonalizationCarouselWithProducts",queryResult:U,value:eg({},t),children:(0,r.jsx)(J,{callToAction:null==e?void 0:null===(o=e.container)||void 0===o?void 0:o.callToAction,handleAddToCartClick:ey,handleAddToRegistryClick:eb,handleItemClick:eh(n,null==t?void 0:t.tcin),index:n,product:t,trackingPayload:ec,useBorder:H})},`product-${n}`)})]})]})]}):(0,r.jsx)(eu.p,{controlled:!0,noAnimation:X||e_,open:X||e_,variant:"bare",children:(0,r.jsxs)("div",{"aria-label":"Carousel",className:`l-container ${z?"":"l-container-standard"}`,"data-test":et,role:"region",children:[ew,(0,r.jsxs)(Q.T,{backgroundColor:null==e?void 0:e.background_color,className:`${A?`h-margin-b-${ef(A)}`:""}`,"data-test":"filmstrip-products-carousel",extraPadding:!!(null!=e&&e.background_color)&&!ex&&M,children:[eP,(0,r.jsxs)(m.T,{children:[ex,e_?er.map((t,n)=>{var o;return(0,r.jsx)(y.d,{debugName:"PersonalizationCarouselWithProducts",queryResult:U,value:eg({},t),children:(0,r.jsx)(J,{callToAction:null==e?void 0:null===(o=e.container)||void 0===o?void 0:o.callToAction,handleAddToCartClick:ey,handleAddToRegistryClick:eb,handleItemClick:eh(n,null==t?void 0:t.tcin),index:n,product:t,trackingPayload:ec,useBorder:H})},`product-${n}`)}):eO]})]})]})})}eb.displayName="ProductsCarousel";var ey=n(23258),e_=n(69390),ej=n(39271),ex=n(83047);let eP="@web/SlingshotComponents/PromotionsCarousel",eO=(e,t)=>({guest:{eventType:"click"},offerInfo:{offers:[{offerId:(0,ej.F5)(t[Number.parseInt(e,10)]),offerPosition:e,offerSelected:!0,offerType:"promo"}]}}),ek=(e,t,n)=>{if(!e.length)return{};let o=e.map((e,t)=>({offerId:e.promotion_id,offerPosition:String(t),offerType:"promo"}));return{offers:o,strategyId:t,strategyName:n}},ew=e=>{if(!e)return{};let{doctype:t,placement_id:n,strategy_description:o,strategy_id:r,strategy_name:l,promotions:i=[]}=e;return{guest:{eventType:"recommendations"},recommendations:{docType:t,placementId:n,strategyDescription:o,strategyId:r,strategyName:l,type:"promo"},products:i.map(({promotion_id:e})=>({placementType:"recommendations",tcin:e})),offerInfo:ek(i,r,l)}},eT=(e,t)=>{var n,o,r;let l=null!==(n=null==e?void 0:null===(o=e.components)||void 0===o?void 0:o[0])&&void 0!==n?n:{};return{name:null!==(r=null==l?void 0:l.title)&&void 0!==r?r:null==l?void 0:l.id,position:String(t),component:null!=l&&l.title?`${null==l?void 0:l.id} || ${null==l?void 0:l.title}`:null==l?void 0:l.id,componentType:null==l?void 0:l.type_name,contentType:null==l?void 0:l.content_type}};var eC=n(7337);let eN=({item:e,index:t,handleRecItemClick:n,useBorder:o})=>{let{pdp_message:l,messaging:i}=null!=e?e:{},{short_description:a,title:d,subtitle:c}=null!=i?i:{},s=(0,ej.F5)(e),u=null!=l?l:`${null!=a?a:""} ${null!=d?d:""} ${null!=c?c:""}`;return(0,r.jsxs)(G.a4,{"data-test":`item-card-${t}`,useBorder:o,children:[(0,r.jsxs)(A.F,{"aria-label":u,"data-index":t,"data-test":"deal-link",href:`/pl/${s}?link=prz_top_deals_`,onClick:n,style:{flex:"1 0 auto",color:"#333"},underline:"invert",children:[(0,r.jsx)(G.Vt,{alt:"",src:(0,ej.hc)(e)}),(0,r.jsxs)(G.Mv,{children:[!!i&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)($.k,{className:"h-text-red h-text-bold h-text-md","data-test":"pbo-short-desc",lines:1,children:a}),(0,r.jsx)($.k,{className:"h-text-bold h-text-md","data-test":"pbo-title",lines:2,children:d}),(0,r.jsx)($.k,{className:"h-text-md h-hidden-md-up","data-test":"pbo-sub-sm",lines:3,children:c}),(0,r.jsx)($.k,{className:"h-text-md h-hidden-sm-down","data-test":"pbo-sub-md-lg",lines:2,children:c})]}),!!l&&(0,r.jsx)($.k,{className:"h-text-red h-text-bold h-text-md","data-test":"basket-offers-message",lines:3,children:l})]})]}),(0,r.jsx)(G.W4,{children:(0,r.jsx)(eC.P,{"aria-label":`Shop offer ${u}`,"data-index":t,"data-test":"deals-item-link",href:`/pl/${s}?link=prz_top_deals_`,isFullWidth:!0,onClick:n,role:"button",size:"sm",children:"Shop offer"})})]})};eN.displayName="PromotionTile";var eI=(0,V.R)({tag:"error_boundary_prz_carousel_promotion_tile"})(eN),eE=n(86820);let eS=eo.ZP.div.attrs({className:"h-padding-h-tight"}).withConfig({displayName:"styles__StyledTextContainer",componentId:"sc-s1bnkt-0"})(["width:100%;h3{line-height:",";font-size:15px;@media (min-width:","){font-size:13px;}@media (min-width:","){font-size:15px;}}"],ee.font.lineHeight.heading,ee.breakpoints.lg,ee.breakpoints.xl),eD=eo.ZP.div.withConfig({displayName:"styles__StyledGlobalLinkWrapper",componentId:"sc-s1bnkt-1"})(["display:flex;position:relative;background:",";max-width:175px;padding:",";margin:",";text-align:center;width:100%;align-items:center;&::before{content:'';display:block;}"],ee.colors.palette.white,ee.space.generic.x3,ee.space.generic.x2),eA=(0,eo.ZP)(A.F).withConfig({displayName:"styles__StyledGlobalLink",componentId:"sc-s1bnkt-2"})(["width:100%;display:flex;align-items:center;min-height:66px;"]),e$=({global_link:e})=>{if(!e)return null;let{link_name:t="",link_tag:n,link_url:o}=e;return(0,r.jsx)(eD,{children:(0,r.jsx)(eA,{"data-lnk":n,href:o,children:(0,r.jsx)(eS,{children:(0,r.jsx)(p.w,{className:"h-margin-b-none",innerHTML:t,level:3,size:3})})})})};e$.displayName="GlobalLink";let eF=eo.ZP.div.withConfig({displayName:"PromotionTilePlaceholder__PlaceholderWrapper",componentId:"sc-1hj3rw-0"})(["margin:",";width:calc(100% - ",");min-width:110px;"],ee.space.generic.x1,ee.space.generic.x2),ez=eo.ZP.div.withConfig({displayName:"PromotionTilePlaceholder__ImagePlaceholderWrapper",componentId:"sc-1hj3rw-1"})(["width:100%;min-width:117px;"]),eB=eo.ZP.div.withConfig({displayName:"PromotionTilePlaceholder__ImagePlaceholder",componentId:"sc-1hj3rw-2"})(["position:relative;font-size:14px;&::before{content:' ';display:block;width:100%;padding-bottom:100%;background:#c4c4c4;}"]),eR=eo.ZP.div.withConfig({displayName:"PromotionTilePlaceholder__TitlePlaceholder",componentId:"sc-1hj3rw-3"})(["position:relative;font-size:14px;&::before{content:' ';display:block;width:50%;height:1em;background:",";margin-top:0.25em;margin-bottom:0.4em;}"],ee.colors.palette.red.default),eZ=eo.ZP.div.withConfig({displayName:"PromotionTilePlaceholder__TextPlaceholder",componentId:"sc-1hj3rw-4"})(["position:relative;font-size:14px;&::before{content:' ';display:block;width:90%;height:1em;background:#c4c4c4;margin-bottom:0.25em;}&::after{content:' ';display:block;width:80%;height:1em;background:#c4c4c4;margin-bottom:0.4em;}"]),eL=eo.ZP.div.withConfig({displayName:"PromotionTilePlaceholder__BottomTextPlaceholder",componentId:"sc-1hj3rw-5"})(["position:relative;font-size:14px;&::before{content:' ';display:block;width:70%;height:1em;background:#c4c4c4;margin-bottom:0.4em;}"]);function eW({useBorder:e}){return(0,r.jsxs)(G.a4,{"data-test":"@web/SiteTopOfFunnel/PromotionTilePlaceholder",useBorder:e,children:[(0,r.jsx)(ez,{children:(0,r.jsx)(eB,{})}),(0,r.jsxs)(eF,{children:[(0,r.jsx)(eR,{}),(0,r.jsx)(eZ,{}),(0,r.jsx)(eL,{})]})]})}function eH(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,o)}return n}function eM(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?eH(Object(n),!0).forEach(function(t){(0,o.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):eH(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}eW.displayName="PromotionTilePlaceholder";let eV=e=>"standard"===e?"default":e,eY=({content:e,options:t,metadata:n,order:o})=>{var l,i,d,h,g;let{placement_id:f,offer_id:b,endcap:y,global_link:_,background_color:O,margin_bottom:k,category_id:w,text_color:T,fulfillment_types:C,slingshot_component_id:N,custom_headline:I}=null!=e?e:{},{fullWidth:E=!1}=null!=t?t:{},{background_color:S,headline:D,image:A}=null!=y?y:{},$=!O||"white"===O||"#FFFFFF"===O,{trackEvent:F}=(0,v.rS)(),{screenMd:z}=(0,u.l)(),[B,R]=(0,e_.Ql)({category_id:w,offer_id:b,placement_id:null!=f?f:"promotions_component_tester",fulfillment_types:C,slingshot_component_id:N}),Z=R.isIdle||R.isFetching||R.isLoading,L=B(ex.yl),W=(0,s.useMemo)(()=>{var e;return null!==(e=B(ex.NT))&&void 0!==e?e:[]},[B]),H=B(ex.LA),M=B(ex.CV),V=B(ex.pA),Y=null!=V?V:D,q=(null!==(l=null==W?void 0:W.length)&&void 0!==l?l:0)>0,G=(null==n?void 0:null===(i=n.components)||void 0===i?void 0:null===(d=i[0])||void 0===d?void 0:null===(h=d.type_name)||void 0===h?void 0:h.toLocaleLowerCase())==="item or promotion carousel",K=(0,x.X)(),{asPath:U}=(0,j.useRouter)(),X=(0,P.Y)(U),J=X?null!=I?I:"Headline placeholder":Z?(0,r.jsx)("span",{children:"\xa0"}):null!=I?I:"Headline placeholder";(0,s.useEffect)(()=>{q&&F(ew(L))},[F,q,L]);let ee=(0,s.useCallback)(e=>{var t;let r=null==e?void 0:null===(t=e.currentTarget)||void 0===t?void 0:t.getAttribute("data-index"),l=eT(n,o);W&&r&&(F(eO(r,W)),(0,v.OK)({recClick:{position:+r,productId:(0,ej.F5)(W[Number.parseInt(r,10)]),strategyId:H,strategyName:M,type:"promo"},contentClick:l}))},[F,W,H,M,n,o]),et=(0,r.jsx)(eE.T,{backgroundColor:S,backgroundImages:A,headline:null!=Y?Y:"Top promotions",textColor:T}),eo=c()(y)?null:(0,r.jsx)(en.e,eM(eM({},y),{},{background_color:null!==(g=null!=S?S:O)&&void 0!==g?g:"",headline:Y||(K?X?null!=I?I:"Headline placeholder":Z?void 0:null!=I?I:"Headline placeholder":""),text_color:T})),er=z?G?eo:et:null,el=z?null:G?eo:et,ei=y?null:(0,r.jsx)(Q.J,{background_color:O,className:"l-container l-container-standard h-padding-a-x2",text_color:T,children:(0,r.jsx)(p.w,{className:"h-margin-b-none",level:2,size:1,style:{color:"inherit"},children:V||(K?J:Z?(0,r.jsx)("span",{children:"\xa0"}):"")})}),ea=a()(10).map(e=>(0,r.jsx)(ep.P,{},e)),ed=a()(10).map(e=>(0,r.jsx)(eW,{useBorder:$},e));return K?(0,r.jsxs)("div",{"aria-label":"Carousel",className:`l-container ${E?"":"l-container-standard"}`,"data-test":eP,role:"region",children:[ei,(0,r.jsxs)(Q.T,{backgroundColor:O,className:`${k?`h-margin-b-${eV(k)}`:""}`,"data-test":"filmstrip-deals-carousel",extraPadding:!!O&&!er&&z,children:[el,(0,r.jsxs)(m.T,{children:[er,q?W.map((e,t)=>(0,r.jsx)(eI,{handleRecItemClick:ee,index:t,item:e,useBorder:$},e.promotion_id)):Z?X?ed:ea:ed,(0,r.jsx)(e$,{global_link:_})]})]})]}):(0,r.jsx)(eu.p,{controlled:!0,noAnimation:Z||q,open:Z||q,variant:"bare",children:(0,r.jsxs)("div",{"aria-label":"Carousel",className:`l-container ${E?"":"l-container-standard"}`,"data-test":eP,role:"region",children:[ei,(0,r.jsxs)(Q.T,{backgroundColor:O,className:`${k?`h-margin-b-${eV(k)}`:""}`,"data-test":"filmstrip-deals-carousel",extraPadding:!!O&&!er&&z,children:[el,(0,r.jsxs)(m.T,{children:[er,q?W.map((e,t)=>(0,r.jsx)(eI,{handleRecItemClick:ee,index:t,item:e,useBorder:$},e.promotion_id)):ea,(0,r.jsx)(e$,{global_link:_})]})]})]})})};function eq(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,o)}return n}function eG(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?eq(Object(n),!0).forEach(function(t){(0,o.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):eq(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}eY.displayName="PromotionsCarousel";let eK=e=>{var t,n,o,i,a;let{content:d,options:c,metadata:s,order:u,componentId:p}=e,m=(0,l.g)(null==d?void 0:null===(t=d.container)||void 0===t?void 0:null===(n=t.keyValuePairs)||void 0===n?void 0:n.context),v=eG(eG({},d),{},{brand_ids:null==m?void 0:m.brandId,category_id:null==m?void 0:m.categoryId,fulfillment_types:null==m?void 0:m.fulfillmentId,offer_id:null==m?void 0:m.offerId,placement_id:null==m?void 0:m.placementId,slingshot_component_id:p,facet_ids:null==m?void 0:m.facetId});return(null==d?void 0:null===(o=d.container)||void 0===o?void 0:o.type)==="personalizedProducts"?(0,r.jsx)(eb,{content:v,metadata:s,options:c,order:u}):(null==d?void 0:null===(i=d.container)||void 0===i?void 0:i.type)==="personalizedPromotions"?(0,r.jsx)(eY,{content:v,metadata:s,options:c,order:u}):(null==d?void 0:null===(a=d.container)||void 0===a?void 0:a.type)==="personalizedOffers"?(0,r.jsx)(ey.Zo,{content:v,metadata:s,options:c,order:u}):null};eK.displayName="PersonalizationCarousel"}}]);